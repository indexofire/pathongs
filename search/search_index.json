{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u66f4\u65b0 \u00b6 2020.3.20 \u6dfb\u52a0 artic network \u5173\u4e8e covid19 \u65b0\u51a0\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u65b9\u6cd5 \u5f00\u59cb\u4e4b\u524d \u00b6 \u75c5\u539f\u5fae\u751f\u7269\u4e0e\u6d4b\u5e8f\u6280\u672f \u00b6 \u6d4b\u5e8f\u6280\u672f \u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5df2\u7ecf\u53d1\u5c55\u4e86\u5f88\u591a\u5e74\uff0c\u5e7f\u53d7\u6b22\u8fce\u7684\u5c0f\u578b\u6d4b\u5e8f\u4eeaMiSeq\u548cPGM\u5df2\u7ecf\u7ecf\u5386\u4f4f\u5e02\u573a\u7684\u8003\u9a8c\u3002\u540c\u65f6\u65b0\u7684\u6280\u672f\u548c\u4eea\u5668\u7684\u51fa\u73b0\u4ecd\u5728\u4e0d\u505c\u63a8\u52a8\u6d4b\u5e8f\u6280\u672f\u9886\u57df\u7684\u5e94\u7528\uff0c\u5982PacBio\u65d7\u4e0b\u6d4b\u5e8f\u4eea\u5bf9\u957f\u7247\u6bb5\u6d4b\u5e8f\u7684\u5e94\u7528\uff1bNanopore MinIon\u6d4b\u5e8f\u4eea\u5728\u8bb8\u591a\u4f20\u67d3\u75c5\u75ab\u60c5\u7684\u73b0\u573a\u5b9e\u65f6\u6d4b\u5e8f\u5e94\u7528\uff1b\u4e2d\u56fdCDC\u5728\u56fd\u5185\u90e8\u5206\u7701\u7ea7CDC\u5f00\u5c55\u7684\u534e\u5927\u81ea\u4e3b\u6d4b\u5e8f\u4eea\u7684\u5e94\u7528\u7b49\u7b49\u3002 \u968f\u7740Pulsenet China\u7684\u9010\u6e10\u5b8c\u5584\uff0c\u5229\u7528NGS\u6280\u672f\u5bf9\u75c5\u539f\u8fdb\u884c\u7814\u7a76\u7684\u5de5\u4f5c\u8fdf\u65e9\u4f1a\u6210\u4e3a\u4e00\u79cd\u516c\u5171\u536b\u751f\u5b9e\u9a8c\u5ba4\u68c0\u9a8c\u4eba\u5458\u7684\u65e5\u5e38\u6d3b\u52a8\u3002\u8fd9\u4e2a\u5de5\u4f5c\u5305\u542b\u4e86\u6838\u9178\u63d0\u53d6\u3001\u6587\u5e93\u5236\u5907\u3001\u6d4b\u5e8f\u3001\u6570\u636e\u5206\u6790\u3002\u524d3\u9879\u5bf9\u4e8e\u75be\u63a7\u4e2d\u5fc3\u5b9e\u9a8c\u5ba4\u4eba\u5458\u6765\u8bf4\u5e76\u975e\u96be\u4e8b\uff0c\u4f46\u662f\u6570\u636e\u5206\u6790\u5bf9\u4e8e\u533b\u5b66\u6216\u8005\u751f\u7269\u5b66\u80cc\u666f\u7684CDCers\u6765\u8bf4\u5f80\u5f80\u6210\u4e86\u6700\u5927\u7684\u75db\u70b9\u3002 \u5bf9\u4e8e\u79d1\u7814\u5de5\u4f5c\uff0c\u53ef\u4ee5\u4e0e\u4e13\u4e1a\u7684\u751f\u4fe1\u516c\u53f8\u4eba\u5458\u5408\u4f5c\u3002\u4f46\u662f\u5bf9\u4e8e\u65e5\u5e38\u5de5\u4f5c\uff0c\u76ee\u524d\u603b\u4f53\u4e0a\u8fd8\u662f\u7f3a\u4e4f\u5b8c\u5584\u7684\u5de5\u4f5c\u6d41\u3002\u5373\u4f7f\u662f\u90e8\u7f72\u4e0aGUI\u7a0b\u5e8f\u5982CLC Workbench\uff0c\u6216\u8005\u662f\u7c7b\u4f3cGalaxy\u8fd9\u6837\u7684web\u5e73\u53f0\u7684\u5e94\u7528\uff0c\u5982\u679c\u7f3a\u4e4f\u5bf9\u6570\u636e\u5206\u6790\u6700\u57fa\u672c\u7684\u6982\u5ff5\uff0c\u90a3\u4e5f\u53ea\u80fd\u662f\u7a7a\u6709\u4e00\u8eab\u88c5\u5907\u5374\u65e0\u6cd5\u53d1\u6325\u3002\u79d1\u6280\u53d1\u5c55\u7684\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u5bf9\u4e8e\u75be\u63a7\u7cfb\u7edf\u6765\u8bf4\uff0c\u52a0\u5feb\u5e94\u7528\u65b0\u6280\u672f\u65b0\u65b9\u6cd5\u7684\u80fd\u529b\u63d0\u5347\uff0c\u7279\u522b\u662f\u4e0d\u64c5\u957f\u7684\u8ba1\u7b97\u3001\u4fe1\u606f\u6570\u636e\u7684\u5206\u6790\u80fd\u529b\uff0c\u5efa\u8bae\u5c3d\u65e9\u5e03\u5c40\u3002 \u5173\u4e8e\u6211\u4eec \u00b6 \u676d\u5dde\u5e02\u75be\u63a7\u4e2d\u5fc3\u5fae\u751f\u7269\u68c0\u9a8c\u79d1\u75c5\u539f\u5fae\u751f\u7269\u6d4b\u5e8f\u5b9e\u9a8c\u5ba4 \uff1a\u4ece2011\u5e74\u8d77\u5f00\u59cb\u5173\u6ce8NGS\u6280\u672f\u7684\u53d1\u5c55\u548c\u5728CDC\u9886\u57df\u5185\u7684\u5e94\u7528\u3002\u76ee\u524d\u5df2\u7ecf\u57fa\u672c\u5efa\u8bbe\u4e86\u4e8c\u4ee3\u9ad8\u901a\u91cf\u6d4b\u5e8f\u548c\u4e09\u4ee3\u5355\u5206\u5b50\u5b9e\u65f6\u6d4b\u5e8f\u5b9e\u9a8c\u5ba4\uff0c\u4e5f\u6784\u5efa\u4e86\u751f\u7269\u4fe1\u606f\u8ba1\u7b97\u786c\u4ef6\u8bbe\u5907\u3002\u901a\u8fc7\u6709\u8ba1\u5212\u7684\u5b66\u4e60\u548c\u8fdb\u4fee\uff0c\u521d\u6b65\u5177\u5907\u4e86\u5e94\u7528\u6d4b\u5e8f\u6280\u672f\u5f00\u5c55\u75c5\u539f\u5e94\u6025\u9632\u63a7\u7684\u80fd\u529b\u3002\u6700\u8fd1\u51e0\u5e74\u4e5f\u5728\u6d41\u611f\u75c5\u6bd2\u3001\u767b\u9769\u70ed\u75c5\u6bd2\u3001\u8bfa\u5982\u75c5\u6bd2\u548c\u970d\u4e71\u5f27\u83cc\u3001\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u3001\u5355\u589e\u674e\u65af\u7279\u83cc\u3001\u6c99\u95e8\u83cc\u3001\u7a7a\u80a0\u5f2f\u66f2\u83cc\u3001\u8721\u6837\u82bd\u80de\u6746\u83cc\u3001\u962a\u5d0e\u80a0\u6746\u83cc\u7b49\u75c5\u539f\u4f53\u7684\u5e94\u6025\u68c0\u6d4b\u548c\u79d1\u5b66\u7814\u7a76\u65b9\u9762\u505a\u4e86\u4e00\u4e9b\u5de5\u4f5c\u3002 \u5173\u4e8e\u672c\u6559\u7a0b \u00b6 \u968f\u7740\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5feb\u901f\u53d1\u5c55\uff0c\u5c0f\u578b\u53f0\u5f0f\u6d4b\u5e8f\u4eea\u7684\u51fa\u73b0\u964d\u4f4e\u4e86\u9ad8\u901a\u91cf\u6d4b\u5e8f\u7684\u95e8\u69db\u3002\u5bf9\u4e8e\u5f00\u5c55\u5fae\u751f\u7269\u7279\u522b\u662f\u75c5\u539f\u5fae\u751f\u7269\u7684\u6d4b\u5e8f\u5de5\u4f5c\u7684\u9700\u6c42\uff0c\u5728\u5404\u79cd\u4e34\u5e8a\uff0c\u79d1\u7814\u4ee5\u53ca\u653f\u5e9c\u7684\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u4e2d\u8fc5\u901f\u6269\u5c55\u3002\u76ee\u524d\u5df2\u7ecf\u4e0a\u5e02\u7684\u6bd4\u8f83\u9002\u5408\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina Miseq \uff0c Illumina NextSeq500 \uff0c Ion S5 \uff0c Ion PGM \u7b49\uff0c\u5373\u5c06\u4e0a\u5e02\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina MiniSeq \uff0c Qiagen GeneReader \u3002\u9664\u4e86\u4f20\u7edf\u7684\u4e8c\u4ee3\u6d4b\u5e8f\u4eea\uff0c\u4e0d\u9700\u8981\u6269\u589e\u7684\u57fa\u4e8e\u5355\u5206\u5b50\u6d4b\u5e8f\u6280\u672f\u7684\u4e09\u4ee3\u6d4b\u5e8f\u6280\u672f\u7684 PacBio Sequel \u548c\u6700\u8fd1\u5f00\u5c55\u57c3\u535a\u62c9\u5b9e\u65f6\u6d4b\u5e8f\u9879\u76ee\u7684\u57fa\u4e8e\u7eb3\u7c73\u5b54\u6280\u672f\u7684 Oxford MinION \u4ea7\u54c1\u90fd\u662f\u975e\u5e38\u9002\u5408\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6d4b\u5e8f\u7684\u5e73\u53f0\u3002 \u6d4b\u5e8f\u6570\u636e\u7684\u4e0d\u65ad\u4ea7\u51fa\uff0c\u9700\u8981\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u6765\u53c2\u4e0e\u5230\u6d4b\u5e8f\u6570\u636e\u7684\u5206\u6790\u4ee5\u4fbf\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u751f\u7269\u5b66\u4fe1\u606f\u5bf9\u4e8e\u8bb8\u591a\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u6765\u8bf4\uff0c\u5f88\u96be\u62db\u52df\u5230\u4f18\u79c0\u7684\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u3002\u5bf9\u4e8e\u975e\u4e13\u4e1a\u80cc\u666f\u7684\u4eba\u6765\u8bf4\uff0c\u547d\u4ee4\u884c\u4ee5\u53ca\u8f6f\u4ef6\u7684\u5b89\u88c5\u53ef\u80fd\u662f\u5b66\u4e60\u4e2d\u9047\u5230\u7684\u9996\u8981\u96be\u9898\u3002\u672c\u7b14\u8bb0\u4e3b\u8981\u662f\u901a\u8fc7\u4ecb\u7ecd\u5fae\u751f\u7269\uff0c\u7279\u522b\u662f\u75c5\u539f\u7ec6\u83cc\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5e2e\u52a9\u539f\u6765\u4ece\u4e8b\u6e7f\u5b9e\u9a8c\u9886\u57df\u7684\u540c\u4e8b\u80fd\u8f83\u597d\u7684\u4e86\u89e3\u548c\u638c\u63e1\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5c06\u5b66\u4e60\u66f2\u7ebf\u53d8\u5f97\u5e73\u7f13\u3002\u540c\u65f6\u4e5f\u5e0c\u671b\u80fd\u5bf9\u4ece\u4e8b\u8be5\u9886\u57df\u7684\u5176\u4ed6\u5de5\u4f5c\u8005\u63d0\u4f9b\u4fbf\u5229\uff0c\u8ba9\u5927\u5bb6\u5728\u9700\u8981\u5206\u6790\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6570\u636e\u65f6\uff0c\u80fd\u6709\u4e00\u4e2a\u8d44\u6599\u4e0e\u5b9e\u4f8b\u6c47\u96c6\u7684\u624b\u518c\u53ef\u4ee5\u5feb\u901f\u53c2\u8003\u548c\u5b66\u4e60\u3002 \u672c\u7b14\u8bb0\u4e3b\u8981\u9488\u5bf9 Miseq \u673a\u5668\u7684\u4ea7\u51fa\u6570\u636e\u5f00\u5c55\u5206\u6790\uff0c\u7531\u4e8e\u539f\u7406\u7c7b\u4f3c\u5206\u6790\u8f6f\u4ef6\u4e5f\u5927\u90fd\u53ef\u4ee5\u5e94\u7528\u5728 Illumina \u5176\u4ed6\u578b\u53f7\u7684\u4eea\u5668\u6570\u636e\u4e0a\u3002\u4f8b\u5b50\u90fd\u662f\u8fd0\u884c\u5728\u5b89\u88c5\u4e86 Ubuntu \u53d1\u884c\u7248\u7684 Linux PC \u670d\u52a1\u5668\u6216\u8005 Ubuntu \u7684\u4e2a\u4eba\u7535\u8111\u4e0a\u3002 \u672c\u7b14\u8bb0\u4f7f\u7528\u5f00\u6e90\u5de5\u5177 Gitbook \u521b\u4f5c\uff0c\u4ecb\u7ecd\u7684\u5de5\u5177\u4e5f\u51e0\u4e4e\u5747\u4e3a\u5f00\u6e90\u8f6f\u4ef6\u3002\u7b14\u8bb0\u4e2d\u7684\u8bb8\u591a\u5185\u5bb9\u90fd\u662f\u6765\u6e90\u4e8e\u7f51\u7edc\u4e0a\u7684\u8d44\u6599\uff0c\u90e8\u5206\u6765\u6e90\u53ef\u80fd\u6709\u8bef\u6216\u8bb0\u5fc6\u4e0d\u5168\uff0c\u5982\u679c\u539f\u4f5c\u8005\u53d1\u73b0\u6ca1\u6709\u5185\u5bb9\u94fe\u63a5\uff0c\u6216\u8005\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u53d1\u9001 \u7535\u5b50\u90ae\u4ef6 \u901a\u77e5\u4fee\u6539\u3002\u540c\u65f6\u5e0c\u671b Open Source \u601d\u60f3\u80fd\u5bf9\u79d1\u7814\u5de5\u4f5c\u548c\u79d1\u7814\u5de5\u4f5c\u8005\u6709\u6240\u5e2e\u52a9\u3002 \u672c\u7b14\u8bb0\u4ee3\u7801\u6258\u7ba1\u5728 Github , \u53ef\u4ee5\u8bbf\u95ee http://github.com/indexofire/pathongs.git \u83b7\u5f97\u6e90\u7801\u3002\u6d4b\u5e8f\u6280\u672f\u662f\u4e00\u4e2a\u98de\u5feb\u53d1\u5c55\u7684\u9886\u57df\uff0c\u6559\u7a0b\u4e2d\u5b58\u5728\u7684\u9519\u8bef\u548c\u4e0d\u8db3\u4e4b\u5904\uff0c\u6b22\u8fce\u63d0\u4ea4 issues \u3002 Fork\u7b14\u8bb0\u65b9\u6cd5 \u00b6 \u5728GitHub\u4e0a\u8bbf\u95ee\u672c\u4e66\u6e90\u7801\uff0c\u5e76fork\u6210\u4e3a\u81ea\u5df1\u7684\u4ed3\u5e93\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u70b9\u51fbfork\u6309\u94ae\uff0c\u7136\u540e\u7528 git clone \u5230\u672c\u5730\uff0c\u8bbe\u7f6e\u597d\u4ee3\u7801\u4ed3\u5e93\u7528\u6237\u4fe1\u606f\u3002\u5c31\u53ef\u4ee5\u4fee\u6539\u5e76\u63d0\u4ea4\u4ee3\u7801\u4e86\u3002 $ git clone git@github.com:your_github_username/pathongs.git $ cd pathongs $ git config user.name \"your github username\" $ git config user.email your_email@something.com \u5bf9\u9700\u8981\u7684\u5185\u5bb9\u505a\u4fee\u6539\u540e\u63d0\u4ea4\uff0c\u5e76 git push \u5230\u4e4b\u524d fork \u7684\u4ed3\u5e93\u3002 $ git add -A $ git commit -am \"Fix issue #1: change typo: helo to hello\" $ git push \u8fd9\u6837\u4f60\u81ea\u5df1\u7684\u4ee3\u7801\u5206\u652f master \u4e0e\u6e90\u4ee3\u7801\u5206\u652f\u5c31\u4f1a\u51fa\u73b0\u5dee\u5f02\uff0c\u8981\u5408\u5e76\u8fd9\u4e9b\u5dee\u5f02\uff0c\u5c31\u8981\u5728GitHub\u7f51\u7ad9\u4e0a\u63d0\u4ea4 pull request \u3002\u5982\u4e0b\u56fe\u6240\u793a\u5982\u679c\u6709\u4ee3\u7801\u3002 \u7531\u4e8e\u6e90\u4ee3\u7801\u4ed3\u5e93\u4e5f\u4f1a\u7ecf\u5e38\u66f4\u65b0\u6216\u8005\u5408\u5e76\u5176\u4ed6pull request\u4ee3\u7801\uff0c\u9700\u8981\u5b9a\u671f\u4f7f\u7528\u6e90\u9879\u76ee\u4ed3\u5e93\u5185\u5bb9\u6765\u66f4\u65b0\u81ea\u5df1\u4ed3\u5e93\u5185\u5bb9\u3002 $ git remote add upstream https://github.com/indexofire/pathongs.git $ git fetch upstream $ git checkout master $ git merge upstream/master $ git push origin master \u5185\u5bb9\u64cd\u4f5c\u63d0\u793a \u00b6 \u73af\u5883\u5dee\u5f02 \u5927\u90e8\u5206\u793a\u4f8b\u90fd\u662f\u5728 Ubuntu/Archlinux \u73af\u5883\u4e0b\u5b9e\u73b0\u7684\u3002\u5bf9\u4e8e\u8f6f\u4ef6\u7684\u5b89\u88c5\u548c\u8fd0\u884c\uff1a \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Windows10 bash\u73af\u5883\u6216Windows\u865a\u62df\u673a\uff0c\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u51fa\u5165\uff0c\u6216\u65e0\u6cd5\u8fd0\u884c\u7684\u60c5\u51b5\uff0c\u5177\u4f53\u95ee\u9898\u81ea\u5df1\u52a8\u624b\u89e3\u51b3\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Macintosh OS X \u7cfb\u7edf\uff0c\u9664\u4e86\u4e00\u4e9b\u8f6f\u4ef6\u5b89\u88c5\u548c\u53c2\u6570\u548c\u8def\u5f84\u8bbe\u7f6e\u5916\uff0c\u5927\u90e8\u5206\u4f8b\u5b50\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u8fd0\u884c\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u7279\u522b\u662f\u4e0d\u5c5e\u4e8e Debian/Archlinux \u4f53\u7cfb\u7684\u53d1\u884c\u529e\uff0c\u5982\u7ea2\u5e3d\u5b50\u7cfb\u7684 CentOS \u7b49\uff0c\u5219\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u547d\u4ee4\u6765\u8fd0\u884c\u6216\u5b89\u88c5\uff0c\u4e0e\u53d1\u884c\u7248\u65e0\u5173\u7684\u5927\u90e8\u5206 Linux \u64cd\u4f5c\u4e0d\u5b58\u5728\u533a\u522b\u3002 Linux \u4e0e\u751f\u7269\u4fe1\u606f \u00b6 Linux \u4e0e\u751f\u7269\u4fe1\u606f\u5b66\u7d27\u5bc6\u76f8\u5173\uff0c\u8bb8\u591a\u8f6f\u4ef6\u8fd0\u884c\u548c\u6570\u636e\u5206\u6790\u90fd\u9002\u5408\u6216\u5fc5\u987b\u8fd0\u884c\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002\u5173\u4e8e Linux \u7684\u6559\u5b66\u7f51\u7edc\u4e0a\u4e0d\u8ba1\u5176\u6570\uff0c\u8fd9\u91cc\u53ea\u5bf9\u5728\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u4e2d\u53ef\u80fd\u6d89\u53ca\u5230\u7684\u4e00\u4e9b\u57fa\u672c Linux \u64cd\u4f5c\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\u3002 \u751f\u4fe1\u8fd0\u884c\u73af\u5883 \u00b6 \u751f\u4fe1\u8f6f\u4ef6\u7684\u8fd0\u884c\u5e73\u53f0\u73af\u5883\u4e00\u822c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a \u57fa\u4e8eweb\uff1a\u53ef\u4ee5\u5728win/mac/linux/bsd\u7b49\u5e73\u53f0\u8fd0\u884c\uff0c\u53ea\u9700\u7cfb\u7edf\u6709\u56fe\u5f62\u754c\u9762\uff0c\u5e76\u5b89\u88c5\u4e86\u73b0\u4ee3\u5316\u7684\u4e3b\u6d41\u6d4f\u89c8\u5668\u5982chrome/firefox\u7b49\u3002 \u7eafwindows\u73af\u5883\uff1a\u5e38\u89c1\u7684\u5546\u4e1a\u8f6f\u4ef6\u5f80\u5f80\u53ea\u80fd\u5728win\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5982bionumerics\u7b49\u3002 \u591a\u5e73\u53f0\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u662f\u91c7\u7528java\u5f00\u53d1\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u5e73\u53f0\u4e0b\u8fd0\u884c\u3002\u4e00\u4e9bC\u5f00\u53d1\u7684\u7a0b\u5e8f\u4e5f\u6709win/mac/linux\u7248\u672c\u3002 \u7eaflinux\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u53ea\u80fd\u5728linux/mac\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u53c8\u662f\u57fa\u4e8e\u547d\u4ee4\u884c\u800c\u4e0d\u9700\u8981\u56fe\u5f62\u754c\u9762\u3002 Linux\u53d1\u884c\u7248 \u00b6 \u5e38\u89c1\u7684Linux\u53d1\u884c\u7248\uff1a Ubuntu CentOS ArchLinux \u65e0\u8bba\u662f\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\uff0c\u6216\u8005\u662f\u4e2a\u4eba\u684c\u9762\u4f7f\u7528Linux\uff0c\u90fd\u9700\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u4f7f\u7528\u54ea\u4e00\u4e2a\u53d1\u884c\u7248\u3002\u670d\u52a1\u5668\u5e38\u7528\u7684Linux\u53d1\u884c\u7248\u6709CentOS, Debian, Ubuntu\u7b49\uff0c\u684c\u9762\u53d1\u884c\u7248\u975e\u5e38\u591a\uff0c\u4e3b\u8981\u6709\u57fa\u4e8eUbuntu\uff0c\u57fa\u4e8eArchlinux\u7b49\u53d1\u884c\u7248\u3002\u4e0d\u540c\u7684\u53d1\u884c\u7248\u76f8\u5f53\u4e8e\u4f7f\u7528\u4e0d\u540c\u7684\u5305\u7ba1\u7406\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7cfb\u7edf\u63a7\u5236\u65b9\u5f0f\u7b49\u65b9\u9762\u5b58\u5728\u533a\u522b\u3002 \u6bd4\u5982\u5305\u7ba1\u7406\u548c\u5b89\u88c5\u7684\u5dee\u522b\uff1a # \u4ee5\u4e0b\u5206\u522b\u662f\uff1aCentOS, Debian/Ubuntu, Archlinux \u5b89\u88c5 bwa \u8f6f\u4ef6\u7684\u65b9\u5f0f $ sudo yum install bwa $ sudo apt-get install bwa $ sudo pacman -S bwa","title":"\u9996\u9875"},{"location":"#_1","text":"2020.3.20 \u6dfb\u52a0 artic network \u5173\u4e8e covid19 \u65b0\u51a0\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u65b9\u6cd5","title":"\u66f4\u65b0"},{"location":"#_2","text":"","title":"\u5f00\u59cb\u4e4b\u524d"},{"location":"#_3","text":"\u6d4b\u5e8f\u6280\u672f \u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5df2\u7ecf\u53d1\u5c55\u4e86\u5f88\u591a\u5e74\uff0c\u5e7f\u53d7\u6b22\u8fce\u7684\u5c0f\u578b\u6d4b\u5e8f\u4eeaMiSeq\u548cPGM\u5df2\u7ecf\u7ecf\u5386\u4f4f\u5e02\u573a\u7684\u8003\u9a8c\u3002\u540c\u65f6\u65b0\u7684\u6280\u672f\u548c\u4eea\u5668\u7684\u51fa\u73b0\u4ecd\u5728\u4e0d\u505c\u63a8\u52a8\u6d4b\u5e8f\u6280\u672f\u9886\u57df\u7684\u5e94\u7528\uff0c\u5982PacBio\u65d7\u4e0b\u6d4b\u5e8f\u4eea\u5bf9\u957f\u7247\u6bb5\u6d4b\u5e8f\u7684\u5e94\u7528\uff1bNanopore MinIon\u6d4b\u5e8f\u4eea\u5728\u8bb8\u591a\u4f20\u67d3\u75c5\u75ab\u60c5\u7684\u73b0\u573a\u5b9e\u65f6\u6d4b\u5e8f\u5e94\u7528\uff1b\u4e2d\u56fdCDC\u5728\u56fd\u5185\u90e8\u5206\u7701\u7ea7CDC\u5f00\u5c55\u7684\u534e\u5927\u81ea\u4e3b\u6d4b\u5e8f\u4eea\u7684\u5e94\u7528\u7b49\u7b49\u3002 \u968f\u7740Pulsenet China\u7684\u9010\u6e10\u5b8c\u5584\uff0c\u5229\u7528NGS\u6280\u672f\u5bf9\u75c5\u539f\u8fdb\u884c\u7814\u7a76\u7684\u5de5\u4f5c\u8fdf\u65e9\u4f1a\u6210\u4e3a\u4e00\u79cd\u516c\u5171\u536b\u751f\u5b9e\u9a8c\u5ba4\u68c0\u9a8c\u4eba\u5458\u7684\u65e5\u5e38\u6d3b\u52a8\u3002\u8fd9\u4e2a\u5de5\u4f5c\u5305\u542b\u4e86\u6838\u9178\u63d0\u53d6\u3001\u6587\u5e93\u5236\u5907\u3001\u6d4b\u5e8f\u3001\u6570\u636e\u5206\u6790\u3002\u524d3\u9879\u5bf9\u4e8e\u75be\u63a7\u4e2d\u5fc3\u5b9e\u9a8c\u5ba4\u4eba\u5458\u6765\u8bf4\u5e76\u975e\u96be\u4e8b\uff0c\u4f46\u662f\u6570\u636e\u5206\u6790\u5bf9\u4e8e\u533b\u5b66\u6216\u8005\u751f\u7269\u5b66\u80cc\u666f\u7684CDCers\u6765\u8bf4\u5f80\u5f80\u6210\u4e86\u6700\u5927\u7684\u75db\u70b9\u3002 \u5bf9\u4e8e\u79d1\u7814\u5de5\u4f5c\uff0c\u53ef\u4ee5\u4e0e\u4e13\u4e1a\u7684\u751f\u4fe1\u516c\u53f8\u4eba\u5458\u5408\u4f5c\u3002\u4f46\u662f\u5bf9\u4e8e\u65e5\u5e38\u5de5\u4f5c\uff0c\u76ee\u524d\u603b\u4f53\u4e0a\u8fd8\u662f\u7f3a\u4e4f\u5b8c\u5584\u7684\u5de5\u4f5c\u6d41\u3002\u5373\u4f7f\u662f\u90e8\u7f72\u4e0aGUI\u7a0b\u5e8f\u5982CLC Workbench\uff0c\u6216\u8005\u662f\u7c7b\u4f3cGalaxy\u8fd9\u6837\u7684web\u5e73\u53f0\u7684\u5e94\u7528\uff0c\u5982\u679c\u7f3a\u4e4f\u5bf9\u6570\u636e\u5206\u6790\u6700\u57fa\u672c\u7684\u6982\u5ff5\uff0c\u90a3\u4e5f\u53ea\u80fd\u662f\u7a7a\u6709\u4e00\u8eab\u88c5\u5907\u5374\u65e0\u6cd5\u53d1\u6325\u3002\u79d1\u6280\u53d1\u5c55\u7684\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u5bf9\u4e8e\u75be\u63a7\u7cfb\u7edf\u6765\u8bf4\uff0c\u52a0\u5feb\u5e94\u7528\u65b0\u6280\u672f\u65b0\u65b9\u6cd5\u7684\u80fd\u529b\u63d0\u5347\uff0c\u7279\u522b\u662f\u4e0d\u64c5\u957f\u7684\u8ba1\u7b97\u3001\u4fe1\u606f\u6570\u636e\u7684\u5206\u6790\u80fd\u529b\uff0c\u5efa\u8bae\u5c3d\u65e9\u5e03\u5c40\u3002","title":"\u75c5\u539f\u5fae\u751f\u7269\u4e0e\u6d4b\u5e8f\u6280\u672f"},{"location":"#_4","text":"\u676d\u5dde\u5e02\u75be\u63a7\u4e2d\u5fc3\u5fae\u751f\u7269\u68c0\u9a8c\u79d1\u75c5\u539f\u5fae\u751f\u7269\u6d4b\u5e8f\u5b9e\u9a8c\u5ba4 \uff1a\u4ece2011\u5e74\u8d77\u5f00\u59cb\u5173\u6ce8NGS\u6280\u672f\u7684\u53d1\u5c55\u548c\u5728CDC\u9886\u57df\u5185\u7684\u5e94\u7528\u3002\u76ee\u524d\u5df2\u7ecf\u57fa\u672c\u5efa\u8bbe\u4e86\u4e8c\u4ee3\u9ad8\u901a\u91cf\u6d4b\u5e8f\u548c\u4e09\u4ee3\u5355\u5206\u5b50\u5b9e\u65f6\u6d4b\u5e8f\u5b9e\u9a8c\u5ba4\uff0c\u4e5f\u6784\u5efa\u4e86\u751f\u7269\u4fe1\u606f\u8ba1\u7b97\u786c\u4ef6\u8bbe\u5907\u3002\u901a\u8fc7\u6709\u8ba1\u5212\u7684\u5b66\u4e60\u548c\u8fdb\u4fee\uff0c\u521d\u6b65\u5177\u5907\u4e86\u5e94\u7528\u6d4b\u5e8f\u6280\u672f\u5f00\u5c55\u75c5\u539f\u5e94\u6025\u9632\u63a7\u7684\u80fd\u529b\u3002\u6700\u8fd1\u51e0\u5e74\u4e5f\u5728\u6d41\u611f\u75c5\u6bd2\u3001\u767b\u9769\u70ed\u75c5\u6bd2\u3001\u8bfa\u5982\u75c5\u6bd2\u548c\u970d\u4e71\u5f27\u83cc\u3001\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u3001\u5355\u589e\u674e\u65af\u7279\u83cc\u3001\u6c99\u95e8\u83cc\u3001\u7a7a\u80a0\u5f2f\u66f2\u83cc\u3001\u8721\u6837\u82bd\u80de\u6746\u83cc\u3001\u962a\u5d0e\u80a0\u6746\u83cc\u7b49\u75c5\u539f\u4f53\u7684\u5e94\u6025\u68c0\u6d4b\u548c\u79d1\u5b66\u7814\u7a76\u65b9\u9762\u505a\u4e86\u4e00\u4e9b\u5de5\u4f5c\u3002","title":"\u5173\u4e8e\u6211\u4eec"},{"location":"#_5","text":"\u968f\u7740\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5feb\u901f\u53d1\u5c55\uff0c\u5c0f\u578b\u53f0\u5f0f\u6d4b\u5e8f\u4eea\u7684\u51fa\u73b0\u964d\u4f4e\u4e86\u9ad8\u901a\u91cf\u6d4b\u5e8f\u7684\u95e8\u69db\u3002\u5bf9\u4e8e\u5f00\u5c55\u5fae\u751f\u7269\u7279\u522b\u662f\u75c5\u539f\u5fae\u751f\u7269\u7684\u6d4b\u5e8f\u5de5\u4f5c\u7684\u9700\u6c42\uff0c\u5728\u5404\u79cd\u4e34\u5e8a\uff0c\u79d1\u7814\u4ee5\u53ca\u653f\u5e9c\u7684\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u4e2d\u8fc5\u901f\u6269\u5c55\u3002\u76ee\u524d\u5df2\u7ecf\u4e0a\u5e02\u7684\u6bd4\u8f83\u9002\u5408\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina Miseq \uff0c Illumina NextSeq500 \uff0c Ion S5 \uff0c Ion PGM \u7b49\uff0c\u5373\u5c06\u4e0a\u5e02\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina MiniSeq \uff0c Qiagen GeneReader \u3002\u9664\u4e86\u4f20\u7edf\u7684\u4e8c\u4ee3\u6d4b\u5e8f\u4eea\uff0c\u4e0d\u9700\u8981\u6269\u589e\u7684\u57fa\u4e8e\u5355\u5206\u5b50\u6d4b\u5e8f\u6280\u672f\u7684\u4e09\u4ee3\u6d4b\u5e8f\u6280\u672f\u7684 PacBio Sequel \u548c\u6700\u8fd1\u5f00\u5c55\u57c3\u535a\u62c9\u5b9e\u65f6\u6d4b\u5e8f\u9879\u76ee\u7684\u57fa\u4e8e\u7eb3\u7c73\u5b54\u6280\u672f\u7684 Oxford MinION \u4ea7\u54c1\u90fd\u662f\u975e\u5e38\u9002\u5408\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6d4b\u5e8f\u7684\u5e73\u53f0\u3002 \u6d4b\u5e8f\u6570\u636e\u7684\u4e0d\u65ad\u4ea7\u51fa\uff0c\u9700\u8981\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u6765\u53c2\u4e0e\u5230\u6d4b\u5e8f\u6570\u636e\u7684\u5206\u6790\u4ee5\u4fbf\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u751f\u7269\u5b66\u4fe1\u606f\u5bf9\u4e8e\u8bb8\u591a\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u6765\u8bf4\uff0c\u5f88\u96be\u62db\u52df\u5230\u4f18\u79c0\u7684\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u3002\u5bf9\u4e8e\u975e\u4e13\u4e1a\u80cc\u666f\u7684\u4eba\u6765\u8bf4\uff0c\u547d\u4ee4\u884c\u4ee5\u53ca\u8f6f\u4ef6\u7684\u5b89\u88c5\u53ef\u80fd\u662f\u5b66\u4e60\u4e2d\u9047\u5230\u7684\u9996\u8981\u96be\u9898\u3002\u672c\u7b14\u8bb0\u4e3b\u8981\u662f\u901a\u8fc7\u4ecb\u7ecd\u5fae\u751f\u7269\uff0c\u7279\u522b\u662f\u75c5\u539f\u7ec6\u83cc\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5e2e\u52a9\u539f\u6765\u4ece\u4e8b\u6e7f\u5b9e\u9a8c\u9886\u57df\u7684\u540c\u4e8b\u80fd\u8f83\u597d\u7684\u4e86\u89e3\u548c\u638c\u63e1\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5c06\u5b66\u4e60\u66f2\u7ebf\u53d8\u5f97\u5e73\u7f13\u3002\u540c\u65f6\u4e5f\u5e0c\u671b\u80fd\u5bf9\u4ece\u4e8b\u8be5\u9886\u57df\u7684\u5176\u4ed6\u5de5\u4f5c\u8005\u63d0\u4f9b\u4fbf\u5229\uff0c\u8ba9\u5927\u5bb6\u5728\u9700\u8981\u5206\u6790\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6570\u636e\u65f6\uff0c\u80fd\u6709\u4e00\u4e2a\u8d44\u6599\u4e0e\u5b9e\u4f8b\u6c47\u96c6\u7684\u624b\u518c\u53ef\u4ee5\u5feb\u901f\u53c2\u8003\u548c\u5b66\u4e60\u3002 \u672c\u7b14\u8bb0\u4e3b\u8981\u9488\u5bf9 Miseq \u673a\u5668\u7684\u4ea7\u51fa\u6570\u636e\u5f00\u5c55\u5206\u6790\uff0c\u7531\u4e8e\u539f\u7406\u7c7b\u4f3c\u5206\u6790\u8f6f\u4ef6\u4e5f\u5927\u90fd\u53ef\u4ee5\u5e94\u7528\u5728 Illumina \u5176\u4ed6\u578b\u53f7\u7684\u4eea\u5668\u6570\u636e\u4e0a\u3002\u4f8b\u5b50\u90fd\u662f\u8fd0\u884c\u5728\u5b89\u88c5\u4e86 Ubuntu \u53d1\u884c\u7248\u7684 Linux PC \u670d\u52a1\u5668\u6216\u8005 Ubuntu \u7684\u4e2a\u4eba\u7535\u8111\u4e0a\u3002 \u672c\u7b14\u8bb0\u4f7f\u7528\u5f00\u6e90\u5de5\u5177 Gitbook \u521b\u4f5c\uff0c\u4ecb\u7ecd\u7684\u5de5\u5177\u4e5f\u51e0\u4e4e\u5747\u4e3a\u5f00\u6e90\u8f6f\u4ef6\u3002\u7b14\u8bb0\u4e2d\u7684\u8bb8\u591a\u5185\u5bb9\u90fd\u662f\u6765\u6e90\u4e8e\u7f51\u7edc\u4e0a\u7684\u8d44\u6599\uff0c\u90e8\u5206\u6765\u6e90\u53ef\u80fd\u6709\u8bef\u6216\u8bb0\u5fc6\u4e0d\u5168\uff0c\u5982\u679c\u539f\u4f5c\u8005\u53d1\u73b0\u6ca1\u6709\u5185\u5bb9\u94fe\u63a5\uff0c\u6216\u8005\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u53d1\u9001 \u7535\u5b50\u90ae\u4ef6 \u901a\u77e5\u4fee\u6539\u3002\u540c\u65f6\u5e0c\u671b Open Source \u601d\u60f3\u80fd\u5bf9\u79d1\u7814\u5de5\u4f5c\u548c\u79d1\u7814\u5de5\u4f5c\u8005\u6709\u6240\u5e2e\u52a9\u3002 \u672c\u7b14\u8bb0\u4ee3\u7801\u6258\u7ba1\u5728 Github , \u53ef\u4ee5\u8bbf\u95ee http://github.com/indexofire/pathongs.git \u83b7\u5f97\u6e90\u7801\u3002\u6d4b\u5e8f\u6280\u672f\u662f\u4e00\u4e2a\u98de\u5feb\u53d1\u5c55\u7684\u9886\u57df\uff0c\u6559\u7a0b\u4e2d\u5b58\u5728\u7684\u9519\u8bef\u548c\u4e0d\u8db3\u4e4b\u5904\uff0c\u6b22\u8fce\u63d0\u4ea4 issues \u3002","title":"\u5173\u4e8e\u672c\u6559\u7a0b"},{"location":"#fork","text":"\u5728GitHub\u4e0a\u8bbf\u95ee\u672c\u4e66\u6e90\u7801\uff0c\u5e76fork\u6210\u4e3a\u81ea\u5df1\u7684\u4ed3\u5e93\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u70b9\u51fbfork\u6309\u94ae\uff0c\u7136\u540e\u7528 git clone \u5230\u672c\u5730\uff0c\u8bbe\u7f6e\u597d\u4ee3\u7801\u4ed3\u5e93\u7528\u6237\u4fe1\u606f\u3002\u5c31\u53ef\u4ee5\u4fee\u6539\u5e76\u63d0\u4ea4\u4ee3\u7801\u4e86\u3002 $ git clone git@github.com:your_github_username/pathongs.git $ cd pathongs $ git config user.name \"your github username\" $ git config user.email your_email@something.com \u5bf9\u9700\u8981\u7684\u5185\u5bb9\u505a\u4fee\u6539\u540e\u63d0\u4ea4\uff0c\u5e76 git push \u5230\u4e4b\u524d fork \u7684\u4ed3\u5e93\u3002 $ git add -A $ git commit -am \"Fix issue #1: change typo: helo to hello\" $ git push \u8fd9\u6837\u4f60\u81ea\u5df1\u7684\u4ee3\u7801\u5206\u652f master \u4e0e\u6e90\u4ee3\u7801\u5206\u652f\u5c31\u4f1a\u51fa\u73b0\u5dee\u5f02\uff0c\u8981\u5408\u5e76\u8fd9\u4e9b\u5dee\u5f02\uff0c\u5c31\u8981\u5728GitHub\u7f51\u7ad9\u4e0a\u63d0\u4ea4 pull request \u3002\u5982\u4e0b\u56fe\u6240\u793a\u5982\u679c\u6709\u4ee3\u7801\u3002 \u7531\u4e8e\u6e90\u4ee3\u7801\u4ed3\u5e93\u4e5f\u4f1a\u7ecf\u5e38\u66f4\u65b0\u6216\u8005\u5408\u5e76\u5176\u4ed6pull request\u4ee3\u7801\uff0c\u9700\u8981\u5b9a\u671f\u4f7f\u7528\u6e90\u9879\u76ee\u4ed3\u5e93\u5185\u5bb9\u6765\u66f4\u65b0\u81ea\u5df1\u4ed3\u5e93\u5185\u5bb9\u3002 $ git remote add upstream https://github.com/indexofire/pathongs.git $ git fetch upstream $ git checkout master $ git merge upstream/master $ git push origin master","title":"Fork\u7b14\u8bb0\u65b9\u6cd5"},{"location":"#_6","text":"\u73af\u5883\u5dee\u5f02 \u5927\u90e8\u5206\u793a\u4f8b\u90fd\u662f\u5728 Ubuntu/Archlinux \u73af\u5883\u4e0b\u5b9e\u73b0\u7684\u3002\u5bf9\u4e8e\u8f6f\u4ef6\u7684\u5b89\u88c5\u548c\u8fd0\u884c\uff1a \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Windows10 bash\u73af\u5883\u6216Windows\u865a\u62df\u673a\uff0c\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u51fa\u5165\uff0c\u6216\u65e0\u6cd5\u8fd0\u884c\u7684\u60c5\u51b5\uff0c\u5177\u4f53\u95ee\u9898\u81ea\u5df1\u52a8\u624b\u89e3\u51b3\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Macintosh OS X \u7cfb\u7edf\uff0c\u9664\u4e86\u4e00\u4e9b\u8f6f\u4ef6\u5b89\u88c5\u548c\u53c2\u6570\u548c\u8def\u5f84\u8bbe\u7f6e\u5916\uff0c\u5927\u90e8\u5206\u4f8b\u5b50\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u8fd0\u884c\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u7279\u522b\u662f\u4e0d\u5c5e\u4e8e Debian/Archlinux \u4f53\u7cfb\u7684\u53d1\u884c\u529e\uff0c\u5982\u7ea2\u5e3d\u5b50\u7cfb\u7684 CentOS \u7b49\uff0c\u5219\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u547d\u4ee4\u6765\u8fd0\u884c\u6216\u5b89\u88c5\uff0c\u4e0e\u53d1\u884c\u7248\u65e0\u5173\u7684\u5927\u90e8\u5206 Linux \u64cd\u4f5c\u4e0d\u5b58\u5728\u533a\u522b\u3002","title":"\u5185\u5bb9\u64cd\u4f5c\u63d0\u793a"},{"location":"#linux","text":"Linux \u4e0e\u751f\u7269\u4fe1\u606f\u5b66\u7d27\u5bc6\u76f8\u5173\uff0c\u8bb8\u591a\u8f6f\u4ef6\u8fd0\u884c\u548c\u6570\u636e\u5206\u6790\u90fd\u9002\u5408\u6216\u5fc5\u987b\u8fd0\u884c\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002\u5173\u4e8e Linux \u7684\u6559\u5b66\u7f51\u7edc\u4e0a\u4e0d\u8ba1\u5176\u6570\uff0c\u8fd9\u91cc\u53ea\u5bf9\u5728\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u4e2d\u53ef\u80fd\u6d89\u53ca\u5230\u7684\u4e00\u4e9b\u57fa\u672c Linux \u64cd\u4f5c\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\u3002","title":"Linux \u4e0e\u751f\u7269\u4fe1\u606f"},{"location":"#_7","text":"\u751f\u4fe1\u8f6f\u4ef6\u7684\u8fd0\u884c\u5e73\u53f0\u73af\u5883\u4e00\u822c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a \u57fa\u4e8eweb\uff1a\u53ef\u4ee5\u5728win/mac/linux/bsd\u7b49\u5e73\u53f0\u8fd0\u884c\uff0c\u53ea\u9700\u7cfb\u7edf\u6709\u56fe\u5f62\u754c\u9762\uff0c\u5e76\u5b89\u88c5\u4e86\u73b0\u4ee3\u5316\u7684\u4e3b\u6d41\u6d4f\u89c8\u5668\u5982chrome/firefox\u7b49\u3002 \u7eafwindows\u73af\u5883\uff1a\u5e38\u89c1\u7684\u5546\u4e1a\u8f6f\u4ef6\u5f80\u5f80\u53ea\u80fd\u5728win\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5982bionumerics\u7b49\u3002 \u591a\u5e73\u53f0\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u662f\u91c7\u7528java\u5f00\u53d1\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u5e73\u53f0\u4e0b\u8fd0\u884c\u3002\u4e00\u4e9bC\u5f00\u53d1\u7684\u7a0b\u5e8f\u4e5f\u6709win/mac/linux\u7248\u672c\u3002 \u7eaflinux\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u53ea\u80fd\u5728linux/mac\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u53c8\u662f\u57fa\u4e8e\u547d\u4ee4\u884c\u800c\u4e0d\u9700\u8981\u56fe\u5f62\u754c\u9762\u3002","title":"\u751f\u4fe1\u8fd0\u884c\u73af\u5883"},{"location":"#linux_1","text":"\u5e38\u89c1\u7684Linux\u53d1\u884c\u7248\uff1a Ubuntu CentOS ArchLinux \u65e0\u8bba\u662f\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\uff0c\u6216\u8005\u662f\u4e2a\u4eba\u684c\u9762\u4f7f\u7528Linux\uff0c\u90fd\u9700\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u4f7f\u7528\u54ea\u4e00\u4e2a\u53d1\u884c\u7248\u3002\u670d\u52a1\u5668\u5e38\u7528\u7684Linux\u53d1\u884c\u7248\u6709CentOS, Debian, Ubuntu\u7b49\uff0c\u684c\u9762\u53d1\u884c\u7248\u975e\u5e38\u591a\uff0c\u4e3b\u8981\u6709\u57fa\u4e8eUbuntu\uff0c\u57fa\u4e8eArchlinux\u7b49\u53d1\u884c\u7248\u3002\u4e0d\u540c\u7684\u53d1\u884c\u7248\u76f8\u5f53\u4e8e\u4f7f\u7528\u4e0d\u540c\u7684\u5305\u7ba1\u7406\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7cfb\u7edf\u63a7\u5236\u65b9\u5f0f\u7b49\u65b9\u9762\u5b58\u5728\u533a\u522b\u3002 \u6bd4\u5982\u5305\u7ba1\u7406\u548c\u5b89\u88c5\u7684\u5dee\u522b\uff1a # \u4ee5\u4e0b\u5206\u522b\u662f\uff1aCentOS, Debian/Ubuntu, Archlinux \u5b89\u88c5 bwa \u8f6f\u4ef6\u7684\u65b9\u5f0f $ sudo yum install bwa $ sudo apt-get install bwa $ sudo pacman -S bwa","title":"Linux\u53d1\u884c\u7248"},{"location":"about/","text":"About \u00b6 test","title":""},{"location":"about/#about","text":"test","title":"About"},{"location":"protocol/","text":"Protocol \u00b6 ArticNetwork","title":""},{"location":"protocol/#protocol","text":"ArticNetwork","title":"Protocol"},{"location":"blog/my-vim-ide/","text":"\u6211\u7684vim\u914d\u7f6e \u00b6 \u529f\u80fd\u9700\u6c42\uff1a tree python auto complete powerline Info vim\u9002\u5408\u4ee3\u7801\u548c\u82f1\u6587\u7f16\u8f91\uff0c\u4e2d\u6587\u5207\u6362\u7684\u8bdd\uff0c\u6211\u4f7f\u7528fcitx\u4f5c\u4e3a\u8f93\u5165\u6cd5\uff0c\u91c7\u7528Shift\u4f5c\u4e3a\u4e2d\u82f1\u6587\u5207\u6362\u6309\u952e\u3002","title":"\u6211\u7684vim\u914d\u7f6e"},{"location":"blog/my-vim-ide/#vim","text":"\u529f\u80fd\u9700\u6c42\uff1a tree python auto complete powerline Info vim\u9002\u5408\u4ee3\u7801\u548c\u82f1\u6587\u7f16\u8f91\uff0c\u4e2d\u6587\u5207\u6362\u7684\u8bdd\uff0c\u6211\u4f7f\u7528fcitx\u4f5c\u4e3a\u8f93\u5165\u6cd5\uff0c\u91c7\u7528Shift\u4f5c\u4e3a\u4e2d\u82f1\u6587\u5207\u6362\u6309\u952e\u3002","title":"\u6211\u7684vim\u914d\u7f6e"},{"location":"blog/nanopore-guppy-gpu/","text":"Guppy GPU \u00b6","title":"Guppy GPU"},{"location":"blog/nanopore-guppy-gpu/#guppy-gpu","text":"","title":"Guppy GPU"},{"location":"book/main/","text":"\u5f00\u59cb\u4e4b\u524d \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u75c5\u539f\u5fae\u751f\u7269\u4e0e\u6d4b\u5e8f\u6280\u672f \u00b6 \u6d4b\u5e8f\u6280\u672f \u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5df2\u7ecf\u53d1\u5c55\u4e86\u5f88\u591a\u5e74\uff0c\u5e7f\u53d7\u6b22\u8fce\u7684\u5c0f\u578b\u6d4b\u5e8f\u4eeaMiSeq\u548cPGM\u5df2\u7ecf\u7ecf\u5386\u4f4f\u5e02\u573a\u7684\u8003\u9a8c\u3002\u540c\u65f6\u65b0\u7684\u6280\u672f\u548c\u4eea\u5668\u7684\u51fa\u73b0\u4ecd\u5728\u4e0d\u505c\u63a8\u52a8\u6d4b\u5e8f\u6280\u672f\u9886\u57df\u7684\u5e94\u7528\uff0c\u5982PacBio\u65d7\u4e0b\u6d4b\u5e8f\u4eea\u5bf9\u957f\u7247\u6bb5\u6d4b\u5e8f\u7684\u5e94\u7528\uff1bNanopore MinIon\u6d4b\u5e8f\u4eea\u5728\u8bb8\u591a\u4f20\u67d3\u75c5\u75ab\u60c5\u7684\u73b0\u573a\u5b9e\u65f6\u6d4b\u5e8f\u5e94\u7528\uff1b\u4e2d\u56fdCDC\u5728\u56fd\u5185\u90e8\u5206\u7701\u7ea7CDC\u5f00\u5c55\u7684\u534e\u5927\u81ea\u4e3b\u6d4b\u5e8f\u4eea\u7684\u5e94\u7528\u7b49\u7b49\u3002 \u968f\u7740Pulsenet China\u7684\u9010\u6e10\u5b8c\u5584\uff0c\u5229\u7528NGS\u6280\u672f\u5bf9\u75c5\u539f\u8fdb\u884c\u7814\u7a76\u7684\u5de5\u4f5c\u8fdf\u65e9\u4f1a\u6210\u4e3a\u4e00\u79cd\u516c\u5171\u536b\u751f\u5b9e\u9a8c\u5ba4\u68c0\u9a8c\u4eba\u5458\u7684\u65e5\u5e38\u6d3b\u52a8\u3002\u8fd9\u4e2a\u5de5\u4f5c\u5305\u542b\u4e86\u6838\u9178\u63d0\u53d6\u3001\u6587\u5e93\u5236\u5907\u3001\u6d4b\u5e8f\u3001\u6570\u636e\u5206\u6790\u3002\u524d3\u9879\u5bf9\u4e8e\u75be\u63a7\u4e2d\u5fc3\u5b9e\u9a8c\u5ba4\u4eba\u5458\u6765\u8bf4\u5e76\u975e\u96be\u4e8b\uff0c\u4f46\u662f\u6570\u636e\u5206\u6790\u5bf9\u4e8e\u533b\u5b66\u6216\u8005\u751f\u7269\u5b66\u80cc\u666f\u7684CDCers\u6765\u8bf4\u5f80\u5f80\u6210\u4e86\u6700\u5927\u7684\u75db\u70b9\u3002 \u5bf9\u4e8e\u79d1\u7814\u5de5\u4f5c\uff0c\u53ef\u4ee5\u4e0e\u4e13\u4e1a\u7684\u751f\u4fe1\u516c\u53f8\u4eba\u5458\u5408\u4f5c\u3002\u4f46\u662f\u5bf9\u4e8e\u65e5\u5e38\u5de5\u4f5c\uff0c\u76ee\u524d\u603b\u4f53\u4e0a\u8fd8\u662f\u7f3a\u4e4f\u5b8c\u5584\u7684\u5de5\u4f5c\u6d41\u3002\u5373\u4f7f\u662f\u90e8\u7f72\u4e0aGUI\u7a0b\u5e8f\u5982CLC Workbench\uff0c\u6216\u8005\u662f\u7c7b\u4f3cGalaxy\u8fd9\u6837\u7684web\u5e73\u53f0\u7684\u5e94\u7528\uff0c\u5982\u679c\u7f3a\u4e4f\u5bf9\u6570\u636e\u5206\u6790\u6700\u57fa\u672c\u7684\u6982\u5ff5\uff0c\u90a3\u4e5f\u53ea\u80fd\u662f\u7a7a\u6709\u4e00\u8eab\u88c5\u5907\u5374\u65e0\u6cd5\u53d1\u6325\u3002\u79d1\u6280\u53d1\u5c55\u7684\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u5bf9\u4e8e\u75be\u63a7\u7cfb\u7edf\u6765\u8bf4\uff0c\u52a0\u5feb\u5e94\u7528\u65b0\u6280\u672f\u65b0\u65b9\u6cd5\u7684\u80fd\u529b\u63d0\u5347\uff0c\u7279\u522b\u662f\u4e0d\u64c5\u957f\u7684\u8ba1\u7b97\u3001\u4fe1\u606f\u6570\u636e\u7684\u5206\u6790\u80fd\u529b\uff0c\u5efa\u8bae\u5c3d\u65e9\u5e03\u5c40\u3002 \u5173\u4e8e\u672c\u6559\u7a0b \u00b6 \u968f\u7740\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5feb\u901f\u53d1\u5c55\uff0c\u5c0f\u578b\u53f0\u5f0f\u6d4b\u5e8f\u4eea\u7684\u51fa\u73b0\u964d\u4f4e\u4e86\u9ad8\u901a\u91cf\u6d4b\u5e8f\u7684\u95e8\u69db\u3002\u5bf9\u4e8e\u5f00\u5c55\u5fae\u751f\u7269\u7279\u522b\u662f\u75c5\u539f\u5fae\u751f\u7269\u7684\u6d4b\u5e8f\u5de5\u4f5c\u7684\u9700\u6c42\uff0c\u5728\u5404\u79cd\u4e34\u5e8a\uff0c\u79d1\u7814\u4ee5\u53ca\u653f\u5e9c\u7684\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u4e2d\u8fc5\u901f\u6269\u5c55\u3002\u76ee\u524d\u5df2\u7ecf\u4e0a\u5e02\u7684\u6bd4\u8f83\u9002\u5408\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina Miseq \uff0c Illumina NextSeq500 \uff0c Ion S5 \uff0c Ion PGM \u7b49\uff0c\u5373\u5c06\u4e0a\u5e02\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina MiniSeq \uff0c Qiagen GeneReader \u3002\u9664\u4e86\u4f20\u7edf\u7684\u4e8c\u4ee3\u6d4b\u5e8f\u4eea\uff0c\u4e0d\u9700\u8981\u6269\u589e\u7684\u57fa\u4e8e\u5355\u5206\u5b50\u6d4b\u5e8f\u6280\u672f\u7684\u4e09\u4ee3\u6d4b\u5e8f\u6280\u672f\u7684 PacBio Sequel \u548c\u6700\u8fd1\u5f00\u5c55\u57c3\u535a\u62c9\u5b9e\u65f6\u6d4b\u5e8f\u9879\u76ee\u7684\u57fa\u4e8e\u7eb3\u7c73\u5b54\u6280\u672f\u7684 Oxford MinION \u4ea7\u54c1\u90fd\u662f\u975e\u5e38\u9002\u5408\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6d4b\u5e8f\u7684\u5e73\u53f0\u3002 \u6d4b\u5e8f\u6570\u636e\u7684\u4e0d\u65ad\u4ea7\u51fa\uff0c\u9700\u8981\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u6765\u53c2\u4e0e\u5230\u6d4b\u5e8f\u6570\u636e\u7684\u5206\u6790\u4ee5\u4fbf\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u751f\u7269\u5b66\u4fe1\u606f\u5bf9\u4e8e\u8bb8\u591a\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u6765\u8bf4\uff0c\u5f88\u96be\u62db\u52df\u5230\u4f18\u79c0\u7684\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u3002\u5bf9\u4e8e\u975e\u4e13\u4e1a\u80cc\u666f\u7684\u4eba\u6765\u8bf4\uff0c\u547d\u4ee4\u884c\u4ee5\u53ca\u8f6f\u4ef6\u7684\u5b89\u88c5\u53ef\u80fd\u662f\u5b66\u4e60\u4e2d\u9047\u5230\u7684\u9996\u8981\u96be\u9898\u3002\u672c\u7b14\u8bb0\u4e3b\u8981\u662f\u901a\u8fc7\u4ecb\u7ecd\u5fae\u751f\u7269\uff0c\u7279\u522b\u662f\u75c5\u539f\u7ec6\u83cc\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5e2e\u52a9\u539f\u6765\u4ece\u4e8b\u6e7f\u5b9e\u9a8c\u9886\u57df\u7684\u540c\u4e8b\u80fd\u8f83\u597d\u7684\u4e86\u89e3\u548c\u638c\u63e1\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5c06\u5b66\u4e60\u66f2\u7ebf\u53d8\u5f97\u5e73\u7f13\u3002\u540c\u65f6\u4e5f\u5e0c\u671b\u80fd\u5bf9\u4ece\u4e8b\u8be5\u9886\u57df\u7684\u5176\u4ed6\u5de5\u4f5c\u8005\u63d0\u4f9b\u4fbf\u5229\uff0c\u8ba9\u5927\u5bb6\u5728\u9700\u8981\u5206\u6790\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6570\u636e\u65f6\uff0c\u80fd\u6709\u4e00\u4e2a\u8d44\u6599\u4e0e\u5b9e\u4f8b\u6c47\u96c6\u7684\u624b\u518c\u53ef\u4ee5\u5feb\u901f\u53c2\u8003\u548c\u5b66\u4e60\u3002 \u672c\u7b14\u8bb0\u4e3b\u8981\u9488\u5bf9 Miseq \u673a\u5668\u7684\u4ea7\u51fa\u6570\u636e\u5f00\u5c55\u5206\u6790\uff0c\u7531\u4e8e\u539f\u7406\u7c7b\u4f3c\u5206\u6790\u8f6f\u4ef6\u4e5f\u5927\u90fd\u53ef\u4ee5\u5e94\u7528\u5728 Illumina \u5176\u4ed6\u578b\u53f7\u7684\u4eea\u5668\u6570\u636e\u4e0a\u3002\u4f8b\u5b50\u90fd\u662f\u8fd0\u884c\u5728\u5b89\u88c5\u4e86 Ubuntu \u53d1\u884c\u7248\u7684 Linux PC \u670d\u52a1\u5668\u6216\u8005 Ubuntu \u7684\u4e2a\u4eba\u7535\u8111\u4e0a\u3002 \u672c\u7b14\u8bb0\u4f7f\u7528\u5f00\u6e90\u5de5\u5177 Gitbook \u521b\u4f5c\uff0c\u4ecb\u7ecd\u7684\u5de5\u5177\u4e5f\u51e0\u4e4e\u5747\u4e3a\u5f00\u6e90\u8f6f\u4ef6\u3002\u7b14\u8bb0\u4e2d\u7684\u8bb8\u591a\u5185\u5bb9\u90fd\u662f\u6765\u6e90\u4e8e\u7f51\u7edc\u4e0a\u7684\u8d44\u6599\uff0c\u90e8\u5206\u6765\u6e90\u53ef\u80fd\u6709\u8bef\u6216\u8bb0\u5fc6\u4e0d\u5168\uff0c\u5982\u679c\u539f\u4f5c\u8005\u53d1\u73b0\u6ca1\u6709\u5185\u5bb9\u94fe\u63a5\uff0c\u6216\u8005\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u53d1\u9001 \u7535\u5b50\u90ae\u4ef6 \u901a\u77e5\u4fee\u6539\u3002\u540c\u65f6\u5e0c\u671b Open Source \u601d\u60f3\u80fd\u5bf9\u79d1\u7814\u5de5\u4f5c\u548c\u79d1\u7814\u5de5\u4f5c\u8005\u6709\u6240\u5e2e\u52a9\u3002 \u672c\u7b14\u8bb0\u4ee3\u7801\u6258\u7ba1\u5728 Github , \u53ef\u4ee5\u8bbf\u95ee http://github.com/indexofire/pathongs.git \u83b7\u5f97\u6e90\u7801\u3002\u6d4b\u5e8f\u6280\u672f\u662f\u4e00\u4e2a\u98de\u5feb\u53d1\u5c55\u7684\u9886\u57df\uff0c\u6559\u7a0b\u4e2d\u5b58\u5728\u7684\u9519\u8bef\u548c\u4e0d\u8db3\u4e4b\u5904\uff0c\u6b22\u8fce\u63d0\u4ea4 issues \u3002 Fork\u7b14\u8bb0\u65b9\u6cd5 \u00b6 \u5728GitHub\u4e0a\u8bbf\u95ee\u672c\u4e66\u6e90\u7801\uff0c\u5e76fork\u6210\u4e3a\u81ea\u5df1\u7684\u4ed3\u5e93\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u70b9\u51fbfork\u6309\u94ae\uff0c\u7136\u540e\u7528 git clone \u5230\u672c\u5730\uff0c\u8bbe\u7f6e\u597d\u4ee3\u7801\u4ed3\u5e93\u7528\u6237\u4fe1\u606f\u3002\u5c31\u53ef\u4ee5\u4fee\u6539\u5e76\u63d0\u4ea4\u4ee3\u7801\u4e86\u3002 $ git clone git@github.com:your_github_username/pathongs.git $ cd pathongs $ git config user.name \"your github username\" $ git config user.email your_email@something.com \u5bf9\u9700\u8981\u7684\u5185\u5bb9\u505a\u4fee\u6539\u540e\u63d0\u4ea4\uff0c\u5e76 git push \u5230\u4e4b\u524d fork \u7684\u4ed3\u5e93\u3002 $ git add -A $ git commit -am \"Fix issue #1: change typo: helo to hello\" $ git push \u8fd9\u6837\u4f60\u81ea\u5df1\u7684\u4ee3\u7801\u5206\u652f master \u4e0e\u6e90\u4ee3\u7801\u5206\u652f\u5c31\u4f1a\u51fa\u73b0\u5dee\u5f02\uff0c\u8981\u5408\u5e76\u8fd9\u4e9b\u5dee\u5f02\uff0c\u5c31\u8981\u5728GitHub\u7f51\u7ad9\u4e0a\u63d0\u4ea4 pull request \u3002\u5982\u4e0b\u56fe\u6240\u793a\u5982\u679c\u6709\u4ee3\u7801\u3002 \u7531\u4e8e\u6e90\u4ee3\u7801\u4ed3\u5e93\u4e5f\u4f1a\u7ecf\u5e38\u66f4\u65b0\u6216\u8005\u5408\u5e76\u5176\u4ed6pull request\u4ee3\u7801\uff0c\u9700\u8981\u5b9a\u671f\u4f7f\u7528\u6e90\u9879\u76ee\u4ed3\u5e93\u5185\u5bb9\u6765\u66f4\u65b0\u81ea\u5df1\u4ed3\u5e93\u5185\u5bb9\u3002 $ git remote add upstream https://github.com/indexofire/pathongs.git $ git fetch upstream $ git checkout master $ git merge upstream/master $ git push origin master \u5185\u5bb9\u64cd\u4f5c\u63d0\u793a \u00b6 \u73af\u5883\u5dee\u5f02 \u5927\u90e8\u5206\u793a\u4f8b\u90fd\u662f\u5728 Ubuntu/Archlinux \u73af\u5883\u4e0b\u5b9e\u73b0\u7684\u3002\u5bf9\u4e8e\u8f6f\u4ef6\u7684\u5b89\u88c5\u548c\u8fd0\u884c\uff1a \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Windows10 bash\u73af\u5883\u6216Windows\u865a\u62df\u673a\uff0c\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u51fa\u5165\uff0c\u6216\u65e0\u6cd5\u8fd0\u884c\u7684\u60c5\u51b5\uff0c\u5177\u4f53\u95ee\u9898\u81ea\u5df1\u52a8\u624b\u89e3\u51b3\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Macintosh OS X \u7cfb\u7edf\uff0c\u9664\u4e86\u4e00\u4e9b\u8f6f\u4ef6\u5b89\u88c5\u548c\u53c2\u6570\u548c\u8def\u5f84\u8bbe\u7f6e\u5916\uff0c\u5927\u90e8\u5206\u4f8b\u5b50\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u8fd0\u884c\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u7279\u522b\u662f\u4e0d\u5c5e\u4e8e Debian/Archlinux \u4f53\u7cfb\u7684\u53d1\u884c\u529e\uff0c\u5982\u7ea2\u5e3d\u5b50\u7cfb\u7684 CentOS \u7b49\uff0c\u5219\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u547d\u4ee4\u6765\u8fd0\u884c\u6216\u5b89\u88c5\uff0c\u4e0e\u53d1\u884c\u7248\u65e0\u5173\u7684\u5927\u90e8\u5206 Linux \u64cd\u4f5c\u4e0d\u5b58\u5728\u533a\u522b\u3002 Linux \u4e0e\u751f\u7269\u4fe1\u606f \u00b6 Linux \u4e0e\u751f\u7269\u4fe1\u606f\u5b66\u7d27\u5bc6\u76f8\u5173\uff0c\u8bb8\u591a\u8f6f\u4ef6\u8fd0\u884c\u548c\u6570\u636e\u5206\u6790\u90fd\u9002\u5408\u6216\u5fc5\u987b\u8fd0\u884c\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002\u5173\u4e8e Linux \u7684\u6559\u5b66\u7f51\u7edc\u4e0a\u4e0d\u8ba1\u5176\u6570\uff0c\u8fd9\u91cc\u53ea\u5bf9\u5728\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u4e2d\u53ef\u80fd\u6d89\u53ca\u5230\u7684\u4e00\u4e9b\u57fa\u672c Linux \u64cd\u4f5c\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\u3002 \u751f\u4fe1\u8fd0\u884c\u73af\u5883 \u00b6 \u751f\u4fe1\u8f6f\u4ef6\u7684\u8fd0\u884c\u5e73\u53f0\u73af\u5883\u4e00\u822c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a \u57fa\u4e8eweb\uff1a\u53ef\u4ee5\u5728win/mac/linux/bsd\u7b49\u5e73\u53f0\u8fd0\u884c\uff0c\u53ea\u9700\u7cfb\u7edf\u6709\u56fe\u5f62\u754c\u9762\uff0c\u5e76\u5b89\u88c5\u4e86\u73b0\u4ee3\u5316\u7684\u4e3b\u6d41\u6d4f\u89c8\u5668\u5982chrome/firefox\u7b49\u3002 \u7eafwindows\u73af\u5883\uff1a\u5e38\u89c1\u7684\u5546\u4e1a\u8f6f\u4ef6\u5f80\u5f80\u53ea\u80fd\u5728win\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5982bionumerics\u7b49\u3002 \u591a\u5e73\u53f0\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u662f\u91c7\u7528java\u5f00\u53d1\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u5e73\u53f0\u4e0b\u8fd0\u884c\u3002\u4e00\u4e9bC\u5f00\u53d1\u7684\u7a0b\u5e8f\u4e5f\u6709win/mac/linux\u7248\u672c\u3002 \u7eaflinux\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u53ea\u80fd\u5728linux/mac\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u53c8\u662f\u57fa\u4e8e\u547d\u4ee4\u884c\u800c\u4e0d\u9700\u8981\u56fe\u5f62\u754c\u9762\u3002 Linux\u53d1\u884c\u7248 \u00b6 \u5e38\u89c1\u7684Linux\u53d1\u884c\u7248\uff1a Ubuntu CentOS ArchLinux \u5176\u4ed6\u503c\u5f97\u63a8\u8350\u7684\u4e2a\u4eba\u53d1\u884c\u7248\u5982Deepin\uff08\u56fd\u4ea7\u4f18\u79c0\u7684\u53d1\u884c\u7248\uff09, Debian, Manjaro, LinuxMint\u7b49\u7b49\u3002\u5927\u591a\u6570\u53d1\u884c\u7248\u5c31\u662f\u57fa\u4e8edebian, archlinux, redhat, openSUSE, gentoo\u7b49\u53d1\u884c\u7248\uff0c\u638c\u63e1\u4e86\u8fd9\u4e9b\u53d1\u884c\u7248\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u5176\u4ed6\u5404\u4e2a\u7c7b\u4f3c\u7684\u884d\u751f\u7248\u672c\u7528\u8d77\u6765\u4e5f\u5c31\u5927\u540c\u5c0f\u5f02\u4e86\u3002 \u5bf9\u4e8e\u773c\u82b1\u7f2d\u4e71\u7684\u5404\u4e2a\u53d1\u884c\u7248\u4e4b\u95f4\u7279\u70b9\u548c\u8f6f\u4ef6\u533a\u522b\uff0c\u4ee5\u53ca\u6d41\u884c\u8d8b\u52bf\uff0c\u53ef\u4ee5\u5728 Distrowatch \u7f51\u7ad9\u4e86\u89e3\u3002\u65e0\u8bba\u662f\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\uff0c\u6216\u8005\u662f\u4e2a\u4eba\u684c\u9762\u4f7f\u7528Linux\uff0c\u90fd\u9700\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u4f7f\u7528\u54ea\u4e00\u4e2a\u53d1\u884c\u7248\u3002\u670d\u52a1\u5668\u5e38\u7528\u7684Linux\u53d1\u884c\u7248\u6709CentOS, Debian, Ubuntu\u7b49\uff0c\u684c\u9762\u53d1\u884c\u7248\u975e\u5e38\u591a\uff0c\u4e3b\u8981\u6709\u57fa\u4e8eUbuntu\uff0c\u57fa\u4e8eArchlinux\u7b49\u53d1\u884c\u7248\u3002\u4e0d\u540c\u7684\u53d1\u884c\u7248\u76f8\u5f53\u4e8e\u4f7f\u7528\u4e0d\u540c\u7684\u5305\u7ba1\u7406\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7cfb\u7edf\u63a7\u5236\u65b9\u5f0f\u7b49\u65b9\u9762\u5b58\u5728\u533a\u522b\u3002 \u6bd4\u5982\u5305\u7ba1\u7406\u548c\u5b89\u88c5\u7684\u5dee\u522b\uff1a # \u4ee5\u4e0b\u5206\u522b\u662f\uff1aCentOS, Debian/Ubuntu, Archlinux \u5b89\u88c5 bwa \u8f6f\u4ef6\u7684\u65b9\u5f0f $ sudo yum install bwa $ sudo apt-get install bwa $ sudo pacman -S bwa","title":"\u7b2c\u96f6\u7ae0 \u5f00\u59cb\u4e4b\u524d"},{"location":"book/main/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"\u5f00\u59cb\u4e4b\u524d"},{"location":"book/main/#_2","text":"\u6d4b\u5e8f\u6280\u672f \u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5df2\u7ecf\u53d1\u5c55\u4e86\u5f88\u591a\u5e74\uff0c\u5e7f\u53d7\u6b22\u8fce\u7684\u5c0f\u578b\u6d4b\u5e8f\u4eeaMiSeq\u548cPGM\u5df2\u7ecf\u7ecf\u5386\u4f4f\u5e02\u573a\u7684\u8003\u9a8c\u3002\u540c\u65f6\u65b0\u7684\u6280\u672f\u548c\u4eea\u5668\u7684\u51fa\u73b0\u4ecd\u5728\u4e0d\u505c\u63a8\u52a8\u6d4b\u5e8f\u6280\u672f\u9886\u57df\u7684\u5e94\u7528\uff0c\u5982PacBio\u65d7\u4e0b\u6d4b\u5e8f\u4eea\u5bf9\u957f\u7247\u6bb5\u6d4b\u5e8f\u7684\u5e94\u7528\uff1bNanopore MinIon\u6d4b\u5e8f\u4eea\u5728\u8bb8\u591a\u4f20\u67d3\u75c5\u75ab\u60c5\u7684\u73b0\u573a\u5b9e\u65f6\u6d4b\u5e8f\u5e94\u7528\uff1b\u4e2d\u56fdCDC\u5728\u56fd\u5185\u90e8\u5206\u7701\u7ea7CDC\u5f00\u5c55\u7684\u534e\u5927\u81ea\u4e3b\u6d4b\u5e8f\u4eea\u7684\u5e94\u7528\u7b49\u7b49\u3002 \u968f\u7740Pulsenet China\u7684\u9010\u6e10\u5b8c\u5584\uff0c\u5229\u7528NGS\u6280\u672f\u5bf9\u75c5\u539f\u8fdb\u884c\u7814\u7a76\u7684\u5de5\u4f5c\u8fdf\u65e9\u4f1a\u6210\u4e3a\u4e00\u79cd\u516c\u5171\u536b\u751f\u5b9e\u9a8c\u5ba4\u68c0\u9a8c\u4eba\u5458\u7684\u65e5\u5e38\u6d3b\u52a8\u3002\u8fd9\u4e2a\u5de5\u4f5c\u5305\u542b\u4e86\u6838\u9178\u63d0\u53d6\u3001\u6587\u5e93\u5236\u5907\u3001\u6d4b\u5e8f\u3001\u6570\u636e\u5206\u6790\u3002\u524d3\u9879\u5bf9\u4e8e\u75be\u63a7\u4e2d\u5fc3\u5b9e\u9a8c\u5ba4\u4eba\u5458\u6765\u8bf4\u5e76\u975e\u96be\u4e8b\uff0c\u4f46\u662f\u6570\u636e\u5206\u6790\u5bf9\u4e8e\u533b\u5b66\u6216\u8005\u751f\u7269\u5b66\u80cc\u666f\u7684CDCers\u6765\u8bf4\u5f80\u5f80\u6210\u4e86\u6700\u5927\u7684\u75db\u70b9\u3002 \u5bf9\u4e8e\u79d1\u7814\u5de5\u4f5c\uff0c\u53ef\u4ee5\u4e0e\u4e13\u4e1a\u7684\u751f\u4fe1\u516c\u53f8\u4eba\u5458\u5408\u4f5c\u3002\u4f46\u662f\u5bf9\u4e8e\u65e5\u5e38\u5de5\u4f5c\uff0c\u76ee\u524d\u603b\u4f53\u4e0a\u8fd8\u662f\u7f3a\u4e4f\u5b8c\u5584\u7684\u5de5\u4f5c\u6d41\u3002\u5373\u4f7f\u662f\u90e8\u7f72\u4e0aGUI\u7a0b\u5e8f\u5982CLC Workbench\uff0c\u6216\u8005\u662f\u7c7b\u4f3cGalaxy\u8fd9\u6837\u7684web\u5e73\u53f0\u7684\u5e94\u7528\uff0c\u5982\u679c\u7f3a\u4e4f\u5bf9\u6570\u636e\u5206\u6790\u6700\u57fa\u672c\u7684\u6982\u5ff5\uff0c\u90a3\u4e5f\u53ea\u80fd\u662f\u7a7a\u6709\u4e00\u8eab\u88c5\u5907\u5374\u65e0\u6cd5\u53d1\u6325\u3002\u79d1\u6280\u53d1\u5c55\u7684\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u5bf9\u4e8e\u75be\u63a7\u7cfb\u7edf\u6765\u8bf4\uff0c\u52a0\u5feb\u5e94\u7528\u65b0\u6280\u672f\u65b0\u65b9\u6cd5\u7684\u80fd\u529b\u63d0\u5347\uff0c\u7279\u522b\u662f\u4e0d\u64c5\u957f\u7684\u8ba1\u7b97\u3001\u4fe1\u606f\u6570\u636e\u7684\u5206\u6790\u80fd\u529b\uff0c\u5efa\u8bae\u5c3d\u65e9\u5e03\u5c40\u3002","title":"\u75c5\u539f\u5fae\u751f\u7269\u4e0e\u6d4b\u5e8f\u6280\u672f"},{"location":"book/main/#_3","text":"\u968f\u7740\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5feb\u901f\u53d1\u5c55\uff0c\u5c0f\u578b\u53f0\u5f0f\u6d4b\u5e8f\u4eea\u7684\u51fa\u73b0\u964d\u4f4e\u4e86\u9ad8\u901a\u91cf\u6d4b\u5e8f\u7684\u95e8\u69db\u3002\u5bf9\u4e8e\u5f00\u5c55\u5fae\u751f\u7269\u7279\u522b\u662f\u75c5\u539f\u5fae\u751f\u7269\u7684\u6d4b\u5e8f\u5de5\u4f5c\u7684\u9700\u6c42\uff0c\u5728\u5404\u79cd\u4e34\u5e8a\uff0c\u79d1\u7814\u4ee5\u53ca\u653f\u5e9c\u7684\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u4e2d\u8fc5\u901f\u6269\u5c55\u3002\u76ee\u524d\u5df2\u7ecf\u4e0a\u5e02\u7684\u6bd4\u8f83\u9002\u5408\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina Miseq \uff0c Illumina NextSeq500 \uff0c Ion S5 \uff0c Ion PGM \u7b49\uff0c\u5373\u5c06\u4e0a\u5e02\u7684\u6d4b\u5e8f\u4eea\u5982 Illumina MiniSeq \uff0c Qiagen GeneReader \u3002\u9664\u4e86\u4f20\u7edf\u7684\u4e8c\u4ee3\u6d4b\u5e8f\u4eea\uff0c\u4e0d\u9700\u8981\u6269\u589e\u7684\u57fa\u4e8e\u5355\u5206\u5b50\u6d4b\u5e8f\u6280\u672f\u7684\u4e09\u4ee3\u6d4b\u5e8f\u6280\u672f\u7684 PacBio Sequel \u548c\u6700\u8fd1\u5f00\u5c55\u57c3\u535a\u62c9\u5b9e\u65f6\u6d4b\u5e8f\u9879\u76ee\u7684\u57fa\u4e8e\u7eb3\u7c73\u5b54\u6280\u672f\u7684 Oxford MinION \u4ea7\u54c1\u90fd\u662f\u975e\u5e38\u9002\u5408\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6d4b\u5e8f\u7684\u5e73\u53f0\u3002 \u6d4b\u5e8f\u6570\u636e\u7684\u4e0d\u65ad\u4ea7\u51fa\uff0c\u9700\u8981\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u6765\u53c2\u4e0e\u5230\u6d4b\u5e8f\u6570\u636e\u7684\u5206\u6790\u4ee5\u4fbf\u83b7\u5f97\u6709\u4ef7\u503c\u7684\u751f\u7269\u5b66\u4fe1\u606f\u5bf9\u4e8e\u8bb8\u591a\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u6765\u8bf4\uff0c\u5f88\u96be\u62db\u52df\u5230\u4f18\u79c0\u7684\u751f\u7269\u4fe1\u606f\u5b66\u4eba\u624d\u3002\u5bf9\u4e8e\u975e\u4e13\u4e1a\u80cc\u666f\u7684\u4eba\u6765\u8bf4\uff0c\u547d\u4ee4\u884c\u4ee5\u53ca\u8f6f\u4ef6\u7684\u5b89\u88c5\u53ef\u80fd\u662f\u5b66\u4e60\u4e2d\u9047\u5230\u7684\u9996\u8981\u96be\u9898\u3002\u672c\u7b14\u8bb0\u4e3b\u8981\u662f\u901a\u8fc7\u4ecb\u7ecd\u5fae\u751f\u7269\uff0c\u7279\u522b\u662f\u75c5\u539f\u7ec6\u83cc\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5e2e\u52a9\u539f\u6765\u4ece\u4e8b\u6e7f\u5b9e\u9a8c\u9886\u57df\u7684\u540c\u4e8b\u80fd\u8f83\u597d\u7684\u4e86\u89e3\u548c\u638c\u63e1\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\uff0c\u5c06\u5b66\u4e60\u66f2\u7ebf\u53d8\u5f97\u5e73\u7f13\u3002\u540c\u65f6\u4e5f\u5e0c\u671b\u80fd\u5bf9\u4ece\u4e8b\u8be5\u9886\u57df\u7684\u5176\u4ed6\u5de5\u4f5c\u8005\u63d0\u4f9b\u4fbf\u5229\uff0c\u8ba9\u5927\u5bb6\u5728\u9700\u8981\u5206\u6790\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6570\u636e\u65f6\uff0c\u80fd\u6709\u4e00\u4e2a\u8d44\u6599\u4e0e\u5b9e\u4f8b\u6c47\u96c6\u7684\u624b\u518c\u53ef\u4ee5\u5feb\u901f\u53c2\u8003\u548c\u5b66\u4e60\u3002 \u672c\u7b14\u8bb0\u4e3b\u8981\u9488\u5bf9 Miseq \u673a\u5668\u7684\u4ea7\u51fa\u6570\u636e\u5f00\u5c55\u5206\u6790\uff0c\u7531\u4e8e\u539f\u7406\u7c7b\u4f3c\u5206\u6790\u8f6f\u4ef6\u4e5f\u5927\u90fd\u53ef\u4ee5\u5e94\u7528\u5728 Illumina \u5176\u4ed6\u578b\u53f7\u7684\u4eea\u5668\u6570\u636e\u4e0a\u3002\u4f8b\u5b50\u90fd\u662f\u8fd0\u884c\u5728\u5b89\u88c5\u4e86 Ubuntu \u53d1\u884c\u7248\u7684 Linux PC \u670d\u52a1\u5668\u6216\u8005 Ubuntu \u7684\u4e2a\u4eba\u7535\u8111\u4e0a\u3002 \u672c\u7b14\u8bb0\u4f7f\u7528\u5f00\u6e90\u5de5\u5177 Gitbook \u521b\u4f5c\uff0c\u4ecb\u7ecd\u7684\u5de5\u5177\u4e5f\u51e0\u4e4e\u5747\u4e3a\u5f00\u6e90\u8f6f\u4ef6\u3002\u7b14\u8bb0\u4e2d\u7684\u8bb8\u591a\u5185\u5bb9\u90fd\u662f\u6765\u6e90\u4e8e\u7f51\u7edc\u4e0a\u7684\u8d44\u6599\uff0c\u90e8\u5206\u6765\u6e90\u53ef\u80fd\u6709\u8bef\u6216\u8bb0\u5fc6\u4e0d\u5168\uff0c\u5982\u679c\u539f\u4f5c\u8005\u53d1\u73b0\u6ca1\u6709\u5185\u5bb9\u94fe\u63a5\uff0c\u6216\u8005\u94fe\u63a5\u9519\u8bef\uff0c\u8bf7\u53d1\u9001 \u7535\u5b50\u90ae\u4ef6 \u901a\u77e5\u4fee\u6539\u3002\u540c\u65f6\u5e0c\u671b Open Source \u601d\u60f3\u80fd\u5bf9\u79d1\u7814\u5de5\u4f5c\u548c\u79d1\u7814\u5de5\u4f5c\u8005\u6709\u6240\u5e2e\u52a9\u3002 \u672c\u7b14\u8bb0\u4ee3\u7801\u6258\u7ba1\u5728 Github , \u53ef\u4ee5\u8bbf\u95ee http://github.com/indexofire/pathongs.git \u83b7\u5f97\u6e90\u7801\u3002\u6d4b\u5e8f\u6280\u672f\u662f\u4e00\u4e2a\u98de\u5feb\u53d1\u5c55\u7684\u9886\u57df\uff0c\u6559\u7a0b\u4e2d\u5b58\u5728\u7684\u9519\u8bef\u548c\u4e0d\u8db3\u4e4b\u5904\uff0c\u6b22\u8fce\u63d0\u4ea4 issues \u3002","title":"\u5173\u4e8e\u672c\u6559\u7a0b"},{"location":"book/main/#fork","text":"\u5728GitHub\u4e0a\u8bbf\u95ee\u672c\u4e66\u6e90\u7801\uff0c\u5e76fork\u6210\u4e3a\u81ea\u5df1\u7684\u4ed3\u5e93\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u70b9\u51fbfork\u6309\u94ae\uff0c\u7136\u540e\u7528 git clone \u5230\u672c\u5730\uff0c\u8bbe\u7f6e\u597d\u4ee3\u7801\u4ed3\u5e93\u7528\u6237\u4fe1\u606f\u3002\u5c31\u53ef\u4ee5\u4fee\u6539\u5e76\u63d0\u4ea4\u4ee3\u7801\u4e86\u3002 $ git clone git@github.com:your_github_username/pathongs.git $ cd pathongs $ git config user.name \"your github username\" $ git config user.email your_email@something.com \u5bf9\u9700\u8981\u7684\u5185\u5bb9\u505a\u4fee\u6539\u540e\u63d0\u4ea4\uff0c\u5e76 git push \u5230\u4e4b\u524d fork \u7684\u4ed3\u5e93\u3002 $ git add -A $ git commit -am \"Fix issue #1: change typo: helo to hello\" $ git push \u8fd9\u6837\u4f60\u81ea\u5df1\u7684\u4ee3\u7801\u5206\u652f master \u4e0e\u6e90\u4ee3\u7801\u5206\u652f\u5c31\u4f1a\u51fa\u73b0\u5dee\u5f02\uff0c\u8981\u5408\u5e76\u8fd9\u4e9b\u5dee\u5f02\uff0c\u5c31\u8981\u5728GitHub\u7f51\u7ad9\u4e0a\u63d0\u4ea4 pull request \u3002\u5982\u4e0b\u56fe\u6240\u793a\u5982\u679c\u6709\u4ee3\u7801\u3002 \u7531\u4e8e\u6e90\u4ee3\u7801\u4ed3\u5e93\u4e5f\u4f1a\u7ecf\u5e38\u66f4\u65b0\u6216\u8005\u5408\u5e76\u5176\u4ed6pull request\u4ee3\u7801\uff0c\u9700\u8981\u5b9a\u671f\u4f7f\u7528\u6e90\u9879\u76ee\u4ed3\u5e93\u5185\u5bb9\u6765\u66f4\u65b0\u81ea\u5df1\u4ed3\u5e93\u5185\u5bb9\u3002 $ git remote add upstream https://github.com/indexofire/pathongs.git $ git fetch upstream $ git checkout master $ git merge upstream/master $ git push origin master","title":"Fork\u7b14\u8bb0\u65b9\u6cd5"},{"location":"book/main/#_4","text":"\u73af\u5883\u5dee\u5f02 \u5927\u90e8\u5206\u793a\u4f8b\u90fd\u662f\u5728 Ubuntu/Archlinux \u73af\u5883\u4e0b\u5b9e\u73b0\u7684\u3002\u5bf9\u4e8e\u8f6f\u4ef6\u7684\u5b89\u88c5\u548c\u8fd0\u884c\uff1a \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Windows10 bash\u73af\u5883\u6216Windows\u865a\u62df\u673a\uff0c\u53ef\u80fd\u4f1a\u6709\u4e00\u5b9a\u51fa\u5165\uff0c\u6216\u65e0\u6cd5\u8fd0\u884c\u7684\u60c5\u51b5\uff0c\u5177\u4f53\u95ee\u9898\u81ea\u5df1\u52a8\u624b\u89e3\u51b3\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Macintosh OS X \u7cfb\u7edf\uff0c\u9664\u4e86\u4e00\u4e9b\u8f6f\u4ef6\u5b89\u88c5\u548c\u53c2\u6570\u548c\u8def\u5f84\u8bbe\u7f6e\u5916\uff0c\u5927\u90e8\u5206\u4f8b\u5b50\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u8fd0\u884c\u3002 \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u7279\u522b\u662f\u4e0d\u5c5e\u4e8e Debian/Archlinux \u4f53\u7cfb\u7684\u53d1\u884c\u529e\uff0c\u5982\u7ea2\u5e3d\u5b50\u7cfb\u7684 CentOS \u7b49\uff0c\u5219\u6839\u636e\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406\u547d\u4ee4\u6765\u8fd0\u884c\u6216\u5b89\u88c5\uff0c\u4e0e\u53d1\u884c\u7248\u65e0\u5173\u7684\u5927\u90e8\u5206 Linux \u64cd\u4f5c\u4e0d\u5b58\u5728\u533a\u522b\u3002","title":"\u5185\u5bb9\u64cd\u4f5c\u63d0\u793a"},{"location":"book/main/#linux","text":"Linux \u4e0e\u751f\u7269\u4fe1\u606f\u5b66\u7d27\u5bc6\u76f8\u5173\uff0c\u8bb8\u591a\u8f6f\u4ef6\u8fd0\u884c\u548c\u6570\u636e\u5206\u6790\u90fd\u9002\u5408\u6216\u5fc5\u987b\u8fd0\u884c\u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002\u5173\u4e8e Linux \u7684\u6559\u5b66\u7f51\u7edc\u4e0a\u4e0d\u8ba1\u5176\u6570\uff0c\u8fd9\u91cc\u53ea\u5bf9\u5728\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u4e2d\u53ef\u80fd\u6d89\u53ca\u5230\u7684\u4e00\u4e9b\u57fa\u672c Linux \u64cd\u4f5c\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u4ecb\u7ecd\u3002","title":"Linux \u4e0e\u751f\u7269\u4fe1\u606f"},{"location":"book/main/#_5","text":"\u751f\u4fe1\u8f6f\u4ef6\u7684\u8fd0\u884c\u5e73\u53f0\u73af\u5883\u4e00\u822c\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a \u57fa\u4e8eweb\uff1a\u53ef\u4ee5\u5728win/mac/linux/bsd\u7b49\u5e73\u53f0\u8fd0\u884c\uff0c\u53ea\u9700\u7cfb\u7edf\u6709\u56fe\u5f62\u754c\u9762\uff0c\u5e76\u5b89\u88c5\u4e86\u73b0\u4ee3\u5316\u7684\u4e3b\u6d41\u6d4f\u89c8\u5668\u5982chrome/firefox\u7b49\u3002 \u7eafwindows\u73af\u5883\uff1a\u5e38\u89c1\u7684\u5546\u4e1a\u8f6f\u4ef6\u5f80\u5f80\u53ea\u80fd\u5728win\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5982bionumerics\u7b49\u3002 \u591a\u5e73\u53f0\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u662f\u91c7\u7528java\u5f00\u53d1\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u5e73\u53f0\u4e0b\u8fd0\u884c\u3002\u4e00\u4e9bC\u5f00\u53d1\u7684\u7a0b\u5e8f\u4e5f\u6709win/mac/linux\u7248\u672c\u3002 \u7eaflinux\u73af\u5883\uff1a\u8bb8\u591a\u751f\u4fe1\u8f6f\u4ef6\u53ea\u80fd\u5728linux/mac\u73af\u5883\u4e0b\u8fd0\u884c\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u53c8\u662f\u57fa\u4e8e\u547d\u4ee4\u884c\u800c\u4e0d\u9700\u8981\u56fe\u5f62\u754c\u9762\u3002","title":"\u751f\u4fe1\u8fd0\u884c\u73af\u5883"},{"location":"book/main/#linux_1","text":"\u5e38\u89c1\u7684Linux\u53d1\u884c\u7248\uff1a Ubuntu CentOS ArchLinux \u5176\u4ed6\u503c\u5f97\u63a8\u8350\u7684\u4e2a\u4eba\u53d1\u884c\u7248\u5982Deepin\uff08\u56fd\u4ea7\u4f18\u79c0\u7684\u53d1\u884c\u7248\uff09, Debian, Manjaro, LinuxMint\u7b49\u7b49\u3002\u5927\u591a\u6570\u53d1\u884c\u7248\u5c31\u662f\u57fa\u4e8edebian, archlinux, redhat, openSUSE, gentoo\u7b49\u53d1\u884c\u7248\uff0c\u638c\u63e1\u4e86\u8fd9\u4e9b\u53d1\u884c\u7248\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u5176\u4ed6\u5404\u4e2a\u7c7b\u4f3c\u7684\u884d\u751f\u7248\u672c\u7528\u8d77\u6765\u4e5f\u5c31\u5927\u540c\u5c0f\u5f02\u4e86\u3002 \u5bf9\u4e8e\u773c\u82b1\u7f2d\u4e71\u7684\u5404\u4e2a\u53d1\u884c\u7248\u4e4b\u95f4\u7279\u70b9\u548c\u8f6f\u4ef6\u533a\u522b\uff0c\u4ee5\u53ca\u6d41\u884c\u8d8b\u52bf\uff0c\u53ef\u4ee5\u5728 Distrowatch \u7f51\u7ad9\u4e86\u89e3\u3002\u65e0\u8bba\u662f\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\uff0c\u6216\u8005\u662f\u4e2a\u4eba\u684c\u9762\u4f7f\u7528Linux\uff0c\u90fd\u9700\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u4f7f\u7528\u54ea\u4e00\u4e2a\u53d1\u884c\u7248\u3002\u670d\u52a1\u5668\u5e38\u7528\u7684Linux\u53d1\u884c\u7248\u6709CentOS, Debian, Ubuntu\u7b49\uff0c\u684c\u9762\u53d1\u884c\u7248\u975e\u5e38\u591a\uff0c\u4e3b\u8981\u6709\u57fa\u4e8eUbuntu\uff0c\u57fa\u4e8eArchlinux\u7b49\u53d1\u884c\u7248\u3002\u4e0d\u540c\u7684\u53d1\u884c\u7248\u76f8\u5f53\u4e8e\u4f7f\u7528\u4e0d\u540c\u7684\u5305\u7ba1\u7406\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7cfb\u7edf\u63a7\u5236\u65b9\u5f0f\u7b49\u65b9\u9762\u5b58\u5728\u533a\u522b\u3002 \u6bd4\u5982\u5305\u7ba1\u7406\u548c\u5b89\u88c5\u7684\u5dee\u522b\uff1a # \u4ee5\u4e0b\u5206\u522b\u662f\uff1aCentOS, Debian/Ubuntu, Archlinux \u5b89\u88c5 bwa \u8f6f\u4ef6\u7684\u65b9\u5f0f $ sudo yum install bwa $ sudo apt-get install bwa $ sudo pacman -S bwa","title":"Linux\u53d1\u884c\u7248"},{"location":"book/C01_Common-Utility/","text":"","title":"Index"},{"location":"book/C01_Common-Utility/01_database/","text":"\u57fa\u56e0\u7ec4\u516c\u5171\u6570\u636e\u5e93 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u6d4b\u5e8f\u7684\u6570\u636e\u5982\u539f\u59cb reads \u6570\u636e\u6211\u4eec\u53ef\u4ee5\u4e0a\u4f20\u5230 NCBI \u6216 EBI \u7684\u516c\u5171\u6570\u636e\u5e93\uff0c\u53d1\u8868\u7684\u6587\u7ae0\u4e2d\u53ef\u4ee5\u4f7f\u7528\u3002\u6b64\u5916\u516c\u5171\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u4e5f\u53ef\u4ee5\u4e3a\u6211\u4eec\u7684\u7814\u7a76\u63d0\u4f9b\u5e2e\u52a9\u3002\u672c\u8282\u6211\u4eec\u5c31\u6765\u4e86\u89e3\u4e00\u4e0b\u5982\u4f55\u4e0a\u4f20\u548c\u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u3002\u9996\u5148\u8ba9\u6211\u4eec\u6765\u4e86\u89e3\u4e00\u4e0b\u7f51\u7edc\u4e0a\u7684\u6d4b\u5e8f\u516c\u5171\u6570\u636e\u5e93\uff1a \u5e38\u89c1\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7684\u516c\u5171\u6570\u636e\u5e93\uff1a SRA \u77ed\u5e8f\u5217\u6570\u636e\u5e93\uff1a\u7531 NCBI \u8d1f\u8d23\u7ef4\u62a4 ENA \u6b27\u6d32\u6838\u9178\u6570\u636e\u5e93\uff1a\u7531 EBI \u8d1f\u8d23\u7ef4\u62a4 GSA \u4e2d\u56fd\u7ec4\u5b66\u6570\u636e\u5e93\uff1a\u7531 \u4e2d\u79d1\u9662\u5317\u4eac\u57fa\u56e0\u7814\u7a76\u6240 \u8d1f\u8d23\u7ef4\u62a4 SRA \u662f NCBI \u4e3a\u4e86\u5e94\u5bf9\u8d8a\u6765\u8d8a\u591a\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u800c\u5728 2007 \u5e74\u5e95\u63a8\u51fa\u7684\u6d4b\u5e8f\u6570\u636e\u5e93\uff0c\u7528\u4e8e\u5b58\u50a8\u3001\u663e\u793a\u3001\u63d0\u53d6\u548c\u5206\u6790\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u3002\u800c ENA \u5219\u662f\u7531 EBI \u8d1f\u8d23\u7ef4\u62a4\u7684\u529f\u80fd\u7c7b\u4f3c\u7684\u6570\u636e\u5e93\uff0c\u540c\u65f6\u4f5c\u4e3a Ensembl \u3001 UniProt \u548c ArrayExpress \u7b49\u670d\u52a1\u7684\u5e95\u5c42\u57fa\u7840\u30022\u8005\u5728\u4e3b\u8981\u529f\u80fd\u65b9\u9762\u975e\u5e38\u7c7b\u4f3c\uff0c\u540c\u65f6\u6570\u636e\u4e92\u901a\u3002 1.SRA \u6570\u636e\u5e93 \u00b6 1.1 \u7b80\u4ecb \u00b6 SRA \u662f Sequence Read Archive \u7684\u9996\u5b57\u6bcd\u7f29\u5199\u3002 SRA \u4e0e Trace \u6700\u5927\u7684\u533a\u522b\u662f\u5c06\u5b9e\u9a8c\u6570\u636e\u4e0e metadata\uff08\u5143\u6570\u636e\uff09\u5206\u79bb\u3002metadata \u662f\u6307\u4e0e\u6d4b\u5e8f\u5b9e\u9a8c\u53ca\u5176\u5b9e\u9a8c\u6837\u54c1\u76f8\u5173\u7684\u6570\u636e\uff0c\u5982\u5b9e\u9a8c\u76ee\u7684\u3001\u5b9e\u9a8c\u8bbe\u8ba1\u3001\u6d4b\u5e8f\u5e73\u53f0\u3001\u6837\u672c\u6570\u636e(\u7269\u79cd\uff0c\u83cc\u682a\uff0c\u4e2a\u4f53\u8868\u578b\u7b49)\u3002metadata\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a Study\uff1aaccession number \u4ee5 DRP\uff0cSRP\uff0cERP \u5f00\u5934\uff0c\u8868\u793a\u7684\u662f\u4e00\u4e2a\u7279\u5b9a\u76ee\u7684\u7684\u7814\u7a76\u8bfe\u9898\uff0c\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7814\u7a76\u673a\u6784\u548c\u7814\u7a76\u7c7b\u578b\u7b49\u3002study \u5305\u542b\u4e86\u9879\u76ee\u7684\u6240\u6709 metadata\uff0c\u5e76\u6709\u4e00\u4e2a NCBI \u548c EBI \u5171\u540c\u627f\u8ba4\u7684\u9879\u76ee\u7f16\u53f7\uff08universal project id\uff09\uff0c\u4e00\u4e2a study \u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5b9e\u9a8c\uff08experiment\uff09\u3002 Sample\uff1aaccession number\u4ee5 DRS\uff0cSRS\uff0cERS \u5f00\u5934\uff0c\u8868\u793a\u7684\u662f\u6837\u54c1\u4fe1\u606f\u3002\u6837\u672c\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\u7269\u79cd\u4fe1\u606f\u3001\u83cc\u682a(\u54c1\u7cfb) \u4fe1\u606f\u3001\u5bb6\u7cfb\u4fe1\u606f\u3001\u8868\u578b\u6570\u636e\u3001\u4e34\u5e8a\u6570\u636e,\u7ec4\u7ec7\u7c7b\u578b\u7b49\u3002\u53ef\u4ee5\u901a\u8fc7 Trace \u6765\u67e5\u8be2\u3002 Experiment\uff1aaccession number \u4ee5 DRX\uff0cSRX\uff0cERX \u5f00\u5934\u3002\u8868\u793a\u4e00\u4e2a\u5b9e\u9a8c\u8bb0\u8f7d\u7684\u5b9e\u9a8c\u8bbe\u8ba1\uff08Design\uff09\uff0c\u5b9e\u9a8c\u5e73\u53f0\uff08Platform\uff09\u548c\u7ed3\u679c\u5904\u7406\uff08processing\uff09\u4e09\u90e8\u5206\u4fe1\u606f\u3002\u5b9e\u9a8c\u662f SRA \u6570\u636e\u5e93\u7684\u6700\u57fa\u672c\u5355\u5143\uff0c\u4e00\u4e2a\u5b9e\u9a8c\u4fe1\u606f\u53ef\u4ee5\u540c\u65f6\u5305\u542b\u591a\u4e2a\u7ed3\u679c\u96c6\uff08run\uff09\u3002 Run\uff1aaccession number \u4ee5DRR\uff0cSRR\uff0cERR \u5f00\u5934\u3002\u4e00\u4e2a Run \u5305\u62ec\u6d4b\u5e8f\u5e8f\u5217\u53ca\u8d28\u91cf\u6570\u636e\u3002 Submission\uff1a\u4e00\u4e2a study \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5206\u591a\u6b21\u9012\u4ea4\u81f3 SRA \u6570\u636e\u5e93\u3002\u6bd4\u5982\u5728\u4e00\u4e2a\u9879\u76ee\u542f\u52a8\u524d\u671f\uff0c\u5c31\u53ef\u4ee5\u628a study\uff0cexperiment \u7684\u6570\u636e\u9012\u4ea4\u4e0a\u53bb\uff0c\u968f\u7740\u9879\u76ee\u7684\u8fdb\u5c55\uff0c\u9010\u6279\u9012\u4ea4 run \u6570\u636e\u3002study \u7b49\u540c\u4e8e\u9879\u76ee\uff0csubmission \u7b49\u540c\u4e8e\u6279\u6b21\u7684\u6982\u5ff5\u3002 1.2 \u6570\u636e\u4e0b\u8f7d \u00b6 \u8fd9\u4e9b\u516c\u5171\u6570\u636e\u5e93\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u65b9\u5f0f\u4e0b\u8f7d\uff0c\u5982https\u3001ftp\uff0c\u6216\u8005\u4f7f\u7528aspera\u8fd9\u4e2a\u5de5\u5177\u8fdb\u884c\u9ad8\u901f\u4e0b\u8f7d\u3002 1.2.1 \u7528 Aspera \u5de5\u5177\u4e0b\u8f7d SRA \u00b6 Aspera \u4ecb\u7ecd Aspera \u662f IBM \u5f00\u53d1\u7684\u52a0\u901f\u5728\u7ebf\u6570\u636e\u4f20\u8f93\u7684\u4e00\u7ec4\u670d\u52a1\u5668\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 Aspera \u7684\u5404\u4e2a\u5de5\u5177\u53ef\u4ee5\u5728 \u5b98\u65b9\u7f51\u7ad9 \u4e0b\u8f7d\u83b7\u5f97\u3002 \u5728\u670d\u52a1\u5668\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u547d\u4ee4\u884c\u5de5\u5177 ascp \u5373\u53ef\u3002\u800c\u5bf9\u4e8e\u684c\u9762\u7528\u6237\u6765\u8bf4\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Aspera Connent \u7b49\u5de5\u5177\u3002\u7531\u4e8e Ascp Client \u5de5\u5177\u9700\u8981\u767b\u5f55\u540e\u624d\u80fd\u4e0b\u8f7d\uff0c\u56e0\u6b64\u9009\u62e9\u4e86 Aspera Connect \u6765\u5b89\u88c5\u3002\u5b83\u662f Aspera \u7528\u4e8e\u6d4f\u89c8\u5668\u4e0b\u8f7d\u7684\u9ad8\u6548\u63d2\u4ef6\uff0c\u5176\u5185\u5d4c\u4e86 ascp \u547d\u4ee4\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u3002\u5b89\u88c5\u4e86 Aspera Connect \u7684\u5e26\u56fe\u5f62\u754c\u9762\u7684\u5ba2\u6237\u7aef\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u6709 Connect, Faspex \u6216\u8005 Shares \u9875\u9762\u7684\u94fe\u63a5\u5904\u6dfb\u52a0 ascp \u4e0b\u8f7d\u5feb\u6377\u6309\u94ae\u3002 \u5b89\u88c5 aspera connect Aspera Connect \u4e0b\u8f7d\u89e3\u538b\u7f29\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a .sh \u6587\u4ef6\uff0c\u6267\u884c\u540e\u8fd0\u884c\u540e\u4f1a\u5b89\u88c5\u5230\u5f53\u524d\u7528\u6237 $HOME.aspera/connect \u76ee\u5f55\u4e0b\u3002 # \u4e0b\u8f7d\u5e76\u89e3\u538b\u7f29\u7a0b\u5e8f $ wget http://download.asperasoft.com/download/sw/connect/3.6.1/aspera-connect-3.6.1.110647-linux-64.tar.gz $ tar zxf asper-connect-3.6.1.110647-linux.tar.gz # \u5b89\u88c5\u5230\u672c\u5730\u7528\u6237 $ ./aspera-connect-3.6.1.110647-linux-64.sh # \u6dfb\u52a0\u7528\u6237\u6267\u884c\u8def\u5f84 $ echo 'PATH=\"$PATH:$HOME/.aspera/connect/bin/\"' >> ~/.bashrc \u5bf9\u4e8e\u559c\u6b22\u4f7f\u7528\u5ba2\u6237\u7aef\u7684\u684c\u9762\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Aspera Desktop Client \u5ba2\u6237\u7aef\u7a0b\u5e8f\u6765\u4e0b\u8f7d\u6570\u636e\u3002 $ sed 's/^INSTALL_DIR/INSTALL_DIR=~/envs/srst2/src/ascp/connect/' aspera-connect-3.6.1.110647-linux-64.sh > install.sh $ ./install.sh \u4e0b\u8f7d SRA \u6570\u636e \u6ce8\u610f \u6ce8\u610f\u65b0\u7248\u7684 ascp \u7528 .openssh \u4f5c\u4e3a\u5bc6\u94a5\u6587\u4ef6\u800c\u4e0d\u662f\u539f\u6765\u7684 .putty # ascp \u4e0b\u8f7d SRA \u6570\u636e $ ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh \\ > --user = anonftp --host = ftp.ncbi.nlm.nih.gov --mode = recv -l 100m -pQTk1 \\ > /sra/sra-instant/reads/ByRun/sra/SRR/SRR955/SRR955386/SRR955386.sra . # \u6dfb\u52a0 alias \u7b80\u5316\u64cd\u4f5c $ echo \"alias ascp='ascp -i ~/.ascpera/connect/etc/asperaweb_id_dsa.openssh --user=dbtest --host=sra-download.ncbi.nlm.nih.gov --mode=recv -l 100m -pQTk1'\" >> ~/.bashrc $ source ~/.bashrc # \u6d4b\u8bd5\u4e0b\u8f7d $ ascp /data/sracloud/srapub/ERR579922 ./ERR578822.sra 1.2.2 ftp \u4e0b\u8f7d \u00b6 \u4ece\u56fd\u5185\u516c\u7f51\u8bbf\u95ee NCBI FTP \u670d\u52a1\u5668\u5f80\u5f80\u662f\u975e\u5e38\u7f13\u6162\u7684\uff0c\u800c EBI \u5c31\u4e0d\u540c\u4e86\uff0c\u6709\u4e9b\u5730\u65b9\u7684\u901f\u5ea6\u5f88\u5feb\uff0c\u4e0b\u8f7d\u751a\u81f3\u53ef\u4ee5\u8d85\u8fc7 Aspera \u3002\u7531\u4e8e NCBI \u548c EBI \u5171\u4eab\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u5bf9\u4e8e\u56fd\u5185 NCBI \u4e0b\u8f7d\u7f13\u6162\u6216\u8005\u65e0\u6cd5\u7528 ascp \u7684\u7528\u6237\uff0c\u53ef\u4ee5\u8003\u8651\u5728 EBI \u4e0b\u8f7d\u6570\u636e\u3002 2.2 sratoolkit \u00b6 NCBI \u5f00\u53d1\u4e86 sratoolkit \u5de5\u5177\u6765\u5e2e\u52a9\u5904\u7406 SRA \u6570\u636e\uff0c\u6b63\u786e\u914d\u7f6e\u540e\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u4e0b\u8f7d SRA \u6570\u636e\u3002 2.2.1 \u5b89\u88c5sratoolkit \u00b6 \u53ef\u4ee5\u76f4\u63a5\u4ece NCBI \u4e0a\u4e0b\u8f7d\u3002\u6700\u65b0\u7684\u6e90\u7801\u53ef\u4ee5\u5728 Github \u83b7\u5f97\u3002 # download from NCBI $ cd /tmp $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.6/sratoolkit.2.5.6-ubuntu64.tar.gz $ tar zxf sratoolkit.2.5.6-ubuntu64.tar.gz -C ~/app 2.2.2 \u4e0b\u8f7d SRA \u683c\u5f0f\u6587\u4ef6 \u00b6 \u5982\u679c\u4f60\u5b89\u88c5\u5e76\u8bbe\u7f6e\u4e86 Aspera Connect \uff0c\u90a3\u4e48 prefetch \u4f1a\u4f18\u5148\u4f7f\u7528 ascp \u65b9\u5f0f\u6765\u4e0b\u8f7d\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u6216\u5219 ascp \u4e0b\u8f7d\u5931\u8d25\uff0c\u5219\u5207\u6362\u6210 HTTP \u65b9\u5f0f\u4e0b\u8f7d sra \u6570\u636e\u3002\u53e6\u5916 fastq-dump \u547d\u4ee4\u4e5f\u80fd\u4ece\u8fdc\u7aef\u76f4\u63a5\u4e0b\u8f7d\u6570\u636e\uff0c\u52a0\u4e0a -X 1 \u53c2\u6570\uff0c\u4f1a\u9884\u5148\u4e0b\u8f7d\u6700\u524d\u76845\u4e2a reads\uff0c\u52a0\u4e0a -Z \u53c2\u6570\uff0c\u5219\u4f1a\u5c06\u8fd9\u4e9b reads \u6253\u5370\u5230\u7ec8\u7aef\u8f93\u51fa\u3002 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra $ prefetch -v SRR955386 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra\uff0c\u5e76\u4e14\u5728\u7ec8\u7aef\u8f93\u51fa5\u884c reads \u6570\u636e\u3002 $ fastq-dump -X 5 -Z SRR955386 2.2.3 \u5e76\u8f6c\u6362\u6210 .fastq \u683c\u5f0f \u00b6 \u83b7\u5f97\u4e86 .sra \u6587\u4ef6\u540e\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u6210 .fastq \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u7528 fastq-dump \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u3002\u8f6c\u6362\u4e4b\u524d\u8981\u6ce8\u610f\u7684\u662f\u8be5 run \u7684 metadata \u91cc\uff0c\u6d4b\u5e8f\u7c7b\u578b\u662f SE \u8fd8\u662f PE \u7684\u3002 # \u5c06 sra \u6587\u4ef6\u79fb\u52a8\u5230 ~/data \u76ee\u5f55\u4e2d $ mv ~/.ncbi/public/sra/SRR955386.sra ~/data # \u5982\u679c\u662f SE \u6d4b\u5e8f\u6570\u636e\uff0c\u76f4\u63a5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4 $ fastq-dump SRR955386.sra # \u5982\u679c\u662f PE \u6d4b\u5e8f\u6570\u636e\uff0c\u5219\u8981\u6dfb\u52a0\u53c2\u6570\uff1a--split-files $ fastq-dump --split-files SRR955386.sra 2.2.4 SE/PE \u6587\u4ef6\u5224\u65ad \u00b6 \u6b63\u5e38\u7684 sra \u6587\u4ef6\u7684 metadata \u5e94\u8be5\u5305\u542b\u6d4b\u5e8f\u91c7\u7528\u7684\u662f SE \u8fd8\u662f PE \u7684\u65b9\u5f0f\u3002\u4f46\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u6240\u4e0b\u8f7d\u7684\u5230\u5e95\u662f SE \u8fd8\u662f PE \u683c\u5f0f\u7684\u6587\u4ef6\u53ef\u4ee5\u7528 fastq-dump -X 1 --split-spot \u7684\u65b9\u6cd5\u6765\u5224\u65ad\u3002 # it's SE if nreads=1, and PE when nreads=2\uff0c\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u901f\u5ea6\u6bd4\u8f83\u6162 $ sra-stat -xs SRR955386.sra | grep \"nreads\" # \u5982\u679c\u8f93\u51fa\u662f4\uff0c\u90a3\u4e48\u5c31\u662fSE\uff0c\u5982\u679c\u662f8,\u5219\u662fPE $ fastq-dump -X 1 --split-spot -Z SRR955386.sra | wc -l # \u6216\u8005\u52a0\u4e0a\u53c2\u6570\u8ba9 fastq-dump \u81ea\u5df1\u5224\u65ad # \u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump\u53ea\u80fddump\u51fa1\u4e2a *_1.fastq \u6587\u4ef6 $ fastq-dump --split-files ERR493452.sra $ mv ERR493452_1.fastq ERR493452.fastq \u5f53\u9700\u8981\u5224\u65ad\u6279\u91cf\u4e0b\u8f7d\u7684 sra \u6587\u4ef6\u65f6\uff0c\u533a\u5206\u90a3\u4e9b\u662f PE \u7684\u90a3\u4e9b\u662f SE \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u811a\u672c\uff1a import os import subprocess def check_SRA_type ( fn ): fn = os . path . abspath ( fn ); try : contents = subprocess . check_output ([ \"fastq-dump\" , \"-X\" , \"1\" , \"-Z\" , \"--split-spot\" , fn ]); except subprocess . CalledProcessError , e : raise Exception ( \"Error running fastq-dump on\" , fn ); # -X 1 will output 4 lines if SE, and 8 lines if PE if ( contents . count ( \" \\n \" ) == 4 ): return False ; elif ( contents . count ( \" \\n \" ) == 8 ): return True : else : raise Exception ( \"Unexpected output from fastq-dump on \" , filename ); 2.2.5 \u5229\u7528entrez\u6279\u91cf\u4e0b\u8f7d \u00b6 \u5982\u679c\u60f3\u4e0b\u8f7d\u4e00\u4e2a\u5b8c\u6574\u7684 project \u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528 entrezdirect \u5de5\u5177\u3002 ~/tmp$ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz ~/tmp$ tar zxvf edirect.tar.gz -C ~/app ~/tmp$ sudo ln -s ~/app/edirect/* /usr/local/sbin/ ~/data$ esearch -db sra -query PRJNA40075 | efetch --format runinfo | cut -d ',' -f 1 | grep SRR | xargs fastq-dump --split-files \u5982\u679c\u60f3\u4e0b\u8f7d\u4e0d\u540c research \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u81ea\u5df1\u5efa\u7acb\u4e00\u4e2a accession number list \u7684\u6587\u4ef6\uff0c\u6bd4\u5982\u5229\u7528 NCBI \u7684 entrez \u7f51\u9875\u754c\u9762\uff0c\u5bfc\u51fa\u6240\u9700\u8981\u7684\u6570\u636e accession number\uff0c\u7136\u540e\u5229\u7528 ascp \u4e0b\u8f7d\u3002\u4e0d\u8fc7\u5efa\u8bae ascp \u4e0b\u8f7d\u4e0d\u8981\u592a\u72e0\u5fc3\uff0c\u5426\u5219\u5bb9\u6613\u88ab NCBI \u7ed9\u5c01\u6389\u3002 3. Assembly \u6570\u636e\u5e93 \u00b6 \u5982\u679c\u4e0d\u9700\u8981\u7814\u7a76 reads \u6570\u636e\uff0c\u800c\u662f\u53ea\u60f3\u7814\u7a76\u62fc\u63a5\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u4ece NCBI assembly \u6570\u636e\u5e93\u53bb\u5bfb\u627e\u6570\u636e\uff0c\u5e76\u901a\u8fc7 ascp/ftp \u7b49\u5de5\u5177\u4e0b\u8f7d\u3002 4. \u4e0a\u4f20\u6570\u636e \u00b6 SRA \u4e0a\u4f20\u6d4b\u5e8f\u7ed3\u679c\u53ef\u4ee5\u53c2\u7167 NCBI\u6587\u6863 \u6765\u5b9e\u73b0\u3002\u4e00\u822c\u4e0a\u4f20\u6570\u636e\u5230NCBI SRA\u7684\u8fc7\u7a0b\u9700\u89816\u6b65\uff1a Create a BioProject for this research Create a BioSample submission for your biological sample(s) Gather Sequence Data Files Enter Metadata on SRA website 4.1 Create SRA submission 4.2 Create Experiment(s) and link to BioProject and BioSample 4.3 Create Run(s) Transfer Data files to SRA Update Submission with PubMed links, Release Date, or Metadata Changes \u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u4e0a\u4f20\u7684\u8fc7\u7a0b\u4e2d\u5f88\u591a\u5730\u65b9\u4e00\u65e6\u4fdd\u5b58\u6216\u63d0\u4ea4\u5c31\u4e0d\u53ef\u4ee5\u4fee\u6539\uff0c\u5c24\u5176\u662f\u5404\u5904\u7684Alias\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u8054\u7cfbNCBI\u7684\u5de5\u4f5c\u4eba\u5458\u4fee\u6539\u5185\u5bb9\u3002NCBI\u7684\u5de5\u4f5c\u6548\u7387\u662f\u5f88\u9ad8\u7684\uff0c\u4e00\u822c\u4e0d\u8d85\u8fc748\u5c0f\u65f6\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u786e\u8ba4\uff0c\u5e76\u62ff\u5230\u767b\u5f55\u53f7\u3002 BIG(\u4e2d\u56fd\u79d1\u5b66\u9662\u5317\u4eac\u57fa\u56e0\u7ec4\u6240) \u00b6 \u51e0\u4e2a\u6570\u636e\u5e93\u5165\u53e3\uff1a Bioproject Biosample GSA \u4e00\u822c\u53ef\u4ee5\u901a\u8fc7FTP\u65b9\u5f0f\u4e0b\u8f7d:w \u590d\u5236\u8d77\u70b9\u6570\u636e\u5e93 \u00b6 \u7ec6\u83cc\u3001\u771f\u83cc\u548c\u8d28\u7c92\u7684\u590d\u5236\u8d77\u59cb\u4f4d\u70b9\u6570\u636e\u5e93 \u8d28\u7c92\u6570\u636e\u5e93 \u00b6 plsdb\u8d28\u7c92\u6570\u636e\u5e93 \u00b6 eggNOG \u00b6 GO \u00b6 Reference \u00b6 NCBI\u4e0a\u4f20\u6570\u636e\u6587\u6863 \u718a\u7b71\u6676, NCBI\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5e93SRA\u4ecb\u7ecd, \u751f\u547d\u7684\u5316\u5b66[J], 2010:6, 959-963. http://blog.sciencenet.cn/blog-656335-908140.html https://www.biostars.org/p/139422/ https://www.youtube.com/watch?v=NSIkUHKRPpo","title":"01. \u57fa\u56e0\u7ec4\u516c\u5171\u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u6d4b\u5e8f\u7684\u6570\u636e\u5982\u539f\u59cb reads \u6570\u636e\u6211\u4eec\u53ef\u4ee5\u4e0a\u4f20\u5230 NCBI \u6216 EBI \u7684\u516c\u5171\u6570\u636e\u5e93\uff0c\u53d1\u8868\u7684\u6587\u7ae0\u4e2d\u53ef\u4ee5\u4f7f\u7528\u3002\u6b64\u5916\u516c\u5171\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u4e5f\u53ef\u4ee5\u4e3a\u6211\u4eec\u7684\u7814\u7a76\u63d0\u4f9b\u5e2e\u52a9\u3002\u672c\u8282\u6211\u4eec\u5c31\u6765\u4e86\u89e3\u4e00\u4e0b\u5982\u4f55\u4e0a\u4f20\u548c\u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u3002\u9996\u5148\u8ba9\u6211\u4eec\u6765\u4e86\u89e3\u4e00\u4e0b\u7f51\u7edc\u4e0a\u7684\u6d4b\u5e8f\u516c\u5171\u6570\u636e\u5e93\uff1a \u5e38\u89c1\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7684\u516c\u5171\u6570\u636e\u5e93\uff1a SRA \u77ed\u5e8f\u5217\u6570\u636e\u5e93\uff1a\u7531 NCBI \u8d1f\u8d23\u7ef4\u62a4 ENA \u6b27\u6d32\u6838\u9178\u6570\u636e\u5e93\uff1a\u7531 EBI \u8d1f\u8d23\u7ef4\u62a4 GSA \u4e2d\u56fd\u7ec4\u5b66\u6570\u636e\u5e93\uff1a\u7531 \u4e2d\u79d1\u9662\u5317\u4eac\u57fa\u56e0\u7814\u7a76\u6240 \u8d1f\u8d23\u7ef4\u62a4 SRA \u662f NCBI \u4e3a\u4e86\u5e94\u5bf9\u8d8a\u6765\u8d8a\u591a\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u800c\u5728 2007 \u5e74\u5e95\u63a8\u51fa\u7684\u6d4b\u5e8f\u6570\u636e\u5e93\uff0c\u7528\u4e8e\u5b58\u50a8\u3001\u663e\u793a\u3001\u63d0\u53d6\u548c\u5206\u6790\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u3002\u800c ENA \u5219\u662f\u7531 EBI \u8d1f\u8d23\u7ef4\u62a4\u7684\u529f\u80fd\u7c7b\u4f3c\u7684\u6570\u636e\u5e93\uff0c\u540c\u65f6\u4f5c\u4e3a Ensembl \u3001 UniProt \u548c ArrayExpress \u7b49\u670d\u52a1\u7684\u5e95\u5c42\u57fa\u7840\u30022\u8005\u5728\u4e3b\u8981\u529f\u80fd\u65b9\u9762\u975e\u5e38\u7c7b\u4f3c\uff0c\u540c\u65f6\u6570\u636e\u4e92\u901a\u3002","title":"\u57fa\u56e0\u7ec4\u516c\u5171\u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#1sra","text":"","title":"1.SRA \u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#11","text":"SRA \u662f Sequence Read Archive \u7684\u9996\u5b57\u6bcd\u7f29\u5199\u3002 SRA \u4e0e Trace \u6700\u5927\u7684\u533a\u522b\u662f\u5c06\u5b9e\u9a8c\u6570\u636e\u4e0e metadata\uff08\u5143\u6570\u636e\uff09\u5206\u79bb\u3002metadata \u662f\u6307\u4e0e\u6d4b\u5e8f\u5b9e\u9a8c\u53ca\u5176\u5b9e\u9a8c\u6837\u54c1\u76f8\u5173\u7684\u6570\u636e\uff0c\u5982\u5b9e\u9a8c\u76ee\u7684\u3001\u5b9e\u9a8c\u8bbe\u8ba1\u3001\u6d4b\u5e8f\u5e73\u53f0\u3001\u6837\u672c\u6570\u636e(\u7269\u79cd\uff0c\u83cc\u682a\uff0c\u4e2a\u4f53\u8868\u578b\u7b49)\u3002metadata\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a Study\uff1aaccession number \u4ee5 DRP\uff0cSRP\uff0cERP \u5f00\u5934\uff0c\u8868\u793a\u7684\u662f\u4e00\u4e2a\u7279\u5b9a\u76ee\u7684\u7684\u7814\u7a76\u8bfe\u9898\uff0c\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u7814\u7a76\u673a\u6784\u548c\u7814\u7a76\u7c7b\u578b\u7b49\u3002study \u5305\u542b\u4e86\u9879\u76ee\u7684\u6240\u6709 metadata\uff0c\u5e76\u6709\u4e00\u4e2a NCBI \u548c EBI \u5171\u540c\u627f\u8ba4\u7684\u9879\u76ee\u7f16\u53f7\uff08universal project id\uff09\uff0c\u4e00\u4e2a study \u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5b9e\u9a8c\uff08experiment\uff09\u3002 Sample\uff1aaccession number\u4ee5 DRS\uff0cSRS\uff0cERS \u5f00\u5934\uff0c\u8868\u793a\u7684\u662f\u6837\u54c1\u4fe1\u606f\u3002\u6837\u672c\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\u7269\u79cd\u4fe1\u606f\u3001\u83cc\u682a(\u54c1\u7cfb) \u4fe1\u606f\u3001\u5bb6\u7cfb\u4fe1\u606f\u3001\u8868\u578b\u6570\u636e\u3001\u4e34\u5e8a\u6570\u636e,\u7ec4\u7ec7\u7c7b\u578b\u7b49\u3002\u53ef\u4ee5\u901a\u8fc7 Trace \u6765\u67e5\u8be2\u3002 Experiment\uff1aaccession number \u4ee5 DRX\uff0cSRX\uff0cERX \u5f00\u5934\u3002\u8868\u793a\u4e00\u4e2a\u5b9e\u9a8c\u8bb0\u8f7d\u7684\u5b9e\u9a8c\u8bbe\u8ba1\uff08Design\uff09\uff0c\u5b9e\u9a8c\u5e73\u53f0\uff08Platform\uff09\u548c\u7ed3\u679c\u5904\u7406\uff08processing\uff09\u4e09\u90e8\u5206\u4fe1\u606f\u3002\u5b9e\u9a8c\u662f SRA \u6570\u636e\u5e93\u7684\u6700\u57fa\u672c\u5355\u5143\uff0c\u4e00\u4e2a\u5b9e\u9a8c\u4fe1\u606f\u53ef\u4ee5\u540c\u65f6\u5305\u542b\u591a\u4e2a\u7ed3\u679c\u96c6\uff08run\uff09\u3002 Run\uff1aaccession number \u4ee5DRR\uff0cSRR\uff0cERR \u5f00\u5934\u3002\u4e00\u4e2a Run \u5305\u62ec\u6d4b\u5e8f\u5e8f\u5217\u53ca\u8d28\u91cf\u6570\u636e\u3002 Submission\uff1a\u4e00\u4e2a study \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5206\u591a\u6b21\u9012\u4ea4\u81f3 SRA \u6570\u636e\u5e93\u3002\u6bd4\u5982\u5728\u4e00\u4e2a\u9879\u76ee\u542f\u52a8\u524d\u671f\uff0c\u5c31\u53ef\u4ee5\u628a study\uff0cexperiment \u7684\u6570\u636e\u9012\u4ea4\u4e0a\u53bb\uff0c\u968f\u7740\u9879\u76ee\u7684\u8fdb\u5c55\uff0c\u9010\u6279\u9012\u4ea4 run \u6570\u636e\u3002study \u7b49\u540c\u4e8e\u9879\u76ee\uff0csubmission \u7b49\u540c\u4e8e\u6279\u6b21\u7684\u6982\u5ff5\u3002","title":"1.1 \u7b80\u4ecb"},{"location":"book/C01_Common-Utility/01_database/#12","text":"\u8fd9\u4e9b\u516c\u5171\u6570\u636e\u5e93\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u65b9\u5f0f\u4e0b\u8f7d\uff0c\u5982https\u3001ftp\uff0c\u6216\u8005\u4f7f\u7528aspera\u8fd9\u4e2a\u5de5\u5177\u8fdb\u884c\u9ad8\u901f\u4e0b\u8f7d\u3002","title":"1.2 \u6570\u636e\u4e0b\u8f7d"},{"location":"book/C01_Common-Utility/01_database/#121-aspera-sra","text":"Aspera \u4ecb\u7ecd Aspera \u662f IBM \u5f00\u53d1\u7684\u52a0\u901f\u5728\u7ebf\u6570\u636e\u4f20\u8f93\u7684\u4e00\u7ec4\u670d\u52a1\u5668\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 Aspera \u7684\u5404\u4e2a\u5de5\u5177\u53ef\u4ee5\u5728 \u5b98\u65b9\u7f51\u7ad9 \u4e0b\u8f7d\u83b7\u5f97\u3002 \u5728\u670d\u52a1\u5668\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u547d\u4ee4\u884c\u5de5\u5177 ascp \u5373\u53ef\u3002\u800c\u5bf9\u4e8e\u684c\u9762\u7528\u6237\u6765\u8bf4\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Aspera Connent \u7b49\u5de5\u5177\u3002\u7531\u4e8e Ascp Client \u5de5\u5177\u9700\u8981\u767b\u5f55\u540e\u624d\u80fd\u4e0b\u8f7d\uff0c\u56e0\u6b64\u9009\u62e9\u4e86 Aspera Connect \u6765\u5b89\u88c5\u3002\u5b83\u662f Aspera \u7528\u4e8e\u6d4f\u89c8\u5668\u4e0b\u8f7d\u7684\u9ad8\u6548\u63d2\u4ef6\uff0c\u5176\u5185\u5d4c\u4e86 ascp \u547d\u4ee4\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u3002\u5b89\u88c5\u4e86 Aspera Connect \u7684\u5e26\u56fe\u5f62\u754c\u9762\u7684\u5ba2\u6237\u7aef\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u6709 Connect, Faspex \u6216\u8005 Shares \u9875\u9762\u7684\u94fe\u63a5\u5904\u6dfb\u52a0 ascp \u4e0b\u8f7d\u5feb\u6377\u6309\u94ae\u3002 \u5b89\u88c5 aspera connect Aspera Connect \u4e0b\u8f7d\u89e3\u538b\u7f29\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a .sh \u6587\u4ef6\uff0c\u6267\u884c\u540e\u8fd0\u884c\u540e\u4f1a\u5b89\u88c5\u5230\u5f53\u524d\u7528\u6237 $HOME.aspera/connect \u76ee\u5f55\u4e0b\u3002 # \u4e0b\u8f7d\u5e76\u89e3\u538b\u7f29\u7a0b\u5e8f $ wget http://download.asperasoft.com/download/sw/connect/3.6.1/aspera-connect-3.6.1.110647-linux-64.tar.gz $ tar zxf asper-connect-3.6.1.110647-linux.tar.gz # \u5b89\u88c5\u5230\u672c\u5730\u7528\u6237 $ ./aspera-connect-3.6.1.110647-linux-64.sh # \u6dfb\u52a0\u7528\u6237\u6267\u884c\u8def\u5f84 $ echo 'PATH=\"$PATH:$HOME/.aspera/connect/bin/\"' >> ~/.bashrc \u5bf9\u4e8e\u559c\u6b22\u4f7f\u7528\u5ba2\u6237\u7aef\u7684\u684c\u9762\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Aspera Desktop Client \u5ba2\u6237\u7aef\u7a0b\u5e8f\u6765\u4e0b\u8f7d\u6570\u636e\u3002 $ sed 's/^INSTALL_DIR/INSTALL_DIR=~/envs/srst2/src/ascp/connect/' aspera-connect-3.6.1.110647-linux-64.sh > install.sh $ ./install.sh \u4e0b\u8f7d SRA \u6570\u636e \u6ce8\u610f \u6ce8\u610f\u65b0\u7248\u7684 ascp \u7528 .openssh \u4f5c\u4e3a\u5bc6\u94a5\u6587\u4ef6\u800c\u4e0d\u662f\u539f\u6765\u7684 .putty # ascp \u4e0b\u8f7d SRA \u6570\u636e $ ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh \\ > --user = anonftp --host = ftp.ncbi.nlm.nih.gov --mode = recv -l 100m -pQTk1 \\ > /sra/sra-instant/reads/ByRun/sra/SRR/SRR955/SRR955386/SRR955386.sra . # \u6dfb\u52a0 alias \u7b80\u5316\u64cd\u4f5c $ echo \"alias ascp='ascp -i ~/.ascpera/connect/etc/asperaweb_id_dsa.openssh --user=dbtest --host=sra-download.ncbi.nlm.nih.gov --mode=recv -l 100m -pQTk1'\" >> ~/.bashrc $ source ~/.bashrc # \u6d4b\u8bd5\u4e0b\u8f7d $ ascp /data/sracloud/srapub/ERR579922 ./ERR578822.sra","title":"1.2.1 \u7528 Aspera \u5de5\u5177\u4e0b\u8f7d SRA"},{"location":"book/C01_Common-Utility/01_database/#122-ftp","text":"\u4ece\u56fd\u5185\u516c\u7f51\u8bbf\u95ee NCBI FTP \u670d\u52a1\u5668\u5f80\u5f80\u662f\u975e\u5e38\u7f13\u6162\u7684\uff0c\u800c EBI \u5c31\u4e0d\u540c\u4e86\uff0c\u6709\u4e9b\u5730\u65b9\u7684\u901f\u5ea6\u5f88\u5feb\uff0c\u4e0b\u8f7d\u751a\u81f3\u53ef\u4ee5\u8d85\u8fc7 Aspera \u3002\u7531\u4e8e NCBI \u548c EBI \u5171\u4eab\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u5bf9\u4e8e\u56fd\u5185 NCBI \u4e0b\u8f7d\u7f13\u6162\u6216\u8005\u65e0\u6cd5\u7528 ascp \u7684\u7528\u6237\uff0c\u53ef\u4ee5\u8003\u8651\u5728 EBI \u4e0b\u8f7d\u6570\u636e\u3002","title":"1.2.2 ftp \u4e0b\u8f7d"},{"location":"book/C01_Common-Utility/01_database/#22-sratoolkit","text":"NCBI \u5f00\u53d1\u4e86 sratoolkit \u5de5\u5177\u6765\u5e2e\u52a9\u5904\u7406 SRA \u6570\u636e\uff0c\u6b63\u786e\u914d\u7f6e\u540e\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u4e0b\u8f7d SRA \u6570\u636e\u3002","title":"2.2 sratoolkit"},{"location":"book/C01_Common-Utility/01_database/#221-sratoolkit","text":"\u53ef\u4ee5\u76f4\u63a5\u4ece NCBI \u4e0a\u4e0b\u8f7d\u3002\u6700\u65b0\u7684\u6e90\u7801\u53ef\u4ee5\u5728 Github \u83b7\u5f97\u3002 # download from NCBI $ cd /tmp $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.6/sratoolkit.2.5.6-ubuntu64.tar.gz $ tar zxf sratoolkit.2.5.6-ubuntu64.tar.gz -C ~/app","title":"2.2.1 \u5b89\u88c5sratoolkit"},{"location":"book/C01_Common-Utility/01_database/#222-sra","text":"\u5982\u679c\u4f60\u5b89\u88c5\u5e76\u8bbe\u7f6e\u4e86 Aspera Connect \uff0c\u90a3\u4e48 prefetch \u4f1a\u4f18\u5148\u4f7f\u7528 ascp \u65b9\u5f0f\u6765\u4e0b\u8f7d\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u6216\u5219 ascp \u4e0b\u8f7d\u5931\u8d25\uff0c\u5219\u5207\u6362\u6210 HTTP \u65b9\u5f0f\u4e0b\u8f7d sra \u6570\u636e\u3002\u53e6\u5916 fastq-dump \u547d\u4ee4\u4e5f\u80fd\u4ece\u8fdc\u7aef\u76f4\u63a5\u4e0b\u8f7d\u6570\u636e\uff0c\u52a0\u4e0a -X 1 \u53c2\u6570\uff0c\u4f1a\u9884\u5148\u4e0b\u8f7d\u6700\u524d\u76845\u4e2a reads\uff0c\u52a0\u4e0a -Z \u53c2\u6570\uff0c\u5219\u4f1a\u5c06\u8fd9\u4e9b reads \u6253\u5370\u5230\u7ec8\u7aef\u8f93\u51fa\u3002 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra $ prefetch -v SRR955386 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra\uff0c\u5e76\u4e14\u5728\u7ec8\u7aef\u8f93\u51fa5\u884c reads \u6570\u636e\u3002 $ fastq-dump -X 5 -Z SRR955386","title":"2.2.2 \u4e0b\u8f7d SRA \u683c\u5f0f\u6587\u4ef6"},{"location":"book/C01_Common-Utility/01_database/#223-fastq","text":"\u83b7\u5f97\u4e86 .sra \u6587\u4ef6\u540e\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u6210 .fastq \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u7528 fastq-dump \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u3002\u8f6c\u6362\u4e4b\u524d\u8981\u6ce8\u610f\u7684\u662f\u8be5 run \u7684 metadata \u91cc\uff0c\u6d4b\u5e8f\u7c7b\u578b\u662f SE \u8fd8\u662f PE \u7684\u3002 # \u5c06 sra \u6587\u4ef6\u79fb\u52a8\u5230 ~/data \u76ee\u5f55\u4e2d $ mv ~/.ncbi/public/sra/SRR955386.sra ~/data # \u5982\u679c\u662f SE \u6d4b\u5e8f\u6570\u636e\uff0c\u76f4\u63a5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4 $ fastq-dump SRR955386.sra # \u5982\u679c\u662f PE \u6d4b\u5e8f\u6570\u636e\uff0c\u5219\u8981\u6dfb\u52a0\u53c2\u6570\uff1a--split-files $ fastq-dump --split-files SRR955386.sra","title":"2.2.3 \u5e76\u8f6c\u6362\u6210 .fastq \u683c\u5f0f"},{"location":"book/C01_Common-Utility/01_database/#224-sepe","text":"\u6b63\u5e38\u7684 sra \u6587\u4ef6\u7684 metadata \u5e94\u8be5\u5305\u542b\u6d4b\u5e8f\u91c7\u7528\u7684\u662f SE \u8fd8\u662f PE \u7684\u65b9\u5f0f\u3002\u4f46\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u6240\u4e0b\u8f7d\u7684\u5230\u5e95\u662f SE \u8fd8\u662f PE \u683c\u5f0f\u7684\u6587\u4ef6\u53ef\u4ee5\u7528 fastq-dump -X 1 --split-spot \u7684\u65b9\u6cd5\u6765\u5224\u65ad\u3002 # it's SE if nreads=1, and PE when nreads=2\uff0c\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u901f\u5ea6\u6bd4\u8f83\u6162 $ sra-stat -xs SRR955386.sra | grep \"nreads\" # \u5982\u679c\u8f93\u51fa\u662f4\uff0c\u90a3\u4e48\u5c31\u662fSE\uff0c\u5982\u679c\u662f8,\u5219\u662fPE $ fastq-dump -X 1 --split-spot -Z SRR955386.sra | wc -l # \u6216\u8005\u52a0\u4e0a\u53c2\u6570\u8ba9 fastq-dump \u81ea\u5df1\u5224\u65ad # \u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump\u53ea\u80fddump\u51fa1\u4e2a *_1.fastq \u6587\u4ef6 $ fastq-dump --split-files ERR493452.sra $ mv ERR493452_1.fastq ERR493452.fastq \u5f53\u9700\u8981\u5224\u65ad\u6279\u91cf\u4e0b\u8f7d\u7684 sra \u6587\u4ef6\u65f6\uff0c\u533a\u5206\u90a3\u4e9b\u662f PE \u7684\u90a3\u4e9b\u662f SE \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u811a\u672c\uff1a import os import subprocess def check_SRA_type ( fn ): fn = os . path . abspath ( fn ); try : contents = subprocess . check_output ([ \"fastq-dump\" , \"-X\" , \"1\" , \"-Z\" , \"--split-spot\" , fn ]); except subprocess . CalledProcessError , e : raise Exception ( \"Error running fastq-dump on\" , fn ); # -X 1 will output 4 lines if SE, and 8 lines if PE if ( contents . count ( \" \\n \" ) == 4 ): return False ; elif ( contents . count ( \" \\n \" ) == 8 ): return True : else : raise Exception ( \"Unexpected output from fastq-dump on \" , filename );","title":"2.2.4 SE/PE \u6587\u4ef6\u5224\u65ad"},{"location":"book/C01_Common-Utility/01_database/#225-entrez","text":"\u5982\u679c\u60f3\u4e0b\u8f7d\u4e00\u4e2a\u5b8c\u6574\u7684 project \u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528 entrezdirect \u5de5\u5177\u3002 ~/tmp$ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz ~/tmp$ tar zxvf edirect.tar.gz -C ~/app ~/tmp$ sudo ln -s ~/app/edirect/* /usr/local/sbin/ ~/data$ esearch -db sra -query PRJNA40075 | efetch --format runinfo | cut -d ',' -f 1 | grep SRR | xargs fastq-dump --split-files \u5982\u679c\u60f3\u4e0b\u8f7d\u4e0d\u540c research \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u81ea\u5df1\u5efa\u7acb\u4e00\u4e2a accession number list \u7684\u6587\u4ef6\uff0c\u6bd4\u5982\u5229\u7528 NCBI \u7684 entrez \u7f51\u9875\u754c\u9762\uff0c\u5bfc\u51fa\u6240\u9700\u8981\u7684\u6570\u636e accession number\uff0c\u7136\u540e\u5229\u7528 ascp \u4e0b\u8f7d\u3002\u4e0d\u8fc7\u5efa\u8bae ascp \u4e0b\u8f7d\u4e0d\u8981\u592a\u72e0\u5fc3\uff0c\u5426\u5219\u5bb9\u6613\u88ab NCBI \u7ed9\u5c01\u6389\u3002","title":"2.2.5 \u5229\u7528entrez\u6279\u91cf\u4e0b\u8f7d"},{"location":"book/C01_Common-Utility/01_database/#3-assembly","text":"\u5982\u679c\u4e0d\u9700\u8981\u7814\u7a76 reads \u6570\u636e\uff0c\u800c\u662f\u53ea\u60f3\u7814\u7a76\u62fc\u63a5\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u4ece NCBI assembly \u6570\u636e\u5e93\u53bb\u5bfb\u627e\u6570\u636e\uff0c\u5e76\u901a\u8fc7 ascp/ftp \u7b49\u5de5\u5177\u4e0b\u8f7d\u3002","title":"3. Assembly \u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#4","text":"SRA \u4e0a\u4f20\u6d4b\u5e8f\u7ed3\u679c\u53ef\u4ee5\u53c2\u7167 NCBI\u6587\u6863 \u6765\u5b9e\u73b0\u3002\u4e00\u822c\u4e0a\u4f20\u6570\u636e\u5230NCBI SRA\u7684\u8fc7\u7a0b\u9700\u89816\u6b65\uff1a Create a BioProject for this research Create a BioSample submission for your biological sample(s) Gather Sequence Data Files Enter Metadata on SRA website 4.1 Create SRA submission 4.2 Create Experiment(s) and link to BioProject and BioSample 4.3 Create Run(s) Transfer Data files to SRA Update Submission with PubMed links, Release Date, or Metadata Changes \u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u4e0a\u4f20\u7684\u8fc7\u7a0b\u4e2d\u5f88\u591a\u5730\u65b9\u4e00\u65e6\u4fdd\u5b58\u6216\u63d0\u4ea4\u5c31\u4e0d\u53ef\u4ee5\u4fee\u6539\uff0c\u5c24\u5176\u662f\u5404\u5904\u7684Alias\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u8054\u7cfbNCBI\u7684\u5de5\u4f5c\u4eba\u5458\u4fee\u6539\u5185\u5bb9\u3002NCBI\u7684\u5de5\u4f5c\u6548\u7387\u662f\u5f88\u9ad8\u7684\uff0c\u4e00\u822c\u4e0d\u8d85\u8fc748\u5c0f\u65f6\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u786e\u8ba4\uff0c\u5e76\u62ff\u5230\u767b\u5f55\u53f7\u3002","title":"4. \u4e0a\u4f20\u6570\u636e"},{"location":"book/C01_Common-Utility/01_database/#big","text":"\u51e0\u4e2a\u6570\u636e\u5e93\u5165\u53e3\uff1a Bioproject Biosample GSA \u4e00\u822c\u53ef\u4ee5\u901a\u8fc7FTP\u65b9\u5f0f\u4e0b\u8f7d:w","title":"BIG(\u4e2d\u56fd\u79d1\u5b66\u9662\u5317\u4eac\u57fa\u56e0\u7ec4\u6240)"},{"location":"book/C01_Common-Utility/01_database/#_2","text":"\u7ec6\u83cc\u3001\u771f\u83cc\u548c\u8d28\u7c92\u7684\u590d\u5236\u8d77\u59cb\u4f4d\u70b9\u6570\u636e\u5e93","title":"\u590d\u5236\u8d77\u70b9\u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#_3","text":"","title":"\u8d28\u7c92\u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#plsdb","text":"","title":"plsdb\u8d28\u7c92\u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/01_database/#eggnog","text":"","title":"eggNOG"},{"location":"book/C01_Common-Utility/01_database/#go","text":"","title":"GO"},{"location":"book/C01_Common-Utility/01_database/#reference","text":"NCBI\u4e0a\u4f20\u6570\u636e\u6587\u6863 \u718a\u7b71\u6676, NCBI\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5e93SRA\u4ecb\u7ecd, \u751f\u547d\u7684\u5316\u5b66[J], 2010:6, 959-963. http://blog.sciencenet.cn/blog-656335-908140.html https://www.biostars.org/p/139422/ https://www.youtube.com/watch?v=NSIkUHKRPpo","title":"Reference"},{"location":"book/C01_Common-Utility/02_get-data/","text":"\u547d\u4ee4\u884c\u4e0b\u8f7d\u516c\u5171\u6570\u636e\u5e93\u57fa\u56e0\u7ec4\u6570\u636e \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} SRA Assembly SRA \u6570\u636e\u4e0b\u8f7d \u00b6 \u8fd9\u4e9b\u516c\u5171\u6570\u636e\u5e93\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u65b9\u5f0f\u4e0b\u8f7d\uff0c\u5982https\u3001ftp\uff0c\u6216\u8005\u4f7f\u7528aspera\u8fd9\u4e2a\u5de5\u5177\u8fdb\u884c\u9ad8\u901f\u4e0b\u8f7d\u3002 1.2.1 \u7528 Aspera \u5de5\u5177\u4e0b\u8f7d SRA \u00b6 Aspera \u4ecb\u7ecd Aspera \u662f IBM \u5f00\u53d1\u7684\u52a0\u901f\u5728\u7ebf\u6570\u636e\u4f20\u8f93\u7684\u4e00\u7ec4\u670d\u52a1\u5668\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 Aspera \u7684\u5404\u4e2a\u5de5\u5177\u53ef\u4ee5\u5728 \u5b98\u65b9\u7f51\u7ad9 \u4e0b\u8f7d\u83b7\u5f97\u3002 \u5728\u670d\u52a1\u5668\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u547d\u4ee4\u884c\u5de5\u5177 ascp \u5373\u53ef\u3002\u800c\u5bf9\u4e8e\u684c\u9762\u7528\u6237\u6765\u8bf4\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Aspera Connent \u7b49\u5de5\u5177\u3002\u7531\u4e8e Ascp Client \u5de5\u5177\u9700\u8981\u767b\u5f55\u540e\u624d\u80fd\u4e0b\u8f7d\uff0c\u56e0\u6b64\u9009\u62e9\u4e86 Aspera Connect \u6765\u5b89\u88c5\u3002\u5b83\u662f Aspera \u7528\u4e8e\u6d4f\u89c8\u5668\u4e0b\u8f7d\u7684\u9ad8\u6548\u63d2\u4ef6\uff0c\u5176\u5185\u5d4c\u4e86 ascp \u547d\u4ee4\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u3002\u5b89\u88c5\u4e86 Aspera Connect \u7684\u5e26\u56fe\u5f62\u754c\u9762\u7684\u5ba2\u6237\u7aef\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u6709 Connect, Faspex \u6216\u8005 Shares \u9875\u9762\u7684\u94fe\u63a5\u5904\u6dfb\u52a0 ascp \u4e0b\u8f7d\u5feb\u6377\u6309\u94ae\u3002 \u5b89\u88c5 aspera connect Aspera Connect \u4e0b\u8f7d\u89e3\u538b\u7f29\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a .sh \u6587\u4ef6\uff0c\u6267\u884c\u540e\u8fd0\u884c\u540e\u4f1a\u5b89\u88c5\u5230\u5f53\u524d\u7528\u6237 $HOME.aspera/connect \u76ee\u5f55\u4e0b\u3002 # \u4e0b\u8f7d\u5e76\u89e3\u538b\u7f29\u7a0b\u5e8f $ wget http://download.asperasoft.com/download/sw/connect/3.6.1/aspera-connect-3.6.1.110647-linux-64.tar.gz $ tar zxf asper-connect-3.6.1.110647-linux.tar.gz # \u5b89\u88c5\u5230\u672c\u5730\u7528\u6237 $ ./aspera-connect-3.6.1.110647-linux-64.sh # \u6dfb\u52a0\u7528\u6237\u6267\u884c\u8def\u5f84 $ echo 'PATH=\"$PATH:$HOME/.aspera/connect/bin/\"' >> ~/.bashrc \u5bf9\u4e8e\u559c\u6b22\u4f7f\u7528\u5ba2\u6237\u7aef\u7684\u684c\u9762\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Aspera Desktop Client \u5ba2\u6237\u7aef\u7a0b\u5e8f\u6765\u4e0b\u8f7d\u6570\u636e\u3002 $ sed 's/^INSTALL_DIR/INSTALL_DIR=~/envs/srst2/src/ascp/connect/' aspera-connect-3.6.1.110647-linux-64.sh > install.sh $ ./install.sh \u4e0b\u8f7d SRA \u6570\u636e \u6ce8\u610f \u6ce8\u610f\u65b0\u7248\u7684 ascp \u7528 .openssh \u4f5c\u4e3a\u5bc6\u94a5\u6587\u4ef6\u800c\u4e0d\u662f\u539f\u6765\u7684 .putty # ascp \u4e0b\u8f7d SRA \u6570\u636e $ ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh \\ > --user = anonftp --host = ftp.ncbi.nlm.nih.gov --mode = recv -l 100m -pQTk1 \\ > /sra/sra-instant/reads/ByRun/sra/SRR/SRR955/SRR955386/SRR955386.sra . # \u6dfb\u52a0 alias \u7b80\u5316\u64cd\u4f5c $ echo \"alias ascp='ascp -i ~/.ascpera/connect/etc/asperaweb_id_dsa.openssh --user=dbtest --host=sra-download.ncbi.nlm.nih.gov --mode=recv -l 100m -pQTk1'\" >> ~/.bashrc $ source ~/.bashrc # \u6d4b\u8bd5\u4e0b\u8f7d $ ascp /data/sracloud/srapub/ERR579922 ./ERR578822.sra 1.2.2 ftp \u4e0b\u8f7d \u00b6 \u4ece\u56fd\u5185\u516c\u7f51\u8bbf\u95ee NCBI FTP \u670d\u52a1\u5668\u5f80\u5f80\u662f\u975e\u5e38\u7f13\u6162\u7684\uff0c\u800c EBI \u5c31\u4e0d\u540c\u4e86\uff0c\u6709\u4e9b\u5730\u65b9\u7684\u901f\u5ea6\u5f88\u5feb\uff0c\u4e0b\u8f7d\u751a\u81f3\u53ef\u4ee5\u8d85\u8fc7 Aspera \u3002\u7531\u4e8e NCBI \u548c EBI \u5171\u4eab\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u5bf9\u4e8e\u56fd\u5185 NCBI \u4e0b\u8f7d\u7f13\u6162\u6216\u8005\u65e0\u6cd5\u7528 ascp \u7684\u7528\u6237\uff0c\u53ef\u4ee5\u8003\u8651\u5728 EBI \u4e0b\u8f7d\u6570\u636e\u3002 2.2 sratoolkit \u00b6 NCBI \u5f00\u53d1\u4e86 sratoolkit \u5de5\u5177\u6765\u5e2e\u52a9\u5904\u7406 SRA \u6570\u636e\uff0c\u6b63\u786e\u914d\u7f6e\u540e\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u4e0b\u8f7d SRA \u6570\u636e\u3002 2.2.1 \u5b89\u88c5sratoolkit \u00b6 \u53ef\u4ee5\u76f4\u63a5\u4ece NCBI \u4e0a\u4e0b\u8f7d\u3002\u6700\u65b0\u7684\u6e90\u7801\u53ef\u4ee5\u5728 Github \u83b7\u5f97\u3002 # download from NCBI $ cd /tmp $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.6/sratoolkit.2.5.6-ubuntu64.tar.gz $ tar zxf sratoolkit.2.5.6-ubuntu64.tar.gz -C ~/app 2.2.2 \u4e0b\u8f7d SRA \u683c\u5f0f\u6587\u4ef6 \u00b6 \u5982\u679c\u4f60\u5b89\u88c5\u5e76\u8bbe\u7f6e\u4e86 Aspera Connect \uff0c\u90a3\u4e48 prefetch \u4f1a\u4f18\u5148\u4f7f\u7528 ascp \u65b9\u5f0f\u6765\u4e0b\u8f7d\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u6216\u5219 ascp \u4e0b\u8f7d\u5931\u8d25\uff0c\u5219\u5207\u6362\u6210 HTTP \u65b9\u5f0f\u4e0b\u8f7d sra \u6570\u636e\u3002\u53e6\u5916 fastq-dump \u547d\u4ee4\u4e5f\u80fd\u4ece\u8fdc\u7aef\u76f4\u63a5\u4e0b\u8f7d\u6570\u636e\uff0c\u52a0\u4e0a -X 1 \u53c2\u6570\uff0c\u4f1a\u9884\u5148\u4e0b\u8f7d\u6700\u524d\u76845\u4e2a reads\uff0c\u52a0\u4e0a -Z \u53c2\u6570\uff0c\u5219\u4f1a\u5c06\u8fd9\u4e9b reads \u6253\u5370\u5230\u7ec8\u7aef\u8f93\u51fa\u3002 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra $ prefetch -v SRR955386 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra\uff0c\u5e76\u4e14\u5728\u7ec8\u7aef\u8f93\u51fa5\u884c reads \u6570\u636e\u3002 $ fastq-dump -X 5 -Z SRR955386 2.2.3 \u5e76\u8f6c\u6362\u6210 .fastq \u683c\u5f0f \u00b6 \u83b7\u5f97\u4e86 .sra \u6587\u4ef6\u540e\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u6210 .fastq \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u7528 fastq-dump \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u3002\u8f6c\u6362\u4e4b\u524d\u8981\u6ce8\u610f\u7684\u662f\u8be5 run \u7684 metadata \u91cc\uff0c\u6d4b\u5e8f\u7c7b\u578b\u662f SE \u8fd8\u662f PE \u7684\u3002 # \u5c06 sra \u6587\u4ef6\u79fb\u52a8\u5230 ~/data \u76ee\u5f55\u4e2d $ mv ~/.ncbi/public/sra/SRR955386.sra ~/data # \u5982\u679c\u662f SE \u6d4b\u5e8f\u6570\u636e\uff0c\u76f4\u63a5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4 $ fastq-dump SRR955386.sra # \u5982\u679c\u662f PE \u6d4b\u5e8f\u6570\u636e\uff0c\u5219\u8981\u6dfb\u52a0\u53c2\u6570\uff1a--split-files $ fastq-dump --split-files SRR955386.sra 2.2.4 SE/PE \u6587\u4ef6\u5224\u65ad \u00b6 \u6b63\u5e38\u7684 sra \u6587\u4ef6\u7684 metadata \u5e94\u8be5\u5305\u542b\u6d4b\u5e8f\u91c7\u7528\u7684\u662f SE \u8fd8\u662f PE \u7684\u65b9\u5f0f\u3002\u4f46\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u6240\u4e0b\u8f7d\u7684\u5230\u5e95\u662f SE \u8fd8\u662f PE \u683c\u5f0f\u7684\u6587\u4ef6\u53ef\u4ee5\u7528 fastq-dump -X 1 --split-spot \u7684\u65b9\u6cd5\u6765\u5224\u65ad\u3002 # it's SE if nreads=1, and PE when nreads=2\uff0c\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u901f\u5ea6\u6bd4\u8f83\u6162 $ sra-stat -xs SRR955386.sra | grep \"nreads\" # \u5982\u679c\u8f93\u51fa\u662f4\uff0c\u90a3\u4e48\u5c31\u662fSE\uff0c\u5982\u679c\u662f8,\u5219\u662fPE $ fastq-dump -X 1 --split-spot -Z SRR955386.sra | wc -l # \u6216\u8005\u52a0\u4e0a\u53c2\u6570\u8ba9 fastq-dump \u81ea\u5df1\u5224\u65ad # \u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump\u53ea\u80fddump\u51fa1\u4e2a *_1.fastq \u6587\u4ef6 $ fastq-dump --split-files ERR493452.sra $ mv ERR493452_1.fastq ERR493452.fastq \u5f53\u9700\u8981\u5224\u65ad\u6279\u91cf\u4e0b\u8f7d\u7684 sra \u6587\u4ef6\u65f6\uff0c\u533a\u5206\u90a3\u4e9b\u662f PE \u7684\u90a3\u4e9b\u662f SE \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u811a\u672c\uff1a import os import subprocess def check_SRA_type ( fn ): fn = os . path . abspath ( fn ); try : contents = subprocess . check_output ([ \"fastq-dump\" , \"-X\" , \"1\" , \"-Z\" , \"--split-spot\" , fn ]); except subprocess . CalledProcessError , e : raise Exception ( \"Error running fastq-dump on\" , fn ); # -X 1 will output 4 lines if SE, and 8 lines if PE if ( contents . count ( \" \\n \" ) == 4 ): return False ; elif ( contents . count ( \" \\n \" ) == 8 ): return True : else : raise Exception ( \"Unexpected output from fastq-dump on \" , filename ); 2.2.5 \u5229\u7528entrez\u6279\u91cf\u4e0b\u8f7d \u00b6 \u5982\u679c\u60f3\u4e0b\u8f7d\u4e00\u4e2a\u5b8c\u6574\u7684 project \u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528 entrez-direct \u5de5\u5177\u3002 # \u5e0c\u671b\u4e0b\u8f7d\u7814\u7a76PRJNA40075\u9879\u76ee\u7684\u6570\u636e $ esearch -db sra -query PRJNA40075 | efetch --format runinfo | cut -d ',' -f 1 | grep SRR | xargs fastq-dump --split-files \u5982\u679c\u60f3\u4e0b\u8f7d\u4e0d\u540c research \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u81ea\u5df1\u5efa\u7acb\u4e00\u4e2a accession number list \u7684\u6587\u4ef6\uff0c\u6bd4\u5982\u5229\u7528 NCBI \u7684 entrez \u7f51\u9875\u754c\u9762\uff0c\u5bfc\u51fa\u6240\u9700\u8981\u7684\u6570\u636e accession number\uff0c\u7136\u540e\u5229\u7528 ascp \u4e0b\u8f7d\u3002\u4e0d\u8fc7\u5efa\u8bae ascp \u4e0b\u8f7d\u4e0d\u8981\u592a\u72e0\u5fc3\uff0c\u5426\u5219\u5bb9\u6613\u88ab NCBI \u7ed9\u5c01\u6389\u3002 3. Assembly \u6570\u636e\u5e93 \u00b6 \u5982\u679c\u4e0d\u9700\u8981\u7814\u7a76 reads \u6570\u636e\uff0c\u800c\u662f\u53ea\u60f3\u7814\u7a76\u62fc\u63a5\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u4ece NCBI assembly \u6570\u636e\u5e93\u53bb\u5bfb\u627e\u6570\u636e\uff0c\u5e76\u901a\u8fc7 ascp/ftp \u7b49\u5de5\u5177\u4e0b\u8f7d\u3002 4. \u4e0a\u4f20\u6570\u636e \u00b6 SRA \u4e0a\u4f20\u6d4b\u5e8f\u7ed3\u679c\u53ef\u4ee5\u53c2\u7167 NCBI\u6587\u6863 \u6765\u5b9e\u73b0\u3002\u4e00\u822c\u4e0a\u4f20\u6570\u636e\u5230NCBI SRA\u7684\u8fc7\u7a0b\u9700\u89816\u6b65\uff1a Create a BioProject for this research Create a BioSample submission for your biological sample(s) Gather Sequence Data Files Enter Metadata on SRA website 4.1 Create SRA submission 4.2 Create Experiment(s) and link to BioProject and BioSample 4.3 Create Run(s) Transfer Data files to SRA Update Submission with PubMed links, Release Date, or Metadata Changes \u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u4e0a\u4f20\u7684\u8fc7\u7a0b\u4e2d\u5f88\u591a\u5730\u65b9\u4e00\u65e6\u4fdd\u5b58\u6216\u63d0\u4ea4\u5c31\u4e0d\u53ef\u4ee5\u4fee\u6539\uff0c\u5c24\u5176\u662f\u5404\u5904\u7684Alias\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u8054\u7cfbNCBI\u7684\u5de5\u4f5c\u4eba\u5458\u4fee\u6539\u5185\u5bb9\u3002NCBI\u7684\u5de5\u4f5c\u6548\u7387\u662f\u5f88\u9ad8\u7684\uff0c\u4e00\u822c\u4e0d\u8d85\u8fc748\u5c0f\u65f6\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u786e\u8ba4\uff0c\u5e76\u62ff\u5230\u767b\u5f55\u53f7\u3002 Reference \u00b6 NCBI\u4e0a\u4f20\u6570\u636e\u6587\u6863 \u718a\u7b71\u6676, NCBI\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5e93SRA\u4ecb\u7ecd, \u751f\u547d\u7684\u5316\u5b66[J], 2010:6, 959-963. http://blog.sciencenet.cn/blog-656335-908140.html https://www.biostars.org/p/139422/ https://www.youtube.com/watch?v=NSIkUHKRPpo","title":"02. \u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6570\u636e"},{"location":"book/C01_Common-Utility/02_get-data/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} SRA Assembly","title":"\u547d\u4ee4\u884c\u4e0b\u8f7d\u516c\u5171\u6570\u636e\u5e93\u57fa\u56e0\u7ec4\u6570\u636e"},{"location":"book/C01_Common-Utility/02_get-data/#sra","text":"\u8fd9\u4e9b\u516c\u5171\u6570\u636e\u5e93\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7\u4e0d\u540c\u65b9\u5f0f\u4e0b\u8f7d\uff0c\u5982https\u3001ftp\uff0c\u6216\u8005\u4f7f\u7528aspera\u8fd9\u4e2a\u5de5\u5177\u8fdb\u884c\u9ad8\u901f\u4e0b\u8f7d\u3002","title":"SRA \u6570\u636e\u4e0b\u8f7d"},{"location":"book/C01_Common-Utility/02_get-data/#121-aspera-sra","text":"Aspera \u4ecb\u7ecd Aspera \u662f IBM \u5f00\u53d1\u7684\u52a0\u901f\u5728\u7ebf\u6570\u636e\u4f20\u8f93\u7684\u4e00\u7ec4\u670d\u52a1\u5668\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u3002 Aspera \u7684\u5404\u4e2a\u5de5\u5177\u53ef\u4ee5\u5728 \u5b98\u65b9\u7f51\u7ad9 \u4e0b\u8f7d\u83b7\u5f97\u3002 \u5728\u670d\u52a1\u5668\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u547d\u4ee4\u884c\u5de5\u5177 ascp \u5373\u53ef\u3002\u800c\u5bf9\u4e8e\u684c\u9762\u7528\u6237\u6765\u8bf4\uff0c\u53ef\u4ee5\u9009\u62e9\u5b89\u88c5 Aspera Connent \u7b49\u5de5\u5177\u3002\u7531\u4e8e Ascp Client \u5de5\u5177\u9700\u8981\u767b\u5f55\u540e\u624d\u80fd\u4e0b\u8f7d\uff0c\u56e0\u6b64\u9009\u62e9\u4e86 Aspera Connect \u6765\u5b89\u88c5\u3002\u5b83\u662f Aspera \u7528\u4e8e\u6d4f\u89c8\u5668\u4e0b\u8f7d\u7684\u9ad8\u6548\u63d2\u4ef6\uff0c\u5176\u5185\u5d4c\u4e86 ascp \u547d\u4ee4\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u3002\u5b89\u88c5\u4e86 Aspera Connect \u7684\u5e26\u56fe\u5f62\u754c\u9762\u7684\u5ba2\u6237\u7aef\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u6709 Connect, Faspex \u6216\u8005 Shares \u9875\u9762\u7684\u94fe\u63a5\u5904\u6dfb\u52a0 ascp \u4e0b\u8f7d\u5feb\u6377\u6309\u94ae\u3002 \u5b89\u88c5 aspera connect Aspera Connect \u4e0b\u8f7d\u89e3\u538b\u7f29\u540e\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a .sh \u6587\u4ef6\uff0c\u6267\u884c\u540e\u8fd0\u884c\u540e\u4f1a\u5b89\u88c5\u5230\u5f53\u524d\u7528\u6237 $HOME.aspera/connect \u76ee\u5f55\u4e0b\u3002 # \u4e0b\u8f7d\u5e76\u89e3\u538b\u7f29\u7a0b\u5e8f $ wget http://download.asperasoft.com/download/sw/connect/3.6.1/aspera-connect-3.6.1.110647-linux-64.tar.gz $ tar zxf asper-connect-3.6.1.110647-linux.tar.gz # \u5b89\u88c5\u5230\u672c\u5730\u7528\u6237 $ ./aspera-connect-3.6.1.110647-linux-64.sh # \u6dfb\u52a0\u7528\u6237\u6267\u884c\u8def\u5f84 $ echo 'PATH=\"$PATH:$HOME/.aspera/connect/bin/\"' >> ~/.bashrc \u5bf9\u4e8e\u559c\u6b22\u4f7f\u7528\u5ba2\u6237\u7aef\u7684\u684c\u9762\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Aspera Desktop Client \u5ba2\u6237\u7aef\u7a0b\u5e8f\u6765\u4e0b\u8f7d\u6570\u636e\u3002 $ sed 's/^INSTALL_DIR/INSTALL_DIR=~/envs/srst2/src/ascp/connect/' aspera-connect-3.6.1.110647-linux-64.sh > install.sh $ ./install.sh \u4e0b\u8f7d SRA \u6570\u636e \u6ce8\u610f \u6ce8\u610f\u65b0\u7248\u7684 ascp \u7528 .openssh \u4f5c\u4e3a\u5bc6\u94a5\u6587\u4ef6\u800c\u4e0d\u662f\u539f\u6765\u7684 .putty # ascp \u4e0b\u8f7d SRA \u6570\u636e $ ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh \\ > --user = anonftp --host = ftp.ncbi.nlm.nih.gov --mode = recv -l 100m -pQTk1 \\ > /sra/sra-instant/reads/ByRun/sra/SRR/SRR955/SRR955386/SRR955386.sra . # \u6dfb\u52a0 alias \u7b80\u5316\u64cd\u4f5c $ echo \"alias ascp='ascp -i ~/.ascpera/connect/etc/asperaweb_id_dsa.openssh --user=dbtest --host=sra-download.ncbi.nlm.nih.gov --mode=recv -l 100m -pQTk1'\" >> ~/.bashrc $ source ~/.bashrc # \u6d4b\u8bd5\u4e0b\u8f7d $ ascp /data/sracloud/srapub/ERR579922 ./ERR578822.sra","title":"1.2.1 \u7528 Aspera \u5de5\u5177\u4e0b\u8f7d SRA"},{"location":"book/C01_Common-Utility/02_get-data/#122-ftp","text":"\u4ece\u56fd\u5185\u516c\u7f51\u8bbf\u95ee NCBI FTP \u670d\u52a1\u5668\u5f80\u5f80\u662f\u975e\u5e38\u7f13\u6162\u7684\uff0c\u800c EBI \u5c31\u4e0d\u540c\u4e86\uff0c\u6709\u4e9b\u5730\u65b9\u7684\u901f\u5ea6\u5f88\u5feb\uff0c\u4e0b\u8f7d\u751a\u81f3\u53ef\u4ee5\u8d85\u8fc7 Aspera \u3002\u7531\u4e8e NCBI \u548c EBI \u5171\u4eab\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u5bf9\u4e8e\u56fd\u5185 NCBI \u4e0b\u8f7d\u7f13\u6162\u6216\u8005\u65e0\u6cd5\u7528 ascp \u7684\u7528\u6237\uff0c\u53ef\u4ee5\u8003\u8651\u5728 EBI \u4e0b\u8f7d\u6570\u636e\u3002","title":"1.2.2 ftp \u4e0b\u8f7d"},{"location":"book/C01_Common-Utility/02_get-data/#22-sratoolkit","text":"NCBI \u5f00\u53d1\u4e86 sratoolkit \u5de5\u5177\u6765\u5e2e\u52a9\u5904\u7406 SRA \u6570\u636e\uff0c\u6b63\u786e\u914d\u7f6e\u540e\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u4e0b\u8f7d SRA \u6570\u636e\u3002","title":"2.2 sratoolkit"},{"location":"book/C01_Common-Utility/02_get-data/#221-sratoolkit","text":"\u53ef\u4ee5\u76f4\u63a5\u4ece NCBI \u4e0a\u4e0b\u8f7d\u3002\u6700\u65b0\u7684\u6e90\u7801\u53ef\u4ee5\u5728 Github \u83b7\u5f97\u3002 # download from NCBI $ cd /tmp $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.5.6/sratoolkit.2.5.6-ubuntu64.tar.gz $ tar zxf sratoolkit.2.5.6-ubuntu64.tar.gz -C ~/app","title":"2.2.1 \u5b89\u88c5sratoolkit"},{"location":"book/C01_Common-Utility/02_get-data/#222-sra","text":"\u5982\u679c\u4f60\u5b89\u88c5\u5e76\u8bbe\u7f6e\u4e86 Aspera Connect \uff0c\u90a3\u4e48 prefetch \u4f1a\u4f18\u5148\u4f7f\u7528 ascp \u65b9\u5f0f\u6765\u4e0b\u8f7d\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\u6216\u5219 ascp \u4e0b\u8f7d\u5931\u8d25\uff0c\u5219\u5207\u6362\u6210 HTTP \u65b9\u5f0f\u4e0b\u8f7d sra \u6570\u636e\u3002\u53e6\u5916 fastq-dump \u547d\u4ee4\u4e5f\u80fd\u4ece\u8fdc\u7aef\u76f4\u63a5\u4e0b\u8f7d\u6570\u636e\uff0c\u52a0\u4e0a -X 1 \u53c2\u6570\uff0c\u4f1a\u9884\u5148\u4e0b\u8f7d\u6700\u524d\u76845\u4e2a reads\uff0c\u52a0\u4e0a -Z \u53c2\u6570\uff0c\u5219\u4f1a\u5c06\u8fd9\u4e9b reads \u6253\u5370\u5230\u7ec8\u7aef\u8f93\u51fa\u3002 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra $ prefetch -v SRR955386 # \u4e0b\u8f7d SRR955386.sra \u5230 \u4f60\u5b89\u88c5 sratoolkit \u65f6\u914d\u7f6e\u7684 public \u76ee\u5f55\u4e2d\uff0c\u9ed8\u8ba4\u662f ~/ncbi/public/sra\uff0c\u5e76\u4e14\u5728\u7ec8\u7aef\u8f93\u51fa5\u884c reads \u6570\u636e\u3002 $ fastq-dump -X 5 -Z SRR955386","title":"2.2.2 \u4e0b\u8f7d SRA \u683c\u5f0f\u6587\u4ef6"},{"location":"book/C01_Common-Utility/02_get-data/#223-fastq","text":"\u83b7\u5f97\u4e86 .sra \u6587\u4ef6\u540e\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u6210 .fastq \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u7528 fastq-dump \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u3002\u8f6c\u6362\u4e4b\u524d\u8981\u6ce8\u610f\u7684\u662f\u8be5 run \u7684 metadata \u91cc\uff0c\u6d4b\u5e8f\u7c7b\u578b\u662f SE \u8fd8\u662f PE \u7684\u3002 # \u5c06 sra \u6587\u4ef6\u79fb\u52a8\u5230 ~/data \u76ee\u5f55\u4e2d $ mv ~/.ncbi/public/sra/SRR955386.sra ~/data # \u5982\u679c\u662f SE \u6d4b\u5e8f\u6570\u636e\uff0c\u76f4\u63a5\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4 $ fastq-dump SRR955386.sra # \u5982\u679c\u662f PE \u6d4b\u5e8f\u6570\u636e\uff0c\u5219\u8981\u6dfb\u52a0\u53c2\u6570\uff1a--split-files $ fastq-dump --split-files SRR955386.sra","title":"2.2.3 \u5e76\u8f6c\u6362\u6210 .fastq \u683c\u5f0f"},{"location":"book/C01_Common-Utility/02_get-data/#224-sepe","text":"\u6b63\u5e38\u7684 sra \u6587\u4ef6\u7684 metadata \u5e94\u8be5\u5305\u542b\u6d4b\u5e8f\u91c7\u7528\u7684\u662f SE \u8fd8\u662f PE \u7684\u65b9\u5f0f\u3002\u4f46\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u6240\u4e0b\u8f7d\u7684\u5230\u5e95\u662f SE \u8fd8\u662f PE \u683c\u5f0f\u7684\u6587\u4ef6\u53ef\u4ee5\u7528 fastq-dump -X 1 --split-spot \u7684\u65b9\u6cd5\u6765\u5224\u65ad\u3002 # it's SE if nreads=1, and PE when nreads=2\uff0c\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u56e0\u6b64\u901f\u5ea6\u6bd4\u8f83\u6162 $ sra-stat -xs SRR955386.sra | grep \"nreads\" # \u5982\u679c\u8f93\u51fa\u662f4\uff0c\u90a3\u4e48\u5c31\u662fSE\uff0c\u5982\u679c\u662f8,\u5219\u662fPE $ fastq-dump -X 1 --split-spot -Z SRR955386.sra | wc -l # \u6216\u8005\u52a0\u4e0a\u53c2\u6570\u8ba9 fastq-dump \u81ea\u5df1\u5224\u65ad # \u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump\u53ea\u80fddump\u51fa1\u4e2a *_1.fastq \u6587\u4ef6 $ fastq-dump --split-files ERR493452.sra $ mv ERR493452_1.fastq ERR493452.fastq \u5f53\u9700\u8981\u5224\u65ad\u6279\u91cf\u4e0b\u8f7d\u7684 sra \u6587\u4ef6\u65f6\uff0c\u533a\u5206\u90a3\u4e9b\u662f PE \u7684\u90a3\u4e9b\u662f SE \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u811a\u672c\uff1a import os import subprocess def check_SRA_type ( fn ): fn = os . path . abspath ( fn ); try : contents = subprocess . check_output ([ \"fastq-dump\" , \"-X\" , \"1\" , \"-Z\" , \"--split-spot\" , fn ]); except subprocess . CalledProcessError , e : raise Exception ( \"Error running fastq-dump on\" , fn ); # -X 1 will output 4 lines if SE, and 8 lines if PE if ( contents . count ( \" \\n \" ) == 4 ): return False ; elif ( contents . count ( \" \\n \" ) == 8 ): return True : else : raise Exception ( \"Unexpected output from fastq-dump on \" , filename );","title":"2.2.4 SE/PE \u6587\u4ef6\u5224\u65ad"},{"location":"book/C01_Common-Utility/02_get-data/#225-entrez","text":"\u5982\u679c\u60f3\u4e0b\u8f7d\u4e00\u4e2a\u5b8c\u6574\u7684 project \u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528 entrez-direct \u5de5\u5177\u3002 # \u5e0c\u671b\u4e0b\u8f7d\u7814\u7a76PRJNA40075\u9879\u76ee\u7684\u6570\u636e $ esearch -db sra -query PRJNA40075 | efetch --format runinfo | cut -d ',' -f 1 | grep SRR | xargs fastq-dump --split-files \u5982\u679c\u60f3\u4e0b\u8f7d\u4e0d\u540c research \u7684\u6570\u636e\uff0c\u53ef\u4ee5\u81ea\u5df1\u5efa\u7acb\u4e00\u4e2a accession number list \u7684\u6587\u4ef6\uff0c\u6bd4\u5982\u5229\u7528 NCBI \u7684 entrez \u7f51\u9875\u754c\u9762\uff0c\u5bfc\u51fa\u6240\u9700\u8981\u7684\u6570\u636e accession number\uff0c\u7136\u540e\u5229\u7528 ascp \u4e0b\u8f7d\u3002\u4e0d\u8fc7\u5efa\u8bae ascp \u4e0b\u8f7d\u4e0d\u8981\u592a\u72e0\u5fc3\uff0c\u5426\u5219\u5bb9\u6613\u88ab NCBI \u7ed9\u5c01\u6389\u3002","title":"2.2.5 \u5229\u7528entrez\u6279\u91cf\u4e0b\u8f7d"},{"location":"book/C01_Common-Utility/02_get-data/#3-assembly","text":"\u5982\u679c\u4e0d\u9700\u8981\u7814\u7a76 reads \u6570\u636e\uff0c\u800c\u662f\u53ea\u60f3\u7814\u7a76\u62fc\u63a5\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u4ece NCBI assembly \u6570\u636e\u5e93\u53bb\u5bfb\u627e\u6570\u636e\uff0c\u5e76\u901a\u8fc7 ascp/ftp \u7b49\u5de5\u5177\u4e0b\u8f7d\u3002","title":"3. Assembly \u6570\u636e\u5e93"},{"location":"book/C01_Common-Utility/02_get-data/#4","text":"SRA \u4e0a\u4f20\u6d4b\u5e8f\u7ed3\u679c\u53ef\u4ee5\u53c2\u7167 NCBI\u6587\u6863 \u6765\u5b9e\u73b0\u3002\u4e00\u822c\u4e0a\u4f20\u6570\u636e\u5230NCBI SRA\u7684\u8fc7\u7a0b\u9700\u89816\u6b65\uff1a Create a BioProject for this research Create a BioSample submission for your biological sample(s) Gather Sequence Data Files Enter Metadata on SRA website 4.1 Create SRA submission 4.2 Create Experiment(s) and link to BioProject and BioSample 4.3 Create Run(s) Transfer Data files to SRA Update Submission with PubMed links, Release Date, or Metadata Changes \u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u4e0a\u4f20\u7684\u8fc7\u7a0b\u4e2d\u5f88\u591a\u5730\u65b9\u4e00\u65e6\u4fdd\u5b58\u6216\u63d0\u4ea4\u5c31\u4e0d\u53ef\u4ee5\u4fee\u6539\uff0c\u5c24\u5176\u662f\u5404\u5904\u7684Alias\u3002\u4f46\u662f\uff0c\u53ef\u4ee5\u8054\u7cfbNCBI\u7684\u5de5\u4f5c\u4eba\u5458\u4fee\u6539\u5185\u5bb9\u3002NCBI\u7684\u5de5\u4f5c\u6548\u7387\u662f\u5f88\u9ad8\u7684\uff0c\u4e00\u822c\u4e0d\u8d85\u8fc748\u5c0f\u65f6\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u786e\u8ba4\uff0c\u5e76\u62ff\u5230\u767b\u5f55\u53f7\u3002","title":"4. \u4e0a\u4f20\u6570\u636e"},{"location":"book/C01_Common-Utility/02_get-data/#reference","text":"NCBI\u4e0a\u4f20\u6570\u636e\u6587\u6863 \u718a\u7b71\u6676, NCBI\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5e93SRA\u4ecb\u7ecd, \u751f\u547d\u7684\u5316\u5b66[J], 2010:6, 959-963. http://blog.sciencenet.cn/blog-656335-908140.html https://www.biostars.org/p/139422/ https://www.youtube.com/watch?v=NSIkUHKRPpo","title":"Reference"},{"location":"book/C01_Common-Utility/03_entrez/","text":"Entrez \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Entrez \u662f\u4ec0\u4e48 \u00b6 \u73a9\u8f6c entrez-direct \u00b6 \u5185\u5bb9\u7b80\u4ecb NCBI \u7684 Entrez \u5de5\u5177\u529f\u80fd\u975e\u5e38\u5f3a\u5927\uff0c\u65e2\u53ef\u4ee5\u4ece web \u9875\u9762\u8bbf\u95ee NCBI \u6765\u67e5\u8be2\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528 Entrez \u63d0\u4f9b\u7684 Web Services \u6765\u5b9e\u73b0\u8bf8\u591a\u529f\u80fd\uff08\u7f16\u5199\u7b2c\u4e09\u65b9\u7a0b\u5e8f\u7b49\uff09\u3002\u6b64\u5916 NCBI \u8fd8\u63d0\u4f9b\u4e86 Entrez \u7684\u547d\u4ee4\u884c\u5de5\u5177 edirect 1 \u3002edirect \u5168\u540d\u4e3a Entrez Direct \uff0c\u91cc\u9762\u5305\u542b\u4e86\u4e00\u7ec4\u5404\u53f8\u5176\u804c\u7684\u5de5\u5177\u548c\u811a\u672c\uff0c\u901a\u8fc7 Linux \u7cfb\u7edf\u4e0b\u7684\u7ba1\u9053pipeline 2 \u529f\u80fd\u8054\u5408\u4f7f\u7528\u8fd9\u4e9b\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u5b9e\u73b0\u9ad8\u6548\u7684\u8fdb\u884c Entrez \u7684\u68c0\u7d22\uff0c\u6293\u53d6\uff0c\u8fc7\u6ee4\uff0c\u6392\u5e8f\u7b49\u64cd\u4f5c\u3002 1. \u5b89\u88c5 \u00b6 1.1 \u4e0b\u8f7d\u5b89\u88c5 \u00b6 edirect \u76f4\u63a5\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\uff0c\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\u5373\u53ef\u3002 # \u4e0b\u8f7d edirect \u5b89\u88c5\u5305 $ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz # \u5c06 edirect \u5b89\u88c5\u5728\u7528\u6237 app \u76ee\u5f55\u4e0b\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u81ea\u884c\u9009\u62e9\u5b89\u88c5\u8def\u5f84 $ tar zxvf edirect.tar.gz -C ~/apps # \u8fd0\u884c\u5b89\u88c5\u811a\u672c $ cd ~/apps/edirect $ bash ./setup.sh # \u6dfb\u52a0\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55\u5230\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d $ echo \"export PATH='\\$PATH:\\$HOME/apps/edirect/'\" >> ~/.bashrc $ source ~/.bashrc \u5b89\u88c5\u8bf4\u660e \u8010\u5fc3\u7b49\u5f85\u4e00\u4f1a\uff0c\u5f53\u770b\u5230\u4e0b\u9762\u5b57\u7b26\u65f6\uff0c\u8868\u793a\u5b89\u88c5\u6210\u529f\u3002 ENTREZ DIRECT HAS BEEN SUCCESSFULLY INSTALLED AND CONFIGURED \u4e5f\u53ef\u4ee5\u4e0d\u8fd0\u884c setup.sh \u76f4\u63a5\u4f7f\u7528 edirect \u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u4e0d\u8fc7\u5982\u679c\u8981\u4f7f\u7528\u5168\u90e8\u529f\u80fd\uff0c\u6709\u4e9bperl\u6a21\u5757\u9700\u8981\u5b89\u88c5\uff0c\u8fd0\u884c setup.sh \u6765\u81ea\u52a8\u5b8c\u6210 CPAN \u7684 modual \u5b89\u88c5\u4ee5\u53ca go \u7248\u672c\u7684 xtract \u7684\u7f16\u8bd1\uff08\u4e0d\u8fd0\u884c\u5b89\u88c5\u811a\u672c\u4f1a\u8c03\u7528 perl \u7248\u672c\u7684 xtract\uff0c\u6570\u636e\u91cf\u5927\u65f6\u901f\u5ea6\u7565\u6162\uff09\u3002 \u63d0\u793a \u5bf9\u4e8e\u90e8\u5206\u64cd\u4f5c\u7cfb\u7edf\u5982 ubuntu \u7b49\uff0c uname \u4f4d\u4e8e /bin\uff0c\u800c xtract \u63a5\u53e3\u8c03\u7528\u811a\u672c\u4f7f\u7528 /usr/bin/uname \u6765\u5224\u65ad\u4f7f\u7528\u90a3\u4e2a\u7248\u672c\u7684 xtract\uff0c\u5982\u679c\u8981\u5728\u8fd9\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u6b63\u5e38\u4f7f\u7528 xtract\uff0c\u9700\u8981\u8ba9\u7a0b\u5e8f\u5728\u6b63\u786e\u8def\u5f84\u53ef\u8bc6\u522b\uff0c\u8fd9\u91cc\u901a\u8fc7\u6dfb\u52a0\u7cfb\u7edf link \u5230 /usr/bin/unname\u3002 # \u67e5\u770b uname \u8def\u5f84\u3002 $ which uname # \u5982\u679c\u662f\u4f4d\u4e8e /bin/ \u4e0b\uff0c\u5c06\u5176\u94fe\u63a5\u5230 /usr/bin/ \u4e0b\u5373\u53ef\u3002 $ sudo ln -s /bin/uname /usr/bin/uname 1.2 conda \u4e2d\u5b89\u88c5 \u00b6 \u5982\u679c\u7cfb\u7edf\u901a\u8fc7 conda \u8fdb\u884c\u8f6f\u4ef6\u7ba1\u7406\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5b89\u88c5\u3002 $ conda install entrez-direct \u4e0d\u8fc7 conda \u5b89\u88c5\u7684\u8fd8\u662f perl \u7248\u672c\u7684 xtract\uff0c\u800c\u4e0d\u662f go \u7248\u672c\u7684\uff0c\u9700\u8981\u5230 conda/pkgs \u5305\u6839\u76ee\u5f55\u4e2d\u7684 edirect \u76f8\u5e94\u76ee\u5f55\uff0c\u7528 setup.sh \u81ea\u884c\u7f16\u8bd1\u540e\u751f\u6210 xtract.Linux(Linux \u64cd\u4f5c\u7cfb\u7edf)\uff0c\u5c06\u5176\u590d\u5236\u5230 conda \u7684 bin \u8def\u5f84\u5373\u53ef\u3002go \u7248\u672c\u7684 xtract \u53ef\u4ee5\u7528 -help \u53c2\u6570\u67e5\u770b\u5e2e\u52a9\u3002 2. \u57fa\u672c\u7528\u6cd5 \u00b6 \u8868. \u6700\u5e38\u7528\u7684\u5de5\u5177\u53c2\u89c1\u4e0b\u8868 \u5de5\u5177\u540d\u79f0 \u5de5\u5177\u7528\u9014 \u5e38\u7528\u53c2\u6570 esearch \u641c\u7d22\u547d\u4ee4\uff0c\u5c06\u6240\u8981\u68c0\u7d22\u7684\u5185\u5bb9\u63d0\u4ea4\u5230 Entrez \u4e2d\uff0c\u8fd4\u56de\u76f8\u5e94\u7684\u7ed3\u679c\u8bb0\u5f55 -db\u3001-query efetch \u4e0b\u8f7d NCBI \u6570\u636e\u5e93\u4e2d\u7684\u8bb0\u5f55\u548c\u62a5\u544a\u5e76\u4ee5\u76f8\u5e94\u683c\u5f0f\u6253\u5370\u8f93\u51fa -db\u3001-id\u3001-format\u3001-mode einfo \u83b7\u53d6\u76ee\u6807\u7ed3\u679c\u5728\u6570\u636e\u5e93\u4e2d\u7684\u4fe1\u606f -db\u3001-dbs\u3001-fields\u3001-links elink \u5bf9\u76ee\u6807\u7ed3\u679c\u5728\u5176\u4ed6\u6570\u636e\u5e93\u4e2d\u6bd4\u914d\u7ed3\u679c -db\u3001-id\u3001-related\u3001-target\u3001-name epost \u4e0a\u4f20 UIDs \u6216\u8005 \u5e8f\u5217\u767b\u8bb0\u53f7 -db\u3001-id\u3001-format\u3001-input\u3001-label efilter \u5bf9\u4e4b\u524d\u7684\u68c0\u7d22\u7ed3\u679c\u8fdb\u884c\u8fc7\u6ee4\u6216\u9650\u5236 -query\u3001-sort\u3001-field xtract \u5c06esearch\u83b7\u5f97\u7684 XML \u683c\u5f0f\u7ed3\u679c\u8f6c\u6362\u6210\u8868\u683c\u683c\u5f0f -pattern\u3001-if\u3001-block\u3001-element\u3001-sep\u3001-filter esummary \u83b7\u5f97 XML \u683c\u5f0f\u7684\u5efa\u7acb -db\u3001-id\u3001-format\u3001-mode ecitmatch \u7edf\u8ba1\u5f15\u7528\u6570\u636e -journal\u3001-year\u3001-volume\u3001-page\u3001-author 2.1 esearch \u00b6 esearch \u8d1f\u8d23\u68c0\u7d22\u5e76\u8fd4\u56de xml \u683c\u5f0f\u7684\u547d\u4e2d\u60c5\u51b5\u3002\u4f7f\u7528 esearch \u547d\u4ee4\uff0c\u76f8\u5f53\u4e8e\u5e73\u65f6\u4f60\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee NCBI\uff0c\u5728 GQuery \u7684 nucletide \u6570\u636e\u5e93\u641c\u7d22\u89c1\u9762\u641c\u7d20\u5173\u952e\u5b57 salmonella \uff0c\u8fd4\u56de\u547d\u4e2d\u7ed3\u679c\u3002 $ esearch -db nuccore -query \"salmonella\" \u7ec8\u7aef\u91cc\u4f1a\u8fd4\u56de\u547d\u4e2d\u7ed3\u679c\uff1a <ENTREZ_DIRECT> <Db> nuccore </Db> <WebEnv> NCID_1_153624467_130.14.18.34_9001_1490828308_1411373464_0MetA0_S_MegaStore_F_1 </WebEnv> <QueryKey> 1 </QueryKey> <Count> 2093561 </Count> <Step> 1 </Step> </ENTREZ_DIRECT> esearch \u9700\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\u6709 -db \uff08\u6240\u8981\u641c\u7d22\u7684\u76ee\u6807\u6570\u636e\u5e93\uff09\u548c -query \uff08\u6240\u8981\u641c\u7d22\u7684\u5173\u952e\u8bcd\uff09\u3002 \u7ed3\u679c\u9ed8\u8ba4\u8fd4\u56de xml \u683c\u5f0f\u7684\u6570\u636e\uff08\u53c2\u89c1 <ENTREZ_DIRECT>...</ENTREZ_DIRECT> \uff09\uff0c\u5176\u4e2d \u4e2d\u7684\u6570\u503c\u8868\u793a\u68c0\u7d22\u547d\u4e2d\u7684\u8bb0\u5f55\u6570\uff0c\u8fd9\u4e0e NCBI \u7684 Entrez \u7f51\u9875\u754c\u9762\u91cc\u8fdb\u884c\u68c0\u7d22\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 esearch \u8fd8\u6709\u4e00\u4e2a\u53c2\u6570 -sort \u53ef\u4ee5\u6839\u636e\u6570\u636e\u5e93\u7c7b\u578b\u8fd4\u56de\u4e0d\u540c\u7684\u6392\u5e8f\u65b9\u5f0f\u3002\u9ed8\u8ba4\u7684\u6392\u5e8f\u65b9\u5f0f\u662f\u6309\u7167\u65f6\u95f4\u9006\u5e8f\u6392\u5217\u7684\u3002\u60f3\u8981\u5f97\u5230\u51c6\u786e\u7684\u67e5\u8be2\u7ed3\u679c\uff0c\u4f18\u5316 query \u5f88\u91cd\uff0c\u53ef\u4ee5\u53c2\u89c1 Filter \u76f8\u5173\u5185\u5bb9\u3002 2.2 efetch \u00b6 efetch \u53ef\u4ee5\u7528\u6765\u4e0b\u8f7d\u5404\u4e2a\u6570\u636e\u5e93\u7684\u5404\u79cd\u683c\u5f0f\u6570\u636e\u3002\u4f60\u53ef\u4ee5\u901a\u8fc72\u79cd\u65b9\u5f0f\u4e0b\u8f7d\uff1a \u7528 esearch \u83b7\u5f97\u547d\u4e2d\u8bb0\u5f55\u540e\u518d\u4e0b\u8f7d\u3002\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\uff0c\u5c31\u4f1a\u4e0b\u8f7d\u6240\u6709\u7ed3\u679c\u5e76\u4fdd\u5b58\u5230 result.fasta \u6587\u4ef6\u4e2d\u3002 $ esearch -db nuccore -query \"salmonella\" -days 10 | \\ > efetch -format fasta -db nuccore > result.fasta Warning \u4e00\u5b9a\u8981\u6ce8\u610f\u641c\u7d22\u547d\u4e2d\u503c\u7684\u6570\u91cf\uff0c\u5173\u952e\u8bcd\u547d\u4e2d\u592a\u591a\uff0c\u6570\u636e\u91cf\u4f1a\u592a\u5927\uff0c\u5168\u90e8\u4e0b\u8f7d\u53ef\u80fd\u76f4\u63a5\u8fdb\u5165\u5047\u6b7b\u72b6\u6001\u3002\u5e94\u8be5\u901a\u8fc7\u8bbe\u7f6e\u53c2\u6570\u6765\u9650\u5b9a\u641c\u7d22\u7ed3\u679c\u3002\u5f53\u4e0d\u786e\u5b9a\u65f6\uff0c\u5148\u7528esearch\u5de5\u5177\u770b\u8fd4\u56de\u7684\u547d\u4e2d\u503c \u6709\u591a\u5c11\u518d\u51b3\u5b9a\u662f\u5426\u8fdb\u4e00\u6b65\u9650\u5b9a\u3002 \u76f4\u63a5\u6307\u5b9a id \u4e0b\u8f7d $ efetch -db pubmed -id 2142131 -format txt efetch \u8bbe\u7f6e\u7684\u53c2\u6570\u662f -db \uff0c\u5c06\u641c\u7d22\u547d\u4e2d\u7684\u8bb0\u5f55\u4ece\u8be5\u6570\u636e\u5e93\u8fdb\u884c\u3002\u5982\u679c esearch \u68c0\u7d22\u7684\u7ed3\u679c\u548c\u9700\u8981\u4e0b\u8f7d\u7684\u7ed3\u679c\u6765\u81ea\u540c\u4e00\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u4e0d\u6dfb\u52a0 -db \u53c2\u6570\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u4f7f\u7528esearch\u7684\u6570\u636e\u5e93\u3002 efetch \u8fd8\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\u662f -format \uff0c\u5373\u4e0b\u8f7d\u6570\u636e\u7684\u683c\u5f0f\u3002\u5e38\u7528\u7684\u6709 xml \u683c\u5f0f\uff0c\u540e\u7eed\u53ef\u4ee5\u901a\u8fc7 xtract \u548c linux \u4e00\u4e9b\u547d\u4ee4\u884c\u5de5\u5177\u6765\u505a\u5904\u7406\u3002\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0 -id \u53c2\u6570\u76f4\u63a5\u8fdb\u884c\u4e0b\u8f7d\u800c\u4e0d\u901a\u8fc7 esearch \u68c0\u7d22\u540e\u4e0b\u8f7d\u3002\u5982\u4e0b\u9762\u4f8b\u5b50\u4e2d\u5c06 pubmed id 2137412 \u7684\u6587\u732e\u8f93\u51fa\uff0c\u683c\u5f0f\u4e3a Medline 3 # \u641c\u7d22 pubmed \u6570\u636e\u5e93\u7f16\u53f7 2137412 \u7684\u6587\u732e\uff0c\u4ee5 medline \u683c\u5f0f\u8f93\u51fa $ efetch -db pubmed -id 2137412 -format medline \u5bf9\u4e8e efetch \u53ef\u4ee5\u4e0b\u8f7d\u90a3\u4e9b\u6570\u636e\u5e93\uff0c\u5bf9\u4e8e\u5404\u4e2a\u6570\u636e\u5e93\u540d\u79f0\u548c\u6570\u636e\u683c\u5f0f\uff0c\u53ef\u4ee5\u7528 -h \u6765\u67e5\u770b $ efetch -h 2.3 xtract \u00b6 edirect \u7684\u6838\u5fc3\u547d\u4ee4\uff0c\u7531\u4e8e esearch \u67e5\u8be2\u548c\u4e0b\u8f7d\u7684\u6570\u636e\u5e38\u5e38\u662f xml \u683c\u5f0f\u7684\uff0c\u5bf9\u4e8e XML 4 \u683c\u5f0f\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u7528 xtract \u5de5\u5177\u5c06\u5176\u8f6c\u6362\u6210\u7eaf\u6587\u672c\u683c\u5f0f\u7684\u5185\u5bb9\u3002xtract \u4e0d\u4ec5\u53ef\u4ee5\u8f6c\u6362 NCBI \u7684 XML \u683c\u5f0f\u6587\u4ef6\uff0c\u5bf9\u4e8e\u4efb\u4f55\u901a\u7528\u7684 XML \u683c\u5f0f\u6587\u4ef6\u90fd\u53ef\u4ee5\u8fdb\u884c\u8f6c\u6362\u3002 xtract \u57fa\u672c\u7528\u6cd5\uff1a # \u8bfb\u53d6 XML \u6587\u4ef6\u65b9\u5f0f $ xtract -input XML-file.xml \u4e00\u822c\u6211\u4eec\u90fd\u662f\u901a\u8fc7\u7ba1\u9053\u5de5\u5177 Pipeline \u7ec4\u5408 esearch \u548c efetch \u7b49\u5de5\u5177\u83b7\u5f97 XML \u683c\u5f0f\u7684 NCBI \u6570\u636e\u5e93\u547d\u4e2d\u8bb0\u5f55\u540e\uff0c\u518d\u7528 xtract \u8fdb\u884c\u5904\u7406\u3002 $ esearch -db pubmed -query 'E. coli AND (2016/12/30[pdat]:2016/12/31[pdat])' | \\ > efetch -format xml | xtract -pattern PubmedArticle -element \\ > MedlineCitation/PMID Journal/ISOAbbreviation ArticleTitle \u8fd9\u6761\u547d\u4ee4\u5c06\u68c0\u7d22\u5230\u7684\u6587\u732e\u8bb0\u5f55\u8f6c\u6362\u6210\u884c\uff0c\u518d\u4ee5 PMID\uff0c\u6742\u5fd7\u540d\u7f29\u5199\u548c\u6587\u7ae0\u9898\u76ee\u4e3a\u5217\u5c55\u5f00\u3002\u547d\u4ee4\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff1a 28239441J Public Health AfrQuality and labeling information of Mo ringa oleifera products marketed for HIV-infected people in Zimbabwe. 28115890Korean J Food Sci Anim ResourAntimicrobial Activity of Kefir against Variou s Food Pathogens and Spoilage Bacteria. 28110668Enzyme Microb. Technol .A novel thermophilic and halophilic esterase from Janibacter sp. R02, the first member of a new lipase family (Family XVII). ... 27030192J. Vet. Sci.Development and evaluation of an immunochromatographic assay using a gp51 monoclonal antibody for the detection of antibodies against the bovine leukemia virus. \u5f53\u6211\u4eec\u4e0d\u6e05\u695aXML\u5143\u7d20\u7ed3\u6784\u65f6\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u547d\u4ee4\u6253\u5370\u51fa\u6811\u5f62\u7ed3\u6784\u3002 $ xtract -input my.xml -outline xtract \u53ef\u4ee5\u7075\u6d3b\u7684\u6539\u53d8\u6570\u636e\u7684\u683c\u5f0f\uff0c\u6240\u4ee5\u6d89\u53ca\u7684\u53c2\u6570\u4e5f\u6bd4\u8f83\u591a\u3002\u8981\u60f3\u83b7\u5f97\u81ea\u5df1\u9700\u8981\u7684\u6570\u636e\u683c\u5f0f\uff0c\u8981\u60f3\u7528\u597d edirect\uff0c\u638c\u63e1\u597d xtract \u7684\u7528\u6cd5\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002 -pattern \u53c2\u6570 : \u5c06 xml \u683c\u5f0f\u6570\u636e\uff0c\u5c06 \u8f6c\u6362\u6210\u884c\u683c\u5f0f\u6570\u636e\u3002\u6bcf\u4e00\u4e2aelement\u5305\u542b\u7684\u6570\u636e\u505a\u4e3a\u4e00\u884c\u3002 xtract \u547d\u4ee4\u9996\u5148\u8981\u901a\u8fc7 -pattern \u5b9a\u4e49\u6240\u8981\u5206\u6790\u7684\u6570\u636e\u7ea7\u522b\u3002\u6bd4\u5982\u5bf9\u4e8e pubmed \u6570\u636e\u5e93\uff0cefetch \u8f93\u51fa -format \u683c\u5f0f\u4e3a docsum\uff0c\u90a3\u4e48\u6211\u4eec\u4e00\u822c\u8981\u6293\u53d6\u7684\u662f\u6bcf\u4e00\u4e2a\u547d\u4e2d\u7684\u6587\u732e\u8bb0\u5f55\uff0c-pattern \u5c31\u53ef\u4ee5\u7528 DocumentSummary \u5143\u7d20\u3002\u5982\u679c\u4f60\u53ea\u60f3\u77e5\u9053\u6240\u6709\u547d\u4e2d\u6587\u732e\u7684\u4f5c\u8005\uff08\u6bd4\u5982\u6309\u7167\u6b21\u6570\u6392\u5e8f\uff09\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u76f4\u63a5\u5c06 -pattern \u5b9a\u4e49\u4e3a Author\u3002 -element \u53c2\u6570 : \u5c06 -pattern \u5b9a\u4e49\u7684\u884c\u4e2d\u4ee5\u6bcf\u4e2aelement\u5f62\u6210\u4e00\u5217\u3002\u6bcf\u4e2aelement\u4ee5tab\u952e\u5206\u9694\u3002 \u6bcf\u4e2a -pattern \u5b9a\u4e49\u540e\uff0c\u8981\u591a -pattern \u5b9a\u4e49\u7684\u5143\u7d20\u7684\u5b50\u5143\u7d20\u8fdb\u884c\u8f93\u51fa\uff0c\u5c31\u8981\u7528\u5230 -element \u53c2\u6570\u4e86\u3002-element \u53ef\u4ee5\u8ddf\u591a\u4e2a\u5b50\u5143\u7d20\uff0c\u9ed8\u8ba4\u4ee5tab\u952e\u5206\u5272\u3002\u4f46\u662f\u8981\u6ce8\u610f\u7684\u662f\u5b50\u5143\u7d20\u5fc5\u987b\u662f\u552f\u4e00\u5b50\u5143\u7d20\uff0c\u6bd4\u5982 -pattern \u5982\u679c\u5b9a\u4e49\u4e3a DocumentSummary\uff0c\u90a3\u4e48\u6bcf\u4e2a DocumentSummary \u5143\u7d20\u6709\u4e00\u4e2a Authors \u5b50\u5143\u7d20\uff0c\u800c\u6bcf\u4e2a Authors \u6709\u591a\u4e2a Author \u5b50\u5143\u7d20\uff08\u56e0\u4e3a\u4e00\u7bc7\u6587\u732e\u6709\u591a\u4e2a\u4f5c\u8005\uff09\uff0c\u5982\u679c\u76f4\u63a5\u5c06 -element Author\uff0c\u662f\u65e0\u6cd5\u8fd4\u56de\u4f5c\u8005\u4fe1\u606f\u7684\u3002\u9700\u8981\u7528 -block \u53c2\u6570\u628a Authors \u5217\u8f6c\u6362\u6210\u884c\u518d\u8fdb\u884c\u5206\u5272\u3002 -block \u53c2\u6570 : \u53ef\u4ee5\u5c06\u67d0\u4e2aXML\u6807\u7b7e\u4e0b\u7684\u591a\u4e2a\u76f8\u540c\u6807\u7b7e\u8f6c\u6362\u6210\u4e00\u884c\u7684\u591a\u4e2a\u5143\u7d20\uff0c\u6700\u5e38\u89c1\u7684\u7528\u6cd5\u662f\u5728 pubmed \u6570\u636e\u5e93\u68c0\u7d22\u6587\u732e\u65f6 \u4e0b\u591a\u4e2a \u6807\u7b7e\u6253\u5370\u51fa\u6765\u3002 $ esearch -db pubmed -query \"Salmonella[ORGN]\" -days 5 | efetch -format xml | \\ > xtract -pattern PubmedArticle -block Author -sep \" \" -element LastName,Initials -tab\u3001-sep \u53c2\u6570 : \u5c06\u591a\u6761 element \u8bb0\u5f55\u5206\u5272\u3002 / : \u4e3b\u8981\u7528\u5728\u5b9a\u4e49\u8fde\u7eed\u591a\u5c42\u6807\u7b7e\u7684\u5b9a\u4e49\u4e0a\u3002\u6bd4\u5982PMID\u6807\u7b7e\u5373\u53ef\u4ee5\u5728 MedlineCitation \u6807\u7b7e\u4e0b\uff0c\u6709\u65f6\u4e5f\u4f1a\u5728 RefSource \u6807\u7b7e\u4e0b\u3002\u6240\u4ee5\u8981\u660e\u786e\u68c0\u7d22\u6587\u732e\u7684 PMID\uff0c\u5c31\u5e94\u8be5\u7528 MedlineCitation/PMID @ : \u6307\u5b9a XML \u5143\u7d20 element \u7684 attribute \u503c -if\u3001-if/-equals\u3001-if/-contains \u53c2\u6570 : \u6761\u4ef6\u8fd0\u7b97\u7b26 -and\u3001-or\u3001-position\u3001-def \u53c2\u6570 : \u5173\u7cfb\u8fd0\u7b97\u7b26 2.4 elink \u00b6 \u5f53\u6211\u4eec\u8981\u68c0\u7d22\u4e00\u4e2a\u6570\u636e\u5e93\u6570\u636e\u6240\u5173\u8054\u5230\u5176\u4ed6\u6570\u636e\u5e93\u65f6\uff0c\u5c31\u8981\u7528\u5230elink\u5de5\u5177\u4e86\u3002\u6bd4\u5982\u6211\u4eec\u5148\u5728SRA\u6570\u636e\u5e93\u4e2d\u641c\u7d22\u5230\u6240\u6709\u9f20\u4f24\u5bd2\u6c99\u95e8\u83cc\u7684SRA\u5b9e\u9a8c\u6570\u636e\uff0c\u7136\u540e\u94fe\u63a5\u5230biosample\u6570\u636e\u5e93\uff0c\u83b7\u5f97\u8fd9\u4e9b\u83cc\u682a\u7684\u751f\u7269\u6837\u672c\u4fe1\u606f\u3002 $ esearch -db sra -query \"salmonella typhimurium\" | elink -target biosample | efetch -format docsum > result.xml 2.4 einfo \u00b6 \u5bf9\u4e8e NCBI \u6570\u636e\u5e93\u7684\u5404\u9879\u590d\u6742\u53c2\u6570\uff0c\u5b57\u6bb5\u7b49\u8981\u5b8c\u5168\u4e86\u89e3\u548c\u638c\u63e1\u6bd4\u8f83\u56f0\u96be\u3002edirect \u91cc\u63d0\u4f9b\u4e86 einfo \u5de5\u5177\uff0c\u8fd9\u6837\u5176\u4ed6\u5de5\u5177\u6240\u80fd\u8bbf\u95ee\u7684\u5177\u4f53\u6570\u636e\u5e93\u3001\u5b57\u6bb5\u548c\u53ef\u94fe\u63a5\u6570\u636e\u5e93\u7b49\u4fe1\u606f\u90fd\u53ef\u4ee5\u7528 einfo \u4e86\u89e3\u3002 # \u67e5\u8be2 `esearch -db` \u53c2\u6570\u6240\u80fd\u8bbf\u95ee\u7684\u6240\u6709\u6570\u636e\u5e93\u540d\u79f0 $ einfo -dbs | sort # \u67e5\u8be2\u67d0\u4e2a\u6570\u636e\u5e93\u5b57\u6bb5\u60c5\u51b5\uff0c\u5982 sra \u6570\u636e\u5e93\u6240\u6709\u5bf9\u5e94\u7684\u5b57\u6bb5\u540d\u79f0 $ einfo -db sra -fields # \u67e5\u8be2\u6570\u636e\u5e93\u6240\u6709\u53ef\u94fe\u63a5\u7684\u5176\u4ed6\u6570\u636e\u5e93 $ einfo -db sra -links 3. \u9ad8\u7ea7\u68c0\u7d22 \u00b6 \u5de5\u5177 esearch \u548c efilter \u5728\u505a\u68c0\u7d22\u65f6\u5982\u679c\u505a\u597d\u7b5b\u9009\uff0c\u80fd\u6709\u52a9\u4e8e\u83b7\u5f97\u51c6\u786e\u7684\u7ed3\u679c\u3002\u7b5b\u9009\u67092\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u901a\u8fc7\u6dfb\u52a0\u53c2\u6570\u6765\u7b5b\u9009\u3002\u53e6\u4e00\u79cd\u662f\u5bf9 query \u53c2\u6570\u6dfb\u52a0\u5b57\u6bb5\u5b9a\u4e49\u6765\u7b5b\u9009\u3002 \u53c2\u6570\u8fc7\u6ee4 \uff1a \u5e38\u7528\u7684\u53c2\u6570\u4e3a\u65e5\u671f\u53c2\u6570 -days 100\uff1a100\u5929\u5185\u7684\u68c0\u7d22\u6761\u4ef6\u547d\u4e2d -maxdate\uff1a\u65f6\u95f4\u6bb5\u6700\u5927\u65e5\u671f\uff0c\u683c\u5f0f\u53ef\u4ee5\u662f 2001\uff0c2001/01/01 -mindate\uff1a\u65f6\u95f4\u6bb5\u6700\u5c0f\u65e5\u671f\uff0c\u683c\u5f0f\u53ef\u4ee5\u662f 2001\uff0c2001/01/01 -datetype: PDAT \u53d1\u5e03\u65f6\u95f4\uff1bMDAT \u4fee\u6539\u65f6\u95f4 \u5b57\u6bb5\u5b9a\u4e49 \uff1a -query\u53c2\u6570: esearch \u548c efilter \u901a\u8fc7\u6dfb\u52a0\u8be5\u53c2\u6570\u8fdb\u884c\u68c0\u7d22\u6216\u8fc7\u6ee4\u76f8\u5e94\u7684\u5173\u952e\u8bcd\uff0cquery\u53c2\u6570\u53ef\u4ee5\u6dfb\u52a0 filter\uff0c\u4e0d\u540c\u6570\u636e\u5e93\u53ef\u9009\u62e9\u7684filter\u53ef\u4ee5\u7528\u4e0b\u9762\u547d\u4ee4\u6765\u67e5\u770b\u3002 # \u67e5\u770bsra\u6570\u636e\u5e93\u7684filter $ einfo -db sra -fields # \u67e5\u770bsra\u6570\u636e\u5e93field\uff0c\u7528xtract\u683c\u5f0f\u5316\u8f93\u51fa $ einfo -db sra | xtract -pattern Field -element Name Description -query \u68c0\u7d22\u8bcd\u53ef\u4ee5\u7528\u903b\u8f91\u5173\u952e\u8bcd\u6784\u5efa\u903b\u8f91\u5173\u7cfb\uff1a AND\uff1a\u548c OR\uff1a\u6216 NOT\uff1a\u975e ()\uff1a\u5171\u540c\u5b9a\u4e49 -query \u68c0\u7d22\u8bcd\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a \"*\"\u661f\u53f7\u8868\u793a\u4efb\u610f\u4e2a\u5339\u914d\u7684\u5b57\u7b26 -query \u5b57\u7b26\u4e32\u5b9a\u4e49 \u5efa\u8bae\u7528 '...' \u5b9a\u4e49 -query \u503c\uff0c\u91cc\u9762\u7684\u5404\u4e2a\u5173\u952e\u8bcd\u7528 AND/OR \u7b49\u5efa\u7acb\u903b\u8f91\u5173\u7cfb\u3002\u5173\u952e\u8bcd\u7ec4\u6dfb\u52a0 filter \u65f6\u7528 \"...\" \u5b9a\u4e49\u3002\u5982\uff1a -query '\"salmonella paratyphi A\"[ORGN] AND latest[filter] AND \"complete genome[filter]\"' 4. \u5177\u4f53\u793a\u4f8b \u00b6 \u4e0b\u9762\u6211\u4eec\u5c31\u7528\u51e0\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u5c1d\u8bd5 edirect \u7684\u529f\u80fd\u3002\u7ed3\u5408 Linux \u5176\u4ed6\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u6781\u5927\u7684\u63d0\u5347\u6211\u4eec\u5728\u547d\u4ee4\u884c\u754c\u9762\u4e0b\u68c0\u7d22\u548c\u6293\u53d6 NCBI \u6570\u636e\u5e93\u7684\u6548\u7387\u3002 \u67e5\u770b2014~2016\u5e74\u53d1\u8868\u7684\u970d\u4e71\u5f27\u83ccCTX\u76f8\u5173\u6587\u732e\u7684\u6458\u8981 \u7528\u5173\u952e\u8bcd vibrio cholerae CTX \u68c0\u7d22 pubmed \u6570\u636e\u5e93\uff0c\u5c06\u641c\u7d22\u5230\u7684\u6587\u732e\u7684\u6458\u8981\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\uff0c\u65b9\u4fbf\u67e5\u770b\u3002\u7531\u4e8e\u662f\u6587\u672c\u683c\u5f0f\u7684\u5185\u5bb9\uff0c\u65b9\u4fbf\u540e\u671f\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u6bd4\u5982\u63d0\u53d6\u5355\u8bcd\u8fdb\u884c\u8bcd\u9891\u8ba1\u7b97\uff0c\u7528\u7ffb\u8bd1API\u5c06\u6458\u8981\u8fdb\u884c\u81ea\u52a8\u7ffb\u8bd1\u7b49\u7b49\u3002 # \u793a\u4f8b\u4e3a\u4e86\u51cf\u5c11\u547d\u4e2d\u6570\u636e\uff0c\u8bbe\u7f6e\u4e86\u53d1\u5e03\u65e5\u671f\u7684 -mindate \u548c maxdata $ esearch -db pubmed -mindate 2014 -maxdate 2016 -datetype PDAT \\ > -query \"vibrio cholerae CTX\" | efetch -format abstract > abstract.txt # \u65e5\u671f\u8bbe\u7f6e\u7684\u53e6\u4e00\u79cd\u5199\u6cd5 $ esearch -db pubmed -query \"vibrio cholerae CTX AND \\ > (2014[pdat]:2016[pdat])\" | efetch -format abstract > abstract.txt \u67e5\u770b\u6587\u7ae0\u4f5c\u8005 \u5e38\u5e38\u4f1a\u5bf9\u67d0\u4e00\u7c7b\u6587\u7ae0\uff0c\u6216\u8005\u67d0\u4e00\u4e2a\u671f\u520a\u7684\u6587\u7ae0\u4f5c\u8005\u8fdb\u884c\u5173\u6ce8\uff0c\u8fd9\u91cc\u6839\u636e\u68c0\u7d22\u5173\u952e\u8bcd\uff0c\u683c\u5f0f\u5316\u8f93\u51fa\u6587\u7ae0\u7684ID\u548c\u4f5c\u8005\u5217\u8868\u3002\u8fd9\u4e5f\u662f xtract \u6700\u5e38\u89c1\u7684\u5e94\u7528\u4e4b\u4e00\u3002 # \u68c0\u7d22\u5173\u952e\u8bcd\uff0c\u4ee5\u6700\u8fd1300\u5929\u4e3a\u8303\u56f4 $ esearch -db pubmed -query \"listeria monocytogenes AND prfA\" -days 300 | \\ > efetch -format xml | xtract -pattern PubmedArticle \\ > -element MedlineCitation/PMID -block Author -sep \" \" \\ > -element LastName,Initials \u67e5\u770b\u8fd1300\u5929\u4ee5\u6765\u53d1\u8868\u7684\u6587\u7ae0\u4e2d\uff0c\u4f5c\u8005\u4e2d\u6709\u53ebJim\u7684\u6240\u6709\u6587\u7ae0\u9898\u76ee \u5229\u7528 pubmed \u6570\u636e\u5e93\u7684 filter [FULL], \u67e5\u8be2\u6240\u6709\u4f5c\u8005\u5217\u8868\u91cc\u6709\u53ebJim\u7684\u6587\u7ae0\u6807\u9898\uff0c\u8fd9\u91cc\u91c7\u7528 medline \u683c\u5f0f\u8f93\u51fa\uff0c\u5982\u679c\u8981\u8fdb\u4e00\u6b65\u505a\u683c\u5f0f\u5316\u53ef\u4ee5\u7528xml\u683c\u5f0f\u518d\u7528xtract\u91cd\u65b0\u6392\u7248\u6253\u5370\u3002 $ esearch -db pubmed -days 300 -query \"Jim[FULL]\" | efetch -format medline | \\ > grep TI | awk -F '- ' '{print $2}' \u67e5\u770b2016\u5e74CDC\u53d1\u5e03\u7684\u6240\u6709\u7528miseq\u6d4b\u5e8f\u7684\u6c99\u95e8\u83cc\u6587\u5e93\u5236\u5907\u65b9\u6cd5 \u60f3\u8981\u4e86\u89e3 CDC \u5f00\u5c55\u7684 miseq \u6c99\u95e8\u83cc\u6d4b\u5e8f\u65f6\u91c7\u7528\u7684\u6587\u5e93\u6784\u5efa\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5229\u7528 sra \u6570\u636e\u5e93\u7684 runinfo\u4fe1\u606f\u8f93\u51fa\u83b7\u5f97\u3002 $ esearch -db sra -query \"salmonella[OGRN] miseq[PLAT] EDBL-CDC\" \\ > -mindate 2016 /01/01 -maxdate 2016 /12/31 -datetype PDAT | \\ > efetch -format runinfo | cut -d ',' -f 12 > library.txt \u7ed8\u5236\u5355\u589e\u674e\u65af\u7279\u83cchlyA\u86cb\u767d\u8d28\u8fdb\u5316\u6811\u56fe $ esearch -db protein -query \"listeriolysin hlyA NOT partial\" | > efetch -format fasta > hlyA.fasta $ mafft hlyA.fasta > hlyA.mafft.fasta $ raxml -m GTRGAMMA -p 12345 -s hlyA.mafft.fasta -f a -x 12345 -N 100 -T 40 -n hlyA \u5bf910\u5e74\u5185\u53d1\u8868\u7684\u68c0\u7d22\u6587\u732e\u7684\u4f5c\u8005\u6392\u5e8f $ esearch -db pubmed -days 3650 -datetype PDAT -query \"hlyA\" | \\ > efetch -format xml | \\ > xtract -pattern Author -element LastName | \\ > sort-uniq-count-rank \u67e5\u770b taxonomy taxonomy \u6570\u636e\u5e93\u7684 filter [NXLV] \u53ef\u4ee5\u76f4\u63a5\u8f93\u51faspecies\u7ea7\u522b # \u83b7\u5f97 taxonomy \u6570\u636e\u5e93\u91cc lis \u6216 sal \u5f00\u5934\u7684\u5206\u7c7b\u540d $ esearch -db taxonomy -query \"lis* OR sal*\" | efetch -db taxonomy -format txt # \u83b7\u5f97 species \u7ea7\u7684\u6240\u6709\u6c99\u95e8\u83cc $ esearch -db taxonomy -query \"Salmonella[NXLV]\" | efetch -db taxonomy -format txt \u4e0b\u8f7d\u6240\u6709\u7532\u578b\u526f\u4f24\u5bd2\u6c99\u95e8\u83cc\u57fa\u56e0\u7ec4\u5e8f\u5217 $ esearch -db nuccore -query \"Salmonella[porgn:__txid54388] complete genome\" | \\ > efetch -db nuccore -format fasta > SPA.fasta \u83b7\u53d6SRA\u6570\u636e\u5e93\u4e2d\u76ee\u7684\u6570\u636e\u7684\u6d4b\u5e8f\u6837\u672c\u5730\u7406\u4fe1\u606f $ esearch -db sra -query \"China\" -days 1 | elink -target biosample | \\ > efetch -format docsum | xtract -pattern DocumentSummary -element Accession \\ > -block Attribute -if Attribute@attribute_nam \\ > -equals lat_lon -element Attribute \u83b7\u5f97\u67d0\u4e2abioproject\u4e0b\u7684\u6240\u6709sra run\u7684\u4fe1\u606f $ eserach -db bioproject -query \"PRJNA209644\" | elink -target sra | \\ > efetch -format docsum | xtract -pattern DocumentSummary -ACC @acc \\ > -block DocumentSummary -element \"&ACC\" \u4e0b\u8f7dassembly\u6570\u636e\u5e93\u7684refseq\u5e8f\u5217 $ esearch -db assembly -query \"Salmonella enterica[ORGN] AND 2010[GRLS]\" | \\ > efetch -format docsum | xtract -pattern DocumentSummary \\ > -element FtpPath_RefSeq | awk -F \"/\" '{print $0\"/\"$NF\"_genomic.fna.gz\"}' | \\ > xargs wget \u67e5\u770bassembly meta\u4fe1\u606f NCBI \u7684 Assembly \u6570\u636e\u5e93\u5305\u542b\u4e86 RefSeq \u6570\u636e\u5e93\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u9009\u62e9\u76f8\u5e94\u7684\u7269\u79cd\u53ef\u4ee5\u83b7\u5f97\u8be5\u7269\u79cd\u7684\u57fa\u56e0\u7ec4\u62fc\u63a5\u5e8f\u5217\uff0c\u6709\u5b8c\u6210\u56fe\u4e5f\u6709\u975e\u5b8c\u6210\u56fe\u3002 $ esearch -db assembly -query '\"salmonella paratyphi A\"[ORGN] AND latest[FILT]' | \\ > efetch -format docsum | xtract -pattern Meta -block Stats \\ > -tab '\\n' -sep '\\t' -element Stat@category Stat | sort -ur > meta.txt import pandas as pd import seaborn as sns df = pd . read_table ( \"meta.txt\" ) sns . jointplot ( x = \"contig_count\" , y = \"scaffold_n50\" , data = df ) \u83b7\u53d6SRA\u83cc\u682a\u4fe1\u606f \u5bf9\u67d0\u4e2a\u7269\u79cd\u5f00\u5c55\u8fdb\u5316\u7814\u7a76\u65f6\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u7adf\u53ef\u80fd\u6536\u96c6\u516c\u5171\u6570\u636e\u5e93\u4e2d\u7684\u83cc\u682a\u80cc\u666f\u4fe1\u606f\u3002\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u641c\u7d22\u67d0\u4e2a bioproject\uff0c\u7136\u540e\u83b7\u5f97\u8be5\u7814\u7a76\u7684\u6240\u6709\u6d4b\u5e8f\u6570\u636e\u7684 sra \u80cc\u666f\u4fe1\u606f\u3002\u901a\u8fc7 \\<SAMPLE_ATTRIBUTE> \u5143\u7d20\u4e0b\u7684\u5404\u4e2a TAG \u548c VALUE \u6765\u63d0\u53d6\u6240\u9700\u4fe1\u606f\u3002 $ esearch -db bioproject -query 273159 | elink -target sra | \\ > efetch -format xml | xtract -pattern EXPERIMENT_PACKAGE -tab \",\" \\ > -element RUN@accession -block SAMPLE_ATTRIBUTE -tab \"\\t\" -sep \":\" \\ > -element TAG,VALUE > sample.txt $ head sample.txt \u8fd9\u6837\u8f93\u51fa\u7684\u95ee\u9898\u5728\u4e8e\u5404\u4e2a\u6d4b\u5e8f\u6570\u636e\u7684 SAMPLE_ATTRIBUTE \u7684 TAG \u987a\u5e8f\u662f\u4e71\u5e8f\u7684\uff0c\u6bcf\u4e2a SRR \u8f93\u51fa\u7684\u987a\u5e8f\u4e0d\u540c\u5bfc\u81f4\u5404\u4e2a\u5b57\u6bb5\u8981\u91cd\u65b0\u6392\u5e8f\uff0c\u6bd4\u8f83\u9ebb\u70e6\u3002\u5982\u679c\u6211\u4eec\u53ea\u9700\u8981\u5176\u4e2d\u4e00\u4e2a\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528 -if *** -eqauls *** \u6765\u8fc7\u6ee4\u3002\u6bd4\u5982\u4e0b\u9762\u4ee3\u7801\u6211\u4eec\u8f93\u51fa\u83cc\u682a\u540d\u79f0\uff1a $ esearch -db bioproject -query 273159 | elink -target sra | \\ > efetch -format xml | xtract -pattern EXPERIMENT_PACKAGE -tab \",\" \\ > -element RUN@accession -block SAMPLE_ATTRIBUTE -if TAG -equals \"strain\" \\ > -element VALUE | sort > strain-name.csv -if \u5728\u4e00\u884c\u8f93\u51fa\u4e2d\u4e0d\u80fd\u53cd\u590d\u4f7f\u7528\uff0c\u5982\u679c\u8981\u540c\u65f6\u5bf9\u591a\u4e2a\u6837\u54c1\u4fe1\u606f\u5b57\u6bb5\u5206\u522b\u8f93\u51fa\uff0c\u6211\u4eec\u91c7\u7528\u53d8\u901a\u7684\u65b9\u6cd5\uff0c\u5148\u628a xml \u6570\u636e\u4fdd\u5b58\u5230\u672c\u5730\uff0c\u7136\u540e\u5faa\u73af\u5206\u522b\u8f93\u51fa\u5404\u4e2a\u6240\u9700\u5185\u5bb9\uff0c\u7528 sort \u6392\u5e8f\uff0c\u518d\u7528 paste \u5408\u5e76\u3002 # \u5206\u522b\u8f93\u51fa csv \u683c\u5f0f\u7684\u6570\u636e $ for i in serovar strain isolate_name_alias collection_date isolation_source ; \\ > do xtract -input bioproject.xml -pattern EXPERIMENT_PACKAGE -tab \",\" \\ > -element RUN@accession -block SAMPLE_ATTRIBUTE -if TAG -equals $i -element \\ > VALUE | sort > $i ; done # \u5408\u5e76 csv $ paste -d , strain serovar isolate_name_alias collection_date > sample.csv Reference \u00b6 Entrez Direct: E-utilities on the UNIX Command Line \u21a9 Unix Pipeline Wikipedia \u21a9 Medline Element Description \u21a9 XML \u21a9","title":"03. Entrez \u5de5\u5177"},{"location":"book/C01_Common-Utility/03_entrez/#entrez","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Entrez"},{"location":"book/C01_Common-Utility/03_entrez/#entrez_1","text":"","title":"Entrez \u662f\u4ec0\u4e48"},{"location":"book/C01_Common-Utility/03_entrez/#entrez-direct","text":"\u5185\u5bb9\u7b80\u4ecb NCBI \u7684 Entrez \u5de5\u5177\u529f\u80fd\u975e\u5e38\u5f3a\u5927\uff0c\u65e2\u53ef\u4ee5\u4ece web \u9875\u9762\u8bbf\u95ee NCBI \u6765\u67e5\u8be2\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528 Entrez \u63d0\u4f9b\u7684 Web Services \u6765\u5b9e\u73b0\u8bf8\u591a\u529f\u80fd\uff08\u7f16\u5199\u7b2c\u4e09\u65b9\u7a0b\u5e8f\u7b49\uff09\u3002\u6b64\u5916 NCBI \u8fd8\u63d0\u4f9b\u4e86 Entrez \u7684\u547d\u4ee4\u884c\u5de5\u5177 edirect 1 \u3002edirect \u5168\u540d\u4e3a Entrez Direct \uff0c\u91cc\u9762\u5305\u542b\u4e86\u4e00\u7ec4\u5404\u53f8\u5176\u804c\u7684\u5de5\u5177\u548c\u811a\u672c\uff0c\u901a\u8fc7 Linux \u7cfb\u7edf\u4e0b\u7684\u7ba1\u9053pipeline 2 \u529f\u80fd\u8054\u5408\u4f7f\u7528\u8fd9\u4e9b\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u5b9e\u73b0\u9ad8\u6548\u7684\u8fdb\u884c Entrez \u7684\u68c0\u7d22\uff0c\u6293\u53d6\uff0c\u8fc7\u6ee4\uff0c\u6392\u5e8f\u7b49\u64cd\u4f5c\u3002","title":"\u73a9\u8f6c entrez-direct"},{"location":"book/C01_Common-Utility/03_entrez/#1","text":"","title":"1. \u5b89\u88c5"},{"location":"book/C01_Common-Utility/03_entrez/#11","text":"edirect \u76f4\u63a5\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\uff0c\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\u5373\u53ef\u3002 # \u4e0b\u8f7d edirect \u5b89\u88c5\u5305 $ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz # \u5c06 edirect \u5b89\u88c5\u5728\u7528\u6237 app \u76ee\u5f55\u4e0b\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u81ea\u884c\u9009\u62e9\u5b89\u88c5\u8def\u5f84 $ tar zxvf edirect.tar.gz -C ~/apps # \u8fd0\u884c\u5b89\u88c5\u811a\u672c $ cd ~/apps/edirect $ bash ./setup.sh # \u6dfb\u52a0\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55\u5230\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d $ echo \"export PATH='\\$PATH:\\$HOME/apps/edirect/'\" >> ~/.bashrc $ source ~/.bashrc \u5b89\u88c5\u8bf4\u660e \u8010\u5fc3\u7b49\u5f85\u4e00\u4f1a\uff0c\u5f53\u770b\u5230\u4e0b\u9762\u5b57\u7b26\u65f6\uff0c\u8868\u793a\u5b89\u88c5\u6210\u529f\u3002 ENTREZ DIRECT HAS BEEN SUCCESSFULLY INSTALLED AND CONFIGURED \u4e5f\u53ef\u4ee5\u4e0d\u8fd0\u884c setup.sh \u76f4\u63a5\u4f7f\u7528 edirect \u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u4e0d\u8fc7\u5982\u679c\u8981\u4f7f\u7528\u5168\u90e8\u529f\u80fd\uff0c\u6709\u4e9bperl\u6a21\u5757\u9700\u8981\u5b89\u88c5\uff0c\u8fd0\u884c setup.sh \u6765\u81ea\u52a8\u5b8c\u6210 CPAN \u7684 modual \u5b89\u88c5\u4ee5\u53ca go \u7248\u672c\u7684 xtract \u7684\u7f16\u8bd1\uff08\u4e0d\u8fd0\u884c\u5b89\u88c5\u811a\u672c\u4f1a\u8c03\u7528 perl \u7248\u672c\u7684 xtract\uff0c\u6570\u636e\u91cf\u5927\u65f6\u901f\u5ea6\u7565\u6162\uff09\u3002 \u63d0\u793a \u5bf9\u4e8e\u90e8\u5206\u64cd\u4f5c\u7cfb\u7edf\u5982 ubuntu \u7b49\uff0c uname \u4f4d\u4e8e /bin\uff0c\u800c xtract \u63a5\u53e3\u8c03\u7528\u811a\u672c\u4f7f\u7528 /usr/bin/uname \u6765\u5224\u65ad\u4f7f\u7528\u90a3\u4e2a\u7248\u672c\u7684 xtract\uff0c\u5982\u679c\u8981\u5728\u8fd9\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u6b63\u5e38\u4f7f\u7528 xtract\uff0c\u9700\u8981\u8ba9\u7a0b\u5e8f\u5728\u6b63\u786e\u8def\u5f84\u53ef\u8bc6\u522b\uff0c\u8fd9\u91cc\u901a\u8fc7\u6dfb\u52a0\u7cfb\u7edf link \u5230 /usr/bin/unname\u3002 # \u67e5\u770b uname \u8def\u5f84\u3002 $ which uname # \u5982\u679c\u662f\u4f4d\u4e8e /bin/ \u4e0b\uff0c\u5c06\u5176\u94fe\u63a5\u5230 /usr/bin/ \u4e0b\u5373\u53ef\u3002 $ sudo ln -s /bin/uname /usr/bin/uname","title":"1.1 \u4e0b\u8f7d\u5b89\u88c5"},{"location":"book/C01_Common-Utility/03_entrez/#12-conda","text":"\u5982\u679c\u7cfb\u7edf\u901a\u8fc7 conda \u8fdb\u884c\u8f6f\u4ef6\u7ba1\u7406\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5b89\u88c5\u3002 $ conda install entrez-direct \u4e0d\u8fc7 conda \u5b89\u88c5\u7684\u8fd8\u662f perl \u7248\u672c\u7684 xtract\uff0c\u800c\u4e0d\u662f go \u7248\u672c\u7684\uff0c\u9700\u8981\u5230 conda/pkgs \u5305\u6839\u76ee\u5f55\u4e2d\u7684 edirect \u76f8\u5e94\u76ee\u5f55\uff0c\u7528 setup.sh \u81ea\u884c\u7f16\u8bd1\u540e\u751f\u6210 xtract.Linux(Linux \u64cd\u4f5c\u7cfb\u7edf)\uff0c\u5c06\u5176\u590d\u5236\u5230 conda \u7684 bin \u8def\u5f84\u5373\u53ef\u3002go \u7248\u672c\u7684 xtract \u53ef\u4ee5\u7528 -help \u53c2\u6570\u67e5\u770b\u5e2e\u52a9\u3002","title":"1.2 conda \u4e2d\u5b89\u88c5"},{"location":"book/C01_Common-Utility/03_entrez/#2","text":"\u8868. \u6700\u5e38\u7528\u7684\u5de5\u5177\u53c2\u89c1\u4e0b\u8868 \u5de5\u5177\u540d\u79f0 \u5de5\u5177\u7528\u9014 \u5e38\u7528\u53c2\u6570 esearch \u641c\u7d22\u547d\u4ee4\uff0c\u5c06\u6240\u8981\u68c0\u7d22\u7684\u5185\u5bb9\u63d0\u4ea4\u5230 Entrez \u4e2d\uff0c\u8fd4\u56de\u76f8\u5e94\u7684\u7ed3\u679c\u8bb0\u5f55 -db\u3001-query efetch \u4e0b\u8f7d NCBI \u6570\u636e\u5e93\u4e2d\u7684\u8bb0\u5f55\u548c\u62a5\u544a\u5e76\u4ee5\u76f8\u5e94\u683c\u5f0f\u6253\u5370\u8f93\u51fa -db\u3001-id\u3001-format\u3001-mode einfo \u83b7\u53d6\u76ee\u6807\u7ed3\u679c\u5728\u6570\u636e\u5e93\u4e2d\u7684\u4fe1\u606f -db\u3001-dbs\u3001-fields\u3001-links elink \u5bf9\u76ee\u6807\u7ed3\u679c\u5728\u5176\u4ed6\u6570\u636e\u5e93\u4e2d\u6bd4\u914d\u7ed3\u679c -db\u3001-id\u3001-related\u3001-target\u3001-name epost \u4e0a\u4f20 UIDs \u6216\u8005 \u5e8f\u5217\u767b\u8bb0\u53f7 -db\u3001-id\u3001-format\u3001-input\u3001-label efilter \u5bf9\u4e4b\u524d\u7684\u68c0\u7d22\u7ed3\u679c\u8fdb\u884c\u8fc7\u6ee4\u6216\u9650\u5236 -query\u3001-sort\u3001-field xtract \u5c06esearch\u83b7\u5f97\u7684 XML \u683c\u5f0f\u7ed3\u679c\u8f6c\u6362\u6210\u8868\u683c\u683c\u5f0f -pattern\u3001-if\u3001-block\u3001-element\u3001-sep\u3001-filter esummary \u83b7\u5f97 XML \u683c\u5f0f\u7684\u5efa\u7acb -db\u3001-id\u3001-format\u3001-mode ecitmatch \u7edf\u8ba1\u5f15\u7528\u6570\u636e -journal\u3001-year\u3001-volume\u3001-page\u3001-author","title":"2. \u57fa\u672c\u7528\u6cd5"},{"location":"book/C01_Common-Utility/03_entrez/#21-esearch","text":"esearch \u8d1f\u8d23\u68c0\u7d22\u5e76\u8fd4\u56de xml \u683c\u5f0f\u7684\u547d\u4e2d\u60c5\u51b5\u3002\u4f7f\u7528 esearch \u547d\u4ee4\uff0c\u76f8\u5f53\u4e8e\u5e73\u65f6\u4f60\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee NCBI\uff0c\u5728 GQuery \u7684 nucletide \u6570\u636e\u5e93\u641c\u7d22\u89c1\u9762\u641c\u7d20\u5173\u952e\u5b57 salmonella \uff0c\u8fd4\u56de\u547d\u4e2d\u7ed3\u679c\u3002 $ esearch -db nuccore -query \"salmonella\" \u7ec8\u7aef\u91cc\u4f1a\u8fd4\u56de\u547d\u4e2d\u7ed3\u679c\uff1a <ENTREZ_DIRECT> <Db> nuccore </Db> <WebEnv> NCID_1_153624467_130.14.18.34_9001_1490828308_1411373464_0MetA0_S_MegaStore_F_1 </WebEnv> <QueryKey> 1 </QueryKey> <Count> 2093561 </Count> <Step> 1 </Step> </ENTREZ_DIRECT> esearch \u9700\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\u6709 -db \uff08\u6240\u8981\u641c\u7d22\u7684\u76ee\u6807\u6570\u636e\u5e93\uff09\u548c -query \uff08\u6240\u8981\u641c\u7d22\u7684\u5173\u952e\u8bcd\uff09\u3002 \u7ed3\u679c\u9ed8\u8ba4\u8fd4\u56de xml \u683c\u5f0f\u7684\u6570\u636e\uff08\u53c2\u89c1 <ENTREZ_DIRECT>...</ENTREZ_DIRECT> \uff09\uff0c\u5176\u4e2d \u4e2d\u7684\u6570\u503c\u8868\u793a\u68c0\u7d22\u547d\u4e2d\u7684\u8bb0\u5f55\u6570\uff0c\u8fd9\u4e0e NCBI \u7684 Entrez \u7f51\u9875\u754c\u9762\u91cc\u8fdb\u884c\u68c0\u7d22\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 esearch \u8fd8\u6709\u4e00\u4e2a\u53c2\u6570 -sort \u53ef\u4ee5\u6839\u636e\u6570\u636e\u5e93\u7c7b\u578b\u8fd4\u56de\u4e0d\u540c\u7684\u6392\u5e8f\u65b9\u5f0f\u3002\u9ed8\u8ba4\u7684\u6392\u5e8f\u65b9\u5f0f\u662f\u6309\u7167\u65f6\u95f4\u9006\u5e8f\u6392\u5217\u7684\u3002\u60f3\u8981\u5f97\u5230\u51c6\u786e\u7684\u67e5\u8be2\u7ed3\u679c\uff0c\u4f18\u5316 query \u5f88\u91cd\uff0c\u53ef\u4ee5\u53c2\u89c1 Filter \u76f8\u5173\u5185\u5bb9\u3002","title":"2.1 esearch"},{"location":"book/C01_Common-Utility/03_entrez/#22-efetch","text":"efetch \u53ef\u4ee5\u7528\u6765\u4e0b\u8f7d\u5404\u4e2a\u6570\u636e\u5e93\u7684\u5404\u79cd\u683c\u5f0f\u6570\u636e\u3002\u4f60\u53ef\u4ee5\u901a\u8fc72\u79cd\u65b9\u5f0f\u4e0b\u8f7d\uff1a \u7528 esearch \u83b7\u5f97\u547d\u4e2d\u8bb0\u5f55\u540e\u518d\u4e0b\u8f7d\u3002\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\uff0c\u5c31\u4f1a\u4e0b\u8f7d\u6240\u6709\u7ed3\u679c\u5e76\u4fdd\u5b58\u5230 result.fasta \u6587\u4ef6\u4e2d\u3002 $ esearch -db nuccore -query \"salmonella\" -days 10 | \\ > efetch -format fasta -db nuccore > result.fasta Warning \u4e00\u5b9a\u8981\u6ce8\u610f\u641c\u7d22\u547d\u4e2d\u503c\u7684\u6570\u91cf\uff0c\u5173\u952e\u8bcd\u547d\u4e2d\u592a\u591a\uff0c\u6570\u636e\u91cf\u4f1a\u592a\u5927\uff0c\u5168\u90e8\u4e0b\u8f7d\u53ef\u80fd\u76f4\u63a5\u8fdb\u5165\u5047\u6b7b\u72b6\u6001\u3002\u5e94\u8be5\u901a\u8fc7\u8bbe\u7f6e\u53c2\u6570\u6765\u9650\u5b9a\u641c\u7d22\u7ed3\u679c\u3002\u5f53\u4e0d\u786e\u5b9a\u65f6\uff0c\u5148\u7528esearch\u5de5\u5177\u770b\u8fd4\u56de\u7684\u547d\u4e2d\u503c \u6709\u591a\u5c11\u518d\u51b3\u5b9a\u662f\u5426\u8fdb\u4e00\u6b65\u9650\u5b9a\u3002 \u76f4\u63a5\u6307\u5b9a id \u4e0b\u8f7d $ efetch -db pubmed -id 2142131 -format txt efetch \u8bbe\u7f6e\u7684\u53c2\u6570\u662f -db \uff0c\u5c06\u641c\u7d22\u547d\u4e2d\u7684\u8bb0\u5f55\u4ece\u8be5\u6570\u636e\u5e93\u8fdb\u884c\u3002\u5982\u679c esearch \u68c0\u7d22\u7684\u7ed3\u679c\u548c\u9700\u8981\u4e0b\u8f7d\u7684\u7ed3\u679c\u6765\u81ea\u540c\u4e00\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u4e0d\u6dfb\u52a0 -db \u53c2\u6570\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u4f7f\u7528esearch\u7684\u6570\u636e\u5e93\u3002 efetch \u8fd8\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\u662f -format \uff0c\u5373\u4e0b\u8f7d\u6570\u636e\u7684\u683c\u5f0f\u3002\u5e38\u7528\u7684\u6709 xml \u683c\u5f0f\uff0c\u540e\u7eed\u53ef\u4ee5\u901a\u8fc7 xtract \u548c linux \u4e00\u4e9b\u547d\u4ee4\u884c\u5de5\u5177\u6765\u505a\u5904\u7406\u3002\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0 -id \u53c2\u6570\u76f4\u63a5\u8fdb\u884c\u4e0b\u8f7d\u800c\u4e0d\u901a\u8fc7 esearch \u68c0\u7d22\u540e\u4e0b\u8f7d\u3002\u5982\u4e0b\u9762\u4f8b\u5b50\u4e2d\u5c06 pubmed id 2137412 \u7684\u6587\u732e\u8f93\u51fa\uff0c\u683c\u5f0f\u4e3a Medline 3 # \u641c\u7d22 pubmed \u6570\u636e\u5e93\u7f16\u53f7 2137412 \u7684\u6587\u732e\uff0c\u4ee5 medline \u683c\u5f0f\u8f93\u51fa $ efetch -db pubmed -id 2137412 -format medline \u5bf9\u4e8e efetch \u53ef\u4ee5\u4e0b\u8f7d\u90a3\u4e9b\u6570\u636e\u5e93\uff0c\u5bf9\u4e8e\u5404\u4e2a\u6570\u636e\u5e93\u540d\u79f0\u548c\u6570\u636e\u683c\u5f0f\uff0c\u53ef\u4ee5\u7528 -h \u6765\u67e5\u770b $ efetch -h","title":"2.2 efetch"},{"location":"book/C01_Common-Utility/03_entrez/#23-xtract","text":"edirect \u7684\u6838\u5fc3\u547d\u4ee4\uff0c\u7531\u4e8e esearch \u67e5\u8be2\u548c\u4e0b\u8f7d\u7684\u6570\u636e\u5e38\u5e38\u662f xml \u683c\u5f0f\u7684\uff0c\u5bf9\u4e8e XML 4 \u683c\u5f0f\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u7528 xtract \u5de5\u5177\u5c06\u5176\u8f6c\u6362\u6210\u7eaf\u6587\u672c\u683c\u5f0f\u7684\u5185\u5bb9\u3002xtract \u4e0d\u4ec5\u53ef\u4ee5\u8f6c\u6362 NCBI \u7684 XML \u683c\u5f0f\u6587\u4ef6\uff0c\u5bf9\u4e8e\u4efb\u4f55\u901a\u7528\u7684 XML \u683c\u5f0f\u6587\u4ef6\u90fd\u53ef\u4ee5\u8fdb\u884c\u8f6c\u6362\u3002 xtract \u57fa\u672c\u7528\u6cd5\uff1a # \u8bfb\u53d6 XML \u6587\u4ef6\u65b9\u5f0f $ xtract -input XML-file.xml \u4e00\u822c\u6211\u4eec\u90fd\u662f\u901a\u8fc7\u7ba1\u9053\u5de5\u5177 Pipeline \u7ec4\u5408 esearch \u548c efetch \u7b49\u5de5\u5177\u83b7\u5f97 XML \u683c\u5f0f\u7684 NCBI \u6570\u636e\u5e93\u547d\u4e2d\u8bb0\u5f55\u540e\uff0c\u518d\u7528 xtract \u8fdb\u884c\u5904\u7406\u3002 $ esearch -db pubmed -query 'E. coli AND (2016/12/30[pdat]:2016/12/31[pdat])' | \\ > efetch -format xml | xtract -pattern PubmedArticle -element \\ > MedlineCitation/PMID Journal/ISOAbbreviation ArticleTitle \u8fd9\u6761\u547d\u4ee4\u5c06\u68c0\u7d22\u5230\u7684\u6587\u732e\u8bb0\u5f55\u8f6c\u6362\u6210\u884c\uff0c\u518d\u4ee5 PMID\uff0c\u6742\u5fd7\u540d\u7f29\u5199\u548c\u6587\u7ae0\u9898\u76ee\u4e3a\u5217\u5c55\u5f00\u3002\u547d\u4ee4\u6253\u5370\u7684\u7ed3\u679c\u5982\u4e0b\uff1a 28239441J Public Health AfrQuality and labeling information of Mo ringa oleifera products marketed for HIV-infected people in Zimbabwe. 28115890Korean J Food Sci Anim ResourAntimicrobial Activity of Kefir against Variou s Food Pathogens and Spoilage Bacteria. 28110668Enzyme Microb. Technol .A novel thermophilic and halophilic esterase from Janibacter sp. R02, the first member of a new lipase family (Family XVII). ... 27030192J. Vet. Sci.Development and evaluation of an immunochromatographic assay using a gp51 monoclonal antibody for the detection of antibodies against the bovine leukemia virus. \u5f53\u6211\u4eec\u4e0d\u6e05\u695aXML\u5143\u7d20\u7ed3\u6784\u65f6\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u547d\u4ee4\u6253\u5370\u51fa\u6811\u5f62\u7ed3\u6784\u3002 $ xtract -input my.xml -outline xtract \u53ef\u4ee5\u7075\u6d3b\u7684\u6539\u53d8\u6570\u636e\u7684\u683c\u5f0f\uff0c\u6240\u4ee5\u6d89\u53ca\u7684\u53c2\u6570\u4e5f\u6bd4\u8f83\u591a\u3002\u8981\u60f3\u83b7\u5f97\u81ea\u5df1\u9700\u8981\u7684\u6570\u636e\u683c\u5f0f\uff0c\u8981\u60f3\u7528\u597d edirect\uff0c\u638c\u63e1\u597d xtract \u7684\u7528\u6cd5\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002 -pattern \u53c2\u6570 : \u5c06 xml \u683c\u5f0f\u6570\u636e\uff0c\u5c06 \u8f6c\u6362\u6210\u884c\u683c\u5f0f\u6570\u636e\u3002\u6bcf\u4e00\u4e2aelement\u5305\u542b\u7684\u6570\u636e\u505a\u4e3a\u4e00\u884c\u3002 xtract \u547d\u4ee4\u9996\u5148\u8981\u901a\u8fc7 -pattern \u5b9a\u4e49\u6240\u8981\u5206\u6790\u7684\u6570\u636e\u7ea7\u522b\u3002\u6bd4\u5982\u5bf9\u4e8e pubmed \u6570\u636e\u5e93\uff0cefetch \u8f93\u51fa -format \u683c\u5f0f\u4e3a docsum\uff0c\u90a3\u4e48\u6211\u4eec\u4e00\u822c\u8981\u6293\u53d6\u7684\u662f\u6bcf\u4e00\u4e2a\u547d\u4e2d\u7684\u6587\u732e\u8bb0\u5f55\uff0c-pattern \u5c31\u53ef\u4ee5\u7528 DocumentSummary \u5143\u7d20\u3002\u5982\u679c\u4f60\u53ea\u60f3\u77e5\u9053\u6240\u6709\u547d\u4e2d\u6587\u732e\u7684\u4f5c\u8005\uff08\u6bd4\u5982\u6309\u7167\u6b21\u6570\u6392\u5e8f\uff09\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u76f4\u63a5\u5c06 -pattern \u5b9a\u4e49\u4e3a Author\u3002 -element \u53c2\u6570 : \u5c06 -pattern \u5b9a\u4e49\u7684\u884c\u4e2d\u4ee5\u6bcf\u4e2aelement\u5f62\u6210\u4e00\u5217\u3002\u6bcf\u4e2aelement\u4ee5tab\u952e\u5206\u9694\u3002 \u6bcf\u4e2a -pattern \u5b9a\u4e49\u540e\uff0c\u8981\u591a -pattern \u5b9a\u4e49\u7684\u5143\u7d20\u7684\u5b50\u5143\u7d20\u8fdb\u884c\u8f93\u51fa\uff0c\u5c31\u8981\u7528\u5230 -element \u53c2\u6570\u4e86\u3002-element \u53ef\u4ee5\u8ddf\u591a\u4e2a\u5b50\u5143\u7d20\uff0c\u9ed8\u8ba4\u4ee5tab\u952e\u5206\u5272\u3002\u4f46\u662f\u8981\u6ce8\u610f\u7684\u662f\u5b50\u5143\u7d20\u5fc5\u987b\u662f\u552f\u4e00\u5b50\u5143\u7d20\uff0c\u6bd4\u5982 -pattern \u5982\u679c\u5b9a\u4e49\u4e3a DocumentSummary\uff0c\u90a3\u4e48\u6bcf\u4e2a DocumentSummary \u5143\u7d20\u6709\u4e00\u4e2a Authors \u5b50\u5143\u7d20\uff0c\u800c\u6bcf\u4e2a Authors \u6709\u591a\u4e2a Author \u5b50\u5143\u7d20\uff08\u56e0\u4e3a\u4e00\u7bc7\u6587\u732e\u6709\u591a\u4e2a\u4f5c\u8005\uff09\uff0c\u5982\u679c\u76f4\u63a5\u5c06 -element Author\uff0c\u662f\u65e0\u6cd5\u8fd4\u56de\u4f5c\u8005\u4fe1\u606f\u7684\u3002\u9700\u8981\u7528 -block \u53c2\u6570\u628a Authors \u5217\u8f6c\u6362\u6210\u884c\u518d\u8fdb\u884c\u5206\u5272\u3002 -block \u53c2\u6570 : \u53ef\u4ee5\u5c06\u67d0\u4e2aXML\u6807\u7b7e\u4e0b\u7684\u591a\u4e2a\u76f8\u540c\u6807\u7b7e\u8f6c\u6362\u6210\u4e00\u884c\u7684\u591a\u4e2a\u5143\u7d20\uff0c\u6700\u5e38\u89c1\u7684\u7528\u6cd5\u662f\u5728 pubmed \u6570\u636e\u5e93\u68c0\u7d22\u6587\u732e\u65f6 \u4e0b\u591a\u4e2a \u6807\u7b7e\u6253\u5370\u51fa\u6765\u3002 $ esearch -db pubmed -query \"Salmonella[ORGN]\" -days 5 | efetch -format xml | \\ > xtract -pattern PubmedArticle -block Author -sep \" \" -element LastName,Initials -tab\u3001-sep \u53c2\u6570 : \u5c06\u591a\u6761 element \u8bb0\u5f55\u5206\u5272\u3002 / : \u4e3b\u8981\u7528\u5728\u5b9a\u4e49\u8fde\u7eed\u591a\u5c42\u6807\u7b7e\u7684\u5b9a\u4e49\u4e0a\u3002\u6bd4\u5982PMID\u6807\u7b7e\u5373\u53ef\u4ee5\u5728 MedlineCitation \u6807\u7b7e\u4e0b\uff0c\u6709\u65f6\u4e5f\u4f1a\u5728 RefSource \u6807\u7b7e\u4e0b\u3002\u6240\u4ee5\u8981\u660e\u786e\u68c0\u7d22\u6587\u732e\u7684 PMID\uff0c\u5c31\u5e94\u8be5\u7528 MedlineCitation/PMID @ : \u6307\u5b9a XML \u5143\u7d20 element \u7684 attribute \u503c -if\u3001-if/-equals\u3001-if/-contains \u53c2\u6570 : \u6761\u4ef6\u8fd0\u7b97\u7b26 -and\u3001-or\u3001-position\u3001-def \u53c2\u6570 : \u5173\u7cfb\u8fd0\u7b97\u7b26","title":"2.3 xtract"},{"location":"book/C01_Common-Utility/03_entrez/#24-elink","text":"\u5f53\u6211\u4eec\u8981\u68c0\u7d22\u4e00\u4e2a\u6570\u636e\u5e93\u6570\u636e\u6240\u5173\u8054\u5230\u5176\u4ed6\u6570\u636e\u5e93\u65f6\uff0c\u5c31\u8981\u7528\u5230elink\u5de5\u5177\u4e86\u3002\u6bd4\u5982\u6211\u4eec\u5148\u5728SRA\u6570\u636e\u5e93\u4e2d\u641c\u7d22\u5230\u6240\u6709\u9f20\u4f24\u5bd2\u6c99\u95e8\u83cc\u7684SRA\u5b9e\u9a8c\u6570\u636e\uff0c\u7136\u540e\u94fe\u63a5\u5230biosample\u6570\u636e\u5e93\uff0c\u83b7\u5f97\u8fd9\u4e9b\u83cc\u682a\u7684\u751f\u7269\u6837\u672c\u4fe1\u606f\u3002 $ esearch -db sra -query \"salmonella typhimurium\" | elink -target biosample | efetch -format docsum > result.xml","title":"2.4 elink"},{"location":"book/C01_Common-Utility/03_entrez/#24-einfo","text":"\u5bf9\u4e8e NCBI \u6570\u636e\u5e93\u7684\u5404\u9879\u590d\u6742\u53c2\u6570\uff0c\u5b57\u6bb5\u7b49\u8981\u5b8c\u5168\u4e86\u89e3\u548c\u638c\u63e1\u6bd4\u8f83\u56f0\u96be\u3002edirect \u91cc\u63d0\u4f9b\u4e86 einfo \u5de5\u5177\uff0c\u8fd9\u6837\u5176\u4ed6\u5de5\u5177\u6240\u80fd\u8bbf\u95ee\u7684\u5177\u4f53\u6570\u636e\u5e93\u3001\u5b57\u6bb5\u548c\u53ef\u94fe\u63a5\u6570\u636e\u5e93\u7b49\u4fe1\u606f\u90fd\u53ef\u4ee5\u7528 einfo \u4e86\u89e3\u3002 # \u67e5\u8be2 `esearch -db` \u53c2\u6570\u6240\u80fd\u8bbf\u95ee\u7684\u6240\u6709\u6570\u636e\u5e93\u540d\u79f0 $ einfo -dbs | sort # \u67e5\u8be2\u67d0\u4e2a\u6570\u636e\u5e93\u5b57\u6bb5\u60c5\u51b5\uff0c\u5982 sra \u6570\u636e\u5e93\u6240\u6709\u5bf9\u5e94\u7684\u5b57\u6bb5\u540d\u79f0 $ einfo -db sra -fields # \u67e5\u8be2\u6570\u636e\u5e93\u6240\u6709\u53ef\u94fe\u63a5\u7684\u5176\u4ed6\u6570\u636e\u5e93 $ einfo -db sra -links","title":"2.4 einfo"},{"location":"book/C01_Common-Utility/03_entrez/#3","text":"\u5de5\u5177 esearch \u548c efilter \u5728\u505a\u68c0\u7d22\u65f6\u5982\u679c\u505a\u597d\u7b5b\u9009\uff0c\u80fd\u6709\u52a9\u4e8e\u83b7\u5f97\u51c6\u786e\u7684\u7ed3\u679c\u3002\u7b5b\u9009\u67092\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u901a\u8fc7\u6dfb\u52a0\u53c2\u6570\u6765\u7b5b\u9009\u3002\u53e6\u4e00\u79cd\u662f\u5bf9 query \u53c2\u6570\u6dfb\u52a0\u5b57\u6bb5\u5b9a\u4e49\u6765\u7b5b\u9009\u3002 \u53c2\u6570\u8fc7\u6ee4 \uff1a \u5e38\u7528\u7684\u53c2\u6570\u4e3a\u65e5\u671f\u53c2\u6570 -days 100\uff1a100\u5929\u5185\u7684\u68c0\u7d22\u6761\u4ef6\u547d\u4e2d -maxdate\uff1a\u65f6\u95f4\u6bb5\u6700\u5927\u65e5\u671f\uff0c\u683c\u5f0f\u53ef\u4ee5\u662f 2001\uff0c2001/01/01 -mindate\uff1a\u65f6\u95f4\u6bb5\u6700\u5c0f\u65e5\u671f\uff0c\u683c\u5f0f\u53ef\u4ee5\u662f 2001\uff0c2001/01/01 -datetype: PDAT \u53d1\u5e03\u65f6\u95f4\uff1bMDAT \u4fee\u6539\u65f6\u95f4 \u5b57\u6bb5\u5b9a\u4e49 \uff1a -query\u53c2\u6570: esearch \u548c efilter \u901a\u8fc7\u6dfb\u52a0\u8be5\u53c2\u6570\u8fdb\u884c\u68c0\u7d22\u6216\u8fc7\u6ee4\u76f8\u5e94\u7684\u5173\u952e\u8bcd\uff0cquery\u53c2\u6570\u53ef\u4ee5\u6dfb\u52a0 filter\uff0c\u4e0d\u540c\u6570\u636e\u5e93\u53ef\u9009\u62e9\u7684filter\u53ef\u4ee5\u7528\u4e0b\u9762\u547d\u4ee4\u6765\u67e5\u770b\u3002 # \u67e5\u770bsra\u6570\u636e\u5e93\u7684filter $ einfo -db sra -fields # \u67e5\u770bsra\u6570\u636e\u5e93field\uff0c\u7528xtract\u683c\u5f0f\u5316\u8f93\u51fa $ einfo -db sra | xtract -pattern Field -element Name Description -query \u68c0\u7d22\u8bcd\u53ef\u4ee5\u7528\u903b\u8f91\u5173\u952e\u8bcd\u6784\u5efa\u903b\u8f91\u5173\u7cfb\uff1a AND\uff1a\u548c OR\uff1a\u6216 NOT\uff1a\u975e ()\uff1a\u5171\u540c\u5b9a\u4e49 -query \u68c0\u7d22\u8bcd\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a \"*\"\u661f\u53f7\u8868\u793a\u4efb\u610f\u4e2a\u5339\u914d\u7684\u5b57\u7b26 -query \u5b57\u7b26\u4e32\u5b9a\u4e49 \u5efa\u8bae\u7528 '...' \u5b9a\u4e49 -query \u503c\uff0c\u91cc\u9762\u7684\u5404\u4e2a\u5173\u952e\u8bcd\u7528 AND/OR \u7b49\u5efa\u7acb\u903b\u8f91\u5173\u7cfb\u3002\u5173\u952e\u8bcd\u7ec4\u6dfb\u52a0 filter \u65f6\u7528 \"...\" \u5b9a\u4e49\u3002\u5982\uff1a -query '\"salmonella paratyphi A\"[ORGN] AND latest[filter] AND \"complete genome[filter]\"'","title":"3. \u9ad8\u7ea7\u68c0\u7d22"},{"location":"book/C01_Common-Utility/03_entrez/#4","text":"\u4e0b\u9762\u6211\u4eec\u5c31\u7528\u51e0\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u5c1d\u8bd5 edirect \u7684\u529f\u80fd\u3002\u7ed3\u5408 Linux \u5176\u4ed6\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u6781\u5927\u7684\u63d0\u5347\u6211\u4eec\u5728\u547d\u4ee4\u884c\u754c\u9762\u4e0b\u68c0\u7d22\u548c\u6293\u53d6 NCBI \u6570\u636e\u5e93\u7684\u6548\u7387\u3002 \u67e5\u770b2014~2016\u5e74\u53d1\u8868\u7684\u970d\u4e71\u5f27\u83ccCTX\u76f8\u5173\u6587\u732e\u7684\u6458\u8981 \u7528\u5173\u952e\u8bcd vibrio cholerae CTX \u68c0\u7d22 pubmed \u6570\u636e\u5e93\uff0c\u5c06\u641c\u7d22\u5230\u7684\u6587\u732e\u7684\u6458\u8981\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\uff0c\u65b9\u4fbf\u67e5\u770b\u3002\u7531\u4e8e\u662f\u6587\u672c\u683c\u5f0f\u7684\u5185\u5bb9\uff0c\u65b9\u4fbf\u540e\u671f\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u6bd4\u5982\u63d0\u53d6\u5355\u8bcd\u8fdb\u884c\u8bcd\u9891\u8ba1\u7b97\uff0c\u7528\u7ffb\u8bd1API\u5c06\u6458\u8981\u8fdb\u884c\u81ea\u52a8\u7ffb\u8bd1\u7b49\u7b49\u3002 # \u793a\u4f8b\u4e3a\u4e86\u51cf\u5c11\u547d\u4e2d\u6570\u636e\uff0c\u8bbe\u7f6e\u4e86\u53d1\u5e03\u65e5\u671f\u7684 -mindate \u548c maxdata $ esearch -db pubmed -mindate 2014 -maxdate 2016 -datetype PDAT \\ > -query \"vibrio cholerae CTX\" | efetch -format abstract > abstract.txt # \u65e5\u671f\u8bbe\u7f6e\u7684\u53e6\u4e00\u79cd\u5199\u6cd5 $ esearch -db pubmed -query \"vibrio cholerae CTX AND \\ > (2014[pdat]:2016[pdat])\" | efetch -format abstract > abstract.txt \u67e5\u770b\u6587\u7ae0\u4f5c\u8005 \u5e38\u5e38\u4f1a\u5bf9\u67d0\u4e00\u7c7b\u6587\u7ae0\uff0c\u6216\u8005\u67d0\u4e00\u4e2a\u671f\u520a\u7684\u6587\u7ae0\u4f5c\u8005\u8fdb\u884c\u5173\u6ce8\uff0c\u8fd9\u91cc\u6839\u636e\u68c0\u7d22\u5173\u952e\u8bcd\uff0c\u683c\u5f0f\u5316\u8f93\u51fa\u6587\u7ae0\u7684ID\u548c\u4f5c\u8005\u5217\u8868\u3002\u8fd9\u4e5f\u662f xtract \u6700\u5e38\u89c1\u7684\u5e94\u7528\u4e4b\u4e00\u3002 # \u68c0\u7d22\u5173\u952e\u8bcd\uff0c\u4ee5\u6700\u8fd1300\u5929\u4e3a\u8303\u56f4 $ esearch -db pubmed -query \"listeria monocytogenes AND prfA\" -days 300 | \\ > efetch -format xml | xtract -pattern PubmedArticle \\ > -element MedlineCitation/PMID -block Author -sep \" \" \\ > -element LastName,Initials \u67e5\u770b\u8fd1300\u5929\u4ee5\u6765\u53d1\u8868\u7684\u6587\u7ae0\u4e2d\uff0c\u4f5c\u8005\u4e2d\u6709\u53ebJim\u7684\u6240\u6709\u6587\u7ae0\u9898\u76ee \u5229\u7528 pubmed \u6570\u636e\u5e93\u7684 filter [FULL], \u67e5\u8be2\u6240\u6709\u4f5c\u8005\u5217\u8868\u91cc\u6709\u53ebJim\u7684\u6587\u7ae0\u6807\u9898\uff0c\u8fd9\u91cc\u91c7\u7528 medline \u683c\u5f0f\u8f93\u51fa\uff0c\u5982\u679c\u8981\u8fdb\u4e00\u6b65\u505a\u683c\u5f0f\u5316\u53ef\u4ee5\u7528xml\u683c\u5f0f\u518d\u7528xtract\u91cd\u65b0\u6392\u7248\u6253\u5370\u3002 $ esearch -db pubmed -days 300 -query \"Jim[FULL]\" | efetch -format medline | \\ > grep TI | awk -F '- ' '{print $2}' \u67e5\u770b2016\u5e74CDC\u53d1\u5e03\u7684\u6240\u6709\u7528miseq\u6d4b\u5e8f\u7684\u6c99\u95e8\u83cc\u6587\u5e93\u5236\u5907\u65b9\u6cd5 \u60f3\u8981\u4e86\u89e3 CDC \u5f00\u5c55\u7684 miseq \u6c99\u95e8\u83cc\u6d4b\u5e8f\u65f6\u91c7\u7528\u7684\u6587\u5e93\u6784\u5efa\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5229\u7528 sra \u6570\u636e\u5e93\u7684 runinfo\u4fe1\u606f\u8f93\u51fa\u83b7\u5f97\u3002 $ esearch -db sra -query \"salmonella[OGRN] miseq[PLAT] EDBL-CDC\" \\ > -mindate 2016 /01/01 -maxdate 2016 /12/31 -datetype PDAT | \\ > efetch -format runinfo | cut -d ',' -f 12 > library.txt \u7ed8\u5236\u5355\u589e\u674e\u65af\u7279\u83cchlyA\u86cb\u767d\u8d28\u8fdb\u5316\u6811\u56fe $ esearch -db protein -query \"listeriolysin hlyA NOT partial\" | > efetch -format fasta > hlyA.fasta $ mafft hlyA.fasta > hlyA.mafft.fasta $ raxml -m GTRGAMMA -p 12345 -s hlyA.mafft.fasta -f a -x 12345 -N 100 -T 40 -n hlyA \u5bf910\u5e74\u5185\u53d1\u8868\u7684\u68c0\u7d22\u6587\u732e\u7684\u4f5c\u8005\u6392\u5e8f $ esearch -db pubmed -days 3650 -datetype PDAT -query \"hlyA\" | \\ > efetch -format xml | \\ > xtract -pattern Author -element LastName | \\ > sort-uniq-count-rank \u67e5\u770b taxonomy taxonomy \u6570\u636e\u5e93\u7684 filter [NXLV] \u53ef\u4ee5\u76f4\u63a5\u8f93\u51faspecies\u7ea7\u522b # \u83b7\u5f97 taxonomy \u6570\u636e\u5e93\u91cc lis \u6216 sal \u5f00\u5934\u7684\u5206\u7c7b\u540d $ esearch -db taxonomy -query \"lis* OR sal*\" | efetch -db taxonomy -format txt # \u83b7\u5f97 species \u7ea7\u7684\u6240\u6709\u6c99\u95e8\u83cc $ esearch -db taxonomy -query \"Salmonella[NXLV]\" | efetch -db taxonomy -format txt \u4e0b\u8f7d\u6240\u6709\u7532\u578b\u526f\u4f24\u5bd2\u6c99\u95e8\u83cc\u57fa\u56e0\u7ec4\u5e8f\u5217 $ esearch -db nuccore -query \"Salmonella[porgn:__txid54388] complete genome\" | \\ > efetch -db nuccore -format fasta > SPA.fasta \u83b7\u53d6SRA\u6570\u636e\u5e93\u4e2d\u76ee\u7684\u6570\u636e\u7684\u6d4b\u5e8f\u6837\u672c\u5730\u7406\u4fe1\u606f $ esearch -db sra -query \"China\" -days 1 | elink -target biosample | \\ > efetch -format docsum | xtract -pattern DocumentSummary -element Accession \\ > -block Attribute -if Attribute@attribute_nam \\ > -equals lat_lon -element Attribute \u83b7\u5f97\u67d0\u4e2abioproject\u4e0b\u7684\u6240\u6709sra run\u7684\u4fe1\u606f $ eserach -db bioproject -query \"PRJNA209644\" | elink -target sra | \\ > efetch -format docsum | xtract -pattern DocumentSummary -ACC @acc \\ > -block DocumentSummary -element \"&ACC\" \u4e0b\u8f7dassembly\u6570\u636e\u5e93\u7684refseq\u5e8f\u5217 $ esearch -db assembly -query \"Salmonella enterica[ORGN] AND 2010[GRLS]\" | \\ > efetch -format docsum | xtract -pattern DocumentSummary \\ > -element FtpPath_RefSeq | awk -F \"/\" '{print $0\"/\"$NF\"_genomic.fna.gz\"}' | \\ > xargs wget \u67e5\u770bassembly meta\u4fe1\u606f NCBI \u7684 Assembly \u6570\u636e\u5e93\u5305\u542b\u4e86 RefSeq \u6570\u636e\u5e93\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u9009\u62e9\u76f8\u5e94\u7684\u7269\u79cd\u53ef\u4ee5\u83b7\u5f97\u8be5\u7269\u79cd\u7684\u57fa\u56e0\u7ec4\u62fc\u63a5\u5e8f\u5217\uff0c\u6709\u5b8c\u6210\u56fe\u4e5f\u6709\u975e\u5b8c\u6210\u56fe\u3002 $ esearch -db assembly -query '\"salmonella paratyphi A\"[ORGN] AND latest[FILT]' | \\ > efetch -format docsum | xtract -pattern Meta -block Stats \\ > -tab '\\n' -sep '\\t' -element Stat@category Stat | sort -ur > meta.txt import pandas as pd import seaborn as sns df = pd . read_table ( \"meta.txt\" ) sns . jointplot ( x = \"contig_count\" , y = \"scaffold_n50\" , data = df ) \u83b7\u53d6SRA\u83cc\u682a\u4fe1\u606f \u5bf9\u67d0\u4e2a\u7269\u79cd\u5f00\u5c55\u8fdb\u5316\u7814\u7a76\u65f6\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u7adf\u53ef\u80fd\u6536\u96c6\u516c\u5171\u6570\u636e\u5e93\u4e2d\u7684\u83cc\u682a\u80cc\u666f\u4fe1\u606f\u3002\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u641c\u7d22\u67d0\u4e2a bioproject\uff0c\u7136\u540e\u83b7\u5f97\u8be5\u7814\u7a76\u7684\u6240\u6709\u6d4b\u5e8f\u6570\u636e\u7684 sra \u80cc\u666f\u4fe1\u606f\u3002\u901a\u8fc7 \\<SAMPLE_ATTRIBUTE> \u5143\u7d20\u4e0b\u7684\u5404\u4e2a TAG \u548c VALUE \u6765\u63d0\u53d6\u6240\u9700\u4fe1\u606f\u3002 $ esearch -db bioproject -query 273159 | elink -target sra | \\ > efetch -format xml | xtract -pattern EXPERIMENT_PACKAGE -tab \",\" \\ > -element RUN@accession -block SAMPLE_ATTRIBUTE -tab \"\\t\" -sep \":\" \\ > -element TAG,VALUE > sample.txt $ head sample.txt \u8fd9\u6837\u8f93\u51fa\u7684\u95ee\u9898\u5728\u4e8e\u5404\u4e2a\u6d4b\u5e8f\u6570\u636e\u7684 SAMPLE_ATTRIBUTE \u7684 TAG \u987a\u5e8f\u662f\u4e71\u5e8f\u7684\uff0c\u6bcf\u4e2a SRR \u8f93\u51fa\u7684\u987a\u5e8f\u4e0d\u540c\u5bfc\u81f4\u5404\u4e2a\u5b57\u6bb5\u8981\u91cd\u65b0\u6392\u5e8f\uff0c\u6bd4\u8f83\u9ebb\u70e6\u3002\u5982\u679c\u6211\u4eec\u53ea\u9700\u8981\u5176\u4e2d\u4e00\u4e2a\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528 -if *** -eqauls *** \u6765\u8fc7\u6ee4\u3002\u6bd4\u5982\u4e0b\u9762\u4ee3\u7801\u6211\u4eec\u8f93\u51fa\u83cc\u682a\u540d\u79f0\uff1a $ esearch -db bioproject -query 273159 | elink -target sra | \\ > efetch -format xml | xtract -pattern EXPERIMENT_PACKAGE -tab \",\" \\ > -element RUN@accession -block SAMPLE_ATTRIBUTE -if TAG -equals \"strain\" \\ > -element VALUE | sort > strain-name.csv -if \u5728\u4e00\u884c\u8f93\u51fa\u4e2d\u4e0d\u80fd\u53cd\u590d\u4f7f\u7528\uff0c\u5982\u679c\u8981\u540c\u65f6\u5bf9\u591a\u4e2a\u6837\u54c1\u4fe1\u606f\u5b57\u6bb5\u5206\u522b\u8f93\u51fa\uff0c\u6211\u4eec\u91c7\u7528\u53d8\u901a\u7684\u65b9\u6cd5\uff0c\u5148\u628a xml \u6570\u636e\u4fdd\u5b58\u5230\u672c\u5730\uff0c\u7136\u540e\u5faa\u73af\u5206\u522b\u8f93\u51fa\u5404\u4e2a\u6240\u9700\u5185\u5bb9\uff0c\u7528 sort \u6392\u5e8f\uff0c\u518d\u7528 paste \u5408\u5e76\u3002 # \u5206\u522b\u8f93\u51fa csv \u683c\u5f0f\u7684\u6570\u636e $ for i in serovar strain isolate_name_alias collection_date isolation_source ; \\ > do xtract -input bioproject.xml -pattern EXPERIMENT_PACKAGE -tab \",\" \\ > -element RUN@accession -block SAMPLE_ATTRIBUTE -if TAG -equals $i -element \\ > VALUE | sort > $i ; done # \u5408\u5e76 csv $ paste -d , strain serovar isolate_name_alias collection_date > sample.csv","title":"4. \u5177\u4f53\u793a\u4f8b"},{"location":"book/C01_Common-Utility/03_entrez/#reference","text":"Entrez Direct: E-utilities on the UNIX Command Line \u21a9 Unix Pipeline Wikipedia \u21a9 Medline Element Description \u21a9 XML \u21a9","title":"Reference"},{"location":"book/C01_Common-Utility/04_emboss/","text":"EMBOSS \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb EMBOSS \u662f\u6b27\u6d32\u5206\u5b50\u751f\u7269\u5b66\u7ec4\u7ec7\u5f00\u53d1\u7684 Unix/Linux \u4e0b\u7684\u751f\u7269\u5b66\u5206\u6790\u5de5\u5177\u3002EMBOSS \u5305\u542b\u5de5\u5177\u4f17\u591a\uff0c\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u4e0e\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u5206\u6790\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u6240\u6709\u7684\u8f6f\u4ef6\u548c\u5176\u6587\u6863\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002 \u7531\u4e8e EMBOSS \u7684\u547d\u4ee4\u884c\u65b9\u5f0f\u6bd4\u8f83\u4f20\u7edf\uff0c\u7c7b\u4f3cphylip\u7684\u4ea4\u4e92\u6a21\u5f0f\uff0c\u548c\u5f53\u524d\u8bb8\u591a\u9ad8\u901a\u91cf\u6d4b\u5e8f\u5de5\u5177\u7684\u53c2\u6570\u8bbe\u7f6e\u7b49\u4e0d\u4e00\u81f4\uff0c\u52a0\u4e0a\u8bb8\u591a\u65b0\u7684\u5de5\u5177\u4ee3\u66ff\uff0c\u56e0\u6b64\u4f7f\u7528\u7684\u673a\u4f1a\u4e0d\u662f\u5f88\u591a\u3002\u8fd9\u91cc\u4ecb\u7ecd\u90e8\u5206\u4e0e\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u5206\u6790\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u6240\u6709\u7684\u8f6f\u4ef6\u548c\u5176\u6587\u6863\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u3002 1. \u5b89\u88c5 EMBOSS \u00b6 # ubuntu \u5305\u542b emboss \u53d1\u884c\u7248 $ sudo apt install emboss # \u901a\u8fc7 conda \u5b89\u88c5 $ conda create -n emboss emboss $ conda activate emboss EMBOSS \u5de5\u5177\u96c6\u5305\u542b\u4f17\u591a\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u96c6\u6210\u5230\u5206\u6790\u5de5\u5177\u6d41\u4e2d\u3002EMBOSS \u4e2d\u7684\u8bb8\u591a\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u8fdc\u7a0b\u6570\u636e\u5e93\uff0c\u4f46\u8fd9\u9700\u8981\u9ed8\u8ba4\u914d\u7f6e\u3002\u5982\u679c\u662f\u901a\u8fc7 conda \u5b89\u88c5\uff0c\u5219\u8981\u5c06\u6240\u5728conda\u865a\u62df\u73af\u5883\u8def\u5f84\u4e2d\u7684 share/EMBOSS/emboss.default.template \u590d\u5236\u4e3a emboss.default \u3002\u5982\u679c\u662f\u901a\u8fc7\u7cfb\u7edf\u7ea7\u5b89\u88c5\uff0c\u8981\u5728\u5f53\u524d\u7528\u6237\u73af\u5883\u4e2d\u914d\u7f6e\u6570\u636e\u5e93\uff0c\u5219\u53ef\u4ee5\u5c06 emboss.default.template \u590d\u5236\u4e3a ~/.embossrc \u3002 # \u5efa\u7acb\u914d\u7f6e\u6587\u4ef6 ( emboss ) $ cd $CONDA_PREFIX /EMBOSS ( emboss ) $ cp emboss.default.template emboss.default ( emboss ) $ vim emboss.default # \u5c06\u9700\u8981\u6fc0\u6d3b\u7684\u6570\u636e\u5e93\u6ce8\u91ca\u7b26\u53f7\u53d6\u51fa\uff0c\u6bd4\u5982embl # \u67e5\u770b\u53ef\u4ee5\u4f7f\u7528\u7684\u6570\u636e\u5e93 ( emboss ) $ showdb 2. \u4f7f\u7528 \u00b6 \u67e5\u770b\u5404\u4e2a\u7a0b\u5e8f \u00b6 wossname : EMBOSS \u5305\u542b\u4f17\u591a\u5e94\u7528\u7a0b\u5e8f\uff0c\u4e3a\u65b9\u4fbf\u67e5\u8be2\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7684\u7a0b\u5e8f wossname \u53ef\u4ee5\u67e5\u770b\u6240\u6709\u7a0b\u5e8f\u53ca\u529f\u80fd\u3002 # \u663e\u793a\u6240\u6709\u7a0b\u5e8f\u53ca\u529f\u80fd ( emboss ) $ wossname # \u663e\u793a\u67d0\u4e00\u4e2a\u7c7b\u522b\u7684\u7a0b\u5e8f # \u663e\u793aalignment\u6bd4\u5bf9\u76f8\u5173\u7684\u5e94\u7528\u7a0b\u5e8f ( emboss ) $ wossname alignment # \u6309\u529f\u80fd\u5206\u7ec4\u663e\u793a\u5e94\u7528 ( emboss ) $ wossname -search \"\" | less # \u6309\u5b57\u6bcd\u987a\u5e8f\u663e\u793a\u5e94\u7528 ( emboss ) $ wossname -search \"\" -alphabetic | less \u6570\u636e\u5e93\u76f8\u5173 \u00b6 showdb : \u663e\u793a\u53ef\u7528\u7684\u6570\u636e\u5e93 dbtell : \u663e\u793a\u6570\u636e\u5e93\u76f8\u5173\u4fe1\u606f # \u663e\u793a\u5f53\u524d\u53ef\u7528\u6570\u636e\u5e93 ( emboss ) $ showdb -full # \u663e\u793aembl\u6570\u636e\u5e93\u4fe1\u606f ( emboss ) $ dbtell embl \u5e8f\u5217\u5904\u7406 \u00b6 seqret : \u751f\u6210\u5e8f\u5217\u6216\u683c\u5f0f\u5316\u5e8f\u5217 # \u8bfb\u5165\u5e8f\u5217\uff0c\u4ee560\u5b57\u7b26\u4e3a\u957f\u5ea6\u5c06\u5176\u683c\u5f0f\u5316\u4e3a\u89c4\u8303\u7684fasta\u683c\u5f0f\u6570\u636e ( emboss ) $ seqret 1 .fas 2 .fas # \u5e8f\u5217\u4e2a\u662f\u8f6c\u6362 fasta \u683c\u5f0f\u8f6c\u6362\u4e3a\u5176\u4ed6\u683c\u5f0f ( emboss ) $ seqret fasta::1.fas gcg::1.gcg # \u76f4\u63a5\u4ece\u670d\u52a1\u5668\u8bfb\u53d6\u5e8f\u5217 ( emboss ) $ seqret embl:x52524 # \u901a\u8fc7\u4ea4\u4e92\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c ( emboss ) $ seqret Read and write ( return ) sequences Input ( gapped ) sequence ( s ) : <--- \u8f93\u5165\u5e8f\u5217\u6587\u4ef6\u540d\u79f0 output sequence ( s ) [ ... ] : <--- \u8f93\u5165\u5e8f\u5217\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u79f0 showfeat : \u663e\u793a\u5e8f\u5217\u4fe1\u606f # \u663e\u793a\u7ec4\u88c5\u5b50\u5404\u4e2a contigs \u957f\u5ea6 ( emboss ) $ showfeat assembly.fasta result.showfeat ( emboss ) $ less result.showfeat transeq : DNA/RNA\u5e8f\u5217\u7ffb\u8bd1\u6210\u6c28\u57fa\u9178\u5e8f\u5217\uff0c\u6587\u4ef6\u4ee5 .pep \u540e\u7f00\u4fdd\u5b58 backtranseq : \u6c28\u57fa\u9178\u5e8f\u5217\u8f6c\u6362\u6210DNA\u5e8f\u5217\u3002 # fasta\u4e2a\u662f\u7684DNA\u5e8f\u5217\u8f6c\u6362\u6210\u6c28\u57fa\u9178\u5e8f\u5217 ( emboss ) $ transeq input.fasta output.pep # \u5c06 input.pep \u6c28\u57fa\u9178\u5e8f\u5217\u8f6c\u6362\u6210\u78b1\u57fa\u683c\u5f0f\u4fdd\u5b58\u6210 output.fas DNA\u5e8f\u5217 ( emboss ) $ backtranseq input.pep output.fas \u5f15\u7269\u8bbe\u8ba1 \u00b6 eprimer3 : primersearch : \u53cc\u5e8f\u5217\u6bd4\u5bf9 \u00b6 \u53cc\u5e8f\u5217(Pairwise Alignment)\u6bd4\u5bf9\u7684\u8f6f\u4ef6 needle : local alignment \u5e8f\u5217\u6bd4\u5bf9 water : global alignment \u5e8f\u5217\u6bd4\u5bf9\uff0c\u57fa\u4e8e water-smith \u7b97\u6cd5\u3002 # \u5bf92\u6761\u5e8f\u5217 seq1.fas \u548c seq2.fas \u8fdb\u884c\u5168\u5c40\u6bd4\u5bf9\uff0c\u751f\u6210 seq1v2 alignment ( emboss ) $ water seq1.fas seq2.fas seq1v2.sw ( emboss ) $ needle seq1.fas seq2.fas seq1v2.nl needleall \u591a\u5e8f\u5217\u6bd4\u5bf9 \u00b6 emma : \u57fa\u4e8e clustalW \u7684\u591a\u5e8f\u5217\u6bd4\u5bf9\u7a0b\u5e8f edialign : Local \u591a\u5e8f\u5217\u6bd4\u5bf9 ( emboss ) $ emma msa1.fas msa1.phy ( emboss ) $ edialign \u6570\u636e\u53ef\u89c6\u5316 \u00b6 density : \u7ed8\u5236\u6838\u9178\u5bc6\u5ea6\u56fe\u3002 # \u751f\u6210\u5e8f\u5217\u5bc6\u5ea6\u56fe ( emboss ) $ density -seqall input.fasta -display D -gragh ps \u5de5\u5177\u5217\u8868 \u00b6 \u5177\u4f53\u4fe1\u606f\u53c2\u89c1\uff1a \u5de5\u5177\u5217\u8868 \u7a0b\u5e8f\u540d\u79f0 \u7528\u9014 aaindexextract \u4eceAAINDEX\u4e2d\u63d0\u53d6\u6c28\u57fa\u9178\u5c5e\u6027 abiview \u663e\u793a ABI \u6d4b\u5e8f\u6570\u636e\u5cf0\u503c acdc \u6d4b\u8bd5 ACD \u6587\u4ef6 acdpretty \u4fee\u6b63 ACD \u683c\u5f0f\u6587\u4ef6 acdtable \u4ece ACD \u6587\u4ef6\u5e94\u7528\u4e2d\u751f\u6210 HTML \u683c\u5f0f\u7684\u8868\u683c acdtrace Trace processing of an application ACD file (for testing) acdvalid Validate an application ACD file aligncopy Read and write alignments aligncopypair Read and write pairs from alignments antigenic Find antigenic sites in proteins assemblyget Get assembly of sequence reads backtranambig Back-translate a protein sequence to ambiguous nucleotide sequence backtranseq Back-translate a protein sequence to a nucleotide sequence banana Plot bending and curvature data for B-DNA biosed Replace or delete sequence sections btwisted Calculate the twisting in a B-DNA sequence cachedas Generate server cache file for DAS servers or for the DAS registry cachedbfetch Generate server cache file for Dbfetch/WSDbfetch data sources cacheebeyesearch Generate server cache file for EB-eye search domains cacheensembl Generate server cache file for an Ensembl server cai \u8ba1\u7b97 condon adaptation index chaos Draw a chaos game representation plot for a nucleotide sequence charge Draw a protein charge plot checktrans Report STOP codons and ORF statistics of a protein chips Calculate Nc codon usage statistic cirdna Draw circular map of DNA constructs codcmp Codon usage table comparison codcopy Copy and reformat a codon usage table coderet Extract CDS, mRNA and translations from feature tables compseq Calculate the composition of unique words in sequences cons Create a consensus sequence from a multiple alignment consambig Create an ambiguous consensus sequence from a multiple alignment cpgplot Identify and plot CpG islands in nucleotide sequence(s) cpgreport Identify and report CpG-rich regions in nucleotide sequence(s) cusp Create a codon usage table from nucleotide sequence(s) cutgextract Extract codon usage tables from CUTG database cutseq Remove a section from a sequence dan Calculate nucleic acid melting temperature dbiblast Index a BLAST database dbifasta Index a fasta file database dbiflat Index a flat file database dbigcg Index a GCG formatted database dbtell Display information about a public database dbxcompress Compress an uncompressed dbx index dbxedam Index the EDAM ontology using b+tree indices dbxfasta Index a fasta file database using b+tree indices dbxflat Index a flat file database using b+tree indices dbxgcg Index a GCG formatted database using b+tree indices dbxobo Index an obo ontology using b+tree indices dbxreport Validate index and report internals for dbx databases dbxresource Index a data resource catalogue using b+tree indices dbxstat Dump statistics for dbx databases dbxtax Index NCBI taxonomy using b+tree indices dbxuncompress Uncompress a compressed dbx index degapseq Remove non-alphabetic (e.g. gap) characters from sequences density Draw a nucleic acid density plot descseq Alter the name or description of a sequence diffseq Compare and report features of two similar sequences distmat Create a distance matrix from a multiple sequence alignment dotmatcher Draw a threshold dotplot of two sequences dotpath Draw a non-overlapping wordmatch dotplot of two sequences dottup Display a wordmatch dotplot of two sequences dreg Regular expression search of nucleotide sequence(s) drfinddata Find public databases by data type drfindformat Find public databases by format drfindid Find public databases by identifier drfindresource Find public databases by resource drget Get data resource entries drtext Get data resource entries complete text edamdef Find EDAM ontology terms by definition edamhasinput Find EDAM ontology terms by has_input relation edamhasoutput Find EDAM ontology terms by has_output relation edamisformat Find EDAM ontology terms by is_format_of relation edamisid Find EDAM ontology terms by is_identifier_of relation edamname Find EDAM ontology terms by name edialign Local multiple alignment of sequences einverted Find inverted repeats in nucleotide sequences embossdata Find and retrieve EMBOSS data files embossupdate Checks for more recent updates to EMBOSS embossversion Report the current EMBOSS version number emma Multiple sequence alignment (ClustalW wrapper) emowse Search protein sequences by digest fragment molecular weight entret Retrieve sequence entries from flatfile databases and files epestfind Find PEST motifs as potential proteolytic cleavage sites eprimer3 Pick PCR primers and hybridization oligos eprimer32 Pick PCR primers and hybridization oligos equicktandem Find tandem repeats in nucleotide sequences est2genome Align EST sequences to genomic DNA sequence etandem Find tandem repeats in a nucleotide sequence extractalign Extract regions from a sequence alignment extractfeat Extract features from sequence(s) extractseq Extract regions from a sequence featcopy Read and write a feature table featmerge Merge two overlapping feature tables featreport Read and write a feature table feattext Return a feature table original text findkm Calculate and plot enzyme reaction data freak Generate residue/base frequency table or plot fuzznuc Search for patterns in nucleotide sequences fuzzpro Search for patterns in protein sequences fuzztran Search for patterns in protein sequences (translated) garnier Predict protein secondary structure using GOR method geecee Calculate fractional GC content of nucleic acid sequences getorf Find and extract open reading frames (ORFs) godef Find GO ontology terms by definition goname Find GO ontology terms by name helixturnhelix Identify nucleic acid-binding motifs in protein sequences hmoment Calculate and plot hydrophobic moment for protein sequence(s) iep Calculate the isoelectric point of proteins infoalign Display basic information about a multiple sequence alignment infoassembly Display information about assemblies infobase Return information on a given nucleotide base inforesidue Return information on a given amino acid residue infoseq Display basic information about sequences isochore Plot isochores in DNA sequences jaspextract Extract data from JASPAR jaspscan Scan DNA sequences for transcription factors lindna Draw linear maps of DNA constructs listor Write a list file of the logical OR of two sets of sequences makenucseq Create random nucleotide sequences makeprotseq Create random protein sequences marscan Find matrix/scaffold recognition (MRS) signatures in DNA sequences maskambignuc Mask all ambiguity characters in nucleotide sequences with N maskambigprot Mask all ambiguity characters in protein sequences with X maskfeat Write a sequence with masked features maskseq Write a sequence with masked regions matcher Waterman-Eggert local alignment of two sequences megamerger Merge two large overlapping DNA sequences merger Merge two overlapping sequences msbar Mutate a sequence mwcontam Find weights common to multiple molecular weights files mwfilter Filter noisy data from molecular weights file needle Needleman-Wunsch \u5168\u5c40\u6bd4\u5bf9 needleall \u4e24\u4e24\u53cc\u5e8f\u5217\u6bd4\u5bf9 newcpgreport Identify CpG islands in nucleotide sequence(s) newcpgseek Identify and report CpG-rich regions in nucleotide sequence(s) newseq Create a sequence file from a typed-in sequence nohtml Remove mark-up (e.g. HTML tags) from an ASCII text file noreturn Remove carriage return from ASCII files nospace Remove whitespace from an ASCII text file notab Replace tabs with spaces in an ASCII text file notseq Write to file a subset of an input stream of sequences nthseq Write to file a single sequence from an input stream of sequences nthseqset Read and write (return) one set of sequences from many octanol Draw a White-Wimley protein hydropathy plot oddcomp Identify proteins with specified sequence word composition ontocount Count ontology term(s) ontoget Get ontology term(s) ontogetcommon Get common ancestor for terms ontogetdown Get ontology term(s) by parent id ontogetobsolete Get ontology ontology terms ontogetroot Get ontology root terms by child identifier ontogetsibs Get ontology term(s) by id with common parent ontogetup Get ontology term(s) by id of child ontoisobsolete Report whether an ontology term id is obsolete ontotext Get ontology term(s) original full text palindrome Find inverted repeats in nucleotide sequence(s) pasteseq Insert one sequence into another patmatdb Search protein sequences with a sequence motif patmatmotifs Scan a protein sequence with motifs from the PROSITE database pepcoil Predict coiled coil regions in protein sequences pepdigest Report on protein proteolytic enzyme or reagent cleavage sites pepinfo Plot amino acid properties of a protein sequence in parallel pepnet Draw a helical net for a protein sequence pepstats Calculate statistics of protein properties pepwheel Draw a helical wheel diagram for a protein sequence pepwindow Draw a hydropathy plot for a protein sequence pepwindowall Draw Kyte-Doolittle hydropathy plot for a protein alignment plotcon Plot conservation of a sequence alignment plotorf Plot potential open reading frames in a nucleotide sequence polydot Draw dotplots for all-against-all comparison of a sequence set preg Regular expression search of protein sequence(s) prettyplot Draw a sequence alignment with pretty formatting prettyseq Write a nucleotide sequence and its translation to file primersearch Search DNA sequences for matches with primer pairs printsextract Extract data from PRINTS database for use by pscan profit Scan one or more sequences with a simple frequency matrix prophecy Create frequency matrix or profile from a multiple alignment prophet Scan one or more sequences with a Gribskov or Henikoff profile prosextract Process the PROSITE motif database for use by patmatmotifs pscan Scan protein sequence(s) with fingerprints from the PRINTS database psiphi Calculates phi and psi torsion angles from protein coordinates rebaseextract Process the REBASE database for use by restriction enzyme applications recoder Find restriction sites to remove (mutate) with no translation change redata Retrieve information from REBASE restriction enzyme database refseqget Get reference sequence remap Display restriction enzyme binding sites in a nucleotide sequence restover Find restriction enzymes producing a specific overhang restrict Report restriction enzyme cleavage sites in a nucleotide sequence revseq Reverse and complement a nucleotide sequence seealso Find programs with similar function to a specified program seqcount Read and count sequences seqmatchall All-against-all word comparison of a sequence set seqret Read and write (return) sequences seqretsetall Read and write (return) many sets of sequences seqretsplit Read sequences and write them to individual files seqxref Retrieve all database cross-references for a sequence entry seqxrefget Retrieve all cross-referenced data for a sequence entry servertell Display information about a public server showalign Display a multiple sequence alignment in pretty format showdb \u663e\u793a EMBOSS \u5de5\u5177\u652f\u6301\u7684\u6570\u636e\u5e93\uff0c\u4e00\u4e9b\u5de5\u5177\u53ef\u4ee5\u76f4\u63a5\u64cd\u4f5c\u8fdc\u7a0b\u6570\u636e\u5e93 showfeat \u663e\u793a\u5e8f\u5217\u7684\u5c5e\u6027\uff0c\u5982\u957f\u5ea6\u7b49\u4fe1\u606f showorf Display a nucleotide sequence and translation in pretty format showpep Display protein sequences with features in pretty format showseq Display sequences with features in pretty format showserver Display information on configured servers shuffleseq Shuffle a set of sequences maintaining composition sigcleave Report on signal cleavage sites in a protein sequence silent Find restriction sites to insert (mutate) with no translation change sirna Find siRNA duplexes in mRNA sixpack Display a DNA sequence with 6-frame translation and ORFs sizeseq Sort sequences by size skipredundant Remove redundant sequences from an input set skipseq Read and write (return) sequences, skipping first few splitsource Split sequence(s) into original source sequences splitter Split sequence(s) into smaller sequences stretcher Needleman-Wunsch rapid global alignment of two sequences stssearch Search a DNA database for matches with a set of STS primers supermatcher Calculate approximate local pair-wise alignments of larger sequences syco Draw synonymous codon usage statistic plot for a nucleotide sequence taxget Get taxon(s) taxgetdown Get descendants of taxon(s) taxgetrank Get parents of taxon(s) taxgetspecies Get all species under taxon(s) taxgetup Get parents of taxon(s) tcode Identify protein-coding regions using Fickett TESTCODE statistic textget Get text data entries textsearch Search the textual description of sequence(s) tfextract Process TRANSFAC transcription factor database for use by tfscan tfm Display full documentation for an application tfscan Identify transcription factor binding sites in DNA sequences tmap Predict and plot transmembrane segments in protein sequences tranalign Generate an alignment of nucleic coding regions from aligned proteins transeq Translate nucleic acid sequences trimest Remove poly-A tails from nucleotide sequences trimseq Remove unwanted characters from start and end of sequence(s) trimspace Remove extra whitespace from an ASCII text file twofeat Find neighbouring pairs of features in sequence(s) union Concatenate multiple sequences into a single sequence urlget Get URLs of data resources variationget Get sequence variations vectorstrip Remove vectors from the ends of nucleotide sequence(s) water Smith-Waterman local alignment of sequences whichdb Search all sequence databases for an entry and retrieve it wobble Plot third base position variability in a nucleotide sequence wordcount Count and extract unique words in molecular sequence(s) wordfinder Match large sequences against one or more other sequences wordmatch Find regions of identity (exact matches) of two sequences wossdata Find programs by EDAM data wossinput Find programs by EDAM input data wossname Find programs by keywords in their short description wossoperation Find programs by EDAM operation wossoutput Find programs by EDAM output data wossparam Find programs by EDAM parameter wosstopic Find programs by EDAM topic yank Add a sequence reference (a full USA) to a list file","title":"04. EMBOSS \u5de5\u5177\u96c6"},{"location":"book/C01_Common-Utility/04_emboss/#emboss","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb EMBOSS \u662f\u6b27\u6d32\u5206\u5b50\u751f\u7269\u5b66\u7ec4\u7ec7\u5f00\u53d1\u7684 Unix/Linux \u4e0b\u7684\u751f\u7269\u5b66\u5206\u6790\u5de5\u5177\u3002EMBOSS \u5305\u542b\u5de5\u5177\u4f17\u591a\uff0c\u8fd9\u91cc\u53ea\u4ecb\u7ecd\u4e0e\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u5206\u6790\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u6240\u6709\u7684\u8f6f\u4ef6\u548c\u5176\u6587\u6863\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002 \u7531\u4e8e EMBOSS \u7684\u547d\u4ee4\u884c\u65b9\u5f0f\u6bd4\u8f83\u4f20\u7edf\uff0c\u7c7b\u4f3cphylip\u7684\u4ea4\u4e92\u6a21\u5f0f\uff0c\u548c\u5f53\u524d\u8bb8\u591a\u9ad8\u901a\u91cf\u6d4b\u5e8f\u5de5\u5177\u7684\u53c2\u6570\u8bbe\u7f6e\u7b49\u4e0d\u4e00\u81f4\uff0c\u52a0\u4e0a\u8bb8\u591a\u65b0\u7684\u5de5\u5177\u4ee3\u66ff\uff0c\u56e0\u6b64\u4f7f\u7528\u7684\u673a\u4f1a\u4e0d\u662f\u5f88\u591a\u3002\u8fd9\u91cc\u4ecb\u7ecd\u90e8\u5206\u4e0e\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u5206\u6790\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\uff0c\u6240\u6709\u7684\u8f6f\u4ef6\u548c\u5176\u6587\u6863\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u3002","title":"EMBOSS"},{"location":"book/C01_Common-Utility/04_emboss/#1-emboss","text":"# ubuntu \u5305\u542b emboss \u53d1\u884c\u7248 $ sudo apt install emboss # \u901a\u8fc7 conda \u5b89\u88c5 $ conda create -n emboss emboss $ conda activate emboss EMBOSS \u5de5\u5177\u96c6\u5305\u542b\u4f17\u591a\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u96c6\u6210\u5230\u5206\u6790\u5de5\u5177\u6d41\u4e2d\u3002EMBOSS \u4e2d\u7684\u8bb8\u591a\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u8fdc\u7a0b\u6570\u636e\u5e93\uff0c\u4f46\u8fd9\u9700\u8981\u9ed8\u8ba4\u914d\u7f6e\u3002\u5982\u679c\u662f\u901a\u8fc7 conda \u5b89\u88c5\uff0c\u5219\u8981\u5c06\u6240\u5728conda\u865a\u62df\u73af\u5883\u8def\u5f84\u4e2d\u7684 share/EMBOSS/emboss.default.template \u590d\u5236\u4e3a emboss.default \u3002\u5982\u679c\u662f\u901a\u8fc7\u7cfb\u7edf\u7ea7\u5b89\u88c5\uff0c\u8981\u5728\u5f53\u524d\u7528\u6237\u73af\u5883\u4e2d\u914d\u7f6e\u6570\u636e\u5e93\uff0c\u5219\u53ef\u4ee5\u5c06 emboss.default.template \u590d\u5236\u4e3a ~/.embossrc \u3002 # \u5efa\u7acb\u914d\u7f6e\u6587\u4ef6 ( emboss ) $ cd $CONDA_PREFIX /EMBOSS ( emboss ) $ cp emboss.default.template emboss.default ( emboss ) $ vim emboss.default # \u5c06\u9700\u8981\u6fc0\u6d3b\u7684\u6570\u636e\u5e93\u6ce8\u91ca\u7b26\u53f7\u53d6\u51fa\uff0c\u6bd4\u5982embl # \u67e5\u770b\u53ef\u4ee5\u4f7f\u7528\u7684\u6570\u636e\u5e93 ( emboss ) $ showdb","title":"1. \u5b89\u88c5 EMBOSS"},{"location":"book/C01_Common-Utility/04_emboss/#2","text":"","title":"2. \u4f7f\u7528"},{"location":"book/C01_Common-Utility/04_emboss/#_1","text":"wossname : EMBOSS \u5305\u542b\u4f17\u591a\u5e94\u7528\u7a0b\u5e8f\uff0c\u4e3a\u65b9\u4fbf\u67e5\u8be2\uff0c\u6709\u4e00\u4e2a\u4e13\u95e8\u7684\u7a0b\u5e8f wossname \u53ef\u4ee5\u67e5\u770b\u6240\u6709\u7a0b\u5e8f\u53ca\u529f\u80fd\u3002 # \u663e\u793a\u6240\u6709\u7a0b\u5e8f\u53ca\u529f\u80fd ( emboss ) $ wossname # \u663e\u793a\u67d0\u4e00\u4e2a\u7c7b\u522b\u7684\u7a0b\u5e8f # \u663e\u793aalignment\u6bd4\u5bf9\u76f8\u5173\u7684\u5e94\u7528\u7a0b\u5e8f ( emboss ) $ wossname alignment # \u6309\u529f\u80fd\u5206\u7ec4\u663e\u793a\u5e94\u7528 ( emboss ) $ wossname -search \"\" | less # \u6309\u5b57\u6bcd\u987a\u5e8f\u663e\u793a\u5e94\u7528 ( emboss ) $ wossname -search \"\" -alphabetic | less","title":"\u67e5\u770b\u5404\u4e2a\u7a0b\u5e8f"},{"location":"book/C01_Common-Utility/04_emboss/#_2","text":"showdb : \u663e\u793a\u53ef\u7528\u7684\u6570\u636e\u5e93 dbtell : \u663e\u793a\u6570\u636e\u5e93\u76f8\u5173\u4fe1\u606f # \u663e\u793a\u5f53\u524d\u53ef\u7528\u6570\u636e\u5e93 ( emboss ) $ showdb -full # \u663e\u793aembl\u6570\u636e\u5e93\u4fe1\u606f ( emboss ) $ dbtell embl","title":"\u6570\u636e\u5e93\u76f8\u5173"},{"location":"book/C01_Common-Utility/04_emboss/#_3","text":"seqret : \u751f\u6210\u5e8f\u5217\u6216\u683c\u5f0f\u5316\u5e8f\u5217 # \u8bfb\u5165\u5e8f\u5217\uff0c\u4ee560\u5b57\u7b26\u4e3a\u957f\u5ea6\u5c06\u5176\u683c\u5f0f\u5316\u4e3a\u89c4\u8303\u7684fasta\u683c\u5f0f\u6570\u636e ( emboss ) $ seqret 1 .fas 2 .fas # \u5e8f\u5217\u4e2a\u662f\u8f6c\u6362 fasta \u683c\u5f0f\u8f6c\u6362\u4e3a\u5176\u4ed6\u683c\u5f0f ( emboss ) $ seqret fasta::1.fas gcg::1.gcg # \u76f4\u63a5\u4ece\u670d\u52a1\u5668\u8bfb\u53d6\u5e8f\u5217 ( emboss ) $ seqret embl:x52524 # \u901a\u8fc7\u4ea4\u4e92\u65b9\u5f0f\u8fdb\u884c\u64cd\u4f5c ( emboss ) $ seqret Read and write ( return ) sequences Input ( gapped ) sequence ( s ) : <--- \u8f93\u5165\u5e8f\u5217\u6587\u4ef6\u540d\u79f0 output sequence ( s ) [ ... ] : <--- \u8f93\u5165\u5e8f\u5217\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u79f0 showfeat : \u663e\u793a\u5e8f\u5217\u4fe1\u606f # \u663e\u793a\u7ec4\u88c5\u5b50\u5404\u4e2a contigs \u957f\u5ea6 ( emboss ) $ showfeat assembly.fasta result.showfeat ( emboss ) $ less result.showfeat transeq : DNA/RNA\u5e8f\u5217\u7ffb\u8bd1\u6210\u6c28\u57fa\u9178\u5e8f\u5217\uff0c\u6587\u4ef6\u4ee5 .pep \u540e\u7f00\u4fdd\u5b58 backtranseq : \u6c28\u57fa\u9178\u5e8f\u5217\u8f6c\u6362\u6210DNA\u5e8f\u5217\u3002 # fasta\u4e2a\u662f\u7684DNA\u5e8f\u5217\u8f6c\u6362\u6210\u6c28\u57fa\u9178\u5e8f\u5217 ( emboss ) $ transeq input.fasta output.pep # \u5c06 input.pep \u6c28\u57fa\u9178\u5e8f\u5217\u8f6c\u6362\u6210\u78b1\u57fa\u683c\u5f0f\u4fdd\u5b58\u6210 output.fas DNA\u5e8f\u5217 ( emboss ) $ backtranseq input.pep output.fas","title":"\u5e8f\u5217\u5904\u7406"},{"location":"book/C01_Common-Utility/04_emboss/#_4","text":"eprimer3 : primersearch :","title":"\u5f15\u7269\u8bbe\u8ba1"},{"location":"book/C01_Common-Utility/04_emboss/#_5","text":"\u53cc\u5e8f\u5217(Pairwise Alignment)\u6bd4\u5bf9\u7684\u8f6f\u4ef6 needle : local alignment \u5e8f\u5217\u6bd4\u5bf9 water : global alignment \u5e8f\u5217\u6bd4\u5bf9\uff0c\u57fa\u4e8e water-smith \u7b97\u6cd5\u3002 # \u5bf92\u6761\u5e8f\u5217 seq1.fas \u548c seq2.fas \u8fdb\u884c\u5168\u5c40\u6bd4\u5bf9\uff0c\u751f\u6210 seq1v2 alignment ( emboss ) $ water seq1.fas seq2.fas seq1v2.sw ( emboss ) $ needle seq1.fas seq2.fas seq1v2.nl needleall","title":"\u53cc\u5e8f\u5217\u6bd4\u5bf9"},{"location":"book/C01_Common-Utility/04_emboss/#_6","text":"emma : \u57fa\u4e8e clustalW \u7684\u591a\u5e8f\u5217\u6bd4\u5bf9\u7a0b\u5e8f edialign : Local \u591a\u5e8f\u5217\u6bd4\u5bf9 ( emboss ) $ emma msa1.fas msa1.phy ( emboss ) $ edialign","title":"\u591a\u5e8f\u5217\u6bd4\u5bf9"},{"location":"book/C01_Common-Utility/04_emboss/#_7","text":"density : \u7ed8\u5236\u6838\u9178\u5bc6\u5ea6\u56fe\u3002 # \u751f\u6210\u5e8f\u5217\u5bc6\u5ea6\u56fe ( emboss ) $ density -seqall input.fasta -display D -gragh ps","title":"\u6570\u636e\u53ef\u89c6\u5316"},{"location":"book/C01_Common-Utility/04_emboss/#_8","text":"\u5177\u4f53\u4fe1\u606f\u53c2\u89c1\uff1a \u5de5\u5177\u5217\u8868 \u7a0b\u5e8f\u540d\u79f0 \u7528\u9014 aaindexextract \u4eceAAINDEX\u4e2d\u63d0\u53d6\u6c28\u57fa\u9178\u5c5e\u6027 abiview \u663e\u793a ABI \u6d4b\u5e8f\u6570\u636e\u5cf0\u503c acdc \u6d4b\u8bd5 ACD \u6587\u4ef6 acdpretty \u4fee\u6b63 ACD \u683c\u5f0f\u6587\u4ef6 acdtable \u4ece ACD \u6587\u4ef6\u5e94\u7528\u4e2d\u751f\u6210 HTML \u683c\u5f0f\u7684\u8868\u683c acdtrace Trace processing of an application ACD file (for testing) acdvalid Validate an application ACD file aligncopy Read and write alignments aligncopypair Read and write pairs from alignments antigenic Find antigenic sites in proteins assemblyget Get assembly of sequence reads backtranambig Back-translate a protein sequence to ambiguous nucleotide sequence backtranseq Back-translate a protein sequence to a nucleotide sequence banana Plot bending and curvature data for B-DNA biosed Replace or delete sequence sections btwisted Calculate the twisting in a B-DNA sequence cachedas Generate server cache file for DAS servers or for the DAS registry cachedbfetch Generate server cache file for Dbfetch/WSDbfetch data sources cacheebeyesearch Generate server cache file for EB-eye search domains cacheensembl Generate server cache file for an Ensembl server cai \u8ba1\u7b97 condon adaptation index chaos Draw a chaos game representation plot for a nucleotide sequence charge Draw a protein charge plot checktrans Report STOP codons and ORF statistics of a protein chips Calculate Nc codon usage statistic cirdna Draw circular map of DNA constructs codcmp Codon usage table comparison codcopy Copy and reformat a codon usage table coderet Extract CDS, mRNA and translations from feature tables compseq Calculate the composition of unique words in sequences cons Create a consensus sequence from a multiple alignment consambig Create an ambiguous consensus sequence from a multiple alignment cpgplot Identify and plot CpG islands in nucleotide sequence(s) cpgreport Identify and report CpG-rich regions in nucleotide sequence(s) cusp Create a codon usage table from nucleotide sequence(s) cutgextract Extract codon usage tables from CUTG database cutseq Remove a section from a sequence dan Calculate nucleic acid melting temperature dbiblast Index a BLAST database dbifasta Index a fasta file database dbiflat Index a flat file database dbigcg Index a GCG formatted database dbtell Display information about a public database dbxcompress Compress an uncompressed dbx index dbxedam Index the EDAM ontology using b+tree indices dbxfasta Index a fasta file database using b+tree indices dbxflat Index a flat file database using b+tree indices dbxgcg Index a GCG formatted database using b+tree indices dbxobo Index an obo ontology using b+tree indices dbxreport Validate index and report internals for dbx databases dbxresource Index a data resource catalogue using b+tree indices dbxstat Dump statistics for dbx databases dbxtax Index NCBI taxonomy using b+tree indices dbxuncompress Uncompress a compressed dbx index degapseq Remove non-alphabetic (e.g. gap) characters from sequences density Draw a nucleic acid density plot descseq Alter the name or description of a sequence diffseq Compare and report features of two similar sequences distmat Create a distance matrix from a multiple sequence alignment dotmatcher Draw a threshold dotplot of two sequences dotpath Draw a non-overlapping wordmatch dotplot of two sequences dottup Display a wordmatch dotplot of two sequences dreg Regular expression search of nucleotide sequence(s) drfinddata Find public databases by data type drfindformat Find public databases by format drfindid Find public databases by identifier drfindresource Find public databases by resource drget Get data resource entries drtext Get data resource entries complete text edamdef Find EDAM ontology terms by definition edamhasinput Find EDAM ontology terms by has_input relation edamhasoutput Find EDAM ontology terms by has_output relation edamisformat Find EDAM ontology terms by is_format_of relation edamisid Find EDAM ontology terms by is_identifier_of relation edamname Find EDAM ontology terms by name edialign Local multiple alignment of sequences einverted Find inverted repeats in nucleotide sequences embossdata Find and retrieve EMBOSS data files embossupdate Checks for more recent updates to EMBOSS embossversion Report the current EMBOSS version number emma Multiple sequence alignment (ClustalW wrapper) emowse Search protein sequences by digest fragment molecular weight entret Retrieve sequence entries from flatfile databases and files epestfind Find PEST motifs as potential proteolytic cleavage sites eprimer3 Pick PCR primers and hybridization oligos eprimer32 Pick PCR primers and hybridization oligos equicktandem Find tandem repeats in nucleotide sequences est2genome Align EST sequences to genomic DNA sequence etandem Find tandem repeats in a nucleotide sequence extractalign Extract regions from a sequence alignment extractfeat Extract features from sequence(s) extractseq Extract regions from a sequence featcopy Read and write a feature table featmerge Merge two overlapping feature tables featreport Read and write a feature table feattext Return a feature table original text findkm Calculate and plot enzyme reaction data freak Generate residue/base frequency table or plot fuzznuc Search for patterns in nucleotide sequences fuzzpro Search for patterns in protein sequences fuzztran Search for patterns in protein sequences (translated) garnier Predict protein secondary structure using GOR method geecee Calculate fractional GC content of nucleic acid sequences getorf Find and extract open reading frames (ORFs) godef Find GO ontology terms by definition goname Find GO ontology terms by name helixturnhelix Identify nucleic acid-binding motifs in protein sequences hmoment Calculate and plot hydrophobic moment for protein sequence(s) iep Calculate the isoelectric point of proteins infoalign Display basic information about a multiple sequence alignment infoassembly Display information about assemblies infobase Return information on a given nucleotide base inforesidue Return information on a given amino acid residue infoseq Display basic information about sequences isochore Plot isochores in DNA sequences jaspextract Extract data from JASPAR jaspscan Scan DNA sequences for transcription factors lindna Draw linear maps of DNA constructs listor Write a list file of the logical OR of two sets of sequences makenucseq Create random nucleotide sequences makeprotseq Create random protein sequences marscan Find matrix/scaffold recognition (MRS) signatures in DNA sequences maskambignuc Mask all ambiguity characters in nucleotide sequences with N maskambigprot Mask all ambiguity characters in protein sequences with X maskfeat Write a sequence with masked features maskseq Write a sequence with masked regions matcher Waterman-Eggert local alignment of two sequences megamerger Merge two large overlapping DNA sequences merger Merge two overlapping sequences msbar Mutate a sequence mwcontam Find weights common to multiple molecular weights files mwfilter Filter noisy data from molecular weights file needle Needleman-Wunsch \u5168\u5c40\u6bd4\u5bf9 needleall \u4e24\u4e24\u53cc\u5e8f\u5217\u6bd4\u5bf9 newcpgreport Identify CpG islands in nucleotide sequence(s) newcpgseek Identify and report CpG-rich regions in nucleotide sequence(s) newseq Create a sequence file from a typed-in sequence nohtml Remove mark-up (e.g. HTML tags) from an ASCII text file noreturn Remove carriage return from ASCII files nospace Remove whitespace from an ASCII text file notab Replace tabs with spaces in an ASCII text file notseq Write to file a subset of an input stream of sequences nthseq Write to file a single sequence from an input stream of sequences nthseqset Read and write (return) one set of sequences from many octanol Draw a White-Wimley protein hydropathy plot oddcomp Identify proteins with specified sequence word composition ontocount Count ontology term(s) ontoget Get ontology term(s) ontogetcommon Get common ancestor for terms ontogetdown Get ontology term(s) by parent id ontogetobsolete Get ontology ontology terms ontogetroot Get ontology root terms by child identifier ontogetsibs Get ontology term(s) by id with common parent ontogetup Get ontology term(s) by id of child ontoisobsolete Report whether an ontology term id is obsolete ontotext Get ontology term(s) original full text palindrome Find inverted repeats in nucleotide sequence(s) pasteseq Insert one sequence into another patmatdb Search protein sequences with a sequence motif patmatmotifs Scan a protein sequence with motifs from the PROSITE database pepcoil Predict coiled coil regions in protein sequences pepdigest Report on protein proteolytic enzyme or reagent cleavage sites pepinfo Plot amino acid properties of a protein sequence in parallel pepnet Draw a helical net for a protein sequence pepstats Calculate statistics of protein properties pepwheel Draw a helical wheel diagram for a protein sequence pepwindow Draw a hydropathy plot for a protein sequence pepwindowall Draw Kyte-Doolittle hydropathy plot for a protein alignment plotcon Plot conservation of a sequence alignment plotorf Plot potential open reading frames in a nucleotide sequence polydot Draw dotplots for all-against-all comparison of a sequence set preg Regular expression search of protein sequence(s) prettyplot Draw a sequence alignment with pretty formatting prettyseq Write a nucleotide sequence and its translation to file primersearch Search DNA sequences for matches with primer pairs printsextract Extract data from PRINTS database for use by pscan profit Scan one or more sequences with a simple frequency matrix prophecy Create frequency matrix or profile from a multiple alignment prophet Scan one or more sequences with a Gribskov or Henikoff profile prosextract Process the PROSITE motif database for use by patmatmotifs pscan Scan protein sequence(s) with fingerprints from the PRINTS database psiphi Calculates phi and psi torsion angles from protein coordinates rebaseextract Process the REBASE database for use by restriction enzyme applications recoder Find restriction sites to remove (mutate) with no translation change redata Retrieve information from REBASE restriction enzyme database refseqget Get reference sequence remap Display restriction enzyme binding sites in a nucleotide sequence restover Find restriction enzymes producing a specific overhang restrict Report restriction enzyme cleavage sites in a nucleotide sequence revseq Reverse and complement a nucleotide sequence seealso Find programs with similar function to a specified program seqcount Read and count sequences seqmatchall All-against-all word comparison of a sequence set seqret Read and write (return) sequences seqretsetall Read and write (return) many sets of sequences seqretsplit Read sequences and write them to individual files seqxref Retrieve all database cross-references for a sequence entry seqxrefget Retrieve all cross-referenced data for a sequence entry servertell Display information about a public server showalign Display a multiple sequence alignment in pretty format showdb \u663e\u793a EMBOSS \u5de5\u5177\u652f\u6301\u7684\u6570\u636e\u5e93\uff0c\u4e00\u4e9b\u5de5\u5177\u53ef\u4ee5\u76f4\u63a5\u64cd\u4f5c\u8fdc\u7a0b\u6570\u636e\u5e93 showfeat \u663e\u793a\u5e8f\u5217\u7684\u5c5e\u6027\uff0c\u5982\u957f\u5ea6\u7b49\u4fe1\u606f showorf Display a nucleotide sequence and translation in pretty format showpep Display protein sequences with features in pretty format showseq Display sequences with features in pretty format showserver Display information on configured servers shuffleseq Shuffle a set of sequences maintaining composition sigcleave Report on signal cleavage sites in a protein sequence silent Find restriction sites to insert (mutate) with no translation change sirna Find siRNA duplexes in mRNA sixpack Display a DNA sequence with 6-frame translation and ORFs sizeseq Sort sequences by size skipredundant Remove redundant sequences from an input set skipseq Read and write (return) sequences, skipping first few splitsource Split sequence(s) into original source sequences splitter Split sequence(s) into smaller sequences stretcher Needleman-Wunsch rapid global alignment of two sequences stssearch Search a DNA database for matches with a set of STS primers supermatcher Calculate approximate local pair-wise alignments of larger sequences syco Draw synonymous codon usage statistic plot for a nucleotide sequence taxget Get taxon(s) taxgetdown Get descendants of taxon(s) taxgetrank Get parents of taxon(s) taxgetspecies Get all species under taxon(s) taxgetup Get parents of taxon(s) tcode Identify protein-coding regions using Fickett TESTCODE statistic textget Get text data entries textsearch Search the textual description of sequence(s) tfextract Process TRANSFAC transcription factor database for use by tfscan tfm Display full documentation for an application tfscan Identify transcription factor binding sites in DNA sequences tmap Predict and plot transmembrane segments in protein sequences tranalign Generate an alignment of nucleic coding regions from aligned proteins transeq Translate nucleic acid sequences trimest Remove poly-A tails from nucleotide sequences trimseq Remove unwanted characters from start and end of sequence(s) trimspace Remove extra whitespace from an ASCII text file twofeat Find neighbouring pairs of features in sequence(s) union Concatenate multiple sequences into a single sequence urlget Get URLs of data resources variationget Get sequence variations vectorstrip Remove vectors from the ends of nucleotide sequence(s) water Smith-Waterman local alignment of sequences whichdb Search all sequence databases for an entry and retrieve it wobble Plot third base position variability in a nucleotide sequence wordcount Count and extract unique words in molecular sequence(s) wordfinder Match large sequences against one or more other sequences wordmatch Find regions of identity (exact matches) of two sequences wossdata Find programs by EDAM data wossinput Find programs by EDAM input data wossname Find programs by keywords in their short description wossoperation Find programs by EDAM operation wossoutput Find programs by EDAM output data wossparam Find programs by EDAM parameter wosstopic Find programs by EDAM topic yank Add a sequence reference (a full USA) to a list file","title":"\u5de5\u5177\u5217\u8868"},{"location":"book/C01_Common-Utility/05_blast/","text":"Blast \u4f7f\u7528\u8bf4\u660e \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Blast \u5de5\u5177\u53ef\u4ee5\u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u6bd4\u5bf9\uff0c\u5728 NGS \u6570\u636e\u5206\u6790\u4e2d\u7ecf\u5e38\u4f1a\u88ab\u4f7f\u7528\u5230\uff0c\u7279\u522b\u662f\u4e00\u4e9b\u5de5\u5177\u4e2d\u9700\u8981 Blast \u6216 Blast+ \u7a0b\u5e8f\u6765\u4f5c\u4e3a\u7b2c\u4e09\u65b9\u6bd4\u5bf9\u5de5\u5177\u8c03\u7528\u3002\u62ff\u5230\u6d4b\u5e8f\u5b8c\u6210\u7684\u8349\u56fe\u540e\uff0c\u56e0\u4e3a\u57fa\u56e0\u7ec4\u6570\u636e\u8f83\u5927\uff0c\u8fde\u63a5NCBI\u7f51\u7ad9\u5f80\u5f80\u53c8\u975e\u5e38\u7f13\u6162\uff0c\u6240\u4ee5\u8981\u505a Blast \u6bd4\u5bf9\u7684\u8bdd\u90fd\u9700\u8981\u505a Local Blast\u3002\u8fd9\u91cc\u4ecb\u7ecd2\u4e2a\u65b9\u5f0f\u6765\u5b9e\u73b0\uff1a \u7528\u547d\u4ee4\u884c\u8fdb\u884c\u672c\u5730 Blast \u5feb\u901f\u6784\u5efa Blast Web \u670d\u52a1 1. Blast \u539f\u7406 \u00b6 2. \u5728\u7ebf blast \u00b6 3. \u57fa\u4e8e\u547d\u4ee4\u884c\u7684 Local Blast \u00b6 Blast \u548c NCBI Blast \u662f NCBI \u5148\u540e\u53d1\u5e03\u7684\u5e8f\u5217\u6bd4\u5bf9\u5de5\u5177\u3002 **B**asic **L**ocal **A**lignment **S**earch **T**ool \u5de5\u5177\u6700\u65e9\u516c\u5e03\u4e0e1989\u5e74\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u79f0\u547c\u5176\u4e3a Blast \u30022009\u5e74 NCBI \u4e3a\u4e86\u514b\u670d Blast \u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u4e3a\u4ee5\u540e\u5f00\u53d1\u65b9\u4fbf\uff0c\u91cd\u5199\u4ee3\u7801\uff0c\u65b0\u7684 NCBI Blast \uff08\u4e5f\u79f0\u5176\u4e3a Blast+ \uff09\u5de5\u5177\u5e94\u8fd0\u800c\u751f\u3002\u65b0\u7248 Blast \u5de5\u5177\u5728\u901f\u5ea6\u4e0a\u6709\u4e86\u63d0\u5347\uff0c\u5728\u8f93\u5165\u8f93\u51fa\u4e0a\u4e5f\u66f4\u4e3a\u7075\u6d3b\u3002 [Blast](ftp://ftp.ncbi.nlm.nih.gov/blast/) \u5de5\u5177\u6700\u65b0\u7248\u662f2012\u5e74\u53d1\u5e03\u7684**2.2.26**\uff0c\u76ee\u524d\u5df2\u4e0d\u518d\u63d0\u4f9b\u66f4\u65b0\u3002 NCBI Blast \u76ee\u524d\u6700\u65b0\u7248\u4e3a**2.9.0**\u3002\u8981\u533a\u52062\u8005\u4e5f\u5f88\u7b80\u5355\uff0c2\u4e2a\u7248\u672c\u7684\u7a0b\u5e8f\u8fd0\u884c\u65b9\u5f0f\u4e0d\u540c\uff1a Blast \u662f\u901a\u8fc7 blastall -p \u7684\u65b9\u5f0f\u8c03\u7528\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u7684\uff0c\u800c Blast+ \u5219\u662f\u76f4\u63a5\u4f7f\u7528blastn\u6216blastp\u7b49\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u3002\u53e6\u5916\u524d\u8005\u7528formatdb\u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u5e93\uff0c\u540e\u8005\u7528makeblastdb\u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u3002 3.1 Blast \u00b6 Blast\u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5 # Ubuntu \u4e2d\u5b89\u88c5 blast $ sudo apt install blast2 # \u6216\u8005\u76f4\u63a5\u4e0b\u8f7dNCBI Linux\u9884\u7f16\u8bd1\u5305\uff0c\u5e76\u89e3\u538b\u7f29\u5b89\u88c5 $ wget ftp://ftp.ncbi.nih.gov/blast/executables/release/2.2.26/blast-2.2.26-x64-linux.tar.gz $ tar -zxvf blast-2.2.26-x64 -C ~/app # \u5728\u7cfb\u7edf\u53ef\u6267\u884c\u8def\u5f84\u4e2d\u6dfb\u52a0 blast \u94fe\u63a5 $ sudo ln -s ~/app/blast-2.2.26-x64/blastall /usr/local/sbin # \u901a\u8fc7 conda \u5b89\u88c5 blast ( blast ) $ conda install blast-legacy \u8fd0\u884c Blast Blast \u901a\u8fc7\u8c03\u7528 blastall \u7a0b\u5e8f\u6765\u8c03\u7528\u4e0d\u540c\u5b50\u7a0b\u5e8f\u5b9e\u73b0\u4e0d\u540c\u7c7b\u578b\u5e8f\u5217\u6bd4\u5bf9\u3002\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165 blastall \uff0c\u4f1a\u6253\u5370\u51fa\u4e00\u4efd\u53c2\u6570\u5217\u8868\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 man blast \u6765\u67e5\u770b Blast \u5de5\u5177\u7684\u7528\u6237\u624b\u518c\u3002 # \u8fd0\u884c\u4e3b\u547d\u4ee4 $ blastall \u53c2\u6570\u8bf4\u660e\uff1a -p: \u6307\u5b9a\u8981\u8fd0\u884c\u7684 blast \u7a0b\u5e8f\u3002\u53ef\u4ee5\u8c03\u7528\u7684\u6709: ` blastp ` \u5c06\u6c28\u57fa\u9178\u5e8f\u5217\u4e0e\u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9 ` blastn ` \u5c06\u6838\u9178\u5e8f\u5217\u4e0e\u6838\u9178\u6570\u636e\u5e93\u6bd4\u5bf9 ` blastx ` \u5c06\u6838\u9178\u5e8f\u5217\u7ffb\u8bd1\u6210\u86cb\u767d\u5e8f\u5217\u540e\u4e0e\u975e\u5197\u4f59 ( nr ) \u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9 ` psitblastn ` ` tblastn ` ` tblastx ` -d: \u6307\u5b9a\u8981\u8c03\u7528\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u503c\u662f\u975e\u5197\u4f59 ( nr ) \u6570\u636e\u5e93\u3002\u672c\u5730 Blast \u6bd4\u5bf9\u4e00\u822c\u6765\u8bf4\u90fd\u662f\u8c03\u7528 formatdb \u683c\u5f0f\u5316\u7684\u6570\u636e\u5e93\u3002 -i: \u8f93\u5165\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u8f93\u5165\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982 ` -i seq.fasta ` -o: \u8f93\u51fa\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u6253\u5370\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982 ` -o result.txt ` -e: \u671f\u671b\u503c\u3002 -T: \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3aF ( False ) \uff0c\u60f3\u8f93\u51faHTML\u683c\u5f0f\u7684\u53ef\u4ee5\u7528 ` -T T ` -M: \u77e9\u9635\u7b97\u6cd5\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c\u662f ` BLOSUM62 ` -n: \u5982\u679c\u60f3\u4f7f\u7528MegaBlast\uff0c\u5c31\u8bbe\u7f6e ` -n T ` -b: \u6570\u636e\u5e93\u4e2d\u7684\u6bd4\u5bf9\u7ed3\u679c\u663e\u793a\u6761\u76ee\u6570\uff0c\u9ed8\u8ba4\u662f250\u6761\u8bb0\u5f55\u3002 -m: \u6bd4\u5bf9\u7ed3\u679c\u7684\u8f93\u51fa\u663e\u793a\u65b9\u5f0f\uff0c\u503c\u4e3a0~11\uff0c\u9ed8\u8ba4\u662f0\u3002\u5404\u4e2a\u6570\u5b57\u542b\u4e49\u89c1\u4e0b\u8868\u3002 \u53c2\u6570 \u542b\u4e49 0 pairwise 1 query-anchored showing identities 2 query-anchored no identities 3 flat query-anchored, show identities 4 flat query-anchored, no identities 5 query-anchored no identities and blunt ends 6 flat query-anchored, no identities and blunt ends 7 XML Blast output 8 tabular 9 tabular with comment lines 10 ASN, text 11 ASN, binary [Integer] \u5176\u4ed6\u53c2\u6570\u53c2\u89c1 man blast \u3002 \u5e94\u7528\u4e3e\u4f8b: Local blast\u4f8b\u5b50\uff1a # \u4f7f\u7528 custom_genome.fasta \u6587\u4ef6\u4f5c\u4e3a\u6570\u636e\u5e93 # formatdb \u683c\u5f0f\u5316\u4f5c\u4e3a\u672c\u5730\u6570\u636e\u5e93 $ formatdb -i custom_genome.fasta -o T -p F # \u4f7f\u7528 blastn \u5bf9 myseq.fasta \u5e8f\u5217\u8fdb\u884c\u6bd4\u5bf9 $ blastall -i myseq.fasta -d custom_genome.fasta -p blastn 3.2 Blast+ \u00b6 \u4e0b\u8f7d\u5b89\u88c5 NCBI Blast+ # Ubuntu \u7cfb\u7edf\u4e2d\u5b89\u88c5 ncbi blast $ sudo apt install ncbi-blast+ # Archlinux \u7cfb\u7edf\u4e2d\u5b89\u88c5 ncbi blast $ sudo pacman -S \u6784\u5efa\u6570\u636e\u5e93 # \u5c06\u5e8f\u5217\u6587\u4ef6 data/database.fasta \u683c\u5f0f\u5316\u6210\u6570\u636e\u5e93 # \u6570\u636e\u7c7b\u578b\u4e3a\u6838\u9178\uff0c\u5219\u53c2\u6570\u4e3a -dbtype nucl $ makeblastdb -in data/database.fasta -dbtype nucl -parse_seqids \u8fd0\u884c blast # \u4f7f\u7528 blastn \u7a0b\u5e8f\u6bd4\u5bf9 myseq.fasta \u5e8f\u5217\u3002 $ blastn -query myseq.fasta -db data/database.fasta -out result.txt # \u5e38\u7528\u7b80\u5355\u8f93\u51fa\u65b9\u5f0f $ blastn -query myseq.fasta -db data/database.fasta -outfmt 6 -out result.txt http://www.personal.psu.edu/iua1/courses/files/2014/lecture-12.pdf 4. \u6784\u5efa\u672c\u5730\u7684 blast web \u670d\u52a1 \u00b6 4.1 blastkit \u00b6 blastkit \u662f\u4e00\u4e2a\u5305\u542bwebserver\u7b49\u5de5\u5177\u7684blast\u5de5\u5177\u96c6\u3002 \u5b89\u88c5\u4f9d\u8d56\u5305 $ conda create -n blastkit $ conda activate blastkit ( blastkit ) $ pip install pygr ( blastkit ) $ pip install whoosh ( blastkit ) $ pip install git+https://github.com/ctb/pygr-draw.git ( blastkit ) $ pip install git+https://github.com/ged-lab/screed.git ( blastkit ) $ conda install lighttpd ( blastkit ) $ conda install blast-legacy \u5bf9lighttpd webserver\u8fdb\u884c\u914d\u7f6e $ cd /etc/lighttpd/conf-enabled $ sudo ln -fs ../conf-available/10-cgi.conf ./ $ sudo echo 'cgi.assign = ( \".cgi\" => \"\" )' >> 10 -cgi.conf $ sudo echo 'index-file.names += ( \"index.cgi\" ) ' >> 10 -cgi.conf $ sudo /etc/init.d/lighttpd restart ( prokka ) $ conda install lighttpd ( prokka ) $ cd $HOME /.conda/etc/lighttpd/conf-enabled $ sudo ln -fs ../conf-available/10-cgi.conf ./ $ sudo echo 'cgi.assign = ( \".cgi\" => \"\" )' >> 10 -cgi.conf $ sudo echo 'index-file.names += ( \"index.cgi\" ) ' >> 10 -cgi.conf $ lighttpd restart \u5b89\u88c5 blastkit # \u514b\u9686\u8f6f\u4ef6\u4ed3\u5e93 blastkit $ git clone https://github.com/ctb/blastkit.git -b ec2 $ cd blastkit/www # \u5c06www\u8def\u5f84\u94fe\u63a5\u5230 /var \u4e2d $ sudo ln -fs $PWD /var/www/blastkit # \u5efa\u7acb\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 $ mkdir files $ chmod a+rxwt files # $ chmod +x /root $ cd .. # \u8fd0\u884c\u68c0\u6d4b\u811a\u672c $ python ./check.py #\u5982\u679c\u5b89\u88c5\u987a\u5229\uff0c\u5c31\u4f1a\u63d0\u793a\u4e00\u5207\u5df2\u7ecf\u51c6\u5907\u5b8c\u6bd5\u3002\u63a5\u4e0b\u6765\u8981\u51c6\u5907\u6570\u636e\u3002 # \u5c06\u5927\u80a0\u57c3\u5e0c\u83ccDNA\u5e8f\u5217\u6587\u4ef6contigs.fa\u590d\u5236\u5230\u6570\u636e\u5e93\u76ee\u5f55\u4e0b $ cp ~/contigs.fa blastkit/db/db.fa # \u4f7f\u7528 formatdb \u683c\u5f0f\u5316\u6570\u636e\u5e93 $ formatdb -i db/db.fa -o T -p F # \u5efa\u7acb\u7d22\u5f15 $ python index-db.py db/db.fa Reference \u00b6 Blastkit Caltech workshop Angus","title":"05. Blast \u6bd4\u5bf9"},{"location":"book/C01_Common-Utility/05_blast/#blast","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Blast \u5de5\u5177\u53ef\u4ee5\u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u6bd4\u5bf9\uff0c\u5728 NGS \u6570\u636e\u5206\u6790\u4e2d\u7ecf\u5e38\u4f1a\u88ab\u4f7f\u7528\u5230\uff0c\u7279\u522b\u662f\u4e00\u4e9b\u5de5\u5177\u4e2d\u9700\u8981 Blast \u6216 Blast+ \u7a0b\u5e8f\u6765\u4f5c\u4e3a\u7b2c\u4e09\u65b9\u6bd4\u5bf9\u5de5\u5177\u8c03\u7528\u3002\u62ff\u5230\u6d4b\u5e8f\u5b8c\u6210\u7684\u8349\u56fe\u540e\uff0c\u56e0\u4e3a\u57fa\u56e0\u7ec4\u6570\u636e\u8f83\u5927\uff0c\u8fde\u63a5NCBI\u7f51\u7ad9\u5f80\u5f80\u53c8\u975e\u5e38\u7f13\u6162\uff0c\u6240\u4ee5\u8981\u505a Blast \u6bd4\u5bf9\u7684\u8bdd\u90fd\u9700\u8981\u505a Local Blast\u3002\u8fd9\u91cc\u4ecb\u7ecd2\u4e2a\u65b9\u5f0f\u6765\u5b9e\u73b0\uff1a \u7528\u547d\u4ee4\u884c\u8fdb\u884c\u672c\u5730 Blast \u5feb\u901f\u6784\u5efa Blast Web \u670d\u52a1","title":"Blast \u4f7f\u7528\u8bf4\u660e"},{"location":"book/C01_Common-Utility/05_blast/#1-blast","text":"","title":"1. Blast \u539f\u7406"},{"location":"book/C01_Common-Utility/05_blast/#2-blast","text":"","title":"2. \u5728\u7ebf blast"},{"location":"book/C01_Common-Utility/05_blast/#3-local-blast","text":"Blast \u548c NCBI Blast \u662f NCBI \u5148\u540e\u53d1\u5e03\u7684\u5e8f\u5217\u6bd4\u5bf9\u5de5\u5177\u3002 **B**asic **L**ocal **A**lignment **S**earch **T**ool \u5de5\u5177\u6700\u65e9\u516c\u5e03\u4e0e1989\u5e74\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u79f0\u547c\u5176\u4e3a Blast \u30022009\u5e74 NCBI \u4e3a\u4e86\u514b\u670d Blast \u7684\u4e0d\u8db3\u4e4b\u5904\uff0c\u4e3a\u4ee5\u540e\u5f00\u53d1\u65b9\u4fbf\uff0c\u91cd\u5199\u4ee3\u7801\uff0c\u65b0\u7684 NCBI Blast \uff08\u4e5f\u79f0\u5176\u4e3a Blast+ \uff09\u5de5\u5177\u5e94\u8fd0\u800c\u751f\u3002\u65b0\u7248 Blast \u5de5\u5177\u5728\u901f\u5ea6\u4e0a\u6709\u4e86\u63d0\u5347\uff0c\u5728\u8f93\u5165\u8f93\u51fa\u4e0a\u4e5f\u66f4\u4e3a\u7075\u6d3b\u3002 [Blast](ftp://ftp.ncbi.nlm.nih.gov/blast/) \u5de5\u5177\u6700\u65b0\u7248\u662f2012\u5e74\u53d1\u5e03\u7684**2.2.26**\uff0c\u76ee\u524d\u5df2\u4e0d\u518d\u63d0\u4f9b\u66f4\u65b0\u3002 NCBI Blast \u76ee\u524d\u6700\u65b0\u7248\u4e3a**2.9.0**\u3002\u8981\u533a\u52062\u8005\u4e5f\u5f88\u7b80\u5355\uff0c2\u4e2a\u7248\u672c\u7684\u7a0b\u5e8f\u8fd0\u884c\u65b9\u5f0f\u4e0d\u540c\uff1a Blast \u662f\u901a\u8fc7 blastall -p \u7684\u65b9\u5f0f\u8c03\u7528\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u7684\uff0c\u800c Blast+ \u5219\u662f\u76f4\u63a5\u4f7f\u7528blastn\u6216blastp\u7b49\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u3002\u53e6\u5916\u524d\u8005\u7528formatdb\u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u5e93\uff0c\u540e\u8005\u7528makeblastdb\u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u3002","title":"3. \u57fa\u4e8e\u547d\u4ee4\u884c\u7684 Local Blast"},{"location":"book/C01_Common-Utility/05_blast/#31-blast","text":"Blast\u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5 # Ubuntu \u4e2d\u5b89\u88c5 blast $ sudo apt install blast2 # \u6216\u8005\u76f4\u63a5\u4e0b\u8f7dNCBI Linux\u9884\u7f16\u8bd1\u5305\uff0c\u5e76\u89e3\u538b\u7f29\u5b89\u88c5 $ wget ftp://ftp.ncbi.nih.gov/blast/executables/release/2.2.26/blast-2.2.26-x64-linux.tar.gz $ tar -zxvf blast-2.2.26-x64 -C ~/app # \u5728\u7cfb\u7edf\u53ef\u6267\u884c\u8def\u5f84\u4e2d\u6dfb\u52a0 blast \u94fe\u63a5 $ sudo ln -s ~/app/blast-2.2.26-x64/blastall /usr/local/sbin # \u901a\u8fc7 conda \u5b89\u88c5 blast ( blast ) $ conda install blast-legacy \u8fd0\u884c Blast Blast \u901a\u8fc7\u8c03\u7528 blastall \u7a0b\u5e8f\u6765\u8c03\u7528\u4e0d\u540c\u5b50\u7a0b\u5e8f\u5b9e\u73b0\u4e0d\u540c\u7c7b\u578b\u5e8f\u5217\u6bd4\u5bf9\u3002\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165 blastall \uff0c\u4f1a\u6253\u5370\u51fa\u4e00\u4efd\u53c2\u6570\u5217\u8868\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 man blast \u6765\u67e5\u770b Blast \u5de5\u5177\u7684\u7528\u6237\u624b\u518c\u3002 # \u8fd0\u884c\u4e3b\u547d\u4ee4 $ blastall \u53c2\u6570\u8bf4\u660e\uff1a -p: \u6307\u5b9a\u8981\u8fd0\u884c\u7684 blast \u7a0b\u5e8f\u3002\u53ef\u4ee5\u8c03\u7528\u7684\u6709: ` blastp ` \u5c06\u6c28\u57fa\u9178\u5e8f\u5217\u4e0e\u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9 ` blastn ` \u5c06\u6838\u9178\u5e8f\u5217\u4e0e\u6838\u9178\u6570\u636e\u5e93\u6bd4\u5bf9 ` blastx ` \u5c06\u6838\u9178\u5e8f\u5217\u7ffb\u8bd1\u6210\u86cb\u767d\u5e8f\u5217\u540e\u4e0e\u975e\u5197\u4f59 ( nr ) \u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9 ` psitblastn ` ` tblastn ` ` tblastx ` -d: \u6307\u5b9a\u8981\u8c03\u7528\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u503c\u662f\u975e\u5197\u4f59 ( nr ) \u6570\u636e\u5e93\u3002\u672c\u5730 Blast \u6bd4\u5bf9\u4e00\u822c\u6765\u8bf4\u90fd\u662f\u8c03\u7528 formatdb \u683c\u5f0f\u5316\u7684\u6570\u636e\u5e93\u3002 -i: \u8f93\u5165\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u8f93\u5165\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982 ` -i seq.fasta ` -o: \u8f93\u51fa\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u6253\u5370\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982 ` -o result.txt ` -e: \u671f\u671b\u503c\u3002 -T: \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3aF ( False ) \uff0c\u60f3\u8f93\u51faHTML\u683c\u5f0f\u7684\u53ef\u4ee5\u7528 ` -T T ` -M: \u77e9\u9635\u7b97\u6cd5\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c\u662f ` BLOSUM62 ` -n: \u5982\u679c\u60f3\u4f7f\u7528MegaBlast\uff0c\u5c31\u8bbe\u7f6e ` -n T ` -b: \u6570\u636e\u5e93\u4e2d\u7684\u6bd4\u5bf9\u7ed3\u679c\u663e\u793a\u6761\u76ee\u6570\uff0c\u9ed8\u8ba4\u662f250\u6761\u8bb0\u5f55\u3002 -m: \u6bd4\u5bf9\u7ed3\u679c\u7684\u8f93\u51fa\u663e\u793a\u65b9\u5f0f\uff0c\u503c\u4e3a0~11\uff0c\u9ed8\u8ba4\u662f0\u3002\u5404\u4e2a\u6570\u5b57\u542b\u4e49\u89c1\u4e0b\u8868\u3002 \u53c2\u6570 \u542b\u4e49 0 pairwise 1 query-anchored showing identities 2 query-anchored no identities 3 flat query-anchored, show identities 4 flat query-anchored, no identities 5 query-anchored no identities and blunt ends 6 flat query-anchored, no identities and blunt ends 7 XML Blast output 8 tabular 9 tabular with comment lines 10 ASN, text 11 ASN, binary [Integer] \u5176\u4ed6\u53c2\u6570\u53c2\u89c1 man blast \u3002 \u5e94\u7528\u4e3e\u4f8b: Local blast\u4f8b\u5b50\uff1a # \u4f7f\u7528 custom_genome.fasta \u6587\u4ef6\u4f5c\u4e3a\u6570\u636e\u5e93 # formatdb \u683c\u5f0f\u5316\u4f5c\u4e3a\u672c\u5730\u6570\u636e\u5e93 $ formatdb -i custom_genome.fasta -o T -p F # \u4f7f\u7528 blastn \u5bf9 myseq.fasta \u5e8f\u5217\u8fdb\u884c\u6bd4\u5bf9 $ blastall -i myseq.fasta -d custom_genome.fasta -p blastn","title":"3.1 Blast"},{"location":"book/C01_Common-Utility/05_blast/#32-blast","text":"\u4e0b\u8f7d\u5b89\u88c5 NCBI Blast+ # Ubuntu \u7cfb\u7edf\u4e2d\u5b89\u88c5 ncbi blast $ sudo apt install ncbi-blast+ # Archlinux \u7cfb\u7edf\u4e2d\u5b89\u88c5 ncbi blast $ sudo pacman -S \u6784\u5efa\u6570\u636e\u5e93 # \u5c06\u5e8f\u5217\u6587\u4ef6 data/database.fasta \u683c\u5f0f\u5316\u6210\u6570\u636e\u5e93 # \u6570\u636e\u7c7b\u578b\u4e3a\u6838\u9178\uff0c\u5219\u53c2\u6570\u4e3a -dbtype nucl $ makeblastdb -in data/database.fasta -dbtype nucl -parse_seqids \u8fd0\u884c blast # \u4f7f\u7528 blastn \u7a0b\u5e8f\u6bd4\u5bf9 myseq.fasta \u5e8f\u5217\u3002 $ blastn -query myseq.fasta -db data/database.fasta -out result.txt # \u5e38\u7528\u7b80\u5355\u8f93\u51fa\u65b9\u5f0f $ blastn -query myseq.fasta -db data/database.fasta -outfmt 6 -out result.txt http://www.personal.psu.edu/iua1/courses/files/2014/lecture-12.pdf","title":"3.2 Blast+"},{"location":"book/C01_Common-Utility/05_blast/#4-blast-web","text":"","title":"4. \u6784\u5efa\u672c\u5730\u7684 blast web \u670d\u52a1"},{"location":"book/C01_Common-Utility/05_blast/#41-blastkit","text":"blastkit \u662f\u4e00\u4e2a\u5305\u542bwebserver\u7b49\u5de5\u5177\u7684blast\u5de5\u5177\u96c6\u3002 \u5b89\u88c5\u4f9d\u8d56\u5305 $ conda create -n blastkit $ conda activate blastkit ( blastkit ) $ pip install pygr ( blastkit ) $ pip install whoosh ( blastkit ) $ pip install git+https://github.com/ctb/pygr-draw.git ( blastkit ) $ pip install git+https://github.com/ged-lab/screed.git ( blastkit ) $ conda install lighttpd ( blastkit ) $ conda install blast-legacy \u5bf9lighttpd webserver\u8fdb\u884c\u914d\u7f6e $ cd /etc/lighttpd/conf-enabled $ sudo ln -fs ../conf-available/10-cgi.conf ./ $ sudo echo 'cgi.assign = ( \".cgi\" => \"\" )' >> 10 -cgi.conf $ sudo echo 'index-file.names += ( \"index.cgi\" ) ' >> 10 -cgi.conf $ sudo /etc/init.d/lighttpd restart ( prokka ) $ conda install lighttpd ( prokka ) $ cd $HOME /.conda/etc/lighttpd/conf-enabled $ sudo ln -fs ../conf-available/10-cgi.conf ./ $ sudo echo 'cgi.assign = ( \".cgi\" => \"\" )' >> 10 -cgi.conf $ sudo echo 'index-file.names += ( \"index.cgi\" ) ' >> 10 -cgi.conf $ lighttpd restart \u5b89\u88c5 blastkit # \u514b\u9686\u8f6f\u4ef6\u4ed3\u5e93 blastkit $ git clone https://github.com/ctb/blastkit.git -b ec2 $ cd blastkit/www # \u5c06www\u8def\u5f84\u94fe\u63a5\u5230 /var \u4e2d $ sudo ln -fs $PWD /var/www/blastkit # \u5efa\u7acb\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 $ mkdir files $ chmod a+rxwt files # $ chmod +x /root $ cd .. # \u8fd0\u884c\u68c0\u6d4b\u811a\u672c $ python ./check.py #\u5982\u679c\u5b89\u88c5\u987a\u5229\uff0c\u5c31\u4f1a\u63d0\u793a\u4e00\u5207\u5df2\u7ecf\u51c6\u5907\u5b8c\u6bd5\u3002\u63a5\u4e0b\u6765\u8981\u51c6\u5907\u6570\u636e\u3002 # \u5c06\u5927\u80a0\u57c3\u5e0c\u83ccDNA\u5e8f\u5217\u6587\u4ef6contigs.fa\u590d\u5236\u5230\u6570\u636e\u5e93\u76ee\u5f55\u4e0b $ cp ~/contigs.fa blastkit/db/db.fa # \u4f7f\u7528 formatdb \u683c\u5f0f\u5316\u6570\u636e\u5e93 $ formatdb -i db/db.fa -o T -p F # \u5efa\u7acb\u7d22\u5f15 $ python index-db.py db/db.fa","title":"4.1 blastkit"},{"location":"book/C01_Common-Utility/05_blast/#reference","text":"Blastkit Caltech workshop Angus","title":"Reference"},{"location":"book/C01_Common-Utility/06_fastqc/","text":"FastQC \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u4f7f\u7528 \u00b6 $ conda install fastqc $ fastqc 1_1.fastq.gz 1_2.fastq.gz","title":"06. FastQC"},{"location":"book/C01_Common-Utility/06_fastqc/#fastqc","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"FastQC"},{"location":"book/C01_Common-Utility/06_fastqc/#_1","text":"$ conda install fastqc $ fastqc 1_1.fastq.gz 1_2.fastq.gz","title":"\u4f7f\u7528"},{"location":"book/C01_Common-Utility/07_multiqc/","text":"MultiQC \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd MultiQC \u662f\u4e00\u4e2a\u5c06\u6570\u636e\u8d28\u63a7\u7ed3\u679c\u6c47\u603b\u5e76\u751f\u6210\u62a5\u544a\u7684\u8f6f\u4ef6\u3002 \u5b89\u88c5 \u00b6 $ conda create -n multiqc $ conda activate multiqc ( multiqc ) $ conda install multiqc qualimap fastqc snpeff gatk","title":"07. Multiqc"},{"location":"book/C01_Common-Utility/07_multiqc/#multiqc","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd MultiQC \u662f\u4e00\u4e2a\u5c06\u6570\u636e\u8d28\u63a7\u7ed3\u679c\u6c47\u603b\u5e76\u751f\u6210\u62a5\u544a\u7684\u8f6f\u4ef6\u3002","title":"MultiQC"},{"location":"book/C01_Common-Utility/07_multiqc/#_1","text":"$ conda create -n multiqc $ conda activate multiqc ( multiqc ) $ conda install multiqc qualimap fastqc snpeff gatk","title":"\u5b89\u88c5"},{"location":"book/C01_Common-Utility/08_seqkit/","text":"Seqkit \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Seqkit \u662f\u7531\u56fd\u4eba shenwei \u5f00\u53d1\uff0c\u529f\u80fd\u5f3a\u5927\u7684\u547d\u4ee4\u884c\u5e8f\u5217\u5904\u7406\u5de5\u5177\u5957\u4ef6\u3002 \u4f7f\u7528 \u00b6 \u5b50\u547d\u4ee4 \u7528\u9014 common find common sequences of multiple files by id/name/sequence concat concatenate sequences with same ID from multiple files convert convert FASTQ quality encoding between Sanger, Solexa and Illumina duplicate duplicate sequences N times faidx create FASTA index file and extract subsequence fq2fa convert FASTQ to FASTA fx2tab convert FASTA/Q to tabular format (with length/GC content/GC skew) genautocomplete generate shell autocompletion script grep search sequences by ID/name/sequence/sequence motifs, mismatch allowed head print first N FASTA/Q records help Help about any command locate locate subsequences/motifs, mismatch allowed mutate edit sequence (point mutation, insertion, deletion) range print FASTA/Q records in a range (start:end) rename rename duplicated IDs replace replace name/sequence by regular expression restart reset start position for circular genome rmdup remove duplicated sequences by id/name/sequence sample sample sequences by number or proportion seq transform sequences (revserse, complement, extract ID...) shuffle shuffle sequences sliding sliding sequences, circular genome supported sort sort sequences by id/name/sequence/length split split sequences into files by id/seq region/size/parts (mainly for FASTA) split2 split sequences into files by size/parts (FASTA, PE/SE FASTQ) stats simple statistics of FASTA/Q files subseq get subsequences by region/gtf/bed, including flanking sequences tab2fx convert tabular format to FASTA/Q format translate translate DNA/RNA to protein sequence version print version information and check for update grep \u547d\u4ee4 \u00b6 spades \u7ec4\u88c5\u5b8c\u6bd5\u7684\u5e8f\u5217\uff0c\u63d0\u53d6\u5176\u4e2d\u67d0\u4e2a node \u6216\u8005\u67d0\u4e9b nodes \u5e8f\u5217\uff1a $ seqkit grep -r -p ^node_1$ scaffolds.fasta > node_1.fasta \u5c06 scaffolds \u4e2d\u6240\u6709 nodes \u63d0\u53d6\u5230\u5355\u72ec\u7684 fasta \u6587\u4ef6\u4e2d\uff1a $ for i in $( awk '/>/' scaffolds.fasta | awk '{print $1}' ) ; \\ > do seqkit grep -p ${ i : 1 } scaffolds.fasta > ${ i : 1 } .fasta ; \\ > done seq \u547d\u4ee4 \u00b6 $ seqkit seq -h ```bash tab=\"-n\u548c-i\" \u5c06 reads \u7684\u540d\u79f0\u4fe1\u606f\u8f93\u51fa\uff0c\u5982\u679c\u8981\u548c bioawk $name \u76f8\u540c\uff0c\u4f7f\u7528 -i \u53c2\u6570 \u00b6 $ seqkit seq -n SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz SRR1175124.102354 102354 length=150 ... $ bioawk -c fastx '{print $name}' SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz SRR1175124.102354 ... $ seqkit seq -in SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz SRR1175124.102354 ... \u00b6 ```bash tab=\"-l\u548c-u\" # \u8f93\u51fa\u5c0f\u5199\u78b1\u57fa $ seqkit seq -sl SRR1175124_1.fastq.gz # \u8f93\u51fa\u5927\u5199\u78b1\u57fa $ seqkit seq -su SRR1175124_1.fastq.gz \u4f7f\u7528\u6848\u4f8b \u00b6 # \u4e0b\u8f7d NC_001477 $ efetch -db nuccore -id NC_001477 -format fasta > NC_001477.fasta # \u7ffb\u8bd1 DNA \u5e8f\u5217\u4e3a\u6c28\u57fa\u9178\u5e8f\u5217 $ seqkit translate -j 4 -o NC_001477.pep NC_001477.fasta # \u5bf9\u6ce8\u91ca\u7684\u591a\u62f7\u8d1d\u57fa\u56e0\u63d0\u53d6\u5e8f\u5217\u540e\u8fdb\u884c\u5e8f\u5217\u6bd4\u5bf9 # \u7528prokka\u6ce8\u91ca\u57fa\u56e0\u7ec4\u62fc\u63a5\u5e8f\u5217 $ prokka --rfam --prefix sample --outdir sample contig.fa # \u7528 seqkit \u63d0\u53d6\u591a\u62f7\u8d1d\u57fa\u56e0 ncRNA Qrr \u7684\u5e8f\u5217 $ grep 'Qrr' sample/sample.gff | for i in $( awk '{print $9}' ) ; do seqkit grep -p ${ i : 3 : 14 } sample.ffn >> qrr.fa ; done # mafft \u5e8f\u5217\u6bd4\u5bf9 $ mafft qrr.fa > qrr.mafft # raxml \u5feb\u901f\u6784\u5efa\u8fdb\u5316\u6811 $ raxmlHPC -f a -p 12345 -x 12345 -# 1000 -m GTRGAMMA -s qrr.mafft -n qrr","title":"08. SeqKit \u5de5\u5177"},{"location":"book/C01_Common-Utility/08_seqkit/#seqkit","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Seqkit \u662f\u7531\u56fd\u4eba shenwei \u5f00\u53d1\uff0c\u529f\u80fd\u5f3a\u5927\u7684\u547d\u4ee4\u884c\u5e8f\u5217\u5904\u7406\u5de5\u5177\u5957\u4ef6\u3002","title":"Seqkit"},{"location":"book/C01_Common-Utility/08_seqkit/#_1","text":"\u5b50\u547d\u4ee4 \u7528\u9014 common find common sequences of multiple files by id/name/sequence concat concatenate sequences with same ID from multiple files convert convert FASTQ quality encoding between Sanger, Solexa and Illumina duplicate duplicate sequences N times faidx create FASTA index file and extract subsequence fq2fa convert FASTQ to FASTA fx2tab convert FASTA/Q to tabular format (with length/GC content/GC skew) genautocomplete generate shell autocompletion script grep search sequences by ID/name/sequence/sequence motifs, mismatch allowed head print first N FASTA/Q records help Help about any command locate locate subsequences/motifs, mismatch allowed mutate edit sequence (point mutation, insertion, deletion) range print FASTA/Q records in a range (start:end) rename rename duplicated IDs replace replace name/sequence by regular expression restart reset start position for circular genome rmdup remove duplicated sequences by id/name/sequence sample sample sequences by number or proportion seq transform sequences (revserse, complement, extract ID...) shuffle shuffle sequences sliding sliding sequences, circular genome supported sort sort sequences by id/name/sequence/length split split sequences into files by id/seq region/size/parts (mainly for FASTA) split2 split sequences into files by size/parts (FASTA, PE/SE FASTQ) stats simple statistics of FASTA/Q files subseq get subsequences by region/gtf/bed, including flanking sequences tab2fx convert tabular format to FASTA/Q format translate translate DNA/RNA to protein sequence version print version information and check for update","title":"\u4f7f\u7528"},{"location":"book/C01_Common-Utility/08_seqkit/#grep","text":"spades \u7ec4\u88c5\u5b8c\u6bd5\u7684\u5e8f\u5217\uff0c\u63d0\u53d6\u5176\u4e2d\u67d0\u4e2a node \u6216\u8005\u67d0\u4e9b nodes \u5e8f\u5217\uff1a $ seqkit grep -r -p ^node_1$ scaffolds.fasta > node_1.fasta \u5c06 scaffolds \u4e2d\u6240\u6709 nodes \u63d0\u53d6\u5230\u5355\u72ec\u7684 fasta \u6587\u4ef6\u4e2d\uff1a $ for i in $( awk '/>/' scaffolds.fasta | awk '{print $1}' ) ; \\ > do seqkit grep -p ${ i : 1 } scaffolds.fasta > ${ i : 1 } .fasta ; \\ > done","title":"grep \u547d\u4ee4"},{"location":"book/C01_Common-Utility/08_seqkit/#seq","text":"$ seqkit seq -h ```bash tab=\"-n\u548c-i\"","title":"seq \u547d\u4ee4"},{"location":"book/C01_Common-Utility/08_seqkit/#reads-bioawk-name-i","text":"$ seqkit seq -n SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz SRR1175124.102354 102354 length=150 ... $ bioawk -c fastx '{print $name}' SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz SRR1175124.102354 ... $ seqkit seq -in SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz SRR1175124.102354 ...","title":"\u5c06 reads \u7684\u540d\u79f0\u4fe1\u606f\u8f93\u51fa\uff0c\u5982\u679c\u8981\u548c bioawk $name \u76f8\u540c\uff0c\u4f7f\u7528 -i \u53c2\u6570"},{"location":"book/C01_Common-Utility/08_seqkit/#_2","text":"```bash tab=\"-l\u548c-u\" # \u8f93\u51fa\u5c0f\u5199\u78b1\u57fa $ seqkit seq -sl SRR1175124_1.fastq.gz # \u8f93\u51fa\u5927\u5199\u78b1\u57fa $ seqkit seq -su SRR1175124_1.fastq.gz","title":""},{"location":"book/C01_Common-Utility/08_seqkit/#_3","text":"# \u4e0b\u8f7d NC_001477 $ efetch -db nuccore -id NC_001477 -format fasta > NC_001477.fasta # \u7ffb\u8bd1 DNA \u5e8f\u5217\u4e3a\u6c28\u57fa\u9178\u5e8f\u5217 $ seqkit translate -j 4 -o NC_001477.pep NC_001477.fasta # \u5bf9\u6ce8\u91ca\u7684\u591a\u62f7\u8d1d\u57fa\u56e0\u63d0\u53d6\u5e8f\u5217\u540e\u8fdb\u884c\u5e8f\u5217\u6bd4\u5bf9 # \u7528prokka\u6ce8\u91ca\u57fa\u56e0\u7ec4\u62fc\u63a5\u5e8f\u5217 $ prokka --rfam --prefix sample --outdir sample contig.fa # \u7528 seqkit \u63d0\u53d6\u591a\u62f7\u8d1d\u57fa\u56e0 ncRNA Qrr \u7684\u5e8f\u5217 $ grep 'Qrr' sample/sample.gff | for i in $( awk '{print $9}' ) ; do seqkit grep -p ${ i : 3 : 14 } sample.ffn >> qrr.fa ; done # mafft \u5e8f\u5217\u6bd4\u5bf9 $ mafft qrr.fa > qrr.mafft # raxml \u5feb\u901f\u6784\u5efa\u8fdb\u5316\u6811 $ raxmlHPC -f a -p 12345 -x 12345 -# 1000 -m GTRGAMMA -s qrr.mafft -n qrr","title":"\u4f7f\u7528\u6848\u4f8b"},{"location":"book/C01_Common-Utility/09_kmer/","text":"k-mer \u5206\u6790 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb k-mer \u5206\u6790\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u5bf9\u5e8f\u5217 ATCG \u7279\u5b9a kmer \u8fdb\u884c\u7edf\u8ba1\u8ba1\u7b97\u5dee\u5f02\u7684\u65b9\u6cd5\u3002 \u5b89\u88c5 \u00b6 \u901a\u8fc7 pip \u5b89\u88c5 \u00b6 khmer \u662f\u4e00\u4e2a python \u5305\uff0c\u53ef\u4ee5\u4f7f\u7528 python \u5305\u5b89\u88c5\u5de5\u5177 pip \u6765\u5b89\u88c5\u3002 # \u5b89\u88c5 khmer \u5de5\u5177 $ pip install khmer \u901a\u8fc7 conda \u5b89\u88c5 \u00b6 \u7528 conda \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u5b89\u88c5 khmer \u3002\u5f53\u524d\u7248\u672c\u4e3a [2.12][ http://khmer.readthedocs.io/en/v2.1.2/ ]\uff0c\u5b89\u88c5\u8fc7\u7a0b\u8fd8\u4f1a\u81ea\u52a8\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 [screed][ https://github.com/dib-lab/screed ]\uff08\u4e00\u4e2a\u8f7b\u91cf\u7ea7 python \u5e8f\u5217\u6570\u636e\u5e93\u5de5\u5177\uff09\u3002 $ conda create -n khmer $ conda activate khmer ( khmer ) $ conda install khmer \u4f7f\u7528 \u00b6 khmer \u6709\u4e00\u5957\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u8fd0\u884c\u4f7f\u7528\u3002\u53e6\u5916\u4e5f\u53ef\u4ee5\u4f7f\u7528 khmer \u7684 API\uff0c\u7f16\u5199 python \u4ee3\u7801\u8c03\u7528\u3002 load-into-counting.py $ load-into-counting.py -T 4 -k 32 -x 1e8 -N 4 counts R1.fastq.gz normalize-by-median.py \u53bb\u9664\u5197\u4f59\u5e8f\u5217\u3002\u811a\u672c\u7a0b\u5e8f\u5c06 Fast[A/Q] \u683c\u5f0f\u6570\u636e\u6587\u4ef6\u5217\u8868\u5316\uff0c\u811a\u672c\u8f93\u51fa\u7684\u5e8f\u5217\u53ef\u4ee5\u88ab\u7ec4\u88c5\u8f6f\u4ef6\u6bd4\u5982 SPAdes \u7b49\u8fdb\u884c\u5e8f\u5217\u7ec4\u88c5\u3002 $ normalize-by-median.py -p -k 21 -o - read.fq output.fq readstats.py \u7edf\u8ba1 FASTA/Q \u5e8f\u5217\u4fe1\u606f\u3002 $ readstats.py -o R1.output R1.fastq.gz $ cat R1.output found 449472737 bps / 1879073 seqs ; 239 .2 average length -- R1.fastq.gz --------------- 449472737 bp / 1879073 seqs ; 239 .2 average length -- R1.fastq.gz --------------- 449472737 bp / 1879073 seqs ; 239 .2 average length -- total khmer \u7528\u9014 \u00b6 \u5bf9 de novo assembly \u8fdb\u884c\u6570\u5b57\u5747\u4e00\u5316\u8fdb\u884c\u9884\u5904\u7406 Python API \u00b6 # ipython \u73af\u5883\u4e2d\u8c03\u7528 khmer \u6a21\u5757 $ ipython In [ 1 ] : import khmer In [ 2 ] : counts = khmer.Counttable ( 31 , 1e7, 4 ) In [ 3 ] : counts.consume_seqfile ( 'R1.fastq.gz' ) ( 25000 , 1150000 ) # 31 \u662f kmer \u957f\u5ea6\uff0c1e7 \u662f table size\uff0c4 \u662f table \u6570 # 25000 \u8868\u793a\u5e8f\u5217\u6570\u91cf\uff0c\u9ad8\u901a\u91cf\u6d4b\u5e8f\u91cc\u5373 reads \u6570\u3002 # 1150000 \u8868\u793a\u6307\u5b9a kmer \u5207\u5272\u540e\u5404\u79cd kmer \u5e8f\u5217\u6570 In [ 4 ] : counts.get ( 'TGACTTTCTTCGCTTCCTGACGGCTTATGCC' ) 105 Reference \u00b6 https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4608353/ http://khmer.readthedocs.io/en/latest/","title":"09. Kmer \u5de5\u5177"},{"location":"book/C01_Common-Utility/09_kmer/#k-mer","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb k-mer \u5206\u6790\u53ef\u4ee5\u4e0d\u4f9d\u8d56\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u5bf9\u5e8f\u5217 ATCG \u7279\u5b9a kmer \u8fdb\u884c\u7edf\u8ba1\u8ba1\u7b97\u5dee\u5f02\u7684\u65b9\u6cd5\u3002","title":"k-mer \u5206\u6790"},{"location":"book/C01_Common-Utility/09_kmer/#_1","text":"","title":"\u5b89\u88c5"},{"location":"book/C01_Common-Utility/09_kmer/#pip","text":"khmer \u662f\u4e00\u4e2a python \u5305\uff0c\u53ef\u4ee5\u4f7f\u7528 python \u5305\u5b89\u88c5\u5de5\u5177 pip \u6765\u5b89\u88c5\u3002 # \u5b89\u88c5 khmer \u5de5\u5177 $ pip install khmer","title":"\u901a\u8fc7 pip \u5b89\u88c5"},{"location":"book/C01_Common-Utility/09_kmer/#conda","text":"\u7528 conda \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u5b89\u88c5 khmer \u3002\u5f53\u524d\u7248\u672c\u4e3a [2.12][ http://khmer.readthedocs.io/en/v2.1.2/ ]\uff0c\u5b89\u88c5\u8fc7\u7a0b\u8fd8\u4f1a\u81ea\u52a8\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 [screed][ https://github.com/dib-lab/screed ]\uff08\u4e00\u4e2a\u8f7b\u91cf\u7ea7 python \u5e8f\u5217\u6570\u636e\u5e93\u5de5\u5177\uff09\u3002 $ conda create -n khmer $ conda activate khmer ( khmer ) $ conda install khmer","title":"\u901a\u8fc7 conda \u5b89\u88c5"},{"location":"book/C01_Common-Utility/09_kmer/#_2","text":"khmer \u6709\u4e00\u5957\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u8fd0\u884c\u4f7f\u7528\u3002\u53e6\u5916\u4e5f\u53ef\u4ee5\u4f7f\u7528 khmer \u7684 API\uff0c\u7f16\u5199 python \u4ee3\u7801\u8c03\u7528\u3002 load-into-counting.py $ load-into-counting.py -T 4 -k 32 -x 1e8 -N 4 counts R1.fastq.gz normalize-by-median.py \u53bb\u9664\u5197\u4f59\u5e8f\u5217\u3002\u811a\u672c\u7a0b\u5e8f\u5c06 Fast[A/Q] \u683c\u5f0f\u6570\u636e\u6587\u4ef6\u5217\u8868\u5316\uff0c\u811a\u672c\u8f93\u51fa\u7684\u5e8f\u5217\u53ef\u4ee5\u88ab\u7ec4\u88c5\u8f6f\u4ef6\u6bd4\u5982 SPAdes \u7b49\u8fdb\u884c\u5e8f\u5217\u7ec4\u88c5\u3002 $ normalize-by-median.py -p -k 21 -o - read.fq output.fq readstats.py \u7edf\u8ba1 FASTA/Q \u5e8f\u5217\u4fe1\u606f\u3002 $ readstats.py -o R1.output R1.fastq.gz $ cat R1.output found 449472737 bps / 1879073 seqs ; 239 .2 average length -- R1.fastq.gz --------------- 449472737 bp / 1879073 seqs ; 239 .2 average length -- R1.fastq.gz --------------- 449472737 bp / 1879073 seqs ; 239 .2 average length -- total","title":"\u4f7f\u7528"},{"location":"book/C01_Common-Utility/09_kmer/#khmer","text":"\u5bf9 de novo assembly \u8fdb\u884c\u6570\u5b57\u5747\u4e00\u5316\u8fdb\u884c\u9884\u5904\u7406","title":"khmer \u7528\u9014"},{"location":"book/C01_Common-Utility/09_kmer/#python-api","text":"# ipython \u73af\u5883\u4e2d\u8c03\u7528 khmer \u6a21\u5757 $ ipython In [ 1 ] : import khmer In [ 2 ] : counts = khmer.Counttable ( 31 , 1e7, 4 ) In [ 3 ] : counts.consume_seqfile ( 'R1.fastq.gz' ) ( 25000 , 1150000 ) # 31 \u662f kmer \u957f\u5ea6\uff0c1e7 \u662f table size\uff0c4 \u662f table \u6570 # 25000 \u8868\u793a\u5e8f\u5217\u6570\u91cf\uff0c\u9ad8\u901a\u91cf\u6d4b\u5e8f\u91cc\u5373 reads \u6570\u3002 # 1150000 \u8868\u793a\u6307\u5b9a kmer \u5207\u5272\u540e\u5404\u79cd kmer \u5e8f\u5217\u6570 In [ 4 ] : counts.get ( 'TGACTTTCTTCGCTTCCTGACGGCTTATGCC' ) 105","title":"Python API"},{"location":"book/C01_Common-Utility/09_kmer/#reference","text":"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4608353/ http://khmer.readthedocs.io/en/latest/","title":"Reference"},{"location":"book/C02_Raw-Data-to-Genome/00_assembly-methods/","text":"\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7ec4\u88c5\u539f\u7406 \u00b6","title":"\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7ec4\u88c5\u539f\u7406"},{"location":"book/C02_Raw-Data-to-Genome/00_assembly-methods/#_1","text":"","title":"\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7ec4\u88c5\u539f\u7406"},{"location":"book/C02_Raw-Data-to-Genome/01_bwa-samtools-pipeline/","text":"bwa + samtools \u57fa\u672c\u5206\u6790\u6d41\u7a0b \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u53ef\u4ee5\u91c7\u7528\u57fa\u4e8e\u6bd4\u5bf9\u7684\u65b9\u6cd5\u83b7\u5f97\u53c2\u8003\u57fa\u56e0\u7ec4 consensus \u5e8f\u5217\u3002\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5e94\u7528\u5728\u75c5\u6bd2\u7b49\u57fa\u56e0\u7ec4\u5e8f\u5217\u7684\u83b7\u5f97\u3002 \u6bd4\u5bf9\u8f6f\u4ef6: bwa BAM\u8f6f\u4ef6: samtools \u53bb\u91cd\u590d: gatk4 MarkDuplicates \u751f\u6210vcf: freebayes \u6ce8\u91cavcf: snpEff \u547d\u4ee4\u64cd\u4f5c \u00b6 # \u5bf9 fasta \u683c\u5f0f\u7684\u53c2\u8003\u5e8f\u5217 ref.fa \u5efa\u7acb\u7d22\u5f15 $ bwa index ref.fa # \u5229\u7528 mem \u7b97\u6cd5\u5c06 illumina reads \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\u4e0a # \u5e76\u4f7f\u7528 samtools \u5c06\u5176\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236 bam \u4e2a\u662f\u6587\u4ef6 $ bwa mem -t 40 ref.fa -R \"@RG\\tID:1\\tSM:S1\" 1_S1_L001_R1.fastq.gz 1_S1_L001_R2.fastq.gz | \\ > samtools view -bS > 1 .bam # \u5c06 bam \u6587\u4ef6\u6392\u5e8f $ samtools sort -O bam 1 .sorted.bam 1 .bam # \u4f7f\u7528 gatk \u53bb\u9664\u91cd\u590d\u9700\u91cc $ gatk MarkDuplicates -I 1 .sorted.bam -O 1 .markdup.sorted.bam -M 1 .markdup.sorted_metrics.txt # \u5bf9\u6392\u5e8f\u5e76\u53bb\u91cd\u590d\u7684\u5e8f\u5217\u5efa\u7acb\u7d22\u5f15 $ samtools index 1 .markdup.sorted.bam # \u4f7f\u7528 freebayes \u5c06 bam \u683c\u5f0f\u7684\u7ed3\u679c\u8f6c\u6362\u4e3a vcf \u683c\u5f0f\u7684\u6587\u4ef6 $ freebayes -m 20 -p 1 -f ref.fa 1 .markdup.sorted.bam > 1 .vcf # \u4f7f\u7528 snpEff \u83b7\u5f97 SNP \u4e3a\u70b9\u6ce8\u91ca $ snpEff lmo_database 1 .vcf > 1 .snpEff.vcf Reference \u00b6 BWA\u4e2d\u6587\u624b\u518c","title":"01. \u57fa\u672c\u6bd4\u5bf9\u6d41\u7a0b"},{"location":"book/C02_Raw-Data-to-Genome/01_bwa-samtools-pipeline/#bwa-samtools","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u53ef\u4ee5\u91c7\u7528\u57fa\u4e8e\u6bd4\u5bf9\u7684\u65b9\u6cd5\u83b7\u5f97\u53c2\u8003\u57fa\u56e0\u7ec4 consensus \u5e8f\u5217\u3002\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5e94\u7528\u5728\u75c5\u6bd2\u7b49\u57fa\u56e0\u7ec4\u5e8f\u5217\u7684\u83b7\u5f97\u3002 \u6bd4\u5bf9\u8f6f\u4ef6: bwa BAM\u8f6f\u4ef6: samtools \u53bb\u91cd\u590d: gatk4 MarkDuplicates \u751f\u6210vcf: freebayes \u6ce8\u91cavcf: snpEff","title":"bwa + samtools \u57fa\u672c\u5206\u6790\u6d41\u7a0b"},{"location":"book/C02_Raw-Data-to-Genome/01_bwa-samtools-pipeline/#_1","text":"# \u5bf9 fasta \u683c\u5f0f\u7684\u53c2\u8003\u5e8f\u5217 ref.fa \u5efa\u7acb\u7d22\u5f15 $ bwa index ref.fa # \u5229\u7528 mem \u7b97\u6cd5\u5c06 illumina reads \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\u4e0a # \u5e76\u4f7f\u7528 samtools \u5c06\u5176\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236 bam \u4e2a\u662f\u6587\u4ef6 $ bwa mem -t 40 ref.fa -R \"@RG\\tID:1\\tSM:S1\" 1_S1_L001_R1.fastq.gz 1_S1_L001_R2.fastq.gz | \\ > samtools view -bS > 1 .bam # \u5c06 bam \u6587\u4ef6\u6392\u5e8f $ samtools sort -O bam 1 .sorted.bam 1 .bam # \u4f7f\u7528 gatk \u53bb\u9664\u91cd\u590d\u9700\u91cc $ gatk MarkDuplicates -I 1 .sorted.bam -O 1 .markdup.sorted.bam -M 1 .markdup.sorted_metrics.txt # \u5bf9\u6392\u5e8f\u5e76\u53bb\u91cd\u590d\u7684\u5e8f\u5217\u5efa\u7acb\u7d22\u5f15 $ samtools index 1 .markdup.sorted.bam # \u4f7f\u7528 freebayes \u5c06 bam \u683c\u5f0f\u7684\u7ed3\u679c\u8f6c\u6362\u4e3a vcf \u683c\u5f0f\u7684\u6587\u4ef6 $ freebayes -m 20 -p 1 -f ref.fa 1 .markdup.sorted.bam > 1 .vcf # \u4f7f\u7528 snpEff \u83b7\u5f97 SNP \u4e3a\u70b9\u6ce8\u91ca $ snpEff lmo_database 1 .vcf > 1 .snpEff.vcf","title":"\u547d\u4ee4\u64cd\u4f5c"},{"location":"book/C02_Raw-Data-to-Genome/01_bwa-samtools-pipeline/#reference","text":"BWA\u4e2d\u6587\u624b\u518c","title":"Reference"},{"location":"book/C02_Raw-Data-to-Genome/02_quast/","text":"Quast \u8d28\u91cf\u5206\u6790 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5 \u00b6 # Quast \u4f9d\u8d56 python2.x\uff0c\u56e0\u6b64\u65b0\u5efa\u4e00\u4e2a virtualenv $ conda create -n quast $ conda activate quast ( quast ) $ conda install quast \u4f7f\u7528 \u00b6 # -o \u5236\u5b9a\u8f93\u51fa\u76ee\u5f55 contig.fa \u4e3a\u62fc\u63a5\u7ed3\u679c\u5e8f\u5217 $ quast -o outdir assembly/contig.fa # \u6d4f\u89c8\u5668\u6253\u5f00\u62a5\u544a $ chromium outdir/report.html N50: Reads\u62fc\u63a5\u540e\u4f1a\u83b7\u5f97\u4e00\u4e9b\u4e0d\u540c\u957f\u5ea6\u7684Contigs\u3002\u5c06\u6240\u6709\u7684Contig\u957f\u5ea6\u76f8\u52a0\uff0c\u80fd\u83b7\u5f97\u4e00\u4e2aContig\u603b\u957f\u5ea6\u3002\u7136\u540e\u5c06\u6240\u6709\u7684Contigs\u6309\u7167\u4ece\u957f\u5230\u77ed\u8fdb\u884c\u6392\u5e8f\uff0c\u5c06Contig\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u4f9d\u6b21\u76f8\u52a0\uff0c\u5f53\u76f8\u52a0\u7684\u957f\u5ea6\u8fbe\u5230Contig\u603b\u957f\u5ea6\u7684\u4e00\u534a\u65f6\uff0c\u6700\u540e\u4e00\u4e2a\u52a0\u4e0a\u7684Contig\u957f\u5ea6\u5373\u4e3aContig N50\u3002\u4e3e\u4f8b\uff1aContig 1+Contig 2+ Contig 3 +Contig 4=Contig\u603b\u957f\u5ea6*\u00bd\u65f6\uff0cContig 4\u7684\u957f\u5ea6\u5373\u4e3aContig N50\u3002Contig N50\u53ef\u4ee5\u4f5c\u4e3a\u57fa\u56e0\u7ec4\u62fc\u63a5\u7684\u7ed3\u679c\u597d\u574f\u7684\u4e00\u4e2a\u5224\u65ad\u6807\u51c6\u3002 N75: \u4e0eN50\u65b9\u6cd5\u4e00\u81f4\uff0c\u4e0d\u8fc7\u957f\u5ea6\u4e3a\u8d85\u8fc7Contigs\u603b\u957f\u5ea675%\u65f6\u7684contig\u5e8f\u5217\u957f\u5ea6\u3002 L50: \u4e3a\u83b7\u5f97N50\u65f6contigs\u6570\u91cf\u3002 L75: \u4e3a\u83b7\u5f97N75\u65f6contigs\u6570\u91cf\u3002","title":"02. Quast \u9a8c\u8bc1"},{"location":"book/C02_Raw-Data-to-Genome/02_quast/#quast","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Quast \u8d28\u91cf\u5206\u6790"},{"location":"book/C02_Raw-Data-to-Genome/02_quast/#_1","text":"# Quast \u4f9d\u8d56 python2.x\uff0c\u56e0\u6b64\u65b0\u5efa\u4e00\u4e2a virtualenv $ conda create -n quast $ conda activate quast ( quast ) $ conda install quast","title":"\u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/02_quast/#_2","text":"# -o \u5236\u5b9a\u8f93\u51fa\u76ee\u5f55 contig.fa \u4e3a\u62fc\u63a5\u7ed3\u679c\u5e8f\u5217 $ quast -o outdir assembly/contig.fa # \u6d4f\u89c8\u5668\u6253\u5f00\u62a5\u544a $ chromium outdir/report.html N50: Reads\u62fc\u63a5\u540e\u4f1a\u83b7\u5f97\u4e00\u4e9b\u4e0d\u540c\u957f\u5ea6\u7684Contigs\u3002\u5c06\u6240\u6709\u7684Contig\u957f\u5ea6\u76f8\u52a0\uff0c\u80fd\u83b7\u5f97\u4e00\u4e2aContig\u603b\u957f\u5ea6\u3002\u7136\u540e\u5c06\u6240\u6709\u7684Contigs\u6309\u7167\u4ece\u957f\u5230\u77ed\u8fdb\u884c\u6392\u5e8f\uff0c\u5c06Contig\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u4f9d\u6b21\u76f8\u52a0\uff0c\u5f53\u76f8\u52a0\u7684\u957f\u5ea6\u8fbe\u5230Contig\u603b\u957f\u5ea6\u7684\u4e00\u534a\u65f6\uff0c\u6700\u540e\u4e00\u4e2a\u52a0\u4e0a\u7684Contig\u957f\u5ea6\u5373\u4e3aContig N50\u3002\u4e3e\u4f8b\uff1aContig 1+Contig 2+ Contig 3 +Contig 4=Contig\u603b\u957f\u5ea6*\u00bd\u65f6\uff0cContig 4\u7684\u957f\u5ea6\u5373\u4e3aContig N50\u3002Contig N50\u53ef\u4ee5\u4f5c\u4e3a\u57fa\u56e0\u7ec4\u62fc\u63a5\u7684\u7ed3\u679c\u597d\u574f\u7684\u4e00\u4e2a\u5224\u65ad\u6807\u51c6\u3002 N75: \u4e0eN50\u65b9\u6cd5\u4e00\u81f4\uff0c\u4e0d\u8fc7\u957f\u5ea6\u4e3a\u8d85\u8fc7Contigs\u603b\u957f\u5ea675%\u65f6\u7684contig\u5e8f\u5217\u957f\u5ea6\u3002 L50: \u4e3a\u83b7\u5f97N50\u65f6contigs\u6570\u91cf\u3002 L75: \u4e3a\u83b7\u5f97N75\u65f6contigs\u6570\u91cf\u3002","title":"\u4f7f\u7528"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/","text":"\u7ec6\u83cc\u57fa\u56e0\u7ec4\u77ed\u5e8f\u5217\u62fc\u63a5\u62fc\u63a5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u540e\u7684\u62fc\u63a5\u5de5\u4f5c\uff0c\u6709\u8bb8\u591a\u8f6f\u4ef6\u53ef\u4ee5\u5b8c\u6210\u3002\u8fd1\u51e0\u5e74\u4e0d\u65ad\u6709\u65b0\u7684\u4f18\u79c0\u62fc\u63a5\u8f6f\u4ef6\u6d8c\u73b0\uff0c\u672c\u8282\u4ec5\u6311\u9009\u51e0\u4e2a\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u62fc\u63a5\u4f7f\u7528\u8f83\u591a\u4e5f\u662f\u8bc4\u6d4b\u4e2d\u6bd4\u8f83\u4f18\u79c0\u7684\u51e0\u4e2a\u5de5\u5177\u3002\u4e5f\u53ef\u4ee5\u5148\u5bf9\u81ea\u5df1\u7684\u6d4b\u5e8f\u7269\u79cd\u505a\u4e00\u4e2a assembly evaluation\uff0c\u9009\u62e9\u6bd4\u8f83\u9002\u5408\u7684\u62fc\u63a5\u8f6f\u4ef6\u3002 \u5e38\u7528\u62fc\u63a5\u8f6f\u4ef6\u5de5\u5177\u5217\u8868 SPAdes <http://spades.bioinf.spbau.ru/> _ MaSuRCA <http://www.genome.umd.edu/masurca.html> _ Velvet A5_miseq \u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u53c2\u89c1 \u8fd9\u91cc <https://omictools.com/genome-assembly-category> _ 1. SPAdes \u00b6 SPAdes \u662f\u7531 1.1 \u5b89\u88c5 SPAdes \u00b6 \u901a\u8fc7conda\u5b89\u88c5 $ conda create -n spades $ conda activate spades ( assembly ) $ conda install spades Docker\u65b9\u5f0f\u5b89\u88c5 $ 1.2 \u4f7f\u7528 spades \u62fc\u63a5\u4e8c\u4ee3\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e \u00b6 # \u4ee5SRR95386 \u4e3a\u4f8b $ prefetch SRR956386 $ fastq-dump --split-e --gzip SRR956386.sra # -t 40 \u8868\u793a\u752840\u4e2a threads \u8fdb\u884c\u62fc\u63a5\uff0c\u6839\u636e\u81ea\u5df1\u7535\u8111\u7684CPU\u60c5\u51b5\u81ea\u884c\u8bbe\u7f6e\u3002 $ spades.py --careful -k 21 ,33,55,77,99,121 -1 SRR95386_1.fastq -2 SRR955386_2.fastq \\ > -o spades_output -t 40 SPAdes\u4f1a\u6839\u636e -k \u53c2\u6570\u9009\u62e9\u4e0d\u540c\u7684 Kmer \u8fdb\u884c de novo \u7ec4\u88c5\u3002\u5bf9\u4e8e\u5e38\u89c1\u7684 Miseq v2/v3 \u8bd5\u5242\u76d2\uff0c\u91c7\u7528 PE150/PE250/PE300 \u7684\u8bfb\u957f\u6d4b\u5e8f\uff0c\u5e38\u7528\u7684\u62fc\u63a5\u547d\u4ee4\u662f\uff1a # PE150 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e $ spades.py -k 21 ,33,55,77 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t 40 # PE250/300 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e $ spades.py -k 21 ,33,55,77,99,127 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t 40 2. Macursa \u00b6 2.1 \u5b89\u88c5 MaSuRCA \u00b6 $ conda create -n masurca $ conda activate masurca ( masurac ) $ conda install masurca 2.2 \u5efa\u7acb\u62fc\u88c5\u914d\u7f6e\u6587\u4ef6 \u00b6 $ touch SRR955386_masurca.config $ vim SRR955386_masurca.config \u6587\u4ef6\u5185\u5bb9\u4fee\u6539\u5982\u4e0b\uff1a DATA PE= p1 500 50 SRR955386_1.fastq SRR955386_2.fastq END PARAMETERS GRAPH_KMER_SIZE=auto USE_LINKING_MATES=1 LIMIT_JUMP_COVERAGE = 60 KMER_COUNT_THRESHOLD = 1 NUM_THREADS= 2 JF_SIZE=100000000 DO_HOMOPOLYMER_TRIM=0 END \u8bbe\u7f6e GRAPH_KMER_SIZE=auto \uff0c\u8f6f\u4ef6\u4f1a\u8c03\u7528Kmer=31\u6765\u8fdb\u884c\u62fc\u88c5\u3002\u5bf9\u4e8eMiSeq PE250\u4ee5\u4e0a\u7684\u63d2\u7247\uff0c\u53ef\u4ee5\u8003\u8651\u624b\u52a8\u8bbe\u7f6e\u4f7f\u7528\u66f4\u5927\u7684Kmer\u3002 2.3 \u5f00\u59cb\u62fc\u88c5 \u00b6 # \u8fd0\u884c masurca $ masurca SRR955386_masurca.config # \u751f\u6210\u7ec4\u88c5\u811a\u672c\uff0c\u8fd0\u884c $ ./assemble.sh 3. Velvet \u00b6 3.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5 \u00b6 Velvet \u662f\u4e00\u4e2a\u8001\u724c\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u62fc\u63a5\u8f6f\u4ef6\u3002Velvet\u6700\u65b0\u7248\u672c\u662f1.2.10\uff0c\u53ef\u4ee5\u8bbf\u95ee \u5b98\u65b9\u7f51\u7ad9 <https://www.ebi.ac.uk/~zerbino/velvet/> _ \u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u514b\u9686 \u8f6f\u4ef6\u4ed3\u5e93 <https://github.com/dzerbino/velvet.git> _ \u7684\u65b9\u5f0f\u83b7\u5f97\u6700\u65b0\u7684\u6e90\u4ee3\u7801\u3002 \u4e0b\u8f7d\u6e90\u4ee3\u7801 \u666e\u901a\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\u81ea\u884c\u7f16\u8bd1\u83b7\u5f97\u8f6f\u4ef6\u3002 $ cd /tmp $ wget https://www.ebi.ac.uk/~zerbino/velvet/velvet_1.2.10.tgz $ tar xvf velvet_1.2.10.tgz -C ~/app/velvet \u514b\u9686\u4ee3\u7801\u4ed3\u5e93 \u5982\u679c\u5728\u8f6f\u4ef6\u8fd0\u884c\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u60f3\u8bd5\u7528\u6700\u65b0\u7248\u4ee3\u7801\uff0c\u6216\u662f\u6709\u80fd\u529b\u63d0\u4ea4issues\uff0c\u6216\u8005\u60f3\u6539\u8fdb\u8f6f\u4ef6\u53c2\u4e0e\u5f00\u6e90\u4ee3\u7801\u7f16\u5199\u7684\u53ef\u4ee5\u9009\u62e9\u514b\u9686\u4ee3\u7801\u5e93\u7684\u65b9\u5f0f\u3002 $ cd ~/tmp $ git clone https://github.com/dzerbino/velvet.git \u7f16\u8bd1\u5b89\u88c5 make\u53ef\u4ee5\u8fdb\u884c\u7f16\u8bd1\uff0c\u6709\u51e0\u4e2a\u7f16\u8bd1\u53c2\u6570\u53ef\u4ee5\u9009\u62e9\uff0c\u5206\u522b\u662fMAXKMERLENGTH, DIRECTORY .. code-block:: bash ~$ cd ~/app/velvet ~/app/velvet$ make 'MAXKMERLENGTH=127' ~/app/velvet$ sudo cp velveth velvetg /usr/local/sbin 3.2 \u62fc\u63a5\u57fa\u56e0\u7ec4 \u00b6 velvet\u8f6f\u4ef6\u75312\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 velveth \u548c velvetg \u7ec4\u6210\u3002 $ velvet 4. A5-miseq \u00b6 A5-miseq <https://sourceforge.net/projects/ngopt/> __ \u662f\u4e00\u4e2a\u7528 perl \u5f00\u53d1\u7684\u9488\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4 de novo assembly \u7684 pipeline \u5de5\u5177\u3002\u5b83\u672c\u8eab\u4e0d\u53c2\u4e0e\u7ec4\u88c5\uff0c\u800c\u662f\u901a\u8fc7\u7ec4\u5408\u4e00\u5957\u5de5\u5177\u6765\u5b8c\u6210\u5de5\u4f5c\uff0c\u5de5\u5177\u96c6\u5305\u62ec\uff1a bwa samtools SGA bowtie Trimmomatic IDBA-UD SSPACE \u8fd9\u4e9b\u5de5\u5177\u90fd\u4ee5\u53ca\u96c6\u6210\u5728 A5-miseq \u4e2d\uff0c\u4e0d\u9700\u8981\u53e6\u5916\u5b89\u88c5\u3002\u4e3a\u4e86\u907f\u514d\u4e0d\u540c\u7248\u672c\u7684 samtools\uff0cbowtie \u5bf9\u7ed3\u679c\u4ea7\u751f\u7684\u5dee\u5f02\uff0c\u5efa\u8bae\u91c7\u7528\u865a\u62df\u73af\u5883\u5982 docker \u7b49\u6765\u9694\u79bb\u8fd0\u884c\u73af\u5883\u3002 4.1 \u5b89\u88c5 A5-miseq \u00b6 \u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5 $ wget http://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz $ tar zxvf a5_miseq_linux_20150522.tar.gz -C ~/app $ sudo ln -s ~/app/a5_miseq_linux_20150522/bin/a5_pipeline.pl /usr/local/sbin \u5efa\u7acb Docker \u5bb9\u5668\u5b89\u88c5 \u00b6 FROM ubuntu:latest MAINTAINER Mark Renton <indexofire@gmail.com> RUN apt-get update -qy RUN apt-get install -qy openjdk-7-jre-headless file ADD http://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz /tmp/a5_miseq.tar.gz RUN mkdir /tmp/a5_miseq RUN tar xzf /tmp/a5_miseq.tar.gz --directory /tmp/a5_miseq --strip-components = 1 ADD run /usr/local/bin/ ADD Procfile / ENTRYPOINT [ \"/usr/local/bin/run\" ] 4.2 \u4f7f\u7528 A5-miseq \u00b6 $ perl a5_pipeline.pl SRR955386_1.fastq SRR955386_2.fastq ~/data/a5_output 4.3 A5-miseq \u6587\u6863 \u00b6 \u67e5\u770b A5-miseq \u5de5\u5177\u7684\u4f7f\u7528\u6587\u6863\u53ef\u4ee5\u7528 a5_pipeline.pl \u5de5\u5177\u67e5\u770b\u3002 # Usage: $ a5_pipeline.pl [ --begin = 1 -5 ] [ --end = 1 -5 ] [ --preprocessed ] <lib_file> <out_base> 5.Shovill \u00b6 Shovill \u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7ec4\u88c5\u6d41\u7a0b\uff0c\u5b83\u8c03\u7528spades\u6216velvet\u7b49\u8f6f\u4ef6\u8fdb\u884c\u62fc\u63a5\uff0c\u751f\u6210\u9002\u7528\u4e8e\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7ec4\u88c5\u7684\u7ed3\u679c\u3002 5.1 \u5b89\u88c5 \u00b6 $ conda create -n shovill $ conda activate shovill ( shovill ) $ conda install shovill 5.2 \u4f7f\u7528 \u00b6 ( shovill ) $ shovill --R1 --R2 Reference: \u00b6 http://www.chenlianfu.com/?p=1635 http://www.bbioo.com/lifesciences/40-116878-1.html http://www.plob.org/2012/11/21/4797.html http://ged.msu.edu/angus/tutorials-2011/short-read-assembly-velvet.html","title":"03. \u7ec6\u83cc\u57fa\u56e0\u7ec4\u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u540e\u7684\u62fc\u63a5\u5de5\u4f5c\uff0c\u6709\u8bb8\u591a\u8f6f\u4ef6\u53ef\u4ee5\u5b8c\u6210\u3002\u8fd1\u51e0\u5e74\u4e0d\u65ad\u6709\u65b0\u7684\u4f18\u79c0\u62fc\u63a5\u8f6f\u4ef6\u6d8c\u73b0\uff0c\u672c\u8282\u4ec5\u6311\u9009\u51e0\u4e2a\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u62fc\u63a5\u4f7f\u7528\u8f83\u591a\u4e5f\u662f\u8bc4\u6d4b\u4e2d\u6bd4\u8f83\u4f18\u79c0\u7684\u51e0\u4e2a\u5de5\u5177\u3002\u4e5f\u53ef\u4ee5\u5148\u5bf9\u81ea\u5df1\u7684\u6d4b\u5e8f\u7269\u79cd\u505a\u4e00\u4e2a assembly evaluation\uff0c\u9009\u62e9\u6bd4\u8f83\u9002\u5408\u7684\u62fc\u63a5\u8f6f\u4ef6\u3002 \u5e38\u7528\u62fc\u63a5\u8f6f\u4ef6\u5de5\u5177\u5217\u8868 SPAdes <http://spades.bioinf.spbau.ru/> _ MaSuRCA <http://www.genome.umd.edu/masurca.html> _ Velvet A5_miseq \u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u53c2\u89c1 \u8fd9\u91cc <https://omictools.com/genome-assembly-category> _","title":"\u7ec6\u83cc\u57fa\u56e0\u7ec4\u77ed\u5e8f\u5217\u62fc\u63a5\u62fc\u63a5"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#1-spades","text":"SPAdes \u662f\u7531","title":"1. SPAdes"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#11-spades","text":"\u901a\u8fc7conda\u5b89\u88c5 $ conda create -n spades $ conda activate spades ( assembly ) $ conda install spades Docker\u65b9\u5f0f\u5b89\u88c5 $","title":"1.1 \u5b89\u88c5 SPAdes"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#12-spades","text":"# \u4ee5SRR95386 \u4e3a\u4f8b $ prefetch SRR956386 $ fastq-dump --split-e --gzip SRR956386.sra # -t 40 \u8868\u793a\u752840\u4e2a threads \u8fdb\u884c\u62fc\u63a5\uff0c\u6839\u636e\u81ea\u5df1\u7535\u8111\u7684CPU\u60c5\u51b5\u81ea\u884c\u8bbe\u7f6e\u3002 $ spades.py --careful -k 21 ,33,55,77,99,121 -1 SRR95386_1.fastq -2 SRR955386_2.fastq \\ > -o spades_output -t 40 SPAdes\u4f1a\u6839\u636e -k \u53c2\u6570\u9009\u62e9\u4e0d\u540c\u7684 Kmer \u8fdb\u884c de novo \u7ec4\u88c5\u3002\u5bf9\u4e8e\u5e38\u89c1\u7684 Miseq v2/v3 \u8bd5\u5242\u76d2\uff0c\u91c7\u7528 PE150/PE250/PE300 \u7684\u8bfb\u957f\u6d4b\u5e8f\uff0c\u5e38\u7528\u7684\u62fc\u63a5\u547d\u4ee4\u662f\uff1a # PE150 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e $ spades.py -k 21 ,33,55,77 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t 40 # PE250/300 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e $ spades.py -k 21 ,33,55,77,99,127 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t 40","title":"1.2 \u4f7f\u7528 spades \u62fc\u63a5\u4e8c\u4ee3\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#2-macursa","text":"","title":"2. Macursa"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#21-masurca","text":"$ conda create -n masurca $ conda activate masurca ( masurac ) $ conda install masurca","title":"2.1 \u5b89\u88c5 MaSuRCA"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#22","text":"$ touch SRR955386_masurca.config $ vim SRR955386_masurca.config \u6587\u4ef6\u5185\u5bb9\u4fee\u6539\u5982\u4e0b\uff1a DATA PE= p1 500 50 SRR955386_1.fastq SRR955386_2.fastq END PARAMETERS GRAPH_KMER_SIZE=auto USE_LINKING_MATES=1 LIMIT_JUMP_COVERAGE = 60 KMER_COUNT_THRESHOLD = 1 NUM_THREADS= 2 JF_SIZE=100000000 DO_HOMOPOLYMER_TRIM=0 END \u8bbe\u7f6e GRAPH_KMER_SIZE=auto \uff0c\u8f6f\u4ef6\u4f1a\u8c03\u7528Kmer=31\u6765\u8fdb\u884c\u62fc\u88c5\u3002\u5bf9\u4e8eMiSeq PE250\u4ee5\u4e0a\u7684\u63d2\u7247\uff0c\u53ef\u4ee5\u8003\u8651\u624b\u52a8\u8bbe\u7f6e\u4f7f\u7528\u66f4\u5927\u7684Kmer\u3002","title":"2.2 \u5efa\u7acb\u62fc\u88c5\u914d\u7f6e\u6587\u4ef6"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#23","text":"# \u8fd0\u884c masurca $ masurca SRR955386_masurca.config # \u751f\u6210\u7ec4\u88c5\u811a\u672c\uff0c\u8fd0\u884c $ ./assemble.sh","title":"2.3 \u5f00\u59cb\u62fc\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#3-velvet","text":"","title":"3. Velvet"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#31","text":"Velvet \u662f\u4e00\u4e2a\u8001\u724c\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u62fc\u63a5\u8f6f\u4ef6\u3002Velvet\u6700\u65b0\u7248\u672c\u662f1.2.10\uff0c\u53ef\u4ee5\u8bbf\u95ee \u5b98\u65b9\u7f51\u7ad9 <https://www.ebi.ac.uk/~zerbino/velvet/> _ \u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u514b\u9686 \u8f6f\u4ef6\u4ed3\u5e93 <https://github.com/dzerbino/velvet.git> _ \u7684\u65b9\u5f0f\u83b7\u5f97\u6700\u65b0\u7684\u6e90\u4ee3\u7801\u3002 \u4e0b\u8f7d\u6e90\u4ee3\u7801 \u666e\u901a\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\u81ea\u884c\u7f16\u8bd1\u83b7\u5f97\u8f6f\u4ef6\u3002 $ cd /tmp $ wget https://www.ebi.ac.uk/~zerbino/velvet/velvet_1.2.10.tgz $ tar xvf velvet_1.2.10.tgz -C ~/app/velvet \u514b\u9686\u4ee3\u7801\u4ed3\u5e93 \u5982\u679c\u5728\u8f6f\u4ef6\u8fd0\u884c\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u60f3\u8bd5\u7528\u6700\u65b0\u7248\u4ee3\u7801\uff0c\u6216\u662f\u6709\u80fd\u529b\u63d0\u4ea4issues\uff0c\u6216\u8005\u60f3\u6539\u8fdb\u8f6f\u4ef6\u53c2\u4e0e\u5f00\u6e90\u4ee3\u7801\u7f16\u5199\u7684\u53ef\u4ee5\u9009\u62e9\u514b\u9686\u4ee3\u7801\u5e93\u7684\u65b9\u5f0f\u3002 $ cd ~/tmp $ git clone https://github.com/dzerbino/velvet.git \u7f16\u8bd1\u5b89\u88c5 make\u53ef\u4ee5\u8fdb\u884c\u7f16\u8bd1\uff0c\u6709\u51e0\u4e2a\u7f16\u8bd1\u53c2\u6570\u53ef\u4ee5\u9009\u62e9\uff0c\u5206\u522b\u662fMAXKMERLENGTH, DIRECTORY .. code-block:: bash ~$ cd ~/app/velvet ~/app/velvet$ make 'MAXKMERLENGTH=127' ~/app/velvet$ sudo cp velveth velvetg /usr/local/sbin","title":"3.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#32","text":"velvet\u8f6f\u4ef6\u75312\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 velveth \u548c velvetg \u7ec4\u6210\u3002 $ velvet","title":"3.2 \u62fc\u63a5\u57fa\u56e0\u7ec4"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#4-a5-miseq","text":"A5-miseq <https://sourceforge.net/projects/ngopt/> __ \u662f\u4e00\u4e2a\u7528 perl \u5f00\u53d1\u7684\u9488\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4 de novo assembly \u7684 pipeline \u5de5\u5177\u3002\u5b83\u672c\u8eab\u4e0d\u53c2\u4e0e\u7ec4\u88c5\uff0c\u800c\u662f\u901a\u8fc7\u7ec4\u5408\u4e00\u5957\u5de5\u5177\u6765\u5b8c\u6210\u5de5\u4f5c\uff0c\u5de5\u5177\u96c6\u5305\u62ec\uff1a bwa samtools SGA bowtie Trimmomatic IDBA-UD SSPACE \u8fd9\u4e9b\u5de5\u5177\u90fd\u4ee5\u53ca\u96c6\u6210\u5728 A5-miseq \u4e2d\uff0c\u4e0d\u9700\u8981\u53e6\u5916\u5b89\u88c5\u3002\u4e3a\u4e86\u907f\u514d\u4e0d\u540c\u7248\u672c\u7684 samtools\uff0cbowtie \u5bf9\u7ed3\u679c\u4ea7\u751f\u7684\u5dee\u5f02\uff0c\u5efa\u8bae\u91c7\u7528\u865a\u62df\u73af\u5883\u5982 docker \u7b49\u6765\u9694\u79bb\u8fd0\u884c\u73af\u5883\u3002","title":"4. A5-miseq"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#41-a5-miseq","text":"\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5 $ wget http://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz $ tar zxvf a5_miseq_linux_20150522.tar.gz -C ~/app $ sudo ln -s ~/app/a5_miseq_linux_20150522/bin/a5_pipeline.pl /usr/local/sbin","title":"4.1 \u5b89\u88c5 A5-miseq"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#docker","text":"FROM ubuntu:latest MAINTAINER Mark Renton <indexofire@gmail.com> RUN apt-get update -qy RUN apt-get install -qy openjdk-7-jre-headless file ADD http://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz /tmp/a5_miseq.tar.gz RUN mkdir /tmp/a5_miseq RUN tar xzf /tmp/a5_miseq.tar.gz --directory /tmp/a5_miseq --strip-components = 1 ADD run /usr/local/bin/ ADD Procfile / ENTRYPOINT [ \"/usr/local/bin/run\" ]","title":"\u5efa\u7acb Docker \u5bb9\u5668\u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#42-a5-miseq","text":"$ perl a5_pipeline.pl SRR955386_1.fastq SRR955386_2.fastq ~/data/a5_output","title":"4.2 \u4f7f\u7528 A5-miseq"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#43-a5-miseq","text":"\u67e5\u770b A5-miseq \u5de5\u5177\u7684\u4f7f\u7528\u6587\u6863\u53ef\u4ee5\u7528 a5_pipeline.pl \u5de5\u5177\u67e5\u770b\u3002 # Usage: $ a5_pipeline.pl [ --begin = 1 -5 ] [ --end = 1 -5 ] [ --preprocessed ] <lib_file> <out_base>","title":"4.3 A5-miseq \u6587\u6863"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#5shovill","text":"Shovill \u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7ec4\u88c5\u6d41\u7a0b\uff0c\u5b83\u8c03\u7528spades\u6216velvet\u7b49\u8f6f\u4ef6\u8fdb\u884c\u62fc\u63a5\uff0c\u751f\u6210\u9002\u7528\u4e8e\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7ec4\u88c5\u7684\u7ed3\u679c\u3002","title":"5.Shovill"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#51","text":"$ conda create -n shovill $ conda activate shovill ( shovill ) $ conda install shovill","title":"5.1 \u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#52","text":"( shovill ) $ shovill --R1 --R2","title":"5.2 \u4f7f\u7528"},{"location":"book/C02_Raw-Data-to-Genome/03_bacteria-assembly/#reference","text":"http://www.chenlianfu.com/?p=1635 http://www.bbioo.com/lifesciences/40-116878-1.html http://www.plob.org/2012/11/21/4797.html http://ged.msu.edu/angus/tutorials-2011/short-read-assembly-velvet.html","title":"Reference:"},{"location":"book/C02_Raw-Data-to-Genome/04_virus-assembly/","text":"\u75c5\u6bd2\u57fa\u56e0\u7ec4\u7ec4\u88c5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u4e0e\u7ec6\u83cc\u4e00\u822c\u53ef\u4ee5\u57f9\u517b\u4ece\u800c\u83b7\u5f97\u9ad8\u8d28\u91cf\u7684\u57fa\u56e0\u7ec4DNA\uff0c\u7136\u540e\u8fdb\u884c\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u4e0d\u540c\u3002\u6709\u4e9b\u75c5\u6bd2\u96be\u4ee5\u57f9\u517b\uff08\u5982\u8bfa\u5982\u75c5\u6bd2\uff09\uff0c\u6709\u4e9b\u75c5\u6bd2\u57f9\u517b\u751f\u7269\u5b89\u5168\u7b49\u7ea7\u8981\u6c42\u8f83\u9ad8\uff0c\u4e14\u65f6\u95f4\u957f\u3002 \u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6709\u5f88\u591a\u65b9\u6cd5\uff0c\u8fd9\u91cc\u53ea\u9488\u5bf9\u4e8c\u4ee3\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u8fdb\u884c\u8ba8\u8bba\u3002\u7528\u4e8c\u4ee3\u6d4b\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u5bf9\u4e34\u5e8a\u6837\u672c\u4e2d\u5df2\u77e5\u75c5\u6bd2\u8fdb\u884c\u7279\u5f02\u6027PCR\u6269\u589e\u540e\u6d4b\u5e8f\uff1b\u6709\u4e9b\u5219\u91c7\u7528\u968f\u673a\u5f15\u7269\u6269\u589e\u540e\u518d\u6d4b\u5e8f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u9488\u5bf9\u672a\u77e5\u75c5\u6bd2\u5e8f\u5217\uff0c\u4f46\u7531\u4e8e\u4e0d\u540c\u6837\u672c\uff08\u6bd4\u5982\u4e34\u5e8a\u6837\u672c\uff09\u4e2d\u542b\u6709\u7684\u5e72\u6270\u6838\u9178\u8f83\u591a\uff08\u5982\u4eba\u6e90DNA\u7b49\uff09\uff0c\u5f80\u5f80\u9700\u8981\u5b9e\u9a8c\u4e2d\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u6216\u8005\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\u65f6\u7b5b\u9009\u3002 \u56e0\u6b64\u6211\u4eec\u53ea\u8ba8\u8bba\u7279\u5f02\u6027PCR\u6269\u589e\u540e\uff08\u7c7b\u4f3c\u4e00\u4ee3\u6d4b\u5e8f\uff09\u7528\u4e8c\u4ee3\u6d4b\u5e8f\u5206\u6790\u5df2\u77e5\u75c5\u6bd2\u7684\u65b9\u6cd5\u3002\u548c\u7ec6\u83cc\u5355\u514b\u9686\u57f9\u517b\u7269\u4e0d\u540c\uff0c\u4e34\u5e8a\u6837\u672c\u5373\u4f7fPCR\u6269\u589e\u540e\uff0c \u7531\u4e8e\u75c5\u6bd2\u57fa\u56e0\u7ec4\u4f4d\u70b9\u53d8\u5f02\u8f83\u660e\u663e\uff0c\u4f46\u662f\u5927\u7247\u6bb5\u7684\u5f02\u4f4d\u91cd\u7ec4\u6bd4\u8f83\u5c11\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u57fa\u4e8e mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u57fa\u56e0\u7ec4\u3002 \u9996\u5148\u8981\u9009\u62e9\u53c2\u8003\u5e8f\u5217\uff0c\u7531\u4e8e\u75c5\u6bd2\u7f16\u8bd1\u5927\uff0c\u6211\u4eec\u4e00\u822c\u5c3d\u53ef\u80fd\u9009\u62e9\u8fd1\u6e90\u7684\u6bd2\u682a\u3002\u6211\u4e48\u90a3\u53ef\u4ee5\u91c7\u7528 denovo \u7684\u65b9\u6cd5\u5148\u83b7\u5f97\u4e00\u4e2a\u5927\u7247\u6bb5\u9ad8\u8986\u76d6\u7684\u975e\u6c61\u67d3\u5e8f\u5217\uff0c\u7136\u540e blast \u627e\u5230\u8fd1\u6e90\u6bd2\u682a\u57fa\u56e0\u7ec4\u5e8f\u5217\uff0c\u5c06\u5176\u4f5c\u4e3a\u53c2\u8003\u57fa\u56e0\u7ec4\u518d\u4f7f\u7528 mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u6d4b\u5e8f\u6bd2\u682a\u7684\u57fa\u56e0\u7ec4\u3002 \u91c7\u7528 freebayes \u00b6 $ spades.py $ blast $ bwa index ref.fasta $ bwa mem $ samtools index $ samtools $ freebayes \u91c7\u7528 GATK4 \u00b6 $ trimmomatic # ID: # PL: Platform \u6d4b\u5e8f\u5e73\u53f0\uff0c\u8fd9\u91cc\u6570\u636e\u6765\u81ea illumina \u5e73\u53f0 # PU: # LB: # SM: Sample \u6837\u672c\u540d\u79f0 $ bwa mem -t 40 -M -Y -R \"@RG\\tID:S1\\tPL:illumina\\tPU:\\tLB:\\tSM:\" ref.fasta \\ > $ samtools sort -@ 4 -m 16G -O bam -o .sorted.bam $ gatk MarkDuplicates -I -M -O $ samtools index sorted.markdup.bam $ gatk BaseRecalibrator -R ref.fasta -I sorted.markdup.bam \\ > -O sorted.markdup.recal.table $ gatk ApplyBQSR --bqsr-recal-file sorted.markdup.recal.table -R ref.fasta > -I sorted.markdup.bam -O sorted.markdup.BQSR.bam $ samtools index $ gatk HaplotypeCaller -R ref.fasta -I sorted.markdup.BQSR.bam \\ > -O HC.vcf.gz # SNP call $ gatk VariantRecalibrator # Indel call \u4f7f\u7528 snippy \u00b6","title":"04. \u75c5\u6bd2\u57fa\u56e0\u7ec4\u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/04_virus-assembly/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u4e0e\u7ec6\u83cc\u4e00\u822c\u53ef\u4ee5\u57f9\u517b\u4ece\u800c\u83b7\u5f97\u9ad8\u8d28\u91cf\u7684\u57fa\u56e0\u7ec4DNA\uff0c\u7136\u540e\u8fdb\u884c\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u4e0d\u540c\u3002\u6709\u4e9b\u75c5\u6bd2\u96be\u4ee5\u57f9\u517b\uff08\u5982\u8bfa\u5982\u75c5\u6bd2\uff09\uff0c\u6709\u4e9b\u75c5\u6bd2\u57f9\u517b\u751f\u7269\u5b89\u5168\u7b49\u7ea7\u8981\u6c42\u8f83\u9ad8\uff0c\u4e14\u65f6\u95f4\u957f\u3002 \u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6709\u5f88\u591a\u65b9\u6cd5\uff0c\u8fd9\u91cc\u53ea\u9488\u5bf9\u4e8c\u4ee3\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u8fdb\u884c\u8ba8\u8bba\u3002\u7528\u4e8c\u4ee3\u6d4b\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u5bf9\u4e34\u5e8a\u6837\u672c\u4e2d\u5df2\u77e5\u75c5\u6bd2\u8fdb\u884c\u7279\u5f02\u6027PCR\u6269\u589e\u540e\u6d4b\u5e8f\uff1b\u6709\u4e9b\u5219\u91c7\u7528\u968f\u673a\u5f15\u7269\u6269\u589e\u540e\u518d\u6d4b\u5e8f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u9488\u5bf9\u672a\u77e5\u75c5\u6bd2\u5e8f\u5217\uff0c\u4f46\u7531\u4e8e\u4e0d\u540c\u6837\u672c\uff08\u6bd4\u5982\u4e34\u5e8a\u6837\u672c\uff09\u4e2d\u542b\u6709\u7684\u5e72\u6270\u6838\u9178\u8f83\u591a\uff08\u5982\u4eba\u6e90DNA\u7b49\uff09\uff0c\u5f80\u5f80\u9700\u8981\u5b9e\u9a8c\u4e2d\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u6216\u8005\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\u65f6\u7b5b\u9009\u3002 \u56e0\u6b64\u6211\u4eec\u53ea\u8ba8\u8bba\u7279\u5f02\u6027PCR\u6269\u589e\u540e\uff08\u7c7b\u4f3c\u4e00\u4ee3\u6d4b\u5e8f\uff09\u7528\u4e8c\u4ee3\u6d4b\u5e8f\u5206\u6790\u5df2\u77e5\u75c5\u6bd2\u7684\u65b9\u6cd5\u3002\u548c\u7ec6\u83cc\u5355\u514b\u9686\u57f9\u517b\u7269\u4e0d\u540c\uff0c\u4e34\u5e8a\u6837\u672c\u5373\u4f7fPCR\u6269\u589e\u540e\uff0c \u7531\u4e8e\u75c5\u6bd2\u57fa\u56e0\u7ec4\u4f4d\u70b9\u53d8\u5f02\u8f83\u660e\u663e\uff0c\u4f46\u662f\u5927\u7247\u6bb5\u7684\u5f02\u4f4d\u91cd\u7ec4\u6bd4\u8f83\u5c11\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u57fa\u4e8e mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u57fa\u56e0\u7ec4\u3002 \u9996\u5148\u8981\u9009\u62e9\u53c2\u8003\u5e8f\u5217\uff0c\u7531\u4e8e\u75c5\u6bd2\u7f16\u8bd1\u5927\uff0c\u6211\u4eec\u4e00\u822c\u5c3d\u53ef\u80fd\u9009\u62e9\u8fd1\u6e90\u7684\u6bd2\u682a\u3002\u6211\u4e48\u90a3\u53ef\u4ee5\u91c7\u7528 denovo \u7684\u65b9\u6cd5\u5148\u83b7\u5f97\u4e00\u4e2a\u5927\u7247\u6bb5\u9ad8\u8986\u76d6\u7684\u975e\u6c61\u67d3\u5e8f\u5217\uff0c\u7136\u540e blast \u627e\u5230\u8fd1\u6e90\u6bd2\u682a\u57fa\u56e0\u7ec4\u5e8f\u5217\uff0c\u5c06\u5176\u4f5c\u4e3a\u53c2\u8003\u57fa\u56e0\u7ec4\u518d\u4f7f\u7528 mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u6d4b\u5e8f\u6bd2\u682a\u7684\u57fa\u56e0\u7ec4\u3002","title":"\u75c5\u6bd2\u57fa\u56e0\u7ec4\u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/04_virus-assembly/#freebayes","text":"$ spades.py $ blast $ bwa index ref.fasta $ bwa mem $ samtools index $ samtools $ freebayes","title":"\u91c7\u7528 freebayes"},{"location":"book/C02_Raw-Data-to-Genome/04_virus-assembly/#gatk4","text":"$ trimmomatic # ID: # PL: Platform \u6d4b\u5e8f\u5e73\u53f0\uff0c\u8fd9\u91cc\u6570\u636e\u6765\u81ea illumina \u5e73\u53f0 # PU: # LB: # SM: Sample \u6837\u672c\u540d\u79f0 $ bwa mem -t 40 -M -Y -R \"@RG\\tID:S1\\tPL:illumina\\tPU:\\tLB:\\tSM:\" ref.fasta \\ > $ samtools sort -@ 4 -m 16G -O bam -o .sorted.bam $ gatk MarkDuplicates -I -M -O $ samtools index sorted.markdup.bam $ gatk BaseRecalibrator -R ref.fasta -I sorted.markdup.bam \\ > -O sorted.markdup.recal.table $ gatk ApplyBQSR --bqsr-recal-file sorted.markdup.recal.table -R ref.fasta > -I sorted.markdup.bam -O sorted.markdup.BQSR.bam $ samtools index $ gatk HaplotypeCaller -R ref.fasta -I sorted.markdup.BQSR.bam \\ > -O HC.vcf.gz # SNP call $ gatk VariantRecalibrator # Indel call","title":"\u91c7\u7528 GATK4"},{"location":"book/C02_Raw-Data-to-Genome/04_virus-assembly/#snippy","text":"","title":"\u4f7f\u7528 snippy"},{"location":"book/C02_Raw-Data-to-Genome/05_gatk3/","text":"GATK3 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u7a81\u53d8\u4f4d\u70b9\u5206\u6790\u6d41\u7a0b \u00b6 $ bwa index ref.fa $ bwa mem -t 4 -R '@RG\\tS1SM\\tS1' ref.fa S1_R1.fq.gz S1_R2.fq.gz > S1.sam $ samtools view -S -b S1.sam > S1.bam $ samtools sort -@ 4 -O bam -o S1.sorted.bam S1.bam $ java -jar picard.jar MarkDuplicates \\ > I = S1.sorted.bam \\ > O = S1.sorted.markdup.bam \\ > M = S1.markdup_metrics.txt $ samtools index S1.sorted.markdup.bam","title":"05. GATK3"},{"location":"book/C02_Raw-Data-to-Genome/05_gatk3/#gatk3","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"GATK3"},{"location":"book/C02_Raw-Data-to-Genome/05_gatk3/#_1","text":"$ bwa index ref.fa $ bwa mem -t 4 -R '@RG\\tS1SM\\tS1' ref.fa S1_R1.fq.gz S1_R2.fq.gz > S1.sam $ samtools view -S -b S1.sam > S1.bam $ samtools sort -@ 4 -O bam -o S1.sorted.bam S1.bam $ java -jar picard.jar MarkDuplicates \\ > I = S1.sorted.bam \\ > O = S1.sorted.markdup.bam \\ > M = S1.markdup_metrics.txt $ samtools index S1.sorted.markdup.bam","title":"\u7a81\u53d8\u4f4d\u70b9\u5206\u6790\u6d41\u7a0b"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/","text":"GATK4 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5 \u00b6 1.\u91c7\u7528 conda \u5b89\u88c5 \u00b6 # \u521b\u5efa\u865a\u62df\u73af\u5883 $ conda create -n gatk4 $ conda activate gatk4 # \u5b89\u88c5 gatk4 ( gatk4 ) $ conda install gatk4 # \u663e\u793a gatk4 \u5de5\u5177\u5217\u8868 ( gatk4 ) $ gatk --list # \u67e5\u770b\u4e8c\u7ea7\u547d\u4ee4\u7684\u5e2e\u52a9\u5185\u5bb9\uff0c\u8fd9\u91cc TOOLS \u4e3a\u5404\u4e2a\u4e8c\u7ea7\u547d\u4ee4\u540d\u79f0 ( gatk4 ) $ gatk TOOLS --help 2.\u91c7\u7528 docker \u5b89\u88c5 \u00b6 \u8fd9\u91cc\u4f7f\u7528\u5b98\u65b9\u955c\u50cf\u5730\u5740: https://hub.docker.com/r/broadinstitute/gatk/ \u3002 \u9996\u5148\u5728 docker hub \u6ce8\u518c\u4e00\u4e2a\u8d26\u6237\uff0c \u5728\u7ec8\u7aef\u7528 docker login \u547d\u4ee4\u767b\u5f55 # \u4f7f\u7528\u6ce8\u518c\u7684\u7528\u6237\u540d $ docker login -u your_username -p your_password $ docker pull broadinstitute/gatk # \u4ee5gatk\u4e3a\u955c\u50cf\uff0c\u542f\u52a8\u5bb9\u5668\u5e76\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u754c\u9762 $ docker run -it -rm broadinstitute/gatk bash root@bb3d14c7da19:/gatk# # \u770b\u5230root@bb3d14c7da19:/gatk# \u8868\u793a\u6210\u529f\u8fdb\u5165\u5bb9\u5668 # \u53c2\u6570\u542b\u4e49 -i \u4ea4\u4e92\u754c\u9762\u64cd\u4f5c -t \u7ec8\u7aef\u4e2d\u6267\u884c --rm \u8868\u793a\u63a8\u51fa\u5bb9\u5668\u540e\u7acb\u5373\u5220\u9664\u8be5\u5bb9\u5668\uff0c\u907f\u514d\u5360\u636e\u78c1\u76d8\u7a7a\u95f4 # \u67e5\u770b\u4e8c\u7ea7\u547d\u4ee4\u7684\u5e2e\u52a9\u5185\u5bb9\uff0c\u8fd9\u91cc TOOLS \u4e3a\u5404\u4e2a\u4e8c\u7ea7\u547d\u4ee4\u540d\u79f0 root@bb3d14c7da19:/gatk# gatk TOOLS --help # \u5982\u679c\u4f60\u7684docker\u6ca1\u6709\u542f\u52a8\uff0c\u5728Archlinux\u4e0b\u53ef\u4ee5systemctl\u542f\u52a8 $ sudo systemctl start docker.service # \u5982\u679c\u51fa\u73b0\u8be5\u9519\u8bef\uff0c\u56e0\u4e3a\u4f7f\u7528\u4e86\u65b0\u7684\u5185\u6838\uff0c\u91cd\u65b0\u542f\u52a8\u5373\u53ef # failed to create endpoint on network bridge: failed to add the host sandbox pair interfaces operation not supported. \u4f7f\u7528 \u00b6 1.GATK \u5de5\u5177 \u00b6 \u67e5\u770b\u5de5\u5177\u5217\u8868 $ gatk --list GATK4\u7684\u5de5\u5177\u5217\u8868\u5206\u7c7b\u4e3a\uff1a Base Calling CheckIlluminaDirectory: CollectIlluminaBasecallingMetrics CollectIlluminaLaneMetrics ExtractIlluminaBarcodes IlluminaBasecallsToFastq IlluminaBasecallsToSam MarkIlluminaAdapters Copy Number Variant Discovery Coverage Analysis Diagnostics and Quality Control Genotyping Arrays Manipulation Intervals Manipulation Metagenomics Methylation-Specific Tools Other Read Data Manipulation Reference Short Variant Discovery Structural Variant Discovery Variant Evaluation and Refinement Variant Filtering FixVcfHeader GatherVcfs GatherVcfsCloud LeftAlignAndTrimVariants LiftoverVcf MakeSitesOnlyVcf MakeVcfSampleNameMap MergeVcfs PrintVariantsSpark RemoveNearbyIndels RenameSampleInVcf SelectVariants SortVcf SplitVcfs UpdateVCFSequenceDictionary UpdateVcfSequenceDictionary VariantAnnotator VcfFormatConverter VcfToIntervalList 2.\u7a81\u53d8\u4f4d\u70b9\u5206\u6790\u6d41\u7a0b \u00b6 \u8fd9\u91cc\u4ee5\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u4e3a\u4f8b\uff0c\u53c2\u8003\u57fa\u56e0\u7ec4\u4e3aRMID2210633 # \u5f27\u83cc\u67092\u4e2a\u73af\u72b6\u67d3\u8272\u4f53\uff0c\u8fd9\u91cc\u5c06 RMID 2210633 \u76842\u6761\u67d3\u8272\u4f53\u5e8f\u5217\u5206\u522b\u6784\u5efa\u7d22\u5f15 # \u4e5f\u53ef\u4ee5\u5355\u72ec\u4e00\u4e2afasta\u683c\u5f0f\u57fa\u56e0\u7ec4\u5e8f\u5217\u6784\u5efa\u7d22\u5f15 $ samtools faidx NC_004603.fna $ samtools faidx NC_004605.fna # \u7528bwa\u53c2\u8003\u57fa\u56e0\u7ec4\u6784\u5efa\u7d22\u5f15 $ bwa index NC_004603.fna $ bwa mem -t 4 -R '@RG\\tID:test\\tSM:RMID2210633' NC_004603.fna \\ > SRR8535443_1.fastq.gz SRR8535443_2.fastq.gz | samtools view -bS > SRR8535443_chr1.bam $ samtools sort -@4 -o SRR8535443_chr1_sorted.bam SRR8535443_chr1.bam # \u53bb\u9664\u5149\u5b66\u91cd\u590d\u5e8f\u5217 $ gatk MarkDuplicates -I SRR8535443_chr1_sorted.bam \\ > -O SRR8535443_chr1_sorted_markdup.bam \\ > -M SRR8535443_chr1_sorted_markdup-metrics.txt # bam\u6587\u4ef6\u5efa\u7acb\u7d22\u5f15 $ samtool index SRR8535443_chr1_sorted_markdup.bam # gatk \u5bf9\u53c2\u8003\u5e8f\u5217\u751f\u6210 .dict \u6587\u4ef6 $ gatk CreateSequenceDictionary -R NC_004603.fna $ gatk HaplotypeCaller -R NC_004603.fna --emit-ref-confidence GVCF \\ > -I SRR8535443_chr1_sorted_markdup.bam \\ > -O SRR8535443_chr1.gvcf $ gatk GenotypeGVCFs -R NC_004603.fna \\ > -V SRR8535443_chr1.gvcf > -O SRR8535443_chr1.vcf \u6ce8\u610f\u4e8b\u9879 gatk4 \u9ed8\u8ba4\u6d41\u7a0bcall\u7684 SNP \u6570\u91cf\u6bd4 freebayes \u3001 snippy \u8981\u66f4\u591a\u3002\u4e3b\u8981\u539f\u56e0\u662ffreebayes\u628a\u8bb8\u591a4\u4e2a\u957f\u5ea6\u78b1\u57fa\u00bc\u4f4d\u7f6e\u53d8\u5316\u7684\u5e8f\u5217\u4f5c\u4e3a\u91cd\u7ec4complex\u800c\u4e0d\u662fsnp\uff0c\u800cgatk\u5219\u4f5c\u4e3asnp\u5904\u7406\u3002\u53e6\u5916gatk\u4f7f\u7528\u7684reads\u6570\u8ddf\u591a\uff0c\u53ef\u4ee5call\u51fa\u5934\u5c3e\u548c\u4e00\u4e9b\u4f4e\u8986\u76d6\u5ea6\u7684\u533a\u57df\u3002\u4f46\u662fgatk\u4f1a\u6709\u4e00\u4e9b\u65e0\u8986\u76d6\u533a\u57df\u7684snps\u51fa\u73b0\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u7814\u7a76\u662f\u4ec0\u4e48\u539f\u56e0\u9020\u6210\u7684\u3002\u5982\u679c\u65e0\u6cd5\u6d88\u9664\uff0c\u5219gatk\u53ef\u80fd\u4e0d\u9002\u5408\u4f5c\u4e3a\u5fae\u751f\u7269\u7684snp calling\u5de5\u5177\u3002","title":"06. GATK4"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#gatk4","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"GATK4"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#_1","text":"","title":"\u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#1-conda","text":"# \u521b\u5efa\u865a\u62df\u73af\u5883 $ conda create -n gatk4 $ conda activate gatk4 # \u5b89\u88c5 gatk4 ( gatk4 ) $ conda install gatk4 # \u663e\u793a gatk4 \u5de5\u5177\u5217\u8868 ( gatk4 ) $ gatk --list # \u67e5\u770b\u4e8c\u7ea7\u547d\u4ee4\u7684\u5e2e\u52a9\u5185\u5bb9\uff0c\u8fd9\u91cc TOOLS \u4e3a\u5404\u4e2a\u4e8c\u7ea7\u547d\u4ee4\u540d\u79f0 ( gatk4 ) $ gatk TOOLS --help","title":"1.\u91c7\u7528 conda \u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#2-docker","text":"\u8fd9\u91cc\u4f7f\u7528\u5b98\u65b9\u955c\u50cf\u5730\u5740: https://hub.docker.com/r/broadinstitute/gatk/ \u3002 \u9996\u5148\u5728 docker hub \u6ce8\u518c\u4e00\u4e2a\u8d26\u6237\uff0c \u5728\u7ec8\u7aef\u7528 docker login \u547d\u4ee4\u767b\u5f55 # \u4f7f\u7528\u6ce8\u518c\u7684\u7528\u6237\u540d $ docker login -u your_username -p your_password $ docker pull broadinstitute/gatk # \u4ee5gatk\u4e3a\u955c\u50cf\uff0c\u542f\u52a8\u5bb9\u5668\u5e76\u8fdb\u5165\u5bb9\u5668\u7684\u4ea4\u4e92\u754c\u9762 $ docker run -it -rm broadinstitute/gatk bash root@bb3d14c7da19:/gatk# # \u770b\u5230root@bb3d14c7da19:/gatk# \u8868\u793a\u6210\u529f\u8fdb\u5165\u5bb9\u5668 # \u53c2\u6570\u542b\u4e49 -i \u4ea4\u4e92\u754c\u9762\u64cd\u4f5c -t \u7ec8\u7aef\u4e2d\u6267\u884c --rm \u8868\u793a\u63a8\u51fa\u5bb9\u5668\u540e\u7acb\u5373\u5220\u9664\u8be5\u5bb9\u5668\uff0c\u907f\u514d\u5360\u636e\u78c1\u76d8\u7a7a\u95f4 # \u67e5\u770b\u4e8c\u7ea7\u547d\u4ee4\u7684\u5e2e\u52a9\u5185\u5bb9\uff0c\u8fd9\u91cc TOOLS \u4e3a\u5404\u4e2a\u4e8c\u7ea7\u547d\u4ee4\u540d\u79f0 root@bb3d14c7da19:/gatk# gatk TOOLS --help # \u5982\u679c\u4f60\u7684docker\u6ca1\u6709\u542f\u52a8\uff0c\u5728Archlinux\u4e0b\u53ef\u4ee5systemctl\u542f\u52a8 $ sudo systemctl start docker.service # \u5982\u679c\u51fa\u73b0\u8be5\u9519\u8bef\uff0c\u56e0\u4e3a\u4f7f\u7528\u4e86\u65b0\u7684\u5185\u6838\uff0c\u91cd\u65b0\u542f\u52a8\u5373\u53ef # failed to create endpoint on network bridge: failed to add the host sandbox pair interfaces operation not supported.","title":"2.\u91c7\u7528 docker \u5b89\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#_2","text":"","title":"\u4f7f\u7528"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#1gatk","text":"\u67e5\u770b\u5de5\u5177\u5217\u8868 $ gatk --list GATK4\u7684\u5de5\u5177\u5217\u8868\u5206\u7c7b\u4e3a\uff1a Base Calling CheckIlluminaDirectory: CollectIlluminaBasecallingMetrics CollectIlluminaLaneMetrics ExtractIlluminaBarcodes IlluminaBasecallsToFastq IlluminaBasecallsToSam MarkIlluminaAdapters Copy Number Variant Discovery Coverage Analysis Diagnostics and Quality Control Genotyping Arrays Manipulation Intervals Manipulation Metagenomics Methylation-Specific Tools Other Read Data Manipulation Reference Short Variant Discovery Structural Variant Discovery Variant Evaluation and Refinement Variant Filtering FixVcfHeader GatherVcfs GatherVcfsCloud LeftAlignAndTrimVariants LiftoverVcf MakeSitesOnlyVcf MakeVcfSampleNameMap MergeVcfs PrintVariantsSpark RemoveNearbyIndels RenameSampleInVcf SelectVariants SortVcf SplitVcfs UpdateVCFSequenceDictionary UpdateVcfSequenceDictionary VariantAnnotator VcfFormatConverter VcfToIntervalList","title":"1.GATK \u5de5\u5177"},{"location":"book/C02_Raw-Data-to-Genome/06_gatk4/#2","text":"\u8fd9\u91cc\u4ee5\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u4e3a\u4f8b\uff0c\u53c2\u8003\u57fa\u56e0\u7ec4\u4e3aRMID2210633 # \u5f27\u83cc\u67092\u4e2a\u73af\u72b6\u67d3\u8272\u4f53\uff0c\u8fd9\u91cc\u5c06 RMID 2210633 \u76842\u6761\u67d3\u8272\u4f53\u5e8f\u5217\u5206\u522b\u6784\u5efa\u7d22\u5f15 # \u4e5f\u53ef\u4ee5\u5355\u72ec\u4e00\u4e2afasta\u683c\u5f0f\u57fa\u56e0\u7ec4\u5e8f\u5217\u6784\u5efa\u7d22\u5f15 $ samtools faidx NC_004603.fna $ samtools faidx NC_004605.fna # \u7528bwa\u53c2\u8003\u57fa\u56e0\u7ec4\u6784\u5efa\u7d22\u5f15 $ bwa index NC_004603.fna $ bwa mem -t 4 -R '@RG\\tID:test\\tSM:RMID2210633' NC_004603.fna \\ > SRR8535443_1.fastq.gz SRR8535443_2.fastq.gz | samtools view -bS > SRR8535443_chr1.bam $ samtools sort -@4 -o SRR8535443_chr1_sorted.bam SRR8535443_chr1.bam # \u53bb\u9664\u5149\u5b66\u91cd\u590d\u5e8f\u5217 $ gatk MarkDuplicates -I SRR8535443_chr1_sorted.bam \\ > -O SRR8535443_chr1_sorted_markdup.bam \\ > -M SRR8535443_chr1_sorted_markdup-metrics.txt # bam\u6587\u4ef6\u5efa\u7acb\u7d22\u5f15 $ samtool index SRR8535443_chr1_sorted_markdup.bam # gatk \u5bf9\u53c2\u8003\u5e8f\u5217\u751f\u6210 .dict \u6587\u4ef6 $ gatk CreateSequenceDictionary -R NC_004603.fna $ gatk HaplotypeCaller -R NC_004603.fna --emit-ref-confidence GVCF \\ > -I SRR8535443_chr1_sorted_markdup.bam \\ > -O SRR8535443_chr1.gvcf $ gatk GenotypeGVCFs -R NC_004603.fna \\ > -V SRR8535443_chr1.gvcf > -O SRR8535443_chr1.vcf \u6ce8\u610f\u4e8b\u9879 gatk4 \u9ed8\u8ba4\u6d41\u7a0bcall\u7684 SNP \u6570\u91cf\u6bd4 freebayes \u3001 snippy \u8981\u66f4\u591a\u3002\u4e3b\u8981\u539f\u56e0\u662ffreebayes\u628a\u8bb8\u591a4\u4e2a\u957f\u5ea6\u78b1\u57fa\u00bc\u4f4d\u7f6e\u53d8\u5316\u7684\u5e8f\u5217\u4f5c\u4e3a\u91cd\u7ec4complex\u800c\u4e0d\u662fsnp\uff0c\u800cgatk\u5219\u4f5c\u4e3asnp\u5904\u7406\u3002\u53e6\u5916gatk\u4f7f\u7528\u7684reads\u6570\u8ddf\u591a\uff0c\u53ef\u4ee5call\u51fa\u5934\u5c3e\u548c\u4e00\u4e9b\u4f4e\u8986\u76d6\u5ea6\u7684\u533a\u57df\u3002\u4f46\u662fgatk\u4f1a\u6709\u4e00\u4e9b\u65e0\u8986\u76d6\u533a\u57df\u7684snps\u51fa\u73b0\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u7814\u7a76\u662f\u4ec0\u4e48\u539f\u56e0\u9020\u6210\u7684\u3002\u5982\u679c\u65e0\u6cd5\u6d88\u9664\uff0c\u5219gatk\u53ef\u80fd\u4e0d\u9002\u5408\u4f5c\u4e3a\u5fae\u751f\u7269\u7684snp calling\u5de5\u5177\u3002","title":"2.\u7a81\u53d8\u4f4d\u70b9\u5206\u6790\u6d41\u7a0b"},{"location":"book/C02_Raw-Data-to-Genome/10_snap/","text":"SNAP \u00b6 http://snap.cs.berkeley.edu","title":"SNAP"},{"location":"book/C02_Raw-Data-to-Genome/10_snap/#snap","text":"http://snap.cs.berkeley.edu","title":"SNAP"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/","text":"\u957f\u8bfb\u957f\u6d4b\u5e8f\u6570\u636e\u7ec4\u88c5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u76ee\u524d Pacbio \u548c Nanopore \u6d4b\u5e8f\u6280\u672f\u53ef\u4ee5\u6210\u751f K \u7ea7\u522b\u751a\u81f3 M \u7ea7\u522b\u7684reads\uff0c\u4f46\u662f\u5176\u76ee\u524d\u6765\u8bf4 base calling \u4ea7\u751f\u7684\u9519\u8bef\u8fd8\u662f\u8f83\u9ad8\uff0c\u56e0\u6b64\u4e00\u822c\u79f0\u5176 long noisy reads \u6570\u636e\u3002\u672c\u8282\u4ecb\u7ecd pacbio/nanopore \u6d4b\u5e8f\u6570\u636e\u8fdb\u884c\u57fa\u56e0\u7ec4\u7ec4\u88c5\u3002\u7528\u5230\u7684\u8f6f\u4ef6\u6709\uff1a minimap2: all vs all \u6bd4\u5bf9 miniasm: \u7ec4\u88c5 racon: \u77eb\u6b63 minimap \u662f Li heng \u9488\u5bf9 long noisy reads \u7684\u6bd4\u5bf9\u5de5\u5177\uff0c\u76ee\u524d\u5df2\u7ecf\u66f4\u65b0\u7684\u4e86 v2 \u7248\u672c\u3002miniasm \u4e5f\u662f\u5176\u5f00\u53d1\u7684\u7528\u4e8e\u7ec4\u88c5\u7684\u5de5\u5177\u3002 1. \u642d\u5efa\u5206\u6790\u73af\u5883 \u00b6 # \u5728\u4e4b\u524d\u5efa\u7acb\u7684 nanopore \u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5 $ conda create -n nanopore minimap miniasm \u4e0b\u8f7d\u5b9e\u9a8c\u5ba4\u6570\u636e # SRR8494940 \u662f\u4e00\u4e2a\u4f7f\u7528 minION \u6d4b\u5e8f\u7684\u5927\u80a0\u57c3\u5e0c\u83cc ST131-H22 \u83cc\u682a ( seqs ) $ prefetch -v SRR8285369 ( seqs ) $ fastq-dump --gzip SRR8285369.sra \u5f00\u59cb\u5206\u6790\u4e4b\u524d\u7684\u6570\u636e\u6587\u4ef6 . \u251c\u2500\u2500 SRR8285369.fastq.gz \u2514\u2500\u2500 SRR8285369.sra # \u4f7f\u7528 minimap \u8fdb\u884c all vs all \u81ea\u6211\u6bd4\u5bf9 ( nanopore ) $ minimap -Sw5 -L100 -m0 -t 4 SRR8285369.fastq.gz SRR8285369.fastq.gz | gzip -1 > SRR8285369.paf.gz # \u4f7f\u7528 minimap2 \u8fdb\u884c all vs all \u81ea\u6211\u6bd4\u5bf9 ( nanopore ) $ minimap2 -x ava-ont -t 4 SRR8285369.fastq.gz SRR8285369.fastq.gz | gzip -1 > SRR8285369.paf.gz # miniasm \u7ec4\u88c5\u57fa\u56e0\u7ec4 ( nanopore ) $ miniasm -f SRR8285369.fastq.gz SRR8285369.paf.gz > SRR8285369.gfa # \u751f\u6210 fasta \u4e2a\u662f\u5e8f\u5217 ( nanopore ) $ awk '$1 ~ /S/ {print \">\"$2\"\\n\"$3}' SRR8285369.gfa > SRR8285369.fasta # \u4f7f\u7528 racon \u77eb\u6b63 # round 1 ( nanopore ) $ minimap2 -t 4 SRR8285369.fasta SRR8285369.fastq.gz > correct1.gfa.paf ( nanopore ) $ racon -t 4 SRR8285369.fastq.gz correct1.gtf.paf SRR8285369.fasta > racon1.fasta # round 2 \uff08\u53ef\u9009\uff09 ( nanopore ) $ minimap2 -t 4 racon1.fasta SRR8285369.fastq.gz > correct2.gtf.paf ( nanopore ) $ racon -t 4 SRR8285369.fastq.gz correct2.gtf.paf racon1.fasta > racon2.fasta ( nanopore ) $ mv racon2.fasta SRR8285369_corr.fasta ( nanopore ) $ mash SRR8285369.fasta SRR8285369_corr.fasta \u7ec4\u88c5\u5b8c\u6210\u540e\u7684\u6570\u636e\u6587\u4ef6 . \u251c\u2500\u2500 correct1.gfa.paf \u251c\u2500\u2500 correct2.gfa.paf \u251c\u2500\u2500 racon1.fasta \u251c\u2500\u2500 racon2.fasta \u251c\u2500\u2500 SRR8285369_corr.fasta \u251c\u2500\u2500 SRR8285369.fasta \u251c\u2500\u2500 SRR8285369.fastq.gz \u251c\u2500\u2500 SRR8285369.gfa \u251c\u2500\u2500 SRR8285369.paf.gz \u2514\u2500\u2500 SRR8285369.sra long-noisy-assembly.sh \u521b\u5efa\u4e00\u4e2a shell \u811a\u672c\uff0c\u4fbf\u4e8e\u7ec4\u88c5\u64cd\u4f5c: #!/bin/bash source activate nanopore cpus = ` cat /proc/cpuinfo | grep \"processor\" | wc -l ` name = ` awk -F '.' '{print $1}' ` minimap2 -x $1 -t $cpus $2 $2 | gzip -1 > ${ name } .paf.gz miniasm -f $2 ${ name } .paf.gz > ${ name } .gfa awk '$1 ~ /S/ {print \">\"$2\"\\n\"$3}' ${ name } .gft > ${ name } .fasta minimap2 -t $cpus ${ name } .fasta $2 > ${ name } _corr1.gfa.paf racon -t $cpus $2 ${ name } _corr1.gfa.paf ${ name } .fasta > ${ name } _racon1.fasta minimap2 -t $cpus ${ name } _racon1.fasta $2 > ${ name } _corr2.gfa.paf racon -t $cpus $2 ${ name } _corr2.gfa.paf ${ name } _corr2.gtf.paf > ${ name } _racon2.fasta cp ${ name } _racon2.fasta ${ name } _corr.fasta 2. \u4f7f\u7528 \u00b6 2.1 miniasm \u4f7f\u7528 \u00b6 miniasm: https://github.com/lh3/miniasm miniasm \u662f\u4e00\u4e2a\u57fa\u4e8e Overlap OLC \u7b97\u6cd5\u7684 de novo assembler\uff0c\u53ef\u4ee5\u5bf9\u7c7b\u4f3c pacbio \u6216 nanopore \u6280\u672f\u83b7\u5f97\u7684\u957f\u9ad8\u9519\u8bef\u7387\u7684\u5e8f\u5217\u8fdb\u884c\u7ec4\u88c5\u3002miniasm \u91c7\u7528\u81ea\u6211 reads \u7684 all vs all \u6bd4\u5bf9\u7b56\u7565\uff0c # \u7ec4\u88c5 pacbio reads \u6570\u636e ( nanopore ) $ miniasm -x ava-pb -t 4 # \u7ec4\u88c5 nanopore \u6570\u636e ( nanopore ) $ miniasm -x ava-ont -t 4 miniasm \u4e3b\u8981\u53c2\u6570 R m \u6700\u5c0f\u5339\u914d\u5e8f\u5217\u957f\u5ea6\uff0c\u9ed8\u8ba4\u503c100 i 2.2 minimap \u4f7f\u7528 \u00b6 # \u591a\u5bf9\u591a\u6bd4\u5bf9 ( nanopore ) $ minimap -Sw5 -L100 -m0 -t40 reads.fq reads.fq | gzip -1 > reads.paf.gz # \u7ec4\u88c5 ( nanopore ) $ miniasm -f reads.fq reads.paf.gz > reads.gfa # \u5c06 gfa \u683c\u5f0f\u8f6c\u6362\u4e3a fasta \u683c\u5f0f ( nanopore ) $ awk '/^S/{print \">\"$2\"\\n\"$3}' reads.gfa | fold > reads.fa # \u62fc\u63a5\u7ed3\u679c\u7684 contigs \u6570 ( nanopore ) $ grep \">\" reads.fa | wc -l 3. \u5b9e\u4f8b \u00b6 # \u4f7f\u7528 edirect \u83b7\u53d6 NCBI sra \u6570\u636e\u5e93\u4e2d\u7684 nanopore \u6d4b\u5e8f\u7684\u6c99\u95e8\u83cc ( seq ) $ edirect -db 'sra' -query 'nanopore salmonella' | efetch -db # \u4e0b\u8f7d\u6570\u636e ( seq ) $ prefetch -v # \u5c06 sra \u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u6210 fastq \u683c\u5f0f ( seq ) $ fastq-dump # \u751f\u6210\u6a21\u62df\u6570\u636e ( nanopore ) $ minimap -Sw5 -L100 -m0 -t40 ( nanopore ) $ miniasm -f reads.fq Reference \u00b6 https://yiweiniu.github.io/blog/2018/03/Genome-assembly-pipeline-miniasm-Racon/ https://github.com/arvindsundaram/IN-BIOSx000/blob/2018/Assembly/practicals/07_Assembly_using_minasm+racon.md","title":"11. \u957f\u5e8f\u5217\u6bd4\u5bf9"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u76ee\u524d Pacbio \u548c Nanopore \u6d4b\u5e8f\u6280\u672f\u53ef\u4ee5\u6210\u751f K \u7ea7\u522b\u751a\u81f3 M \u7ea7\u522b\u7684reads\uff0c\u4f46\u662f\u5176\u76ee\u524d\u6765\u8bf4 base calling \u4ea7\u751f\u7684\u9519\u8bef\u8fd8\u662f\u8f83\u9ad8\uff0c\u56e0\u6b64\u4e00\u822c\u79f0\u5176 long noisy reads \u6570\u636e\u3002\u672c\u8282\u4ecb\u7ecd pacbio/nanopore \u6d4b\u5e8f\u6570\u636e\u8fdb\u884c\u57fa\u56e0\u7ec4\u7ec4\u88c5\u3002\u7528\u5230\u7684\u8f6f\u4ef6\u6709\uff1a minimap2: all vs all \u6bd4\u5bf9 miniasm: \u7ec4\u88c5 racon: \u77eb\u6b63 minimap \u662f Li heng \u9488\u5bf9 long noisy reads \u7684\u6bd4\u5bf9\u5de5\u5177\uff0c\u76ee\u524d\u5df2\u7ecf\u66f4\u65b0\u7684\u4e86 v2 \u7248\u672c\u3002miniasm \u4e5f\u662f\u5176\u5f00\u53d1\u7684\u7528\u4e8e\u7ec4\u88c5\u7684\u5de5\u5177\u3002","title":"\u957f\u8bfb\u957f\u6d4b\u5e8f\u6570\u636e\u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#1","text":"# \u5728\u4e4b\u524d\u5efa\u7acb\u7684 nanopore \u865a\u62df\u73af\u5883\u4e2d\u5b89\u88c5 $ conda create -n nanopore minimap miniasm \u4e0b\u8f7d\u5b9e\u9a8c\u5ba4\u6570\u636e # SRR8494940 \u662f\u4e00\u4e2a\u4f7f\u7528 minION \u6d4b\u5e8f\u7684\u5927\u80a0\u57c3\u5e0c\u83cc ST131-H22 \u83cc\u682a ( seqs ) $ prefetch -v SRR8285369 ( seqs ) $ fastq-dump --gzip SRR8285369.sra \u5f00\u59cb\u5206\u6790\u4e4b\u524d\u7684\u6570\u636e\u6587\u4ef6 . \u251c\u2500\u2500 SRR8285369.fastq.gz \u2514\u2500\u2500 SRR8285369.sra # \u4f7f\u7528 minimap \u8fdb\u884c all vs all \u81ea\u6211\u6bd4\u5bf9 ( nanopore ) $ minimap -Sw5 -L100 -m0 -t 4 SRR8285369.fastq.gz SRR8285369.fastq.gz | gzip -1 > SRR8285369.paf.gz # \u4f7f\u7528 minimap2 \u8fdb\u884c all vs all \u81ea\u6211\u6bd4\u5bf9 ( nanopore ) $ minimap2 -x ava-ont -t 4 SRR8285369.fastq.gz SRR8285369.fastq.gz | gzip -1 > SRR8285369.paf.gz # miniasm \u7ec4\u88c5\u57fa\u56e0\u7ec4 ( nanopore ) $ miniasm -f SRR8285369.fastq.gz SRR8285369.paf.gz > SRR8285369.gfa # \u751f\u6210 fasta \u4e2a\u662f\u5e8f\u5217 ( nanopore ) $ awk '$1 ~ /S/ {print \">\"$2\"\\n\"$3}' SRR8285369.gfa > SRR8285369.fasta # \u4f7f\u7528 racon \u77eb\u6b63 # round 1 ( nanopore ) $ minimap2 -t 4 SRR8285369.fasta SRR8285369.fastq.gz > correct1.gfa.paf ( nanopore ) $ racon -t 4 SRR8285369.fastq.gz correct1.gtf.paf SRR8285369.fasta > racon1.fasta # round 2 \uff08\u53ef\u9009\uff09 ( nanopore ) $ minimap2 -t 4 racon1.fasta SRR8285369.fastq.gz > correct2.gtf.paf ( nanopore ) $ racon -t 4 SRR8285369.fastq.gz correct2.gtf.paf racon1.fasta > racon2.fasta ( nanopore ) $ mv racon2.fasta SRR8285369_corr.fasta ( nanopore ) $ mash SRR8285369.fasta SRR8285369_corr.fasta \u7ec4\u88c5\u5b8c\u6210\u540e\u7684\u6570\u636e\u6587\u4ef6 . \u251c\u2500\u2500 correct1.gfa.paf \u251c\u2500\u2500 correct2.gfa.paf \u251c\u2500\u2500 racon1.fasta \u251c\u2500\u2500 racon2.fasta \u251c\u2500\u2500 SRR8285369_corr.fasta \u251c\u2500\u2500 SRR8285369.fasta \u251c\u2500\u2500 SRR8285369.fastq.gz \u251c\u2500\u2500 SRR8285369.gfa \u251c\u2500\u2500 SRR8285369.paf.gz \u2514\u2500\u2500 SRR8285369.sra long-noisy-assembly.sh \u521b\u5efa\u4e00\u4e2a shell \u811a\u672c\uff0c\u4fbf\u4e8e\u7ec4\u88c5\u64cd\u4f5c: #!/bin/bash source activate nanopore cpus = ` cat /proc/cpuinfo | grep \"processor\" | wc -l ` name = ` awk -F '.' '{print $1}' ` minimap2 -x $1 -t $cpus $2 $2 | gzip -1 > ${ name } .paf.gz miniasm -f $2 ${ name } .paf.gz > ${ name } .gfa awk '$1 ~ /S/ {print \">\"$2\"\\n\"$3}' ${ name } .gft > ${ name } .fasta minimap2 -t $cpus ${ name } .fasta $2 > ${ name } _corr1.gfa.paf racon -t $cpus $2 ${ name } _corr1.gfa.paf ${ name } .fasta > ${ name } _racon1.fasta minimap2 -t $cpus ${ name } _racon1.fasta $2 > ${ name } _corr2.gfa.paf racon -t $cpus $2 ${ name } _corr2.gfa.paf ${ name } _corr2.gtf.paf > ${ name } _racon2.fasta cp ${ name } _racon2.fasta ${ name } _corr.fasta","title":"1. \u642d\u5efa\u5206\u6790\u73af\u5883"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#2","text":"","title":"2. \u4f7f\u7528"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#21-miniasm","text":"miniasm: https://github.com/lh3/miniasm miniasm \u662f\u4e00\u4e2a\u57fa\u4e8e Overlap OLC \u7b97\u6cd5\u7684 de novo assembler\uff0c\u53ef\u4ee5\u5bf9\u7c7b\u4f3c pacbio \u6216 nanopore \u6280\u672f\u83b7\u5f97\u7684\u957f\u9ad8\u9519\u8bef\u7387\u7684\u5e8f\u5217\u8fdb\u884c\u7ec4\u88c5\u3002miniasm \u91c7\u7528\u81ea\u6211 reads \u7684 all vs all \u6bd4\u5bf9\u7b56\u7565\uff0c # \u7ec4\u88c5 pacbio reads \u6570\u636e ( nanopore ) $ miniasm -x ava-pb -t 4 # \u7ec4\u88c5 nanopore \u6570\u636e ( nanopore ) $ miniasm -x ava-ont -t 4 miniasm \u4e3b\u8981\u53c2\u6570 R m \u6700\u5c0f\u5339\u914d\u5e8f\u5217\u957f\u5ea6\uff0c\u9ed8\u8ba4\u503c100 i","title":"2.1 miniasm \u4f7f\u7528"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#22-minimap","text":"# \u591a\u5bf9\u591a\u6bd4\u5bf9 ( nanopore ) $ minimap -Sw5 -L100 -m0 -t40 reads.fq reads.fq | gzip -1 > reads.paf.gz # \u7ec4\u88c5 ( nanopore ) $ miniasm -f reads.fq reads.paf.gz > reads.gfa # \u5c06 gfa \u683c\u5f0f\u8f6c\u6362\u4e3a fasta \u683c\u5f0f ( nanopore ) $ awk '/^S/{print \">\"$2\"\\n\"$3}' reads.gfa | fold > reads.fa # \u62fc\u63a5\u7ed3\u679c\u7684 contigs \u6570 ( nanopore ) $ grep \">\" reads.fa | wc -l","title":"2.2 minimap \u4f7f\u7528"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#3","text":"# \u4f7f\u7528 edirect \u83b7\u53d6 NCBI sra \u6570\u636e\u5e93\u4e2d\u7684 nanopore \u6d4b\u5e8f\u7684\u6c99\u95e8\u83cc ( seq ) $ edirect -db 'sra' -query 'nanopore salmonella' | efetch -db # \u4e0b\u8f7d\u6570\u636e ( seq ) $ prefetch -v # \u5c06 sra \u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u6210 fastq \u683c\u5f0f ( seq ) $ fastq-dump # \u751f\u6210\u6a21\u62df\u6570\u636e ( nanopore ) $ minimap -Sw5 -L100 -m0 -t40 ( nanopore ) $ miniasm -f reads.fq","title":"3. \u5b9e\u4f8b"},{"location":"book/C02_Raw-Data-to-Genome/11_long-noisy-reads-assembly/#reference","text":"https://yiweiniu.github.io/blog/2018/03/Genome-assembly-pipeline-miniasm-Racon/ https://github.com/arvindsundaram/IN-BIOSx000/blob/2018/Assembly/practicals/07_Assembly_using_minasm+racon.md","title":"Reference"},{"location":"book/C02_Raw-Data-to-Genome/12_hybrid-assembly/","text":"\u6df7\u5408\u7ec4\u88c5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u7ed3\u5408 illumina \u6d4b\u5e8f\u548c PacBio/Nanopore \u6d4b\u5e8f\u6570\u636e\uff0c\u53ef\u4ee5\u8f83\u5bb9\u6613\u83b7\u5f97\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7684\u5b8c\u6210\u56fe\u3002\u5e38\u89c1\u7684\u6df7\u5408\u7ec4\u88c5\u8f6f\u4ef6\uff1a spades canu \u65b9\u6cd5 \u00b6 1. spades \u7ec4\u88c5 \u00b6 ( denovo ) $ spades.py 2. unicycler \u7ec4\u88c5 \u00b6 $ conda activate nanopore ( nanopore ) $ unicycle -1 -2 -l","title":"12. \u4e8c\u4ee3\u4e09\u4ee3\u6df7\u5408\u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/12_hybrid-assembly/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u7ed3\u5408 illumina \u6d4b\u5e8f\u548c PacBio/Nanopore \u6d4b\u5e8f\u6570\u636e\uff0c\u53ef\u4ee5\u8f83\u5bb9\u6613\u83b7\u5f97\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7684\u5b8c\u6210\u56fe\u3002\u5e38\u89c1\u7684\u6df7\u5408\u7ec4\u88c5\u8f6f\u4ef6\uff1a spades canu","title":"\u6df7\u5408\u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/12_hybrid-assembly/#_2","text":"","title":"\u65b9\u6cd5"},{"location":"book/C02_Raw-Data-to-Genome/12_hybrid-assembly/#1-spades","text":"( denovo ) $ spades.py","title":"1. spades \u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/12_hybrid-assembly/#2-unicycler","text":"$ conda activate nanopore ( nanopore ) $ unicycle -1 -2 -l","title":"2. unicycler \u7ec4\u88c5"},{"location":"book/C02_Raw-Data-to-Genome/14_bwa-long-sequence-mapping/","text":"bwa \u957f\u7247\u6bb5\u6bd4\u5bf9 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd Phil Ashton \u7b49\u4eba\u6700\u8fd1\u53d1\u8868\u7684\u4e00\u7bc7 \u8bba\u6587 \u5982\u4f55\u91c7\u7528 bwa-mem \u5e94\u7528\u5230\u957f\u7247\u6bb5\u6d4b\u5e8f\u5982\u725b\u6d25\u7eb3\u7c73\u5b54\uff08ONT\uff09\u3002 \u5c3d\u7ba1bwa-mem\u7684\u7b2c\u4e00\u4e2a\u7248\u672c\u4e0ePacBio\u4e00\u8d77\u5de5\u4f5c\uff0c\u4f46\u5b83\u4ea7\u751f\u7684\u5bf9\u9f50\u8fc7\u4e8e\u5206\u6563\u800c\u65e0\u6cd5\u4f7f\u7528\u3002\u6211\u6700\u521d\u8ba4\u4e3abwa-mem\u4f7f\u7528\u7684\u957f\u7cbe\u786e\u79cd\u5b50\u5bf9PacBio\u8bfb\u6570\u7684~15\uff05\u9519\u8bef\u7387\u4e0d\u591f\u654f\u611f\uff0c\u4f46 Homolog.us \u6307\u51faBLASR\u4e5f\u4f7f\u7528\u957f\u7cbe\u786e\u79cd\u5b50\u3002\u7136\u540e\u6211\u610f\u8bc6\u5230bwa-mem\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u4f7f\u7528PacBio\u6570\u636e\u3002\u968f\u7740\u8d8a\u6765\u8d8a\u591a\u6709\u8da3\u7684PacBio\u6570\u636e\u96c6\u7684\u51fa\u73b0\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4e00\u4e0b\u3002 BWA-MEM \u7b97\u6cd5\u6709\u4e24\u4e2a\u4e3b\u8981\u53d8\u5316\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u652f\u6301PacBio\u6570\u636e\u3002\u9996\u5148\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528\u653e\u677e\u7684\u8bc4\u5206\u77e9\u9635\uff0c\u4ee5\u4fbfSmith-Waterman\uff08SW\uff09\u53ef\u4ee5\u5728\u6709\u6548\u5339\u914d\u4e0a\u7ed9\u51fa\u6b63\u5206\u6570\u3002\u57280.7.9\u548c0.7.10\u4e2d\uff0c\u8bc4\u5206\u65b9\u6848\u662f\uff1amatch = 2\uff0cmismatch = -5\uff0cgapOpen = -2\u548cgapExt = -1\u3002\u5176\u6b21\uff0c\u6211\u6dfb\u52a0\u4e86\u4e00\u4e2a\u542f\u53d1\u5f0f\u6765\u8fc7\u6ee4\u521d\u59cb\u79cd\u5b50\uff0c\u4ee5\u51cf\u5c11\u4e0d\u6210\u529f\u7684\u79cd\u5b50\u6269\u5c55\u3002\u5bf9\u4e8ePacBio\u8bfb\u6570\uff0cbwa-mem\u5728\u6bcf\u4e2a\u79cd\u5b50\u5468\u56f4\u7684\u5c0f\u7a97\u53e3\u4e2d\u6267\u884cSSE2-SW\uff0c\u7136\u540e\u5982\u679cSW\u5f97\u5206\u592a\u5c0f\uff08\u9608\u503c\u4e0e\u9009\u9879-W\u6210\u6bd4\u4f8b\uff09\u5219\u62d2\u7edd\u79cd\u5b50\u3002\u8fd9\u7c7b\u4f3c\u4e8eBLAST\u7684X-dropoff\u542f\u53d1\u5f0f\u7b97\u6cd5\u3002\u9664\u6b64\u4e4b\u5916\uff0cbwa-mem\u8fd8\u5b9e\u73b0\u4e86\u95f4\u9699\u4fee\u8865\u542f\u53d1\u5f0f\u7b97\u6cd5\uff0c\u5373\u4f7f\u7ed3\u679c\u5bf9\u9f50\u4e0d\u662f\u6700\u4f18\u7684\uff0c\u5b83\u4e5f\u4f1a\u5c1d\u8bd5\u5c06\u4e24\u4e2a\u5171\u7ebf\u5c40\u90e8\u547d\u4e2d\u4e0e\u5168\u5c40\u5bf9\u9f50\u8fde\u63a5\u8d77\u6765\u3002\u8fd9\u79cd\u542f\u53d1\u5f0f\u65b9\u6cd5\u6709\u52a9\u4e8e\u8ba9\u5bf9\u9f50\u904d\u5386\u4f4e\u8d28\u91cf\u533a\u57df\uff0c\u4ece\u800c\u51cf\u5c11\u788e\u7247\u3002\u901a\u8fc7\u8fd9\u4e9b\u66f4\u6539\uff0cbwa-mem\u9002\u7528\u4e8ePacBio\u6570\u636e\u3002 \u7531\u4e8e\u5176\u8f83\u9ad8\u7684\u9519\u8bef\u7387\uff0cONT\u8bfb\u53d6\u5e26\u6765\u4e86\u65b0\u7684\u6311\u6218\u3002\u5355\u5411\uff081D\uff09\u8bfb\u6570\u7684\u521d\u59cb\u91ca\u653e\u5177\u6709\u9ad8\u4e8e30\uff05\u7684\u9519\u8bef\u7387\u3002 2D\u8bfb\u53d6\u8981\u597d\u4e00\u4e9b\uff0c\u4f46\u73b0\u5728\u4ecd\u7136\u6bd4PacBio\u6709\u66f4\u591a\u9519\u8bef\u3002 PacBio\u6a21\u5f0f\u4e0d\u592a\u5408\u9002\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u6539\u8fdbbwa-mem\u3002 ONT\u7279\u5b9a\u7684\u66f4\u6539\u76f8\u5bf9\u7b80\u5355\u3002\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528\u8f83\u77ed\u7684\u79cd\u5b50\u957f\u5ea6\u548c\u66f4\u5bbd\u677e\u7684\u9608\u503c-W\u4f5c\u4e3a\u66f4\u9ad8\u9519\u8bef\u7387\u7684\u7ed3\u679c\u3002\u5176\u6b21\uff0c\u6211\u4eec\u6839\u636e\u6700\u8fd1\u7684\u8bba\u6587\u4fee\u6539\u5f97\u5206\u77e9\u9635\u5339\u914d= 1\uff0cmismatch = -1\uff0cgapOpen = -1\u548cgapExt = -1\u3002\u5bf9\u4e8ePacBio\u6765\u8bf4\uff0c\u8fd9\u4e2a\u8bbe\u7f6e\u4e5f\u66f4\u597d\u3002 bwa-mem\u7684ONT\u6a21\u5f0f\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4e0e LAST \u76f8\u5f53\uff0c LAST \u662f\u51e0\u4e2a\u56e2\u961f\u63a8\u8350\u7684\u6620\u5c04\u5668\u3002\u7ed9\u5b9a\u76f8\u540c\u7684\u8bc4\u5206\u7cfb\u7edf\uff0c\u4e24\u4e2a\u6620\u5c04\u5668\u5927\u591a\u6570\u65f6\u95f4\u751f\u6210\u76f8\u540c\u7684SW\u5206\u6570\u3002\u5f53\u5f97\u5206\u4e0d\u540c\u65f6\uff0c LAST \u5f80\u5f80\u4f1a\u6210\u4e3a\u8d62\u5bb6 - \u5728\u8fd9\u4e00\u5c0f\u90e8\u5206\u6bd4\u8d5b\u4e2d\u5f97\u5206\u4e0d\u540c\uff0cbwa-mem\u66f4\u6709\u53ef\u80fd\u9519\u8fc7\u4f4e\u8d28\u91cf\u7684\u547d\u4e2d\u6216\u65e0\u6cd5\u5c06\u90e8\u5206\u5bf9\u9f50\u6269\u5c55\u5230\u6b63\u786e\u7684\u4f4d\u7f6e\uff08\u6211\u9700\u8981\u8d70\u8def\uff09\u901a\u8fc7\u8fd9\u4e9b\u4f8b\u5b50\u6765\u7406\u89e3\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\uff09\u3002\u5bf9\u4e8e\u7ec6\u83cc\u6570\u636e\uff0cbwa-mem\u548cLAST\u7684\u901f\u5ea6\u4e5f\u5dee\u4e0d\u591a\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u4eba\u7c7bPacBio\u8bfb\u53d6\uff0cbwa-mem\u7684\u901f\u5ea6\u8981\u5feb\u4e00\u4e9b\u3002\u5b83\u66f4\u9002\u5408\u4eba\u7c7b\u6570\u636e\u3002 LAST \u53ef\u80fd\u662f\u552f\u4e00\u4e00\u4e2a\u6709\u6548\u4e14\u51c6\u786e\u5730\u5de5\u4f5c\u7684\u6620\u5c04\u5668\uff0c\u67e5\u8be2\u5e8f\u5217\u8303\u56f4\u4ece100bp\u5230100Mbp\uff0c\u65e0\u9700\u592a\u591a\u53c2\u6570\u8c03\u6574\u3002\u8fd9\u975e\u5e38\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u3002\u622a\u81f3\u76ee\u524d\uff0cbwa-mem\u5bf9\u4e8e\u8d85\u8fc7~10Mbp\u7684\u67e5\u8be2\u6548\u679c\u4e0d\u4f73\u3002 # bwa version > 0.7.10 \u652f\u6301 $ bwa mem -x ont2d ref.fa reads.fq minimap2 \u00b6","title":"14. bwa \u957f\u5e8f\u5217\u6bd4\u5bf9"},{"location":"book/C02_Raw-Data-to-Genome/14_bwa-long-sequence-mapping/#bwa","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd Phil Ashton \u7b49\u4eba\u6700\u8fd1\u53d1\u8868\u7684\u4e00\u7bc7 \u8bba\u6587 \u5982\u4f55\u91c7\u7528 bwa-mem \u5e94\u7528\u5230\u957f\u7247\u6bb5\u6d4b\u5e8f\u5982\u725b\u6d25\u7eb3\u7c73\u5b54\uff08ONT\uff09\u3002 \u5c3d\u7ba1bwa-mem\u7684\u7b2c\u4e00\u4e2a\u7248\u672c\u4e0ePacBio\u4e00\u8d77\u5de5\u4f5c\uff0c\u4f46\u5b83\u4ea7\u751f\u7684\u5bf9\u9f50\u8fc7\u4e8e\u5206\u6563\u800c\u65e0\u6cd5\u4f7f\u7528\u3002\u6211\u6700\u521d\u8ba4\u4e3abwa-mem\u4f7f\u7528\u7684\u957f\u7cbe\u786e\u79cd\u5b50\u5bf9PacBio\u8bfb\u6570\u7684~15\uff05\u9519\u8bef\u7387\u4e0d\u591f\u654f\u611f\uff0c\u4f46 Homolog.us \u6307\u51faBLASR\u4e5f\u4f7f\u7528\u957f\u7cbe\u786e\u79cd\u5b50\u3002\u7136\u540e\u6211\u610f\u8bc6\u5230bwa-mem\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u4f7f\u7528PacBio\u6570\u636e\u3002\u968f\u7740\u8d8a\u6765\u8d8a\u591a\u6709\u8da3\u7684PacBio\u6570\u636e\u96c6\u7684\u51fa\u73b0\uff0c\u6211\u51b3\u5b9a\u5c1d\u8bd5\u4e00\u4e0b\u3002 BWA-MEM \u7b97\u6cd5\u6709\u4e24\u4e2a\u4e3b\u8981\u53d8\u5316\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u652f\u6301PacBio\u6570\u636e\u3002\u9996\u5148\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528\u653e\u677e\u7684\u8bc4\u5206\u77e9\u9635\uff0c\u4ee5\u4fbfSmith-Waterman\uff08SW\uff09\u53ef\u4ee5\u5728\u6709\u6548\u5339\u914d\u4e0a\u7ed9\u51fa\u6b63\u5206\u6570\u3002\u57280.7.9\u548c0.7.10\u4e2d\uff0c\u8bc4\u5206\u65b9\u6848\u662f\uff1amatch = 2\uff0cmismatch = -5\uff0cgapOpen = -2\u548cgapExt = -1\u3002\u5176\u6b21\uff0c\u6211\u6dfb\u52a0\u4e86\u4e00\u4e2a\u542f\u53d1\u5f0f\u6765\u8fc7\u6ee4\u521d\u59cb\u79cd\u5b50\uff0c\u4ee5\u51cf\u5c11\u4e0d\u6210\u529f\u7684\u79cd\u5b50\u6269\u5c55\u3002\u5bf9\u4e8ePacBio\u8bfb\u6570\uff0cbwa-mem\u5728\u6bcf\u4e2a\u79cd\u5b50\u5468\u56f4\u7684\u5c0f\u7a97\u53e3\u4e2d\u6267\u884cSSE2-SW\uff0c\u7136\u540e\u5982\u679cSW\u5f97\u5206\u592a\u5c0f\uff08\u9608\u503c\u4e0e\u9009\u9879-W\u6210\u6bd4\u4f8b\uff09\u5219\u62d2\u7edd\u79cd\u5b50\u3002\u8fd9\u7c7b\u4f3c\u4e8eBLAST\u7684X-dropoff\u542f\u53d1\u5f0f\u7b97\u6cd5\u3002\u9664\u6b64\u4e4b\u5916\uff0cbwa-mem\u8fd8\u5b9e\u73b0\u4e86\u95f4\u9699\u4fee\u8865\u542f\u53d1\u5f0f\u7b97\u6cd5\uff0c\u5373\u4f7f\u7ed3\u679c\u5bf9\u9f50\u4e0d\u662f\u6700\u4f18\u7684\uff0c\u5b83\u4e5f\u4f1a\u5c1d\u8bd5\u5c06\u4e24\u4e2a\u5171\u7ebf\u5c40\u90e8\u547d\u4e2d\u4e0e\u5168\u5c40\u5bf9\u9f50\u8fde\u63a5\u8d77\u6765\u3002\u8fd9\u79cd\u542f\u53d1\u5f0f\u65b9\u6cd5\u6709\u52a9\u4e8e\u8ba9\u5bf9\u9f50\u904d\u5386\u4f4e\u8d28\u91cf\u533a\u57df\uff0c\u4ece\u800c\u51cf\u5c11\u788e\u7247\u3002\u901a\u8fc7\u8fd9\u4e9b\u66f4\u6539\uff0cbwa-mem\u9002\u7528\u4e8ePacBio\u6570\u636e\u3002 \u7531\u4e8e\u5176\u8f83\u9ad8\u7684\u9519\u8bef\u7387\uff0cONT\u8bfb\u53d6\u5e26\u6765\u4e86\u65b0\u7684\u6311\u6218\u3002\u5355\u5411\uff081D\uff09\u8bfb\u6570\u7684\u521d\u59cb\u91ca\u653e\u5177\u6709\u9ad8\u4e8e30\uff05\u7684\u9519\u8bef\u7387\u3002 2D\u8bfb\u53d6\u8981\u597d\u4e00\u4e9b\uff0c\u4f46\u73b0\u5728\u4ecd\u7136\u6bd4PacBio\u6709\u66f4\u591a\u9519\u8bef\u3002 PacBio\u6a21\u5f0f\u4e0d\u592a\u5408\u9002\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u6539\u8fdbbwa-mem\u3002 ONT\u7279\u5b9a\u7684\u66f4\u6539\u76f8\u5bf9\u7b80\u5355\u3002\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528\u8f83\u77ed\u7684\u79cd\u5b50\u957f\u5ea6\u548c\u66f4\u5bbd\u677e\u7684\u9608\u503c-W\u4f5c\u4e3a\u66f4\u9ad8\u9519\u8bef\u7387\u7684\u7ed3\u679c\u3002\u5176\u6b21\uff0c\u6211\u4eec\u6839\u636e\u6700\u8fd1\u7684\u8bba\u6587\u4fee\u6539\u5f97\u5206\u77e9\u9635\u5339\u914d= 1\uff0cmismatch = -1\uff0cgapOpen = -1\u548cgapExt = -1\u3002\u5bf9\u4e8ePacBio\u6765\u8bf4\uff0c\u8fd9\u4e2a\u8bbe\u7f6e\u4e5f\u66f4\u597d\u3002 bwa-mem\u7684ONT\u6a21\u5f0f\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4e0e LAST \u76f8\u5f53\uff0c LAST \u662f\u51e0\u4e2a\u56e2\u961f\u63a8\u8350\u7684\u6620\u5c04\u5668\u3002\u7ed9\u5b9a\u76f8\u540c\u7684\u8bc4\u5206\u7cfb\u7edf\uff0c\u4e24\u4e2a\u6620\u5c04\u5668\u5927\u591a\u6570\u65f6\u95f4\u751f\u6210\u76f8\u540c\u7684SW\u5206\u6570\u3002\u5f53\u5f97\u5206\u4e0d\u540c\u65f6\uff0c LAST \u5f80\u5f80\u4f1a\u6210\u4e3a\u8d62\u5bb6 - \u5728\u8fd9\u4e00\u5c0f\u90e8\u5206\u6bd4\u8d5b\u4e2d\u5f97\u5206\u4e0d\u540c\uff0cbwa-mem\u66f4\u6709\u53ef\u80fd\u9519\u8fc7\u4f4e\u8d28\u91cf\u7684\u547d\u4e2d\u6216\u65e0\u6cd5\u5c06\u90e8\u5206\u5bf9\u9f50\u6269\u5c55\u5230\u6b63\u786e\u7684\u4f4d\u7f6e\uff08\u6211\u9700\u8981\u8d70\u8def\uff09\u901a\u8fc7\u8fd9\u4e9b\u4f8b\u5b50\u6765\u7406\u89e3\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\uff09\u3002\u5bf9\u4e8e\u7ec6\u83cc\u6570\u636e\uff0cbwa-mem\u548cLAST\u7684\u901f\u5ea6\u4e5f\u5dee\u4e0d\u591a\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u4eba\u7c7bPacBio\u8bfb\u53d6\uff0cbwa-mem\u7684\u901f\u5ea6\u8981\u5feb\u4e00\u4e9b\u3002\u5b83\u66f4\u9002\u5408\u4eba\u7c7b\u6570\u636e\u3002 LAST \u53ef\u80fd\u662f\u552f\u4e00\u4e00\u4e2a\u6709\u6548\u4e14\u51c6\u786e\u5730\u5de5\u4f5c\u7684\u6620\u5c04\u5668\uff0c\u67e5\u8be2\u5e8f\u5217\u8303\u56f4\u4ece100bp\u5230100Mbp\uff0c\u65e0\u9700\u592a\u591a\u53c2\u6570\u8c03\u6574\u3002\u8fd9\u975e\u5e38\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u3002\u622a\u81f3\u76ee\u524d\uff0cbwa-mem\u5bf9\u4e8e\u8d85\u8fc7~10Mbp\u7684\u67e5\u8be2\u6548\u679c\u4e0d\u4f73\u3002 # bwa version > 0.7.10 \u652f\u6301 $ bwa mem -x ont2d ref.fa reads.fq","title":"bwa \u957f\u7247\u6bb5\u6bd4\u5bf9"},{"location":"book/C02_Raw-Data-to-Genome/14_bwa-long-sequence-mapping/#minimap2","text":"","title":"minimap2"},{"location":"book/C02_Raw-Data-to-Genome/15_whatshap/","text":"Whatshap \u00b6 https://whatshap.readthedocs.io/en/latest/","title":"Whatshap"},{"location":"book/C02_Raw-Data-to-Genome/15_whatshap/#whatshap","text":"https://whatshap.readthedocs.io/en/latest/","title":"Whatshap"},{"location":"book/C03_Genome-Annotation/","text":"","title":"Index"},{"location":"book/C03_Genome-Annotation/01_prokka/","text":"Prokka \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Prokka \u662f\u4e00\u4e2a\u539f\u6838\u7269\u79cd\u57fa\u56e0\u7ec4\u6ce8\u91ca\u5de5\u5177\uff0c\u7531\u58a8\u5c14\u672c\u5927\u5b66\u751f\u7269\u4fe1\u606f\u5b66\u5bb6 Torsten Seemann \u5f00\u53d1\u7684\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u672c\u5730\u5feb\u901f\u6ce8\u91ca\u5de5\u5177\uff0c\u7528\u6765\u6ce8\u91ca\u5c0f\u57fa\u56e0\u7ec4\u6bd4\u5982\u7ec6\u83cc\u3001\u75c5\u6bd2\u7b49\u975e\u5e38\u65b9\u4fbf\u3001\u5feb\u901f\u3002 \u5b89\u88c5 Prokka \u00b6 1.\u4e0b\u8f7d\u5b89\u88c5 \u00b6 \u5982\u679c\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5\u7684\u8bdd\uff0c\u9700\u8981\u6709Bioperl\u652f\u6301\u3002\u4ee5\u53ca\u4e00\u4e9b\u7b2c\u4e09\u65b9\u5e93\u548c\u8f6f\u4ef6\u7684\u652f\u6301\u3002 # \u5b89\u88c5 Bioperl $ sudo apt-get install cpanminus $ cpanm Bio::Perl XML::Simple # \u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56 $ sudo apt-get install libdatetime-perl libxml-simple-perl libdigest-md5-perl git default-jre bioperl # \u5b89\u88c5 rRNA \u6ce8\u91ca\u529f\u80fd # \u8fd9\u91cc\u9009\u62e9 Barrnap \u548c MINCED $ wget http://www.vicbioinformatics.com/barrnap-0.6.tar.gz $ tar zxvf barrnap-0.5.tar.gz -C ~/app/ $ echo \"export PATH= $PATH : $HOME /app/barrnap-0.6/bin\" >> ~/.bashrc $ source ~/.bashrc $ wget https://github.com/ctSkennerton/minced/releases/download/0.3.0/minced $ sudo cp minced /usr/local/sbin # \u5b89\u88c5 ncRNA \u6ce8\u91ca\u529f\u80fd** # \u4f7f\u7528 infernal $ wget http://eddylab.org/infernal/infernal-1.1.2.tar.gz $ tar zxvf infernal-1.1.2.tar.gz -C ~/app/ $ echo \"export PATH= $PATH : $HOME /app/infernal-1.1.2\" # \u5b89\u88c5 prokka $ wget http://www.vicbioinformatics.com/prokka-1.12.tar.gz $ tar zxvf prokka-1.12.tar.gz -C ~/app $ echo \"export PATH= $PATH : $HOME /app/prokka-1.12/bin\" >> ~/.bashrc $ source ~/.bashrc $ prokka --setupdb \u6ce8\u610f\u4e8b\u9879 \u5982\u679c\u8981\u4f7f\u7528 --gram \u529f\u80fd\uff0c\u9700\u8981\u5b89\u88c5 signalp \u3002 signalp \u662f DTU \u5927\u5b66\u751f\u7269\u53ca\u536b\u751f\u4fe1\u606f\u5b66\u7cfb \u5f00\u53d1\uff0c\u652f\u6301web\u754c\u9762\u7684\u5de5\u5177\u3002\u547d\u4ee4\u884c\u7248\u672c\u9700\u8981\u63d0\u4f9b\u975e\u5546\u4e1aISP\u63d0\u4f9b\u7684\u90ae\u7bb1\u5e10\u53f7\u6ce8\u518c\u4ee5\u540e\u624d\u80fd\u4e0b\u8f7d\uff08\u6bd4\u5982\u653f\u5e9c\u6216\u5927\u5b66\uff09\u3002\u70b9\u51fb \u8fd9\u91cc \u3002 2. conda \u5b89\u88c5 \u00b6 # \u521b\u5efa conda \u865a\u62df\u73af\u5883 $ conda create -n prokka $ conda activate prokka ( prokka ) $ conda install prokka = 1 .14 \u4f7f\u7528 Prokka \u00b6 Prokka \u7684\u4f7f\u7528\u975e\u5e38\u7b80\u5355\uff0c\u51c6\u5907\u597d\u9700\u8981\u6ce8\u91ca\u7684\u6838\u9178\u5e8f\u5217fasta\u683c\u5f0f\u6587\u4ef6\u5373\u53ef\u3002\u8fd9\u91cc\u7528*Listeria monocytogenes*\u7684\u53c2\u8003\u57fa\u56e0\u7ec4egd\u4e3a\u4f8b\u3002 # \u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6570\u636e $ esearch -db nuccore -query \"1639[txid] AND egd\" | efetch -format fasta > egd.fasta # \u6ce8\u91ca\u57fa\u56e0\u7ec4\u5e8f\u5217 $ prokka egd.fasta --listdb \u53c2\u6570\u53ef\u4ee5\u67e5\u770b prokka \u6570\u636e\u5e93\u4fe1\u606f\u3002 # \u67e5\u770b\u53ef\u4ee5\u4f7f\u7528\u7684\u6570\u636e\u5e93 $ prokka --listdb Looking for databases in : ... * Kingdoms: Archaea Bacteria Mitochondria Viruses * Genera: Enterococcus Escherichia Staphylococcus * HMMs: HAMAP * CMs: Bacteria Viruses \u5982\u679c\u9700\u8981\u6bd4\u8f83\u5b8c\u6574\u7684\u8fdb\u884c\u5e8f\u5217\u6ce8\u91ca\uff0c\u7ed3\u679c\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u7684\u7528\u6765\u63d0\u4ea4\u7684\u8bdd\uff0c\u53ef\u4ee5\u6dfb\u52a0\u76f8\u5e94\u7684\u53c2\u6570\u6765\u89c4\u8303\u6ce8\u91ca\u4ee5\u53ca\u8c03\u7528\u4e0d\u540c\u7684\u5de5\u5177\u626b\u63cfncRNA\u7b49\u3002 # \u6ce8\u91ca Listeria monocytogenes \u6807\u51c6\u682a egd $ prokka --outdir egd --prefix egd --addgenes --addmrna --compliant --centre CDC --genus Listeria --species \"Listeria monocytogenes\" --strain egd --kingdom Bacteria --usegenus --cpus 4 --rfam --rnammer --force egd.fasta \u751f\u6210\u7ed3\u679c\u6ce8\u91ca\u6587\u4ef6 |----|----| | egd.err | prokka \u5bf9\u6ce8\u91ca\u7ed3\u679c\u5b58\u5728\u7684\u4e00\u4e9b\u7591\u95ee\u8fdb\u884c\u62a5\u544a\u7684\u4fe1\u606f | | egd.faa | \u6ce8\u91ca\u7684\u6c28\u57fa\u9178\u5e8f\u5217 | | egd.ffn | \u6ce8\u91ca\u7684\u78b1\u57fa\u5e8f\u5217 | | egd.fna | \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6 | | egd.fsa | \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6 | | egd.gbk | genbank \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6 | | egd.gff | gff \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6 | | egd.log | prokka \u8fd0\u884c\u65e5\u5fd7 | | egd.sqn | sqn \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI | | egd.tbl | tbl \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI | | egd.tsv | tsv \u683c\u5f0f\u6587\u4ef6\uff0c\u6ce8\u91ca\u57fa\u56e0\u7684\u5217\u8868 | | egd.txt | prokka \u6ce8\u91ca\u7684\u5404\u79cd\u7c7b\u578b\u5e8f\u5217\u7edf\u8ba1\u4fe1\u606f | --kingdom \u9ed8\u8ba4\u6ce8\u91ca\u7684\u662f\u7ec6\u83cc\u57fa\u56e0\u7ec4\uff0c\u5982\u679c\u662f\u5176\u4ed6\u7269\u79cd\u5219\u5efa\u8bae\u6dfb\u52a0\u7269\u79cd\u53c2\u6570\u3002\u53ef\u9009\u9879\u6709\uff1a Archaea: \u771f\u83cc Bacteria: \u7ec6\u83cc Mitochondria: \u7ebf\u7acb\u4f53 Viruses: \u75c5\u6bd2 \u5982\u679c\u8981\u6ce8\u91ca\u75c5\u6bd2\u57fa\u56e0\u7ec4\uff0c\u9664\u4e86\u6dfb\u52a0 --kingdom \u5916 $ prokka --kingdom Viruses contigs.fasta .err \u6587\u4ef6 err \u6587\u4ef6\u8bb0\u5f55\u4e86\u6ce8\u91ca\u8fc7\u7a0b\u4e2d\u7684\u53cd\u9988\u65e5\u5fd7\u3002 .tsv \u6587\u4ef6 tsv \u6587\u4ef6\u6309\u7167 locus_tag \u987a\u5e8f\u6392\u5e8f\u4e86\u6ce8\u91ca\u7684\u7ed3\u679c\u3002 # \u663e\u793a tsv \u5185\u5bb9 $ head egd.tsv locus_tag ftype length_bp gene EC_number COG product DJECODEN_00001 CDS 1356 dnaA COG0593 Chromosomal replication initiator protein DnaA DJECODEN_00001 gene 1356 dnaA DJECODEN_00001 mRNA 1356 dnaA DJECODEN_00002 CDS 1146 dnaN COG0592 Beta sliding clamp DJECODEN_00002 gene 1146 dnaN DJECODEN_00002 mRNA 1146 dnaN DJECODEN_00003 CDS 1344 yeeO_1 COG0534 putative FMN/FAD exporter YeeO DJECODEN_00003 gene 1344 yeeO_1 DJECODEN_00003 mRNA 1344 yeeO_1 locus_tag: \u6ce8\u91ca\u57fa\u56e0\u7684 locus \u540d\u79f0 ftype: \u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e3aCDS\uff0c\u5982\u679c\u6253\u5f00--addgenes\u548c--addmrna\u53c2\u6570\uff0c\u5219\u4f1a\u533a\u522b\u662fRNA\u8fd8\u662f\u7f16\u7801\u57fa\u56e0 length_bp: \u5e8f\u5217\u957f\u5ea6 gene: \u6839\u636e\u6570\u636e\u5e93\u6ce8\u91ca\u5bf9\u5e94\u7684\u57fa\u56e0\u540d\u79f0\uff0c\u5982\u679c\u662f\u591a\u62f7\u8d1d\uff0c\u5219\u7528_1,_2\u7b49\u533a\u5206 EC_number: \u57fa\u56e0\u5bf9\u5e94\u7684 EC \u503c COG: \u57fa\u56e0\u5bf9\u5e94\u7684COG product: \u57fa\u56e0\u7f16\u7801\u7684\u86cb\u767d\u8d28\u4ea7\u7269 \u5e94\u7528\u793a\u4f8b \u00b6 # \u6279\u91cf\u6ce8\u91ca\u57fa\u56e0\u7ec4 $ find . -name *.fna | sed 's/\\.fna//g' | \\ > parallel --max-args = 1 prorkka --outdir prokka/ { 1 } --prefix { 1 } \\ > --addgenes --addmrna --mincontiglen 200 --centre 'HZCDC' \\ > --proteins ref.gbk --rnammer --rfam { 1 } .fna # \u6ce8\u91ca\u5b8f\u57fa\u56e0\u7ec4 $ prokka --metagenome --outdir meta contigs.fa # \u5c06\u6ce8\u91caCDS\u957f\u5ea6\u6392\u5e8f $ awk '/CDS/ {print $0}' egd.tsv | sort -kn3 -r | less # \u663e\u793a\u6240\u6709\u7684\u4e0d\u91cd\u590d\u6ce8\u91ca\u4ea7\u7269 $ awk '!a[$1]++{print}' egd.tsv # \u663e\u793a\u6240\u6709COG\u6ce8\u91ca $ awk '/COG/' egd.tsv Reference \u00b6","title":"01. Prokka \u5feb\u901f\u6ce8\u91ca"},{"location":"book/C03_Genome-Annotation/01_prokka/#prokka","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Prokka \u662f\u4e00\u4e2a\u539f\u6838\u7269\u79cd\u57fa\u56e0\u7ec4\u6ce8\u91ca\u5de5\u5177\uff0c\u7531\u58a8\u5c14\u672c\u5927\u5b66\u751f\u7269\u4fe1\u606f\u5b66\u5bb6 Torsten Seemann \u5f00\u53d1\u7684\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u672c\u5730\u5feb\u901f\u6ce8\u91ca\u5de5\u5177\uff0c\u7528\u6765\u6ce8\u91ca\u5c0f\u57fa\u56e0\u7ec4\u6bd4\u5982\u7ec6\u83cc\u3001\u75c5\u6bd2\u7b49\u975e\u5e38\u65b9\u4fbf\u3001\u5feb\u901f\u3002","title":"Prokka"},{"location":"book/C03_Genome-Annotation/01_prokka/#prokka_1","text":"","title":"\u5b89\u88c5 Prokka"},{"location":"book/C03_Genome-Annotation/01_prokka/#1","text":"\u5982\u679c\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5\u7684\u8bdd\uff0c\u9700\u8981\u6709Bioperl\u652f\u6301\u3002\u4ee5\u53ca\u4e00\u4e9b\u7b2c\u4e09\u65b9\u5e93\u548c\u8f6f\u4ef6\u7684\u652f\u6301\u3002 # \u5b89\u88c5 Bioperl $ sudo apt-get install cpanminus $ cpanm Bio::Perl XML::Simple # \u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56 $ sudo apt-get install libdatetime-perl libxml-simple-perl libdigest-md5-perl git default-jre bioperl # \u5b89\u88c5 rRNA \u6ce8\u91ca\u529f\u80fd # \u8fd9\u91cc\u9009\u62e9 Barrnap \u548c MINCED $ wget http://www.vicbioinformatics.com/barrnap-0.6.tar.gz $ tar zxvf barrnap-0.5.tar.gz -C ~/app/ $ echo \"export PATH= $PATH : $HOME /app/barrnap-0.6/bin\" >> ~/.bashrc $ source ~/.bashrc $ wget https://github.com/ctSkennerton/minced/releases/download/0.3.0/minced $ sudo cp minced /usr/local/sbin # \u5b89\u88c5 ncRNA \u6ce8\u91ca\u529f\u80fd** # \u4f7f\u7528 infernal $ wget http://eddylab.org/infernal/infernal-1.1.2.tar.gz $ tar zxvf infernal-1.1.2.tar.gz -C ~/app/ $ echo \"export PATH= $PATH : $HOME /app/infernal-1.1.2\" # \u5b89\u88c5 prokka $ wget http://www.vicbioinformatics.com/prokka-1.12.tar.gz $ tar zxvf prokka-1.12.tar.gz -C ~/app $ echo \"export PATH= $PATH : $HOME /app/prokka-1.12/bin\" >> ~/.bashrc $ source ~/.bashrc $ prokka --setupdb \u6ce8\u610f\u4e8b\u9879 \u5982\u679c\u8981\u4f7f\u7528 --gram \u529f\u80fd\uff0c\u9700\u8981\u5b89\u88c5 signalp \u3002 signalp \u662f DTU \u5927\u5b66\u751f\u7269\u53ca\u536b\u751f\u4fe1\u606f\u5b66\u7cfb \u5f00\u53d1\uff0c\u652f\u6301web\u754c\u9762\u7684\u5de5\u5177\u3002\u547d\u4ee4\u884c\u7248\u672c\u9700\u8981\u63d0\u4f9b\u975e\u5546\u4e1aISP\u63d0\u4f9b\u7684\u90ae\u7bb1\u5e10\u53f7\u6ce8\u518c\u4ee5\u540e\u624d\u80fd\u4e0b\u8f7d\uff08\u6bd4\u5982\u653f\u5e9c\u6216\u5927\u5b66\uff09\u3002\u70b9\u51fb \u8fd9\u91cc \u3002","title":"1.\u4e0b\u8f7d\u5b89\u88c5"},{"location":"book/C03_Genome-Annotation/01_prokka/#2-conda","text":"# \u521b\u5efa conda \u865a\u62df\u73af\u5883 $ conda create -n prokka $ conda activate prokka ( prokka ) $ conda install prokka = 1 .14","title":"2. conda \u5b89\u88c5"},{"location":"book/C03_Genome-Annotation/01_prokka/#prokka_2","text":"Prokka \u7684\u4f7f\u7528\u975e\u5e38\u7b80\u5355\uff0c\u51c6\u5907\u597d\u9700\u8981\u6ce8\u91ca\u7684\u6838\u9178\u5e8f\u5217fasta\u683c\u5f0f\u6587\u4ef6\u5373\u53ef\u3002\u8fd9\u91cc\u7528*Listeria monocytogenes*\u7684\u53c2\u8003\u57fa\u56e0\u7ec4egd\u4e3a\u4f8b\u3002 # \u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6570\u636e $ esearch -db nuccore -query \"1639[txid] AND egd\" | efetch -format fasta > egd.fasta # \u6ce8\u91ca\u57fa\u56e0\u7ec4\u5e8f\u5217 $ prokka egd.fasta --listdb \u53c2\u6570\u53ef\u4ee5\u67e5\u770b prokka \u6570\u636e\u5e93\u4fe1\u606f\u3002 # \u67e5\u770b\u53ef\u4ee5\u4f7f\u7528\u7684\u6570\u636e\u5e93 $ prokka --listdb Looking for databases in : ... * Kingdoms: Archaea Bacteria Mitochondria Viruses * Genera: Enterococcus Escherichia Staphylococcus * HMMs: HAMAP * CMs: Bacteria Viruses \u5982\u679c\u9700\u8981\u6bd4\u8f83\u5b8c\u6574\u7684\u8fdb\u884c\u5e8f\u5217\u6ce8\u91ca\uff0c\u7ed3\u679c\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u7684\u7528\u6765\u63d0\u4ea4\u7684\u8bdd\uff0c\u53ef\u4ee5\u6dfb\u52a0\u76f8\u5e94\u7684\u53c2\u6570\u6765\u89c4\u8303\u6ce8\u91ca\u4ee5\u53ca\u8c03\u7528\u4e0d\u540c\u7684\u5de5\u5177\u626b\u63cfncRNA\u7b49\u3002 # \u6ce8\u91ca Listeria monocytogenes \u6807\u51c6\u682a egd $ prokka --outdir egd --prefix egd --addgenes --addmrna --compliant --centre CDC --genus Listeria --species \"Listeria monocytogenes\" --strain egd --kingdom Bacteria --usegenus --cpus 4 --rfam --rnammer --force egd.fasta \u751f\u6210\u7ed3\u679c\u6ce8\u91ca\u6587\u4ef6 |----|----| | egd.err | prokka \u5bf9\u6ce8\u91ca\u7ed3\u679c\u5b58\u5728\u7684\u4e00\u4e9b\u7591\u95ee\u8fdb\u884c\u62a5\u544a\u7684\u4fe1\u606f | | egd.faa | \u6ce8\u91ca\u7684\u6c28\u57fa\u9178\u5e8f\u5217 | | egd.ffn | \u6ce8\u91ca\u7684\u78b1\u57fa\u5e8f\u5217 | | egd.fna | \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6 | | egd.fsa | \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6 | | egd.gbk | genbank \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6 | | egd.gff | gff \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6 | | egd.log | prokka \u8fd0\u884c\u65e5\u5fd7 | | egd.sqn | sqn \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI | | egd.tbl | tbl \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI | | egd.tsv | tsv \u683c\u5f0f\u6587\u4ef6\uff0c\u6ce8\u91ca\u57fa\u56e0\u7684\u5217\u8868 | | egd.txt | prokka \u6ce8\u91ca\u7684\u5404\u79cd\u7c7b\u578b\u5e8f\u5217\u7edf\u8ba1\u4fe1\u606f | --kingdom \u9ed8\u8ba4\u6ce8\u91ca\u7684\u662f\u7ec6\u83cc\u57fa\u56e0\u7ec4\uff0c\u5982\u679c\u662f\u5176\u4ed6\u7269\u79cd\u5219\u5efa\u8bae\u6dfb\u52a0\u7269\u79cd\u53c2\u6570\u3002\u53ef\u9009\u9879\u6709\uff1a Archaea: \u771f\u83cc Bacteria: \u7ec6\u83cc Mitochondria: \u7ebf\u7acb\u4f53 Viruses: \u75c5\u6bd2 \u5982\u679c\u8981\u6ce8\u91ca\u75c5\u6bd2\u57fa\u56e0\u7ec4\uff0c\u9664\u4e86\u6dfb\u52a0 --kingdom \u5916 $ prokka --kingdom Viruses contigs.fasta .err \u6587\u4ef6 err \u6587\u4ef6\u8bb0\u5f55\u4e86\u6ce8\u91ca\u8fc7\u7a0b\u4e2d\u7684\u53cd\u9988\u65e5\u5fd7\u3002 .tsv \u6587\u4ef6 tsv \u6587\u4ef6\u6309\u7167 locus_tag \u987a\u5e8f\u6392\u5e8f\u4e86\u6ce8\u91ca\u7684\u7ed3\u679c\u3002 # \u663e\u793a tsv \u5185\u5bb9 $ head egd.tsv locus_tag ftype length_bp gene EC_number COG product DJECODEN_00001 CDS 1356 dnaA COG0593 Chromosomal replication initiator protein DnaA DJECODEN_00001 gene 1356 dnaA DJECODEN_00001 mRNA 1356 dnaA DJECODEN_00002 CDS 1146 dnaN COG0592 Beta sliding clamp DJECODEN_00002 gene 1146 dnaN DJECODEN_00002 mRNA 1146 dnaN DJECODEN_00003 CDS 1344 yeeO_1 COG0534 putative FMN/FAD exporter YeeO DJECODEN_00003 gene 1344 yeeO_1 DJECODEN_00003 mRNA 1344 yeeO_1 locus_tag: \u6ce8\u91ca\u57fa\u56e0\u7684 locus \u540d\u79f0 ftype: \u7c7b\u578b\uff0c\u9ed8\u8ba4\u4e3aCDS\uff0c\u5982\u679c\u6253\u5f00--addgenes\u548c--addmrna\u53c2\u6570\uff0c\u5219\u4f1a\u533a\u522b\u662fRNA\u8fd8\u662f\u7f16\u7801\u57fa\u56e0 length_bp: \u5e8f\u5217\u957f\u5ea6 gene: \u6839\u636e\u6570\u636e\u5e93\u6ce8\u91ca\u5bf9\u5e94\u7684\u57fa\u56e0\u540d\u79f0\uff0c\u5982\u679c\u662f\u591a\u62f7\u8d1d\uff0c\u5219\u7528_1,_2\u7b49\u533a\u5206 EC_number: \u57fa\u56e0\u5bf9\u5e94\u7684 EC \u503c COG: \u57fa\u56e0\u5bf9\u5e94\u7684COG product: \u57fa\u56e0\u7f16\u7801\u7684\u86cb\u767d\u8d28\u4ea7\u7269","title":"\u4f7f\u7528 Prokka"},{"location":"book/C03_Genome-Annotation/01_prokka/#_1","text":"# \u6279\u91cf\u6ce8\u91ca\u57fa\u56e0\u7ec4 $ find . -name *.fna | sed 's/\\.fna//g' | \\ > parallel --max-args = 1 prorkka --outdir prokka/ { 1 } --prefix { 1 } \\ > --addgenes --addmrna --mincontiglen 200 --centre 'HZCDC' \\ > --proteins ref.gbk --rnammer --rfam { 1 } .fna # \u6ce8\u91ca\u5b8f\u57fa\u56e0\u7ec4 $ prokka --metagenome --outdir meta contigs.fa # \u5c06\u6ce8\u91caCDS\u957f\u5ea6\u6392\u5e8f $ awk '/CDS/ {print $0}' egd.tsv | sort -kn3 -r | less # \u663e\u793a\u6240\u6709\u7684\u4e0d\u91cd\u590d\u6ce8\u91ca\u4ea7\u7269 $ awk '!a[$1]++{print}' egd.tsv # \u663e\u793a\u6240\u6709COG\u6ce8\u91ca $ awk '/COG/' egd.tsv","title":"\u5e94\u7528\u793a\u4f8b"},{"location":"book/C03_Genome-Annotation/01_prokka/#reference","text":"","title":"Reference"},{"location":"book/C03_Genome-Annotation/02_rast/","text":"RAST \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} RAST \u662f\u4e00\u4e2a\u5728\u7ebf\u6ce8\u91ca\u5de5\u5177\u3002","title":"02. \u5728\u7ebf\u6ce8\u91ca\u5de5\u5177 rast"},{"location":"book/C03_Genome-Annotation/02_rast/#rast","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} RAST \u662f\u4e00\u4e2a\u5728\u7ebf\u6ce8\u91ca\u5de5\u5177\u3002","title":"RAST"},{"location":"book/C03_Genome-Annotation/03_pgaap/","text":"PGAAP \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} http://www.ncbi.nlm.nih.gov/genome/annotation_prok/ http://www.ncbi.nlm.nih.gov/books/NBK174280/ https://www.youtube.com/watch?v=3JFqfpfzp08","title":"03. \u6ce8\u91ca\u5de5\u5177 PGAAP"},{"location":"book/C03_Genome-Annotation/03_pgaap/#pgaap","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} http://www.ncbi.nlm.nih.gov/genome/annotation_prok/ http://www.ncbi.nlm.nih.gov/books/NBK174280/ https://www.youtube.com/watch?v=3JFqfpfzp08","title":"PGAAP"},{"location":"book/C03_Genome-Annotation/04_snpeff/","text":"snpEFF \u4f7f\u7528 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} snpEFF \u662f\u8bb8\u591a variant calling pipeline \u4e2d\u5e38\u7528\u7684 vcf \u6ce8\u91ca\u5de5\u5177\u3002 \u5b89\u88c5 \u00b6 $ conda install snpEFF \u4f7f\u7528 \u00b6 # \u5c06 Listeria monocytogenes \u6d89\u53ca\u7684\u6570\u636e\u5e93\u4e0b\u8f7d $ snpEFF databases | awk '/^Listeria_monocytogenes' / { print $4 } ' | awk ' !a [ $1 ] ++ { print } ' | xargs wget","title":"04. SNP\u6ce8\u91ca\u5de5\u5177 snpEFF"},{"location":"book/C03_Genome-Annotation/04_snpeff/#snpeff","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} snpEFF \u662f\u8bb8\u591a variant calling pipeline \u4e2d\u5e38\u7528\u7684 vcf \u6ce8\u91ca\u5de5\u5177\u3002","title":"snpEFF \u4f7f\u7528"},{"location":"book/C03_Genome-Annotation/04_snpeff/#_1","text":"$ conda install snpEFF","title":"\u5b89\u88c5"},{"location":"book/C03_Genome-Annotation/04_snpeff/#_2","text":"# \u5c06 Listeria monocytogenes \u6d89\u53ca\u7684\u6570\u636e\u5e93\u4e0b\u8f7d $ snpEFF databases | awk '/^Listeria_monocytogenes' / { print $4 } ' | awk ' !a [ $1 ] ++ { print } ' | xargs wget","title":"\u4f7f\u7528"},{"location":"book/C03_Genome-Annotation/05_cog/","text":"COG \u6570\u636e\u5e93 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u540c\u6e90\u57fa\u56e0\u6982\u5ff5 \u00b6 Homolog : A gene related to a second gene by descent from a common ancestral DNA sequence. The term \"homolog\" may apply to the relationship between genes separated by speciation (ortholog), OR to the relationship betwen genes originating via genetic duplication (see paralog). \u540c\u6e90\uff08\u57fa\u56e0\uff09 \uff1a\u6307\u9057\u4f20\u4e0a\u6765\u81ea\u4e8e\u67d0\u4e00\u5171\u540c\u7956\u5148DNA\u5e8f\u5217\u7684\u57fa\u56e0\u3002\u201c\u540c\u6e90\u201d\u5305\u542b\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u662f\u7269\u79cd\u95f4\u7684\u540c\u6e90\uff08ortholog\uff09\uff1b\u53e6\u4e00\u79cd\u662f\u540c\u4e00\u7269\u79cd\u5185\u7531\u4e8e\u57fa\u56e0\u590d\u5236\u3001\u5206\u79bb\u5bfc\u81f4\u7684\u540c\u6e90\uff08paralog\uff09\u3002 Ortholog: Orthologs are genes in different species that have evolved from a common ancestral gene via speciation. Orthologs often (but certainly not always) retain the same function(s) in the course of evolution. Thus, functions may be lost or gained when comparing a pair of orthologs. \u76f4\u7cfb\uff0f\u76f4\u5411\uff0f\u5782\u76f4\u540c\u6e90\uff08\u57fa\u56e0\uff09 \uff1a\u6307\u4f4d\u4e8e\u4e0d\u540c\u7684\u7269\u79cd\u95f4\u7684\uff0c\u5728\u7269\u79cd\u5f62\u6210\u8fc7\u7a0b\u4e2d\u6e90\u81ea\u67d0\u4e00\u5171\u540c\u7956\u5148\u7684\u57fa\u56e0\u3002\u4ece\u8fdb\u5316\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u7c7b\u57fa\u56e0\u901a\u5e38\u5177\u6709\u76f8\u540c\u7684\u529f\u80fd\uff0c\u4f46\u5e76\u975e\u7edd\u5bf9\u3002\u6240\u4ee5\uff0c\u5f53\u6211\u4eec\u6bd4\u8f83\u4e00\u5bf9\u76f4\u7cfb\u540c\u6e90\u57fa\u56e0\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u6709\u7684\u5df2\u7ecf\u4e27\u5931\u4e86\u56fa\u6709\u7684\u529f\u80fd\u6216\u8005\u8fdb\u5316\u51fa\u4e86\u65b0\u7684\u529f\u80fd\u3002 Paralog: Paralogs are genes produced via gene duplication within a genome. Paralogs typically evolve new functions or else eventually become pseudogenes. \u65c1\u7cfb\uff0f\u6a2a\u5411\uff0f\u5e76\u884c\u540c\u6e90\uff08\u57fa\u56e0\uff09 \uff1a\u6307\u5728\u4e00\u4e2a\u7279\u5b9a\u7684\u57fa\u56e0\u7ec4\u4e2d\u7531\u4e8e\u57fa\u56e0\u590d\u5236\u4ea7\u751f\u7684\u540c\u6e90\u3002\u901a\u5e38\u6bd4\u8f83\u8fd9\u4e9b\u57fa\u56e0\u65f6\uff0c\u5b83\u4eec\u53ef\u80fd\u5df2\u7ecf\u5f7c\u6b64\u5177\u6709\u4e86\u65b0\u7684\uff08\u4e0d\u540c\uff09\u529f\u80fd\uff0c\u4e5f\u53ef\u80fd\u5df2\u7ecf\u6210\u4e3a\u5047\u57fa\u56e0\u4e86\u3002 1.COG \u00b6 **COG**\u662f**C**luster of **O**rthologous **G**roups of proteins\uff08\u86cb\u767d\u76f8\u90bb\u7c7b\u7684\u805a\u7c07\uff09\u7684\u7f29\u5199\u3002\u6784\u6210\u6bcf\u4e2aCOG\u7684\u86cb\u767d\u90fd\u662f\u88ab\u5047\u5b9a\u4e3a\u6765\u81ea\u4e8e\u4e00\u4e2a\u7956\u5148\u86cb\u767d\uff0c\u5e76\u4e14\u56e0\u6b64\u6216\u8005\u662forthologs\u6216\u8005\u662fparalogs\u3002 **Orthologs**\u662f\u6307\u6765\u81ea\u4e8e\u4e0d\u540c\u7269\u79cd\u7684\u7531\u5782\u76f4\u5bb6\u7cfb\uff08\u7269\u79cd\u5f62\u6210\uff09\u8fdb\u5316\u800c\u6765\u7684\u86cb\u767d\uff0c\u5e76\u4e14\u5178\u578b\u7684\u4fdd\u7559\u4e0e\u539f\u59cb\u86cb\u767d\u6709\u76f8\u540c\u7684\u529f\u80fd\u3002 **Paralogs**\u662f\u90a3\u4e9b\u5728\u4e00\u5b9a\u7269\u79cd\u4e2d\u7684\u6765\u6e90\u4e8e\u57fa\u56e0\u590d\u5236\u7684\u86cb\u767d\uff0c\u53ef\u80fd\u4f1a\u8fdb\u5316\u51fa\u65b0\u7684\u4e0e\u539f\u6765\u6709\u5173\u7684\u529f\u80fd\u3002 **COG**\u662f\u901a\u8fc7\u628a\u6240\u6709\u5b8c\u6574\u6d4b\u5e8f\u7684\u57fa\u56e0\u7ec4\u7684\u7f16\u7801\u86cb\u767d\u4e00\u4e2a\u4e00\u4e2a\u7684\u4e92\u76f8\u6bd4\u8f83\u786e\u5b9a\u7684\u3002\u5728\u8003\u8651\u6765\u81ea\u4e00\u4e2a\u7ed9\u5b9a\u57fa\u56e0\u7ec4\u7684\u86cb\u767d\u65f6\uff0c\u8fd9\u79cd\u6bd4\u8f83\u5c06\u7ed9\u51fa\u6bcf\u4e2a\u5176\u4ed6\u57fa\u56e0\u7ec4\u7684\u4e00\u4e2a\u6700\u76f8\u4f3c\u7684\u86cb\u767d\u3002\u8fd9\u4e9b\u57fa\u56e0\u7684\u6bcf\u4e00\u4e2a\u90fd\u8f6e\u756a\u7684\u88ab\u8003\u8651\u3002\u5982\u679c\u5728\u8fd9\u4e9b\u86cb\u767d\uff08\u6216\u5b50\u96c6\uff09\u4e4b\u95f4\u4e00\u4e2a\u76f8\u4e92\u7684\u6700\u4f73\u5339\u914d\u5173\u7cfb\u88ab\u53d1\u73b0\uff0c\u90a3\u4e48\u90a3\u4e9b\u76f8\u4e92\u7684\u6700\u4f73\u5339\u914d\u5c06\u5f62\u6210\u4e00\u4e2aCOG\u3002\u8fd9\u6837\uff0c\u4e00\u4e2aCOG\u4e2d\u7684\u6210\u5458\u5c06\u4e0e\u8fd9\u4e2aCOG\u4e2d\u7684\u5176\u4ed6\u6210\u5458\u6bd4\u8d77\u88ab\u6bd4\u8f83\u7684\u57fa\u56e0\u7ec4\u4e2d\u7684\u5176\u4ed6\u86cb\u767d\u66f4\u76f8\u50cf\uff0c\u5c3d\u7ba1\u5982\u679c\u7edd\u5bf9\u76f8\u4f3c\u6027\u6bd4\u8f83\u7684\u3002\u6700\u4f73\u5339\u914d\u539f\u5219\u7684\u4f7f\u7528\uff0c\u6ca1\u6709\u4e86\u4eba\u4e3a\u9009\u62e9\u7684\u7edf\u8ba1\u5207\u9664\u7684\u9650\u5236\uff0c\u8fd9\u5c31\u517c\u987e\u4e86\u8fdb\u5316\u6162\u548c\u8fdb\u5316\u5feb\u7684\u86cb\u767d\u3002\u7136\u800c\uff0c\u8fd8\u6709\u4e00\u4e2a\u52a0\u7684\u9650\u5236\u5c31\u662f\u4e00\u4e2aCOG\u5fc5\u987b\u5305\u542b\u6765\u81ea\u4e8e3\u4e2a\u79cd\u7cfb\u53d1\u751f\u4e0a\u8fdc\u7684\u57fa\u56e0\u7ec4\u7684\u4e00\u4e2a\u86cb\u767d\u3002 COG\u6570\u636e\u5e93\u4e3b\u8981\u5305\u62ec\u7ec6\u83cc\u548c\u771f\u83cc\u7684\u86cb\u767d\u4fe1\u606f\uff1b\u771f\u6838\u751f\u7269\u7684\u4e00\u822c\u79f0\u4e3aKOG\u6570\u636e\u5e93\u3002\u901a\u8fc7\u6bd4\u5bf9\u53ef\u4ee5\u5c06\u67d0\u4e2a\u86cb\u767d\u5e8f\u5217\u6ce8\u91ca\u5230\u67d0\u4e00\u4e2aCOG\u4e2d\u3002\u6839\u636e\u76f4\u7cfb\u540c\u6e90\u5e8f\u5217\u6784\u6210\u7684COG\uff0c\u5982\u679c\u5e8f\u5217\u8fd1\u4f3c\uff0c\u5219\u53ef\u4ee5\u63a8\u6d4b\u8be5\u5e8f\u5217\u7684\u529f\u80fd\u3002 COG\u7684\u5206\u7c7b \u00b6 COG\u6570\u636e\u5e93\u53ef\u4ee5\u6839\u636e\u7279\u6027\u5206\u4e3a3\u4e2a\u65b9\u5411\uff0c\u6309\u7167\u529f\u80fd\u4e00\u5171\u53ef\u4ee5\u5206\u4e3a\u4e8c\u5341\u516d\u7c7b\u3002 INFORMATION STORAGE AND PROCESSING [J] Translation, ribosomal structure and biogenesis [A] RNA processing and modification [K] Transcription [L] Replication, recombination and repair [B] Chromatin structure and dynamics CELLULAR PROCESSES AND SIGNALING [D] Cell cycle control, cell division, chromosome partitioning [Y] Nuclear structure [V] Defense mechanisms [T] Signal transduction mechanisms [M] Cell wall/membrane/envelope biogenesis [N] Cell motility [Z] Cytoskeleton [W] Extracellular structures [U] Intracellular trafficking, secretion, and vesicular transport [O] Posttranslational modification, protein turnover, chaperones Mobilome: prophages, transposons METABOLISM [C] Energy production and conversion [G] Carbohydrate transport and metabolism [E] Amino acid transport and metabolism [F] Nucleotide transport and metabolism [H] Coenzyme transport and metabolism [I] Lipid transport and metabolism [P] Inorganic ion transport and metabolism [Q] Secondary metabolites biosynthesis, transport and catabolism POORLY CHARACTERIZED [R] General function prediction only [S] Function unknown \u6700\u65e9\u4ece1997\u5e74\u5f00\u59cb\u63a8\u51faCOG\uff0c\u52302003\u5e74\u53d1\u5e03\u7248\u672c\uff0c2014\u5e74\u66f4\u65b0\u8fc7\u4e00\u6b21\uff0c2020\u5e74\u7531\u6709\u4e00\u4e2a\u65b0\u7684\u7248\u672c\u3002\u76ee\u524d\u9879\u76ee\u4e3b\u9875\uff1a https://www.ncbi.nlm.nih.gov/research/cog \uff0c\u53ef\u4ee5\u5728\u7ebf\u68c0\u7d22\u83b7\u5f97COG\u4fe1\u606f\u4ee5\u53ca\u643a\u5e26\u8be5COG\u7684\u7ec6\u83cc\u57fa\u56e0\u7ec4Assembly\u4fe1\u606f\uff0c\u5e76\u94fe\u63a5\u5230Genbank\u7684\u86cb\u767d\u8d28\u5e8f\u5217\u6570\u636e\u3002 \u5982\u679c\u5f00\u53d1web\u5e94\u7528\uff0cNCBI\u4e5f\u53ef\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684Web Services\u3002\u5982\u679c\u8981\u83b7\u5f97\u6570\u636e\u5e93\u4fe1\u606f\uff0c\u53ef\u4ee5\u5230 https://www.ncbi.nlm.nih.gov/research/cog-project/ \uff0c\u8bbf\u95eeNCBI Ftp\u4e0b\u8f7d\u3002COG\u7684\u8f6f\u4ef6\u53ef\u4ee5\u5230ftp://ftp.ncbi.nih.gov/pub/wolf/COGs/COGsoft\u4e0b\u8f7d\u3002 # 2003\u7248 COGs $ wget ftp://ftp.ncbi.nih.gov/pub/COG/COG/myva $ makeblastdb -in myva -dbtype prot -title cog -parse_seqids \\ > -out PATH/TO/DB/cog -logfile PATH/TO/DB/cog.log # 2014\u7248 COGs $ wget -r ftp://ftp.ncbi.nih.gov/pub/COG/COG2014/data/* . $ gunzip prot2003-2014.fa.gz 2020\u7248 COGs ftp://ftp.ncbi.nih.gov/pub/COG/COG2020/data cog-20.cog.tsv COG\u86cb\u767d\u4fe1\u606f cog-20.def.tab COG\u6ce8\u91ca\u4fe1\u606f cog-20.org.csv Genome Assembly cog-20.tax.csv \u7269\u79cd\u5206\u7c7b\u4fe1\u606f fun.tab COG\u5206\u7c7b\u4fe1\u606f 2014\u7248 COGs\u7684\u6570\u636e\u6587\u4ef6 \u00b6 genomes2003-2014.tab \u5305\u542b\u57fa\u56e0\u7ec4\u4fe1\u606f\u7684\u5217\u8868\u6587\u4ef6\uff0c\u683c\u5f0f\u91c7\u7528\uff1a <genome-code> <ncbi-taxid> <ncbi-ftp-name> Acihos 933801 Acidianus_hospitalis_W1_uid66875 cognames2003-2014.tab COG\u6ce8\u91ca\u4fe1\u606f\u7684\u5217\u8868 <COG-id> <functional-class> <COG-annotation> COG0001 H Glutamate-1-semialdehyde aminotransferase fun2003-2014.tab COG\u529f\u80fd\u5206\u7c7b\u548c\u63cf\u8ff0 <class-id> <description> J Translation, ribosomal structure and biogenesis cog2003-2014.csv \u540c\u6e90\u57fa\u56e0\u57df\uff0c\u4ee5\u9017\u53f7\u5206\u5272 <domain-id>, <genome-name>, <protein-id>,<protein-length>,<domain-start>, <domain-end>, <COG-id>, <membership-class>, 333894695,Alteromonas_SN2_uid67349,333894695,427,1,427,COG0001,0, prot2003-2014.tab \u6240\u6709\u86cb\u767d\u8d28accession\u7f16\u53f7\u5bf9\u5e94COGs\u7684\u57df\u540d <protein-id> <refseq-acc> 103485499 YP_615060 prot2003-2014.gi2gbk.tab \u6240\u6709\u86cb\u767d\u8d28accession\u7f16\u53f7\u5bf9\u5e94COGs\u7684\u57df\u540d\u548cGenbank\u7f16\u53f7 <protein-id> <refseq-acc> <genbank-acc> 103485499 YP_615060 ABF51727 prot2003-2014.fa.gz fasta\u683c\u5f0f\u7684\u6240\u6709\u5e8f\u5217\u4ee5\u53ca\u4fe1\u606f >gi|118430838|ref|NP_146899.2| putative mercury ion binding protein [Aeropyrum pernix K1] MIIFKRHSQAILFSHNKQEKALLGIEGMHCEGCAIAIETALKNVKGIIDTKVNYSRGSAI VTFDDTLVSINDILEHYIFKVPSNYRAKLVSFIS COG\u8f6f\u4ef6\u4e0b\u8f7d\u5730\u5740 \u53c2\u8003\u8d44\u6599 \u00b6 NCBI\u7684COG\u4ecb\u7ecd Expanded microbial genome coverage and improved protein family annotation in the COG database Fitch WM (1970) \"Distinguishing homologous from analogous proteins\". Syst Zool, 19:99-113. Li WH, Yang J, Gu X (2005) \"Expression divergence between duplicate genes\". Trends Genet, 21:602-607. http://blog.sciencenet.cn/blog-217859-280960.html http://homepage.usask.ca/~ctl271/857/def_homolog.shtml https://www.jianshu.com/p/f4060461c951","title":"05. COG\u6ce8\u91ca"},{"location":"book/C03_Genome-Annotation/05_cog/#cog","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"COG \u6570\u636e\u5e93"},{"location":"book/C03_Genome-Annotation/05_cog/#_1","text":"Homolog : A gene related to a second gene by descent from a common ancestral DNA sequence. The term \"homolog\" may apply to the relationship between genes separated by speciation (ortholog), OR to the relationship betwen genes originating via genetic duplication (see paralog). \u540c\u6e90\uff08\u57fa\u56e0\uff09 \uff1a\u6307\u9057\u4f20\u4e0a\u6765\u81ea\u4e8e\u67d0\u4e00\u5171\u540c\u7956\u5148DNA\u5e8f\u5217\u7684\u57fa\u56e0\u3002\u201c\u540c\u6e90\u201d\u5305\u542b\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u662f\u7269\u79cd\u95f4\u7684\u540c\u6e90\uff08ortholog\uff09\uff1b\u53e6\u4e00\u79cd\u662f\u540c\u4e00\u7269\u79cd\u5185\u7531\u4e8e\u57fa\u56e0\u590d\u5236\u3001\u5206\u79bb\u5bfc\u81f4\u7684\u540c\u6e90\uff08paralog\uff09\u3002 Ortholog: Orthologs are genes in different species that have evolved from a common ancestral gene via speciation. Orthologs often (but certainly not always) retain the same function(s) in the course of evolution. Thus, functions may be lost or gained when comparing a pair of orthologs. \u76f4\u7cfb\uff0f\u76f4\u5411\uff0f\u5782\u76f4\u540c\u6e90\uff08\u57fa\u56e0\uff09 \uff1a\u6307\u4f4d\u4e8e\u4e0d\u540c\u7684\u7269\u79cd\u95f4\u7684\uff0c\u5728\u7269\u79cd\u5f62\u6210\u8fc7\u7a0b\u4e2d\u6e90\u81ea\u67d0\u4e00\u5171\u540c\u7956\u5148\u7684\u57fa\u56e0\u3002\u4ece\u8fdb\u5316\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u7c7b\u57fa\u56e0\u901a\u5e38\u5177\u6709\u76f8\u540c\u7684\u529f\u80fd\uff0c\u4f46\u5e76\u975e\u7edd\u5bf9\u3002\u6240\u4ee5\uff0c\u5f53\u6211\u4eec\u6bd4\u8f83\u4e00\u5bf9\u76f4\u7cfb\u540c\u6e90\u57fa\u56e0\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u6709\u7684\u5df2\u7ecf\u4e27\u5931\u4e86\u56fa\u6709\u7684\u529f\u80fd\u6216\u8005\u8fdb\u5316\u51fa\u4e86\u65b0\u7684\u529f\u80fd\u3002 Paralog: Paralogs are genes produced via gene duplication within a genome. Paralogs typically evolve new functions or else eventually become pseudogenes. \u65c1\u7cfb\uff0f\u6a2a\u5411\uff0f\u5e76\u884c\u540c\u6e90\uff08\u57fa\u56e0\uff09 \uff1a\u6307\u5728\u4e00\u4e2a\u7279\u5b9a\u7684\u57fa\u56e0\u7ec4\u4e2d\u7531\u4e8e\u57fa\u56e0\u590d\u5236\u4ea7\u751f\u7684\u540c\u6e90\u3002\u901a\u5e38\u6bd4\u8f83\u8fd9\u4e9b\u57fa\u56e0\u65f6\uff0c\u5b83\u4eec\u53ef\u80fd\u5df2\u7ecf\u5f7c\u6b64\u5177\u6709\u4e86\u65b0\u7684\uff08\u4e0d\u540c\uff09\u529f\u80fd\uff0c\u4e5f\u53ef\u80fd\u5df2\u7ecf\u6210\u4e3a\u5047\u57fa\u56e0\u4e86\u3002","title":"\u540c\u6e90\u57fa\u56e0\u6982\u5ff5"},{"location":"book/C03_Genome-Annotation/05_cog/#1cog","text":"**COG**\u662f**C**luster of **O**rthologous **G**roups of proteins\uff08\u86cb\u767d\u76f8\u90bb\u7c7b\u7684\u805a\u7c07\uff09\u7684\u7f29\u5199\u3002\u6784\u6210\u6bcf\u4e2aCOG\u7684\u86cb\u767d\u90fd\u662f\u88ab\u5047\u5b9a\u4e3a\u6765\u81ea\u4e8e\u4e00\u4e2a\u7956\u5148\u86cb\u767d\uff0c\u5e76\u4e14\u56e0\u6b64\u6216\u8005\u662forthologs\u6216\u8005\u662fparalogs\u3002 **Orthologs**\u662f\u6307\u6765\u81ea\u4e8e\u4e0d\u540c\u7269\u79cd\u7684\u7531\u5782\u76f4\u5bb6\u7cfb\uff08\u7269\u79cd\u5f62\u6210\uff09\u8fdb\u5316\u800c\u6765\u7684\u86cb\u767d\uff0c\u5e76\u4e14\u5178\u578b\u7684\u4fdd\u7559\u4e0e\u539f\u59cb\u86cb\u767d\u6709\u76f8\u540c\u7684\u529f\u80fd\u3002 **Paralogs**\u662f\u90a3\u4e9b\u5728\u4e00\u5b9a\u7269\u79cd\u4e2d\u7684\u6765\u6e90\u4e8e\u57fa\u56e0\u590d\u5236\u7684\u86cb\u767d\uff0c\u53ef\u80fd\u4f1a\u8fdb\u5316\u51fa\u65b0\u7684\u4e0e\u539f\u6765\u6709\u5173\u7684\u529f\u80fd\u3002 **COG**\u662f\u901a\u8fc7\u628a\u6240\u6709\u5b8c\u6574\u6d4b\u5e8f\u7684\u57fa\u56e0\u7ec4\u7684\u7f16\u7801\u86cb\u767d\u4e00\u4e2a\u4e00\u4e2a\u7684\u4e92\u76f8\u6bd4\u8f83\u786e\u5b9a\u7684\u3002\u5728\u8003\u8651\u6765\u81ea\u4e00\u4e2a\u7ed9\u5b9a\u57fa\u56e0\u7ec4\u7684\u86cb\u767d\u65f6\uff0c\u8fd9\u79cd\u6bd4\u8f83\u5c06\u7ed9\u51fa\u6bcf\u4e2a\u5176\u4ed6\u57fa\u56e0\u7ec4\u7684\u4e00\u4e2a\u6700\u76f8\u4f3c\u7684\u86cb\u767d\u3002\u8fd9\u4e9b\u57fa\u56e0\u7684\u6bcf\u4e00\u4e2a\u90fd\u8f6e\u756a\u7684\u88ab\u8003\u8651\u3002\u5982\u679c\u5728\u8fd9\u4e9b\u86cb\u767d\uff08\u6216\u5b50\u96c6\uff09\u4e4b\u95f4\u4e00\u4e2a\u76f8\u4e92\u7684\u6700\u4f73\u5339\u914d\u5173\u7cfb\u88ab\u53d1\u73b0\uff0c\u90a3\u4e48\u90a3\u4e9b\u76f8\u4e92\u7684\u6700\u4f73\u5339\u914d\u5c06\u5f62\u6210\u4e00\u4e2aCOG\u3002\u8fd9\u6837\uff0c\u4e00\u4e2aCOG\u4e2d\u7684\u6210\u5458\u5c06\u4e0e\u8fd9\u4e2aCOG\u4e2d\u7684\u5176\u4ed6\u6210\u5458\u6bd4\u8d77\u88ab\u6bd4\u8f83\u7684\u57fa\u56e0\u7ec4\u4e2d\u7684\u5176\u4ed6\u86cb\u767d\u66f4\u76f8\u50cf\uff0c\u5c3d\u7ba1\u5982\u679c\u7edd\u5bf9\u76f8\u4f3c\u6027\u6bd4\u8f83\u7684\u3002\u6700\u4f73\u5339\u914d\u539f\u5219\u7684\u4f7f\u7528\uff0c\u6ca1\u6709\u4e86\u4eba\u4e3a\u9009\u62e9\u7684\u7edf\u8ba1\u5207\u9664\u7684\u9650\u5236\uff0c\u8fd9\u5c31\u517c\u987e\u4e86\u8fdb\u5316\u6162\u548c\u8fdb\u5316\u5feb\u7684\u86cb\u767d\u3002\u7136\u800c\uff0c\u8fd8\u6709\u4e00\u4e2a\u52a0\u7684\u9650\u5236\u5c31\u662f\u4e00\u4e2aCOG\u5fc5\u987b\u5305\u542b\u6765\u81ea\u4e8e3\u4e2a\u79cd\u7cfb\u53d1\u751f\u4e0a\u8fdc\u7684\u57fa\u56e0\u7ec4\u7684\u4e00\u4e2a\u86cb\u767d\u3002 COG\u6570\u636e\u5e93\u4e3b\u8981\u5305\u62ec\u7ec6\u83cc\u548c\u771f\u83cc\u7684\u86cb\u767d\u4fe1\u606f\uff1b\u771f\u6838\u751f\u7269\u7684\u4e00\u822c\u79f0\u4e3aKOG\u6570\u636e\u5e93\u3002\u901a\u8fc7\u6bd4\u5bf9\u53ef\u4ee5\u5c06\u67d0\u4e2a\u86cb\u767d\u5e8f\u5217\u6ce8\u91ca\u5230\u67d0\u4e00\u4e2aCOG\u4e2d\u3002\u6839\u636e\u76f4\u7cfb\u540c\u6e90\u5e8f\u5217\u6784\u6210\u7684COG\uff0c\u5982\u679c\u5e8f\u5217\u8fd1\u4f3c\uff0c\u5219\u53ef\u4ee5\u63a8\u6d4b\u8be5\u5e8f\u5217\u7684\u529f\u80fd\u3002","title":"1.COG"},{"location":"book/C03_Genome-Annotation/05_cog/#cog_1","text":"COG\u6570\u636e\u5e93\u53ef\u4ee5\u6839\u636e\u7279\u6027\u5206\u4e3a3\u4e2a\u65b9\u5411\uff0c\u6309\u7167\u529f\u80fd\u4e00\u5171\u53ef\u4ee5\u5206\u4e3a\u4e8c\u5341\u516d\u7c7b\u3002 INFORMATION STORAGE AND PROCESSING [J] Translation, ribosomal structure and biogenesis [A] RNA processing and modification [K] Transcription [L] Replication, recombination and repair [B] Chromatin structure and dynamics CELLULAR PROCESSES AND SIGNALING [D] Cell cycle control, cell division, chromosome partitioning [Y] Nuclear structure [V] Defense mechanisms [T] Signal transduction mechanisms [M] Cell wall/membrane/envelope biogenesis [N] Cell motility [Z] Cytoskeleton [W] Extracellular structures [U] Intracellular trafficking, secretion, and vesicular transport [O] Posttranslational modification, protein turnover, chaperones Mobilome: prophages, transposons METABOLISM [C] Energy production and conversion [G] Carbohydrate transport and metabolism [E] Amino acid transport and metabolism [F] Nucleotide transport and metabolism [H] Coenzyme transport and metabolism [I] Lipid transport and metabolism [P] Inorganic ion transport and metabolism [Q] Secondary metabolites biosynthesis, transport and catabolism POORLY CHARACTERIZED [R] General function prediction only [S] Function unknown \u6700\u65e9\u4ece1997\u5e74\u5f00\u59cb\u63a8\u51faCOG\uff0c\u52302003\u5e74\u53d1\u5e03\u7248\u672c\uff0c2014\u5e74\u66f4\u65b0\u8fc7\u4e00\u6b21\uff0c2020\u5e74\u7531\u6709\u4e00\u4e2a\u65b0\u7684\u7248\u672c\u3002\u76ee\u524d\u9879\u76ee\u4e3b\u9875\uff1a https://www.ncbi.nlm.nih.gov/research/cog \uff0c\u53ef\u4ee5\u5728\u7ebf\u68c0\u7d22\u83b7\u5f97COG\u4fe1\u606f\u4ee5\u53ca\u643a\u5e26\u8be5COG\u7684\u7ec6\u83cc\u57fa\u56e0\u7ec4Assembly\u4fe1\u606f\uff0c\u5e76\u94fe\u63a5\u5230Genbank\u7684\u86cb\u767d\u8d28\u5e8f\u5217\u6570\u636e\u3002 \u5982\u679c\u5f00\u53d1web\u5e94\u7528\uff0cNCBI\u4e5f\u53ef\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684Web Services\u3002\u5982\u679c\u8981\u83b7\u5f97\u6570\u636e\u5e93\u4fe1\u606f\uff0c\u53ef\u4ee5\u5230 https://www.ncbi.nlm.nih.gov/research/cog-project/ \uff0c\u8bbf\u95eeNCBI Ftp\u4e0b\u8f7d\u3002COG\u7684\u8f6f\u4ef6\u53ef\u4ee5\u5230ftp://ftp.ncbi.nih.gov/pub/wolf/COGs/COGsoft\u4e0b\u8f7d\u3002 # 2003\u7248 COGs $ wget ftp://ftp.ncbi.nih.gov/pub/COG/COG/myva $ makeblastdb -in myva -dbtype prot -title cog -parse_seqids \\ > -out PATH/TO/DB/cog -logfile PATH/TO/DB/cog.log # 2014\u7248 COGs $ wget -r ftp://ftp.ncbi.nih.gov/pub/COG/COG2014/data/* . $ gunzip prot2003-2014.fa.gz 2020\u7248 COGs ftp://ftp.ncbi.nih.gov/pub/COG/COG2020/data cog-20.cog.tsv COG\u86cb\u767d\u4fe1\u606f cog-20.def.tab COG\u6ce8\u91ca\u4fe1\u606f cog-20.org.csv Genome Assembly cog-20.tax.csv \u7269\u79cd\u5206\u7c7b\u4fe1\u606f fun.tab COG\u5206\u7c7b\u4fe1\u606f","title":"COG\u7684\u5206\u7c7b"},{"location":"book/C03_Genome-Annotation/05_cog/#2014-cogs","text":"genomes2003-2014.tab \u5305\u542b\u57fa\u56e0\u7ec4\u4fe1\u606f\u7684\u5217\u8868\u6587\u4ef6\uff0c\u683c\u5f0f\u91c7\u7528\uff1a <genome-code> <ncbi-taxid> <ncbi-ftp-name> Acihos 933801 Acidianus_hospitalis_W1_uid66875 cognames2003-2014.tab COG\u6ce8\u91ca\u4fe1\u606f\u7684\u5217\u8868 <COG-id> <functional-class> <COG-annotation> COG0001 H Glutamate-1-semialdehyde aminotransferase fun2003-2014.tab COG\u529f\u80fd\u5206\u7c7b\u548c\u63cf\u8ff0 <class-id> <description> J Translation, ribosomal structure and biogenesis cog2003-2014.csv \u540c\u6e90\u57fa\u56e0\u57df\uff0c\u4ee5\u9017\u53f7\u5206\u5272 <domain-id>, <genome-name>, <protein-id>,<protein-length>,<domain-start>, <domain-end>, <COG-id>, <membership-class>, 333894695,Alteromonas_SN2_uid67349,333894695,427,1,427,COG0001,0, prot2003-2014.tab \u6240\u6709\u86cb\u767d\u8d28accession\u7f16\u53f7\u5bf9\u5e94COGs\u7684\u57df\u540d <protein-id> <refseq-acc> 103485499 YP_615060 prot2003-2014.gi2gbk.tab \u6240\u6709\u86cb\u767d\u8d28accession\u7f16\u53f7\u5bf9\u5e94COGs\u7684\u57df\u540d\u548cGenbank\u7f16\u53f7 <protein-id> <refseq-acc> <genbank-acc> 103485499 YP_615060 ABF51727 prot2003-2014.fa.gz fasta\u683c\u5f0f\u7684\u6240\u6709\u5e8f\u5217\u4ee5\u53ca\u4fe1\u606f >gi|118430838|ref|NP_146899.2| putative mercury ion binding protein [Aeropyrum pernix K1] MIIFKRHSQAILFSHNKQEKALLGIEGMHCEGCAIAIETALKNVKGIIDTKVNYSRGSAI VTFDDTLVSINDILEHYIFKVPSNYRAKLVSFIS COG\u8f6f\u4ef6\u4e0b\u8f7d\u5730\u5740","title":"2014\u7248 COGs\u7684\u6570\u636e\u6587\u4ef6"},{"location":"book/C03_Genome-Annotation/05_cog/#_2","text":"NCBI\u7684COG\u4ecb\u7ecd Expanded microbial genome coverage and improved protein family annotation in the COG database Fitch WM (1970) \"Distinguishing homologous from analogous proteins\". Syst Zool, 19:99-113. Li WH, Yang J, Gu X (2005) \"Expression divergence between duplicate genes\". Trends Genet, 21:602-607. http://blog.sciencenet.cn/blog-217859-280960.html http://homepage.usask.ca/~ctl271/857/def_homolog.shtml https://www.jianshu.com/p/f4060461c951","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C03_Genome-Annotation/06_kegg/","text":"KEGG \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} KEGG \u662f\u65e5\u672c\u6784\u5efa\u7684\u4e3a\u57fa\u56e0\u7ec4\u3001\u9176\u4fc3\u9014\u5f84\u4ee5\u53ca\u751f\u7269\u5316\u5b66\u7269\u8d28\u5728\u7ebf\u6570\u636e\u5e93\u3002\u5b83\u4e3b\u8981\u6784\u5efa\u4e86\u4ee3\u8c22\u5173\u7cfb\u4e2d\u7684\u5206\u5b50\u76f8\u4e92\u4f5c\u7528\u7f51\u7edc\u4ee5\u53ca\u5177\u4f53\u751f\u7269\u6240\u6709\u7684\u53d8\u5316\u5f62\u5f0f\u3002 \u7cfb\u7edf\u4fe1\u606f - PATHWAY \u2014 \u7ec6\u80de\u4e0e\u751f\u7269\u673a\u80fd\u7684\u8def\u5f84\u56fe - MODULE \u2014 \u57fa\u56e0\u6a21\u7ec4\u4e0e\u529f\u80fd\u5355\u4f4d - BRITE \u2014 \u751f\u7269\u5b9e\u4f53\u7684\u9636\u5c42\u5206\u7c7b \u57fa\u56e0\u7ec4\u4fe1\u606f - GENOME \u2014 \u57fa\u56e0\u7ec4\u5168\u4f53 - GENES \u2014 \u57fa\u56e0\u7ec4\u5168\u57df\u7684\u57fa\u56e0\u4e0e\u86cb\u767d\u5217\u8868 - ORTHOLOGY \u2014 \u57fa\u56e0\u7ec4\u5168\u57df\u7684\u57fa\u56e0\u76f4\u7cfb\u540c\u6e90\u7ec4\u522b \u5316\u5b66\u4fe1\u606f - COMPOUND, GLYCAN \u2014 \u5316\u5408\u7269\u4e0e\u805a\u7cd6 - REACTION, RPAIR, RCLASS \u2014 \u5316\u5b66\u53cd\u5e94 - ENZYME \u2014 \u9176\u547d\u540d\u6cd5 \u5065\u5eb7\u4fe1\u606f - DISEASE \u2014 \u4eba\u7c7b\u75be\u75c5 - DRUG \u2014 \u5df2\u6279\u51c6\u836f\u7269 - \u73af\u5883 \u2014 \u751f\u836f\u53ca\u4e0e\u5065\u5eb7\u76f8\u5173\u7684\u7269\u8d28","title":"KEGG"},{"location":"book/C03_Genome-Annotation/06_kegg/#kegg","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} KEGG \u662f\u65e5\u672c\u6784\u5efa\u7684\u4e3a\u57fa\u56e0\u7ec4\u3001\u9176\u4fc3\u9014\u5f84\u4ee5\u53ca\u751f\u7269\u5316\u5b66\u7269\u8d28\u5728\u7ebf\u6570\u636e\u5e93\u3002\u5b83\u4e3b\u8981\u6784\u5efa\u4e86\u4ee3\u8c22\u5173\u7cfb\u4e2d\u7684\u5206\u5b50\u76f8\u4e92\u4f5c\u7528\u7f51\u7edc\u4ee5\u53ca\u5177\u4f53\u751f\u7269\u6240\u6709\u7684\u53d8\u5316\u5f62\u5f0f\u3002 \u7cfb\u7edf\u4fe1\u606f - PATHWAY \u2014 \u7ec6\u80de\u4e0e\u751f\u7269\u673a\u80fd\u7684\u8def\u5f84\u56fe - MODULE \u2014 \u57fa\u56e0\u6a21\u7ec4\u4e0e\u529f\u80fd\u5355\u4f4d - BRITE \u2014 \u751f\u7269\u5b9e\u4f53\u7684\u9636\u5c42\u5206\u7c7b \u57fa\u56e0\u7ec4\u4fe1\u606f - GENOME \u2014 \u57fa\u56e0\u7ec4\u5168\u4f53 - GENES \u2014 \u57fa\u56e0\u7ec4\u5168\u57df\u7684\u57fa\u56e0\u4e0e\u86cb\u767d\u5217\u8868 - ORTHOLOGY \u2014 \u57fa\u56e0\u7ec4\u5168\u57df\u7684\u57fa\u56e0\u76f4\u7cfb\u540c\u6e90\u7ec4\u522b \u5316\u5b66\u4fe1\u606f - COMPOUND, GLYCAN \u2014 \u5316\u5408\u7269\u4e0e\u805a\u7cd6 - REACTION, RPAIR, RCLASS \u2014 \u5316\u5b66\u53cd\u5e94 - ENZYME \u2014 \u9176\u547d\u540d\u6cd5 \u5065\u5eb7\u4fe1\u606f - DISEASE \u2014 \u4eba\u7c7b\u75be\u75c5 - DRUG \u2014 \u5df2\u6279\u51c6\u836f\u7269 - \u73af\u5883 \u2014 \u751f\u836f\u53ca\u4e0e\u5065\u5eb7\u76f8\u5173\u7684\u7269\u8d28","title":"KEGG"},{"location":"book/C03_Genome-Annotation/07_eggnog/","text":"EggNOG \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} EggNOG EggNOG-mapper \u672c\u5730\u5b89\u88c5 EggNOG-mapper \u00b6 # \u5b89\u88c5 $ conda create -n eggnog $ conda activate eggnog ( eggnog ) $ conda install eggnog-mapper # \u6211\u4eec\u53ea\u5173\u5fc3\u7ec6\u83cc\u548c\u75c5\u6bd2\u7684\u57fa\u56e0\u7ec4\u6ce8\u91ca\uff0c\u56e0\u6b64\u53ea\u4e0b\u8f7d\u8fd92\u4e2a\u6570\u636e\u5e93 # \u5404\u4e2a\u5355\u72ec\u6570\u636e\u5e93\u53c2\u89c1 http://beta-eggnogdb.embl.de/download/eggnog_4.5/hmmdb_levels ( eggnog ) $ cd PATH/TO/DATA ( eggnog ) $ download_eggnog_data.py -yq --data_dir ` pwd ` bact \u4f7f\u7528 \u00b6 emapper \u7684\u9ed8\u8ba4\u7b97\u6cd5\u662fhmm\uff0c\u5982\u679c\u60f3\u7528diamond\u6765\u505acluster\uff0c\u9700\u8981\u6dfb\u52a0 -m diamond \u53c2\u6570 # HMM \u6ce8\u91ca # \u9488\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6570\u636e\u5e93\uff0c\u4f7f\u752840\u4e2aCPU\u5185\u6838\uff0c\u6570\u636e\u5e93\u8fd0\u884c\u5728\u5185\u5b58\u4e2d ( eggnog ) $ emapper.py -i mygenome.fa -d bact --data_dir PATH/TO/DATA \\ > --cpus 40 --usemem -o mygenome_bact_result # \u9488\u5bf9\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6570\u636e\u5e93 ( eggnog ) $ emapper.py -i mygenome.fa -d viruses --data_dir PATH/TO/DATA -o mygenome_virus_result # Diamond \u6ce8\u91ca ( eggnog ) $ emapper.py -i mygenome.fa -d bact -m diamond --data_dir PATH/TO/DATA -o mygenome_bact_result \u7ed3\u679c \u00b6 \u751f\u6210\u7684\u6570\u636e\u6587\u4ef6\u6709\uff1a *.emapper.hmm_hits *.emapper.seed_orthologs *.emapper.annotations","title":"EggNOG"},{"location":"book/C03_Genome-Annotation/07_eggnog/#eggnog","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} EggNOG EggNOG-mapper","title":"EggNOG"},{"location":"book/C03_Genome-Annotation/07_eggnog/#eggnog-mapper","text":"# \u5b89\u88c5 $ conda create -n eggnog $ conda activate eggnog ( eggnog ) $ conda install eggnog-mapper # \u6211\u4eec\u53ea\u5173\u5fc3\u7ec6\u83cc\u548c\u75c5\u6bd2\u7684\u57fa\u56e0\u7ec4\u6ce8\u91ca\uff0c\u56e0\u6b64\u53ea\u4e0b\u8f7d\u8fd92\u4e2a\u6570\u636e\u5e93 # \u5404\u4e2a\u5355\u72ec\u6570\u636e\u5e93\u53c2\u89c1 http://beta-eggnogdb.embl.de/download/eggnog_4.5/hmmdb_levels ( eggnog ) $ cd PATH/TO/DATA ( eggnog ) $ download_eggnog_data.py -yq --data_dir ` pwd ` bact","title":"\u672c\u5730\u5b89\u88c5 EggNOG-mapper"},{"location":"book/C03_Genome-Annotation/07_eggnog/#_1","text":"emapper \u7684\u9ed8\u8ba4\u7b97\u6cd5\u662fhmm\uff0c\u5982\u679c\u60f3\u7528diamond\u6765\u505acluster\uff0c\u9700\u8981\u6dfb\u52a0 -m diamond \u53c2\u6570 # HMM \u6ce8\u91ca # \u9488\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6570\u636e\u5e93\uff0c\u4f7f\u752840\u4e2aCPU\u5185\u6838\uff0c\u6570\u636e\u5e93\u8fd0\u884c\u5728\u5185\u5b58\u4e2d ( eggnog ) $ emapper.py -i mygenome.fa -d bact --data_dir PATH/TO/DATA \\ > --cpus 40 --usemem -o mygenome_bact_result # \u9488\u5bf9\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6570\u636e\u5e93 ( eggnog ) $ emapper.py -i mygenome.fa -d viruses --data_dir PATH/TO/DATA -o mygenome_virus_result # Diamond \u6ce8\u91ca ( eggnog ) $ emapper.py -i mygenome.fa -d bact -m diamond --data_dir PATH/TO/DATA -o mygenome_bact_result","title":"\u4f7f\u7528"},{"location":"book/C03_Genome-Annotation/07_eggnog/#_2","text":"\u751f\u6210\u7684\u6570\u636e\u6587\u4ef6\u6709\uff1a *.emapper.hmm_hits *.emapper.seed_orthologs *.emapper.annotations","title":"\u7ed3\u679c"},{"location":"book/C06_Genome-Compare/","text":"","title":"Index"},{"location":"book/C06_Genome-Compare/01_mummer/","text":"Mummer \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd Mummer \u662f\u4e00\u4e2a\u5386\u53f2\u60a0\u4e45\u7684\u5feb\u901f\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6bd4\u5bf9\u5de5\u5177\uff0c\u901a\u8fc7\u5c0f\u7247\u6bb5 MUMs \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u83b7\u5f97\u5e8f\u5217\u7684SNP\u4f4d\u70b9\u5dee\u5f02\u3002\u56e0\u4e3a\u5176\u5feb\u901f\u7684\u7279\u70b9\uff0c\u6709\u8bb8\u591a\u7ec6\u83cc\u5206\u6790\u6d41\u7a0b\u4e2d\u90fd\u6574\u5408\u4e86Mummer\u3002 Mummer\u7b97\u6cd5\u662f Deltcher \u63d0\u51fa\u7684\u4e00\u79cd\u57fa\u4e8e\u540e\u7f00\u6811\u6570\u636e\u7ed3\u6784\u7684\u65b9\u6cd5\u3002\u5927\u81f4\u539f\u7406\u662f\u9996\u5148\u8bc6\u522b\u6bd4\u5bf9\u5e8f\u5217\u548c\u53c2\u8003\u5e8f\u5217\u7684\u6700\u5927\u5339\u914d\u7247\u6bb5\uff08Maximal Unique Matches, MUMs\uff09\uff0c\u800c\u8be5\u7247\u6bb5\u5728\u6bd4\u5bf9\u5e8f\u5217\u548c\u53c2\u8003\u5e8f\u5217\u4e2d\u662f\u552f\u4e00\u7684\uff0c\u4e0d\u5305\u542b\u5728\u5176\u4ed6\u66f4\u957fMUMs\u4e2d\u3002\u5bf9MUMs\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u5bf9\u7a7a\u4f4d\u8ba1\u7b97\u3002Mummer\u9002\u5408\u5bf9\u540c\u79cd\u6216\u8fd1\u6e90\u57fa\u56e0\u7ec4\u7684\u5e8f\u5217\u6bd4\u5bf9\uff0c\u5171\u7ebf\u6027\u5206\u6790\uff0cSNPs\u5206\u6790\u7b49\u3002 Mummer3.23 \u00b6 Mummer3.23\u662f2003\u5e74\u53d1\u5e03\u7684\u7248\u672c\uff0c\u4e00\u76f4\u6cbf\u7528\u5230\u4eca\u5929\u3002 \u5b89\u88c5 \u00b6 conda\u5b89\u88c5 # \u65b0\u5efa\u865a\u62df\u73af\u5883 $ conda create -n mummer # \u8fdb\u5165\u865a\u62df\u73af\u5883 $ conda activate mummer # \u5b89\u88c5v3.23\u7248\u672c\u7684mummer ( mummer ) $ conda install mummer # \u5b89\u88c5gnuplot\uff0cv3\u7248\u672c\u7684mummer\u53ea\u652f\u6301\u8001\u7248\u672c\u7684gnuplot ( mummer ) $ conda install gnuplot = 4 .6.0 \u6e90\u4ee3\u7801\u5b89\u88c5 # \u4e0b\u8f7d\u6e90\u4ee3\u7801 $ wget http://nchc.dl.sourceforge.net/project/mummer/mummer/3.23/MUMmer3.23.tar.gz # \u89e3\u538b\u7f29 $ tar zxvf MUMmer3.23.tar.gz $ cd MUMmer3.23 # \u7f16\u8bd1\u5b89\u88c5 $ make install $ sudo ln -s ` pwd ` /bin/* /usr/local/sbin/ \u6ce8\u610f\uff0c\u7f16\u8bd1\u9700\u8981\u7684\u5de5\u5177\u53ca\u7248\u672c\u3002\u5982\u679c\u7f16\u8bd1\u5931\u8d25\u53ef\u80fd\u662f\u7f3a\u4e4f\u4f9d\u8d56\u5305\u6216\u8005\u7248\u672c\u592a\u65b0\uff1a make (GNU make 3.79.1) perl (PERL 5.6.0) sh (GNU sh 1.14.7) csh (tcsh 6.10.00) g++ (GNU gcc 2.95.3) sed (GNU sed 3.02) awk (GNU awk 3.0.4) ar (GNU ar 2.9.5) fig2dev (fig2dev 3.2.3) gnuplot (gnuplot 4.0) xfig (xfig 3.2) \u4f7f\u7528 Mummer3 \u00b6 \u672c\u8282\u5c06\u4ecb\u7ecd\u6267\u884cmummer\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u4ee5\u53ca\u5404\u4e2a\u7a0b\u5e8f\u7684\u7528\u6cd5\u53ca\u9002\u7528\u9886\u57df\u3002\u5e94\u7528\u7a0b\u5e8f\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u8f6f\u4ef6\u6587\u6863\u3002 MUMmer\u8f6f\u4ef6\u5305\u4e2d\u6700\u5e38\u7528\u7684\u4e94\u4e2a\u7a0b\u5e8f\u662f\uff1a mummer: \u6838\u5fc3\u8ba1\u7b97\u7a0b\u5e8f nucmer: \u6bd4\u5bf9\u6838\u9178\u7684\u6d41\u7a0bperl\u811a\u672c promer: \u6bd4\u5bf9\u6c28\u57fa\u9178\u7684\u6d41\u7a0bperl\u811a\u672c run-mummer1: shell\u5206\u6790\u6d41\u7a0b\u811a\u672c\uff0c run-mummer3: shell\u5206\u6790\u6d41\u7a0b\u811a\u672c\uff0c \u5176\u4ed6\u529f\u80fd\u7a0b\u5e8f show-coords: \u5c06 .delta \u6570\u636e\u6587\u4ef6\u751f\u6210 coordinates \u6570\u636e\u8f93\u51fa show-snp show-aligns show-tiling show-diff mgaps: \u5c06MUMs\u805a\u7c7b annotate: \u4e00\u4e2a\u6bd4\u5bf9\u7ed3\u679c\u56fe\u7247\u53ef\u89c6\u5316\u7684\u7edf\u4e00\u8f93\u51fa\u4fee\u6b63\u5de5\u5177 combineMUMs: delta-filter dnadiff exact-tandems mapview mummerplot repeat-match mummer mummer \u662f\u6838\u5fc3\u7b97\u6cd5\u7a0b\u5e8f\u3002\u5176\u4ed6\u7684\u7a0b\u5e8f\u6d41\u7a0b\u8fd0\u884c\u811a\u672c\u3002 \u53c2\u6570\uff1a -mum: \u8ba1\u7b97\u552f\u4e00\u7684\u6700\u5927\u5339\u914d\uff0c\u4e0d\u7ba1\u662f\u5728\u53c2\u8003\u5e8f\u5217\u8fd8\u662f\u6bd4\u5bf9\u5e8f\u5217\u4e2d\u3002 -mumcand: \u540c mumreference -mumreference: \u8ba1\u7b97\u6bd4\u5bf9\u5230\u53c2\u8003\u5e8f\u5217\u4e2d\u7684\u6700\u5927\u5339\u914d\uff0c\u4e0d\u8003\u8651\u6bd4\u5bf9\u5e8f\u5217\u552f\u4e00\u6027\uff0c\u8fd9\u662f\u9ed8\u8ba4\u8bbe\u7f6e -maxmatch: \u8ba1\u7b97\u6240\u6709\u6700\u5927\u5339\u914d\uff0c\u4e0d\u8bba\u4ed6\u4eec\u662f\u5426\u662f\u552f\u4e00\u6027\u7684 -n: \u8bbe\u7f6e\u5339\u914d\u7684\u5b57\u7b26\uff0c\u9ed8\u8ba4\u662f a/c/g/t\uff0c\u53ef\u4ee5\u662f\u5927\u5199\u548c\u5c0f\u5199 -l: \u8bbe\u7f6e\u6700\u5c0f\u5339\u914d\u5e8f\u5217\u957f\u5ea6\uff0c\u9ed8\u8ba4\u662f20 -b: \u8ba1\u7b97\u6b63\u4e49\u4e0e\u7ffb\u8bd1\u4e92\u8865\u5339\u914d -r: \u53ea\u8ba1\u7b97\u53cd\u4e49\u4e92\u8865\u5339\u914d -s: \u663e\u793a\u5339\u914d\u7684\u4fe1\u606f -c: \u62a5\u544a\u53cd\u4e49\u4e92\u8865\u5339\u914d\u7684\u6bd4\u5bf9\u5e8f\u5217\u4f4d\u70b9\u4fe1\u606f -F: \u5f3a\u5236\u4f7f\u75284\u5217\u8f93\u51fa\u683c\u5f0f -L: \u5728\u5934\u90e8\u4fe1\u606f\u4e2d\u663e\u793a\u6bd4\u5bf9\u5e8f\u5217\u7684\u957f\u5ea6 -h: \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f # \u5c06query.fna\u6bd4\u5bf9\u5230\u53c2\u8003\u5e8f\u5217ref.fna ( mummer ) $ mummer ref.fna query.fna # \u6bd4\u8f832\u4e2a\u5b8c\u6210\u57fa\u56e0\u7ec4 ( mummer ) $ nucmer Mummer4 \u00b6 \u6ce8\u610f\u4e8b\u9879 \u968f\u7740\u65f6\u4ee3\u53d1\u5c55\uff0c\u65b0\u7248\u7684 Mummer4 \u5c1d\u8bd5\u6574\u5408\u4e86\u4e00\u4e9b\u65b0\u529f\u80fd\u548c\u591a\u6838\u6027\u80fd\u7684\u5f00\u653e\uff0c\u4f46\u662f\u76ee\u524d\u8fd8\u5904\u4e8e\u6d4b\u8bd5\u7248\uff0c\u5927\u90e8\u5206\u7684\u7b2c\u4e09\u65b9\u5206\u6790\u6d41\u7a0b\u4e5f\u6ca1\u6709\u66f4\u65b0\u5230 Mummer4\u3002 \u5b89\u88c5 \u00b6 conda\u5b89\u88c5 $ conda create -n mummer4 $ conda activate mummer4 ( mummer4 ) $ conda install mummer4 ( mummer4 ) $ conda install gnuplot = 4 .6.0 \u6e90\u4ee3\u7801\u5b89\u88c5 $ wget https://github.com/gmarcais/mummer/releases/download/v4.0.0beta/mummer-4.0.0beta2.tar.gz $ tar zxf mummer-4.0.0beta2.tar.gz && cd mummer-4.0.0beta2 $ ./configure $ make && sudo make install $ sudo cp .libs/libumdmummer.so.0.0.0 /lib/x86_64-linux-gnu/ $ sudo chmod 644 /lib/x86_64-linux-gnu/libumdmummer.so.0.0.0 $ sudo ln -s /lib/x86_64-linux-gnu/libumdmummer.so.0.0.0 /lib/x86_64-linux-gnu/libumdmummer.so.0 \u4f7f\u7528Mummer4 \u00b6 # \u65b0\u589e\u53c2\u6570 -t \u8868\u793a\u591a\u7ebf\u7a0b\u8ba1\u7b97 ( mummer4 ) $ nucmer --maxmatch -t 40 -p test ref.fa query.fa ( mummer4 ) $ mummerplot -f --postscript --large test.delta Dot \u5de5\u5177\u505a\u4ea4\u4e92\u53ef\u89c6\u5316 \u00b6 \u7528 mummerplot \u7ed8\u56fe\u662f\u4f7f\u7528gnuplot\u7ed8\u5236\u6210\u5171\u7ebf\u6027\u53ef\u89c6\u5316\u56fe\u3002mummer3 \u6bd4\u8f83\u8001\uff0c\u56e0\u6b64\u4e00\u4e9b\u7248\u672c\u652f\u6301\u4e0a\u4f1a\u6bd4\u8f83\u843d\u540e\u3002\u8fd9\u91cc\u63a8\u8350 Dot \u5de5\u5177\u505a\u4ea4\u4e92\u5f0f\u7684\u53ef\u89c6\u5316\u3002 Dot \u5de5\u5177\u662f dnanexus \u5f00\u53d1\u7684\u4e00\u4e2a\u5728\u7ebf\u53ef\u89c6\u5316 nucmer \u8fdb\u884c\u57fa\u56e0\u7ec4\u5171\u7ebf\u6027\u6bd4\u8f83\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5728\u7ebf\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u7528\u6d4f\u89c8\u5668\u5728\u672c\u5730\u8fd0\u884c\u3002 ( mummer ) $ git clone https://github.com/dnanexus/dot ( mummer ) $ cd dot ( mummer ) $ python DotPrep.py --delta compare.delta --out compare ( mummer ) $ chromium index.html \u4e0a\u4f20 DotPrep.py \u751f\u6210\u7684 compare.coords \u548c compare.coords.idx \u6587\u4ef6\u5230 https://dnanexus.github.io/dot \u6216\u8005\u672c\u5730\u6d4f\u89c8\u5668\u6253\u5f00 index.html \u9875\u9762\uff0c\u70b9\u51fb\u63d0\u4ea4\uff0c\u83b7\u5f97\u53ef\u89c6\u5316\u7ed3\u679c\u3002 \u53c2\u8003 \u00b6 \u5982\u4f55\u4f7f\u7528MUMmer\u6bd4\u5bf9\u5927\u7247\u6bb5\u5e8f\u5217","title":"01. mummer"},{"location":"book/C06_Genome-Compare/01_mummer/#mummer","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd Mummer \u662f\u4e00\u4e2a\u5386\u53f2\u60a0\u4e45\u7684\u5feb\u901f\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6bd4\u5bf9\u5de5\u5177\uff0c\u901a\u8fc7\u5c0f\u7247\u6bb5 MUMs \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u83b7\u5f97\u5e8f\u5217\u7684SNP\u4f4d\u70b9\u5dee\u5f02\u3002\u56e0\u4e3a\u5176\u5feb\u901f\u7684\u7279\u70b9\uff0c\u6709\u8bb8\u591a\u7ec6\u83cc\u5206\u6790\u6d41\u7a0b\u4e2d\u90fd\u6574\u5408\u4e86Mummer\u3002 Mummer\u7b97\u6cd5\u662f Deltcher \u63d0\u51fa\u7684\u4e00\u79cd\u57fa\u4e8e\u540e\u7f00\u6811\u6570\u636e\u7ed3\u6784\u7684\u65b9\u6cd5\u3002\u5927\u81f4\u539f\u7406\u662f\u9996\u5148\u8bc6\u522b\u6bd4\u5bf9\u5e8f\u5217\u548c\u53c2\u8003\u5e8f\u5217\u7684\u6700\u5927\u5339\u914d\u7247\u6bb5\uff08Maximal Unique Matches, MUMs\uff09\uff0c\u800c\u8be5\u7247\u6bb5\u5728\u6bd4\u5bf9\u5e8f\u5217\u548c\u53c2\u8003\u5e8f\u5217\u4e2d\u662f\u552f\u4e00\u7684\uff0c\u4e0d\u5305\u542b\u5728\u5176\u4ed6\u66f4\u957fMUMs\u4e2d\u3002\u5bf9MUMs\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u5bf9\u7a7a\u4f4d\u8ba1\u7b97\u3002Mummer\u9002\u5408\u5bf9\u540c\u79cd\u6216\u8fd1\u6e90\u57fa\u56e0\u7ec4\u7684\u5e8f\u5217\u6bd4\u5bf9\uff0c\u5171\u7ebf\u6027\u5206\u6790\uff0cSNPs\u5206\u6790\u7b49\u3002","title":"Mummer"},{"location":"book/C06_Genome-Compare/01_mummer/#mummer323","text":"Mummer3.23\u662f2003\u5e74\u53d1\u5e03\u7684\u7248\u672c\uff0c\u4e00\u76f4\u6cbf\u7528\u5230\u4eca\u5929\u3002","title":"Mummer3.23"},{"location":"book/C06_Genome-Compare/01_mummer/#_1","text":"conda\u5b89\u88c5 # \u65b0\u5efa\u865a\u62df\u73af\u5883 $ conda create -n mummer # \u8fdb\u5165\u865a\u62df\u73af\u5883 $ conda activate mummer # \u5b89\u88c5v3.23\u7248\u672c\u7684mummer ( mummer ) $ conda install mummer # \u5b89\u88c5gnuplot\uff0cv3\u7248\u672c\u7684mummer\u53ea\u652f\u6301\u8001\u7248\u672c\u7684gnuplot ( mummer ) $ conda install gnuplot = 4 .6.0 \u6e90\u4ee3\u7801\u5b89\u88c5 # \u4e0b\u8f7d\u6e90\u4ee3\u7801 $ wget http://nchc.dl.sourceforge.net/project/mummer/mummer/3.23/MUMmer3.23.tar.gz # \u89e3\u538b\u7f29 $ tar zxvf MUMmer3.23.tar.gz $ cd MUMmer3.23 # \u7f16\u8bd1\u5b89\u88c5 $ make install $ sudo ln -s ` pwd ` /bin/* /usr/local/sbin/ \u6ce8\u610f\uff0c\u7f16\u8bd1\u9700\u8981\u7684\u5de5\u5177\u53ca\u7248\u672c\u3002\u5982\u679c\u7f16\u8bd1\u5931\u8d25\u53ef\u80fd\u662f\u7f3a\u4e4f\u4f9d\u8d56\u5305\u6216\u8005\u7248\u672c\u592a\u65b0\uff1a make (GNU make 3.79.1) perl (PERL 5.6.0) sh (GNU sh 1.14.7) csh (tcsh 6.10.00) g++ (GNU gcc 2.95.3) sed (GNU sed 3.02) awk (GNU awk 3.0.4) ar (GNU ar 2.9.5) fig2dev (fig2dev 3.2.3) gnuplot (gnuplot 4.0) xfig (xfig 3.2)","title":"\u5b89\u88c5"},{"location":"book/C06_Genome-Compare/01_mummer/#mummer3","text":"\u672c\u8282\u5c06\u4ecb\u7ecd\u6267\u884cmummer\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u4ee5\u53ca\u5404\u4e2a\u7a0b\u5e8f\u7684\u7528\u6cd5\u53ca\u9002\u7528\u9886\u57df\u3002\u5e94\u7528\u7a0b\u5e8f\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u8f6f\u4ef6\u6587\u6863\u3002 MUMmer\u8f6f\u4ef6\u5305\u4e2d\u6700\u5e38\u7528\u7684\u4e94\u4e2a\u7a0b\u5e8f\u662f\uff1a mummer: \u6838\u5fc3\u8ba1\u7b97\u7a0b\u5e8f nucmer: \u6bd4\u5bf9\u6838\u9178\u7684\u6d41\u7a0bperl\u811a\u672c promer: \u6bd4\u5bf9\u6c28\u57fa\u9178\u7684\u6d41\u7a0bperl\u811a\u672c run-mummer1: shell\u5206\u6790\u6d41\u7a0b\u811a\u672c\uff0c run-mummer3: shell\u5206\u6790\u6d41\u7a0b\u811a\u672c\uff0c \u5176\u4ed6\u529f\u80fd\u7a0b\u5e8f show-coords: \u5c06 .delta \u6570\u636e\u6587\u4ef6\u751f\u6210 coordinates \u6570\u636e\u8f93\u51fa show-snp show-aligns show-tiling show-diff mgaps: \u5c06MUMs\u805a\u7c7b annotate: \u4e00\u4e2a\u6bd4\u5bf9\u7ed3\u679c\u56fe\u7247\u53ef\u89c6\u5316\u7684\u7edf\u4e00\u8f93\u51fa\u4fee\u6b63\u5de5\u5177 combineMUMs: delta-filter dnadiff exact-tandems mapview mummerplot repeat-match mummer mummer \u662f\u6838\u5fc3\u7b97\u6cd5\u7a0b\u5e8f\u3002\u5176\u4ed6\u7684\u7a0b\u5e8f\u6d41\u7a0b\u8fd0\u884c\u811a\u672c\u3002 \u53c2\u6570\uff1a -mum: \u8ba1\u7b97\u552f\u4e00\u7684\u6700\u5927\u5339\u914d\uff0c\u4e0d\u7ba1\u662f\u5728\u53c2\u8003\u5e8f\u5217\u8fd8\u662f\u6bd4\u5bf9\u5e8f\u5217\u4e2d\u3002 -mumcand: \u540c mumreference -mumreference: \u8ba1\u7b97\u6bd4\u5bf9\u5230\u53c2\u8003\u5e8f\u5217\u4e2d\u7684\u6700\u5927\u5339\u914d\uff0c\u4e0d\u8003\u8651\u6bd4\u5bf9\u5e8f\u5217\u552f\u4e00\u6027\uff0c\u8fd9\u662f\u9ed8\u8ba4\u8bbe\u7f6e -maxmatch: \u8ba1\u7b97\u6240\u6709\u6700\u5927\u5339\u914d\uff0c\u4e0d\u8bba\u4ed6\u4eec\u662f\u5426\u662f\u552f\u4e00\u6027\u7684 -n: \u8bbe\u7f6e\u5339\u914d\u7684\u5b57\u7b26\uff0c\u9ed8\u8ba4\u662f a/c/g/t\uff0c\u53ef\u4ee5\u662f\u5927\u5199\u548c\u5c0f\u5199 -l: \u8bbe\u7f6e\u6700\u5c0f\u5339\u914d\u5e8f\u5217\u957f\u5ea6\uff0c\u9ed8\u8ba4\u662f20 -b: \u8ba1\u7b97\u6b63\u4e49\u4e0e\u7ffb\u8bd1\u4e92\u8865\u5339\u914d -r: \u53ea\u8ba1\u7b97\u53cd\u4e49\u4e92\u8865\u5339\u914d -s: \u663e\u793a\u5339\u914d\u7684\u4fe1\u606f -c: \u62a5\u544a\u53cd\u4e49\u4e92\u8865\u5339\u914d\u7684\u6bd4\u5bf9\u5e8f\u5217\u4f4d\u70b9\u4fe1\u606f -F: \u5f3a\u5236\u4f7f\u75284\u5217\u8f93\u51fa\u683c\u5f0f -L: \u5728\u5934\u90e8\u4fe1\u606f\u4e2d\u663e\u793a\u6bd4\u5bf9\u5e8f\u5217\u7684\u957f\u5ea6 -h: \u67e5\u770b\u5e2e\u52a9\u4fe1\u606f # \u5c06query.fna\u6bd4\u5bf9\u5230\u53c2\u8003\u5e8f\u5217ref.fna ( mummer ) $ mummer ref.fna query.fna # \u6bd4\u8f832\u4e2a\u5b8c\u6210\u57fa\u56e0\u7ec4 ( mummer ) $ nucmer","title":"\u4f7f\u7528 Mummer3"},{"location":"book/C06_Genome-Compare/01_mummer/#mummer4","text":"\u6ce8\u610f\u4e8b\u9879 \u968f\u7740\u65f6\u4ee3\u53d1\u5c55\uff0c\u65b0\u7248\u7684 Mummer4 \u5c1d\u8bd5\u6574\u5408\u4e86\u4e00\u4e9b\u65b0\u529f\u80fd\u548c\u591a\u6838\u6027\u80fd\u7684\u5f00\u653e\uff0c\u4f46\u662f\u76ee\u524d\u8fd8\u5904\u4e8e\u6d4b\u8bd5\u7248\uff0c\u5927\u90e8\u5206\u7684\u7b2c\u4e09\u65b9\u5206\u6790\u6d41\u7a0b\u4e5f\u6ca1\u6709\u66f4\u65b0\u5230 Mummer4\u3002","title":"Mummer4"},{"location":"book/C06_Genome-Compare/01_mummer/#_2","text":"conda\u5b89\u88c5 $ conda create -n mummer4 $ conda activate mummer4 ( mummer4 ) $ conda install mummer4 ( mummer4 ) $ conda install gnuplot = 4 .6.0 \u6e90\u4ee3\u7801\u5b89\u88c5 $ wget https://github.com/gmarcais/mummer/releases/download/v4.0.0beta/mummer-4.0.0beta2.tar.gz $ tar zxf mummer-4.0.0beta2.tar.gz && cd mummer-4.0.0beta2 $ ./configure $ make && sudo make install $ sudo cp .libs/libumdmummer.so.0.0.0 /lib/x86_64-linux-gnu/ $ sudo chmod 644 /lib/x86_64-linux-gnu/libumdmummer.so.0.0.0 $ sudo ln -s /lib/x86_64-linux-gnu/libumdmummer.so.0.0.0 /lib/x86_64-linux-gnu/libumdmummer.so.0","title":"\u5b89\u88c5"},{"location":"book/C06_Genome-Compare/01_mummer/#mummer4_1","text":"# \u65b0\u589e\u53c2\u6570 -t \u8868\u793a\u591a\u7ebf\u7a0b\u8ba1\u7b97 ( mummer4 ) $ nucmer --maxmatch -t 40 -p test ref.fa query.fa ( mummer4 ) $ mummerplot -f --postscript --large test.delta","title":"\u4f7f\u7528Mummer4"},{"location":"book/C06_Genome-Compare/01_mummer/#dot","text":"\u7528 mummerplot \u7ed8\u56fe\u662f\u4f7f\u7528gnuplot\u7ed8\u5236\u6210\u5171\u7ebf\u6027\u53ef\u89c6\u5316\u56fe\u3002mummer3 \u6bd4\u8f83\u8001\uff0c\u56e0\u6b64\u4e00\u4e9b\u7248\u672c\u652f\u6301\u4e0a\u4f1a\u6bd4\u8f83\u843d\u540e\u3002\u8fd9\u91cc\u63a8\u8350 Dot \u5de5\u5177\u505a\u4ea4\u4e92\u5f0f\u7684\u53ef\u89c6\u5316\u3002 Dot \u5de5\u5177\u662f dnanexus \u5f00\u53d1\u7684\u4e00\u4e2a\u5728\u7ebf\u53ef\u89c6\u5316 nucmer \u8fdb\u884c\u57fa\u56e0\u7ec4\u5171\u7ebf\u6027\u6bd4\u8f83\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5728\u7ebf\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u7528\u6d4f\u89c8\u5668\u5728\u672c\u5730\u8fd0\u884c\u3002 ( mummer ) $ git clone https://github.com/dnanexus/dot ( mummer ) $ cd dot ( mummer ) $ python DotPrep.py --delta compare.delta --out compare ( mummer ) $ chromium index.html \u4e0a\u4f20 DotPrep.py \u751f\u6210\u7684 compare.coords \u548c compare.coords.idx \u6587\u4ef6\u5230 https://dnanexus.github.io/dot \u6216\u8005\u672c\u5730\u6d4f\u89c8\u5668\u6253\u5f00 index.html \u9875\u9762\uff0c\u70b9\u51fb\u63d0\u4ea4\uff0c\u83b7\u5f97\u53ef\u89c6\u5316\u7ed3\u679c\u3002","title":"Dot \u5de5\u5177\u505a\u4ea4\u4e92\u53ef\u89c6\u5316"},{"location":"book/C06_Genome-Compare/01_mummer/#_3","text":"\u5982\u4f55\u4f7f\u7528MUMmer\u6bd4\u5bf9\u5927\u7247\u6bb5\u5e8f\u5217","title":"\u53c2\u8003"},{"location":"book/C06_Genome-Compare/02_nucdiff/","text":"NucDiff \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5 \u00b6 NucDiff\u6e90\u7801\uff1a https://github.com/uio-cels/NucDiff \u53c2\u8003\u6750\u6599 \u00b6 Publication","title":"02. nucdiff"},{"location":"book/C06_Genome-Compare/02_nucdiff/#nucdiff","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"NucDiff"},{"location":"book/C06_Genome-Compare/02_nucdiff/#_1","text":"NucDiff\u6e90\u7801\uff1a https://github.com/uio-cels/NucDiff","title":"\u5b89\u88c5"},{"location":"book/C06_Genome-Compare/02_nucdiff/#_2","text":"Publication","title":"\u53c2\u8003\u6750\u6599"},{"location":"book/C06_Genome-Compare/03_mauve/","text":"Mauve \u00b6","title":"03. mauve"},{"location":"book/C06_Genome-Compare/03_mauve/#mauve","text":"","title":"Mauve"},{"location":"book/C06_Genome-Compare/04_sibelia/","text":"C-Sibelia \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Sibelia \u662f\u4e00\u4e2a\u7531 St. Petersburg Academic University of the Russian Academy of Sciences \u5f00\u53d1\u7684\u4e3b\u8981\u7528\u4e8e\u75c5\u539f\u5fae\u751f\u7269\u7684\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u5de5\u5177\u3002\u5b83\u53ef\u4ee5\u7528\u6765\u53d1\u73b0\u5fae\u751f\u7269\u7684\u5171\u6709\u533a\u57df\uff0c\u975e\u5171\u6709\u533a\u57df\u4ee5\u53ca\u91cd\u7ec4\u533a\u57df\u7b49\u3002\u901a\u8fc7\u5bf9\u5171\u7ebf\u6027\u533a\u57df\u7684\u5206\u6790\u4e0e\u6bd4\u8f83\uff0c\u5e76\u91c7\u7528 circos \u4ee5\u53ca d3js \u751f\u6210\u53ef\u89c6\u5316\u7ed3\u679c\u3002 Sibelia \u67092\u4e2a\u7ec4\u4ef6\uff1a\u4e00\u4e2a\u53eb Sibelia \uff0c\u53ef\u4ee5\u7528\u6765\u5904\u7406\u591a\u4e2a\u57fa\u56e0\u7ec4\u5b8c\u6210\u56fe\u7684\u5171\u7ebf\u6027\u5206\u6790\u3002\u53e6\u4e00\u4e2a\u53eb C-Sibelia \uff0c\u53ef\u4ee5\u7528\u6765\u6bd4\u8f832\u4e2a\u57fa\u56e0\u7ec4\uff08\u57fa\u56e0\u7ec4scaffolds\u4e0e\u53c2\u8003\u57fa\u56e0\u7ec4\uff09\u3002 1. \u5b89\u88c5 Sibelia \u00b6 1.1 \u5b89\u88c5\u4f9d\u8d56\u5305 \u00b6 \u5982\u679c\u8981\u81ea\u5df1\u7f16\u8bd1\u5b89\u88c5 Sibelia \uff0c\u9700\u8981\u5148\u5b89\u88c5\u4ee5\u4e0b\u7684 C++ \u5e93\u548c\u8f6f\u4ef6\u3002\u7136\u540e\u81ea\u884c\u7f16\u8bd1\u3002 # install libdivsufsort $ wget https://github.com/y-256/libdivsufsort/archive/2.0.1.tar.gz $ tar zxf 2 .0.1.tar.gz $ cd libdivsufsort-2.0.1 $ mkdir build && cd build $ cmake -DCMAKE_BUILD_TYPE = \"Release\" -DCMAKE_INSTALL_PREFIX = \"/usr/local\" .. $ make $ sudo make install # install tclap $ wget http://sourceforge.net/projects/tclap/files/tclap-1.2.1.tar.gz $ tar zxf tclap-1.2.1.tar.gz $ cd tclap-1.2.1 $ ./configure $ make $ sudo make install # install seqan $ sudo apt-get install lib $ wget http://packages.seqan.de/seqan-library/seqan-library-2.0.1.tar.bz2 $ tar xjf seqan-library-2.0.1.tar.bz2 $ sudo cp -R seqan-library-2.0.1/include/seqan /usr/include $ sudo cp -R seqan-library-2.0.1/share/doc/seqan /usr/share/doc # install boost $ sudo apt-get install libboost-dev # build Sibelia $ git clone https://github.com/bioinf/Sibelia $ cd Sibelia/build $ cmake ../src $ make $ sudo make install 1.2 \u4e0b\u8f7d Sibelia \u9884\u7f16\u8bd1\u5305 \u00b6 $ wget http://sourceforge.net/projects/sibelia-bio/files/3.0.6/Sibelia-3.0.6-Linux.tar.gz $ tar zxf Sibelia-3.0.6-Linux.tar.gz -C ~/app $ echo 'export PATH=\"$PATH:$HOME/app/Sibelia-3.0.6/bin\"' >> ~/.bashc 2. \u4f7f\u7528 C-Sibelia \u00b6 2.1 \u6bd4\u8f83\u6d4b\u5e8f\u7ed3\u679c\u4e0e\u53c2\u6bd4\u57fa\u56e0\u7ec4 \u00b6 # run sibelia $ C-Sibelia.py reference.fasta sequencing.fasta -o output # plot circos image $ circos -conf output/circos/circos.conf # view circos result $ evince output/circos/circos.svg # or view the lines plot $ google-chrome output/d3_blocks_diagram.html 3. Reference \u00b6 Sibelia","title":"04. sibelia"},{"location":"book/C06_Genome-Compare/04_sibelia/#c-sibelia","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Sibelia \u662f\u4e00\u4e2a\u7531 St. Petersburg Academic University of the Russian Academy of Sciences \u5f00\u53d1\u7684\u4e3b\u8981\u7528\u4e8e\u75c5\u539f\u5fae\u751f\u7269\u7684\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u5de5\u5177\u3002\u5b83\u53ef\u4ee5\u7528\u6765\u53d1\u73b0\u5fae\u751f\u7269\u7684\u5171\u6709\u533a\u57df\uff0c\u975e\u5171\u6709\u533a\u57df\u4ee5\u53ca\u91cd\u7ec4\u533a\u57df\u7b49\u3002\u901a\u8fc7\u5bf9\u5171\u7ebf\u6027\u533a\u57df\u7684\u5206\u6790\u4e0e\u6bd4\u8f83\uff0c\u5e76\u91c7\u7528 circos \u4ee5\u53ca d3js \u751f\u6210\u53ef\u89c6\u5316\u7ed3\u679c\u3002 Sibelia \u67092\u4e2a\u7ec4\u4ef6\uff1a\u4e00\u4e2a\u53eb Sibelia \uff0c\u53ef\u4ee5\u7528\u6765\u5904\u7406\u591a\u4e2a\u57fa\u56e0\u7ec4\u5b8c\u6210\u56fe\u7684\u5171\u7ebf\u6027\u5206\u6790\u3002\u53e6\u4e00\u4e2a\u53eb C-Sibelia \uff0c\u53ef\u4ee5\u7528\u6765\u6bd4\u8f832\u4e2a\u57fa\u56e0\u7ec4\uff08\u57fa\u56e0\u7ec4scaffolds\u4e0e\u53c2\u8003\u57fa\u56e0\u7ec4\uff09\u3002","title":"C-Sibelia"},{"location":"book/C06_Genome-Compare/04_sibelia/#1-sibelia","text":"","title":"1. \u5b89\u88c5 Sibelia"},{"location":"book/C06_Genome-Compare/04_sibelia/#11","text":"\u5982\u679c\u8981\u81ea\u5df1\u7f16\u8bd1\u5b89\u88c5 Sibelia \uff0c\u9700\u8981\u5148\u5b89\u88c5\u4ee5\u4e0b\u7684 C++ \u5e93\u548c\u8f6f\u4ef6\u3002\u7136\u540e\u81ea\u884c\u7f16\u8bd1\u3002 # install libdivsufsort $ wget https://github.com/y-256/libdivsufsort/archive/2.0.1.tar.gz $ tar zxf 2 .0.1.tar.gz $ cd libdivsufsort-2.0.1 $ mkdir build && cd build $ cmake -DCMAKE_BUILD_TYPE = \"Release\" -DCMAKE_INSTALL_PREFIX = \"/usr/local\" .. $ make $ sudo make install # install tclap $ wget http://sourceforge.net/projects/tclap/files/tclap-1.2.1.tar.gz $ tar zxf tclap-1.2.1.tar.gz $ cd tclap-1.2.1 $ ./configure $ make $ sudo make install # install seqan $ sudo apt-get install lib $ wget http://packages.seqan.de/seqan-library/seqan-library-2.0.1.tar.bz2 $ tar xjf seqan-library-2.0.1.tar.bz2 $ sudo cp -R seqan-library-2.0.1/include/seqan /usr/include $ sudo cp -R seqan-library-2.0.1/share/doc/seqan /usr/share/doc # install boost $ sudo apt-get install libboost-dev # build Sibelia $ git clone https://github.com/bioinf/Sibelia $ cd Sibelia/build $ cmake ../src $ make $ sudo make install","title":"1.1 \u5b89\u88c5\u4f9d\u8d56\u5305"},{"location":"book/C06_Genome-Compare/04_sibelia/#12-sibelia","text":"$ wget http://sourceforge.net/projects/sibelia-bio/files/3.0.6/Sibelia-3.0.6-Linux.tar.gz $ tar zxf Sibelia-3.0.6-Linux.tar.gz -C ~/app $ echo 'export PATH=\"$PATH:$HOME/app/Sibelia-3.0.6/bin\"' >> ~/.bashc","title":"1.2 \u4e0b\u8f7d Sibelia \u9884\u7f16\u8bd1\u5305"},{"location":"book/C06_Genome-Compare/04_sibelia/#2-c-sibelia","text":"","title":"2. \u4f7f\u7528 C-Sibelia"},{"location":"book/C06_Genome-Compare/04_sibelia/#21","text":"# run sibelia $ C-Sibelia.py reference.fasta sequencing.fasta -o output # plot circos image $ circos -conf output/circos/circos.conf # view circos result $ evince output/circos/circos.svg # or view the lines plot $ google-chrome output/d3_blocks_diagram.html","title":"2.1 \u6bd4\u8f83\u6d4b\u5e8f\u7ed3\u679c\u4e0e\u53c2\u6bd4\u57fa\u56e0\u7ec4"},{"location":"book/C06_Genome-Compare/04_sibelia/#3-reference","text":"Sibelia","title":"3. Reference"},{"location":"book/C06_Genome-Compare/05_ani/","text":"ANI \u00b6","title":"05. ani"},{"location":"book/C06_Genome-Compare/05_ani/#ani","text":"","title":"ANI"},{"location":"book/C06_Genome-Compare/09_rappas/","text":"RAPPAS \u00b6 \u5185\u5bb9\u7b80\u4ecb RAPPAS \u662f\u4e00\u4e2a Alignment Free \u5de5\u5177\uff0c\u7528kmer\u8fdb\u884c\u5206\u6790\u3002 https://github.com/blinard-BIOINFO/RAPPAS","title":"RAPPAS"},{"location":"book/C06_Genome-Compare/09_rappas/#rappas","text":"\u5185\u5bb9\u7b80\u4ecb RAPPAS \u662f\u4e00\u4e2a Alignment Free \u5de5\u5177\uff0c\u7528kmer\u8fdb\u884c\u5206\u6790\u3002 https://github.com/blinard-BIOINFO/RAPPAS","title":"RAPPAS"},{"location":"book/C06_Genome-Compare/10_bigsi/","text":"BIGSI \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u800c 2019\u5e74\u521d\u53d1\u8868\u5728 Nature Biotechnology \u4e0a\u7684 BIGSI \u901a\u8fc7\u5efa\u7acb\u72ec\u7279\u7684\u7d22\u5f15 index\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8d85\u9ad8\u901f\u7684 SRA \u641c\u7d22\uff0c\u5f88\u53ef\u80fd\u672a\u6765\u6210\u4e3a\u4e00\u4e2a\u5f88\u597d\u7684\u641c\u7d22\u7ec6\u83cc DNA \u5e8f\u5217\u89e3\u51b3\u65b9\u6848\u3002 1. SRA \u6570\u636e\u641c\u7d22 \u00b6 \u6709\u65f6\u5019\u4ece\u4e8b\u7ec6\u83cc\u5b66\u7814\u7a76\u7684\u6211\u4eec\u90fd\u60f3\u8981\u4e00\u4e2a\u641c\u7d22 DNA \u7684 google \u5de5\u5177\uff0c\u53ea\u8981\u628a\u60f3\u8981\u641c\u7d22\u7684DNA\u5e8f\u5217\uff0c\u6bd4\u5982\u8010\u836f\u57fa\u56e0\u5e8f\u5217\u590d\u5236\u5230\u526a\u5207\u6846\u4e2d\u70b9\u51fb\u786e\u8ba4\u5c31\u80fd\u5e2e\u6211\u4eec\u627e\u5230\u5305\u542b\u8fd9\u4e9b\u8010\u836f\u57fa\u56e0\u7684\u6570\u636e\u3002\u8fc7\u53bb\u5e38\u5e38\u4f7f\u7528 NCBI Blast \u6765\u5b9e\u73b0\uff0c\u4f46\u662f\u5b83\u7684 nt/nr \u6570\u636e\u5e93\u65e0\u6cd5\u652f\u6301 SRA \u6570\u636e\u3002blast \u7b97\u6cd5\u5bf9\u4e8e\u6d77\u91cf\u7684\u77ed\u5e8f\u5217\u6bd4\u5bf9\u6548\u7387\u5f88\u4f4e\uff0c\u53ea\u80fd\u5148\u7ec4\u88c5\u540e\u518d\u7eb3\u5165\u6570\u636e\u5e93\u3002 \u968f\u7740\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7684\u5927\u89c4\u6a21\u63d0\u4ea4\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u4ece\u8fd9\u4e9b\u57fa\u56e0\u7ec4 SRA \u6d4b\u5e8f\u6570\u636e\u4e2d\u53bb\u6316\u6398\u5305\u542b\u7684\u5e8f\u5217\u3002\u73b0\u6709\u7684\u65b9\u6cd5\u662f\u91c7\u7528\u7c7b\u4f3c bwt mapping \u7684\u6bd4\u5bf9\u7684\u65b9\u5f0f\uff0c\u8fd9\u7ed9\u8ba1\u7b97\u5e26\u6765\u4e86\u975e\u5e38\u9ad8\u7684\u7684\u8981\u6c42\u3002 2. \u5b89\u88c5bigsi \u00b6 \u5982\u679c\u4ece\u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5\uff0c\u4f1a\u9047\u5230\u5e8f\u5217\u4f9d\u8d56\u95ee\u9898\uff0c\u63a8\u8350\u4f7f\u7528 bioconda \u5305\u76f4\u63a5\u5b89\u88c5\u3002 # \u521b\u5efa\u865a\u62df\u73af\u5883 $ conda create -n bigsi $ conda activate bigsi # \u5b89\u88c5 cython # \u53e6\u5916\u5efa\u8bae\u4f7f\u7528 python3.6 ( bigsi ) $ conda install cython # \u5b89\u88c5 berkeley-db ( bigsi ) $ cd $CONDA_PREFIX /share ( bigsi ) $ wget http://download.oracle.com/berkeley-db/db-4.8.30.tar.gz ( bigsi ) $ tar -zxf db-4.8.30.tar.gz ( bigsi ) $ cd db-4.8.30/build_unix ( bigsi ) $ ../dist/configure --prefix $CONDA_PREFIX ( bigsi ) $ make && make install ( bigsi ) $ rm ../../db-4.8.30-tar.gz # \u5b89\u88c5 berkeley-db python \u652f\u6301\u4f9d\u8d56\u5e93 bsddb3 ( bigsi ) $ conda install bsddb3 # \u5b89\u88c5 rocksdb ( bigsi ) $ conda install -c activisiongamescience rocksdb python-rocksdb # \u5b89\u88c5 bigsi ( bigsi ) $ conda install bigsi # \u5b89\u88c5 mccortex ( bigsi ) $ conda install mccortex # \u5b89\u88c5 mykrobe # bigsi >= 3.5 \u53ef\u4ee5\u7528 mykrobe \u505a variant search ( bigsi ) $ conda install mykrobe # mykrobe \u5b89\u88c5\u811a\u672c\u4e0b\u8f7d\u6570\u636e\u5e93\uff0c\u9700\u8981\u7ffb\u5899\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528 proxychains \u5de5\u5177\u4ee3\u7406\u4e0b\u8f7d 3. \u4f7f\u7528bigsi \u00b6 3.1 \u4ece\u81ea\u5df1\u7684\u6570\u636e\u5f00\u59cb \u00b6 \u9996\u5148\u4f7f\u7528 kmer \u5de5\u5177\u6784\u5efa\u7d22\u5f15\uff0c\u8fd9\u91cc\u4f7f\u7528 mccortex\u3002\u7136\u540e\u914d\u7f6e\u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u4f7f\u7528 berkeleydb\u3002bigsi\u76ee\u524d\u8fd8\u652f\u6301rocksdb \u548c redis \u7b49\u3002 # \u5efa\u7acb kmer ( bigsi ) $ mccortex31 build -k 31 -s test1 -1 1_R1.fq.gz test1.ctx ( bigsi ) $ mccortex31 build -k 31 -s test2 -1 1_R2.fq.gz test2.ctx # \u9009\u62e9 berkeleydb \u505a\u4e3a db_backend ( bigsi ) $ export BIGSI_CONFIG = berkeleydb.yaml # \u751f\u6210 bloom ( bigsi ) $ bigsi bloom test1.ctx test1.bloom ( bigsi ) $ bigsi bloom test2.ctx test2.bloom # \u5408\u5e76 bloom ( bigsi ) $ bigsi build test1.bloom test2.bloom -s s1 -s s2 # seq \u957f\u5ea6\u8981\u8d85\u8fc7 kmer \u957f\u5ea6 ( bigsi ) $ bigsi search CGGCGAGGAAGCGTTAAATCTCTTTCTGACGGGACC 3.2 \u6784\u5efa\u516c\u5171\u6570\u636e\u5e93 \u00b6 \u5982\u679c\u4e0d\u4ec5\u4ec5\u60f3\u5728\u81ea\u5df1\u7684\u6d4b\u5e8f\u6570\u636e\u96c6\u4e2d\u641c\u7d22\uff0c\u800c\u662f\u60f3\u5230\u516c\u5171\u6570\u636e\u5e93\u4e2d\u53bb\u67e5\u8be2\uff0c\u53ef\u4ee5\u7528\u76ee\u524d\u5f00\u653e\u7684 bigsi server \u670d\u52a1\u3002\u5982\u679c\u60f3\u81ea\u5df1\u5efa\u7acb\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u5df2\u7ecf\u5efa\u7acb\u597d\u7684\u7ec6\u83cc\u7d22\u5f15\u6587\u4ef6\u3002 # \u4e0b\u8f7d\u5b98\u65b9\u5efa\u7acb\u76842018\u5e74\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6570\u636e ( bigsi ) $ wget -c -e robots = off --cut-dirs 6 -m -np http://ftp.ebi.ac.uk/pub/software/bigsi/nat_biotech_2018/all-microbial-index-v03/ # \u5408\u5e76\u6570\u636e ( bigsi ) $ cat all-microbial-bigsi-v03* > combined-index # berkeleydb \u8bbe\u7f6e berkeleydb.yaml h: 3 m: 25000000 nproc: 4 k: 31 storage-engine: berkeleydb storage-config: filename: combined-index flag: \"c\" \u53c2\u8003\u8d44\u6599 \u00b6 https://github.com/Phelimb/BIGSI","title":"10. bigsi"},{"location":"book/C06_Genome-Compare/10_bigsi/#bigsi","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u800c 2019\u5e74\u521d\u53d1\u8868\u5728 Nature Biotechnology \u4e0a\u7684 BIGSI \u901a\u8fc7\u5efa\u7acb\u72ec\u7279\u7684\u7d22\u5f15 index\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8d85\u9ad8\u901f\u7684 SRA \u641c\u7d22\uff0c\u5f88\u53ef\u80fd\u672a\u6765\u6210\u4e3a\u4e00\u4e2a\u5f88\u597d\u7684\u641c\u7d22\u7ec6\u83cc DNA \u5e8f\u5217\u89e3\u51b3\u65b9\u6848\u3002","title":"BIGSI"},{"location":"book/C06_Genome-Compare/10_bigsi/#1-sra","text":"\u6709\u65f6\u5019\u4ece\u4e8b\u7ec6\u83cc\u5b66\u7814\u7a76\u7684\u6211\u4eec\u90fd\u60f3\u8981\u4e00\u4e2a\u641c\u7d22 DNA \u7684 google \u5de5\u5177\uff0c\u53ea\u8981\u628a\u60f3\u8981\u641c\u7d22\u7684DNA\u5e8f\u5217\uff0c\u6bd4\u5982\u8010\u836f\u57fa\u56e0\u5e8f\u5217\u590d\u5236\u5230\u526a\u5207\u6846\u4e2d\u70b9\u51fb\u786e\u8ba4\u5c31\u80fd\u5e2e\u6211\u4eec\u627e\u5230\u5305\u542b\u8fd9\u4e9b\u8010\u836f\u57fa\u56e0\u7684\u6570\u636e\u3002\u8fc7\u53bb\u5e38\u5e38\u4f7f\u7528 NCBI Blast \u6765\u5b9e\u73b0\uff0c\u4f46\u662f\u5b83\u7684 nt/nr \u6570\u636e\u5e93\u65e0\u6cd5\u652f\u6301 SRA \u6570\u636e\u3002blast \u7b97\u6cd5\u5bf9\u4e8e\u6d77\u91cf\u7684\u77ed\u5e8f\u5217\u6bd4\u5bf9\u6548\u7387\u5f88\u4f4e\uff0c\u53ea\u80fd\u5148\u7ec4\u88c5\u540e\u518d\u7eb3\u5165\u6570\u636e\u5e93\u3002 \u968f\u7740\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u7684\u5927\u89c4\u6a21\u63d0\u4ea4\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u4ece\u8fd9\u4e9b\u57fa\u56e0\u7ec4 SRA \u6d4b\u5e8f\u6570\u636e\u4e2d\u53bb\u6316\u6398\u5305\u542b\u7684\u5e8f\u5217\u3002\u73b0\u6709\u7684\u65b9\u6cd5\u662f\u91c7\u7528\u7c7b\u4f3c bwt mapping \u7684\u6bd4\u5bf9\u7684\u65b9\u5f0f\uff0c\u8fd9\u7ed9\u8ba1\u7b97\u5e26\u6765\u4e86\u975e\u5e38\u9ad8\u7684\u7684\u8981\u6c42\u3002","title":"1. SRA \u6570\u636e\u641c\u7d22"},{"location":"book/C06_Genome-Compare/10_bigsi/#2-bigsi","text":"\u5982\u679c\u4ece\u6e90\u4ee3\u7801\u7f16\u8bd1\u5b89\u88c5\uff0c\u4f1a\u9047\u5230\u5e8f\u5217\u4f9d\u8d56\u95ee\u9898\uff0c\u63a8\u8350\u4f7f\u7528 bioconda \u5305\u76f4\u63a5\u5b89\u88c5\u3002 # \u521b\u5efa\u865a\u62df\u73af\u5883 $ conda create -n bigsi $ conda activate bigsi # \u5b89\u88c5 cython # \u53e6\u5916\u5efa\u8bae\u4f7f\u7528 python3.6 ( bigsi ) $ conda install cython # \u5b89\u88c5 berkeley-db ( bigsi ) $ cd $CONDA_PREFIX /share ( bigsi ) $ wget http://download.oracle.com/berkeley-db/db-4.8.30.tar.gz ( bigsi ) $ tar -zxf db-4.8.30.tar.gz ( bigsi ) $ cd db-4.8.30/build_unix ( bigsi ) $ ../dist/configure --prefix $CONDA_PREFIX ( bigsi ) $ make && make install ( bigsi ) $ rm ../../db-4.8.30-tar.gz # \u5b89\u88c5 berkeley-db python \u652f\u6301\u4f9d\u8d56\u5e93 bsddb3 ( bigsi ) $ conda install bsddb3 # \u5b89\u88c5 rocksdb ( bigsi ) $ conda install -c activisiongamescience rocksdb python-rocksdb # \u5b89\u88c5 bigsi ( bigsi ) $ conda install bigsi # \u5b89\u88c5 mccortex ( bigsi ) $ conda install mccortex # \u5b89\u88c5 mykrobe # bigsi >= 3.5 \u53ef\u4ee5\u7528 mykrobe \u505a variant search ( bigsi ) $ conda install mykrobe # mykrobe \u5b89\u88c5\u811a\u672c\u4e0b\u8f7d\u6570\u636e\u5e93\uff0c\u9700\u8981\u7ffb\u5899\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528 proxychains \u5de5\u5177\u4ee3\u7406\u4e0b\u8f7d","title":"2. \u5b89\u88c5bigsi"},{"location":"book/C06_Genome-Compare/10_bigsi/#3-bigsi","text":"","title":"3. \u4f7f\u7528bigsi"},{"location":"book/C06_Genome-Compare/10_bigsi/#31","text":"\u9996\u5148\u4f7f\u7528 kmer \u5de5\u5177\u6784\u5efa\u7d22\u5f15\uff0c\u8fd9\u91cc\u4f7f\u7528 mccortex\u3002\u7136\u540e\u914d\u7f6e\u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u4f7f\u7528 berkeleydb\u3002bigsi\u76ee\u524d\u8fd8\u652f\u6301rocksdb \u548c redis \u7b49\u3002 # \u5efa\u7acb kmer ( bigsi ) $ mccortex31 build -k 31 -s test1 -1 1_R1.fq.gz test1.ctx ( bigsi ) $ mccortex31 build -k 31 -s test2 -1 1_R2.fq.gz test2.ctx # \u9009\u62e9 berkeleydb \u505a\u4e3a db_backend ( bigsi ) $ export BIGSI_CONFIG = berkeleydb.yaml # \u751f\u6210 bloom ( bigsi ) $ bigsi bloom test1.ctx test1.bloom ( bigsi ) $ bigsi bloom test2.ctx test2.bloom # \u5408\u5e76 bloom ( bigsi ) $ bigsi build test1.bloom test2.bloom -s s1 -s s2 # seq \u957f\u5ea6\u8981\u8d85\u8fc7 kmer \u957f\u5ea6 ( bigsi ) $ bigsi search CGGCGAGGAAGCGTTAAATCTCTTTCTGACGGGACC","title":"3.1 \u4ece\u81ea\u5df1\u7684\u6570\u636e\u5f00\u59cb"},{"location":"book/C06_Genome-Compare/10_bigsi/#32","text":"\u5982\u679c\u4e0d\u4ec5\u4ec5\u60f3\u5728\u81ea\u5df1\u7684\u6d4b\u5e8f\u6570\u636e\u96c6\u4e2d\u641c\u7d22\uff0c\u800c\u662f\u60f3\u5230\u516c\u5171\u6570\u636e\u5e93\u4e2d\u53bb\u67e5\u8be2\uff0c\u53ef\u4ee5\u7528\u76ee\u524d\u5f00\u653e\u7684 bigsi server \u670d\u52a1\u3002\u5982\u679c\u60f3\u81ea\u5df1\u5efa\u7acb\u670d\u52a1\u5668\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u5df2\u7ecf\u5efa\u7acb\u597d\u7684\u7ec6\u83cc\u7d22\u5f15\u6587\u4ef6\u3002 # \u4e0b\u8f7d\u5b98\u65b9\u5efa\u7acb\u76842018\u5e74\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6570\u636e ( bigsi ) $ wget -c -e robots = off --cut-dirs 6 -m -np http://ftp.ebi.ac.uk/pub/software/bigsi/nat_biotech_2018/all-microbial-index-v03/ # \u5408\u5e76\u6570\u636e ( bigsi ) $ cat all-microbial-bigsi-v03* > combined-index # berkeleydb \u8bbe\u7f6e berkeleydb.yaml h: 3 m: 25000000 nproc: 4 k: 31 storage-engine: berkeleydb storage-config: filename: combined-index flag: \"c\"","title":"3.2 \u6784\u5efa\u516c\u5171\u6570\u636e\u5e93"},{"location":"book/C06_Genome-Compare/10_bigsi/#_1","text":"https://github.com/Phelimb/BIGSI","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C07_PanGenome-and-CoreGenome/","text":"","title":"Index"},{"location":"book/C07_PanGenome-and-CoreGenome/01_pangenome/","text":"","title":"01. Pangenome \u6982\u8ff0"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/","text":"Get_Homologues \u5206\u6790 Pangenomes \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb get_homologues \u662f\u4e00\u4e2a\u7528 perl \u8bed\u8a00\u7f16\u5199\u7684\u5e94\u7528\u8f6f\u4ef6\u3002\u53ef\u4ee5\u901a\u8fc7\u5bf9\u86cb\u767d\u8d28\u548c\u6838\u9178\u5e8f\u5217\u76f8\u4f3c\u6027\u6765\u8fdb\u884c\u540c\u6e90\u57fa\u56e0\u5206\u7ec4\uff0c\u5e76\u7528\u6765\u9274\u5b9a\u7ec6\u83cc core-genomes \u548c pan-genomes \u7684\u5f00\u6e90\u5de5\u5177\u3002 \u8f6f\u4ef6\u7248\u672c: v 3.1.2 \u5b98\u65b9\u7f51\u7ad9: http://www.github.io/eead-csic-compbio/get_homologues \u805a\u7c7b\u7b97\u6cd5: BDBH/MCL/COG \u7ed8\u56fe: R > 3.3.0 1. \u5b89\u88c5 \u00b6 \u4f7f\u7528 conda \u5efa\u7acb\u4e00\u4e2a\u5355\u72ec\u7684\u865a\u62df\u73af\u5883\uff0c\u91c7\u7528\u5176\u4ed6\u5b89\u88c5\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u3002 # \u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u5185\u542b\u4e3b\u8981\u7684\u4f9d\u8d56\u8f6f\u4ef6 # \u6700\u65b0\u7248\u5728github/release\u754c\u9762 $ wget https://github.com/eead-csic-compbio/get_homologues/releases/download/v3.1.2/get_homologues-x86_64-20180524.tgz $ tar zxf get_homologues-x86_64-20180524.tgz -C get_homologues $ cd get_homologues # \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883 $ conda create -n get_homologues $ conda activate get_homologues # \u5b89\u88c5 gd \u4f9d\u8d56 ( get_homologues ) $ conda install perl-gd # \u5982\u679c\u6ca1\u6709\u5b89\u88c5\u7cfb\u7edf\u7ea7 R \u8bed\u8a00\uff0c\u53ef\u4ee5\u5728\u865a\u62df\u73af\u5883\u91cc\u5b89\u88c5 r-base ( get_homologues ) $ conda install r-base libcurl icu # \u4e0b\u8f7d pfam \u548c swissprot \u6570\u636e\u5e93 ( get_homologues ) $ wget -P db/ ftp://ftp.uniprot.org//pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_sprot.fasta.gz ( get_homologues ) $ wget -P db/ ftp://ftp.ebi.ac.uk/pub/databases/Pfam/current_release/Pfam-A.hmm.gz # \u5b89\u88c5\u811a\u672c\u4e5f\u53ef\u4ee5\u5e2e\u4f60\u81ea\u52a8\u4e0b\u8f7d\u5e76\u89e3\u538b\u7f29 pfam \u548c swissprot \u6570\u636e\u5e93 ( get_homologues ) $ ./install.pl # \u5b89\u88c5R\u989d\u5916\u529f\u80fd\u4f9d\u8d56\u5305\uff0cnlopt\u4e0d\u662fR\u5305\uff0c\u5728S3AMAZON\u670d\u52a1\u5668\u4e0a\uff0c\u5f80\u5f80\u4e0d\u80fd\u6b63\u5e38\u5728R\u4e2d\u4e0b\u8f7d\uff0c\u6240\u4ee5\u8981\u624b\u52a8\u901a\u8fc7\u4ee3\u7406\u4e0b\u8f7d\u3002 ( get_homologues ) $ wget http://ab-initio.mit.edu/nlopt/nlopt-2.4.2.tar.gz ( get_homologues ) $ wget https://cran.r-project.org/src/contrib/nloptr_1.0.4.tar.gz ( get_homologues ) $ tar zxf nloptr_1.0.4.tar.gz ( get_homologues ) $ cd nloptr # \u8bb0\u5f55\u5f53\u524d\u76ee\u5f55\u5730\u5740\uff0c\u5373nlopt-2.4.2.tar.gz\u7684\u672c\u5730\u8def\u5f84 ( get_homologues ) $ pwd ( get_homologues ) $ vim configure # \u5c06 `NLOPT_URL` \u6539\u6210 NLOPT_URL = 'file:///path-to-nlopt-pkg/nlopt-2.4.2.tar.gz' # \u540c\u6837\u4fee\u6539 configure.ac # R CMD INSTALL \u624b\u52a8\u5b89\u88c5packages ( get_homologues ) $ cd .. && R CMD INSTALL nloptr # libcurl \u652f\u6301 ( get_homologues ) $ pkg-config --libs libcurl # \u5982\u679clibcurl.pc \u8def\u5f84\u4e0d\u6b63\u786e\uff0c\u627e\u4e0d\u5230\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u624b\u52a8\u6307\u5b9a PKG_CONFIG_PATH ( get_homologues ) $ export PKG_CONFIG_PATH = '/path/to/libcurl.pc' # \u5b89\u88c5R\u989d\u5916\u529f\u80fd ( get_homologues ) $ R > install.packages ( \"gplots\" ) > install.packages ( \"lme4\" ) > install.packages ( \"dendextend\" ) > install.packages ( \"factoextra\" ) > install.packages ( \"ape\" ) 2. \u4f7f\u7528 \u00b6 \u7ed8\u5236\u6838\u5fc3\u57fa\u56e0\u548c\u6cdb\u57fa\u56e0\u56fe \u00b6 3. \u7b97\u6cd5 \u00b6 get_homologues.pl \u9ed8\u8ba4\u91c7\u7528BDBH\u7684\u7b97\u6cd5\uff0c\u901a\u8fc7\u6dfb\u52a0\u4e0d\u540c\u53c2\u6570\u53ef\u4ee5\u8c03\u7528\u5176\u4ed6\u7b97\u6cd5\u3002 -G : COG '-M': MCL (OrthMCL) 4. \u793a\u4f8b \u00b6 \u6700\u540e\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u5927\u81f4\u4ecb\u7ecd\u4e00\u4e0b\u83cc\u79cd\u7684 Get_homologues \u7684 Pangenome \u5206\u6790\u8fc7\u7a0b\uff1a Bacillus cereus \u57fa\u56e0\u7ec4 assembly \u6570\u636e\u5e93\u4e3a\u4f8b\u5206\u6790\u8be5\u7269\u79cd\u7684 Pangenomics \u3002 # \u6293\u53d6 gbk \u683c\u5f0f\u7684 assembly \u6587\u4ef6\u5728 NCBI FTP \u4e0a\u7684\u4e0b\u8f7d\u8def\u5f84 $ esearch -db assembly -query \"Bacillus cereus[ORGN] AND latest[SB]\" | \\ > efetch -format docsum | \\ > xtract -pattern DocumentSummary -element FtpPath_RefSeq | \\ > awk -F \"/\" '{print $0\"/\"$NF\"_genomic.gbff.gz\"}' > bcereus.path # \u8fd0\u884c `cat bcereus.path`\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u7ec8\u7aef\u6253\u5370\u8f93\u51fa\u8fd9\u4e9b\u57fa\u56e0\u7ec4\u5728ftp\u670d\u52a1\u5668\u4e0a\u7684\u4e0b\u8f7d\u5730\u5740\u3002 $ cat bcereus.path ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/002/220/285/GCF_002220285.1_ASM222028v1/GCF_002220285.1_ASM222028v1_genomic.gbff.gz ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/002/216/125/GCF_002216125.1_ASM221612v1/GCF_002216125.1_ASM221612v1_genomic.gbff.gz ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/002/215/175/GCF_002215175.1_ASM221517v1/GCF_002215175.1_ASM221517v1_genomic.gbff.gz ... \u63a5\u4e0b\u6765\u7528 wget \u5de5\u5177\u7684 -i \u53c2\u6570\u4e0b\u8f7d\u5e26\u8def\u5f84\u7684\u6587\u4ef6 bcereus.path\u3002 # \u7528 wget \u5de5\u5177\u4e0b\u8f7d\uff0c\u5e76\u79fb\u52a8\u6570\u636e\u5230\u6587\u4ef6\u5939gbk $ wget --limit-rate 300k --no-passive-ftp -i bcereus.path $ mkdir gbk && gunzip *.gz && mv *.gbff gbk # \u5c06\u83cc\u682a\u91cd\u65b0\u547d\u540d\uff0c\u4ee5\u83cc\u682a\u53f7\u505a\u4e3a\u540d\u79f0\uff0c\u4e00\u517124\u4e2a\u57fa\u56e0\u7ec4\u3002 03BB87.gbk A1.gbk CMCC-P0011.gbk D12_2.gbk FORC_005.gbk FORC021.gbk FORC_047.gbk FT9.gbk ISSFR-3F.gbk JEM-2.gbk M13.gbk NJ-W.gbk 3a.gbk AR156.gbk CMCC-P0021.gbk FM1.gbk FORC_013.gbk FORC_024.gbk FORC_048.gbk HN001.gbk ISSFR-9F.gbk K8.gbk M3.gbk S2-8.gbk get_homologues \u9ed8\u8ba4\u4f7f\u7528 blast \u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u641c\u7d22\uff0c\u4e3a\u4e86\u52a0\u5feb\u901f\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 -X \u53c2\u6570\uff0c\u8c03\u7528diamond\u52a0\u5feb\u76f8\u4f3c\u6027\u6bd4\u5bf9\u3002 # get_homologues \u5206\u6790 $ get_homologues.pl -d gbk -n 40 # -X \u8c03\u7528 diamond \u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u641c\u7d22 $ get_homologues.pl -d gbk -n 40 -X # \u7a0b\u5e8f\u8f93\u51fa\uff0c\u53ef\u4ee5\u770b\u5230\u8f93\u51fa\u7684\u57fa\u56e0\u7ec4\u57fa\u56e0\u6570\u662f\u6709\u5dee\u5f02\u7684\uff0c\u6bd4\u5982FT9\u7684\u57fa\u56e0\u6570\u7279\u522b\u5c11\uff0c\u53ea\u67094391\u4e2a\u3002 03BB87.gbk 5631 3a.gbk 5792 A1.gbk 5624 AR156.gbk 5456 CMCC-P0011.gbk 5895 CMCC-P0021.gbk 5899 D12_2.gbk 5248 FM1.gbk 5642 FORC021.gbk 5366 FORC_005.gbk 5313 FORC_013.gbk 5622 FORC_024.gbk 5345 FORC_047.gbk 5695 FORC_048.gbk 5329 FT9.gbk 4391 HN001.gbk 5860 ISSFR-3F.gbk 5457 ISSFR-9F.gbk 5446 JEM-2.gbk 5441 K8.gbk 5558 M13.gbk 5590 M3.gbk 5406 NJ-W.gbk 5355 S2-8.gbk 5797 \u5f53 get_homologues.pl \u5206\u6790\u5b8c\u6210\u540e\uff0c\u9ed8\u8ba4\u8f93\u51fa\u8def\u5f84\u662f -d \u5bf9\u5e94\u76ee\u5f55\u540d\u79f0\u52a0\u4e0a _homologues \uff0c\u90a3\u4e48\u672c\u4f8b\u5c31\u662f gbk_homologues \uff0c\u9ed8\u8ba4\u7684\u7b97\u6cd5\u662f BDBH \uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539\u53c2\u6570\u6765\u4f7f\u7528 MCL \u6216 COG \u6765\u5206\u6790\u3002 get_homologues.pl \u4f1a\u9ed8\u8ba4\u9009\u62e9\u57fa\u56e0\u6570\u6700\u5c11\u7684\u5e8f\u5217\u505a\u4e3a\u53c2\u8003\u5e8f\u5217\uff0c\u6570\u636e\u5728\u8be5\u5e8f\u5217\u540d\u5f00\u5934\u7684\u6587\u4ef6\u5939\u4e2d\u3002 # \u751f\u6210\u57fa\u56e0\u5206\u5e03\u70ed\u56fe $ compare_clusters.pl -o compare -m -d gbk_homologues/*_algBDBH_e0_ $ plot_matrix_heatmap.sh -i compare/pangenome_matrix_t0.tab -o pdf -r -H 8 -W 14 -m 28 -t \"Bacillus cereus pangenome\" -k \"genes per cluster\" -i \u8f93\u5165.tab\u5206\u6790\u6570\u636e -o \u8f93\u51fa\u56fe\u7247\u683c\u5f0f -t \u56fe\u7247\u6807\u9898 -r \u5220\u9664\u5b57\u6bb5\u884c -H -W \u9ad8\u5ea6\u548c\u5bbd\u5ea6 # \u6784\u5efa $ parse_pangenome_matrix.pl -m compare/pangenome_matrix_t0.tab -s Reference \u00b6 Bacterial Pangenomics, Methods and Protocols, Chapter14 get_homologues manual","title":"02. Get_Homologues \u5206\u6790"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#get_homologues-pangenomes","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb get_homologues \u662f\u4e00\u4e2a\u7528 perl \u8bed\u8a00\u7f16\u5199\u7684\u5e94\u7528\u8f6f\u4ef6\u3002\u53ef\u4ee5\u901a\u8fc7\u5bf9\u86cb\u767d\u8d28\u548c\u6838\u9178\u5e8f\u5217\u76f8\u4f3c\u6027\u6765\u8fdb\u884c\u540c\u6e90\u57fa\u56e0\u5206\u7ec4\uff0c\u5e76\u7528\u6765\u9274\u5b9a\u7ec6\u83cc core-genomes \u548c pan-genomes \u7684\u5f00\u6e90\u5de5\u5177\u3002 \u8f6f\u4ef6\u7248\u672c: v 3.1.2 \u5b98\u65b9\u7f51\u7ad9: http://www.github.io/eead-csic-compbio/get_homologues \u805a\u7c7b\u7b97\u6cd5: BDBH/MCL/COG \u7ed8\u56fe: R > 3.3.0","title":"Get_Homologues \u5206\u6790 Pangenomes"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#1","text":"\u4f7f\u7528 conda \u5efa\u7acb\u4e00\u4e2a\u5355\u72ec\u7684\u865a\u62df\u73af\u5883\uff0c\u91c7\u7528\u5176\u4ed6\u5b89\u88c5\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u3002 # \u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u5185\u542b\u4e3b\u8981\u7684\u4f9d\u8d56\u8f6f\u4ef6 # \u6700\u65b0\u7248\u5728github/release\u754c\u9762 $ wget https://github.com/eead-csic-compbio/get_homologues/releases/download/v3.1.2/get_homologues-x86_64-20180524.tgz $ tar zxf get_homologues-x86_64-20180524.tgz -C get_homologues $ cd get_homologues # \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883 $ conda create -n get_homologues $ conda activate get_homologues # \u5b89\u88c5 gd \u4f9d\u8d56 ( get_homologues ) $ conda install perl-gd # \u5982\u679c\u6ca1\u6709\u5b89\u88c5\u7cfb\u7edf\u7ea7 R \u8bed\u8a00\uff0c\u53ef\u4ee5\u5728\u865a\u62df\u73af\u5883\u91cc\u5b89\u88c5 r-base ( get_homologues ) $ conda install r-base libcurl icu # \u4e0b\u8f7d pfam \u548c swissprot \u6570\u636e\u5e93 ( get_homologues ) $ wget -P db/ ftp://ftp.uniprot.org//pub/databases/uniprot/current_release/knowledgebase/complete/uniprot_sprot.fasta.gz ( get_homologues ) $ wget -P db/ ftp://ftp.ebi.ac.uk/pub/databases/Pfam/current_release/Pfam-A.hmm.gz # \u5b89\u88c5\u811a\u672c\u4e5f\u53ef\u4ee5\u5e2e\u4f60\u81ea\u52a8\u4e0b\u8f7d\u5e76\u89e3\u538b\u7f29 pfam \u548c swissprot \u6570\u636e\u5e93 ( get_homologues ) $ ./install.pl # \u5b89\u88c5R\u989d\u5916\u529f\u80fd\u4f9d\u8d56\u5305\uff0cnlopt\u4e0d\u662fR\u5305\uff0c\u5728S3AMAZON\u670d\u52a1\u5668\u4e0a\uff0c\u5f80\u5f80\u4e0d\u80fd\u6b63\u5e38\u5728R\u4e2d\u4e0b\u8f7d\uff0c\u6240\u4ee5\u8981\u624b\u52a8\u901a\u8fc7\u4ee3\u7406\u4e0b\u8f7d\u3002 ( get_homologues ) $ wget http://ab-initio.mit.edu/nlopt/nlopt-2.4.2.tar.gz ( get_homologues ) $ wget https://cran.r-project.org/src/contrib/nloptr_1.0.4.tar.gz ( get_homologues ) $ tar zxf nloptr_1.0.4.tar.gz ( get_homologues ) $ cd nloptr # \u8bb0\u5f55\u5f53\u524d\u76ee\u5f55\u5730\u5740\uff0c\u5373nlopt-2.4.2.tar.gz\u7684\u672c\u5730\u8def\u5f84 ( get_homologues ) $ pwd ( get_homologues ) $ vim configure # \u5c06 `NLOPT_URL` \u6539\u6210 NLOPT_URL = 'file:///path-to-nlopt-pkg/nlopt-2.4.2.tar.gz' # \u540c\u6837\u4fee\u6539 configure.ac # R CMD INSTALL \u624b\u52a8\u5b89\u88c5packages ( get_homologues ) $ cd .. && R CMD INSTALL nloptr # libcurl \u652f\u6301 ( get_homologues ) $ pkg-config --libs libcurl # \u5982\u679clibcurl.pc \u8def\u5f84\u4e0d\u6b63\u786e\uff0c\u627e\u4e0d\u5230\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u624b\u52a8\u6307\u5b9a PKG_CONFIG_PATH ( get_homologues ) $ export PKG_CONFIG_PATH = '/path/to/libcurl.pc' # \u5b89\u88c5R\u989d\u5916\u529f\u80fd ( get_homologues ) $ R > install.packages ( \"gplots\" ) > install.packages ( \"lme4\" ) > install.packages ( \"dendextend\" ) > install.packages ( \"factoextra\" ) > install.packages ( \"ape\" )","title":"1. \u5b89\u88c5"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#2","text":"","title":"2. \u4f7f\u7528"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#_1","text":"","title":"\u7ed8\u5236\u6838\u5fc3\u57fa\u56e0\u548c\u6cdb\u57fa\u56e0\u56fe"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#3","text":"get_homologues.pl \u9ed8\u8ba4\u91c7\u7528BDBH\u7684\u7b97\u6cd5\uff0c\u901a\u8fc7\u6dfb\u52a0\u4e0d\u540c\u53c2\u6570\u53ef\u4ee5\u8c03\u7528\u5176\u4ed6\u7b97\u6cd5\u3002 -G : COG '-M': MCL (OrthMCL)","title":"3. \u7b97\u6cd5"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#4","text":"\u6700\u540e\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u5927\u81f4\u4ecb\u7ecd\u4e00\u4e0b\u83cc\u79cd\u7684 Get_homologues \u7684 Pangenome \u5206\u6790\u8fc7\u7a0b\uff1a Bacillus cereus \u57fa\u56e0\u7ec4 assembly \u6570\u636e\u5e93\u4e3a\u4f8b\u5206\u6790\u8be5\u7269\u79cd\u7684 Pangenomics \u3002 # \u6293\u53d6 gbk \u683c\u5f0f\u7684 assembly \u6587\u4ef6\u5728 NCBI FTP \u4e0a\u7684\u4e0b\u8f7d\u8def\u5f84 $ esearch -db assembly -query \"Bacillus cereus[ORGN] AND latest[SB]\" | \\ > efetch -format docsum | \\ > xtract -pattern DocumentSummary -element FtpPath_RefSeq | \\ > awk -F \"/\" '{print $0\"/\"$NF\"_genomic.gbff.gz\"}' > bcereus.path # \u8fd0\u884c `cat bcereus.path`\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u7ec8\u7aef\u6253\u5370\u8f93\u51fa\u8fd9\u4e9b\u57fa\u56e0\u7ec4\u5728ftp\u670d\u52a1\u5668\u4e0a\u7684\u4e0b\u8f7d\u5730\u5740\u3002 $ cat bcereus.path ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/002/220/285/GCF_002220285.1_ASM222028v1/GCF_002220285.1_ASM222028v1_genomic.gbff.gz ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/002/216/125/GCF_002216125.1_ASM221612v1/GCF_002216125.1_ASM221612v1_genomic.gbff.gz ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/002/215/175/GCF_002215175.1_ASM221517v1/GCF_002215175.1_ASM221517v1_genomic.gbff.gz ... \u63a5\u4e0b\u6765\u7528 wget \u5de5\u5177\u7684 -i \u53c2\u6570\u4e0b\u8f7d\u5e26\u8def\u5f84\u7684\u6587\u4ef6 bcereus.path\u3002 # \u7528 wget \u5de5\u5177\u4e0b\u8f7d\uff0c\u5e76\u79fb\u52a8\u6570\u636e\u5230\u6587\u4ef6\u5939gbk $ wget --limit-rate 300k --no-passive-ftp -i bcereus.path $ mkdir gbk && gunzip *.gz && mv *.gbff gbk # \u5c06\u83cc\u682a\u91cd\u65b0\u547d\u540d\uff0c\u4ee5\u83cc\u682a\u53f7\u505a\u4e3a\u540d\u79f0\uff0c\u4e00\u517124\u4e2a\u57fa\u56e0\u7ec4\u3002 03BB87.gbk A1.gbk CMCC-P0011.gbk D12_2.gbk FORC_005.gbk FORC021.gbk FORC_047.gbk FT9.gbk ISSFR-3F.gbk JEM-2.gbk M13.gbk NJ-W.gbk 3a.gbk AR156.gbk CMCC-P0021.gbk FM1.gbk FORC_013.gbk FORC_024.gbk FORC_048.gbk HN001.gbk ISSFR-9F.gbk K8.gbk M3.gbk S2-8.gbk get_homologues \u9ed8\u8ba4\u4f7f\u7528 blast \u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u641c\u7d22\uff0c\u4e3a\u4e86\u52a0\u5feb\u901f\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 -X \u53c2\u6570\uff0c\u8c03\u7528diamond\u52a0\u5feb\u76f8\u4f3c\u6027\u6bd4\u5bf9\u3002 # get_homologues \u5206\u6790 $ get_homologues.pl -d gbk -n 40 # -X \u8c03\u7528 diamond \u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u641c\u7d22 $ get_homologues.pl -d gbk -n 40 -X # \u7a0b\u5e8f\u8f93\u51fa\uff0c\u53ef\u4ee5\u770b\u5230\u8f93\u51fa\u7684\u57fa\u56e0\u7ec4\u57fa\u56e0\u6570\u662f\u6709\u5dee\u5f02\u7684\uff0c\u6bd4\u5982FT9\u7684\u57fa\u56e0\u6570\u7279\u522b\u5c11\uff0c\u53ea\u67094391\u4e2a\u3002 03BB87.gbk 5631 3a.gbk 5792 A1.gbk 5624 AR156.gbk 5456 CMCC-P0011.gbk 5895 CMCC-P0021.gbk 5899 D12_2.gbk 5248 FM1.gbk 5642 FORC021.gbk 5366 FORC_005.gbk 5313 FORC_013.gbk 5622 FORC_024.gbk 5345 FORC_047.gbk 5695 FORC_048.gbk 5329 FT9.gbk 4391 HN001.gbk 5860 ISSFR-3F.gbk 5457 ISSFR-9F.gbk 5446 JEM-2.gbk 5441 K8.gbk 5558 M13.gbk 5590 M3.gbk 5406 NJ-W.gbk 5355 S2-8.gbk 5797 \u5f53 get_homologues.pl \u5206\u6790\u5b8c\u6210\u540e\uff0c\u9ed8\u8ba4\u8f93\u51fa\u8def\u5f84\u662f -d \u5bf9\u5e94\u76ee\u5f55\u540d\u79f0\u52a0\u4e0a _homologues \uff0c\u90a3\u4e48\u672c\u4f8b\u5c31\u662f gbk_homologues \uff0c\u9ed8\u8ba4\u7684\u7b97\u6cd5\u662f BDBH \uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539\u53c2\u6570\u6765\u4f7f\u7528 MCL \u6216 COG \u6765\u5206\u6790\u3002 get_homologues.pl \u4f1a\u9ed8\u8ba4\u9009\u62e9\u57fa\u56e0\u6570\u6700\u5c11\u7684\u5e8f\u5217\u505a\u4e3a\u53c2\u8003\u5e8f\u5217\uff0c\u6570\u636e\u5728\u8be5\u5e8f\u5217\u540d\u5f00\u5934\u7684\u6587\u4ef6\u5939\u4e2d\u3002 # \u751f\u6210\u57fa\u56e0\u5206\u5e03\u70ed\u56fe $ compare_clusters.pl -o compare -m -d gbk_homologues/*_algBDBH_e0_ $ plot_matrix_heatmap.sh -i compare/pangenome_matrix_t0.tab -o pdf -r -H 8 -W 14 -m 28 -t \"Bacillus cereus pangenome\" -k \"genes per cluster\" -i \u8f93\u5165.tab\u5206\u6790\u6570\u636e -o \u8f93\u51fa\u56fe\u7247\u683c\u5f0f -t \u56fe\u7247\u6807\u9898 -r \u5220\u9664\u5b57\u6bb5\u884c -H -W \u9ad8\u5ea6\u548c\u5bbd\u5ea6 # \u6784\u5efa $ parse_pangenome_matrix.pl -m compare/pangenome_matrix_t0.tab -s","title":"4. \u793a\u4f8b"},{"location":"book/C07_PanGenome-and-CoreGenome/02_get_homologues/#reference","text":"Bacterial Pangenomics, Methods and Protocols, Chapter14 get_homologues manual","title":"Reference"},{"location":"book/C07_PanGenome-and-CoreGenome/03_bpga/","text":"BPGA \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} [BPGA][] \u662f\u7531\u5370\u5ea6 CSIR-Indian Institute of Chemical Biology \u7814\u7a76\u4eba\u5458\u5f00\u53d1\u7684\u7528\u4e8e\u7ec6\u83cc Pangenome \u5206\u6790\u5de5\u5177\u6d41\u3002 [BPGA][] \u4f9d\u8d56\u7b2c\u4e09\u65b9\u8f6f\u4ef6\uff0c\u7528 [USEARCH][] \u6784\u5efa\u805a\u7c7b\uff0c\u7528 [Muscle][] \u8fdb\u884c\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u3002\u7528 [gnuplot][] \u548c [ghostscript][] \u751f\u6210\u7ed3\u679c\u56fe\u7247\u6216pdf\u6587\u4ef6\u3002 \u7531\u4e8e [BPGA][] \u901a\u8fc7 Usearch \u6784\u5efa cluster\uff0c\u56e0\u6b64\u9700\u8981\u7528\u6237\u81ea\u884c\u7533\u8bf7\u6216\u8d2d\u4e70 usearch\u3002 1. \u5b89\u88c5 \u00b6 # \u5047\u8bbe\u5df2\u7ecf\u5b89\u88c5\u597d usearch $ wget https://sourceforge.net/projects/bpgatool/files/BPGA-1.3-linux-x86_64-0-0-0.tar.gz $ tar zxf BPGA-1.3-linux-x86_64-0-0-0.tar.gz -C ~/app/BPGA $ cd ~/app/BPGA 2. \u4f7f\u7528 \u00b6 \u8f93\u5165\u6570\u636e .faa \u86cb\u767d\u8d28\u5e8f\u5217\u6587\u4ef6 .pep .fsa HMP\u86cb\u767d\u6570\u636e\u6587\u4ef6 .gbk/gb Genbank\u86cb\u767d\u8d28\u5e8f\u5217\u6587\u4ef6 \u4f7f\u7528\u65b9\u6cd5 BPGA \u91c7\u7528\u4e86\u7c7b\u4f3cphylip\u5f0f\u7684\u4ea4\u4e92\u5f0f\u8fd0\u884c\u65b9\u5f0f\u3002 $ BPGA-Version-1.3 \u8fd0\u884c\u7a0b\u5e8f\u540e\uff0c\u4f1a\u8fdb\u5165\u83dc\u5355\u9009\u62e9\u754c\u9762\uff0c\u4e00\u822c\u53ef\u4ee5\u52062\u6b65\u8d70\uff1a \u6309 1 \u9009\u62e9\u8f93\u5165\u6587\u4ef6\u683c\u5f0f \u6309 2 \u8fdb\u5165 Pangenome \u5206\u6790 \u6309 0 \u9000\u56de\u4e0a\u4e00\u7ea7\u83dc\u5355 \u7ed3\u679c\u6587\u4ef6 \u751f\u6210\u7684\u6570\u636e\u5305\u62ec\u6839\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u548c Results\u3001Sequences \u548c Supporting_files 3\u4e2a\u5b50\u6587\u4ef6\u5939\u5185\u7ed3\u679c\u6587\u4ef6 \u6839\u76ee\u5f55\u4e0b\u6587\u4ef6\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 cog.udb gi_name \u5404\u4e2a\u57fa\u56e0\u7ec4\u57fa\u56e0\u7684 gi \u540d\u79f0 INPUT_all.ffn \u5404\u4e2a\u57fa\u56e0\u7ec4\u7684\u7f16\u7801\u57fa\u56e0\u6838\u9178\u5e8f\u5217 INPUT_all.seq \u5404\u4e2a\u57fa\u56e0\u7ec4\u7684\u7f16\u7801\u57fa\u56e0\u6c28\u57fa\u9178\u5e8f\u5217 kegg1.udb kegg2.udb list \u57fa\u56e0\u7ec4\u6587\u4ef6\u5217\u8868 Results\u6587\u4ef6\u5939\u5185\u4e3b\u8981\u5305\u542b\u5206\u6790\u7ed3\u679c\u751f\u6210\u7684\u56fe\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 COG_DISTRIBUTION_DETAILS.pdf core, accessory, unique 3\u79cd\u7c7b\u578b\u57fa\u56e0\u5728COGS\u5404\u4e2a\u5206\u7c7b\u4e2d\u7684\u5206\u5e03\u6bd4\u503c COG_DISTRIBUTION.pdf core, accessory, unique 3\u79cd\u7c7b\u578b\u57fa\u56e0\u5728COGS\u4e2d\u603b\u7684\u5206\u5e03\u6bd4\u503c Core_Pan_Dot_Plot.pdf pangenome \u548c coregenome \u70b9\u9635\u8d8b\u52bf\u56fe Core_Pan_Plot.pdf pangenome \u548c coregenome boxplot\u8d8b\u52bf\u56fe curve.xls pangenome \u548c coregenome \u57fa\u56e0\u6570\u8ba1\u7b97\u516c\u5f0f\u548c\u7269\u79cd\u7684\u57fa\u56e0\u4f30\u8ba1\u503c\uff0c\u6587\u672c\u683c\u5f0f Default_Core_Pan_Plot.pdf pangenome \u548c coregenome \u8d8b\u52bf\u56fe Histogram.pdf \u5404\u4e2a\u5206\u6790\u83cc\u682a\u6240\u542b\u57fa\u56e0\u5bb6\u65cf\u7684\u76f4\u65b9\u56fe\u5206\u5e03 KEGG_DISTRIBUTION_DETAILS.pdf pdf \u683c\u5f0f\u7684 KEGG \u8be6\u7ec6\u5206\u7c7b\u57fa\u56e0\u7684 core, accessory \u548c uniq genes \u6570\u91cf\u5206\u5e03 KEGG_DISTRIBUTION.pdf pdf \u683c\u5f0f\u7684 KEGG \u4e3b\u8981\u5206\u7c7b\u57fa\u56e0\u7684 core, accessory \u548c uniq genes \u6570\u91cf\u5206\u5e03 New_Genes_Plot.pdf \u5206\u6790\u83cc\u682a\u6240\u542b New genes \u6570\u91cf\u5206\u5e03 Pan_phylogeny.pdf pdf \u683c\u5f0f\u7684\u5206\u6790\u83cc\u682a\u63d0\u4f9b\u53d1\u751f\u6811\u56fe Pan_phylogeny.svg svg \u683c\u5f0f\u7684\u5206\u6790\u83cc\u682a\u7cfb\u7edf\u53d1\u751f\u6811\u56fe stats.xls \u6240\u6709\u5206\u6790\u83cc\u682a\u542b\u6709\u7684 core, accessory, unique \u548c exclusively absent \u57fa\u56e0\u3002\u867d\u7136\u540e\u7f00\u4e3a.xls\uff0c\u6587\u672c\u683c\u5f0f Sequences \u6587\u4ef6\u5939\u5185\u5305\u542b\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 accessory_seq.txt accessory \u57fa\u56e0\u7684\u5e8f\u5217 core_genes_with_atypical_GC_content.txt \u8fdb\u884c\u4e86 atypical GC \u5206\u6790\u540e\u4ea7\u751f\uff0c core \u57fa\u56e0\u7684\u5e8f\u5217 core_seq.txt uniq \u57fa\u56e0\u7684\u5e8f\u5217 exclusively_absent_seq.txt exclusively absent \u57fa\u56e0\u7684\u5e8f\u5217 REPSEQ_ACCESSORY.txt REPSEQ_CORE.txt REPSEQ_UNIQUE.txt unique_genes_with_atypical_GC_content.txt \u8fdb\u884c\u4e86 atypical GC \u5206\u6790\u540e\u4ea7\u751f\uff0c uniq \u57fa\u56e0\u7684\u5e8f\u5217 unique_seq.txt uniq \u57fa\u56e0\u7684\u5e8f\u5217 Supporting_files \u6587\u4ef6\u5939\u5305\u542b\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 ACCESSORY_COG_hits3.txt ACCESSORY_kegg_hits3.txt Cog_Category1.txt CORE_COG_hits3.txt core_default.txt core_genome.txt CORE_kegg_hits3.txt DATASET.xls histogram.txt kegg_accessory_id.txt kegg_accessory_out.txt kegg_core_id.txt kegg_core_out.txt Kegg_count_details1.txt kegg_histogram1.txt kegg_unique_id.txt kegg_unique_out.txt list Major_Cog_Category1.txt matrix.txt new_genes_count.txt pan_default.txt pan_genome.txt PAN_PHYLOGENY_MOD.nwk PAN_PHYLOGENY_MOD.ph PAN_PHYLOGENY.ph plots_default.plt plots.plt u_clusters.txt UNIQUE_COG_hits3.txt UNIQUE_kegg_hits3.txt","title":"03. BPGA \u5206\u6790"},{"location":"book/C07_PanGenome-and-CoreGenome/03_bpga/#bpga","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} [BPGA][] \u662f\u7531\u5370\u5ea6 CSIR-Indian Institute of Chemical Biology \u7814\u7a76\u4eba\u5458\u5f00\u53d1\u7684\u7528\u4e8e\u7ec6\u83cc Pangenome \u5206\u6790\u5de5\u5177\u6d41\u3002 [BPGA][] \u4f9d\u8d56\u7b2c\u4e09\u65b9\u8f6f\u4ef6\uff0c\u7528 [USEARCH][] \u6784\u5efa\u805a\u7c7b\uff0c\u7528 [Muscle][] \u8fdb\u884c\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u3002\u7528 [gnuplot][] \u548c [ghostscript][] \u751f\u6210\u7ed3\u679c\u56fe\u7247\u6216pdf\u6587\u4ef6\u3002 \u7531\u4e8e [BPGA][] \u901a\u8fc7 Usearch \u6784\u5efa cluster\uff0c\u56e0\u6b64\u9700\u8981\u7528\u6237\u81ea\u884c\u7533\u8bf7\u6216\u8d2d\u4e70 usearch\u3002","title":"BPGA"},{"location":"book/C07_PanGenome-and-CoreGenome/03_bpga/#1","text":"# \u5047\u8bbe\u5df2\u7ecf\u5b89\u88c5\u597d usearch $ wget https://sourceforge.net/projects/bpgatool/files/BPGA-1.3-linux-x86_64-0-0-0.tar.gz $ tar zxf BPGA-1.3-linux-x86_64-0-0-0.tar.gz -C ~/app/BPGA $ cd ~/app/BPGA","title":"1. \u5b89\u88c5"},{"location":"book/C07_PanGenome-and-CoreGenome/03_bpga/#2","text":"\u8f93\u5165\u6570\u636e .faa \u86cb\u767d\u8d28\u5e8f\u5217\u6587\u4ef6 .pep .fsa HMP\u86cb\u767d\u6570\u636e\u6587\u4ef6 .gbk/gb Genbank\u86cb\u767d\u8d28\u5e8f\u5217\u6587\u4ef6 \u4f7f\u7528\u65b9\u6cd5 BPGA \u91c7\u7528\u4e86\u7c7b\u4f3cphylip\u5f0f\u7684\u4ea4\u4e92\u5f0f\u8fd0\u884c\u65b9\u5f0f\u3002 $ BPGA-Version-1.3 \u8fd0\u884c\u7a0b\u5e8f\u540e\uff0c\u4f1a\u8fdb\u5165\u83dc\u5355\u9009\u62e9\u754c\u9762\uff0c\u4e00\u822c\u53ef\u4ee5\u52062\u6b65\u8d70\uff1a \u6309 1 \u9009\u62e9\u8f93\u5165\u6587\u4ef6\u683c\u5f0f \u6309 2 \u8fdb\u5165 Pangenome \u5206\u6790 \u6309 0 \u9000\u56de\u4e0a\u4e00\u7ea7\u83dc\u5355 \u7ed3\u679c\u6587\u4ef6 \u751f\u6210\u7684\u6570\u636e\u5305\u62ec\u6839\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u548c Results\u3001Sequences \u548c Supporting_files 3\u4e2a\u5b50\u6587\u4ef6\u5939\u5185\u7ed3\u679c\u6587\u4ef6 \u6839\u76ee\u5f55\u4e0b\u6587\u4ef6\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 cog.udb gi_name \u5404\u4e2a\u57fa\u56e0\u7ec4\u57fa\u56e0\u7684 gi \u540d\u79f0 INPUT_all.ffn \u5404\u4e2a\u57fa\u56e0\u7ec4\u7684\u7f16\u7801\u57fa\u56e0\u6838\u9178\u5e8f\u5217 INPUT_all.seq \u5404\u4e2a\u57fa\u56e0\u7ec4\u7684\u7f16\u7801\u57fa\u56e0\u6c28\u57fa\u9178\u5e8f\u5217 kegg1.udb kegg2.udb list \u57fa\u56e0\u7ec4\u6587\u4ef6\u5217\u8868 Results\u6587\u4ef6\u5939\u5185\u4e3b\u8981\u5305\u542b\u5206\u6790\u7ed3\u679c\u751f\u6210\u7684\u56fe\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 COG_DISTRIBUTION_DETAILS.pdf core, accessory, unique 3\u79cd\u7c7b\u578b\u57fa\u56e0\u5728COGS\u5404\u4e2a\u5206\u7c7b\u4e2d\u7684\u5206\u5e03\u6bd4\u503c COG_DISTRIBUTION.pdf core, accessory, unique 3\u79cd\u7c7b\u578b\u57fa\u56e0\u5728COGS\u4e2d\u603b\u7684\u5206\u5e03\u6bd4\u503c Core_Pan_Dot_Plot.pdf pangenome \u548c coregenome \u70b9\u9635\u8d8b\u52bf\u56fe Core_Pan_Plot.pdf pangenome \u548c coregenome boxplot\u8d8b\u52bf\u56fe curve.xls pangenome \u548c coregenome \u57fa\u56e0\u6570\u8ba1\u7b97\u516c\u5f0f\u548c\u7269\u79cd\u7684\u57fa\u56e0\u4f30\u8ba1\u503c\uff0c\u6587\u672c\u683c\u5f0f Default_Core_Pan_Plot.pdf pangenome \u548c coregenome \u8d8b\u52bf\u56fe Histogram.pdf \u5404\u4e2a\u5206\u6790\u83cc\u682a\u6240\u542b\u57fa\u56e0\u5bb6\u65cf\u7684\u76f4\u65b9\u56fe\u5206\u5e03 KEGG_DISTRIBUTION_DETAILS.pdf pdf \u683c\u5f0f\u7684 KEGG \u8be6\u7ec6\u5206\u7c7b\u57fa\u56e0\u7684 core, accessory \u548c uniq genes \u6570\u91cf\u5206\u5e03 KEGG_DISTRIBUTION.pdf pdf \u683c\u5f0f\u7684 KEGG \u4e3b\u8981\u5206\u7c7b\u57fa\u56e0\u7684 core, accessory \u548c uniq genes \u6570\u91cf\u5206\u5e03 New_Genes_Plot.pdf \u5206\u6790\u83cc\u682a\u6240\u542b New genes \u6570\u91cf\u5206\u5e03 Pan_phylogeny.pdf pdf \u683c\u5f0f\u7684\u5206\u6790\u83cc\u682a\u63d0\u4f9b\u53d1\u751f\u6811\u56fe Pan_phylogeny.svg svg \u683c\u5f0f\u7684\u5206\u6790\u83cc\u682a\u7cfb\u7edf\u53d1\u751f\u6811\u56fe stats.xls \u6240\u6709\u5206\u6790\u83cc\u682a\u542b\u6709\u7684 core, accessory, unique \u548c exclusively absent \u57fa\u56e0\u3002\u867d\u7136\u540e\u7f00\u4e3a.xls\uff0c\u6587\u672c\u683c\u5f0f Sequences \u6587\u4ef6\u5939\u5185\u5305\u542b\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 accessory_seq.txt accessory \u57fa\u56e0\u7684\u5e8f\u5217 core_genes_with_atypical_GC_content.txt \u8fdb\u884c\u4e86 atypical GC \u5206\u6790\u540e\u4ea7\u751f\uff0c core \u57fa\u56e0\u7684\u5e8f\u5217 core_seq.txt uniq \u57fa\u56e0\u7684\u5e8f\u5217 exclusively_absent_seq.txt exclusively absent \u57fa\u56e0\u7684\u5e8f\u5217 REPSEQ_ACCESSORY.txt REPSEQ_CORE.txt REPSEQ_UNIQUE.txt unique_genes_with_atypical_GC_content.txt \u8fdb\u884c\u4e86 atypical GC \u5206\u6790\u540e\u4ea7\u751f\uff0c uniq \u57fa\u56e0\u7684\u5e8f\u5217 unique_seq.txt uniq \u57fa\u56e0\u7684\u5e8f\u5217 Supporting_files \u6587\u4ef6\u5939\u5305\u542b\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 ACCESSORY_COG_hits3.txt ACCESSORY_kegg_hits3.txt Cog_Category1.txt CORE_COG_hits3.txt core_default.txt core_genome.txt CORE_kegg_hits3.txt DATASET.xls histogram.txt kegg_accessory_id.txt kegg_accessory_out.txt kegg_core_id.txt kegg_core_out.txt Kegg_count_details1.txt kegg_histogram1.txt kegg_unique_id.txt kegg_unique_out.txt list Major_Cog_Category1.txt matrix.txt new_genes_count.txt pan_default.txt pan_genome.txt PAN_PHYLOGENY_MOD.nwk PAN_PHYLOGENY_MOD.ph PAN_PHYLOGENY.ph plots_default.plt plots.plt u_clusters.txt UNIQUE_COG_hits3.txt UNIQUE_kegg_hits3.txt","title":"2. \u4f7f\u7528"},{"location":"book/C07_PanGenome-and-CoreGenome/04_roary/","text":"Roary \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} 1. \u5b89\u88c5 \u00b6 # Ubuntu \u4e0b\u5b89\u88c5 $ sudo apt install roary # conda \u4e2d\u5b89\u88c5 $ conda create -n roary roary 2. \u4f7f\u7528 \u00b6 \u8f93\u5165\u6570\u636e Roary \u7684\u8f93\u5165\u7aef\u9700\u8981 gff \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6\u3002\u7531\u4e8e NCBI \u4e0b\u8f7d\u7684 gff \u662f\u4e0d\u542b\u6838\u9178\u5e8f\u5217\u7684 gff \u683c\u5f0f\u6587\u4ef6\uff0c\u65e0\u6cd5\u76f4\u63a5\u7528\u6765\u5206\u6790\u3002Prokka \u751f\u6210\u7684 gff \u683c\u5f0f\u6587\u4ef6\u5305\u542b\u6838\u9178\u5e8f\u5217\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e0b\u8f7d NCBI \u4e0a\u7684 fna \u6587\u4ef6\u7136\u540e\u7528 prokka \u6ce8\u91ca\u540e\u518d\u7528 roary \u5206\u6790\u3002 # \u4fee\u6539\u6587\u4ef6\u540e\u7f00\u540d $ sed -i 's/\\.gbff/\\.fna/g' ftp-path.txt # \u6839\u636e\u6587\u4ef6 ftp-path.txt \u5185\u5bb9\u4e0b\u8f7d\u6570\u636e $ wget -i ftp-path.txt --no-passive-ftp # \u89e3\u538b\u7f29\u57fa\u56e0\u7ec4 $ gunzip *.gz # \u5c06 Assembly \u6587\u4ef6\u540d\u4fee\u6539\u4e3a\u83cc\u682a\u540d\u79f0 $ for i in *.fna ; do mv $i ` head -1 $i | awk '{print $5, $6}' | awk -F ',' '{print $1\".fna\"}' | sed 's/CMCC /CMCC-/g' ` ; done # prokka \u8fdb\u884c\u6ce8\u91ca\u5e76\u4ee5\u83cc\u682a\u540d\u4e3a\u6587\u4ef6\u5939\u540d\u8f93\u51fa $ for i in *.fna ; do k = ` echo $i | sed 's/.fna//g' ` && prokka $i --prefix $k -outdir $k --cpus 40 ; done # \u590d\u5236\u51fa gff \u6587\u4ef6\u5230 gff_folder \u4e2d\uff0c\u7531 roary \u8fdb\u884c\u5206\u6790 $ cp */*.gff gff_folder/ ; done \u4f7f\u7528\u65b9\u6cd5 roary \u7528 blastp \u5bf9 gff \u6587\u4ef6\u4e2d\u7684\u5e8f\u5217\u8fdb\u884c orthologs \u5206\u6790\uff0c\u83b7\u5f97 pangenome \u548c coregenome \u7ed3\u679c\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528 mafft \u5bf9\u6838\u5fc3\u57fa\u56e0\u7ec4\u8fdb\u884c\u5e8f\u5217\u6bd4\u5bf9\uff0c\u751f\u6210\u7cfb\u7edf\u53d1\u751f\u6811\u3002 # \u6784\u5efapangenome\u65b9\u6cd5\uff0c\u7528mafft\u5c06\u6838\u5fc3\u57fa\u56e0\u6784\u5efa\u591a\u5e8f\u5217\u6bd4\u5bf9 $ roary -e --mafft -p 40 gff_folder/*.gff -f roary \u7ed3\u679c\u6587\u4ef6 roary\u751f\u6210\u7684\u7ed3\u679c\u6587\u4ef6\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 accessory_binary_genes.fa \u975e\u6838\u5fc3\u57fa\u56e0\u7684\u4e8c\u8fdb\u5236\u5206\u5e03\u6570\u636e\uff0c\u4ee50/1\u8868\u793a\u643a\u5e26\u6216\u4e0d\u643a\u5e26 accessory_binary_genes.fa.newick \u975e\u6838\u5fc3\u57fa\u56e0\u7684\u4e8c\u8fdb\u5236\u5206\u5e03\u6570\u636e\u7684newick\u6811\u56fe\u6570\u636e\u6587\u4ef6 accessory_graph.dot \u975e\u6838\u5fc3\u57fa\u56e0\u70b9\u56fe accessory.header.embl \u975e\u6838\u5fc3\u57fa\u56e0\u6570\u636e\u5934\u4fe1\u606f\uff0c\u4ee5embl\u683c\u5f0f\u4fdd\u5b58 accessory.tab \u975e\u6838\u5fc3\u57fa\u56e0\u4fe1\u606f blast_identity_frequency.Rtab blast\u6bd4\u5bf9\u4e00\u81f4\u6027\u7ed3\u679c\u7684R\u8bed\u8a00\u5de5\u5177 clustered_proteins \u805a\u7c7b\u7684\u86cb\u767d\u8d28 core_accessory_graph.dot \u6838\u5fc3\u57fa\u56e0\u70b9\u56fe core_accessory.header.embl embl \u683c\u5f0f\u7684\u6587\u4ef6\u663e\u793a\u5404 accessory \u57fa\u56e0 core_accessory.tab accessory \u57fa\u56e0\u5728\u6240\u5728\u7684\u57fa\u56e0\u7ec4 core_alignment_header.embl \u6838\u5fc3\u5e8f\u5217\u6bd4\u5bf9\u7ed3\u679c\u7684\u5934\u4fe1\u606f\uff0c\u4ee5embl\u683c\u5f0f\u4fdd\u5b58 core_gene_alignment.aln \u6838\u5fc3\u57fa\u56e0\u5e8f\u5217\u6bd4\u5bf9 core_gene_alignment.aln.reduced \u6838\u5fc3\u57fa\u56e0\u5e8f\u5217\u6bd4\u5bf9\uff0c\u53bb\u9664\u5197\u4f59\u6570\u636e gene_presence_absence.csv csv \u683c\u5f0f\u7684\u57fa\u56e0\u5728\u5404\u4e2a\u57fa\u56e0\u7ec4\u4e2d\u662f\u5426\u5b58\u5728\u7684\u6570\u636e\u6587\u4ef6 gene_presence_absence.Rtab Rtab \u683c\u5f0f\u7684\u57fa\u56e0\u5728\u5404\u4e2a\u57fa\u56e0\u7ec4\u4e2d\u662f\u5426\u5b58\u5728\u7684\u6570\u636e\u6587\u4ef6 number_of_conserved_genes.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u6240\u5171\u6709\u57fa\u56e0\u6570 number_of_genes_in_pan_genome.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u7684\u6240\u6709\u57fa\u56e0\u6570 number_of_new_genes.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u6240\u65b0\u589e\u7684\u57fa\u56e0\u6570 number_of_unique_genes.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u6240\u7279\u6709\u57fa\u56e0\u6570 pan_genome_reference.fa \u6cdb\u57fa\u56e0\u7ec4\u53c2\u8003\u5e8f\u5217 summary_statistics.txt pangenome \u5206\u6790\u5404\u79cd\u57fa\u56e0\u6570\u91cf\u7ed3\u679c","title":"04. Roary \u5206\u6790"},{"location":"book/C07_PanGenome-and-CoreGenome/04_roary/#roary","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Roary"},{"location":"book/C07_PanGenome-and-CoreGenome/04_roary/#1","text":"# Ubuntu \u4e0b\u5b89\u88c5 $ sudo apt install roary # conda \u4e2d\u5b89\u88c5 $ conda create -n roary roary","title":"1. \u5b89\u88c5"},{"location":"book/C07_PanGenome-and-CoreGenome/04_roary/#2","text":"\u8f93\u5165\u6570\u636e Roary \u7684\u8f93\u5165\u7aef\u9700\u8981 gff \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6\u3002\u7531\u4e8e NCBI \u4e0b\u8f7d\u7684 gff \u662f\u4e0d\u542b\u6838\u9178\u5e8f\u5217\u7684 gff \u683c\u5f0f\u6587\u4ef6\uff0c\u65e0\u6cd5\u76f4\u63a5\u7528\u6765\u5206\u6790\u3002Prokka \u751f\u6210\u7684 gff \u683c\u5f0f\u6587\u4ef6\u5305\u542b\u6838\u9178\u5e8f\u5217\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e0b\u8f7d NCBI \u4e0a\u7684 fna \u6587\u4ef6\u7136\u540e\u7528 prokka \u6ce8\u91ca\u540e\u518d\u7528 roary \u5206\u6790\u3002 # \u4fee\u6539\u6587\u4ef6\u540e\u7f00\u540d $ sed -i 's/\\.gbff/\\.fna/g' ftp-path.txt # \u6839\u636e\u6587\u4ef6 ftp-path.txt \u5185\u5bb9\u4e0b\u8f7d\u6570\u636e $ wget -i ftp-path.txt --no-passive-ftp # \u89e3\u538b\u7f29\u57fa\u56e0\u7ec4 $ gunzip *.gz # \u5c06 Assembly \u6587\u4ef6\u540d\u4fee\u6539\u4e3a\u83cc\u682a\u540d\u79f0 $ for i in *.fna ; do mv $i ` head -1 $i | awk '{print $5, $6}' | awk -F ',' '{print $1\".fna\"}' | sed 's/CMCC /CMCC-/g' ` ; done # prokka \u8fdb\u884c\u6ce8\u91ca\u5e76\u4ee5\u83cc\u682a\u540d\u4e3a\u6587\u4ef6\u5939\u540d\u8f93\u51fa $ for i in *.fna ; do k = ` echo $i | sed 's/.fna//g' ` && prokka $i --prefix $k -outdir $k --cpus 40 ; done # \u590d\u5236\u51fa gff \u6587\u4ef6\u5230 gff_folder \u4e2d\uff0c\u7531 roary \u8fdb\u884c\u5206\u6790 $ cp */*.gff gff_folder/ ; done \u4f7f\u7528\u65b9\u6cd5 roary \u7528 blastp \u5bf9 gff \u6587\u4ef6\u4e2d\u7684\u5e8f\u5217\u8fdb\u884c orthologs \u5206\u6790\uff0c\u83b7\u5f97 pangenome \u548c coregenome \u7ed3\u679c\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528 mafft \u5bf9\u6838\u5fc3\u57fa\u56e0\u7ec4\u8fdb\u884c\u5e8f\u5217\u6bd4\u5bf9\uff0c\u751f\u6210\u7cfb\u7edf\u53d1\u751f\u6811\u3002 # \u6784\u5efapangenome\u65b9\u6cd5\uff0c\u7528mafft\u5c06\u6838\u5fc3\u57fa\u56e0\u6784\u5efa\u591a\u5e8f\u5217\u6bd4\u5bf9 $ roary -e --mafft -p 40 gff_folder/*.gff -f roary \u7ed3\u679c\u6587\u4ef6 roary\u751f\u6210\u7684\u7ed3\u679c\u6587\u4ef6\uff1a \u7ed3\u679c\u6587\u4ef6 \u6570\u636e\u5185\u5bb9 accessory_binary_genes.fa \u975e\u6838\u5fc3\u57fa\u56e0\u7684\u4e8c\u8fdb\u5236\u5206\u5e03\u6570\u636e\uff0c\u4ee50/1\u8868\u793a\u643a\u5e26\u6216\u4e0d\u643a\u5e26 accessory_binary_genes.fa.newick \u975e\u6838\u5fc3\u57fa\u56e0\u7684\u4e8c\u8fdb\u5236\u5206\u5e03\u6570\u636e\u7684newick\u6811\u56fe\u6570\u636e\u6587\u4ef6 accessory_graph.dot \u975e\u6838\u5fc3\u57fa\u56e0\u70b9\u56fe accessory.header.embl \u975e\u6838\u5fc3\u57fa\u56e0\u6570\u636e\u5934\u4fe1\u606f\uff0c\u4ee5embl\u683c\u5f0f\u4fdd\u5b58 accessory.tab \u975e\u6838\u5fc3\u57fa\u56e0\u4fe1\u606f blast_identity_frequency.Rtab blast\u6bd4\u5bf9\u4e00\u81f4\u6027\u7ed3\u679c\u7684R\u8bed\u8a00\u5de5\u5177 clustered_proteins \u805a\u7c7b\u7684\u86cb\u767d\u8d28 core_accessory_graph.dot \u6838\u5fc3\u57fa\u56e0\u70b9\u56fe core_accessory.header.embl embl \u683c\u5f0f\u7684\u6587\u4ef6\u663e\u793a\u5404 accessory \u57fa\u56e0 core_accessory.tab accessory \u57fa\u56e0\u5728\u6240\u5728\u7684\u57fa\u56e0\u7ec4 core_alignment_header.embl \u6838\u5fc3\u5e8f\u5217\u6bd4\u5bf9\u7ed3\u679c\u7684\u5934\u4fe1\u606f\uff0c\u4ee5embl\u683c\u5f0f\u4fdd\u5b58 core_gene_alignment.aln \u6838\u5fc3\u57fa\u56e0\u5e8f\u5217\u6bd4\u5bf9 core_gene_alignment.aln.reduced \u6838\u5fc3\u57fa\u56e0\u5e8f\u5217\u6bd4\u5bf9\uff0c\u53bb\u9664\u5197\u4f59\u6570\u636e gene_presence_absence.csv csv \u683c\u5f0f\u7684\u57fa\u56e0\u5728\u5404\u4e2a\u57fa\u56e0\u7ec4\u4e2d\u662f\u5426\u5b58\u5728\u7684\u6570\u636e\u6587\u4ef6 gene_presence_absence.Rtab Rtab \u683c\u5f0f\u7684\u57fa\u56e0\u5728\u5404\u4e2a\u57fa\u56e0\u7ec4\u4e2d\u662f\u5426\u5b58\u5728\u7684\u6570\u636e\u6587\u4ef6 number_of_conserved_genes.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u6240\u5171\u6709\u57fa\u56e0\u6570 number_of_genes_in_pan_genome.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u7684\u6240\u6709\u57fa\u56e0\u6570 number_of_new_genes.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u6240\u65b0\u589e\u7684\u57fa\u56e0\u6570 number_of_unique_genes.Rtab Rtab \u683c\u5f0f\u7684\u4e0d\u540c\u6570\u91cf\u57fa\u56e0\u7ec4\u6240\u7279\u6709\u57fa\u56e0\u6570 pan_genome_reference.fa \u6cdb\u57fa\u56e0\u7ec4\u53c2\u8003\u5e8f\u5217 summary_statistics.txt pangenome \u5206\u6790\u5404\u79cd\u57fa\u56e0\u6570\u91cf\u7ed3\u679c","title":"2. \u4f7f\u7528"},{"location":"book/C07_PanGenome-and-CoreGenome/05_panseq/","text":"Panseq \u00b6","title":"05. panseq \u5206\u6790"},{"location":"book/C07_PanGenome-and-CoreGenome/05_panseq/#panseq","text":"","title":"Panseq"},{"location":"book/C07_PanGenome-and-CoreGenome/07_orthmcl/","text":"OrthMCL \u00b6","title":"07. OrthMCL \u5206\u6790"},{"location":"book/C07_PanGenome-and-CoreGenome/07_orthmcl/#orthmcl","text":"","title":"OrthMCL"},{"location":"book/C07_PanGenome-and-CoreGenome/08_itep/","text":"ITEP \u00b6","title":"08. ITEP \u5206\u6790"},{"location":"book/C07_PanGenome-and-CoreGenome/08_itep/#itep","text":"","title":"ITEP"},{"location":"book/C08_Genome-Visualization/","text":"","title":"Index"},{"location":"book/C08_Genome-Visualization/01_igv/","text":"IGV \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb igv\u662f\u6700\u5e38\u7528\u7684\u6bd4\u5bf9\u7ed3\u679c\u53ef\u89c6\u5316\u8f6f\u4ef6\u4e4b\u4e00\uff0c\u4f7f\u7528java\u5f00\u53d1\u53ef\u4ee5\u8de8\u5e73\u53f0\u4f7f\u7528\u3002 1. \u51c6\u5907\u6570\u636e \u00b6 # \u4e0b\u8f7d\u53c2\u8003\u57fa\u56e0\u7ec4 NC_012967 $ esearch -db nuccore -query 'NC_012967' | efetch -format fasta > NC_012967.1.fasta # \u4e0b\u8f7d\u6bd4\u5bf9\u5e8f\u5217sra $ prefetch -v SRR030257 2. \u5b89\u88c5 \u00b6 $ wget -O http://iubio.bio.indiana.edu/soft/molbio/readseq/java/readseq.jar $ java -cp ~/app/readseq/readseq.jar run NC_012967.1.gbk -f GFF -o NC_012967.1.gff $ wget https://github.com/broadinstitute/IGV/archive/v2.3.37.zip $ unzip v2.3.37.zip $ cd v2.3.37 $ java -Xmx2g -jar igv.jar Infomation Linux\u4e0b\u4f7f\u7528igv\u5efa\u8bae\u91c7\u7528java8\uff0c\u5176\u4ed6\u7248\u672c\u53ef\u80fd\u4f1a\u51fa\u9519\u3002\u56e0\u6b64\u901a\u8fc7conda\u5b89\u88c5\u4e5f\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u65b9\u5f0f\u3002 3. \u751f\u6210\u6bd4\u5bf9\u6587\u4ef6 \u00b6 \u9996\u5148\u5c06 sra \u683c\u5f0f\u7684\u6bd4\u5bf9\u6587\u4ef6\u8f6c\u6362\u6210 fastq \u683c\u5f0f\uff0c\u5e76\u8fdb\u884c\u8d28\u63a7\u53bb\u9664\u63a5\u5934\u548c\u5916\u7f18\u6c61\u67d3\u7b49\u5e8f\u5217\u3002\u7136\u540e\u7528samtools \u7528 samtools \u8f6c\u6362\u6570\u636e\u683c\u5f0f $ samtools faidx NC_012967.1.fasta $ samtools view -b -S -o bowtie/SRR030257.bam bowtie/SRR030257.sam $ samtools sort bowtie/SRR030257.bam bowtie/SRR030257.sorted $ samtools index bowtie/SRR030257.sorted.bam \u5206\u6790\u7ed3\u679c \u5f39\u51fa\u7684IGV\u56fe\u5f62\u754c\u9762\uff0c\u4e0b\u62c9\u83dc\u5355\u9009\u62e9 Genomes / Create .genome File... ,\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d FASTA file \u9009\u9879\u9009\u62e9\u57fa\u56e0\u7ec4fasta\u6587\u4ef6\uff0c\u5728 Gene File \u9009\u9879\u9009\u62e9\u8f6c\u6362\u7684\u6587\u4ef6\u3002 \u53c2\u8003\u8d44\u6599 \u00b6","title":"01. igv \u67e5\u770b\u6bd4\u5bf9\u7ed3\u679c"},{"location":"book/C08_Genome-Visualization/01_igv/#igv","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb igv\u662f\u6700\u5e38\u7528\u7684\u6bd4\u5bf9\u7ed3\u679c\u53ef\u89c6\u5316\u8f6f\u4ef6\u4e4b\u4e00\uff0c\u4f7f\u7528java\u5f00\u53d1\u53ef\u4ee5\u8de8\u5e73\u53f0\u4f7f\u7528\u3002","title":"IGV"},{"location":"book/C08_Genome-Visualization/01_igv/#1","text":"# \u4e0b\u8f7d\u53c2\u8003\u57fa\u56e0\u7ec4 NC_012967 $ esearch -db nuccore -query 'NC_012967' | efetch -format fasta > NC_012967.1.fasta # \u4e0b\u8f7d\u6bd4\u5bf9\u5e8f\u5217sra $ prefetch -v SRR030257","title":"1. \u51c6\u5907\u6570\u636e"},{"location":"book/C08_Genome-Visualization/01_igv/#2","text":"$ wget -O http://iubio.bio.indiana.edu/soft/molbio/readseq/java/readseq.jar $ java -cp ~/app/readseq/readseq.jar run NC_012967.1.gbk -f GFF -o NC_012967.1.gff $ wget https://github.com/broadinstitute/IGV/archive/v2.3.37.zip $ unzip v2.3.37.zip $ cd v2.3.37 $ java -Xmx2g -jar igv.jar Infomation Linux\u4e0b\u4f7f\u7528igv\u5efa\u8bae\u91c7\u7528java8\uff0c\u5176\u4ed6\u7248\u672c\u53ef\u80fd\u4f1a\u51fa\u9519\u3002\u56e0\u6b64\u901a\u8fc7conda\u5b89\u88c5\u4e5f\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u65b9\u5f0f\u3002","title":"2. \u5b89\u88c5"},{"location":"book/C08_Genome-Visualization/01_igv/#3","text":"\u9996\u5148\u5c06 sra \u683c\u5f0f\u7684\u6bd4\u5bf9\u6587\u4ef6\u8f6c\u6362\u6210 fastq \u683c\u5f0f\uff0c\u5e76\u8fdb\u884c\u8d28\u63a7\u53bb\u9664\u63a5\u5934\u548c\u5916\u7f18\u6c61\u67d3\u7b49\u5e8f\u5217\u3002\u7136\u540e\u7528samtools \u7528 samtools \u8f6c\u6362\u6570\u636e\u683c\u5f0f $ samtools faidx NC_012967.1.fasta $ samtools view -b -S -o bowtie/SRR030257.bam bowtie/SRR030257.sam $ samtools sort bowtie/SRR030257.bam bowtie/SRR030257.sorted $ samtools index bowtie/SRR030257.sorted.bam \u5206\u6790\u7ed3\u679c \u5f39\u51fa\u7684IGV\u56fe\u5f62\u754c\u9762\uff0c\u4e0b\u62c9\u83dc\u5355\u9009\u62e9 Genomes / Create .genome File... ,\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d FASTA file \u9009\u9879\u9009\u62e9\u57fa\u56e0\u7ec4fasta\u6587\u4ef6\uff0c\u5728 Gene File \u9009\u9879\u9009\u62e9\u8f6c\u6362\u7684\u6587\u4ef6\u3002","title":"3. \u751f\u6210\u6bd4\u5bf9\u6587\u4ef6"},{"location":"book/C08_Genome-Visualization/01_igv/#_1","text":"","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C08_Genome-Visualization/02_brig/","text":"BRIG \u00b6","title":"02. BRIG \u5206\u6790\u5de5\u5177"},{"location":"book/C08_Genome-Visualization/02_brig/#brig","text":"","title":"BRIG"},{"location":"book/C08_Genome-Visualization/03_circos/","text":"circos \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} circos \u662f\u4e00\u4e2a\u5173\u7cfb\u53ef\u89c6\u5316\u5708\u56fe\u8868\u8fbe\u8f6f\u4ef6\uff0c\u5e38\u88ab\u7528\u6765\u7ed8\u5236\u73af\u72b6\u7684\u7ec6\u83cc\u67d3\u8272\u4f53\u6216\u8d28\u7c92\uff0c\u6216\u4f5c\u4e3a\u53ef\u89c6\u5316\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u7814\u7a76\u591a\u4e2a\u7ec6\u83cc\u57fa\u56e0\u7ec4\u4e4b\u95f4\u5dee\u5f02\u7684\u5de5\u5177\u3002 circos \u7684\u4f18\u70b9\u662f\u751f\u6210\u7684\u56fe\u5f62\u4f18\u7f8e\uff0c\u53ef\u4ee5\u8868\u793a\u5404\u79cd\u7c7b\u578b\u7684\u6570\u636e\u3002\u4f46\u662f\u7f3a\u70b9\u5728\u4e8e\u7275\u6d89\u5185\u5bb9\u8fc7\u4e8e\u7e41\u6742\uff0c\u91c7\u7528\u7684\u672f\u8bed\u540d\u79f0\u7684\u542b\u4e49\u5f80\u5f80\u8ba9\u4eba\u6478\u4e0d\u7740\u5934\u8111\u3002\u6559\u7a0b\u4e5f\u4e0d\u591f\u660e\u786e\u3002 circos \u7684\u76ee\u7684\u662f\u7ed8\u5236\u56fe\u5f62\uff0c\u6709\u70b9\u7c7b\u4f3cPhotoshop\uff0c\u5b83\u63d0\u4f9b\u7684\u662f\u5de5\u5177\uff0c\u800c\u4e0d\u662f\u4e00\u6b65\u901f\u6210\u7684\u83b7\u5f97\u67d0\u79cd\u56fe\u5f62\u7684\u65b9\u6cd5\u3002 1. \u5b89\u88c5 \u00b6 \u4e0b\u8f7d\u5b89\u88c5 # \u5b89\u88c5\u4f9d\u8d56\u5305 # install gd2-xpm development library $ sudo apt-get install libgd2-xpm-dev # link circos perl import path. circos use \"#!/usr/env perl\" instead of # \"/usr/bin/env\" which is default in ubuntu $ sudo ln -s /usr/bin/env /bin/env # install perl modules needed in circos $ sudo cpan install Clone \\ > Config::General \\ > Font::TTF \\ > List::MoreUtils \\ > Math::Bezier \\ > Math::VecStat \\ > Math::Round \\ > Params::Validate \\ > Readonly \\ > Regexp::Common \\ > Set::IntSpan \\ > Text::Format \\ > GD \\ > Statistics::Basic # \u5b89\u88c5 circos # \u4ece\u5b98\u65b9\u4e0b\u8f7d\u5b89\u88c5\u5305 $ wet http://circos.ca/distribution/circos-0.69.tgz $ tar xfz circos-0.69.tgz -C ~/apps/circos # \u6dfb\u52a0cirocs\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d $ sudo ln -s ~/apps/circos/bin/circos /usr/local/sbin/circos # \u6216\u8005\u53ea\u6dfb\u52a0\u5230\u5f53\u524d\u7528\u6237\u73af\u5883\u4e2d $ echo \"export PATH=\\$PATH:\\$HOME/apps/circos/bin/\" >> ~/.bashrc $ source ~/.bashrc $ circos -v # \u5982\u679c\u5c4f\u5e55\u6253\u5370\u51fa\u4ee5\u4e0b\u4fe1\u606f\uff0c\u8bf4\u660e\u4f60\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528circos\u4e86\u3002 circos | v 0 .69 | 6 Dec 2015 | Perl 5 .018002 \u5982\u679c cpan \u4e0b\u8f7d\u5f88\u6162\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\uff0c\u53ef\u4ee5\u4fee\u6539 mirror \u6765\u6539\u5584\u3002\u5982\u679c\u4f60\u7684 CPAN \u662f\u5b89\u88c5\u5728\u4e2a\u4eba\u7528\u6237\u73af\u5883\u91cc\uff0c\u5c06 ~/.cpan/CPAN/MyConfig.pm \u6587\u4ef6\u91cc\u7684 urllist \u884c\u540e\u9762\u7684\u5185\u5bb9\u4fee\u6539\u6210\u79bb\u81ea\u5df1\u6700\u8fd1\u7684\u955c\u50cf\u7ad9\u70b9\uff0c\u6bd4\u5982\uff1a 'urllist' => [q[http://mirrors.sohu.com/CPAN/]], \u4f7f\u7528 conda \u5b89\u88c5 # \u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u5b89\u88c5 circos $ conda create env circos $ source activate circos ( circos ) $ conda install circos 2. \u8f93\u5165\u6587\u4ef6\u7c7b\u578b \u00b6 circos \u4e3b\u8981\u9700\u89812\u7c7b\u6587\u4ef6\uff0c\u4e00\u7c7b\u662f\u53ef\u89c6\u5316\u7ed3\u679c\u7684\u6570\u636e\u6587\u4ef6\uff0c\u4e00\u7c7b\u662f\u7528\u4e8e\u544a\u8bc9 circos \u5982\u4f55\u5c55\u793a\u7684\u914d\u7f6e\u6587\u4ef6\u3002 2.1 \u6570\u636e\u6587\u4ef6 \u00b6 circos \u53ea\u8d1f\u8d23\u753b\u56fe\uff0c\u56fe\u4e2d\u8981\u5c55\u793a\u7684\u6570\u636e\u9700\u8981\u81ea\u5df1\u9884\u5148\u51c6\u5907\u597d\u3002\u6bd4\u5982\u57fa\u56e0\u7ec4\u7684GC\u542b\u91cf\uff0c\u9700\u8981\u7528\u5176\u4ed6\u7a0b\u5e8f\u5148\u751f\u6210\u4ee5\u4e0b\u8fd9\u79cd\u7c7b\u578b\u7684\u6587\u672c\u683c\u5f0f\u6587\u4ef6\u3002 \u67d3\u8272\u4f53 \u5f00\u59cb\u4f4d\u7f6e \u7ed3\u675f\u4f4d\u7f6e \u989c\u8272\u503c \u5176\u4ed6\u9009\u9879[\u53ef\u9009] chr1 1000 2000 red 2.2 \u914d\u7f6e\u6587\u4ef6 \u00b6 \u4e00\u822c\u7ed8\u56fe\u9700\u8981\u4ee5\u4e0b\u914d\u7f6e\u6587\u4ef6\uff1a circos.conf ideogram.conf ticks.conf image.conf highlight.conf colors_fonts_patterns.conf \u4f60\u53ef\u4ee5\u5c06\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5168\u90e8\u653e\u5728circos.conf\u91cc\uff0c\u4e5f\u53ef\u4ee5\u5206\u79bb\u6210\u5355\u72ec\u7684\u6587\u4ef6\u901a\u8fc7include\u65b9\u5f0f\u5bfc\u5165\u3002 2.2.1 circos.conf \u00b6 \u8fd9\u662fcircos\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0c\u5176\u4ed6\u7684\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7include\u7684\u65b9\u5f0f\u6765\u5bfc\u5165\u3002 <<include your_other_configure.conf>> 2.2.2 ideogram.conf \u00b6 2.2.3 image.conf \u00b6 2.2.4 highlight.conf \u00b6 2.2.5 ticks.conf \u00b6 3. \u53ef\u89c6\u5316\u7684\u7ec4\u6210\u8981\u7d20 \u00b6 \\<plots>\\<\\/plots>\uff0c\\<links>\\<\\/links> \u533a\u5757\u5185\u7684\u53c2\u6570\u662f\u5c5e\u4e8e Global \u7684\u3002 \\<plot>\\<\\/plot> \u533a\u5757\u5185\u7684\u53c2\u6570\u662f\u5c5e\u4e8e Local \u7684\u3002 \u5982\u679c\u662f\u67d0\u4e2a\u53c2\u6570\u5728\u591a\u4e2ablock\u4e2d\u90fd\u91cd\u590d\u4f7f\u7528\uff0c\u90a3\u4e48\u53ef\u4ee5\u8bbe\u7f6e\u6210 global \u7684\u53c2\u6570\uff0c\u5f53\u67d0\u4e2ablock\u8981\u4f7f\u7528\u65b0\u7684\u503c\u65f6\uff0c\u518d\u7528 local \u7684\u53c2\u6570\u8986\u76d6\u5373\u53ef\u3002 # plot\u53ef\u4ee5\u7406\u89e3\u4e3a\u56fe\u5c42\uff0c\u591a\u4e2a\u5708\u56fe\u56fe\u5c42\u6784\u6210\u4e00\u4e2aplots <plot></plot> # plots \u7531 # type \u63cf\u8ff0\u56fe\u5c42\u5185\u5bb9\u7c7b\u578b\uff0c\u5982text type = text # r0, r1 \u8868\u793a\u5708\u56fe\u534a\u5f84\uff0c<1\u5728\u5185\u5708\uff0c>1\u5728\u5916\u5708, r0-r1\u4e3a\u5bbd\u5ea6 r0 = 0.95r r1 = 0.85r ideogram highlight tick label link circos.conf \u53c2\u6570 # \u67d3\u8272\u4f53\u7684\u6570\u636e\u96c6 karyotype = data.txt # \u5b9a\u4e49\u5708\u56fe\u6807\u5c3a chromosomes_units = 1000 # \u5982\u679c\u8bbe\u7f6e\u6210yes\uff0c\u6240\u6709ideogram\u4e0a\u90fd\u4f1a\u73b0\u5b9eticks chromosomes_display_default = yes 3. \u7528circos\u6765\u7ed8\u56fe \u00b6 \u7ed8\u5236\u73af\u72b6 Salmonella LT2 \u57fa\u56e0\u7ec4 \u4e4b\u524d\u7684\u6559\u7a0b\u91cc\u4ecb\u7ecd\u4e86\u7528DNAPlotter\u7ed8\u5236\u4e00\u4e2a\u57fa\u56e0\u7ec4\u5b8c\u6210\u56fe\u7684\u5708\u56fe\uff0c\u5706\u5708\u5185\u5bb9strand\uff0cGC content\u548cGC skew\u3002\u4ece\u67d0\u4e2a\u89d2\u5ea6\u4e0a\u770b\uff0cDNAplotter\u7684\u914d\u7f6e\u6587\u4ef6\u4e0ecircos\u6709\u4e00\u5b9a\u7684\u7c7b\u4f3c\uff0c2\u4e2a\u8f6f\u4ef6\u7684\u533a\u522b\u5728\u4e8e\u524d\u8005\u4e13\u6ce8\u4e8e\u7ed8\u5236\u5355\u4e2a\u7ec6\u83cc\u57fa\u56e0\u7ec4\uff0c\u540e\u8005\u53ef\u4ee5\u5b8c\u6210\u66f4\u591a\u7684\u529f\u80fd\u3002\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u6211\u4eec\u901a\u8fc7\u7528circos\u6765\u7ed8\u5236\u7c7b\u4f3cDNAplotter\u751f\u6210\u7684\u57fa\u56e0\u7ec4\u5708\u56fe\uff0c\u4ece\u800c\u5b66\u4e60circos\u7684\u57fa\u672c\u7528\u6cd5\uff0c \u51c6\u5907\u6570\u636e\u6587\u4ef6\uff1a\u4eceNCBI\u4e0a\u4e0b\u8f7dSalonella LT\u57fa\u56e0\u7ec4\u6570\u636e\u6587\u4ef6\u3002 $ esearch -db nuccore -query \"NC_003197.1[accn]\" | efetch -db nuccore -format fasta > LT2.fasta $ esearch -db nuccore -query \"NC_003197.1[accn]\" | efetch -db nuccore -format gb > LT2.gb \u7ed8\u5236circos\u6240\u9700\u8981\u7684ideogram\u6240\u9700\u8981\u7684\u51e0\u7c7b\u6570\u636e\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2apython\u811a\u672cget_circos_data.py\u6765\u83b7\u5f97\u3002 # -*- utf-8 -*- from Bio import SeqIO rec = SeqIO . read ( \"LT2.gb\" , \"genbank\" ) forward = [] reverse = [] for feature in rec . features : if feature . type != 'gene' : continue if feature . strand == 1 : forward . append (( int ( feature . location . start ), int ( feature . location . end ))) elif feature . strand == - 1 : reverse . append (( int ( feature . location . start ), int ( feature . location . end ))) def get_forward_strand ( strands ): \"\"\" Create forward strands \"\"\" with open ( \"forward.txt\" , \"w\" ) as f : for strand in strands : f . writelines ( \"chr1 \\t %d \\t %d \\t fillcolor=chr4 \\n \" % ( strand [ 0 ], strand [ 1 ])) def get_reverse_strand ( strands ): \"\"\" Create forward strands \"\"\" with open ( \"reverse.txt\" , \"w\" ) as f : for strand in strands : f . writelines ( \"chr1 \\t %d \\t %d \\t fillcolor=chr6 \\n \" % ( strand [ 0 ], strand [ 1 ])) def calc_GC_content ( seq ): \"\"\" Return GC content of input sequence \"\"\" gc = sum ( seq . count ( x ) for x in [ 'G' , 'C' , 'g' , 'c' ]) gc_content = gc / float ( len ( seq )) return round ( gc_content , 4 ) def calc_GC_skew ( seq ): \"\"\" Reuturn GC skew of input sequence \"\"\" g = seq . count ( 'G' ) + seq . count ( 'g' ) c = seq . count ( 'C' ) + seq . count ( 'c' ) try : skew = ( g - c ) / float ( g + c ) except ZeroDivisionError : skew = 0 return round ( skew , 4 ) window = 10000 step = 5000 seqs = SeqIO . parse ( \"LT2.fasta\" , \"fasta\" ) for seq in seqs : seq_1 = seq . seq with open ( \"gc_skew.txt\" , \"w\" ) as f1 : with open ( \"gc_content.txt\" , \"w\" ) as f2 : for i in range ( 0 , len ( seq_1 ), step ): subseq = seq_1 [ i : i + window ] gc_content = ( calc_GC_content ( subseq )) gc_skew = ( calc_GC_skew ( subseq )) start = ( i + 1 if ( i + 1 <= len ( seq_1 )) else i ) end = ( i + step if ( i + step <= len ( seq_1 )) else len ( seq_1 )) f1 . writelines ( \"chr1 \\t %d \\t %d \\t %s \\n \" % ( start , end , gc_skew )) f2 . writelines ( \"chr1 \\t %d \\t %d \\t %s \\n \" % ( start , end , gc_content )) get_forward_strand ( forward ) get_reverse_strand ( reverse ) \u8fd0\u884c\u811a\u672c\uff1a $ python get_circos_data.py 3.1 \u914d\u7f6e\u6587\u4ef6 \u00b6 $ cd circos_data $ touch circos.conf \u5927\u90e8\u5206\u7ec6\u83cc\u7684\u57fa\u56e0\u7ec4\u90fd\u662f\u5355\u67d3\u8272\u4f53\u7684\uff0c\u56e0\u6b64\u4e00\u4e2a\u7ec6\u83cc\u57fa\u56e0\u5b8c\u6210\u56fe\u53ef\u4ee5\u75281\u4e2a\u5b8c\u6574\u7684\u5708\u6765\u8868\u793a\u3002\u901a\u8fc7\u8bbe\u7f6espacing\u6765\u53bb\u9664\u95f4\u65ad\u3002 <spacing> default = u break = u </spacing> circos.conf \u6587\u4ef6\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9 <<include colors_fonts_patterns.conf>> <ideogram> <spacing> default = 0u break = 0u </spacing> radius = 0.85r thickness = 5p stroke_thickness = 1 stroke_color = black fill = yes fill_color = black </ideogram> <image> dir = . file = circos.png png = yes svg = yes # radius of inscribed circle in image radius = 1000p # by default angle=0 is at 3 o'clock position angle_offset = -90 #angle_orientation = counterclockwise auto_alpha_colors = yes auto_alpha_steps = 5 background = white </image> karyotype = data/node.txt chromosome_units = 1000 chromosomes_display_default = yes show_ticks = yes show_tick_labels = yes show_grid = no grid_start = dims(ideogram,radius_inner) - 0.5r grid_end = dims(ideogram,radius_inner) # --------------------- ticks start --------------------- # <ticks> # if yes, skip of label of 0bp skip_first_label = no # if yes, skip of lable of last skip_last_label = no # ticks radius to show, outside or inside radius = dims(ideogram,radius_outer) # genome size * label_multiplier = label units label_multiplier = 1e-6 tick_separation = 2p min_label_distance_to_edge = 0p label_separation = 5p # label distance to ticks label_offset = 5p label_size = 8p size = 20p <tick> spacing = 10000u color = gray show_label = no thickness = 1p </tick> <tick> spacing = 100000u color = black show_label = yes label_size = 16p thickness = 2p # label format, %.1f = 1.1, %d = 1, %.2f = 1.10 format = %.1f grid = yes grid_color = white grid_thickness = 1p </tick> <tick> spacing = 1000000u size = 30p color = black show_label = yes label_size = 24p thickness = 3p # label format, %.1f = 1.1, %d = 1, %.2f = 1.10 format = %d # plus Mb to lables suffix = \" Mb\" grid = yes grid_color = dgrey grid_thickness = 1p </tick> </ticks> # --------------------- ticks ends ---------------------- # # --------------------- plot start ---------------------- # <plots> <plot> type = tile file = data/forward.txt r1 = 0.95r r0 = 0.90r margin = 1b stroke_thickness = 0 color = orange orientation = center # tile height thickness = 20p # different layer index height padding = 5p layers = 1 <rules> <rule> condition = var(size) > 5kb color = black </rule> </rules> </plot> <plot> type = tile file = data/reverse.txt r1 = 0.92r r0 = 0.87r margin = 1b stroke_thickness = 0 color = blue thickness = 20p padding = 5p # display one layer of plot layers = 1 <rule> condition = var(size) > 3kb color = black </rule> </plot> <plot> type = line r1 = 0.85r r0 = 0.75r file = data/gc_skew.txt thickness = 1 max_gap = 1u color = vdgrey # max/min value of line plotting min = -0.15 max = 0.15 fill_color = vdgrey_a3 <backgrounds> <background> color = vvlgreen y0 = 0.05 </background> <background> color = vvlred y1 = -0.05 </background> </backgrounds> <axes> <axis> color = lgrey_a2 thickness = 1 spacing = 0.04r </axis> </axes> </plot> <plot> type = histogram r1 = 0.70r r0 = 0.60r file = data/gc_content.txt thickness = 1 max_gap = 1u min = 0 max = 1 <rules> <rule> condition = 1 fill_color = eval(sprintf(\"spectral-9-div-%d\", remap_int(var(value), 0,1,1,9))) </rule> </rules> </plot> </plots> <<include housekeeping.conf>> 3.2 \u7ed8\u5236\u6d4b\u5e8f\u62fc\u63a5\u7ed3\u679c\u4fe1\u606f \u00b6 3.2.1 \u6570\u636e\u51c6\u5907 \u00b6 3.2.2 \u914d\u7f6e\u6587\u4ef6 \u00b6 3.3. \u7ed8\u5236\u4e00\u4e2a\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u6570\u636e \u00b6 BRIG \u5e38\u88ab\u7528\u6765\u7ed8\u5236\u7684\u591a\u4e2a\u7ec6\u83cc\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u6570\u636e\u3002\u672c\u4f8b\u7528 circos \u7ed8\u5236\u7c7b\u4f3c\u7684\u5708\u56fe\uff0c\u901a\u8fc7\u7ed3\u679c\u53ef\u89c6\u5316\u6765\u53d1\u73b0\u548c\u5c55\u793a\u751f\u7269\u5b66\u4fe1\u606f\u3002 3.3.1 \u6570\u636e\u51c6\u5907 \u00b6 3.3.2 \u914d\u7f6e\u6587\u4ef6 \u00b6 \u89e3\u6790 circos \u00b6 \u4ee5 mit \u7684circos\u56fe\u4e3a\u4f8b\uff0c\u53ef\u4ee5\u770b\u51fa\u4e00\u4e2acircos\u7ed8\u5236\u7684\u5708\u56fe\u4e2d\u53ef\u4ee5\u5305\u542b\u4ec0\u4e48\u7c7b\u578b\u7684\u56fe\u793a\u3002 histogram \u67f1\u72b6\u56fe ideogram \u8868\u610f\u6587\u5b57 heatmap \u70ed\u529b\u56fe links \u5173\u7cfb\u7ebf\u6761 highlights \u9ad8\u4eae\u5f3a\u8c03\u533a\u57df grids \u7f51\u683c\u56fe ticks \u5708\u56fe\u6807\u5c3a \u5b8c\u6574circos\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784\" # ---- \u5b9a\u4e49\u56fe\u7684\u989c\u8272\u4fe1\u606f ---- # <colors> </colors> # ---- \u5b9a\u4e49\u56fe\u7684\u5b57\u4f53\u4fe1\u606f ---- # <fonts> </fonts> # ---- \u5b9a\u4e49\u586b\u5145\u6a21\u5f0f\u56fe ---- # <patterns> </patterns> # ---- \u56fe\u50cf\u7684\u57fa\u672c\u8bbe\u7f6e\u4fe1\u606f ---- # <image> </image> # ---- ideogram \u56fe ---- # <ideogram> <spacing> ideograms\u4e4b\u95f4\u7684\u95f4\u9694 <pairwise> ideograms\u5bf9\uff08\u5982\u4eba\u67d3\u8272\u4f53\uff09\u4e4b\u95f4\u7684\u8ddd\u79bb </pairwise> </spacing> </ideogram> # ---- \u6807\u5c3a\u4fe1\u606f ---- # <ticks> <tick> \u5404\u4e2atick\u7684\u914d\u7f6e </tick> </ticks> # ---- \u533a\u57df\u7684\u653e\u5927\u7f29\u5c0f\u4fe1\u606f ---- # <zooms> <zoom> </zoom> </zooms> # ---- highlights \u6570\u636e ---- # <highlights> <highlight> <rules> <rule> \u67d0\u4e00\u4e2a\u5177\u4f53 data track \u7684\u914d\u7f6e\u4fee\u6539 </rule> </rules> </highlight> </highlights> # ---- Data tracks \u6570\u636e ---- # <plots> <plot> <rules> <rule> \u67d0\u4e00\u4e2a\u5177\u4f53 data track \u7684\u914d\u7f6e\u4fee\u6539 </rule> </rules> <axes> <axis> plot \u7684\u534a\u5f84\u8f74 </axis> </axes> <backgrounds> <background> plot \u7684\u80cc\u666f\u8bbe\u7f6e </background> </backgrounds> </plot> </plots> # ---- links \u6570\u636e ---- # <links> <link> <rules> <rule> \u67d0\u4e00\u4e2a\u5177\u4f53 link \u6570\u636e\u7684\u914d\u7f6e\u4fee\u6539 </rule> </rules> </link> </links> circos\u914d\u7f6e\u7684\u5355\u4f4d\u6982\u5ff5 \u4e00\u5171\u67094\u79cd\u5355\u4f4d\uff1ap, r, u, b p\u8868\u793a\u50cf\u7d20\uff0c1p\u8868\u793a1\u50cf\u7d20 r\u8868\u793a\u76f8\u5bf9\u5927\u5c0f\uff0c0.95r\u8868\u793a95% ring \u5927\u5c0f\u3002 u\u8868\u793a\u76f8\u5bf9chromosomes_unit\u7684\u957f\u5ea6\uff0c\u5982\u679cchromosomes_unit = 1000\uff0c\u52191u\u5c31\u662f\u5343\u5206\u4e4b\u4e00\u7684\u67d3\u8272\u4f53\u957f\u5ea6\u3002 b\u8868\u793a\u78b1\u57fa\uff0c\u5982\u679c\u67d3\u8272\u4f53\u957f1M\uff0c\u90a3\u4e481b\u5c31\u662f\u767e\u4e07\u5206\u4e4b\u4e00\u7684\u957f\u5ea6\u3002 circos \u7684\u884d\u751f\u4ea7\u54c1 \u00b6 Reference \u00b6 Circos Official Website Creating Circos Plots Plot of the complete Pseudomonas pseudoalcaligenes CECT5344 genome \"` \"```````` )\"\"\"\"\"\"\"\"```````````````","title":"03. circos \u5de5\u5177\u4f7f\u7528"},{"location":"book/C08_Genome-Visualization/03_circos/#circos","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} circos \u662f\u4e00\u4e2a\u5173\u7cfb\u53ef\u89c6\u5316\u5708\u56fe\u8868\u8fbe\u8f6f\u4ef6\uff0c\u5e38\u88ab\u7528\u6765\u7ed8\u5236\u73af\u72b6\u7684\u7ec6\u83cc\u67d3\u8272\u4f53\u6216\u8d28\u7c92\uff0c\u6216\u4f5c\u4e3a\u53ef\u89c6\u5316\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u7814\u7a76\u591a\u4e2a\u7ec6\u83cc\u57fa\u56e0\u7ec4\u4e4b\u95f4\u5dee\u5f02\u7684\u5de5\u5177\u3002 circos \u7684\u4f18\u70b9\u662f\u751f\u6210\u7684\u56fe\u5f62\u4f18\u7f8e\uff0c\u53ef\u4ee5\u8868\u793a\u5404\u79cd\u7c7b\u578b\u7684\u6570\u636e\u3002\u4f46\u662f\u7f3a\u70b9\u5728\u4e8e\u7275\u6d89\u5185\u5bb9\u8fc7\u4e8e\u7e41\u6742\uff0c\u91c7\u7528\u7684\u672f\u8bed\u540d\u79f0\u7684\u542b\u4e49\u5f80\u5f80\u8ba9\u4eba\u6478\u4e0d\u7740\u5934\u8111\u3002\u6559\u7a0b\u4e5f\u4e0d\u591f\u660e\u786e\u3002 circos \u7684\u76ee\u7684\u662f\u7ed8\u5236\u56fe\u5f62\uff0c\u6709\u70b9\u7c7b\u4f3cPhotoshop\uff0c\u5b83\u63d0\u4f9b\u7684\u662f\u5de5\u5177\uff0c\u800c\u4e0d\u662f\u4e00\u6b65\u901f\u6210\u7684\u83b7\u5f97\u67d0\u79cd\u56fe\u5f62\u7684\u65b9\u6cd5\u3002","title":"circos"},{"location":"book/C08_Genome-Visualization/03_circos/#1","text":"\u4e0b\u8f7d\u5b89\u88c5 # \u5b89\u88c5\u4f9d\u8d56\u5305 # install gd2-xpm development library $ sudo apt-get install libgd2-xpm-dev # link circos perl import path. circos use \"#!/usr/env perl\" instead of # \"/usr/bin/env\" which is default in ubuntu $ sudo ln -s /usr/bin/env /bin/env # install perl modules needed in circos $ sudo cpan install Clone \\ > Config::General \\ > Font::TTF \\ > List::MoreUtils \\ > Math::Bezier \\ > Math::VecStat \\ > Math::Round \\ > Params::Validate \\ > Readonly \\ > Regexp::Common \\ > Set::IntSpan \\ > Text::Format \\ > GD \\ > Statistics::Basic # \u5b89\u88c5 circos # \u4ece\u5b98\u65b9\u4e0b\u8f7d\u5b89\u88c5\u5305 $ wet http://circos.ca/distribution/circos-0.69.tgz $ tar xfz circos-0.69.tgz -C ~/apps/circos # \u6dfb\u52a0cirocs\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d $ sudo ln -s ~/apps/circos/bin/circos /usr/local/sbin/circos # \u6216\u8005\u53ea\u6dfb\u52a0\u5230\u5f53\u524d\u7528\u6237\u73af\u5883\u4e2d $ echo \"export PATH=\\$PATH:\\$HOME/apps/circos/bin/\" >> ~/.bashrc $ source ~/.bashrc $ circos -v # \u5982\u679c\u5c4f\u5e55\u6253\u5370\u51fa\u4ee5\u4e0b\u4fe1\u606f\uff0c\u8bf4\u660e\u4f60\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528circos\u4e86\u3002 circos | v 0 .69 | 6 Dec 2015 | Perl 5 .018002 \u5982\u679c cpan \u4e0b\u8f7d\u5f88\u6162\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\uff0c\u53ef\u4ee5\u4fee\u6539 mirror \u6765\u6539\u5584\u3002\u5982\u679c\u4f60\u7684 CPAN \u662f\u5b89\u88c5\u5728\u4e2a\u4eba\u7528\u6237\u73af\u5883\u91cc\uff0c\u5c06 ~/.cpan/CPAN/MyConfig.pm \u6587\u4ef6\u91cc\u7684 urllist \u884c\u540e\u9762\u7684\u5185\u5bb9\u4fee\u6539\u6210\u79bb\u81ea\u5df1\u6700\u8fd1\u7684\u955c\u50cf\u7ad9\u70b9\uff0c\u6bd4\u5982\uff1a 'urllist' => [q[http://mirrors.sohu.com/CPAN/]], \u4f7f\u7528 conda \u5b89\u88c5 # \u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u5b89\u88c5 circos $ conda create env circos $ source activate circos ( circos ) $ conda install circos","title":"1. \u5b89\u88c5"},{"location":"book/C08_Genome-Visualization/03_circos/#2","text":"circos \u4e3b\u8981\u9700\u89812\u7c7b\u6587\u4ef6\uff0c\u4e00\u7c7b\u662f\u53ef\u89c6\u5316\u7ed3\u679c\u7684\u6570\u636e\u6587\u4ef6\uff0c\u4e00\u7c7b\u662f\u7528\u4e8e\u544a\u8bc9 circos \u5982\u4f55\u5c55\u793a\u7684\u914d\u7f6e\u6587\u4ef6\u3002","title":"2. \u8f93\u5165\u6587\u4ef6\u7c7b\u578b"},{"location":"book/C08_Genome-Visualization/03_circos/#21","text":"circos \u53ea\u8d1f\u8d23\u753b\u56fe\uff0c\u56fe\u4e2d\u8981\u5c55\u793a\u7684\u6570\u636e\u9700\u8981\u81ea\u5df1\u9884\u5148\u51c6\u5907\u597d\u3002\u6bd4\u5982\u57fa\u56e0\u7ec4\u7684GC\u542b\u91cf\uff0c\u9700\u8981\u7528\u5176\u4ed6\u7a0b\u5e8f\u5148\u751f\u6210\u4ee5\u4e0b\u8fd9\u79cd\u7c7b\u578b\u7684\u6587\u672c\u683c\u5f0f\u6587\u4ef6\u3002 \u67d3\u8272\u4f53 \u5f00\u59cb\u4f4d\u7f6e \u7ed3\u675f\u4f4d\u7f6e \u989c\u8272\u503c \u5176\u4ed6\u9009\u9879[\u53ef\u9009] chr1 1000 2000 red","title":"2.1 \u6570\u636e\u6587\u4ef6"},{"location":"book/C08_Genome-Visualization/03_circos/#22","text":"\u4e00\u822c\u7ed8\u56fe\u9700\u8981\u4ee5\u4e0b\u914d\u7f6e\u6587\u4ef6\uff1a circos.conf ideogram.conf ticks.conf image.conf highlight.conf colors_fonts_patterns.conf \u4f60\u53ef\u4ee5\u5c06\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5168\u90e8\u653e\u5728circos.conf\u91cc\uff0c\u4e5f\u53ef\u4ee5\u5206\u79bb\u6210\u5355\u72ec\u7684\u6587\u4ef6\u901a\u8fc7include\u65b9\u5f0f\u5bfc\u5165\u3002","title":"2.2 \u914d\u7f6e\u6587\u4ef6"},{"location":"book/C08_Genome-Visualization/03_circos/#221-circosconf","text":"\u8fd9\u662fcircos\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0c\u5176\u4ed6\u7684\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7include\u7684\u65b9\u5f0f\u6765\u5bfc\u5165\u3002 <<include your_other_configure.conf>>","title":"2.2.1 circos.conf"},{"location":"book/C08_Genome-Visualization/03_circos/#222-ideogramconf","text":"","title":"2.2.2 ideogram.conf"},{"location":"book/C08_Genome-Visualization/03_circos/#223-imageconf","text":"","title":"2.2.3 image.conf"},{"location":"book/C08_Genome-Visualization/03_circos/#224-highlightconf","text":"","title":"2.2.4 highlight.conf"},{"location":"book/C08_Genome-Visualization/03_circos/#225-ticksconf","text":"","title":"2.2.5 ticks.conf"},{"location":"book/C08_Genome-Visualization/03_circos/#3","text":"\\<plots>\\<\\/plots>\uff0c\\<links>\\<\\/links> \u533a\u5757\u5185\u7684\u53c2\u6570\u662f\u5c5e\u4e8e Global \u7684\u3002 \\<plot>\\<\\/plot> \u533a\u5757\u5185\u7684\u53c2\u6570\u662f\u5c5e\u4e8e Local \u7684\u3002 \u5982\u679c\u662f\u67d0\u4e2a\u53c2\u6570\u5728\u591a\u4e2ablock\u4e2d\u90fd\u91cd\u590d\u4f7f\u7528\uff0c\u90a3\u4e48\u53ef\u4ee5\u8bbe\u7f6e\u6210 global \u7684\u53c2\u6570\uff0c\u5f53\u67d0\u4e2ablock\u8981\u4f7f\u7528\u65b0\u7684\u503c\u65f6\uff0c\u518d\u7528 local \u7684\u53c2\u6570\u8986\u76d6\u5373\u53ef\u3002 # plot\u53ef\u4ee5\u7406\u89e3\u4e3a\u56fe\u5c42\uff0c\u591a\u4e2a\u5708\u56fe\u56fe\u5c42\u6784\u6210\u4e00\u4e2aplots <plot></plot> # plots \u7531 # type \u63cf\u8ff0\u56fe\u5c42\u5185\u5bb9\u7c7b\u578b\uff0c\u5982text type = text # r0, r1 \u8868\u793a\u5708\u56fe\u534a\u5f84\uff0c<1\u5728\u5185\u5708\uff0c>1\u5728\u5916\u5708, r0-r1\u4e3a\u5bbd\u5ea6 r0 = 0.95r r1 = 0.85r ideogram highlight tick label link circos.conf \u53c2\u6570 # \u67d3\u8272\u4f53\u7684\u6570\u636e\u96c6 karyotype = data.txt # \u5b9a\u4e49\u5708\u56fe\u6807\u5c3a chromosomes_units = 1000 # \u5982\u679c\u8bbe\u7f6e\u6210yes\uff0c\u6240\u6709ideogram\u4e0a\u90fd\u4f1a\u73b0\u5b9eticks chromosomes_display_default = yes","title":"3. \u53ef\u89c6\u5316\u7684\u7ec4\u6210\u8981\u7d20"},{"location":"book/C08_Genome-Visualization/03_circos/#3-circos","text":"\u7ed8\u5236\u73af\u72b6 Salmonella LT2 \u57fa\u56e0\u7ec4 \u4e4b\u524d\u7684\u6559\u7a0b\u91cc\u4ecb\u7ecd\u4e86\u7528DNAPlotter\u7ed8\u5236\u4e00\u4e2a\u57fa\u56e0\u7ec4\u5b8c\u6210\u56fe\u7684\u5708\u56fe\uff0c\u5706\u5708\u5185\u5bb9strand\uff0cGC content\u548cGC skew\u3002\u4ece\u67d0\u4e2a\u89d2\u5ea6\u4e0a\u770b\uff0cDNAplotter\u7684\u914d\u7f6e\u6587\u4ef6\u4e0ecircos\u6709\u4e00\u5b9a\u7684\u7c7b\u4f3c\uff0c2\u4e2a\u8f6f\u4ef6\u7684\u533a\u522b\u5728\u4e8e\u524d\u8005\u4e13\u6ce8\u4e8e\u7ed8\u5236\u5355\u4e2a\u7ec6\u83cc\u57fa\u56e0\u7ec4\uff0c\u540e\u8005\u53ef\u4ee5\u5b8c\u6210\u66f4\u591a\u7684\u529f\u80fd\u3002\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u6211\u4eec\u901a\u8fc7\u7528circos\u6765\u7ed8\u5236\u7c7b\u4f3cDNAplotter\u751f\u6210\u7684\u57fa\u56e0\u7ec4\u5708\u56fe\uff0c\u4ece\u800c\u5b66\u4e60circos\u7684\u57fa\u672c\u7528\u6cd5\uff0c \u51c6\u5907\u6570\u636e\u6587\u4ef6\uff1a\u4eceNCBI\u4e0a\u4e0b\u8f7dSalonella LT\u57fa\u56e0\u7ec4\u6570\u636e\u6587\u4ef6\u3002 $ esearch -db nuccore -query \"NC_003197.1[accn]\" | efetch -db nuccore -format fasta > LT2.fasta $ esearch -db nuccore -query \"NC_003197.1[accn]\" | efetch -db nuccore -format gb > LT2.gb \u7ed8\u5236circos\u6240\u9700\u8981\u7684ideogram\u6240\u9700\u8981\u7684\u51e0\u7c7b\u6570\u636e\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2apython\u811a\u672cget_circos_data.py\u6765\u83b7\u5f97\u3002 # -*- utf-8 -*- from Bio import SeqIO rec = SeqIO . read ( \"LT2.gb\" , \"genbank\" ) forward = [] reverse = [] for feature in rec . features : if feature . type != 'gene' : continue if feature . strand == 1 : forward . append (( int ( feature . location . start ), int ( feature . location . end ))) elif feature . strand == - 1 : reverse . append (( int ( feature . location . start ), int ( feature . location . end ))) def get_forward_strand ( strands ): \"\"\" Create forward strands \"\"\" with open ( \"forward.txt\" , \"w\" ) as f : for strand in strands : f . writelines ( \"chr1 \\t %d \\t %d \\t fillcolor=chr4 \\n \" % ( strand [ 0 ], strand [ 1 ])) def get_reverse_strand ( strands ): \"\"\" Create forward strands \"\"\" with open ( \"reverse.txt\" , \"w\" ) as f : for strand in strands : f . writelines ( \"chr1 \\t %d \\t %d \\t fillcolor=chr6 \\n \" % ( strand [ 0 ], strand [ 1 ])) def calc_GC_content ( seq ): \"\"\" Return GC content of input sequence \"\"\" gc = sum ( seq . count ( x ) for x in [ 'G' , 'C' , 'g' , 'c' ]) gc_content = gc / float ( len ( seq )) return round ( gc_content , 4 ) def calc_GC_skew ( seq ): \"\"\" Reuturn GC skew of input sequence \"\"\" g = seq . count ( 'G' ) + seq . count ( 'g' ) c = seq . count ( 'C' ) + seq . count ( 'c' ) try : skew = ( g - c ) / float ( g + c ) except ZeroDivisionError : skew = 0 return round ( skew , 4 ) window = 10000 step = 5000 seqs = SeqIO . parse ( \"LT2.fasta\" , \"fasta\" ) for seq in seqs : seq_1 = seq . seq with open ( \"gc_skew.txt\" , \"w\" ) as f1 : with open ( \"gc_content.txt\" , \"w\" ) as f2 : for i in range ( 0 , len ( seq_1 ), step ): subseq = seq_1 [ i : i + window ] gc_content = ( calc_GC_content ( subseq )) gc_skew = ( calc_GC_skew ( subseq )) start = ( i + 1 if ( i + 1 <= len ( seq_1 )) else i ) end = ( i + step if ( i + step <= len ( seq_1 )) else len ( seq_1 )) f1 . writelines ( \"chr1 \\t %d \\t %d \\t %s \\n \" % ( start , end , gc_skew )) f2 . writelines ( \"chr1 \\t %d \\t %d \\t %s \\n \" % ( start , end , gc_content )) get_forward_strand ( forward ) get_reverse_strand ( reverse ) \u8fd0\u884c\u811a\u672c\uff1a $ python get_circos_data.py","title":"3. \u7528circos\u6765\u7ed8\u56fe"},{"location":"book/C08_Genome-Visualization/03_circos/#31","text":"$ cd circos_data $ touch circos.conf \u5927\u90e8\u5206\u7ec6\u83cc\u7684\u57fa\u56e0\u7ec4\u90fd\u662f\u5355\u67d3\u8272\u4f53\u7684\uff0c\u56e0\u6b64\u4e00\u4e2a\u7ec6\u83cc\u57fa\u56e0\u5b8c\u6210\u56fe\u53ef\u4ee5\u75281\u4e2a\u5b8c\u6574\u7684\u5708\u6765\u8868\u793a\u3002\u901a\u8fc7\u8bbe\u7f6espacing\u6765\u53bb\u9664\u95f4\u65ad\u3002 <spacing> default = u break = u </spacing> circos.conf \u6587\u4ef6\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9 <<include colors_fonts_patterns.conf>> <ideogram> <spacing> default = 0u break = 0u </spacing> radius = 0.85r thickness = 5p stroke_thickness = 1 stroke_color = black fill = yes fill_color = black </ideogram> <image> dir = . file = circos.png png = yes svg = yes # radius of inscribed circle in image radius = 1000p # by default angle=0 is at 3 o'clock position angle_offset = -90 #angle_orientation = counterclockwise auto_alpha_colors = yes auto_alpha_steps = 5 background = white </image> karyotype = data/node.txt chromosome_units = 1000 chromosomes_display_default = yes show_ticks = yes show_tick_labels = yes show_grid = no grid_start = dims(ideogram,radius_inner) - 0.5r grid_end = dims(ideogram,radius_inner) # --------------------- ticks start --------------------- # <ticks> # if yes, skip of label of 0bp skip_first_label = no # if yes, skip of lable of last skip_last_label = no # ticks radius to show, outside or inside radius = dims(ideogram,radius_outer) # genome size * label_multiplier = label units label_multiplier = 1e-6 tick_separation = 2p min_label_distance_to_edge = 0p label_separation = 5p # label distance to ticks label_offset = 5p label_size = 8p size = 20p <tick> spacing = 10000u color = gray show_label = no thickness = 1p </tick> <tick> spacing = 100000u color = black show_label = yes label_size = 16p thickness = 2p # label format, %.1f = 1.1, %d = 1, %.2f = 1.10 format = %.1f grid = yes grid_color = white grid_thickness = 1p </tick> <tick> spacing = 1000000u size = 30p color = black show_label = yes label_size = 24p thickness = 3p # label format, %.1f = 1.1, %d = 1, %.2f = 1.10 format = %d # plus Mb to lables suffix = \" Mb\" grid = yes grid_color = dgrey grid_thickness = 1p </tick> </ticks> # --------------------- ticks ends ---------------------- # # --------------------- plot start ---------------------- # <plots> <plot> type = tile file = data/forward.txt r1 = 0.95r r0 = 0.90r margin = 1b stroke_thickness = 0 color = orange orientation = center # tile height thickness = 20p # different layer index height padding = 5p layers = 1 <rules> <rule> condition = var(size) > 5kb color = black </rule> </rules> </plot> <plot> type = tile file = data/reverse.txt r1 = 0.92r r0 = 0.87r margin = 1b stroke_thickness = 0 color = blue thickness = 20p padding = 5p # display one layer of plot layers = 1 <rule> condition = var(size) > 3kb color = black </rule> </plot> <plot> type = line r1 = 0.85r r0 = 0.75r file = data/gc_skew.txt thickness = 1 max_gap = 1u color = vdgrey # max/min value of line plotting min = -0.15 max = 0.15 fill_color = vdgrey_a3 <backgrounds> <background> color = vvlgreen y0 = 0.05 </background> <background> color = vvlred y1 = -0.05 </background> </backgrounds> <axes> <axis> color = lgrey_a2 thickness = 1 spacing = 0.04r </axis> </axes> </plot> <plot> type = histogram r1 = 0.70r r0 = 0.60r file = data/gc_content.txt thickness = 1 max_gap = 1u min = 0 max = 1 <rules> <rule> condition = 1 fill_color = eval(sprintf(\"spectral-9-div-%d\", remap_int(var(value), 0,1,1,9))) </rule> </rules> </plot> </plots> <<include housekeeping.conf>>","title":"3.1 \u914d\u7f6e\u6587\u4ef6"},{"location":"book/C08_Genome-Visualization/03_circos/#32","text":"","title":"3.2 \u7ed8\u5236\u6d4b\u5e8f\u62fc\u63a5\u7ed3\u679c\u4fe1\u606f"},{"location":"book/C08_Genome-Visualization/03_circos/#321","text":"","title":"3.2.1 \u6570\u636e\u51c6\u5907"},{"location":"book/C08_Genome-Visualization/03_circos/#322","text":"","title":"3.2.2 \u914d\u7f6e\u6587\u4ef6"},{"location":"book/C08_Genome-Visualization/03_circos/#33","text":"BRIG \u5e38\u88ab\u7528\u6765\u7ed8\u5236\u7684\u591a\u4e2a\u7ec6\u83cc\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u6570\u636e\u3002\u672c\u4f8b\u7528 circos \u7ed8\u5236\u7c7b\u4f3c\u7684\u5708\u56fe\uff0c\u901a\u8fc7\u7ed3\u679c\u53ef\u89c6\u5316\u6765\u53d1\u73b0\u548c\u5c55\u793a\u751f\u7269\u5b66\u4fe1\u606f\u3002","title":"3.3. \u7ed8\u5236\u4e00\u4e2a\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u6570\u636e"},{"location":"book/C08_Genome-Visualization/03_circos/#331","text":"","title":"3.3.1 \u6570\u636e\u51c6\u5907"},{"location":"book/C08_Genome-Visualization/03_circos/#332","text":"","title":"3.3.2 \u914d\u7f6e\u6587\u4ef6"},{"location":"book/C08_Genome-Visualization/03_circos/#circos_1","text":"\u4ee5 mit \u7684circos\u56fe\u4e3a\u4f8b\uff0c\u53ef\u4ee5\u770b\u51fa\u4e00\u4e2acircos\u7ed8\u5236\u7684\u5708\u56fe\u4e2d\u53ef\u4ee5\u5305\u542b\u4ec0\u4e48\u7c7b\u578b\u7684\u56fe\u793a\u3002 histogram \u67f1\u72b6\u56fe ideogram \u8868\u610f\u6587\u5b57 heatmap \u70ed\u529b\u56fe links \u5173\u7cfb\u7ebf\u6761 highlights \u9ad8\u4eae\u5f3a\u8c03\u533a\u57df grids \u7f51\u683c\u56fe ticks \u5708\u56fe\u6807\u5c3a \u5b8c\u6574circos\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784\" # ---- \u5b9a\u4e49\u56fe\u7684\u989c\u8272\u4fe1\u606f ---- # <colors> </colors> # ---- \u5b9a\u4e49\u56fe\u7684\u5b57\u4f53\u4fe1\u606f ---- # <fonts> </fonts> # ---- \u5b9a\u4e49\u586b\u5145\u6a21\u5f0f\u56fe ---- # <patterns> </patterns> # ---- \u56fe\u50cf\u7684\u57fa\u672c\u8bbe\u7f6e\u4fe1\u606f ---- # <image> </image> # ---- ideogram \u56fe ---- # <ideogram> <spacing> ideograms\u4e4b\u95f4\u7684\u95f4\u9694 <pairwise> ideograms\u5bf9\uff08\u5982\u4eba\u67d3\u8272\u4f53\uff09\u4e4b\u95f4\u7684\u8ddd\u79bb </pairwise> </spacing> </ideogram> # ---- \u6807\u5c3a\u4fe1\u606f ---- # <ticks> <tick> \u5404\u4e2atick\u7684\u914d\u7f6e </tick> </ticks> # ---- \u533a\u57df\u7684\u653e\u5927\u7f29\u5c0f\u4fe1\u606f ---- # <zooms> <zoom> </zoom> </zooms> # ---- highlights \u6570\u636e ---- # <highlights> <highlight> <rules> <rule> \u67d0\u4e00\u4e2a\u5177\u4f53 data track \u7684\u914d\u7f6e\u4fee\u6539 </rule> </rules> </highlight> </highlights> # ---- Data tracks \u6570\u636e ---- # <plots> <plot> <rules> <rule> \u67d0\u4e00\u4e2a\u5177\u4f53 data track \u7684\u914d\u7f6e\u4fee\u6539 </rule> </rules> <axes> <axis> plot \u7684\u534a\u5f84\u8f74 </axis> </axes> <backgrounds> <background> plot \u7684\u80cc\u666f\u8bbe\u7f6e </background> </backgrounds> </plot> </plots> # ---- links \u6570\u636e ---- # <links> <link> <rules> <rule> \u67d0\u4e00\u4e2a\u5177\u4f53 link \u6570\u636e\u7684\u914d\u7f6e\u4fee\u6539 </rule> </rules> </link> </links> circos\u914d\u7f6e\u7684\u5355\u4f4d\u6982\u5ff5 \u4e00\u5171\u67094\u79cd\u5355\u4f4d\uff1ap, r, u, b p\u8868\u793a\u50cf\u7d20\uff0c1p\u8868\u793a1\u50cf\u7d20 r\u8868\u793a\u76f8\u5bf9\u5927\u5c0f\uff0c0.95r\u8868\u793a95% ring \u5927\u5c0f\u3002 u\u8868\u793a\u76f8\u5bf9chromosomes_unit\u7684\u957f\u5ea6\uff0c\u5982\u679cchromosomes_unit = 1000\uff0c\u52191u\u5c31\u662f\u5343\u5206\u4e4b\u4e00\u7684\u67d3\u8272\u4f53\u957f\u5ea6\u3002 b\u8868\u793a\u78b1\u57fa\uff0c\u5982\u679c\u67d3\u8272\u4f53\u957f1M\uff0c\u90a3\u4e481b\u5c31\u662f\u767e\u4e07\u5206\u4e4b\u4e00\u7684\u957f\u5ea6\u3002","title":"\u89e3\u6790 circos"},{"location":"book/C08_Genome-Visualization/03_circos/#circos_2","text":"","title":"circos \u7684\u884d\u751f\u4ea7\u54c1"},{"location":"book/C08_Genome-Visualization/03_circos/#reference","text":"Circos Official Website Creating Circos Plots Plot of the complete Pseudomonas pseudoalcaligenes CECT5344 genome \"` \"```````` )\"\"\"\"\"\"\"\"```````````````","title":"Reference"},{"location":"book/C08_Genome-Visualization/04_genoplotr/","text":"GenoPlotR \u00b6 \u5185\u5bb9\u7b80\u4ecb \u53c2\u8003\u8d44\u6599 \u00b6","title":"GenoPlotR"},{"location":"book/C08_Genome-Visualization/04_genoplotr/#genoplotr","text":"\u5185\u5bb9\u7b80\u4ecb","title":"GenoPlotR"},{"location":"book/C08_Genome-Visualization/04_genoplotr/#_1","text":"","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C08_Genome-Visualization/05_easyfig/","text":"EasyFig \u00b6 \u53c2\u8003\u8d44\u6599 \u00b6","title":"EasyFig"},{"location":"book/C08_Genome-Visualization/05_easyfig/#easyfig","text":"","title":"EasyFig"},{"location":"book/C08_Genome-Visualization/05_easyfig/#_1","text":"","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C08_Genome-Visualization/06_circlize/","text":"Circlize \u6559\u7a0b \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Circlize \u662f\u4e00\u4e2a\u751f\u6210 circos \u7c7b\u6570\u636e\u53ef\u89c6\u5316\u7684 R \u8f6f\u4ef6\u5305\u3002 # \u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u8ba9\u751f\u6210\u7684\u6570\u636e\u4e00\u81f4 set.seed ( 12345 ) # \u751f\u6210\u4e00\u4e2adf\u6570\u636e\u96c6 data # letters \u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u5305\u542b\u82f1\u658726\u4e2a\u5c0f\u5199\u5b57\u6bcd\uff0c\u56e0\u6b64letters[1:8]\u5c31\u662f\u5b57\u6bcda~h # \u53d6200\u4e2a\u8fd9\u6837\u7684\u5b57\u6bcd\uff0creplace=T\u8868\u793a\u53ef\u4ee5\u8986\u76d6\uff0c\u56e0\u4e3a8\u4e2a\u5b57\u6bcd\u548c200\u4e2a\u53d6\u6837\u6570\u91cf\u4e0d\u540c\uff0c\u56e0\u6b64\u5fc5\u7136\u53c8\u4e00\u4e9b\u5b57\u6bcd\u4f1a\u91cd\u590d\u53d6\u6837 # sample\u51fd\u6570\u4f1a\u968f\u673a\u751f\u6210\u7b26\u5408\u8c03\u4ef7\u7684\u5143\u7d20\u6392\u5217 # rnorm(200) \u751f\u6210200\u4e2a\u5e73\u5747\u6570\u4e3a0,\u6807\u51c6\u5dee\u4e3a1\u7684\u6570\u5b57\u5143\u7d20 # runif(200) \u751f\u6210200\u4e2a0\uff5e1\u4e4b\u95f4\u8303\u56f4\u7684\u6570 data <- data.frame ( factors = sample ( letters [ 1 : 8 ], 200 , replace = T ), x = rnorm ( 200 ), y = runif ( 200 )) # \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cfheight\u4e3a0.1\uff0c\u5c31\u662f\u6bcf\u4e2atrack\u536010%\u5bbd\u5ea6 circos.par ( \"track.height\" = 0.1 ) # \u521d\u59cb\u5316\u56fe\uff0c\u7c7b\u4f3c ggplot2 \u7684 ggplot \u51fd\u6570 circos.initialize ( factors = df $ factors , x = df $ x ) # \u63a5\u4e0b\u6765\u5c31\u662f\u4e00\u4e2a\u4e2atrack\u7ed8\u5236\u7684\u8fc7\u7a0b # \u9996\u5148\u751f\u6210\u4e00\u4e2a track\uff0c\u8fd9\u4e2a track \u5305\u542b8\u4e2a cell # circos.track\u51fd\u6570\u5176\u5b9e\u662ftrackPlotRegion\u51fd\u6570\u7684\u5feb\u6377\u8868\u8fbe # y \u4e3a y \u8f74\u65b9\u5411\u4e0a\u7684\u6570\u636e\uff0cx \u5fc5\u987b\u8bbe\u7f6e\u4e86 panel.fun \u624d\u80fd\u6dfb\u52a0 # panel.fun \u662f\u7528\u6765\u5f80cell\u4e2d\u6dfb\u52a0\u56fe\u793a\u7684\u51fd\u6570\uff0c CELL_META\u662f\u5e38\u91cf\uff0c\u8868\u793a\u5f53\u524dcell\u7684meta\u4fe1\u606f\uff0c\u8f93\u5165nanmes(CELL_META)\u53ef\u4ee5\u67e5\u770b\u6240\u6709CELL_META\u5b57\u6bb5 # uy \u662f convert_y \u51fd\u6570\u7684\u5feb\u6377\u8868\u8fbe # circos.text\u7528\u6765\u5728\u6d82\u4e0a\u6807\u8bb0a~h\u5b57\u7b26\uff0cCELL_META$xcenter\u6807\u8bb0cell\u7684x\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u6807\u8bb0y\u4f4d\u7f6e\uff0c\u7b2c\u4e09\u4e2a\u5143\u7d20\u6807\u8bb0\u5b57\u7b26\u5185\u5bb9 # circos.axis\u7528\u6765\u5728track\u4e0a\u6807\u8bb0ruler\u6807\u5c3a circos.track ( factors = data $ factors , y = data $ y , panel.fun = function ( x , y ) { circos.text ( CELL_META $ xcenter , CELL_META $ cell.ylim [ 2 ] + uy ( 5 , \"mm\" ), CELL_META $ sector.index ) circos.axis ( labels.cex = 0.6 ) } ) # \u8bbe\u7f6e\u4e00\u7ec4\u989c\u8272\uff0c\u7ed9\u6bcf\u4e2acell\u4e0a\u8272\uff0c\u8fd9\u91cc\u75282\u4e2a\u989c\u8272\u590d\u52364\u6b21 col = rep ( c ( \"#350E2A\" , \"#9DBC14\" ), 4 ) # \u5411\u76f4\u63a5\u7ed8\u5236\u7684 track \u4e2d\u7684 cell \u4e2d\u52a0\u5165\u5143\u7d20\uff0cpch=16\u4e3a\u5b9e\u5fc3\u5706\u70b9\uff0c\u5177\u4f53\u53c2\u89c1points\u51fd\u6570 # cex\u8868\u793a\u70b9\u7684\u5927\u5c0f\uff0c\u6570\u503c\u8d8a\u5c0f\u56fe\u793a\u7b26\u53f7\u8d8a\u5c0f circos.trackPoints ( data $ factors , data $ x , data $ y , col = col , pch = 16 , cex = 0.5 ) # \u5411\u4e4b\u524d\u7ed8\u5236\u7684 track \u4e2d\u7684 cell a \u4e2d\u52a0\u5165\u6587\u5b57 circos.text ( -1 , 0.5 , \"text\" , sector.index = \"a\" , track.index = 1 ) # \u8bbe\u7f6e\u4e00\u7ec4\u989c\u8272\uff0c\u7ed9\u65b0\u7684track\u4e0a\u8272 bgcol = rep ( c ( \"#69EEAD\" , \"#C31705\" ), 4 ) # \u6570\u636e\u6765\u6e90\u8fd8\u662fdata\u7684x\u503c\u5728\u5177\u4f53\u8303\u56f4\u5185\u7684\u5206\u5e03\uff0cbin.size\u8bbe\u7f6e\u67f1\u72b6\u56fe\u7684\u5bbd\u5ea6\uff0c\u503c\u8d8a\u5c0f\u5bbd\u5ea6\u8d8a\u5c0f circos.trackHist ( data $ factors , data $ x , bin.size = 0.2 , bg.col = bgcol , col = NA ) # \u4f7f\u7528 EMBOSS \u7684 isochore \u53ef\u4ee5\u8ba1\u7b97sliding windows\u7684GC\u542b\u91cf circos.points: cell\u4e2d\u6dfb\u52a0\u70b9\uff0c\u6bd4\u5982\u7a81\u53d8\u4f4d\u70b9\uff0cRNA-seq\u4e30\u5ea6\u4f4d\u70b9 circos.lines: cell\u4e2d\u6dfb\u52a0\u7ebf\uff0c\u6bd4\u5982GC\u542b\u91cf circos.segments: adds segments in a cell. circos.rect(): adds rectangles in a cell. circos.polygon(): adds polygons in a cell. circos.text(): adds text in a cell. circos.axis() ands circos.yaxis(): add axis in a cell. circos.initialize(): allocates sectors on the circle. circos.track(): creates plotting regions for cells in one single track. circos.update(): updates an existed cell. circos.par(): graphic parameters. circos.info(): prints general parameters of current circular plot. circos.clear(): resets graphic parameters and internal variables. circos.par \u53ef\u8bbe\u7f6e\u7684\u5168\u5c40\u53c2\u6570 start.degree \u8d77\u59cb\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u5373\u65f6\u949f3\u70b9\u4f4d\u7f6e\u3002\u8bbe\u7f6e\u7684\u6570\u503c\u6309\u7167\u65f6\u949f\u9006\u65f6\u9488\u65b9\u5411\u65cb\u8f6c\uff0c\u6bd4\u5982\u4e00\u822c\u7ed8\u5236\u57fa\u56e0\u7ec4\u4ece12\u70b9\u5f00\u59cb\uff0c\u5c31\u8bbe\u7f6e\u6210 90","title":"Circlize \u6559\u7a0b"},{"location":"book/C08_Genome-Visualization/06_circlize/#circlize","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Circlize \u662f\u4e00\u4e2a\u751f\u6210 circos \u7c7b\u6570\u636e\u53ef\u89c6\u5316\u7684 R \u8f6f\u4ef6\u5305\u3002 # \u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u8ba9\u751f\u6210\u7684\u6570\u636e\u4e00\u81f4 set.seed ( 12345 ) # \u751f\u6210\u4e00\u4e2adf\u6570\u636e\u96c6 data # letters \u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u5305\u542b\u82f1\u658726\u4e2a\u5c0f\u5199\u5b57\u6bcd\uff0c\u56e0\u6b64letters[1:8]\u5c31\u662f\u5b57\u6bcda~h # \u53d6200\u4e2a\u8fd9\u6837\u7684\u5b57\u6bcd\uff0creplace=T\u8868\u793a\u53ef\u4ee5\u8986\u76d6\uff0c\u56e0\u4e3a8\u4e2a\u5b57\u6bcd\u548c200\u4e2a\u53d6\u6837\u6570\u91cf\u4e0d\u540c\uff0c\u56e0\u6b64\u5fc5\u7136\u53c8\u4e00\u4e9b\u5b57\u6bcd\u4f1a\u91cd\u590d\u53d6\u6837 # sample\u51fd\u6570\u4f1a\u968f\u673a\u751f\u6210\u7b26\u5408\u8c03\u4ef7\u7684\u5143\u7d20\u6392\u5217 # rnorm(200) \u751f\u6210200\u4e2a\u5e73\u5747\u6570\u4e3a0,\u6807\u51c6\u5dee\u4e3a1\u7684\u6570\u5b57\u5143\u7d20 # runif(200) \u751f\u6210200\u4e2a0\uff5e1\u4e4b\u95f4\u8303\u56f4\u7684\u6570 data <- data.frame ( factors = sample ( letters [ 1 : 8 ], 200 , replace = T ), x = rnorm ( 200 ), y = runif ( 200 )) # \u8bbe\u7f6e\u5168\u5c40\u53d8\u91cfheight\u4e3a0.1\uff0c\u5c31\u662f\u6bcf\u4e2atrack\u536010%\u5bbd\u5ea6 circos.par ( \"track.height\" = 0.1 ) # \u521d\u59cb\u5316\u56fe\uff0c\u7c7b\u4f3c ggplot2 \u7684 ggplot \u51fd\u6570 circos.initialize ( factors = df $ factors , x = df $ x ) # \u63a5\u4e0b\u6765\u5c31\u662f\u4e00\u4e2a\u4e2atrack\u7ed8\u5236\u7684\u8fc7\u7a0b # \u9996\u5148\u751f\u6210\u4e00\u4e2a track\uff0c\u8fd9\u4e2a track \u5305\u542b8\u4e2a cell # circos.track\u51fd\u6570\u5176\u5b9e\u662ftrackPlotRegion\u51fd\u6570\u7684\u5feb\u6377\u8868\u8fbe # y \u4e3a y \u8f74\u65b9\u5411\u4e0a\u7684\u6570\u636e\uff0cx \u5fc5\u987b\u8bbe\u7f6e\u4e86 panel.fun \u624d\u80fd\u6dfb\u52a0 # panel.fun \u662f\u7528\u6765\u5f80cell\u4e2d\u6dfb\u52a0\u56fe\u793a\u7684\u51fd\u6570\uff0c CELL_META\u662f\u5e38\u91cf\uff0c\u8868\u793a\u5f53\u524dcell\u7684meta\u4fe1\u606f\uff0c\u8f93\u5165nanmes(CELL_META)\u53ef\u4ee5\u67e5\u770b\u6240\u6709CELL_META\u5b57\u6bb5 # uy \u662f convert_y \u51fd\u6570\u7684\u5feb\u6377\u8868\u8fbe # circos.text\u7528\u6765\u5728\u6d82\u4e0a\u6807\u8bb0a~h\u5b57\u7b26\uff0cCELL_META$xcenter\u6807\u8bb0cell\u7684x\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u6807\u8bb0y\u4f4d\u7f6e\uff0c\u7b2c\u4e09\u4e2a\u5143\u7d20\u6807\u8bb0\u5b57\u7b26\u5185\u5bb9 # circos.axis\u7528\u6765\u5728track\u4e0a\u6807\u8bb0ruler\u6807\u5c3a circos.track ( factors = data $ factors , y = data $ y , panel.fun = function ( x , y ) { circos.text ( CELL_META $ xcenter , CELL_META $ cell.ylim [ 2 ] + uy ( 5 , \"mm\" ), CELL_META $ sector.index ) circos.axis ( labels.cex = 0.6 ) } ) # \u8bbe\u7f6e\u4e00\u7ec4\u989c\u8272\uff0c\u7ed9\u6bcf\u4e2acell\u4e0a\u8272\uff0c\u8fd9\u91cc\u75282\u4e2a\u989c\u8272\u590d\u52364\u6b21 col = rep ( c ( \"#350E2A\" , \"#9DBC14\" ), 4 ) # \u5411\u76f4\u63a5\u7ed8\u5236\u7684 track \u4e2d\u7684 cell \u4e2d\u52a0\u5165\u5143\u7d20\uff0cpch=16\u4e3a\u5b9e\u5fc3\u5706\u70b9\uff0c\u5177\u4f53\u53c2\u89c1points\u51fd\u6570 # cex\u8868\u793a\u70b9\u7684\u5927\u5c0f\uff0c\u6570\u503c\u8d8a\u5c0f\u56fe\u793a\u7b26\u53f7\u8d8a\u5c0f circos.trackPoints ( data $ factors , data $ x , data $ y , col = col , pch = 16 , cex = 0.5 ) # \u5411\u4e4b\u524d\u7ed8\u5236\u7684 track \u4e2d\u7684 cell a \u4e2d\u52a0\u5165\u6587\u5b57 circos.text ( -1 , 0.5 , \"text\" , sector.index = \"a\" , track.index = 1 ) # \u8bbe\u7f6e\u4e00\u7ec4\u989c\u8272\uff0c\u7ed9\u65b0\u7684track\u4e0a\u8272 bgcol = rep ( c ( \"#69EEAD\" , \"#C31705\" ), 4 ) # \u6570\u636e\u6765\u6e90\u8fd8\u662fdata\u7684x\u503c\u5728\u5177\u4f53\u8303\u56f4\u5185\u7684\u5206\u5e03\uff0cbin.size\u8bbe\u7f6e\u67f1\u72b6\u56fe\u7684\u5bbd\u5ea6\uff0c\u503c\u8d8a\u5c0f\u5bbd\u5ea6\u8d8a\u5c0f circos.trackHist ( data $ factors , data $ x , bin.size = 0.2 , bg.col = bgcol , col = NA ) # \u4f7f\u7528 EMBOSS \u7684 isochore \u53ef\u4ee5\u8ba1\u7b97sliding windows\u7684GC\u542b\u91cf circos.points: cell\u4e2d\u6dfb\u52a0\u70b9\uff0c\u6bd4\u5982\u7a81\u53d8\u4f4d\u70b9\uff0cRNA-seq\u4e30\u5ea6\u4f4d\u70b9 circos.lines: cell\u4e2d\u6dfb\u52a0\u7ebf\uff0c\u6bd4\u5982GC\u542b\u91cf circos.segments: adds segments in a cell. circos.rect(): adds rectangles in a cell. circos.polygon(): adds polygons in a cell. circos.text(): adds text in a cell. circos.axis() ands circos.yaxis(): add axis in a cell. circos.initialize(): allocates sectors on the circle. circos.track(): creates plotting regions for cells in one single track. circos.update(): updates an existed cell. circos.par(): graphic parameters. circos.info(): prints general parameters of current circular plot. circos.clear(): resets graphic parameters and internal variables. circos.par \u53ef\u8bbe\u7f6e\u7684\u5168\u5c40\u53c2\u6570 start.degree \u8d77\u59cb\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u5373\u65f6\u949f3\u70b9\u4f4d\u7f6e\u3002\u8bbe\u7f6e\u7684\u6570\u503c\u6309\u7167\u65f6\u949f\u9006\u65f6\u9488\u65b9\u5411\u65cb\u8f6c\uff0c\u6bd4\u5982\u4e00\u822c\u7ed8\u5236\u57fa\u56e0\u7ec4\u4ece12\u70b9\u5f00\u59cb\uff0c\u5c31\u8bbe\u7f6e\u6210 90","title":"Circlize \u6559\u7a0b"},{"location":"book/C08_Genome-Visualization/07_cgview/","text":"CGView \u6559\u7a0b \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} cgview\u662f\u4e00\u4e2a\u751f\u6210\u73af\u72b6\u57fa\u56e0\u7ec4\u56fe\u7247\u7684\u5de5\u5177\u3002 # \u521b\u5efa\u865a\u62df\u73af\u5883 $ conda create -n cgview $ conda activate cgview ( cgview ) $ conda install cgview # \u6dfb\u52a0 Bioperl \u8def\u5f84\u5230\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u9ed8\u8ba4\u5b89\u88c5\u7684\u8def\u5f84\u4e0d\u5305\u542b\u8be5\u5b89\u88c5\u5730\u5740 ( cgview ) $ export PERL5LIB = $CONDA_PREFIX /lib/perl5/site_perl/5.22.0/ # \u751f\u6210xml\u683c\u5f0f\u914d\u7f6e\u6587\u4ef6 ( cgview ) $ cgview_xml_builder.pl -sequence path/to/seq.gbk -output seq.xml # \u751f\u6210png\u683c\u5f0f\u56fe\u7247 ( cgview ) $ cgview -i seq.xml -o seq.png -f png # \u67e5\u770b\u56fe\u7247 ( cgview ) $ feh seq.png GC content \u9ed8\u8ba4\u662f\u8ba1\u7b97500bp\u7684\u7ed3\u679c\uff0c\u6ed1\u7a97\u79fb\u52a8","title":"CGView \u6559\u7a0b"},{"location":"book/C08_Genome-Visualization/07_cgview/#cgview","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} cgview\u662f\u4e00\u4e2a\u751f\u6210\u73af\u72b6\u57fa\u56e0\u7ec4\u56fe\u7247\u7684\u5de5\u5177\u3002 # \u521b\u5efa\u865a\u62df\u73af\u5883 $ conda create -n cgview $ conda activate cgview ( cgview ) $ conda install cgview # \u6dfb\u52a0 Bioperl \u8def\u5f84\u5230\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u9ed8\u8ba4\u5b89\u88c5\u7684\u8def\u5f84\u4e0d\u5305\u542b\u8be5\u5b89\u88c5\u5730\u5740 ( cgview ) $ export PERL5LIB = $CONDA_PREFIX /lib/perl5/site_perl/5.22.0/ # \u751f\u6210xml\u683c\u5f0f\u914d\u7f6e\u6587\u4ef6 ( cgview ) $ cgview_xml_builder.pl -sequence path/to/seq.gbk -output seq.xml # \u751f\u6210png\u683c\u5f0f\u56fe\u7247 ( cgview ) $ cgview -i seq.xml -o seq.png -f png # \u67e5\u770b\u56fe\u7247 ( cgview ) $ feh seq.png GC content \u9ed8\u8ba4\u662f\u8ba1\u7b97500bp\u7684\u7ed3\u679c\uff0c\u6ed1\u7a97\u79fb\u52a8","title":"CGView \u6559\u7a0b"},{"location":"book/C08_Genome-Visualization/08_gggenes/","text":"gggenes \u7ed8\u5236\u57fa\u56e0\u5206\u5e03\u56fe \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} $ prokka genome.fasta --outdir output $ awk '{print $3 $4 $5}' output/*.tsv > data.tsv > example_genes $ direction <- ifelse ( example_genes $ strand == \"forward\" , 1 , -1 ) > ggplot ( example_genes , aes ( xmin = start , xmax = end , y = molecule , fill = gene , forward = direction )) + geom_gene_arrow () + facet_wrap ( ~ molecule , scale = \"free\" , ncol = 1 ) + scale_fill_brewer ( palette = \"Set3\" ) + theme_genes ()","title":"gggenes \u7ed8\u5236\u57fa\u56e0\u5206\u5e03\u56fe"},{"location":"book/C08_Genome-Visualization/08_gggenes/#gggenes","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} $ prokka genome.fasta --outdir output $ awk '{print $3 $4 $5}' output/*.tsv > data.tsv > example_genes $ direction <- ifelse ( example_genes $ strand == \"forward\" , 1 , -1 ) > ggplot ( example_genes , aes ( xmin = start , xmax = end , y = molecule , fill = gene , forward = direction )) + geom_gene_arrow () + facet_wrap ( ~ molecule , scale = \"free\" , ncol = 1 ) + scale_fill_brewer ( palette = \"Set3\" ) + theme_genes ()","title":"gggenes \u7ed8\u5236\u57fa\u56e0\u5206\u5e03\u56fe"},{"location":"book/C09_Analysis-Platform/","text":"","title":"Index"},{"location":"book/C09_Analysis-Platform/01_docker/","text":"Docker \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5 docker CE for Ubuntu \u00b6 # \u786e\u4fdd\u5220\u9664\u65e7\u7248\u672c $ sudo apt remove docker docker-engine docker.io # Ubuntu 14.04 \u7248\u672c\u7684\u7528\u6237\u8981\u5b89\u88c5 linux-image-extra-* $ sudo apt-get update $ sudo apt-get install linux-image-extra- $( uname -r ) linux-image-extra-virtual # \u5b89\u88c5 docker ce $ sudo apt install apt-transport-https ca-certificates curl software-properties-common $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo apt-key fingerprint 0EBFCD88 $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $( lsb_release -cs ) stable\" $ sudo apt update $ sudo apt install docker-ce \u5b89\u88c5 docker in Archlinux \u00b6 # \u5b89\u88c5 docker $ sudo pacman -S docker # \u5f00\u673a\u81ea\u52a8\u8fd0\u884c docker $ sudo systemctl enable docker.service # \u542f\u52a8 docker \u670d\u52a1 $ sudo systemctl start docker.service \u4f7f\u7528 docker \u00b6 $ sudo docker images ls","title":"01. \u57fa\u4e8e docker \u955c\u50cf"},{"location":"book/C09_Analysis-Platform/01_docker/#docker","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Docker"},{"location":"book/C09_Analysis-Platform/01_docker/#docker-ce-for-ubuntu","text":"# \u786e\u4fdd\u5220\u9664\u65e7\u7248\u672c $ sudo apt remove docker docker-engine docker.io # Ubuntu 14.04 \u7248\u672c\u7684\u7528\u6237\u8981\u5b89\u88c5 linux-image-extra-* $ sudo apt-get update $ sudo apt-get install linux-image-extra- $( uname -r ) linux-image-extra-virtual # \u5b89\u88c5 docker ce $ sudo apt install apt-transport-https ca-certificates curl software-properties-common $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo apt-key fingerprint 0EBFCD88 $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $( lsb_release -cs ) stable\" $ sudo apt update $ sudo apt install docker-ce","title":"\u5b89\u88c5 docker CE for Ubuntu"},{"location":"book/C09_Analysis-Platform/01_docker/#docker-in-archlinux","text":"# \u5b89\u88c5 docker $ sudo pacman -S docker # \u5f00\u673a\u81ea\u52a8\u8fd0\u884c docker $ sudo systemctl enable docker.service # \u542f\u52a8 docker \u670d\u52a1 $ sudo systemctl start docker.service","title":"\u5b89\u88c5 docker in Archlinux"},{"location":"book/C09_Analysis-Platform/01_docker/#docker_1","text":"$ sudo docker images ls","title":"\u4f7f\u7528 docker"},{"location":"book/C09_Analysis-Platform/02_galaxy/","text":"Galaxy \u5feb\u901f\u90e8\u7f72\u65b9\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} 1. \u5c0f\u578b\u5b9e\u9a8c\u5ba4\u5feb\u901f\u89e3\u51b3\u65b9\u6848 \u00b6 \u4f7f\u7528 Amazon EC2 \u5bf9\u4e8e\u4e0d\u719f\u6089 Linux \u548c\u670d\u52a1\u5668\u914d\u7f6e\u7684\u7528\u6237\u800c\u8a00\u662f\u5f88\u65b9\u4fbf\uff0c\u8282\u7701\u7528\u6237\u5728\u786c\u4ef6\u7684\u7ecf\u6d4e\u6295\u5165\uff0c\u914d\u7f6e\u5b66\u4e60\u4ee5\u53ca\u7ef4\u62a4\u80fd\u529b\u7684\u57f9\u517b\u3002\u4f46\u5bf9\u4e8e\u6d4b\u5e8f\u6570\u636e\u4e0d\u9002\u5408\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u670d\u52a1\u5668\u7684\u5b9e\u9a8c\u5ba4\u6216\u8981\u7ed3\u5408\u672c\u5730 LIMS \u7cfb\u7edf\u7684\u5b9e\u9a8c\u5ba4\uff0c\u8981\u5feb\u901f\u6784\u5efa Galaxy \u4ee5\u53ca\u76f8\u914d\u5957\u7684\u5176\u4ed6\u8f6f\u4ef6\uff0c\u76ee\u524d\u6765\u8bf4\u6700\u7b80\u4fbf\u7684\u65b9\u6cd5\u4e4b\u4e00\u662f\u5229\u7528 docker \u90e8\u7f72\u5230\u672c\u5730\u670d\u52a1\u5668\u4e0a\u3002 1.1 \u5b89\u88c5 Docker \u00b6 # \u5bf9\u4e8e Ubuntu 20.04 LTS \u7684\u7528\u6237 $ sudo apt update $ sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $( lsb_release -cs ) stable\" $ sudo apt update $ sudo apt install docker-ce docker-ce-cli containerd.io # \u67e5\u770b docker \u8fd0\u884c\u72b6\u6001 $ sudo systemctl status docker # \u5982\u679c\u9700\u8981\u4ee5\u975e\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884c docker # \u9700\u8981\u5c06\u7528\u6237\u52a0\u5165 docker \u7ec4\uff0c\u6bd4\u5982\u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165\uff0c\u5373\u53ef\u4e0d\u9700\u8981sudu\u5373\u53ef\u6267\u884cdocker\u547d\u4ee4 $ sudo usermod -aG docker $USER 1.2 Docker\u5165\u95e8 \u00b6 \u9996\u5148\u8981\u5bf9 docker \u955c\u50cf\u548c\u5bb9\u5668\u7684\u6982\u5ff5\u6709\u6240\u4e86\u89e3\u3002\u7ec6\u8282\u53ef\u4ee5\u53c2\u9605 Docker \u4ece\u5165\u95e8\u5230\u5b9e\u8df5 # \u6d4b\u8bd5 docker \u662f\u5426\u8fd0\u884c\u6b63\u5e38 $ docker container run hello-world 1.3 \u5b89\u88c5 galaxy docker \u955c\u50cf \u00b6 \u4f7f\u7528 docker-galaxy-stable \u4f5c\u4e3a\u955c\u50cf\uff0c\u6e90\u4ee3\u7801\u53ef\u4ee5\u5728 Github \u4e0b\u8f7d\u3002\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5230\u5b98\u65b9 Hub Registry \u91cc\u4e0b\u8f7d galaxy-stable \u955c\u50cf\u3002 $ sudo docker pull bgruening/galaxy-stable \u5b98\u65b9 Registry \u975e\u5e38\u6162\uff0c\u53ef\u4ee5\u901a\u8fc7\u56fd\u5185 daocloud \u670d\u52a1\u5546\u7684\u52a0\u901f\u5668\u6765\u52a0\u5feb docker pull \u8fc7\u7a0b\uff1a\u9996\u5148\u6ce8\u518c\u4e00\u4e2a daocloud \u7528\u6237\uff0c\u7136\u540e\u5728\u547d\u4ee4\u884c\u4e2d\u6dfb\u52a0 registry mirror\u3002 # ****** \u4e3adaocloud\u5206\u914d\u7ed9\u4f60\u7684ID $ echo \"DOCKER_OPTS=\\\"\\$DOCKER_OPTS --registry-mirror=http://******.m.daocloud.io\\\"\" | sudo tee -a /etc/default/docker $ sudo service docker restart $ sudo docker pull bgruening/galaxy-stable \u8be5\u811a\u672c\u53ef\u4ee5\u5c06 --registry-mirror \u52a0\u5165\u5230\u4f60\u7684Docker\u914d\u7f6e\u6587\u4ef6 /etc/default/docker \u4e2d\u3002\u9002\u7528\u4e8eUbuntu14.04\uff0c\u5176\u4ed6\u7248\u672c\u6839\u636edocker\u914d\u7f6e\u6587\u4ef6\u548c\u73af\u5883\u53d8\u91cf\uff0c\u53ef\u80fd\u6709\u7ec6\u5fae\u4e0d\u540c\u3002 $ wget https://github.com/bgruening/docker-galaxy-stable/archive/15.10.tar.gz $ tar zxf 15 .10.tar.gz $ cd docker-galaxy-stable-15.10 1.4 \u542f\u52a8 galax-stable \u5bb9\u5668 \u00b6 docker run -d \u8868\u793a\u4ee5daemon\u65b9\u5f0f\u8fd0\u884cdocker\uff0c\u6267\u884c\u8be5\u547d\u4ee4\u540e\uff0cdocker\u5b8c\u6210galaxy\u521d\u59cb\u5316\u9700\u8981\u82b1\u51e0\u5206\u949f\u65f6\u95f4\u624d\u80fd\u8bbf\u95ee\u3002\u5982\u679c\u662f\u672c\u5730\u8fd0\u884c\uff0c\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee 127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230galaxy\u9996\u9875\uff0c\u5982\u679c\u662f\u670d\u52a1\u5668\u4e0a\u7528ssh\u8fde\u63a5\u6267\u884c\u547d\u4ee4\uff0c\u8981\u8bbf\u95ee\u670d\u52a1\u5668IP\u52a0\u4e0a8080\u7aef\u53e3\u3002 # \u540e\u53f0\u8fd0\u884c galaxy \u5bb9\u5668 $ sudo docker run -d -p 8080 :80 -p 8021 :21 bgruening/galaxy-stable # \u4ea4\u4e92\u65b9\u5f0f\u8fd0\u884c galaxy \u5bb9\u5668 $ sudo docker run -i -t -p 8080 :80 bgruening/galaxy-stable /bin/bash root$ sh run.sh \u6709\u65f6\u5019\u9700\u8981\u8fdb\u5165docker\u5bb9\u5668\u4e2d\u8fdb\u884c\u64cd\u4f5c\uff0c\u5c31\u53ef\u4ee5\u4ee5 docker run -i \u4ea4\u4e92\u6a21\u5f0f\u8fdb\u884c\u8bbf\u95ee\u3002\u8fdb\u5165\u5bb9\u5668\u540e\u8fd0\u884c sh run.sh \u53ef\u4ee5DEBUG\u65b9\u5f0f\u8fd0\u884cgalaxy\uff0c\u9002\u5408\u672c\u5730\u6d4b\u8bd5\u4f7f\u7528\u3002 1.5 \u590d\u5236\u5bb9\u5668\u5185\u6587\u4ef6 \u00b6 # fc3e62e0471d \u662f\u60f3\u8981\u83b7\u53d6\u6587\u4ef6\u7684\u6240\u5728\u5bb9\u5668\u3002foo.txt\u662f\u60f3\u8981\u83b7\u5f97\u7684\u6587\u4ef6\u3002 $ sudo docker cp fc3ea62e471d:/home/foo.txt . 1.6 \u52a0\u8f7d\u6570\u636e\u5377 \u00b6 \u9700\u8981\u5206\u6790\u7684\u6570\u636e\u901a\u8fc7\u6dfb\u52a0\u5916\u90e8\u6570\u636e\u5377\u6765\u5b9e\u73b0\u3002 # \u6dfb\u52a0\u670d\u52a1\u5668\u4e0a\u7684 /mydata \u5377\u5230\u5bb9\u5668\u4e2d $ sudo docker create -v /mydata --name my_data_vol bgruening/galaxy-stable /bin/bash # \u6216\u8005\u5728\u8fd0\u884c\u65f6\u5c06\u672c\u5730\u5377`/mydata`\u52a0\u5165\u5230\u5bb9\u5668\u4e2d`/container_data`\u4f4d\u7f6e $ sudo docker run -d -p 8080 :80 -v /mydata:/container_data/ bgruening/galaxy-stable \u955c\u50cf\u662f\u53ea\u8bfb\u7684\uff0c\u5f53 Ctrl+D \u65b9\u5f0f\u9000\u51fa\u5bb9\u5668\u540e\uff0c\u518d\u6b21\u8fdb\u5165\u5bb9\u5668\u65f6\u4f60\u4e0a\u6b21\u4ee5\u6dfb\u52a0\u7684\u5185\u5bb9\u662f\u770b\u4e0d\u5230\u7684\u3002\u5982\u679c\u60f3\u8981\u4ece\u4e0a\u4e00\u6b21\u8fd0\u884c\u7684\u5bb9\u6613\u4e2d\u83b7\u5f97\u6587\u4ef6\u53ef\u4ee5\u7528 docker cp \u7684\u65b9\u6cd5\uff0c\u4e0d\u8fc7\u4f60\u5f97\u8bb0\u4f4f\u4e0a\u4e00\u6b21\u8fd0\u884c\u7684container id\u53f7\u3002 1.7 \u5220\u9664\u6240\u6709\u4e0d\u8fd0\u884c\u7684\u5bb9\u5668 \u00b6 $ sudo docker ps -a | cut -d ' ' -f 1 | sudo xargs docker rm 1.8 \u5220\u9664\u955c\u50cf \u00b6 # IMAGE ID \u662f\u8be5\u955c\u50cf\u7684ID\uff0c\u5982\u679c\u955c\u50cf\u8fd8\u6709\u5bb9\u5668\u8fd0\u884c\uff0c\u6216\u6709\u5176\u4ed6\u955c\u50cf\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5219\u65e0\u6cd5\u5220\u9664\u8981\u5148\u5220\u9664\u5bb9\u5668\u6216\u5176\u4ed6\u955c\u50cf\u3002 $ sudo docker rmi IMAGE_ID 2. \u672c\u5730\u5b89\u88c5\u4e0e\u57fa\u672c\u914d\u7f6e \u00b6 \u672c\u8282\u4ecb\u7ecd Galaxy \u4e0b\u8f7d\u5b89\u88c5\u4e0e\u4f7f\u7528\u3002\u6700\u9002\u5408\u7684\u573a\u666f\u4e3a\u4e2a\u4eba\u7535\u8111\uff0c\u5355\u7528\u6237\u4f7f\u7528\u7684\u60c5\u51b5\u3002 2.1 \u4e0b\u8f7d\u4e0e\u5b89\u88c5 \u00b6 Galaxy \u4f5c\u4e3a\u4e00\u6b3e\u5f00\u6e90\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u8bbf\u95ee\u5176 \u4ee3\u7801\u4ed3\u5e93 \u83b7\u5f97\u6700\u65b0\u7248\u672c\uff0c\u6216\u5c06 galaxy \u4ee3\u7801\u5e93\u514b\u9686\u5230\u672c\u5730\u3002 $ git clone https://github.com/galaxyproject/galaxy $ cd galaxy 2.2 \u914d\u7f6e\u4e0e\u8fd0\u884c \u00b6 \u514b\u9686\u5230\u672c\u5730\u7684 stable \u4ee3\u7801\uff0c\u4e00\u822cLinux\u7cfb\u7edf\u81ea\u5e26Python\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u4e86\u3002 $ sh run.sh \u8fd0\u884c run.sh \uff0c\u8fd9\u4e2ashell\u811a\u672c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u5b8c\u6210\u521d\u59cb\u5316\u6570\u636e\uff0c\u4f9d\u8d56\u5e93\u4e0b\u8f7d\uff0c\u6570\u636e\u5e93\u8fc1\u79fb\u7b49\u4e00\u7cfb\u5217\u64cd\u4f5c\uff0c\u5f53\u770b\u5230\u7ec8\u7aef\u663e\u793a serving on http://127.0.0.1:8080 \u65f6\uff0c\u53ef\u4ee5\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee http://127.0.0.1:8080 \u5373\u53ef\u770b\u5230galaxy\u7684\u754c\u9762\u3002 2.3 \u6dfb\u52a0\u5b98\u65b9 toolshed \u4e2d\u7684\u5de5\u5177 \u00b6 \u9ed8\u8ba4\u7684galaxy\u53ea\u5e26\u6709\u57fa\u672c\u7684\u5de5\u5177\uff0c\u5bf9\u4e8e\u5b9e\u9645\u5de5\u4f5c\u4e2d\u9700\u8981\u7684\u5404\u79cd\u5206\u6790\u8f6f\u4ef6\uff0c\u9700\u8981\u6dfb\u52a0\u5230\u81ea\u5df1\u5efa\u7acb\u7684 galaxy \u5b9e\u4f8b\u4e2d\u3002 \u9ad8\u901a\u91cf\u6d4b\u5e8f\u7684\u751f\u7269\u4fe1\u606f\u5b66\u8f6f\u4ef6\u5927\u591a\u662f\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u5f00\u6e90\u5de5\u5177\u3002galaxy\u5229\u7528python\u8bed\u8a00\u5c06\u8fd9\u4e9b\u5de5\u5177\u7c98\u5408\u5230galaxy\u5b9e\u4f8b\u4e2d\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u5728web\u754c\u9762\u4e2d\u76f4\u63a5\u8c03\u7528\u547d\u4ee4\u884c\u5de5\u5177\u5bf9\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002 galaxy\u6709\u4e00\u4e2atoolshed\uff08\u5de5\u5177\u5e93\uff09\u7684\u6982\u5ff5\uff1a https://toolshed.g2.bx.psu.edu/ \uff08\u5b98\u65b9\u7ef4\u62a4\u7684toolshed\uff09\uff0c\u8bb8\u591a\u8457\u540d\u7684\u5de5\u5177\u5df2\u7ecf\u88ab\u79fb\u690d\u5230toolshed\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u88ab\u5b89\u88c5\u5230galaxy\u91cc\uff0c\u6b64\u5916\u4e5f\u6709\u8bb8\u591a\u7b2c\u4e09\u65b9\u7684toolshed\u5305\u53ef\u4ee5\u6dfb\u52a0\uff0c\u751a\u81f3\u638c\u63e1\u4e86\u4e00\u4e9bpython\u811a\u672c\u548cgalaxy xml\u89c4\u8303\u540e\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u6dfb\u52a0\u4e00\u4e9b\u5206\u6790\u5de5\u5177\u5230galaxy\u4e2d\u3002 \u9664\u4e86\u5206\u6790\u8f6f\u4ef6\u5916\uff0ctoolshed\u8fd8\u5305\u542b\u521b\u5efa\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4ee5\u53ca\u5de5\u4f5c\u6d41\u7b49\u3002 \u9996\u5148\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 tool_sheds_conf.xml $ cp config/tool_sheds_conf.xml.sample config/tool_sheds_conf.xml \u5176\u6b21\u5728galaxy.ini\u4e2d\u914d\u7f6e\u4f9d\u8d56\u5305\u7684\u5b89\u88c5\u76ee\u5f55\uff08\u4e0a\u4e00\u90e8\u5206\u5df2\u7ecf\u6dfb\u52a0\u4e86\u8fd9\u4e2a\u53c2\u6570\uff0c\u5c06\u4f9d\u8d56\u5305\u5b89\u88c5\u5728 tool_dep \uff09\uff0c\u7136\u540e\u6dfb\u52a0\u7ba1\u7406\u5458\u5e10\u53f7\uff0c\u6bd4\u5982\u4f60\u4e4b\u524d\u7528admin@localhost.com\u6ce8\u518c\u7684galaxy\u5b9e\u4f8b\uff0c\u5c31\u5c06galaxy.ini\u4e2d admin_users \u8bbe\u7f6e\u4e3a\uff1a admin_users = admin@localhost.com \u91cd\u542f\u4f60\u7684galaxy\u5b9e\u4f8b\uff0c\u7528admin@localhost.com\u7528\u6237\u767b\u9646\uff0c\u4f60\u5c31\u6709\u6743\u9650\u8bbf\u95ee http://127.0.0.1:8080/admin \uff0c\u5728admin\u754c\u9762\u53ef\u4ee5\u770b\u5230 Tool sheds \u4e0b\u6709 Search and browse tool sheds \u94fe\u63a5\uff0c\u70b9\u51fb\u540e\u53ef\u4ee5\u770b\u5230\u9ed8\u8ba4\u76842\u4e2atoolsheds\u6e90\u3002 \u8fdb\u5165 Galaxy main tool shed \uff0c\u5de5\u5177\u5217\u8868\u4e0a\u8bbf\u6709\u641c\u7d22\u6846\uff0c\u5728\u8fd9\u91cc\u8f93\u5165\u4f60\u8981\u5b89\u88c5\u7684\u5de5\u5177\u540d\u79f0\u6bd4\u5982 spades \u540e\uff0c\u56de\u8f66\u8fdb\u884c\u68c0\u7d22\u3002 \u70b9\u51fb\u7ed3\u679c\u5217\u8868\u4e2d\u7684 spades \u4e0b\u62c9\u83dc\u5355\uff0c\u9009\u62e9 Preview and install \uff0c\u5728\u8f6c\u5411\u9875\u9762\u4e2d\u70b9\u51fb Install to Galaxy \u540e\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u56fe\u7684\u63d0\u793a\u3002 \u5728 add new tool panel section \u4e2d\u8f93\u5165 Assembly \uff0c\u5c06 spades \u5de5\u5177\u5f52\u7c7b\u5230 Assembly \u8fd9\u4e2a\u65b0\u5efa\u7684\u5de5\u5177\u7c7b\u522b\u4e2d\uff0c\u70b9\u51fb\u9875\u9762\u5e95\u90e8\u7684 Install \u6309\u94ae\u5f00\u59cb\u5b89\u88c5\u3002 3. \u6784\u5efa\u5355\u673a\u4ea7\u73af\u5883 \u00b6 \u4f5c\u4e3a\u4e2a\u4eba\u5c1d\u8bd5\uff0c\u524d\u9762\u7684\u6b65\u9aa4\u5728PC\u673a\u4e0a\u5df2\u7ecf\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u4f7f\u7528\u3002\u5bf9\u4e8e\u8981\u4f5c\u4e3a\u751f\u4ea7\u73af\u5883\u4e0b\u591a\u7528\u6237\u4f7f\u7528\uff0c\u5efa\u8bae\u4f7f\u7528\u4e13\u95e8\u7684\u4ee3\u7406\u670d\u52a1\u5668\u548c\u6570\u636e\u5e93\u6765\u589e\u5f3a\u6548\u7387\u548c\u901f\u5ea6\u3002\u8fd9\u91cc\u91c7\u7528nginx+postgresql\u6784\u5efa\u751f\u4ea7\u73af\u5883\u4e0b\u7684 Galaxy \u670d\u52a1\u3002\u8fd9\u91cc\u53ea\u662f\u7b80\u5355\u7684\u4ecb\u7ecd\u4e00\u4e0b\u6700\u57fa\u672c\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u5bf9\u4e8e\u9ad8\u8d1f\u8f7d\u7684web server\u8bbe\u7f6e\u53c8\u662f\u53e6\u4e00\u4e2a\u5f88\u590d\u6742\u7684\u8bdd\u9898\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5177\u4f53\u5c55\u5f00\u3002\u4e5f\u53ef\u4ee5\u53c2\u8003\u522b\u4eba\u505a\u7684 galaxy dockerfile \u3002 3.1 \u7cfb\u7edf\u8bbe\u7f6e \u00b6 \u9996\u5148\u5728ubuntu\u4e0b\u65b0\u5efa\u4e00\u4e2a\u7528\u6237galaxy\u3002 $ sudo adduser galaxy \u6309\u7167\u63d0\u793a\uff0c\u5728\u5f39\u51fa\u63d0\u793a\u7b26\u8f93\u5165\u76f8\u5e94\u5185\u5bb9\uff0c\u4e3b\u8981\u586b\u597d\u5bc6\u7801\u5373\u53ef\uff0c\u5176\u4ed6\u53ef\u4ee5\u7559\u7a7a\u3002\u7136\u540e\u5207\u6362\u5230galaxy\u7528\u6237\uff1a $ su galaxy $ cd \u91cd\u590d Galaxy \u672c\u5730\u5b89\u88c5\u4e0e\u914d\u7f6e \u7684\u7b2c\u4e00\u6b65 \u4e0b\u8f7d\u4e0e\u5b89\u88c5 \u6b65\u9aa4,\u5efa\u7acb\u914d\u7f6e\u6587\u4ef6\uff1a $ cp config/galaxy.ini.sample config/galaxy.ini $ vim config/galaxy.ini \u5c06\u914d\u7f6e\u6587\u4ef6galaxy.ini\u8bbe\u7f6e\u5982\u4e0b\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5c06\u5185\u5bb9\u76f4\u63a5\u4fdd\u5b58\u6210galaxy.ini [ server:main ] use = egg:Paste#http host = 0 .0.0.0 use_threadpool = True threadpool_kill_thread_limit = 10800 [ filter:gzip ] use = egg:Paste#gzip [ filter:proxy-prefix ] use = egg:PasteDeploy#prefix prefix = /galaxy [ app:main ] paste.app_factory = galaxy.web.buildapp:app_factory database_connection = postgresql://galaxy:galaxy@localhost:5432/galaxyserver tool_dependency_dir = tool_dep use_nglims = False nglims_config_file = tool-data/nglims.yaml debug = False use_interactive = False admin_users = admin@localhost.com 3.2 \u5b89\u88c5 postgresql \u00b6 \u5b89\u88c5postgresql\u5e76\u5efa\u7acbgalaxy\u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u7528\u6237\u540d\u548c\u5bc6\u7801\u90fd\u8bbe\u7f6e\u4e3a galaxy \uff0c\u8981\u4e0e galaxy.ini \u4e2d database_connection \u53c2\u6570\u5bf9\u5e94\u7684\u503c\u4e00\u81f4\u3002 $ sudo apt-get install postgresql-9.3 $ su - postgres $ psql template1 > CREATE USER galaxy WITH PASSWORD 'galaxy' ; > CREATE DATABASE galaxyserver ; > GRANT ALL PRIVILEGES ON DATABASE galaxyserver to galaxy ; > \\q 3.3 \u5b89\u88c5 nginx \u00b6 \u7528nginx\u505a\u53cd\u5411\u4ee3\u7406\uff0c\u5904\u7406\u8bf7\u6c42\u3002 $ sudo apt-get install nginx \u8bbe\u7f6enginx.conf http { upstream galaxy_app { server localhost:8080 ; } server { client_max_body_size 10G ; location / { proxy_pass http://galaxy_app ; proxy_set_header X-Forwarded-Host $host ; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for ; } } } docker \u5b89\u88c5 \u00b6 Galaxy \u7531\u4e8e\u4f9d\u8d56\u4f17\u591a\uff0c\u5b89\u88c5\u6bd4\u8f83\u590d\u6742\uff0c\u63a8\u8350\u7528 docker \u955c\u50cf\u5b89\u88c5\uff0c\u6bd4\u8f83\u7b80\u5355\u3002 # \u4e0b\u8f7d\u955c\u50cf $ docker pull bgruening/galaxy-stable # \u8fd0\u884cimages $ docker run -d -p 8080 :80 -p 8021 :21 -p 8022 :22 bgruening/galaxy-stable \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee http://127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230 galaxy \u754c\u9762 Rreference \u00b6 Docker \u4ece\u5165\u95e8\u5230\u5b9e\u8df5 docker-galaxy-stable","title":"02. Galaxy \u5e73\u53f0"},{"location":"book/C09_Analysis-Platform/02_galaxy/#galaxy","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Galaxy \u5feb\u901f\u90e8\u7f72\u65b9\u5f0f"},{"location":"book/C09_Analysis-Platform/02_galaxy/#1","text":"\u4f7f\u7528 Amazon EC2 \u5bf9\u4e8e\u4e0d\u719f\u6089 Linux \u548c\u670d\u52a1\u5668\u914d\u7f6e\u7684\u7528\u6237\u800c\u8a00\u662f\u5f88\u65b9\u4fbf\uff0c\u8282\u7701\u7528\u6237\u5728\u786c\u4ef6\u7684\u7ecf\u6d4e\u6295\u5165\uff0c\u914d\u7f6e\u5b66\u4e60\u4ee5\u53ca\u7ef4\u62a4\u80fd\u529b\u7684\u57f9\u517b\u3002\u4f46\u5bf9\u4e8e\u6d4b\u5e8f\u6570\u636e\u4e0d\u9002\u5408\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u670d\u52a1\u5668\u7684\u5b9e\u9a8c\u5ba4\u6216\u8981\u7ed3\u5408\u672c\u5730 LIMS \u7cfb\u7edf\u7684\u5b9e\u9a8c\u5ba4\uff0c\u8981\u5feb\u901f\u6784\u5efa Galaxy \u4ee5\u53ca\u76f8\u914d\u5957\u7684\u5176\u4ed6\u8f6f\u4ef6\uff0c\u76ee\u524d\u6765\u8bf4\u6700\u7b80\u4fbf\u7684\u65b9\u6cd5\u4e4b\u4e00\u662f\u5229\u7528 docker \u90e8\u7f72\u5230\u672c\u5730\u670d\u52a1\u5668\u4e0a\u3002","title":"1. \u5c0f\u578b\u5b9e\u9a8c\u5ba4\u5feb\u901f\u89e3\u51b3\u65b9\u6848"},{"location":"book/C09_Analysis-Platform/02_galaxy/#11-docker","text":"# \u5bf9\u4e8e Ubuntu 20.04 LTS \u7684\u7528\u6237 $ sudo apt update $ sudo apt install apt-transport-https ca-certificates curl gnupg-agent software-properties-common $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $( lsb_release -cs ) stable\" $ sudo apt update $ sudo apt install docker-ce docker-ce-cli containerd.io # \u67e5\u770b docker \u8fd0\u884c\u72b6\u6001 $ sudo systemctl status docker # \u5982\u679c\u9700\u8981\u4ee5\u975e\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884c docker # \u9700\u8981\u5c06\u7528\u6237\u52a0\u5165 docker \u7ec4\uff0c\u6bd4\u5982\u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165\uff0c\u5373\u53ef\u4e0d\u9700\u8981sudu\u5373\u53ef\u6267\u884cdocker\u547d\u4ee4 $ sudo usermod -aG docker $USER","title":"1.1 \u5b89\u88c5 Docker"},{"location":"book/C09_Analysis-Platform/02_galaxy/#12-docker","text":"\u9996\u5148\u8981\u5bf9 docker \u955c\u50cf\u548c\u5bb9\u5668\u7684\u6982\u5ff5\u6709\u6240\u4e86\u89e3\u3002\u7ec6\u8282\u53ef\u4ee5\u53c2\u9605 Docker \u4ece\u5165\u95e8\u5230\u5b9e\u8df5 # \u6d4b\u8bd5 docker \u662f\u5426\u8fd0\u884c\u6b63\u5e38 $ docker container run hello-world","title":"1.2 Docker\u5165\u95e8"},{"location":"book/C09_Analysis-Platform/02_galaxy/#13-galaxy-docker","text":"\u4f7f\u7528 docker-galaxy-stable \u4f5c\u4e3a\u955c\u50cf\uff0c\u6e90\u4ee3\u7801\u53ef\u4ee5\u5728 Github \u4e0b\u8f7d\u3002\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5230\u5b98\u65b9 Hub Registry \u91cc\u4e0b\u8f7d galaxy-stable \u955c\u50cf\u3002 $ sudo docker pull bgruening/galaxy-stable \u5b98\u65b9 Registry \u975e\u5e38\u6162\uff0c\u53ef\u4ee5\u901a\u8fc7\u56fd\u5185 daocloud \u670d\u52a1\u5546\u7684\u52a0\u901f\u5668\u6765\u52a0\u5feb docker pull \u8fc7\u7a0b\uff1a\u9996\u5148\u6ce8\u518c\u4e00\u4e2a daocloud \u7528\u6237\uff0c\u7136\u540e\u5728\u547d\u4ee4\u884c\u4e2d\u6dfb\u52a0 registry mirror\u3002 # ****** \u4e3adaocloud\u5206\u914d\u7ed9\u4f60\u7684ID $ echo \"DOCKER_OPTS=\\\"\\$DOCKER_OPTS --registry-mirror=http://******.m.daocloud.io\\\"\" | sudo tee -a /etc/default/docker $ sudo service docker restart $ sudo docker pull bgruening/galaxy-stable \u8be5\u811a\u672c\u53ef\u4ee5\u5c06 --registry-mirror \u52a0\u5165\u5230\u4f60\u7684Docker\u914d\u7f6e\u6587\u4ef6 /etc/default/docker \u4e2d\u3002\u9002\u7528\u4e8eUbuntu14.04\uff0c\u5176\u4ed6\u7248\u672c\u6839\u636edocker\u914d\u7f6e\u6587\u4ef6\u548c\u73af\u5883\u53d8\u91cf\uff0c\u53ef\u80fd\u6709\u7ec6\u5fae\u4e0d\u540c\u3002 $ wget https://github.com/bgruening/docker-galaxy-stable/archive/15.10.tar.gz $ tar zxf 15 .10.tar.gz $ cd docker-galaxy-stable-15.10","title":"1.3 \u5b89\u88c5 galaxy docker \u955c\u50cf"},{"location":"book/C09_Analysis-Platform/02_galaxy/#14-galax-stable","text":"docker run -d \u8868\u793a\u4ee5daemon\u65b9\u5f0f\u8fd0\u884cdocker\uff0c\u6267\u884c\u8be5\u547d\u4ee4\u540e\uff0cdocker\u5b8c\u6210galaxy\u521d\u59cb\u5316\u9700\u8981\u82b1\u51e0\u5206\u949f\u65f6\u95f4\u624d\u80fd\u8bbf\u95ee\u3002\u5982\u679c\u662f\u672c\u5730\u8fd0\u884c\uff0c\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee 127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230galaxy\u9996\u9875\uff0c\u5982\u679c\u662f\u670d\u52a1\u5668\u4e0a\u7528ssh\u8fde\u63a5\u6267\u884c\u547d\u4ee4\uff0c\u8981\u8bbf\u95ee\u670d\u52a1\u5668IP\u52a0\u4e0a8080\u7aef\u53e3\u3002 # \u540e\u53f0\u8fd0\u884c galaxy \u5bb9\u5668 $ sudo docker run -d -p 8080 :80 -p 8021 :21 bgruening/galaxy-stable # \u4ea4\u4e92\u65b9\u5f0f\u8fd0\u884c galaxy \u5bb9\u5668 $ sudo docker run -i -t -p 8080 :80 bgruening/galaxy-stable /bin/bash root$ sh run.sh \u6709\u65f6\u5019\u9700\u8981\u8fdb\u5165docker\u5bb9\u5668\u4e2d\u8fdb\u884c\u64cd\u4f5c\uff0c\u5c31\u53ef\u4ee5\u4ee5 docker run -i \u4ea4\u4e92\u6a21\u5f0f\u8fdb\u884c\u8bbf\u95ee\u3002\u8fdb\u5165\u5bb9\u5668\u540e\u8fd0\u884c sh run.sh \u53ef\u4ee5DEBUG\u65b9\u5f0f\u8fd0\u884cgalaxy\uff0c\u9002\u5408\u672c\u5730\u6d4b\u8bd5\u4f7f\u7528\u3002","title":"1.4 \u542f\u52a8 galax-stable \u5bb9\u5668"},{"location":"book/C09_Analysis-Platform/02_galaxy/#15","text":"# fc3e62e0471d \u662f\u60f3\u8981\u83b7\u53d6\u6587\u4ef6\u7684\u6240\u5728\u5bb9\u5668\u3002foo.txt\u662f\u60f3\u8981\u83b7\u5f97\u7684\u6587\u4ef6\u3002 $ sudo docker cp fc3ea62e471d:/home/foo.txt .","title":"1.5 \u590d\u5236\u5bb9\u5668\u5185\u6587\u4ef6"},{"location":"book/C09_Analysis-Platform/02_galaxy/#16","text":"\u9700\u8981\u5206\u6790\u7684\u6570\u636e\u901a\u8fc7\u6dfb\u52a0\u5916\u90e8\u6570\u636e\u5377\u6765\u5b9e\u73b0\u3002 # \u6dfb\u52a0\u670d\u52a1\u5668\u4e0a\u7684 /mydata \u5377\u5230\u5bb9\u5668\u4e2d $ sudo docker create -v /mydata --name my_data_vol bgruening/galaxy-stable /bin/bash # \u6216\u8005\u5728\u8fd0\u884c\u65f6\u5c06\u672c\u5730\u5377`/mydata`\u52a0\u5165\u5230\u5bb9\u5668\u4e2d`/container_data`\u4f4d\u7f6e $ sudo docker run -d -p 8080 :80 -v /mydata:/container_data/ bgruening/galaxy-stable \u955c\u50cf\u662f\u53ea\u8bfb\u7684\uff0c\u5f53 Ctrl+D \u65b9\u5f0f\u9000\u51fa\u5bb9\u5668\u540e\uff0c\u518d\u6b21\u8fdb\u5165\u5bb9\u5668\u65f6\u4f60\u4e0a\u6b21\u4ee5\u6dfb\u52a0\u7684\u5185\u5bb9\u662f\u770b\u4e0d\u5230\u7684\u3002\u5982\u679c\u60f3\u8981\u4ece\u4e0a\u4e00\u6b21\u8fd0\u884c\u7684\u5bb9\u6613\u4e2d\u83b7\u5f97\u6587\u4ef6\u53ef\u4ee5\u7528 docker cp \u7684\u65b9\u6cd5\uff0c\u4e0d\u8fc7\u4f60\u5f97\u8bb0\u4f4f\u4e0a\u4e00\u6b21\u8fd0\u884c\u7684container id\u53f7\u3002","title":"1.6 \u52a0\u8f7d\u6570\u636e\u5377"},{"location":"book/C09_Analysis-Platform/02_galaxy/#17","text":"$ sudo docker ps -a | cut -d ' ' -f 1 | sudo xargs docker rm","title":"1.7 \u5220\u9664\u6240\u6709\u4e0d\u8fd0\u884c\u7684\u5bb9\u5668"},{"location":"book/C09_Analysis-Platform/02_galaxy/#18","text":"# IMAGE ID \u662f\u8be5\u955c\u50cf\u7684ID\uff0c\u5982\u679c\u955c\u50cf\u8fd8\u6709\u5bb9\u5668\u8fd0\u884c\uff0c\u6216\u6709\u5176\u4ed6\u955c\u50cf\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5219\u65e0\u6cd5\u5220\u9664\u8981\u5148\u5220\u9664\u5bb9\u5668\u6216\u5176\u4ed6\u955c\u50cf\u3002 $ sudo docker rmi IMAGE_ID","title":"1.8 \u5220\u9664\u955c\u50cf"},{"location":"book/C09_Analysis-Platform/02_galaxy/#2","text":"\u672c\u8282\u4ecb\u7ecd Galaxy \u4e0b\u8f7d\u5b89\u88c5\u4e0e\u4f7f\u7528\u3002\u6700\u9002\u5408\u7684\u573a\u666f\u4e3a\u4e2a\u4eba\u7535\u8111\uff0c\u5355\u7528\u6237\u4f7f\u7528\u7684\u60c5\u51b5\u3002","title":"2. \u672c\u5730\u5b89\u88c5\u4e0e\u57fa\u672c\u914d\u7f6e"},{"location":"book/C09_Analysis-Platform/02_galaxy/#21","text":"Galaxy \u4f5c\u4e3a\u4e00\u6b3e\u5f00\u6e90\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u8bbf\u95ee\u5176 \u4ee3\u7801\u4ed3\u5e93 \u83b7\u5f97\u6700\u65b0\u7248\u672c\uff0c\u6216\u5c06 galaxy \u4ee3\u7801\u5e93\u514b\u9686\u5230\u672c\u5730\u3002 $ git clone https://github.com/galaxyproject/galaxy $ cd galaxy","title":"2.1 \u4e0b\u8f7d\u4e0e\u5b89\u88c5"},{"location":"book/C09_Analysis-Platform/02_galaxy/#22","text":"\u514b\u9686\u5230\u672c\u5730\u7684 stable \u4ee3\u7801\uff0c\u4e00\u822cLinux\u7cfb\u7edf\u81ea\u5e26Python\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u4e86\u3002 $ sh run.sh \u8fd0\u884c run.sh \uff0c\u8fd9\u4e2ashell\u811a\u672c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u5b8c\u6210\u521d\u59cb\u5316\u6570\u636e\uff0c\u4f9d\u8d56\u5e93\u4e0b\u8f7d\uff0c\u6570\u636e\u5e93\u8fc1\u79fb\u7b49\u4e00\u7cfb\u5217\u64cd\u4f5c\uff0c\u5f53\u770b\u5230\u7ec8\u7aef\u663e\u793a serving on http://127.0.0.1:8080 \u65f6\uff0c\u53ef\u4ee5\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee http://127.0.0.1:8080 \u5373\u53ef\u770b\u5230galaxy\u7684\u754c\u9762\u3002","title":"2.2 \u914d\u7f6e\u4e0e\u8fd0\u884c"},{"location":"book/C09_Analysis-Platform/02_galaxy/#23-toolshed","text":"\u9ed8\u8ba4\u7684galaxy\u53ea\u5e26\u6709\u57fa\u672c\u7684\u5de5\u5177\uff0c\u5bf9\u4e8e\u5b9e\u9645\u5de5\u4f5c\u4e2d\u9700\u8981\u7684\u5404\u79cd\u5206\u6790\u8f6f\u4ef6\uff0c\u9700\u8981\u6dfb\u52a0\u5230\u81ea\u5df1\u5efa\u7acb\u7684 galaxy \u5b9e\u4f8b\u4e2d\u3002 \u9ad8\u901a\u91cf\u6d4b\u5e8f\u7684\u751f\u7269\u4fe1\u606f\u5b66\u8f6f\u4ef6\u5927\u591a\u662f\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u5f00\u6e90\u5de5\u5177\u3002galaxy\u5229\u7528python\u8bed\u8a00\u5c06\u8fd9\u4e9b\u5de5\u5177\u7c98\u5408\u5230galaxy\u5b9e\u4f8b\u4e2d\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u5728web\u754c\u9762\u4e2d\u76f4\u63a5\u8c03\u7528\u547d\u4ee4\u884c\u5de5\u5177\u5bf9\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002 galaxy\u6709\u4e00\u4e2atoolshed\uff08\u5de5\u5177\u5e93\uff09\u7684\u6982\u5ff5\uff1a https://toolshed.g2.bx.psu.edu/ \uff08\u5b98\u65b9\u7ef4\u62a4\u7684toolshed\uff09\uff0c\u8bb8\u591a\u8457\u540d\u7684\u5de5\u5177\u5df2\u7ecf\u88ab\u79fb\u690d\u5230toolshed\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u88ab\u5b89\u88c5\u5230galaxy\u91cc\uff0c\u6b64\u5916\u4e5f\u6709\u8bb8\u591a\u7b2c\u4e09\u65b9\u7684toolshed\u5305\u53ef\u4ee5\u6dfb\u52a0\uff0c\u751a\u81f3\u638c\u63e1\u4e86\u4e00\u4e9bpython\u811a\u672c\u548cgalaxy xml\u89c4\u8303\u540e\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u6dfb\u52a0\u4e00\u4e9b\u5206\u6790\u5de5\u5177\u5230galaxy\u4e2d\u3002 \u9664\u4e86\u5206\u6790\u8f6f\u4ef6\u5916\uff0ctoolshed\u8fd8\u5305\u542b\u521b\u5efa\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4ee5\u53ca\u5de5\u4f5c\u6d41\u7b49\u3002 \u9996\u5148\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 tool_sheds_conf.xml $ cp config/tool_sheds_conf.xml.sample config/tool_sheds_conf.xml \u5176\u6b21\u5728galaxy.ini\u4e2d\u914d\u7f6e\u4f9d\u8d56\u5305\u7684\u5b89\u88c5\u76ee\u5f55\uff08\u4e0a\u4e00\u90e8\u5206\u5df2\u7ecf\u6dfb\u52a0\u4e86\u8fd9\u4e2a\u53c2\u6570\uff0c\u5c06\u4f9d\u8d56\u5305\u5b89\u88c5\u5728 tool_dep \uff09\uff0c\u7136\u540e\u6dfb\u52a0\u7ba1\u7406\u5458\u5e10\u53f7\uff0c\u6bd4\u5982\u4f60\u4e4b\u524d\u7528admin@localhost.com\u6ce8\u518c\u7684galaxy\u5b9e\u4f8b\uff0c\u5c31\u5c06galaxy.ini\u4e2d admin_users \u8bbe\u7f6e\u4e3a\uff1a admin_users = admin@localhost.com \u91cd\u542f\u4f60\u7684galaxy\u5b9e\u4f8b\uff0c\u7528admin@localhost.com\u7528\u6237\u767b\u9646\uff0c\u4f60\u5c31\u6709\u6743\u9650\u8bbf\u95ee http://127.0.0.1:8080/admin \uff0c\u5728admin\u754c\u9762\u53ef\u4ee5\u770b\u5230 Tool sheds \u4e0b\u6709 Search and browse tool sheds \u94fe\u63a5\uff0c\u70b9\u51fb\u540e\u53ef\u4ee5\u770b\u5230\u9ed8\u8ba4\u76842\u4e2atoolsheds\u6e90\u3002 \u8fdb\u5165 Galaxy main tool shed \uff0c\u5de5\u5177\u5217\u8868\u4e0a\u8bbf\u6709\u641c\u7d22\u6846\uff0c\u5728\u8fd9\u91cc\u8f93\u5165\u4f60\u8981\u5b89\u88c5\u7684\u5de5\u5177\u540d\u79f0\u6bd4\u5982 spades \u540e\uff0c\u56de\u8f66\u8fdb\u884c\u68c0\u7d22\u3002 \u70b9\u51fb\u7ed3\u679c\u5217\u8868\u4e2d\u7684 spades \u4e0b\u62c9\u83dc\u5355\uff0c\u9009\u62e9 Preview and install \uff0c\u5728\u8f6c\u5411\u9875\u9762\u4e2d\u70b9\u51fb Install to Galaxy \u540e\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u56fe\u7684\u63d0\u793a\u3002 \u5728 add new tool panel section \u4e2d\u8f93\u5165 Assembly \uff0c\u5c06 spades \u5de5\u5177\u5f52\u7c7b\u5230 Assembly \u8fd9\u4e2a\u65b0\u5efa\u7684\u5de5\u5177\u7c7b\u522b\u4e2d\uff0c\u70b9\u51fb\u9875\u9762\u5e95\u90e8\u7684 Install \u6309\u94ae\u5f00\u59cb\u5b89\u88c5\u3002","title":"2.3 \u6dfb\u52a0\u5b98\u65b9 toolshed \u4e2d\u7684\u5de5\u5177"},{"location":"book/C09_Analysis-Platform/02_galaxy/#3","text":"\u4f5c\u4e3a\u4e2a\u4eba\u5c1d\u8bd5\uff0c\u524d\u9762\u7684\u6b65\u9aa4\u5728PC\u673a\u4e0a\u5df2\u7ecf\u53ef\u4ee5\u6b63\u5e38\u8fd0\u884c\u4f7f\u7528\u3002\u5bf9\u4e8e\u8981\u4f5c\u4e3a\u751f\u4ea7\u73af\u5883\u4e0b\u591a\u7528\u6237\u4f7f\u7528\uff0c\u5efa\u8bae\u4f7f\u7528\u4e13\u95e8\u7684\u4ee3\u7406\u670d\u52a1\u5668\u548c\u6570\u636e\u5e93\u6765\u589e\u5f3a\u6548\u7387\u548c\u901f\u5ea6\u3002\u8fd9\u91cc\u91c7\u7528nginx+postgresql\u6784\u5efa\u751f\u4ea7\u73af\u5883\u4e0b\u7684 Galaxy \u670d\u52a1\u3002\u8fd9\u91cc\u53ea\u662f\u7b80\u5355\u7684\u4ecb\u7ecd\u4e00\u4e0b\u6700\u57fa\u672c\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u5bf9\u4e8e\u9ad8\u8d1f\u8f7d\u7684web server\u8bbe\u7f6e\u53c8\u662f\u53e6\u4e00\u4e2a\u5f88\u590d\u6742\u7684\u8bdd\u9898\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5177\u4f53\u5c55\u5f00\u3002\u4e5f\u53ef\u4ee5\u53c2\u8003\u522b\u4eba\u505a\u7684 galaxy dockerfile \u3002","title":"3. \u6784\u5efa\u5355\u673a\u4ea7\u73af\u5883"},{"location":"book/C09_Analysis-Platform/02_galaxy/#31","text":"\u9996\u5148\u5728ubuntu\u4e0b\u65b0\u5efa\u4e00\u4e2a\u7528\u6237galaxy\u3002 $ sudo adduser galaxy \u6309\u7167\u63d0\u793a\uff0c\u5728\u5f39\u51fa\u63d0\u793a\u7b26\u8f93\u5165\u76f8\u5e94\u5185\u5bb9\uff0c\u4e3b\u8981\u586b\u597d\u5bc6\u7801\u5373\u53ef\uff0c\u5176\u4ed6\u53ef\u4ee5\u7559\u7a7a\u3002\u7136\u540e\u5207\u6362\u5230galaxy\u7528\u6237\uff1a $ su galaxy $ cd \u91cd\u590d Galaxy \u672c\u5730\u5b89\u88c5\u4e0e\u914d\u7f6e \u7684\u7b2c\u4e00\u6b65 \u4e0b\u8f7d\u4e0e\u5b89\u88c5 \u6b65\u9aa4,\u5efa\u7acb\u914d\u7f6e\u6587\u4ef6\uff1a $ cp config/galaxy.ini.sample config/galaxy.ini $ vim config/galaxy.ini \u5c06\u914d\u7f6e\u6587\u4ef6galaxy.ini\u8bbe\u7f6e\u5982\u4e0b\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5c06\u5185\u5bb9\u76f4\u63a5\u4fdd\u5b58\u6210galaxy.ini [ server:main ] use = egg:Paste#http host = 0 .0.0.0 use_threadpool = True threadpool_kill_thread_limit = 10800 [ filter:gzip ] use = egg:Paste#gzip [ filter:proxy-prefix ] use = egg:PasteDeploy#prefix prefix = /galaxy [ app:main ] paste.app_factory = galaxy.web.buildapp:app_factory database_connection = postgresql://galaxy:galaxy@localhost:5432/galaxyserver tool_dependency_dir = tool_dep use_nglims = False nglims_config_file = tool-data/nglims.yaml debug = False use_interactive = False admin_users = admin@localhost.com","title":"3.1 \u7cfb\u7edf\u8bbe\u7f6e"},{"location":"book/C09_Analysis-Platform/02_galaxy/#32-postgresql","text":"\u5b89\u88c5postgresql\u5e76\u5efa\u7acbgalaxy\u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u7528\u6237\u540d\u548c\u5bc6\u7801\u90fd\u8bbe\u7f6e\u4e3a galaxy \uff0c\u8981\u4e0e galaxy.ini \u4e2d database_connection \u53c2\u6570\u5bf9\u5e94\u7684\u503c\u4e00\u81f4\u3002 $ sudo apt-get install postgresql-9.3 $ su - postgres $ psql template1 > CREATE USER galaxy WITH PASSWORD 'galaxy' ; > CREATE DATABASE galaxyserver ; > GRANT ALL PRIVILEGES ON DATABASE galaxyserver to galaxy ; > \\q","title":"3.2 \u5b89\u88c5 postgresql"},{"location":"book/C09_Analysis-Platform/02_galaxy/#33-nginx","text":"\u7528nginx\u505a\u53cd\u5411\u4ee3\u7406\uff0c\u5904\u7406\u8bf7\u6c42\u3002 $ sudo apt-get install nginx \u8bbe\u7f6enginx.conf http { upstream galaxy_app { server localhost:8080 ; } server { client_max_body_size 10G ; location / { proxy_pass http://galaxy_app ; proxy_set_header X-Forwarded-Host $host ; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for ; } } }","title":"3.3 \u5b89\u88c5 nginx"},{"location":"book/C09_Analysis-Platform/02_galaxy/#docker","text":"Galaxy \u7531\u4e8e\u4f9d\u8d56\u4f17\u591a\uff0c\u5b89\u88c5\u6bd4\u8f83\u590d\u6742\uff0c\u63a8\u8350\u7528 docker \u955c\u50cf\u5b89\u88c5\uff0c\u6bd4\u8f83\u7b80\u5355\u3002 # \u4e0b\u8f7d\u955c\u50cf $ docker pull bgruening/galaxy-stable # \u8fd0\u884cimages $ docker run -d -p 8080 :80 -p 8021 :21 -p 8022 :22 bgruening/galaxy-stable \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee http://127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230 galaxy \u754c\u9762","title":"docker \u5b89\u88c5"},{"location":"book/C09_Analysis-Platform/02_galaxy/#rreference","text":"Docker \u4ece\u5165\u95e8\u5230\u5b9e\u8df5 docker-galaxy-stable","title":"Rreference"},{"location":"book/C09_Analysis-Platform/03_amazon/","text":"Amazon \u00b6","title":"03. Amazon EC2 \u4e91\u5e73\u53f0"},{"location":"book/C09_Analysis-Platform/03_amazon/#amazon","text":"","title":"Amazon"},{"location":"book/C09_Analysis-Platform/04_others/","text":"","title":"04. \u5176\u4ed6\u5e73\u53f0"},{"location":"book/C09_Analysis-Platform/10_microscope/","text":"MicroScope \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u80cc\u666f\u7b80\u4ecb LABGeM \u751f\u7269\u4fe1\u606f\u5b66\u56e2\u961f\u4f4d\u4e8e Genoscope \uff08\u6cd5\u56fd\u56fd\u5bb6\u6d4b\u5e8f\u4e2d\u5fc3\uff09\uff0c\u5f00\u53d1\u4e86 MicroScope \uff0c\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e\u7f51\u7edc\u7684\u5fae\u751f\u7269\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5206\u6790\u548c\u624b\u52a8\u529f\u80fd\u6ce8\u91ca\u5e73\u53f0\u3002 MicroScope \u91c7\u7528\u5173\u7cfb\u6570\u636e\u5e93\u6a21\u5f0f\uff08PkGDB\uff09\u5b58\u50a8\u8bed\u6cd5\u548c\u529f\u80fd\u6ce8\u91ca\u7ba1\u9053\u7684\u7ed3\u679c\u4ee5\u53ca\u7279\u5b9a\u57fa\u56e0\u7ec4\u7684\u4ee3\u8c22\u5206\u6790\uff0c\u5e76\u5efa\u7acbPkGDB\u4e0e\u4ee3\u8c22\u9014\u5f84\u6570\u636e\u5e93\uff08MicroCyc\uff09\u7684\u5173\u8054\u3002 MicroScope \u91c7\u7528Web\u754c\u9762\uff08MaGe\uff09\u7528\u4e8e\u5e2e\u52a9\u8bc4\u4f30\u7ed9\u5b9a\u57fa\u56e0\u7ec4\u6700\u4f73\u6ce8\u91ca\u6240\u9700\u7684\u6240\u6709\u53ef\u7528\u6570\u636e\u3002\u8fd9\u4e9b\u6570\u636e\u5305\u62ec\uff1a \u5e8f\u5217\u6570\u636e\uff08\u4f8b\u5982\uff0cInterPro\u57df\u9884\u6d4b\uff09\uff0c \u5173\u7cfb\u6570\u636e\uff08\u5373\u540c\u7ebf\u7ed3\u679c\u548c\u4ee3\u8c22\u7f51\u7edc\u9884\u6d4b\uff09\uff0c \u5b9e\u9a8c\u6570\u636e\uff08\u7ed9\u7c7b\u76f8\u5173\u5b9e\u9a8c\uff09\uff0c \u6b64\u5916\uff0c MicroScope \u63d0\u4f9b\u4e86\u8bb8\u591a\u6709\u7528\u7684\u6570\u636e\u63a2\u7d22\u529f\u80fd\uff0c\u4f8b\u5982\u5141\u8bb8\u7528\u6237\u6267\u884c\uff08\u590d\u6742\uff09\u67e5\u8be2\uff0c\u6bd4\u8f83\u57fa\u56e0\u7ec4\u7814\u7a76\u548c\u4ee3\u8c22\u5206\u6790\u3002\u5b83\u8fd8\u63d0\u4f9b\u4e86\u6bcf\u4e2a\u57fa\u56e0\u7ec4\u6574\u4f53\u7edf\u8ba1\u6570\u636e\u548c\u4fe1\u606f\u7684\u6458\u8981\u89c6\u56fe\u3002\u6700\u540e\uff0c MicroScope \u53ef\u4ee5\u7528\u4f5c\uff1a \u793e\u533a\u8d44\u6e90\uff0c\u7528\u4e8e\u5bf9\u516c\u4f17\u53ef\u83b7\u5f97\u7684\u57fa\u56e0\u7ec4\u8fdb\u884c\u6bd4\u8f83\u5206\u6790\u548c\u6ce8\u91ca \u79c1\u6709\u8d44\u6e90\uff0c\u56e0\u4e3a\u79c1\u6709\u9879\u76ee\u7684\u8bbf\u95ee\u6743\u9650\u53ef\u4ee5\u9650\u5236\u4e3a\u9879\u76ee\u8d1f\u8d23\u4eba\u5b9a\u4e49\u7684\u4e00\u7ec4\u6709\u9650\u7684\u6ce8\u91ca\u8005\u3002 \u53c2\u8003\u8d44\u6599 \u00b6 MicroScope \u8bf4\u660e\u6587\u6863","title":"MicroScope"},{"location":"book/C09_Analysis-Platform/10_microscope/#microscope","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u80cc\u666f\u7b80\u4ecb LABGeM \u751f\u7269\u4fe1\u606f\u5b66\u56e2\u961f\u4f4d\u4e8e Genoscope \uff08\u6cd5\u56fd\u56fd\u5bb6\u6d4b\u5e8f\u4e2d\u5fc3\uff09\uff0c\u5f00\u53d1\u4e86 MicroScope \uff0c\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e\u7f51\u7edc\u7684\u5fae\u751f\u7269\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5206\u6790\u548c\u624b\u52a8\u529f\u80fd\u6ce8\u91ca\u5e73\u53f0\u3002 MicroScope \u91c7\u7528\u5173\u7cfb\u6570\u636e\u5e93\u6a21\u5f0f\uff08PkGDB\uff09\u5b58\u50a8\u8bed\u6cd5\u548c\u529f\u80fd\u6ce8\u91ca\u7ba1\u9053\u7684\u7ed3\u679c\u4ee5\u53ca\u7279\u5b9a\u57fa\u56e0\u7ec4\u7684\u4ee3\u8c22\u5206\u6790\uff0c\u5e76\u5efa\u7acbPkGDB\u4e0e\u4ee3\u8c22\u9014\u5f84\u6570\u636e\u5e93\uff08MicroCyc\uff09\u7684\u5173\u8054\u3002 MicroScope \u91c7\u7528Web\u754c\u9762\uff08MaGe\uff09\u7528\u4e8e\u5e2e\u52a9\u8bc4\u4f30\u7ed9\u5b9a\u57fa\u56e0\u7ec4\u6700\u4f73\u6ce8\u91ca\u6240\u9700\u7684\u6240\u6709\u53ef\u7528\u6570\u636e\u3002\u8fd9\u4e9b\u6570\u636e\u5305\u62ec\uff1a \u5e8f\u5217\u6570\u636e\uff08\u4f8b\u5982\uff0cInterPro\u57df\u9884\u6d4b\uff09\uff0c \u5173\u7cfb\u6570\u636e\uff08\u5373\u540c\u7ebf\u7ed3\u679c\u548c\u4ee3\u8c22\u7f51\u7edc\u9884\u6d4b\uff09\uff0c \u5b9e\u9a8c\u6570\u636e\uff08\u7ed9\u7c7b\u76f8\u5173\u5b9e\u9a8c\uff09\uff0c \u6b64\u5916\uff0c MicroScope \u63d0\u4f9b\u4e86\u8bb8\u591a\u6709\u7528\u7684\u6570\u636e\u63a2\u7d22\u529f\u80fd\uff0c\u4f8b\u5982\u5141\u8bb8\u7528\u6237\u6267\u884c\uff08\u590d\u6742\uff09\u67e5\u8be2\uff0c\u6bd4\u8f83\u57fa\u56e0\u7ec4\u7814\u7a76\u548c\u4ee3\u8c22\u5206\u6790\u3002\u5b83\u8fd8\u63d0\u4f9b\u4e86\u6bcf\u4e2a\u57fa\u56e0\u7ec4\u6574\u4f53\u7edf\u8ba1\u6570\u636e\u548c\u4fe1\u606f\u7684\u6458\u8981\u89c6\u56fe\u3002\u6700\u540e\uff0c MicroScope \u53ef\u4ee5\u7528\u4f5c\uff1a \u793e\u533a\u8d44\u6e90\uff0c\u7528\u4e8e\u5bf9\u516c\u4f17\u53ef\u83b7\u5f97\u7684\u57fa\u56e0\u7ec4\u8fdb\u884c\u6bd4\u8f83\u5206\u6790\u548c\u6ce8\u91ca \u79c1\u6709\u8d44\u6e90\uff0c\u56e0\u4e3a\u79c1\u6709\u9879\u76ee\u7684\u8bbf\u95ee\u6743\u9650\u53ef\u4ee5\u9650\u5236\u4e3a\u9879\u76ee\u8d1f\u8d23\u4eba\u5b9a\u4e49\u7684\u4e00\u7ec4\u6709\u9650\u7684\u6ce8\u91ca\u8005\u3002","title":"MicroScope"},{"location":"book/C09_Analysis-Platform/10_microscope/#_1","text":"MicroScope \u8bf4\u660e\u6587\u6863","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C10_Recombination-and-Population-Structure/","text":"","title":"Index"},{"location":"book/C10_Recombination-and-Population-Structure/01_virus-recombination/","text":"Virus Recombination Analysis \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5e38\u89c1\u7684\u75c5\u6bd2\u91cd\u7ec4\u5206\u6790\u8f6f\u4ef6 \u00b6 RDP Pros: Alread a compilation of detection algorithms for verification of analysis. Free and easy to install. Cons: I can only get Manual methods to work on my Windows 7 machine specifically Bootscan, MaxChi, and 3Seq. Also poor interface. SimPlot: http://sray.med.som.jhmi.edu/SCRoftw...ot/#disclaimer Pros: Simple interface easy to use and visualize data. Implements algorithms Simplot, Bootscan, and FindSites. Cons: Simplot More useful for evolutionarily closely related regions. Manual grouping of sequences in for analysis needs to be fixed. Can't seem to change window size or step size in Bootscan algorithm. Algorithms Bootscan http://www.ncbi.nlm.nih.gov/pubmed/15665649 Pros: Works well with divergent sequences, very visual representation. Not only shows possible recombination but also can show you divergent regions in a proteins primary structure. Cons: Not really sure how to best optimize parameters. Specifically for the more divergent sequences. MaxChi http://pubmlst.org/software/analysis...red_test.shtml Pros: Easy to understand and optimize, visual representation Cons: Seems like there is a higher false psotive rate when working with more divergent sequences 3Seq http://bima.ws/3seq/ Pros: Looks specifically at parental and recombinant sequences Cons: Basically have no idea how this program works or what I should be looking for. Simplot http://sray.med.som.jhmi.edu/SCRoftw...lot/#geography Pros:Visual representation Cons: Only works with highly similar sequences. bratNextgen http://www.helsinki.fi/bsg/software/BRAT-NextGen/ pros: highly cited, for microorganism cons: need to instrall MCR first, encountered a problem, I've been fixing it... not successful yes.. OmegaMap http://www.danielwilson.me.uk/omegaMap.html TOPALi v.2 ( http://www.topali.org/ ). http://bioinf.man.ac.uk/robertson/recombination/programs.shtml","title":"01. \u75c5\u6bd2\u91cd\u7ec4"},{"location":"book/C10_Recombination-and-Population-Structure/01_virus-recombination/#virus-recombination-analysis","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Virus Recombination Analysis"},{"location":"book/C10_Recombination-and-Population-Structure/01_virus-recombination/#_1","text":"RDP Pros: Alread a compilation of detection algorithms for verification of analysis. Free and easy to install. Cons: I can only get Manual methods to work on my Windows 7 machine specifically Bootscan, MaxChi, and 3Seq. Also poor interface. SimPlot: http://sray.med.som.jhmi.edu/SCRoftw...ot/#disclaimer Pros: Simple interface easy to use and visualize data. Implements algorithms Simplot, Bootscan, and FindSites. Cons: Simplot More useful for evolutionarily closely related regions. Manual grouping of sequences in for analysis needs to be fixed. Can't seem to change window size or step size in Bootscan algorithm. Algorithms Bootscan http://www.ncbi.nlm.nih.gov/pubmed/15665649 Pros: Works well with divergent sequences, very visual representation. Not only shows possible recombination but also can show you divergent regions in a proteins primary structure. Cons: Not really sure how to best optimize parameters. Specifically for the more divergent sequences. MaxChi http://pubmlst.org/software/analysis...red_test.shtml Pros: Easy to understand and optimize, visual representation Cons: Seems like there is a higher false psotive rate when working with more divergent sequences 3Seq http://bima.ws/3seq/ Pros: Looks specifically at parental and recombinant sequences Cons: Basically have no idea how this program works or what I should be looking for. Simplot http://sray.med.som.jhmi.edu/SCRoftw...lot/#geography Pros:Visual representation Cons: Only works with highly similar sequences. bratNextgen http://www.helsinki.fi/bsg/software/BRAT-NextGen/ pros: highly cited, for microorganism cons: need to instrall MCR first, encountered a problem, I've been fixing it... not successful yes.. OmegaMap http://www.danielwilson.me.uk/omegaMap.html TOPALi v.2 ( http://www.topali.org/ ). http://bioinf.man.ac.uk/robertson/recombination/programs.shtml","title":"\u5e38\u89c1\u7684\u75c5\u6bd2\u91cd\u7ec4\u5206\u6790\u8f6f\u4ef6"},{"location":"book/C10_Recombination-and-Population-Structure/02_gubbins/","text":"Gubbins \u5206\u6790 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5 \u00b6 Ubuntu\u7cfb\u7edf\u7ea7\u5b89\u88c5\u7ba1\u7406 # Ubuntu\u7cfb\u7edf\u81ea\u5e26gubbins $ sudo apt install gubbins # \u53d1\u884c\u7248\u7248\u672c\u51bb\u7ed3\u57281.x\u4e0a\uff0c\u5982\u679c\u8981\u4f7f\u75282.x\uff0c\u6bd4\u5982\u4e0d\u60f3\u7528fastml\u7684\u53ef\u4ee5\u4ece\u6e90\u7801\u7f16\u8bd1 $ sudo apt install libtool python3-setuptools python3-dev $ git clone https://github.com/sanger-pathogens/gubbins $ cd gubbins $ ./autoreconf -i $ ./configure $ make && sudo make install $ cd python && sudo python3 setup.py install \u4f7f\u7528 conda \u5b89\u88c5\u5230\u865a\u62df\u73af\u5883\u4e2d $ conda create -n gubbins $ conda activate gubbins ( gubbins ) $ conda install gubbins = 2 .4.1 \u4f7f\u7528 \u00b6 1. \u521b\u5efa fasta \u683c\u5f0f\u7684\u57fa\u56e0\u7ec4\u6bd4\u5bf9\u6587\u4ef6 \u00b6 Reference \u00b6","title":"02. Gubbins \u5206\u6790"},{"location":"book/C10_Recombination-and-Population-Structure/02_gubbins/#gubbins","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Gubbins \u5206\u6790"},{"location":"book/C10_Recombination-and-Population-Structure/02_gubbins/#_1","text":"Ubuntu\u7cfb\u7edf\u7ea7\u5b89\u88c5\u7ba1\u7406 # Ubuntu\u7cfb\u7edf\u81ea\u5e26gubbins $ sudo apt install gubbins # \u53d1\u884c\u7248\u7248\u672c\u51bb\u7ed3\u57281.x\u4e0a\uff0c\u5982\u679c\u8981\u4f7f\u75282.x\uff0c\u6bd4\u5982\u4e0d\u60f3\u7528fastml\u7684\u53ef\u4ee5\u4ece\u6e90\u7801\u7f16\u8bd1 $ sudo apt install libtool python3-setuptools python3-dev $ git clone https://github.com/sanger-pathogens/gubbins $ cd gubbins $ ./autoreconf -i $ ./configure $ make && sudo make install $ cd python && sudo python3 setup.py install \u4f7f\u7528 conda \u5b89\u88c5\u5230\u865a\u62df\u73af\u5883\u4e2d $ conda create -n gubbins $ conda activate gubbins ( gubbins ) $ conda install gubbins = 2 .4.1","title":"\u5b89\u88c5"},{"location":"book/C10_Recombination-and-Population-Structure/02_gubbins/#_2","text":"","title":"\u4f7f\u7528"},{"location":"book/C10_Recombination-and-Population-Structure/02_gubbins/#1-fasta","text":"","title":"1. \u521b\u5efa fasta \u683c\u5f0f\u7684\u57fa\u56e0\u7ec4\u6bd4\u5bf9\u6587\u4ef6"},{"location":"book/C10_Recombination-and-Population-Structure/02_gubbins/#reference","text":"","title":"Reference"},{"location":"book/C10_Recombination-and-Population-Structure/03_baps/","text":"Bayesian Analysis Pipeline Software \u00b6","title":"03. BAPS"},{"location":"book/C10_Recombination-and-Population-Structure/03_baps/#bayesian-analysis-pipeline-software","text":"","title":"Bayesian Analysis Pipeline Software"},{"location":"book/C11_Insilico-Scanning/","text":"","title":"Index"},{"location":"book/C11_Insilico-Scanning/01_srst2/","text":"SRST2 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb SRST2 \u91c7\u7528\u6bd4\u5bf9\u5230\u57fa\u56e0\u5e8f\u5217\u7684\u65b9\u6cd5\u6765\u63d0\u53d6\u5982MLST\u7b49\u57fa\u56e0\u4f4d\u70b9\u7684\u5e8f\u5217\uff0c\u8f93\u5165\u6570\u636e\u4e3a\u6d4b\u5e8freads\u3002\u5b83\u81ea\u5e26MLST\u3001\u8010\u836f\u57fa\u56e0\u7b49\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u83b7\u5f97\u626b\u63cf\u7ed3\u679c\u3002\u4e5f\u63d0\u4f9b\u4e86\u5de5\u5177\u4fbf\u4e8e\u81ea\u884c\u5efa\u7acb\u5982\u6bd2\u529b\u57fa\u56e0\u7b49\u7279\u5f02\u6027\u4e3a\u70b9\u5e8f\u5217\u3002 1. \u5b89\u88c5 \u00b6 # \u4f7f\u7528 conda \u5728\u865a\u62df\u73af\u5883 srst2 \u4e2d\u5b89\u88c5 SRST2 \u5b89\u88c5\u5305 $ conda create -n srst2 srst2 $ conda activate srst2 # srst2 \u662fpython\u5f00\u53d1\u7684\uff0c\u4e5f\u53ef\u4ee5\u7528pip\u5b89\u88c5 ( srst2 ) $ pip install srst2 2. \u4f7f\u7528 \u00b6 \u6ce8\u610f \u9700\u8981\u6ce8\u610f\u7684\u662ffastq\u6587\u4ef6\u540d\u79f0\u8981\u7b26\u5408Miseq\u547d\u540d\u89c4\u8303\u3002 # \u4e0b\u8f7d MLST \u6570\u636e\u5e93 # \u6570\u636e\u5e93\u4f1a\u4e0b\u8f7d\u5230\u5f53\u524d\u76ee\u5f55 ( srst2 ) $ getmlst.py --species \"Vibrio parahaemolyticus\" # \u6839\u636e\u6d4b\u5e8freads\u626b\u63cf\u526f\u6eb6\u8840\u6027\u5f27\u83ccMLST\u578b\u522b ( srst2 ) $ srst2 --input_pe S1_1.fastq.gz S1_2.fastq.gz --output S1 \\ > --log --mlst_db Salmonella_enterica.fasta \\ > --mlst_definitions senterica.txt --mlst_delimiter _ Tip \u5bf9\u4e8e --mlst_delimiter \u7528\u4ec0\u4e48\u5206\u5272\u7b26\uff0c\u9700\u8981\u6839\u636e\u5177\u4f53\u6570\u636e\u5e93\u4f7f\u7528\u3002\u5927\u90e8\u5206pubmlst\u6570\u636e\u5e93\u7684\u57fa\u56e0\u5206\u914d\u53f7\u90fd\u662f\u7528'_'\uff0c\u5176\u4ed6\u7684\u4e00\u822c\u4f7f\u7528 '-'\u3002\u5177\u4f53\u4f7f\u7528\u54ea\u4e2a\u53c2\u89c1 --mlst_db \u6570\u636e\u5e93\u6587\u4ef6\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\u5c31\u662f Salmonella_enterica.fasta \u6587\u4ef6\u7684\u5e8f\u5217\u540d\u79f0\uff0c\u5982\u679c\u662f\u4f8b\u5982 >abc_1\uff0c\u90a3\u4e48\u5c31\u662f\u4e0b\u5212\u7ebf\u3002\u5982\u679c\u662f >abc-1\uff0c\u90a3\u4e48\u5c31\u662f\u7834\u6298\u53f7\u3002 MLST\u626b\u63cf\u7ed3\u679c\u5b57\u6bb5\uff1a Sample\uff1a\u626b\u63cf\u6570\u636e\u7684\u6837\u54c1\u540d\u79f0\uff0c\u6bd4\u5982S1\uff0c\u6216\u8005SRR1002045\u7b49 ST\uff1a\u626b\u63cf\u6bd4\u5bf9\u6570\u636e\u5e93\u540e\u83b7\u5f97ST\u578b\u522b 7\u4e2a\u5177\u4f53\u7ba1\u5bb6\u57fa\u56e0\uff1a\u626b\u63cf\u6bcf\u4e2a\u57fa\u56e0allele\u5206\u914d\u7684\u578b\u522b mismatches\uff1a7\u4e2a\u7ba1\u5bb6\u57fa\u56e0\u4e2d\u662f\u5426\u6709\u4e0d\u5339\u914d\u7684\u78b1\u57fa uncertainty\uff1a\u7531\u4e8e\u5e8f\u5217\u6df1\u5ea6\u6216\u8005\u8986\u76d6\u5ea6\u4e0d\u591f\u9020\u6210\u7684\u4e0d\u786e\u5b9a\u60c5\u51b5 depth\uff1a\u57fa\u56e0\u6bd4\u5bf9\u7684\u8986\u76d6\u5ea6 maxMAF\uff1a\u626b\u63cf\u76847\u4e2a\u7ba1\u5bb6\u57fa\u56e0\u4e2d\u6700\u9ad8\u7684minor\u7b49\u4f4d\u57fa\u56e0\u9891\u7387 \u6839\u636e\u6d4b\u5e8freads\u83b7\u5f97\u8010\u836f\u57fa\u56e0\uff0cconda \u7248\u672c\u7684srst2\u6ca1\u6709\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\uff0c\u9700\u8981\u81ea\u884c\u4e0b\u8f7d\u3002srst2 \u81ea\u5e26\u7684\u6570\u636e\u5e93\uff0c\u53c2\u89c1: https://github.com/katholt/srst2/tree/master/data ( srst2 ) $ srst2 --input_pe S1_1.fastq.gz S1_2.fastq.gz --gene_db ARGannot_r3.fasta --output S1_result \u626b\u63cf\u7ed3\u679c\u76f4\u63a5\u4ee5tsv\u683c\u5f0f\u6807\u6ce8\u626b\u63cf\u83b7\u5f97\u7684\u76ee\u6807\u57fa\u56e0\u540d\u79f0 \u81ea\u5b9a\u4e49\u57fa\u56e0\u6570\u636e\u5e93 \u626b\u63cf\u83b7\u5f97\u57fa\u56e0\u7684\u6709\u65e0\uff0c\u6784\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93 # SRST2\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5e8f\u5217\uff0c\u4f5c\u4e3a\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u5bf9 # conda \u7248\u672c\u7684srst2\u6ca1\u6709\u81ea\u5e26\u8f6c\u6362\u5de5\u5177\uff0c\u9700\u8981\u81ea\u884c\u4e0b\u8f7d\uff0c\u5177\u4f53\u53c2\u89c1\uff1a # https://github.com/katholt/srst2/tree/master/scripts ( srst2 ) $ conda install cdhit ( srst2 ) $ cdhit-est -i rawseqs.fasta -o rawseqs_cdhit90 -d 0 > rawseqs_cdhit90.stdout ( srst2 ) $ cdhit_to_csv.py --cluster_file rawseqs_cdhit90.clstr --infasta raw_sequences.fasta --outfile rawseqs_clustered.csv # \u751f\u6210\u7684 seqs_clustered.fasta \u53ef\u4ee5\u4f5c\u4e3a --gene_db \u6570\u636e\u5e93\u6587\u4ef6\u8fdb\u884c\u626b\u63cf ( srst2 ) $ csv_to_gene_db.py -t rawseqs_clustered.csv -o seqs_clustered.fasta -f rawseqs.fasta -c 4 \u626b\u63cf\u57fa\u56e0\u7684\u4e0d\u540c\u578b\u522b\uff0c\u6784\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93 # \u57fa\u56e0\u578b\u522b\u6570\u636e\u5e93\u7684\u5e8f\u5217\u8981\u7528\u8fd9\u79cd\u683c\u5f0f\u547d\u540d\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003\u8010\u836f\u6570\u636e\u5e93\u7684\u5e8f\u5217\u5185\u5bb9 > [ clusterUniqueIdentifier ] __ [ clusterSymbol ] __ [ alleleSymbol ] __ [ alleleUniqueIdentifier ] 3. \u5206\u6790\u793a\u4f8b \u00b6 3.1 \u83b7\u5f97\u5206\u6790\u6570\u636e \u00b6 \u4e0b\u8f7d Bacillus anthracis SRA \u6570\u636e\u5e93miseq\u6d4b\u5e8f\u5e73\u53f0\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u3002 # edirect \u5de5\u5177\u751f\u6210 sra \u7684 runinfo \u4fe1\u606f\u5217\u8868 # \u8fc7\u6ee4\u4e86\u6d4b\u5e8f\u6570\u636e\u8fc7\u5c0f\u548c\u5e73\u5747\u8bfb\u957f\u8fc7\u5c0f\u7684\u6570\u636e $ esearch -query '\"Bacillus anthracis\"[Organism] AND \\ > \"miseq\"[All Fields] AND (\"biomol dna\"[Properties] AND \\ > \"strategy wgs\"[Properties])' -db sra | efetch -format runinfo \\ > -db sra | awk '/^[SDE]RR/' | awk -F ',' '{if($8>150 && $16==\"PAIRED\" && $20 ==\"Illumina MiSeq\") print $1}' | prefetch -v 3.2 \u751f\u6210fastq\u6570\u636e \u00b6 \u5c06 SRA \u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u6210 fastq \u683c\u5f0f\u3002 # \u6279\u91cf\u8f6c\u5316\u6210 fastq.gz \u683c\u5f0f\u6587\u4ef6 $ parallel \"fastq-dump --split-files --gzip --outdir fastq\" ::: *.sra # \u786e\u8ba4\u6570\u636e\u5747\u662f paired end \u6d4b\u5e8f\uff0c\u5982\u679c\u6709 single end\uff0c\u5c06\u5176\u5206\u79bb\u5230\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d $ ls -l *.fastq.gz | awk -F '_' '{print $1}' | awk '{print $9}' | uniq -u # \u8f93\u51fa\u7684\u7f16\u53f7\u5373\u4e3a\u975e paired end \u6d4b\u5e8f\u6570\u636e\u3002 # bioawk \u7edf\u8ba1GC\u542b\u91cf\u5206\u5e03 $ parallel \"bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc(\\$seq);q+=meanqual(\\$seq)}END{print \\$name,n/NR,q/NR}' \\ > >> gc_result.txt\" ::: *.fastq.gz 3.3 \u626b\u63cf\u6570\u636e \u00b6 srst2 \u5bf9\u6570\u636e\u8fdb\u884c\u626b\u63cf\uff0c\u83b7\u5f97MLST\u578b\u522b\uff0c\u6bd2\u529b\u57fa\u56e0 # \u51c6\u5907\u76ee\u5f55\u7ed3\u6784 $ mkdir -p mlst vfdb ardb result # \u51c6\u5907 MLST \u6570\u636e\u5e93\uff0c\u5c06\u4e0b\u8f7d\u7684\u6587\u4ef6\u653e\u5165 mlst \u76ee\u5f55\u5185 # \u7531\u4e8e B. anthracis \u6ca1\u6709\u516c\u5171 MLST \u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u7528\u8fd1\u6e90\u7684 B. cereus MLST \u6570\u636e\u5e93 # \u6570\u636e\u6765\u5206\u6790 B. anthracis $ getmlst.py --species \"Bacillus cereus\" # \u51c6\u5907\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u6587\u4ef6\uff0c\u5c06\u6587\u4ef6\u653e\u5165 vfdb \u76ee\u5f55\u4e2d $ cd vfdb $ wget http://www.mgc.ac.cn/VFs/Down/VFDB_setB_nt.fas.gz $ gunzip VFDB_setB_nt.fas.gz $ python path/srst2/database_clustering/VFDBgenus.py --inflie VFDB_setB_nt.fas --genus Bacillus $ cd-hit -i Bacillus.fsa -o Bacillus_cdhit90 -c 0 .9 > Bacillus_cdhit90.stdout $ python path/srst2/database_clustering/VFDB_cdhit_to_csv.py --cluster_file Bacillus_cdhit90.clstr \\ > --infile Bacillus.fsa --outfile Bacillus_cdhit90.csv $ python path/srst2/database_clustering/csv_to_gene_db.py -t Bacillus_cdhit90.csv \\ > -o Bacillus_VF_clustered.fasta -s 5 # \u6279\u91cf\u5904\u7406 $ for i in $( ls *.fastq.gz | awk -F '_' '{print $1}' | uniq ) ; do srst2 \\ > --input_pe ${ i } _1.fastq.gz ${ i } _2.fastq.gz \\ > --mlst_db ../mlst/Bacillus_cereus.fasta \\ > --mlst_definitions ../mlst/bcereus.txt \\ > --mlst_delimiter _ \\ > --gene_db Bacillus_VF_clustered.fasta \\ > --log --threads 40 --output ../result ; \\ > done # \u8010\u836f\u57fa\u56e0\u5206\u6790 $ for i in $( ls *.fastq.gz | awk -F '_' '{print $1}' | uniq ) ; do srst2 \\ > --input_pe ${ i } _1.fastq.gz ${ i } _2.fastq.gz \\ > --log --output ../result \\ > --gene_db path/srst2/datab/ARGannot.r1.fasta ; \\ > done \u53c2\u8003\u8d44\u6599 \u00b6 srst2: https://github.com/katholt/srst2#gene-databases","title":"01. SRST2 \u77ed\u5e8f\u5217\u626b\u63cf\u5de5\u5177"},{"location":"book/C11_Insilico-Scanning/01_srst2/#srst2","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb SRST2 \u91c7\u7528\u6bd4\u5bf9\u5230\u57fa\u56e0\u5e8f\u5217\u7684\u65b9\u6cd5\u6765\u63d0\u53d6\u5982MLST\u7b49\u57fa\u56e0\u4f4d\u70b9\u7684\u5e8f\u5217\uff0c\u8f93\u5165\u6570\u636e\u4e3a\u6d4b\u5e8freads\u3002\u5b83\u81ea\u5e26MLST\u3001\u8010\u836f\u57fa\u56e0\u7b49\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u83b7\u5f97\u626b\u63cf\u7ed3\u679c\u3002\u4e5f\u63d0\u4f9b\u4e86\u5de5\u5177\u4fbf\u4e8e\u81ea\u884c\u5efa\u7acb\u5982\u6bd2\u529b\u57fa\u56e0\u7b49\u7279\u5f02\u6027\u4e3a\u70b9\u5e8f\u5217\u3002","title":"SRST2"},{"location":"book/C11_Insilico-Scanning/01_srst2/#1","text":"# \u4f7f\u7528 conda \u5728\u865a\u62df\u73af\u5883 srst2 \u4e2d\u5b89\u88c5 SRST2 \u5b89\u88c5\u5305 $ conda create -n srst2 srst2 $ conda activate srst2 # srst2 \u662fpython\u5f00\u53d1\u7684\uff0c\u4e5f\u53ef\u4ee5\u7528pip\u5b89\u88c5 ( srst2 ) $ pip install srst2","title":"1. \u5b89\u88c5"},{"location":"book/C11_Insilico-Scanning/01_srst2/#2","text":"\u6ce8\u610f \u9700\u8981\u6ce8\u610f\u7684\u662ffastq\u6587\u4ef6\u540d\u79f0\u8981\u7b26\u5408Miseq\u547d\u540d\u89c4\u8303\u3002 # \u4e0b\u8f7d MLST \u6570\u636e\u5e93 # \u6570\u636e\u5e93\u4f1a\u4e0b\u8f7d\u5230\u5f53\u524d\u76ee\u5f55 ( srst2 ) $ getmlst.py --species \"Vibrio parahaemolyticus\" # \u6839\u636e\u6d4b\u5e8freads\u626b\u63cf\u526f\u6eb6\u8840\u6027\u5f27\u83ccMLST\u578b\u522b ( srst2 ) $ srst2 --input_pe S1_1.fastq.gz S1_2.fastq.gz --output S1 \\ > --log --mlst_db Salmonella_enterica.fasta \\ > --mlst_definitions senterica.txt --mlst_delimiter _ Tip \u5bf9\u4e8e --mlst_delimiter \u7528\u4ec0\u4e48\u5206\u5272\u7b26\uff0c\u9700\u8981\u6839\u636e\u5177\u4f53\u6570\u636e\u5e93\u4f7f\u7528\u3002\u5927\u90e8\u5206pubmlst\u6570\u636e\u5e93\u7684\u57fa\u56e0\u5206\u914d\u53f7\u90fd\u662f\u7528'_'\uff0c\u5176\u4ed6\u7684\u4e00\u822c\u4f7f\u7528 '-'\u3002\u5177\u4f53\u4f7f\u7528\u54ea\u4e2a\u53c2\u89c1 --mlst_db \u6570\u636e\u5e93\u6587\u4ef6\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\u5c31\u662f Salmonella_enterica.fasta \u6587\u4ef6\u7684\u5e8f\u5217\u540d\u79f0\uff0c\u5982\u679c\u662f\u4f8b\u5982 >abc_1\uff0c\u90a3\u4e48\u5c31\u662f\u4e0b\u5212\u7ebf\u3002\u5982\u679c\u662f >abc-1\uff0c\u90a3\u4e48\u5c31\u662f\u7834\u6298\u53f7\u3002 MLST\u626b\u63cf\u7ed3\u679c\u5b57\u6bb5\uff1a Sample\uff1a\u626b\u63cf\u6570\u636e\u7684\u6837\u54c1\u540d\u79f0\uff0c\u6bd4\u5982S1\uff0c\u6216\u8005SRR1002045\u7b49 ST\uff1a\u626b\u63cf\u6bd4\u5bf9\u6570\u636e\u5e93\u540e\u83b7\u5f97ST\u578b\u522b 7\u4e2a\u5177\u4f53\u7ba1\u5bb6\u57fa\u56e0\uff1a\u626b\u63cf\u6bcf\u4e2a\u57fa\u56e0allele\u5206\u914d\u7684\u578b\u522b mismatches\uff1a7\u4e2a\u7ba1\u5bb6\u57fa\u56e0\u4e2d\u662f\u5426\u6709\u4e0d\u5339\u914d\u7684\u78b1\u57fa uncertainty\uff1a\u7531\u4e8e\u5e8f\u5217\u6df1\u5ea6\u6216\u8005\u8986\u76d6\u5ea6\u4e0d\u591f\u9020\u6210\u7684\u4e0d\u786e\u5b9a\u60c5\u51b5 depth\uff1a\u57fa\u56e0\u6bd4\u5bf9\u7684\u8986\u76d6\u5ea6 maxMAF\uff1a\u626b\u63cf\u76847\u4e2a\u7ba1\u5bb6\u57fa\u56e0\u4e2d\u6700\u9ad8\u7684minor\u7b49\u4f4d\u57fa\u56e0\u9891\u7387 \u6839\u636e\u6d4b\u5e8freads\u83b7\u5f97\u8010\u836f\u57fa\u56e0\uff0cconda \u7248\u672c\u7684srst2\u6ca1\u6709\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\uff0c\u9700\u8981\u81ea\u884c\u4e0b\u8f7d\u3002srst2 \u81ea\u5e26\u7684\u6570\u636e\u5e93\uff0c\u53c2\u89c1: https://github.com/katholt/srst2/tree/master/data ( srst2 ) $ srst2 --input_pe S1_1.fastq.gz S1_2.fastq.gz --gene_db ARGannot_r3.fasta --output S1_result \u626b\u63cf\u7ed3\u679c\u76f4\u63a5\u4ee5tsv\u683c\u5f0f\u6807\u6ce8\u626b\u63cf\u83b7\u5f97\u7684\u76ee\u6807\u57fa\u56e0\u540d\u79f0 \u81ea\u5b9a\u4e49\u57fa\u56e0\u6570\u636e\u5e93 \u626b\u63cf\u83b7\u5f97\u57fa\u56e0\u7684\u6709\u65e0\uff0c\u6784\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93 # SRST2\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5e8f\u5217\uff0c\u4f5c\u4e3a\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u5bf9 # conda \u7248\u672c\u7684srst2\u6ca1\u6709\u81ea\u5e26\u8f6c\u6362\u5de5\u5177\uff0c\u9700\u8981\u81ea\u884c\u4e0b\u8f7d\uff0c\u5177\u4f53\u53c2\u89c1\uff1a # https://github.com/katholt/srst2/tree/master/scripts ( srst2 ) $ conda install cdhit ( srst2 ) $ cdhit-est -i rawseqs.fasta -o rawseqs_cdhit90 -d 0 > rawseqs_cdhit90.stdout ( srst2 ) $ cdhit_to_csv.py --cluster_file rawseqs_cdhit90.clstr --infasta raw_sequences.fasta --outfile rawseqs_clustered.csv # \u751f\u6210\u7684 seqs_clustered.fasta \u53ef\u4ee5\u4f5c\u4e3a --gene_db \u6570\u636e\u5e93\u6587\u4ef6\u8fdb\u884c\u626b\u63cf ( srst2 ) $ csv_to_gene_db.py -t rawseqs_clustered.csv -o seqs_clustered.fasta -f rawseqs.fasta -c 4 \u626b\u63cf\u57fa\u56e0\u7684\u4e0d\u540c\u578b\u522b\uff0c\u6784\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93 # \u57fa\u56e0\u578b\u522b\u6570\u636e\u5e93\u7684\u5e8f\u5217\u8981\u7528\u8fd9\u79cd\u683c\u5f0f\u547d\u540d\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003\u8010\u836f\u6570\u636e\u5e93\u7684\u5e8f\u5217\u5185\u5bb9 > [ clusterUniqueIdentifier ] __ [ clusterSymbol ] __ [ alleleSymbol ] __ [ alleleUniqueIdentifier ]","title":"2. \u4f7f\u7528"},{"location":"book/C11_Insilico-Scanning/01_srst2/#3","text":"","title":"3. \u5206\u6790\u793a\u4f8b"},{"location":"book/C11_Insilico-Scanning/01_srst2/#31","text":"\u4e0b\u8f7d Bacillus anthracis SRA \u6570\u636e\u5e93miseq\u6d4b\u5e8f\u5e73\u53f0\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u3002 # edirect \u5de5\u5177\u751f\u6210 sra \u7684 runinfo \u4fe1\u606f\u5217\u8868 # \u8fc7\u6ee4\u4e86\u6d4b\u5e8f\u6570\u636e\u8fc7\u5c0f\u548c\u5e73\u5747\u8bfb\u957f\u8fc7\u5c0f\u7684\u6570\u636e $ esearch -query '\"Bacillus anthracis\"[Organism] AND \\ > \"miseq\"[All Fields] AND (\"biomol dna\"[Properties] AND \\ > \"strategy wgs\"[Properties])' -db sra | efetch -format runinfo \\ > -db sra | awk '/^[SDE]RR/' | awk -F ',' '{if($8>150 && $16==\"PAIRED\" && $20 ==\"Illumina MiSeq\") print $1}' | prefetch -v","title":"3.1 \u83b7\u5f97\u5206\u6790\u6570\u636e"},{"location":"book/C11_Insilico-Scanning/01_srst2/#32-fastq","text":"\u5c06 SRA \u683c\u5f0f\u7684\u6570\u636e\u8f6c\u6362\u6210 fastq \u683c\u5f0f\u3002 # \u6279\u91cf\u8f6c\u5316\u6210 fastq.gz \u683c\u5f0f\u6587\u4ef6 $ parallel \"fastq-dump --split-files --gzip --outdir fastq\" ::: *.sra # \u786e\u8ba4\u6570\u636e\u5747\u662f paired end \u6d4b\u5e8f\uff0c\u5982\u679c\u6709 single end\uff0c\u5c06\u5176\u5206\u79bb\u5230\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d $ ls -l *.fastq.gz | awk -F '_' '{print $1}' | awk '{print $9}' | uniq -u # \u8f93\u51fa\u7684\u7f16\u53f7\u5373\u4e3a\u975e paired end \u6d4b\u5e8f\u6570\u636e\u3002 # bioawk \u7edf\u8ba1GC\u542b\u91cf\u5206\u5e03 $ parallel \"bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc(\\$seq);q+=meanqual(\\$seq)}END{print \\$name,n/NR,q/NR}' \\ > >> gc_result.txt\" ::: *.fastq.gz","title":"3.2 \u751f\u6210fastq\u6570\u636e"},{"location":"book/C11_Insilico-Scanning/01_srst2/#33","text":"srst2 \u5bf9\u6570\u636e\u8fdb\u884c\u626b\u63cf\uff0c\u83b7\u5f97MLST\u578b\u522b\uff0c\u6bd2\u529b\u57fa\u56e0 # \u51c6\u5907\u76ee\u5f55\u7ed3\u6784 $ mkdir -p mlst vfdb ardb result # \u51c6\u5907 MLST \u6570\u636e\u5e93\uff0c\u5c06\u4e0b\u8f7d\u7684\u6587\u4ef6\u653e\u5165 mlst \u76ee\u5f55\u5185 # \u7531\u4e8e B. anthracis \u6ca1\u6709\u516c\u5171 MLST \u6570\u636e\u5e93\uff0c\u8fd9\u91cc\u7528\u8fd1\u6e90\u7684 B. cereus MLST \u6570\u636e\u5e93 # \u6570\u636e\u6765\u5206\u6790 B. anthracis $ getmlst.py --species \"Bacillus cereus\" # \u51c6\u5907\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u6587\u4ef6\uff0c\u5c06\u6587\u4ef6\u653e\u5165 vfdb \u76ee\u5f55\u4e2d $ cd vfdb $ wget http://www.mgc.ac.cn/VFs/Down/VFDB_setB_nt.fas.gz $ gunzip VFDB_setB_nt.fas.gz $ python path/srst2/database_clustering/VFDBgenus.py --inflie VFDB_setB_nt.fas --genus Bacillus $ cd-hit -i Bacillus.fsa -o Bacillus_cdhit90 -c 0 .9 > Bacillus_cdhit90.stdout $ python path/srst2/database_clustering/VFDB_cdhit_to_csv.py --cluster_file Bacillus_cdhit90.clstr \\ > --infile Bacillus.fsa --outfile Bacillus_cdhit90.csv $ python path/srst2/database_clustering/csv_to_gene_db.py -t Bacillus_cdhit90.csv \\ > -o Bacillus_VF_clustered.fasta -s 5 # \u6279\u91cf\u5904\u7406 $ for i in $( ls *.fastq.gz | awk -F '_' '{print $1}' | uniq ) ; do srst2 \\ > --input_pe ${ i } _1.fastq.gz ${ i } _2.fastq.gz \\ > --mlst_db ../mlst/Bacillus_cereus.fasta \\ > --mlst_definitions ../mlst/bcereus.txt \\ > --mlst_delimiter _ \\ > --gene_db Bacillus_VF_clustered.fasta \\ > --log --threads 40 --output ../result ; \\ > done # \u8010\u836f\u57fa\u56e0\u5206\u6790 $ for i in $( ls *.fastq.gz | awk -F '_' '{print $1}' | uniq ) ; do srst2 \\ > --input_pe ${ i } _1.fastq.gz ${ i } _2.fastq.gz \\ > --log --output ../result \\ > --gene_db path/srst2/datab/ARGannot.r1.fasta ; \\ > done","title":"3.3 \u626b\u63cf\u6570\u636e"},{"location":"book/C11_Insilico-Scanning/01_srst2/#_1","text":"srst2: https://github.com/katholt/srst2#gene-databases","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C11_Insilico-Scanning/02_mlst/","text":"MLST \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u4f20\u7edf\u7684 MLST \u5206\u6790\u65b9\u6cd5\u91c7\u7528\u5bf9\u6837\u672c\u8fdb\u884c PCR \u6269\u589e\u540e\u8fdb\u884c Sanger \u6d4b\u5e8f\u3001\u62fc\u63a5\u3001\u6bd4\u5bf9\u540e\uff0c\u83b7\u5f97\u7b49\u4f4d\u57fa\u56e0\u5e8f\u5217\uff0c\u6839\u636e\u78b1\u57fa\u5dee\u5f02\u5206\u914d\u5e8f\u53f7\uff0c\u518d\u6839\u636e\u76f8\u5e94\u7684\u5e8f\u53f7\u7ec4\u5408\u786e\u5b9a ST \u578b\u5225\u3002\u5e38\u7528\u7684\u5de5\u5177\u6709bigsDB\uff0cBionumerics\u7b49\u3002 \u968f\u7740 NGS \u6280\u672f\u5e94\u7528\u4e0e\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6d4b\u5e8f\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u7ec6\u83cc\u57fa\u56e0\u7ec4\u88ab\u6d4b\u5e8f\u751f\u6210\u8349\u56fe\u3002\u51e0\u4e4e\u6240\u6709\u7684\u6570\u636e\u90fd\u53ef\u4ee5\u8986\u76d6 MLST \u6d89\u53ca\u7684\u7ba1\u5bb6\u57fa\u56e0\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u57fa\u56e0\u7ec4\u4e0a\u7ba1\u5bb6\u57fa\u56e0\u7684\u5e8f\u5217\u6765\u5206\u6790\u83b7\u5f97\u5176ST\u578b\u5225\u3002 MLST \u662f\u7531 @Torsten Seemann \u7528 perl \u5f00\u53d1\u7684\u5b9e\u73b0\u4ecefasta\u5e8f\u5217\u83b7\u53d6MLST\u578b\u5225\u7684\u5de5\u5177\u3002 1. \u5b89\u88c5 \u00b6 # mlst \u5de5\u5177\u5728 bioconda \u6709\u5b89\u88c5\u5305\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 conda \u5b89\u88c5 $ conda create -n mlst $ conda activate mlst ( mlst ) $ conda install mlst 2. \u4f7f\u7528 \u00b6 MLST \u652f\u6301 .fa , .fasta , .gb , .gbk , .fna \u4ee5\u53ca\u8fd9\u4e9b\u683c\u5f0f\u7684gz\u538b\u7f29\u5305\u683c\u5f0f\u7684\u6587\u4ef6\u3002\u4e0d\u52a0\u53c2\u6570\u53ef\u4ee5\u5bf9\u6240\u6709\u7269\u79cd\u6570\u636e\u5e93\u8fdb\u884c\u626b\u63cf\uff0c\u52a0\u4e0a\u53c2\u6570 --scheme \u53ef\u4ee5\u5bf9\u6307\u5b9a\u7269\u79cd\u8fdb\u884c\u626b\u63cf\u3002 # \u76f4\u63a5\u626b\u63cf fasta \u6570\u636e\uff0c\u8f6f\u4ef6\u4f1a\u5bf9\u5e8f\u5217\u4f4d\u70b9\u8fdb\u884c\u5224\u65ad\uff0c\u9009\u62e9\u5408\u9002\u7684\u7269\u79cd\u6570\u636e\u5e93 ( mlst ) $ mlst mygenome.fasta # \u652f\u6301 multiple fasta \u683c\u5f0f ( mlst ) $ mlst scaffolds.fasta # \u652f\u6301\u591a\u6587\u4ef6\u683c\u5f0f ( mlst ) $ mlst data/* # \u67e5\u770b\u53ef\u4ee5\u626b\u63cf\u7684\u7269\u79cd ( mlst ) $ mlst --list # \u4f7f\u7528 listera monocytogenes \u7269\u79cd\u6570\u636e\u5e93\u626b\u63cf ( mlst ) $ mlst --scheme lmonocytogenes data/* # \u5c06\u7ed3\u679c\u4fdd\u5b58 ( mlst ) $ mlst --scheme senterica fna/*.fna > mlst.result \u66f4\u65b0\u6570\u636e\u5e93\uff1aMLST\u6570\u636e\u5e93\u968f\u7740\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u800c\u4e0d\u65ad\u66f4\u65b0\uff0c\u4f7f\u7528bigsdb\u5efa\u7acb\u7684MLST\u6570\u636e\u5e93\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u66f4\u65b0allele\u5e8f\u5217\u548c\u83cc\u682a\u6570\u636e\u3002mlst\u5de5\u5177\u4e5f\u63d0\u4f9b\u4e86\u81ea\u52a8\u5316\u811a\u672c\u5de5\u5177\u66f4\u65b0\u6570\u636e\u5e93\u3002 # \u66f4\u65b0pubmlst\u6570\u636e\u5e93 ( mlst ) $ cd $CONDA_PREFIX /scripts ( mlst ) $ ./mlst-download_pub_mlst | bash ( mlst ) $ mv ../db/pubmlst ../db/pubmlst.old ( mlst ) $ mv pubmlst ../db # \u66f4\u65b0blast\u6570\u636e\u5e93 ( mlst ) $ ./mlst-make_blast_db 3. \u5e94\u7528\u4e3e\u4f8b \u00b6 \u5bf9 NCBI genome \u6570\u636e\u5e93\u4e2d bacillus cereus \u7684 Assembly \u8fdb\u884c\u626b\u63cf\u83b7\u53d6 MLST \u6570\u636e\u3002 # edirect \u6293\u53d6 FTP \u94fe\u63a5\uff0cawk\u8865\u5168\u4e0b\u8f7d\u8def\u5f84\uff0c\u7528 wget \u5de5\u5177\u6279\u91cf\u4e0b\u8f7d\uff08\u8bbe\u7f6e\u76f8\u5e94\u53c2\u6570\u907f\u514d\u8fdb\u5165\u4e0b\u8f7d\u5047\u6b7b\u72b6\u6001\uff09 $ esearch -db assembly -query \"Bacillus cereus[ORGN] AND latest[SB]\" | \\ > efetch -format docsum | \\ > xtract -pattern DocumentSummary -element FtpPath_RefSeq | \\ > awk -F \"/\" '{print $0\"/\"$NF\"_genomic.fna.gz\"}' | \\ > xargs wget --no-passive-ftp --limit-rate = 200k # mlst \u626b\u63cf ( mlst ) $ mlst --scheme bcereus *.fna.gz > ../bcereus-mlst-result.txt ( mlst ) $ cat ../bcereus-mlst-result.txt 4. \u5176\u4ed6 \u00b6 \u4e0eMLST\u5206\u6790\u7684\u76f8\u5173\u64cd\u4f5c # \u5bf9\u6c99\u95e8\u83cc\u67d0\u4e2a\u5e8f\u5217\u4f4d\u70b9\u8fdb\u884c\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u5e76\u6784\u5efa\u8fdb\u5316\u6811 ( mlst ) $ cd $CONDA_PREFI /db/pubmlst/senterica # \u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\uff0c\u5927\u90e8\u5206\u4f4d\u70b9\u7684\u5e8f\u5217\u957f\u5ea6\u4e00\u81f4\u7684\uff0c\u53ef\u4ee5\u7701\u7565\u6bd4\u5bf9\u8fd9\u4e00\u6b65\u3002 # \u4f46\u4e2a\u522b\u4f4d\u70b9\u5b58\u5728\u63d2\u5165\u4e0e\u7f3a\u5931\u78b1\u57fa\u7684\u9700\u8981\u6bd4\u5bf9\u540e\u6784\u5efa\u8fdb\u5316\u6811 $ mafft aroC.tfa > aroC.maf # \u6784\u5efa\u8fdb\u5316\u6811 $ raxmlHPC-PTHREADS-AVX2 -f a -x 12345 -p 12345 -m GTRGAMMA -#500 -s aroC.maf -n aroC -T 40 # \u5c06\u6240\u6709ST\u4f4d\u70b9\u5e8f\u5217\u8fde\u9501\u6784\u5efa\u8fdb\u5316\u6811 ( mlst ) $ cd $CONDA_PREFI /db/pubmlst/senterica $ awk -F '\\t' '{if(NR>1) \\ > system(\"seqkit grep -w 0 -p aroC_\"$2\" aroC.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p dnaN_\"$3\" dnaN.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p hemD_\"$4\" hemD.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p hisD_\"$5\" hisD.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p purE_\"$6\" purE.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p sucA_\"$7\" sucA.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p thrA_\"$8\" thrA.tfa | tail -1 >> ST_\"$1)}' \\ > senterica.txt # \u53bb\u9664\\n\uff0c\u6dfb\u52a0\u5e8f\u5217\u540d\u79f0 $ for i in ST_* ; do sed -i ':a;N;s/\\n//;ta' $i ; sed -i '1i\\>' $i '' $i ; done # \u5f62\u6210\u5355\u4e2afasta\u6587\u4ef6 $ for i in ST_* ; do cat $i >> ST.fna ; done # \u6784\u5efa\u8fdb\u5316\u6811 $ mafft ST.fna > ST.maf $ raxmlHPC-PTHREADS-AVX2 -f a -x 12345 -p 12345 -m GTRGAMMA -#1000 -s ST.maf -n ST -T 40 # \u6240\u6709\u4f4d\u70b9\u7684dN/dS\u5206\u6790 # \u57fa\u4e8eMLST\u4f4d\u70b9\u7684\u79cd\u7fa4\u7ed3\u6784\u5206\u6790","title":"02. MLST \u626b\u63cf\u5de5\u5177"},{"location":"book/C11_Insilico-Scanning/02_mlst/#mlst","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u4f20\u7edf\u7684 MLST \u5206\u6790\u65b9\u6cd5\u91c7\u7528\u5bf9\u6837\u672c\u8fdb\u884c PCR \u6269\u589e\u540e\u8fdb\u884c Sanger \u6d4b\u5e8f\u3001\u62fc\u63a5\u3001\u6bd4\u5bf9\u540e\uff0c\u83b7\u5f97\u7b49\u4f4d\u57fa\u56e0\u5e8f\u5217\uff0c\u6839\u636e\u78b1\u57fa\u5dee\u5f02\u5206\u914d\u5e8f\u53f7\uff0c\u518d\u6839\u636e\u76f8\u5e94\u7684\u5e8f\u53f7\u7ec4\u5408\u786e\u5b9a ST \u578b\u5225\u3002\u5e38\u7528\u7684\u5de5\u5177\u6709bigsDB\uff0cBionumerics\u7b49\u3002 \u968f\u7740 NGS \u6280\u672f\u5e94\u7528\u4e0e\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6d4b\u5e8f\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u7ec6\u83cc\u57fa\u56e0\u7ec4\u88ab\u6d4b\u5e8f\u751f\u6210\u8349\u56fe\u3002\u51e0\u4e4e\u6240\u6709\u7684\u6570\u636e\u90fd\u53ef\u4ee5\u8986\u76d6 MLST \u6d89\u53ca\u7684\u7ba1\u5bb6\u57fa\u56e0\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u57fa\u56e0\u7ec4\u4e0a\u7ba1\u5bb6\u57fa\u56e0\u7684\u5e8f\u5217\u6765\u5206\u6790\u83b7\u5f97\u5176ST\u578b\u5225\u3002 MLST \u662f\u7531 @Torsten Seemann \u7528 perl \u5f00\u53d1\u7684\u5b9e\u73b0\u4ecefasta\u5e8f\u5217\u83b7\u53d6MLST\u578b\u5225\u7684\u5de5\u5177\u3002","title":"MLST"},{"location":"book/C11_Insilico-Scanning/02_mlst/#1","text":"# mlst \u5de5\u5177\u5728 bioconda \u6709\u5b89\u88c5\u5305\uff0c\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 conda \u5b89\u88c5 $ conda create -n mlst $ conda activate mlst ( mlst ) $ conda install mlst","title":"1. \u5b89\u88c5"},{"location":"book/C11_Insilico-Scanning/02_mlst/#2","text":"MLST \u652f\u6301 .fa , .fasta , .gb , .gbk , .fna \u4ee5\u53ca\u8fd9\u4e9b\u683c\u5f0f\u7684gz\u538b\u7f29\u5305\u683c\u5f0f\u7684\u6587\u4ef6\u3002\u4e0d\u52a0\u53c2\u6570\u53ef\u4ee5\u5bf9\u6240\u6709\u7269\u79cd\u6570\u636e\u5e93\u8fdb\u884c\u626b\u63cf\uff0c\u52a0\u4e0a\u53c2\u6570 --scheme \u53ef\u4ee5\u5bf9\u6307\u5b9a\u7269\u79cd\u8fdb\u884c\u626b\u63cf\u3002 # \u76f4\u63a5\u626b\u63cf fasta \u6570\u636e\uff0c\u8f6f\u4ef6\u4f1a\u5bf9\u5e8f\u5217\u4f4d\u70b9\u8fdb\u884c\u5224\u65ad\uff0c\u9009\u62e9\u5408\u9002\u7684\u7269\u79cd\u6570\u636e\u5e93 ( mlst ) $ mlst mygenome.fasta # \u652f\u6301 multiple fasta \u683c\u5f0f ( mlst ) $ mlst scaffolds.fasta # \u652f\u6301\u591a\u6587\u4ef6\u683c\u5f0f ( mlst ) $ mlst data/* # \u67e5\u770b\u53ef\u4ee5\u626b\u63cf\u7684\u7269\u79cd ( mlst ) $ mlst --list # \u4f7f\u7528 listera monocytogenes \u7269\u79cd\u6570\u636e\u5e93\u626b\u63cf ( mlst ) $ mlst --scheme lmonocytogenes data/* # \u5c06\u7ed3\u679c\u4fdd\u5b58 ( mlst ) $ mlst --scheme senterica fna/*.fna > mlst.result \u66f4\u65b0\u6570\u636e\u5e93\uff1aMLST\u6570\u636e\u5e93\u968f\u7740\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u800c\u4e0d\u65ad\u66f4\u65b0\uff0c\u4f7f\u7528bigsdb\u5efa\u7acb\u7684MLST\u6570\u636e\u5e93\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u66f4\u65b0allele\u5e8f\u5217\u548c\u83cc\u682a\u6570\u636e\u3002mlst\u5de5\u5177\u4e5f\u63d0\u4f9b\u4e86\u81ea\u52a8\u5316\u811a\u672c\u5de5\u5177\u66f4\u65b0\u6570\u636e\u5e93\u3002 # \u66f4\u65b0pubmlst\u6570\u636e\u5e93 ( mlst ) $ cd $CONDA_PREFIX /scripts ( mlst ) $ ./mlst-download_pub_mlst | bash ( mlst ) $ mv ../db/pubmlst ../db/pubmlst.old ( mlst ) $ mv pubmlst ../db # \u66f4\u65b0blast\u6570\u636e\u5e93 ( mlst ) $ ./mlst-make_blast_db","title":"2. \u4f7f\u7528"},{"location":"book/C11_Insilico-Scanning/02_mlst/#3","text":"\u5bf9 NCBI genome \u6570\u636e\u5e93\u4e2d bacillus cereus \u7684 Assembly \u8fdb\u884c\u626b\u63cf\u83b7\u53d6 MLST \u6570\u636e\u3002 # edirect \u6293\u53d6 FTP \u94fe\u63a5\uff0cawk\u8865\u5168\u4e0b\u8f7d\u8def\u5f84\uff0c\u7528 wget \u5de5\u5177\u6279\u91cf\u4e0b\u8f7d\uff08\u8bbe\u7f6e\u76f8\u5e94\u53c2\u6570\u907f\u514d\u8fdb\u5165\u4e0b\u8f7d\u5047\u6b7b\u72b6\u6001\uff09 $ esearch -db assembly -query \"Bacillus cereus[ORGN] AND latest[SB]\" | \\ > efetch -format docsum | \\ > xtract -pattern DocumentSummary -element FtpPath_RefSeq | \\ > awk -F \"/\" '{print $0\"/\"$NF\"_genomic.fna.gz\"}' | \\ > xargs wget --no-passive-ftp --limit-rate = 200k # mlst \u626b\u63cf ( mlst ) $ mlst --scheme bcereus *.fna.gz > ../bcereus-mlst-result.txt ( mlst ) $ cat ../bcereus-mlst-result.txt","title":"3. \u5e94\u7528\u4e3e\u4f8b"},{"location":"book/C11_Insilico-Scanning/02_mlst/#4","text":"\u4e0eMLST\u5206\u6790\u7684\u76f8\u5173\u64cd\u4f5c # \u5bf9\u6c99\u95e8\u83cc\u67d0\u4e2a\u5e8f\u5217\u4f4d\u70b9\u8fdb\u884c\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u5e76\u6784\u5efa\u8fdb\u5316\u6811 ( mlst ) $ cd $CONDA_PREFI /db/pubmlst/senterica # \u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\uff0c\u5927\u90e8\u5206\u4f4d\u70b9\u7684\u5e8f\u5217\u957f\u5ea6\u4e00\u81f4\u7684\uff0c\u53ef\u4ee5\u7701\u7565\u6bd4\u5bf9\u8fd9\u4e00\u6b65\u3002 # \u4f46\u4e2a\u522b\u4f4d\u70b9\u5b58\u5728\u63d2\u5165\u4e0e\u7f3a\u5931\u78b1\u57fa\u7684\u9700\u8981\u6bd4\u5bf9\u540e\u6784\u5efa\u8fdb\u5316\u6811 $ mafft aroC.tfa > aroC.maf # \u6784\u5efa\u8fdb\u5316\u6811 $ raxmlHPC-PTHREADS-AVX2 -f a -x 12345 -p 12345 -m GTRGAMMA -#500 -s aroC.maf -n aroC -T 40 # \u5c06\u6240\u6709ST\u4f4d\u70b9\u5e8f\u5217\u8fde\u9501\u6784\u5efa\u8fdb\u5316\u6811 ( mlst ) $ cd $CONDA_PREFI /db/pubmlst/senterica $ awk -F '\\t' '{if(NR>1) \\ > system(\"seqkit grep -w 0 -p aroC_\"$2\" aroC.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p dnaN_\"$3\" dnaN.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p hemD_\"$4\" hemD.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p hisD_\"$5\" hisD.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p purE_\"$6\" purE.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p sucA_\"$7\" sucA.tfa | tail -1 >> ST_\"$1); \\ > system(\"seqkit grep -w 0 -p thrA_\"$8\" thrA.tfa | tail -1 >> ST_\"$1)}' \\ > senterica.txt # \u53bb\u9664\\n\uff0c\u6dfb\u52a0\u5e8f\u5217\u540d\u79f0 $ for i in ST_* ; do sed -i ':a;N;s/\\n//;ta' $i ; sed -i '1i\\>' $i '' $i ; done # \u5f62\u6210\u5355\u4e2afasta\u6587\u4ef6 $ for i in ST_* ; do cat $i >> ST.fna ; done # \u6784\u5efa\u8fdb\u5316\u6811 $ mafft ST.fna > ST.maf $ raxmlHPC-PTHREADS-AVX2 -f a -x 12345 -p 12345 -m GTRGAMMA -#1000 -s ST.maf -n ST -T 40 # \u6240\u6709\u4f4d\u70b9\u7684dN/dS\u5206\u6790 # \u57fa\u4e8eMLST\u4f4d\u70b9\u7684\u79cd\u7fa4\u7ed3\u6784\u5206\u6790","title":"4. \u5176\u4ed6"},{"location":"book/C11_Insilico-Scanning/03_ariba/","text":"ARIBA \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Ariba \u5de5\u5177\u662f\u7531 Sanger \u6d4b\u5e8f\u4e2d\u5fc3\u75c5\u539f\u5fae\u751f\u7269\u5f00\u53d1\u7ec4\u5f00\u53d1\u7684\u7528\u4e8e\u57fa\u56e0\u7ec4\u6570\u636e\u626b\u63cf\u7684\u5de5\u5177\u3002\u4e3b\u8981\u7528\u4e8e\u8010\u836f\u57fa\u56e0\u7684\u626b\u63cf\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u5bf9\u7279\u5b9a\u57fa\u56e0\u626b\u63cf\uff08\u5982MLST\u7ba1\u5bb6\u57fa\u56e0\uff09\u3002 1. \u5b89\u88c5 \u00b6 \u7248\u672c\uff1a python: 3.6.12 ariba: 2.14.6 bowtie2: 2.3.5 cd-hit: 4.8.1 mummer: 3.23 # \u65b0\u5efa\u865a\u62df\u73af\u5883 $ conda create -n ariba $ conda activate ariba # \u5b89\u88c5ariba\u53ca\u5176\u4f9d\u8d56\u5305 ( ariba ) $ conda install ariba 2. \u4f7f\u7528 \u00b6 \u83b7\u5f97\u6570\u636e\u5e93 # \u5b9a\u4e49\u6570\u636e\u5e93\u8def\u5f84 $ export DBS = your-database-path # \u4e0b\u8f7d\u8010\u836f\u548c\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93\u6587\u4ef6 ( ariba ) $ mkdir $DBS /ariba ( ariba ) $ for i in argannot card megares plasmidfinder resfinder srst2_argannot vfdb_core vfdb_full virulencefinder > do ariba getref $i $DBS /ariba/ $i > done # \u683c\u5f0f\u5316\u6570\u636e\u5e93\u6587\u4ef6\u751f\u6210ariba\u53ef\u7528\u7684\u6570\u636e\u5e93 # \u8fd9\u91cc\u4ee5card\u4e3a\u4f8b\uff0c\u5176\u4ed6\u6570\u636e\u5e93\u8fdb\u884c\u76f8\u5e94\u683c\u5f0f\u5316 ( ariba ) $ ariba prepareref -f $DBS /ariba/card.fa -m $DBS /ariba/card.tsv card # \u4e0b\u8f7dPubMLST\u6570\u636e\u5e93 ( ariba ) $ mkdir $DBS /ariba/pubmlst ( ariba ) $ ariba pubmlstspecies > $DBS /ariba/pubmlst/species.txt # \u6279\u91cf\u4e0b\u8f7d\u6240\u6709\u7269\u79cdpubmlst\u6570\u636e\u4fe1\u606f ( ariba ) $ IFS = $'\\n' ; for i in ` cat $DBS /ariba/pubmlst/species.txt ` ; do ariba pubmlstget $i $DBS /ariba/pubmlst/ $i ; done # PubMLST\u6570\u636e\u5728\u7528pubmlstget\u8fc7\u7a0b\u4e2d\u5df2\u7ecf\u683c\u5f0f\u5316\u5b8c\u6210\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002 \u5206\u6790\u6570\u636e # \u5206\u6790 reads mlst ( ariba ) $ ariba run \" $DBS /ariba/pubmlst/Salmonella enterica/ref_db\" S1_1.fastq.gz S1_2.fastq.gz S1_output # \u5206\u6790\u8010\u836f\u6570\u636e ( ariba ) $ ariba run \" $DBS /ariba/card\" S1_1.fastq.gz S1_2.fastq.gz S1_output \u751f\u6210\u591a\u4e2a\u6837\u672c\u62a5\u544a ( ariba ) $ for i in ` ls *_1.fastq.gz ` ; do ariba run $DBS /ariba/card $i ${ i %_1.fastq.gz } _2.fastq.gz ${ i %_1.fastq.gz } _output ; done ( ariba ) $ ariba summary result *_output/report*.tsv \u6784\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93 # \u51c6\u5907\u6570\u636e\u5e93\u5e8f\u5217\u6587\u4ef6\u548cmeta\u6570\u636e # \u683c\u5f0f\u5316\u5e8f\u5217\u548cmeta\u6570\u636e\u751f\u6210\u6570\u636e\u5e93 ( ariba ) $ ariba prepareref -f myseq.fa -m meta.tsv mydata ( ariba ) $ ariba run mydata Sample1_1.fq.gz Sample1_2.fq.gz output \u7ed3\u679c\u5206\u6790 \u00b6 Reference \u00b6 ariba","title":"03. Ariba \u8010\u836f\u57fa\u56e0"},{"location":"book/C11_Insilico-Scanning/03_ariba/#ariba","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Ariba \u5de5\u5177\u662f\u7531 Sanger \u6d4b\u5e8f\u4e2d\u5fc3\u75c5\u539f\u5fae\u751f\u7269\u5f00\u53d1\u7ec4\u5f00\u53d1\u7684\u7528\u4e8e\u57fa\u56e0\u7ec4\u6570\u636e\u626b\u63cf\u7684\u5de5\u5177\u3002\u4e3b\u8981\u7528\u4e8e\u8010\u836f\u57fa\u56e0\u7684\u626b\u63cf\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u5bf9\u7279\u5b9a\u57fa\u56e0\u626b\u63cf\uff08\u5982MLST\u7ba1\u5bb6\u57fa\u56e0\uff09\u3002","title":"ARIBA"},{"location":"book/C11_Insilico-Scanning/03_ariba/#1","text":"\u7248\u672c\uff1a python: 3.6.12 ariba: 2.14.6 bowtie2: 2.3.5 cd-hit: 4.8.1 mummer: 3.23 # \u65b0\u5efa\u865a\u62df\u73af\u5883 $ conda create -n ariba $ conda activate ariba # \u5b89\u88c5ariba\u53ca\u5176\u4f9d\u8d56\u5305 ( ariba ) $ conda install ariba","title":"1. \u5b89\u88c5"},{"location":"book/C11_Insilico-Scanning/03_ariba/#2","text":"\u83b7\u5f97\u6570\u636e\u5e93 # \u5b9a\u4e49\u6570\u636e\u5e93\u8def\u5f84 $ export DBS = your-database-path # \u4e0b\u8f7d\u8010\u836f\u548c\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93\u6587\u4ef6 ( ariba ) $ mkdir $DBS /ariba ( ariba ) $ for i in argannot card megares plasmidfinder resfinder srst2_argannot vfdb_core vfdb_full virulencefinder > do ariba getref $i $DBS /ariba/ $i > done # \u683c\u5f0f\u5316\u6570\u636e\u5e93\u6587\u4ef6\u751f\u6210ariba\u53ef\u7528\u7684\u6570\u636e\u5e93 # \u8fd9\u91cc\u4ee5card\u4e3a\u4f8b\uff0c\u5176\u4ed6\u6570\u636e\u5e93\u8fdb\u884c\u76f8\u5e94\u683c\u5f0f\u5316 ( ariba ) $ ariba prepareref -f $DBS /ariba/card.fa -m $DBS /ariba/card.tsv card # \u4e0b\u8f7dPubMLST\u6570\u636e\u5e93 ( ariba ) $ mkdir $DBS /ariba/pubmlst ( ariba ) $ ariba pubmlstspecies > $DBS /ariba/pubmlst/species.txt # \u6279\u91cf\u4e0b\u8f7d\u6240\u6709\u7269\u79cdpubmlst\u6570\u636e\u4fe1\u606f ( ariba ) $ IFS = $'\\n' ; for i in ` cat $DBS /ariba/pubmlst/species.txt ` ; do ariba pubmlstget $i $DBS /ariba/pubmlst/ $i ; done # PubMLST\u6570\u636e\u5728\u7528pubmlstget\u8fc7\u7a0b\u4e2d\u5df2\u7ecf\u683c\u5f0f\u5316\u5b8c\u6210\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002 \u5206\u6790\u6570\u636e # \u5206\u6790 reads mlst ( ariba ) $ ariba run \" $DBS /ariba/pubmlst/Salmonella enterica/ref_db\" S1_1.fastq.gz S1_2.fastq.gz S1_output # \u5206\u6790\u8010\u836f\u6570\u636e ( ariba ) $ ariba run \" $DBS /ariba/card\" S1_1.fastq.gz S1_2.fastq.gz S1_output \u751f\u6210\u591a\u4e2a\u6837\u672c\u62a5\u544a ( ariba ) $ for i in ` ls *_1.fastq.gz ` ; do ariba run $DBS /ariba/card $i ${ i %_1.fastq.gz } _2.fastq.gz ${ i %_1.fastq.gz } _output ; done ( ariba ) $ ariba summary result *_output/report*.tsv \u6784\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u5e93 # \u51c6\u5907\u6570\u636e\u5e93\u5e8f\u5217\u6587\u4ef6\u548cmeta\u6570\u636e # \u683c\u5f0f\u5316\u5e8f\u5217\u548cmeta\u6570\u636e\u751f\u6210\u6570\u636e\u5e93 ( ariba ) $ ariba prepareref -f myseq.fa -m meta.tsv mydata ( ariba ) $ ariba run mydata Sample1_1.fq.gz Sample1_2.fq.gz output","title":"2. \u4f7f\u7528"},{"location":"book/C11_Insilico-Scanning/03_ariba/#_1","text":"","title":"\u7ed3\u679c\u5206\u6790"},{"location":"book/C11_Insilico-Scanning/03_ariba/#reference","text":"ariba","title":"Reference"},{"location":"book/C11_Insilico-Scanning/04_abricate/","text":"Abricate \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd \u672c\u8282\u4ecb\u7ecd\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684\u7ec6\u83cc\u57fa\u56e0\u626b\u63cf\u5de5\u5177: abricate\uff0c\u8fd9\u662f\u7531\u6fb3\u5927\u5229\u4e9a\u8457\u540d\u751f\u7269\u4fe1\u606f\u5b66\u5bb6 @Torsten Seemann \u5f00\u53d1\u7684\u7ec6\u83cc\u6bd2\u529b\u57fa\u56e0\u548c\u8010\u836f\u57fa\u56e0\u626b\u63cf\u5de5\u5177\u3002 abricate \u662f\u4e00\u4e2a\u5f88\u65b9\u4fbf\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4 fasta \u6570\u636e\u8fdb\u884c blast \u626b\u63cf\uff0c\u83b7\u5f97\u5176\u57fa\u56e0\u7ec4\u643a\u5e26\u90a3\u4e9b\u6bd2\u529b\u57fa\u56e0\u548c\u8010\u836f\u57fa\u56e0\u7ed3\u679c\u3002\u8f6f\u4ef6\u5305\u542b\u6570\u636e\u5e93\uff0c\u4e0d\u9700\u8981\u81ea\u5df1\u518d\u989d\u5916\u4e0b\u8f7d\u6784\u5efa\uff0c\u6570\u636e\u5e93\u5305\u62ec\uff1a vfdb: \u57fa\u4e8evfdb\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93 argannot: \u57fa\u4e8eargannot\u8010\u836f\u6570\u636e\u5e93 plasmidfinder: \u57fa\u4e8eplasmidfinder\u7528\u4e8e\u8d28\u7c92\u626b\u63cf ecoli_vf: \u57fa\u4e8e\u5927\u80a0\u6746\u83cc\u6bd2\u529b\u57fa\u56e0 megares: \u57fa\u4e8emegares\u8010\u836f\u6570\u636e\u5e93 resfinder: \u57fa\u4e8eresfinder\u8010\u836f\u6570\u636e\u5e93 ecoh: \u7528\u4e8e\u5927\u80a0\u6746\u83ccO/H\u6297\u539f\u5206\u6790 ncbi: \u57fa\u4e8eNCBI\u7684\u8010\u836f\u6570\u636e\u5e93 card: \u57fa\u4e8e\u52a0\u62ff\u5927CARD\u8010\u836f\u6570\u636e\u5e93 \u5b89\u88c5 \u00b6 \u4f7f\u7528\u7248\u672c\uff1a abricate: 1.0.1 \u901a\u8fc7 conda \u5b89\u88c5 abricate\uff0c\u65e0\u9700\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u3002 # \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u8fd0\u884c abricate $ conda create -n abricate $ conda activate abricate # \u5b89\u88c5 abricate ( abricate ) $ conda install abricate \u4f7f\u7528 \u00b6 abricate \u5185\u5efa\u591a\u4e2a\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u7528 --list \u67e5\u770b\uff0c\u8981\u4f7f\u7528\u54ea\u4e2a\u6570\u636e\u5e93\uff0c\u5219\u91c7\u7528 -db \u53c2\u6570\u52a0\u4e0a\u5177\u4f53\u6570\u636e\u5e93\u540d\u79f0\u5373\u53ef\u3002 # \u67e5\u770b\u652f\u6301\u7684\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u91c7\u7528resfinder ( abricate ) $ abricate --list DATABASE SEQUENCES DBTYPE DATE plasmidfinder 460 nucl 2020 -Apr-19 vfdb 2597 nucl 2020 -Apr-19 argannot 2223 nucl 2020 -Apr-19 ecoli_vf 2701 nucl 2020 -Apr-19 megares 6635 nucl 2020 -Apr-19 resfinder 3077 nucl 2020 -Apr-19 ecoh 597 nucl 2020 -Apr-19 ncbi 5386 nucl 2020 -Apr-19 card 2631 nucl 2020 -Apr-19 # \u626b\u63cf fasta ( abricate ) $ abricate genome.fasta # \u9009\u62e9\u5176\u4ed6\u6570\u636e\u5e93 vfdb ( abricate ) $ abricate -db vfdb genome.fasta # \u6279\u91cf\u626b\u63cf\u751f\u6210\u7ed3\u679c ( abricate ) $ for i in *.fa ; do abricate --db card --quiet $i > ${ i %.fa } .result ; done ( abricate ) $ abricate --summary *.result > result ( abricate ) $ cat result # \u7528parallel \u52a0\u901f\u5e76\u884c\u7ed3\u679c ( abricate ) $ ls *.fa | parallel --max-args = 1 abricate --db vfdb -q { 1 } > vfdb.result ( baricate ) $ less vfdb.result \u6ce8\u610f\u4e8b\u9879 abricate \u8fc7\u6ee4\u6761\u4ef6\u4e2d\u5bf9 DNA identity \u548c coverage \u9ed8\u8ba4\u8bbe\u7f6e\u90fd\u662f 80%\u3002 \u81ea\u5b9a\u4e49 \u00b6 \u53ef\u4ee5\u7528abricate\u626b\u63cf\u81ea\u884c\u6784\u5efa\u7684\u57fa\u56e0\u6570\u636e\u5e93\u3002 Reference \u00b6 Abricate: https://github.com/tseemann/abricate","title":"04. Abricate \u591a\u529f\u80fd\u626b\u63cf\u5de5\u5177"},{"location":"book/C11_Insilico-Scanning/04_abricate/#abricate","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd \u672c\u8282\u4ecb\u7ecd\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684\u7ec6\u83cc\u57fa\u56e0\u626b\u63cf\u5de5\u5177: abricate\uff0c\u8fd9\u662f\u7531\u6fb3\u5927\u5229\u4e9a\u8457\u540d\u751f\u7269\u4fe1\u606f\u5b66\u5bb6 @Torsten Seemann \u5f00\u53d1\u7684\u7ec6\u83cc\u6bd2\u529b\u57fa\u56e0\u548c\u8010\u836f\u57fa\u56e0\u626b\u63cf\u5de5\u5177\u3002 abricate \u662f\u4e00\u4e2a\u5f88\u65b9\u4fbf\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4 fasta \u6570\u636e\u8fdb\u884c blast \u626b\u63cf\uff0c\u83b7\u5f97\u5176\u57fa\u56e0\u7ec4\u643a\u5e26\u90a3\u4e9b\u6bd2\u529b\u57fa\u56e0\u548c\u8010\u836f\u57fa\u56e0\u7ed3\u679c\u3002\u8f6f\u4ef6\u5305\u542b\u6570\u636e\u5e93\uff0c\u4e0d\u9700\u8981\u81ea\u5df1\u518d\u989d\u5916\u4e0b\u8f7d\u6784\u5efa\uff0c\u6570\u636e\u5e93\u5305\u62ec\uff1a vfdb: \u57fa\u4e8evfdb\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93 argannot: \u57fa\u4e8eargannot\u8010\u836f\u6570\u636e\u5e93 plasmidfinder: \u57fa\u4e8eplasmidfinder\u7528\u4e8e\u8d28\u7c92\u626b\u63cf ecoli_vf: \u57fa\u4e8e\u5927\u80a0\u6746\u83cc\u6bd2\u529b\u57fa\u56e0 megares: \u57fa\u4e8emegares\u8010\u836f\u6570\u636e\u5e93 resfinder: \u57fa\u4e8eresfinder\u8010\u836f\u6570\u636e\u5e93 ecoh: \u7528\u4e8e\u5927\u80a0\u6746\u83ccO/H\u6297\u539f\u5206\u6790 ncbi: \u57fa\u4e8eNCBI\u7684\u8010\u836f\u6570\u636e\u5e93 card: \u57fa\u4e8e\u52a0\u62ff\u5927CARD\u8010\u836f\u6570\u636e\u5e93","title":"Abricate"},{"location":"book/C11_Insilico-Scanning/04_abricate/#_1","text":"\u4f7f\u7528\u7248\u672c\uff1a abricate: 1.0.1 \u901a\u8fc7 conda \u5b89\u88c5 abricate\uff0c\u65e0\u9700\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u3002 # \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u8fd0\u884c abricate $ conda create -n abricate $ conda activate abricate # \u5b89\u88c5 abricate ( abricate ) $ conda install abricate","title":"\u5b89\u88c5"},{"location":"book/C11_Insilico-Scanning/04_abricate/#_2","text":"abricate \u5185\u5efa\u591a\u4e2a\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u7528 --list \u67e5\u770b\uff0c\u8981\u4f7f\u7528\u54ea\u4e2a\u6570\u636e\u5e93\uff0c\u5219\u91c7\u7528 -db \u53c2\u6570\u52a0\u4e0a\u5177\u4f53\u6570\u636e\u5e93\u540d\u79f0\u5373\u53ef\u3002 # \u67e5\u770b\u652f\u6301\u7684\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u91c7\u7528resfinder ( abricate ) $ abricate --list DATABASE SEQUENCES DBTYPE DATE plasmidfinder 460 nucl 2020 -Apr-19 vfdb 2597 nucl 2020 -Apr-19 argannot 2223 nucl 2020 -Apr-19 ecoli_vf 2701 nucl 2020 -Apr-19 megares 6635 nucl 2020 -Apr-19 resfinder 3077 nucl 2020 -Apr-19 ecoh 597 nucl 2020 -Apr-19 ncbi 5386 nucl 2020 -Apr-19 card 2631 nucl 2020 -Apr-19 # \u626b\u63cf fasta ( abricate ) $ abricate genome.fasta # \u9009\u62e9\u5176\u4ed6\u6570\u636e\u5e93 vfdb ( abricate ) $ abricate -db vfdb genome.fasta # \u6279\u91cf\u626b\u63cf\u751f\u6210\u7ed3\u679c ( abricate ) $ for i in *.fa ; do abricate --db card --quiet $i > ${ i %.fa } .result ; done ( abricate ) $ abricate --summary *.result > result ( abricate ) $ cat result # \u7528parallel \u52a0\u901f\u5e76\u884c\u7ed3\u679c ( abricate ) $ ls *.fa | parallel --max-args = 1 abricate --db vfdb -q { 1 } > vfdb.result ( baricate ) $ less vfdb.result \u6ce8\u610f\u4e8b\u9879 abricate \u8fc7\u6ee4\u6761\u4ef6\u4e2d\u5bf9 DNA identity \u548c coverage \u9ed8\u8ba4\u8bbe\u7f6e\u90fd\u662f 80%\u3002","title":"\u4f7f\u7528"},{"location":"book/C11_Insilico-Scanning/04_abricate/#_3","text":"\u53ef\u4ee5\u7528abricate\u626b\u63cf\u81ea\u884c\u6784\u5efa\u7684\u57fa\u56e0\u6570\u636e\u5e93\u3002","title":"\u81ea\u5b9a\u4e49"},{"location":"book/C11_Insilico-Scanning/04_abricate/#reference","text":"Abricate: https://github.com/tseemann/abricate","title":"Reference"},{"location":"book/C11_Insilico-Scanning/05_mlva/","text":"in silico MLVA \u7684\u65b9\u6cd5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} MLVA \u662f\u4e00\u79cd\u4f20\u7edf\u7684\u5206\u5b50\u5206\u578b\u65b9\u6cd5\u3002\u5b83\u901a\u8fc7\u5bf9\u7ec6\u83cc\u7684\u4e32\u8054\u91cd\u590d\u5e8f\u5217\u8fdb\u884c\u62f7\u8d1d\u6570\u6d4b\u5b9a trf \u5de5\u5177 \u00b6 Reference \u00b6","title":"in silico MLVA \u7684\u65b9\u6cd5"},{"location":"book/C11_Insilico-Scanning/05_mlva/#in-silico-mlva","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} MLVA \u662f\u4e00\u79cd\u4f20\u7edf\u7684\u5206\u5b50\u5206\u578b\u65b9\u6cd5\u3002\u5b83\u901a\u8fc7\u5bf9\u7ec6\u83cc\u7684\u4e32\u8054\u91cd\u590d\u5e8f\u5217\u8fdb\u884c\u62f7\u8d1d\u6570\u6d4b\u5b9a","title":"in silico MLVA \u7684\u65b9\u6cd5"},{"location":"book/C11_Insilico-Scanning/05_mlva/#trf","text":"","title":"trf \u5de5\u5177"},{"location":"book/C11_Insilico-Scanning/05_mlva/#reference","text":"","title":"Reference"},{"location":"book/C11_Insilico-Scanning/06_pfge/","text":"","title":"06 pfge"},{"location":"book/C11_Insilico-Scanning/10_virluent-fator/","text":"in silico \u6bd2\u529b\u57fa\u56e0\u626b\u63cf \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93 VFDB: MvirDB: PHI-Base: Pathogen Host Interations dataBase 1 ARDB: Antibiotic Resistance Genes Database 2 ATDB: Animal Toxin Database 3 \u5728\u7ebf\u5de5\u5177 Victors: http://www.phidias.us/victors/ VirulenceFinder: https://cge.cbs.dtu.dk/services/VirulenceFinder/ Reference \u00b6 A Comparison of Computational Methods for Identifying Virulence","title":"in silico \u6bd2\u529b\u57fa\u56e0\u626b\u63cf"},{"location":"book/C11_Insilico-Scanning/10_virluent-fator/#in-silico","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93 VFDB: MvirDB: PHI-Base: Pathogen Host Interations dataBase 1 ARDB: Antibiotic Resistance Genes Database 2 ATDB: Animal Toxin Database 3 \u5728\u7ebf\u5de5\u5177 Victors: http://www.phidias.us/victors/ VirulenceFinder: https://cge.cbs.dtu.dk/services/VirulenceFinder/","title":"in silico \u6bd2\u529b\u57fa\u56e0\u626b\u63cf"},{"location":"book/C11_Insilico-Scanning/10_virluent-fator/#reference","text":"A Comparison of Computational Methods for Identifying Virulence","title":"Reference"},{"location":"book/C12_Metagenomics-Analysis/","text":"","title":"Index"},{"location":"book/C12_Metagenomics-Analysis/01_kraken/","text":"Kraken \u4f7f\u7528\u7b80\u4ecb \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Kraken \u662f\u4e00\u4e2a\u5e8f\u5217taxnomic\u5206\u7c7b\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u505a\u5b8f\u57fa\u56e0\u7ec4\u5206\u6790\uff0c\u4e5f\u5e38\u7528\u6765\u505a\u5fae\u751f\u7269\u6d4b\u5e8f\u5e8f\u5217\u6c61\u67d3\u9274\u5b9a\u3002 \u672c\u6587\u4f7f\u7528\u8f6f\u4ef6\u7248\u672c\uff1a kraken2 : v2.1.0 braken : v2.5.0 1. \u5b89\u88c5 \u00b6 kraken2 \u662f\u76ee\u524d\u6700\u65b0\u7684\u7248\u672c\uff0c\u8fd9\u91cc\u4f7f\u7528 conda \u65b9\u5f0f\u5b89\u88c5\u3002 # \u65b0\u5efa conda \u73af\u5883\uff0c\u5b89\u88c5 kraken2 \u548c bracken $ conda create -n kraken kraken2 bracken $ conda activate kraken # \u4e0b\u8f7d minikraken \u6570\u636e\u5e93 ( kraken ) $ wget https://www.ccb.jhu.edu/software/kraken2/dl/minikraken2_v2_8GB.tgz # \u5c06\u6570\u636e\u5e93\u89e3\u538b\u7f29\u81f3\u6307\u5b9a\u76ee\u5f55\uff0c\u8fd9\u91cc\u653e\u5728$HOME/dbs/minikraken2 ( kraken ) $ tar -zxf minikraken2_v2_8GB.tgz -C $HOME /dbs/minikraken2 2. \u4f7f\u7528 \u00b6 \u4f7f\u7528kraken2\u9700\u8981\u7528 --db \u6307\u5411\u5176\u6570\u636e\u5e93\uff0c\u6bd4\u5982\u5fae\u751f\u7269\u9274\u5b9a\u5e38\u7528 minikraken2 \u6570\u636e\u5e93\u3002\u7528 --report \u53c2\u6570\u751f\u6210\u7ed3\u679c\u62a5\u544a\u3002 # \u5bf9\u5b8f\u57fa\u56e0\u7ec4\u7ec4\u88c5\u7ed3\u679c assembly.fna \u5e8f\u5217\u8fdb\u884c\u626b\u63cf ( kraken ) $ kraken2 --use-names --threads 4 --db $HOME /dbs/minikraken2 --report report.txt assembly.fna > result.kraken # \u5bf9\u6d4b\u5e8freads\u6570\u636e\u8fdb\u884c\u626b\u63cf ( kraken ) $ kraken2 --use-names --threads 4 --db $HOME /dbs/minikraken2 --report report2.txt --fastq-input --paired S1_R1.fq.gz S1_R2.fq.gz > result2.kraken bracken \u662f\u91c7\u7528\u8d1d\u53f6\u65af\u7b97\u6cd5\u7684 kraken \u4e30\u5ea6\u8bc4\u4f30\u8f6f\u4ef6\u3002 # \u91c7\u7528kmer\u65b9\u5f0f\u5bf9\u5df2\u5efa\u7acbkmer\u7d22\u5f15\u7684\u7269\u79cd\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u5bf9\uff0c\u83b7\u5f97\u5e8f\u5217\u5bf9\u5e94\u7269\u79cd ( kraken ) $ wget https://ccb.jhu.edu/software/bracken/dl/minikraken2_v2/database200mers.kmer_distrib ( kraken ) $ mv database200mers.kmer_distrib $HOME /dbs/minikraken2 ( kraken ) $ bracken -d $HOME /dbs/minikraken2 -i kraken2.report -o bracken.species.txt -l S","title":"01. kraken"},{"location":"book/C12_Metagenomics-Analysis/01_kraken/#kraken","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Kraken \u662f\u4e00\u4e2a\u5e8f\u5217taxnomic\u5206\u7c7b\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u505a\u5b8f\u57fa\u56e0\u7ec4\u5206\u6790\uff0c\u4e5f\u5e38\u7528\u6765\u505a\u5fae\u751f\u7269\u6d4b\u5e8f\u5e8f\u5217\u6c61\u67d3\u9274\u5b9a\u3002 \u672c\u6587\u4f7f\u7528\u8f6f\u4ef6\u7248\u672c\uff1a kraken2 : v2.1.0 braken : v2.5.0","title":"Kraken \u4f7f\u7528\u7b80\u4ecb"},{"location":"book/C12_Metagenomics-Analysis/01_kraken/#1","text":"kraken2 \u662f\u76ee\u524d\u6700\u65b0\u7684\u7248\u672c\uff0c\u8fd9\u91cc\u4f7f\u7528 conda \u65b9\u5f0f\u5b89\u88c5\u3002 # \u65b0\u5efa conda \u73af\u5883\uff0c\u5b89\u88c5 kraken2 \u548c bracken $ conda create -n kraken kraken2 bracken $ conda activate kraken # \u4e0b\u8f7d minikraken \u6570\u636e\u5e93 ( kraken ) $ wget https://www.ccb.jhu.edu/software/kraken2/dl/minikraken2_v2_8GB.tgz # \u5c06\u6570\u636e\u5e93\u89e3\u538b\u7f29\u81f3\u6307\u5b9a\u76ee\u5f55\uff0c\u8fd9\u91cc\u653e\u5728$HOME/dbs/minikraken2 ( kraken ) $ tar -zxf minikraken2_v2_8GB.tgz -C $HOME /dbs/minikraken2","title":"1. \u5b89\u88c5"},{"location":"book/C12_Metagenomics-Analysis/01_kraken/#2","text":"\u4f7f\u7528kraken2\u9700\u8981\u7528 --db \u6307\u5411\u5176\u6570\u636e\u5e93\uff0c\u6bd4\u5982\u5fae\u751f\u7269\u9274\u5b9a\u5e38\u7528 minikraken2 \u6570\u636e\u5e93\u3002\u7528 --report \u53c2\u6570\u751f\u6210\u7ed3\u679c\u62a5\u544a\u3002 # \u5bf9\u5b8f\u57fa\u56e0\u7ec4\u7ec4\u88c5\u7ed3\u679c assembly.fna \u5e8f\u5217\u8fdb\u884c\u626b\u63cf ( kraken ) $ kraken2 --use-names --threads 4 --db $HOME /dbs/minikraken2 --report report.txt assembly.fna > result.kraken # \u5bf9\u6d4b\u5e8freads\u6570\u636e\u8fdb\u884c\u626b\u63cf ( kraken ) $ kraken2 --use-names --threads 4 --db $HOME /dbs/minikraken2 --report report2.txt --fastq-input --paired S1_R1.fq.gz S1_R2.fq.gz > result2.kraken bracken \u662f\u91c7\u7528\u8d1d\u53f6\u65af\u7b97\u6cd5\u7684 kraken \u4e30\u5ea6\u8bc4\u4f30\u8f6f\u4ef6\u3002 # \u91c7\u7528kmer\u65b9\u5f0f\u5bf9\u5df2\u5efa\u7acbkmer\u7d22\u5f15\u7684\u7269\u79cd\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u5bf9\uff0c\u83b7\u5f97\u5e8f\u5217\u5bf9\u5e94\u7269\u79cd ( kraken ) $ wget https://ccb.jhu.edu/software/bracken/dl/minikraken2_v2/database200mers.kmer_distrib ( kraken ) $ mv database200mers.kmer_distrib $HOME /dbs/minikraken2 ( kraken ) $ bracken -d $HOME /dbs/minikraken2 -i kraken2.report -o bracken.species.txt -l S","title":"2. \u4f7f\u7528"},{"location":"book/C12_Metagenomics-Analysis/02_centrifuge/","text":"centrifuge \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Centrifuge \u662f\u4e00\u4e2a\u5e8f\u5217taxnomic\u5206\u7c7b\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u505a\u5b8f\u57fa\u56e0\u7ec4\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u505a\u5fae\u751f\u7269\u6d4b\u5e8f\u5e8f\u5217\u6c61\u67d3\u9274\u5b9a\u3002 \u7248\u672c: v1.0.3 beta \u5b89\u88c5 \u00b6 # \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\uff0c\u5b89\u88c5 centrifuge $ conda create -n centrifuge centrifuge # \u8fdb\u5165\u865a\u62df\u73af\u5883 $ conda activate centrifuge # \u4e0b\u8f7d\u6570\u636e\u5e93 ( centrifuge ) $ aria2c ftp://ftp.ccb.jhu.edu/pub/infphilo/centrifuge/data/p_compressed+h+v.tar.gz # \u89e3\u538b\u7f29\u6570\u636e\u5e93\u6587\u4ef6 ( centrifuge ) $ tar zxvf p_compressed+h+v.tar.gz -C $HOME /dbs/centrifuge \u4f7f\u7528 \u00b6 <<<<<<< HEAD \u5bf9\u6d4b\u5e8f\u6570\u636e\u6216\u8005fasta\u5e8f\u5217\u8fdb\u884c\u7269\u79cd\u9274\u5b9a\u626b\u63cf\u3002 ======= 43d76e9e2162f987c60ef8deb8448087aec91ee3 # \u626b\u63cf fasta \u5e8f\u5217 ( centrifuge ) $ centrifuge -x $HOME /dbs/centrifuge/p_compressed+h+v -U example.fa --report-file report.txt -S results.txt # \u626b\u63cf fastq \u5e8f\u5217 ( centrifuge ) $ centrifuge -x $HOME /dbs/centrifuge/p_compressed+h+v -U S1_R1.fastq --report-file S1_R1-report.txt -S S1_R1-results.txt # \u626b\u63cf\u591a\u4e2a fastq \u5e8f\u5217 ( centrifuge ) $ for i in *.fq.gz ; do zcat $i >> total.fq.gz ; done ( centrifuge ) $ centrifuge -x $HOME /dbs/centrifuge/p_compressed+h+v -U total.fq.gz \u5bf9\u5e8f\u5217\u7ed3\u679c\u8fdb\u884c\u5206\u6790\u3002\u53ef\u4ee5\u7528 --report-file \u53c2\u6570\u751f\u6210\u7684\u62a5\u544a\u6587\u4ef6\uff0c\u91cc\u9762\u5c06\u5404\u4e2a\u7269\u79cd\u8fdb\u884c\u4e86\u6c47\u603b\u3002\u6216\u8005\u7528 centrifuge-kreport \u5de5\u5177\u5c06reads\u626b\u63cf\u7684\u7ed3\u679c\u9ed8\u8ba4\u6587\u4ef6 centrifuge_report.tsv \u8f6c\u6362\u6210 kraken \u683c\u5f0f\u7684\u7269\u79cd\u5206\u7c7b\u6811\u72b6\u7ed3\u679c\u3002\u8fd9\u4e2a\u6570\u636e\u7ed3\u679c\u53ef\u4ee5\u7528 pavian \u7b49\u8fdb\u884c\u6570\u636e\u53ef\u89c6\u5316\u3002 ( centrifuge ) $ centrifuge-kreport -x $HOME /dbs/centrifuge/p_compressed+h+v centrifuge_report.tsv > kraken.result","title":"02. centrifuge"},{"location":"book/C12_Metagenomics-Analysis/02_centrifuge/#centrifuge","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Centrifuge \u662f\u4e00\u4e2a\u5e8f\u5217taxnomic\u5206\u7c7b\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u505a\u5b8f\u57fa\u56e0\u7ec4\u5206\u6790\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u505a\u5fae\u751f\u7269\u6d4b\u5e8f\u5e8f\u5217\u6c61\u67d3\u9274\u5b9a\u3002 \u7248\u672c: v1.0.3 beta","title":"centrifuge"},{"location":"book/C12_Metagenomics-Analysis/02_centrifuge/#_1","text":"# \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\uff0c\u5b89\u88c5 centrifuge $ conda create -n centrifuge centrifuge # \u8fdb\u5165\u865a\u62df\u73af\u5883 $ conda activate centrifuge # \u4e0b\u8f7d\u6570\u636e\u5e93 ( centrifuge ) $ aria2c ftp://ftp.ccb.jhu.edu/pub/infphilo/centrifuge/data/p_compressed+h+v.tar.gz # \u89e3\u538b\u7f29\u6570\u636e\u5e93\u6587\u4ef6 ( centrifuge ) $ tar zxvf p_compressed+h+v.tar.gz -C $HOME /dbs/centrifuge","title":"\u5b89\u88c5"},{"location":"book/C12_Metagenomics-Analysis/02_centrifuge/#_2","text":"<<<<<<< HEAD \u5bf9\u6d4b\u5e8f\u6570\u636e\u6216\u8005fasta\u5e8f\u5217\u8fdb\u884c\u7269\u79cd\u9274\u5b9a\u626b\u63cf\u3002 ======= 43d76e9e2162f987c60ef8deb8448087aec91ee3 # \u626b\u63cf fasta \u5e8f\u5217 ( centrifuge ) $ centrifuge -x $HOME /dbs/centrifuge/p_compressed+h+v -U example.fa --report-file report.txt -S results.txt # \u626b\u63cf fastq \u5e8f\u5217 ( centrifuge ) $ centrifuge -x $HOME /dbs/centrifuge/p_compressed+h+v -U S1_R1.fastq --report-file S1_R1-report.txt -S S1_R1-results.txt # \u626b\u63cf\u591a\u4e2a fastq \u5e8f\u5217 ( centrifuge ) $ for i in *.fq.gz ; do zcat $i >> total.fq.gz ; done ( centrifuge ) $ centrifuge -x $HOME /dbs/centrifuge/p_compressed+h+v -U total.fq.gz \u5bf9\u5e8f\u5217\u7ed3\u679c\u8fdb\u884c\u5206\u6790\u3002\u53ef\u4ee5\u7528 --report-file \u53c2\u6570\u751f\u6210\u7684\u62a5\u544a\u6587\u4ef6\uff0c\u91cc\u9762\u5c06\u5404\u4e2a\u7269\u79cd\u8fdb\u884c\u4e86\u6c47\u603b\u3002\u6216\u8005\u7528 centrifuge-kreport \u5de5\u5177\u5c06reads\u626b\u63cf\u7684\u7ed3\u679c\u9ed8\u8ba4\u6587\u4ef6 centrifuge_report.tsv \u8f6c\u6362\u6210 kraken \u683c\u5f0f\u7684\u7269\u79cd\u5206\u7c7b\u6811\u72b6\u7ed3\u679c\u3002\u8fd9\u4e2a\u6570\u636e\u7ed3\u679c\u53ef\u4ee5\u7528 pavian \u7b49\u8fdb\u884c\u6570\u636e\u53ef\u89c6\u5316\u3002 ( centrifuge ) $ centrifuge-kreport -x $HOME /dbs/centrifuge/p_compressed+h+v centrifuge_report.tsv > kraken.result","title":"\u4f7f\u7528"},{"location":"book/C12_Metagenomics-Analysis/03_bracken/","text":"Bracken \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Kraken\u662f\u7528\u4e8e\u5206\u7c7b\u5b8f\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u7684\u975e\u5e38\u5feb\u901f\uff0c\u51c6\u786e\u7684\u7a0b\u5e8f\u3002\u5b83\u9700\u8981\u4e00\u7ec4\u8bfb\u6570\uff0c\u91cd\u53e0\u7fa4\u6216\u5176\u4ed6DNA\u5e8f\u5217\uff0c\u5e76\u4e3a\u6bcf\u4e00\u4e2a\u5206\u914d\u4e00\u4e2a\u5206\u7c7b\u6807\u7b7e\uff08\u7269\u79cd\uff0c\u5c5e\u7b49\uff09\u3002\u53bb\u5e74\u6211\u4eec\u53d1\u73b0\u6709\u4e9b\u4eba\u76f4\u63a5\u4f7f\u7528Kraken\u8fdb\u884c\u4e30\u91cf\u4f30\u8ba1 - \u4f30\u8ba1\u6837\u672c\u4e2d\u7269\u79cd\u7684\u76f8\u5bf9\u6bd4\u4f8b - \u5e76\u57fa\u4e8e\u5047\u8bbeKraken\u7684\u8f93\u51fa\u53ef\u4ee5\u7528\u4e8e\u8fd9\u79cd\u65b9\u5f0f\u53d1\u8868\u8bba\u6587\u3002\u4f46\u662f\uff0c\u8fd9\u662f\u4e0d\u6b63\u786e\u7684\u3002\u5982\u679c\u60a8\u7ed9Kraken\u4e00\u5957\u5b8f\u57fa\u56e0\u7ec4\u9605\u8bfb\u5668\u8fdb\u884c\u5206\u7c7b\uff0c\u5b83\u5c06\u4e3a\u6bcf\u4e2a\u9605\u8bfb\u5206\u914d\u6700\u5177\u4f53\u7684\u6807\u7b7e\u3002\u4f46\u662f\u5f88\u591a\u65f6\u5019\uff0c\u8fd9\u4e9b\u6807\u7b7e\u5e76\u4e0d\u5c5e\u4e8e\u7269\u79cd\u5c42\u9762\u3002\u4f8b\u5982\uff0c\u5982\u679c150bp\u7684\u8bfb\u6570\u4e0e\u4e24\u4e2a\u4e0d\u540c\u7684\u7269\u79cd\u5b8c\u5168\u76f8\u540c\uff0cKraken\u5c06\u628a\u5b83\u5206\u914d\u7ed9\u5b83\u4eec\u7684\u6700\u4f4e\u5171\u540c\u7956\u5148\uff08LCA\uff09\uff0c\u5b83\u53ef\u80fd\u5c5e\u4e8e\u7b49\u7ea7\u6216\u66f4\u9ad8\u3002\u5bf9\u4e8e\u542b\u6709\u4e24\u4e2a\u6216\u66f4\u591a\u9ad8\u5ea6\u76f8\u4f3c\u7269\u79cd\u7684\u6837\u54c1\uff0c\u8fd9\u610f\u5473\u7740\u7269\u79cd\u7279\u5f02\u6027\u8bfb\u6570\u7684\u6570\u91cf\u53ef\u80fd\u8fdc\u8fdc\u5c11\u4e8e\u9884\u671f\u3002 \uff08\u6211\u4eec\u5e94\u8be5\u6ce8\u610f\u5230\uff0cKraken\u7ecf\u5e38\u5728\u5e94\u53d8\u7ea7\u522b\u6307\u5b9a\u8bfb\u53d6\u3002\uff09 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5f00\u53d1\u4e86Bracken\uff1a\u7528KrakEN\u5206\u7c7b\u540e\u7684\u8d1d\u53f6\u65af\u91cd\u4f30\u4e30\u5ea6\u3002 Bracken\u4f7f\u7528\u8d1d\u53f6\u65af\u7b97\u6cd5\u548cKraken\u5206\u7c7b\u7ed3\u679c\u6765\u4f30\u8ba1\u5b8f\u57fa\u56e0\u7ec4\u6837\u672c\u7684\u7269\u79cd\u6c34\u5e73\u6216\u5c5e\u6c34\u5e73\u4e30\u5ea6\u3002\u8fd9\u4e2a\u65b0\u5de5\u5177\u5728\u6211\u4eec\u7684 PeerJ\u8bba\u6587 \u6216 Bracken \u8f6f\u4ef6\u7f51\u7ad9\u4e2d\u6709\u8be6\u7ec6\u63cf\u8ff0\u3002 Bracken\u5c06Kraken\u7684\u8f93\u51fa\u8f6c\u5316\u4e3a\u7269\u79cd\u4e30\u5ea6\u7684\u4f30\u8ba1\u3002\u8fd9\u5728\u540c\u4e00\u6837\u54c1\u4e2d\u51fa\u73b0\u9ad8\u5ea6\u76f8\u4f3c\u7684\u7269\u79cd\u65f6\u7279\u522b\u6709\u7528\u3002\u4f8b\u5982\uff0c\u725b\u5206\u679d\u6746\u83cc\u548c\u7ed3\u6838\u5206\u679d\u6746\u83cc\u7684\u57fa\u56e0\u7ec4\u662f99.95\uff05\u76f8\u540c\u7684\u3002\u56e0\u6b64\uff0cKraken\u5c06\u8fd9\u4e9b\u7269\u79cd\u7684\u7edd\u5927\u591a\u6570\u8bfb\u6570\u5206\u7c7b\u4e3a\u5206\u679d\u6746\u83cc\u5c5e\uff08\u56e0\u4e3a\u5b83\u4eec\u662f\u65e0\u6cd5\u533a\u5206\u7684\uff09\u3002\u4f46\u662f\uff0c\u7279\u5b9a\u6837\u672c\u4e2d\u7684\u4e00\u4e9b\u8bfb\u6bb5\u901a\u5e38\u6765\u81ea\u57fa\u56e0\u7ec4\u7684\u72ec\u7279\uff08\u6216\u7269\u79cd\u7279\u5f02\u6027\uff09\u90e8\u5206\u3002 Bracken\u4f7f\u7528\u8fd9\u4e9b\u4fe1\u606f\uff0c\u52a0\u4e0a\u5173\u4e8e\u59ca\u59b9\u7269\u79cd\u4e4b\u95f4\u76f8\u4f3c\u6027\u7684\u4fe1\u606f\uff0c\u5c06\u5c5e\u6027\u7ea7\u522b\u7684\u8bfb\u6570\u201c\u4e0b\u63a8\u201d\u5230\u7269\u79cd\u7ea7\u522b\u3002\u5982\u679c\u60a8\u6709\u5174\u8da3\u4e86\u89e3\u6837\u672c\u4e2d\u6bcf\u79cd\u5206\u679d\u6746\u83cc\u79cd\u7c7b\u7684\u5b58\u5728\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528Kraken\uff0c\u7136\u540e\u4f7f\u7528Bracken\u6765\u4f30\u7b97\u6bcf\u79cd\u7269\u79cd\u7684\u76f8\u5bf9\u4e30\u5ea6\u3002","title":"03. bracken"},{"location":"book/C12_Metagenomics-Analysis/03_bracken/#bracken","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Kraken\u662f\u7528\u4e8e\u5206\u7c7b\u5b8f\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u7684\u975e\u5e38\u5feb\u901f\uff0c\u51c6\u786e\u7684\u7a0b\u5e8f\u3002\u5b83\u9700\u8981\u4e00\u7ec4\u8bfb\u6570\uff0c\u91cd\u53e0\u7fa4\u6216\u5176\u4ed6DNA\u5e8f\u5217\uff0c\u5e76\u4e3a\u6bcf\u4e00\u4e2a\u5206\u914d\u4e00\u4e2a\u5206\u7c7b\u6807\u7b7e\uff08\u7269\u79cd\uff0c\u5c5e\u7b49\uff09\u3002\u53bb\u5e74\u6211\u4eec\u53d1\u73b0\u6709\u4e9b\u4eba\u76f4\u63a5\u4f7f\u7528Kraken\u8fdb\u884c\u4e30\u91cf\u4f30\u8ba1 - \u4f30\u8ba1\u6837\u672c\u4e2d\u7269\u79cd\u7684\u76f8\u5bf9\u6bd4\u4f8b - \u5e76\u57fa\u4e8e\u5047\u8bbeKraken\u7684\u8f93\u51fa\u53ef\u4ee5\u7528\u4e8e\u8fd9\u79cd\u65b9\u5f0f\u53d1\u8868\u8bba\u6587\u3002\u4f46\u662f\uff0c\u8fd9\u662f\u4e0d\u6b63\u786e\u7684\u3002\u5982\u679c\u60a8\u7ed9Kraken\u4e00\u5957\u5b8f\u57fa\u56e0\u7ec4\u9605\u8bfb\u5668\u8fdb\u884c\u5206\u7c7b\uff0c\u5b83\u5c06\u4e3a\u6bcf\u4e2a\u9605\u8bfb\u5206\u914d\u6700\u5177\u4f53\u7684\u6807\u7b7e\u3002\u4f46\u662f\u5f88\u591a\u65f6\u5019\uff0c\u8fd9\u4e9b\u6807\u7b7e\u5e76\u4e0d\u5c5e\u4e8e\u7269\u79cd\u5c42\u9762\u3002\u4f8b\u5982\uff0c\u5982\u679c150bp\u7684\u8bfb\u6570\u4e0e\u4e24\u4e2a\u4e0d\u540c\u7684\u7269\u79cd\u5b8c\u5168\u76f8\u540c\uff0cKraken\u5c06\u628a\u5b83\u5206\u914d\u7ed9\u5b83\u4eec\u7684\u6700\u4f4e\u5171\u540c\u7956\u5148\uff08LCA\uff09\uff0c\u5b83\u53ef\u80fd\u5c5e\u4e8e\u7b49\u7ea7\u6216\u66f4\u9ad8\u3002\u5bf9\u4e8e\u542b\u6709\u4e24\u4e2a\u6216\u66f4\u591a\u9ad8\u5ea6\u76f8\u4f3c\u7269\u79cd\u7684\u6837\u54c1\uff0c\u8fd9\u610f\u5473\u7740\u7269\u79cd\u7279\u5f02\u6027\u8bfb\u6570\u7684\u6570\u91cf\u53ef\u80fd\u8fdc\u8fdc\u5c11\u4e8e\u9884\u671f\u3002 \uff08\u6211\u4eec\u5e94\u8be5\u6ce8\u610f\u5230\uff0cKraken\u7ecf\u5e38\u5728\u5e94\u53d8\u7ea7\u522b\u6307\u5b9a\u8bfb\u53d6\u3002\uff09 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5f00\u53d1\u4e86Bracken\uff1a\u7528KrakEN\u5206\u7c7b\u540e\u7684\u8d1d\u53f6\u65af\u91cd\u4f30\u4e30\u5ea6\u3002 Bracken\u4f7f\u7528\u8d1d\u53f6\u65af\u7b97\u6cd5\u548cKraken\u5206\u7c7b\u7ed3\u679c\u6765\u4f30\u8ba1\u5b8f\u57fa\u56e0\u7ec4\u6837\u672c\u7684\u7269\u79cd\u6c34\u5e73\u6216\u5c5e\u6c34\u5e73\u4e30\u5ea6\u3002\u8fd9\u4e2a\u65b0\u5de5\u5177\u5728\u6211\u4eec\u7684 PeerJ\u8bba\u6587 \u6216 Bracken \u8f6f\u4ef6\u7f51\u7ad9\u4e2d\u6709\u8be6\u7ec6\u63cf\u8ff0\u3002 Bracken\u5c06Kraken\u7684\u8f93\u51fa\u8f6c\u5316\u4e3a\u7269\u79cd\u4e30\u5ea6\u7684\u4f30\u8ba1\u3002\u8fd9\u5728\u540c\u4e00\u6837\u54c1\u4e2d\u51fa\u73b0\u9ad8\u5ea6\u76f8\u4f3c\u7684\u7269\u79cd\u65f6\u7279\u522b\u6709\u7528\u3002\u4f8b\u5982\uff0c\u725b\u5206\u679d\u6746\u83cc\u548c\u7ed3\u6838\u5206\u679d\u6746\u83cc\u7684\u57fa\u56e0\u7ec4\u662f99.95\uff05\u76f8\u540c\u7684\u3002\u56e0\u6b64\uff0cKraken\u5c06\u8fd9\u4e9b\u7269\u79cd\u7684\u7edd\u5927\u591a\u6570\u8bfb\u6570\u5206\u7c7b\u4e3a\u5206\u679d\u6746\u83cc\u5c5e\uff08\u56e0\u4e3a\u5b83\u4eec\u662f\u65e0\u6cd5\u533a\u5206\u7684\uff09\u3002\u4f46\u662f\uff0c\u7279\u5b9a\u6837\u672c\u4e2d\u7684\u4e00\u4e9b\u8bfb\u6bb5\u901a\u5e38\u6765\u81ea\u57fa\u56e0\u7ec4\u7684\u72ec\u7279\uff08\u6216\u7269\u79cd\u7279\u5f02\u6027\uff09\u90e8\u5206\u3002 Bracken\u4f7f\u7528\u8fd9\u4e9b\u4fe1\u606f\uff0c\u52a0\u4e0a\u5173\u4e8e\u59ca\u59b9\u7269\u79cd\u4e4b\u95f4\u76f8\u4f3c\u6027\u7684\u4fe1\u606f\uff0c\u5c06\u5c5e\u6027\u7ea7\u522b\u7684\u8bfb\u6570\u201c\u4e0b\u63a8\u201d\u5230\u7269\u79cd\u7ea7\u522b\u3002\u5982\u679c\u60a8\u6709\u5174\u8da3\u4e86\u89e3\u6837\u672c\u4e2d\u6bcf\u79cd\u5206\u679d\u6746\u83cc\u79cd\u7c7b\u7684\u5b58\u5728\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528Kraken\uff0c\u7136\u540e\u4f7f\u7528Bracken\u6765\u4f30\u7b97\u6bcf\u79cd\u7269\u79cd\u7684\u76f8\u5bf9\u4e30\u5ea6\u3002","title":"Bracken"},{"location":"book/C12_Metagenomics-Analysis/04_sourmash/","text":"sourmash \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u5b89\u88c5 \u00b6 \u4f7f\u7528 \u00b6","title":"04. sourmash"},{"location":"book/C12_Metagenomics-Analysis/04_sourmash/#sourmash","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb","title":"sourmash"},{"location":"book/C12_Metagenomics-Analysis/04_sourmash/#_1","text":"","title":"\u5b89\u88c5"},{"location":"book/C12_Metagenomics-Analysis/04_sourmash/#_2","text":"","title":"\u4f7f\u7528"},{"location":"book/C12_Metagenomics-Analysis/05_clark/","text":"CLARK \u00b6","title":"05. clark"},{"location":"book/C12_Metagenomics-Analysis/05_clark/#clark","text":"","title":"CLARK"},{"location":"book/C12_Metagenomics-Analysis/06_krona/","text":"Krona \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5 \u00b6 $ conda create -n krona krona $ conda activate krona ( krona ) $ rm -rf $HOME /.conda/envs/krona/opt/krona/taxonomy ( krona ) $ mkdir $HOME /dbs/krona/taxonomy ( krona ) $ ln -s $HOME /dbs/krona/taxonomy $HOME /.cona/envs/krona/opt/krona/taxonomy ( krona ) $ cd $HOME /dbs/krona/taxonomy ( krona ) $ ktUpdateTaxonomy.sh .","title":"06. krona"},{"location":"book/C12_Metagenomics-Analysis/06_krona/#krona","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Krona"},{"location":"book/C12_Metagenomics-Analysis/06_krona/#_1","text":"$ conda create -n krona krona $ conda activate krona ( krona ) $ rm -rf $HOME /.conda/envs/krona/opt/krona/taxonomy ( krona ) $ mkdir $HOME /dbs/krona/taxonomy ( krona ) $ ln -s $HOME /dbs/krona/taxonomy $HOME /.cona/envs/krona/opt/krona/taxonomy ( krona ) $ cd $HOME /dbs/krona/taxonomy ( krona ) $ ktUpdateTaxonomy.sh .","title":"\u5b89\u88c5"},{"location":"book/C12_Metagenomics-Analysis/07_pavian/","text":"Pavian \u00b6","title":"07. pavian"},{"location":"book/C12_Metagenomics-Analysis/07_pavian/#pavian","text":"","title":"Pavian"},{"location":"book/C12_Metagenomics-Analysis/08_supri/","text":"Supri \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Supri \u662f\u4e00\u4e2a\u8001\u724c\u7684\u5b8f\u57fa\u56e0\u7ec4\u5e8f\u5217\u626b\u63cf\u8f6f\u4ef6\uff0c\u521b\u5efa\u5b83\u4e4b\u521d\u662f\u7528\u6765\u505a\u4e34\u5e8a\u4e0a\u75c5\u539f\u5fae\u751f\u7269\u5e8f\u5217\u68c0\u7d22\u7684\u3002 SUPRI \u662f\u4e3b\u8981\u7528\u6765\u5bf9\u4e34\u5e8a\u6837\u54c1\u7684 shotgun metagenomics \u6d4b\u5e8f\u6570\u636e\u4e2d\u5bfb\u627e\u5e76\u9274\u5b9a\u75c5\u539f\u7684\u5de5\u5177\u3002\u5b83\u67092\u79cd\u6a21\u5f0f\uff1aFast mode \u548c Comprehensive mode\u3002\u524d\u8005\u53ef\u4ee5\u5feb\u901f\u5bf9\u6d4b\u5e8f\u7684 reads \u8fdb\u884c Mapping\uff0c\u627e\u5230\u7ec6\u83cc\u6216\u75c5\u6bd2 reads\u3002\u540e\u8005\u5206\u6790\u66f4\u4e3a\u8be6\u7ec6\uff0c\u9664\u4e86\u7ec6\u83cc\u75c5\u6bd2\u5916\u8fd8\u6bd4\u5bf9\u4e86\u771f\u83cc\uff0c\u5bc4\u751f\u866b\u7b49\u5176\u4ed6\u7269\u79cd\u6570\u636e\u5e93\uff0c\u5e76\u4e14\u8fdb\u884cde novo assembly\uff0c\u5bf9contig\u4e5f\u8fdb\u884c Mapping\uff0c\u867d\u7136\u8017\u65f6\u66f4\u957f\uff0c\u4f46\u53ef\u4ee5\u83b7\u5f97\u8986\u76d6\u5ea6\uff0ctaxonomic \u5206\u7c7b\u7b49\u4fe1\u606f\u3002 1.\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 \u00b6 \u5148\u8981\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177\uff1a fastQValidator Minimo v1.6 Abyss v1.3.5 RAPSearch v2.12 seqtk v 1.0r31 SNAP v0.15 gt v1.5.1 fastq fqextract cutadapt v1.2.1 prinseq-lite.pl dropcache 2.\u5b89\u88c5 SUPRI \u00b6 $ wget https://github.com/chiulab/surpi/releases/download/v1.0.18/surpi-1.0.18.tar.gz $ tar zxf surpi-1.0.18.tar.gz -C surpi 3.\u5efa\u7acb\u6570\u636e\u5e93 \u00b6 $ mkdir -p SNAP_db $ create_taxonomy_db.sh 4.\u8fd0\u884cSURPI \u00b6 $ SURPI.sh -z input.fastq $ ./go_input & 5.\u8f93\u51fa\u7ed3\u679c \u00b6 \u5f53\u4ee5 Comprehensive mode \u8fd0\u884c\u540e\uff0c\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u6587\u4ef6\u5939\uff1a DATASETS_input deNovoASSEMBLY_input LOG_input OUTPUT_input TRASH_input \u7ed3\u679c\u6587\u4ef6\u5728OUTPUT_input\u6587\u4ef6\u5939\u91cc\uff0c\u201c.annotated\u201d \u6587\u4ef6\u662f SAM \u683c\u5f0f\u6216\u8005 -m8 \u683c\u5f0f\u7684\u6bd4\u5bf9\u7ed3\u679c, taxonomic \u4fe1\u606f\u4e5f\u5728\u6587\u4ef6\u4e2d\u7684\u6700\u540e\u4e00\u884c\u4e2d\u3002 \u201c.counttable\u201d \u6587\u4ef6\u662f tab \u5206\u5272\u7684\u603b\u7ed3\u6587\u4ef6\u3002\u6bcf\u4e00\u884c\u8868\u793a\u4e0d\u540c\u5c42\u9762\u7684 taxonomic \u6ce8\u91ca\u4fe1\u606f\u3002 \u53c2\u8003\u8d44\u6599 \u00b6 SUPRI official","title":"08. supri"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#supri","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Supri \u662f\u4e00\u4e2a\u8001\u724c\u7684\u5b8f\u57fa\u56e0\u7ec4\u5e8f\u5217\u626b\u63cf\u8f6f\u4ef6\uff0c\u521b\u5efa\u5b83\u4e4b\u521d\u662f\u7528\u6765\u505a\u4e34\u5e8a\u4e0a\u75c5\u539f\u5fae\u751f\u7269\u5e8f\u5217\u68c0\u7d22\u7684\u3002 SUPRI \u662f\u4e3b\u8981\u7528\u6765\u5bf9\u4e34\u5e8a\u6837\u54c1\u7684 shotgun metagenomics \u6d4b\u5e8f\u6570\u636e\u4e2d\u5bfb\u627e\u5e76\u9274\u5b9a\u75c5\u539f\u7684\u5de5\u5177\u3002\u5b83\u67092\u79cd\u6a21\u5f0f\uff1aFast mode \u548c Comprehensive mode\u3002\u524d\u8005\u53ef\u4ee5\u5feb\u901f\u5bf9\u6d4b\u5e8f\u7684 reads \u8fdb\u884c Mapping\uff0c\u627e\u5230\u7ec6\u83cc\u6216\u75c5\u6bd2 reads\u3002\u540e\u8005\u5206\u6790\u66f4\u4e3a\u8be6\u7ec6\uff0c\u9664\u4e86\u7ec6\u83cc\u75c5\u6bd2\u5916\u8fd8\u6bd4\u5bf9\u4e86\u771f\u83cc\uff0c\u5bc4\u751f\u866b\u7b49\u5176\u4ed6\u7269\u79cd\u6570\u636e\u5e93\uff0c\u5e76\u4e14\u8fdb\u884cde novo assembly\uff0c\u5bf9contig\u4e5f\u8fdb\u884c Mapping\uff0c\u867d\u7136\u8017\u65f6\u66f4\u957f\uff0c\u4f46\u53ef\u4ee5\u83b7\u5f97\u8986\u76d6\u5ea6\uff0ctaxonomic \u5206\u7c7b\u7b49\u4fe1\u606f\u3002","title":"Supri"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#1","text":"\u5148\u8981\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177\uff1a fastQValidator Minimo v1.6 Abyss v1.3.5 RAPSearch v2.12 seqtk v 1.0r31 SNAP v0.15 gt v1.5.1 fastq fqextract cutadapt v1.2.1 prinseq-lite.pl dropcache","title":"1.\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#2-supri","text":"$ wget https://github.com/chiulab/surpi/releases/download/v1.0.18/surpi-1.0.18.tar.gz $ tar zxf surpi-1.0.18.tar.gz -C surpi","title":"2.\u5b89\u88c5 SUPRI"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#3","text":"$ mkdir -p SNAP_db $ create_taxonomy_db.sh","title":"3.\u5efa\u7acb\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#4surpi","text":"$ SURPI.sh -z input.fastq $ ./go_input &","title":"4.\u8fd0\u884cSURPI"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#5","text":"\u5f53\u4ee5 Comprehensive mode \u8fd0\u884c\u540e\uff0c\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u6587\u4ef6\u5939\uff1a DATASETS_input deNovoASSEMBLY_input LOG_input OUTPUT_input TRASH_input \u7ed3\u679c\u6587\u4ef6\u5728OUTPUT_input\u6587\u4ef6\u5939\u91cc\uff0c\u201c.annotated\u201d \u6587\u4ef6\u662f SAM \u683c\u5f0f\u6216\u8005 -m8 \u683c\u5f0f\u7684\u6bd4\u5bf9\u7ed3\u679c, taxonomic \u4fe1\u606f\u4e5f\u5728\u6587\u4ef6\u4e2d\u7684\u6700\u540e\u4e00\u884c\u4e2d\u3002 \u201c.counttable\u201d \u6587\u4ef6\u662f tab \u5206\u5272\u7684\u603b\u7ed3\u6587\u4ef6\u3002\u6bcf\u4e00\u884c\u8868\u793a\u4e0d\u540c\u5c42\u9762\u7684 taxonomic \u6ce8\u91ca\u4fe1\u606f\u3002","title":"5.\u8f93\u51fa\u7ed3\u679c"},{"location":"book/C12_Metagenomics-Analysis/08_supri/#_1","text":"SUPRI official","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/","text":"Metagenomics\u6570\u636e\u5206\u6790 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u75c5\u539f\u5fae\u751f\u7269 Metagenomics \u6839\u636e\u7814\u7a76\u5185\u5bb9\uff0c\u53ef\u4ee5\u5206\u4e3a\u51e0\u4e2a\u65b9\u5411\uff1a whole genomes \u6d4b\u5e8f\uff0c\u4f8b\u5982 shotgun metagenomics \u5bfb\u627e\u6240\u6709\u5e8f\u5217; 16s rRNA \u6d4b\u5e8f\uff0c\u4f8b\u5982\u7814\u7a76\u7fa4\u83cc\u7ed3\u6784\uff1b Transcriptome \u6d4b\u5e8f\uff0c\u7814\u7a76\u6574\u4e2a\u6837\u54c1\u4e2d\u8f6c\u5f55\u7ec4\u3002 Metagenomics \u6570\u636e\u5206\u6790\u7684\u57fa\u672c\u6d41\u7a0b\uff1a Trimming: \u5207\u9664\u5f15\u7269\u5e8f\u5217\uff0cbarcode\u5e8f\u5217\u7b49 Binnings: OTUs: Chimeras \u5e38\u7528\u5de5\u5177\uff1a MEGAN mothur QIIME AXIOME & CloVR 1. Meta-BEETL \u00b6 BEETL \u662f\u4e00\u5957\u505a Burrows-Wheeler Transform \u7684\u5de5\u5177\u96c6\uff0c[Meta-BEETL] \u662f BEETL \u4e0b\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u7528\u6765\u5206\u6790\u57fa\u4e8e Shotgun metagenomics \u7684\u5fae\u751f\u7269\u6570\u636e\u3002 1. \u5df2\u6574\u7406\u7684\u6570\u636e\u5e93 \u00b6 \u4f5c\u8005\u5df2\u7ecf\u5c06\u7814\u7a76\u6240\u7528\u5230\u7684\u6570\u636e\u5e93\u6574\u7406\u540e\u63d0\u4ea4\u5230 Amazon S3 \u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002\u603b\u6570\u636e\u91cf\u572824G\u5de6\u53f3\u3002 ~$ mkdir BeetlMetagenomeDatabase && cd BeetlMetagenomeDatabase ~/BeetlMetagenomDatabase$ for i in ` curl https://s3.amazonaws.com/metaBEETL | grep -oP \"[^>]*bz2\" ` ; \\ > do wget https://s3.amazonaws.com/metaBEETL/ $i & done \u9759\u6001\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002 https://s3.amazonaws.com/metaBEETL/filecounter.csv.bz2 https://s3.amazonaws.com/metaBEETL/headerFile.csv.bz2 https://s3.amazonaws.com/metaBEETL/names.dmp.bz2 https://s3.amazonaws.com/metaBEETL/ncbiFileNumToTaxTree.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B06.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C06.bz2 \u4e0b\u8f7d\u5b8c\u6210\u540e\u89e3\u538b\u7f29\u3002 ~/BeetlMetagenomDatabase$ bunzip2 *.bz2 ~/BeetlMetagenomDatabase$ export METAGENOME_DATABASE_PATH=`pwd` 2. \u81ea\u5df1\u5efa\u7acb\u6570\u636e\u5e93 \u00b6 \u5904\u4e8e\u5b9e\u9645\u76ee\u7684\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981\u8fd9\u4e48\u5927\u7684\u6570\u636e\u5e93\uff0c\u6216\u8005\u9700\u8981\u66f4\u591a\u5176\u4ed6\u7684\u6570\u636e\u52a0\u5165\u5230\u6570\u636e\u5e93\uff0c\u90a3\u5c31\u9700\u8981\u81ea\u884c\u5efa\u7acb\u6570\u636e\u5e93\u3002 2.1 \u5b89\u88c5 SeqAn \u00b6 SeqAn \u662f\u4e00\u4e2a\u9ad8\u6548\u7684 C++ \u7b97\u6cd5\u548c\u6570\u636e\u7ed3\u6784\u5e93\uff0c\u7528\u4e8e\u5206\u6790\u751f\u7269\u5e8f\u5217\u7b49\u7528\u9014\u3002\u8bbf\u95ee SeqAn \u4e0b\u8f7d\u5e76\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\u7f16\u8bd1BEETL\u65f6\u53ef\u4ee5\u6dfb\u52a0 --with-seqan \u53c2\u6570\u3002 # \u5b89\u88c5\u4f9d\u8d56\u5305 ~$ sudo apt-get install g++ cmake python zlib1g-dev libbz2-dev libboost-dev ~$ cd ~/apps ~/apps$ git clone https://github.com/seqan/seqan.git && cd seqan ~/apps/seqan$ git checkout -b develop origin/develop 2.2 \u4e0b\u8f7d\u76ee\u6807\u5e8f\u5217 \u00b6 \u4e0b\u8f7d\u9700\u8981\u7684\u5e8f\u5217\uff0c\u6bd4\u5982NCBI\u4e0a\u7ec6\u83cc\u7684\u57fa\u56e0\u7ec4 ref \u6570\u636e\u3002 ~/BeetlMetagenomDatabase$ wget ftp://ftp.ncbi.nlm.nih.gov/genomes/Bacteria/all.fna.tar.gz -P downloads ~/BeetlMetagenomDatabase$ mkdir all.fna ~/BeetlMetagenomDatabase$ tar xzf downloads/all.fna.tar.gz -C all.fna/ 2.3 \u521b\u5efa\u53bb\u9664\u8d28\u7c92\u5e8f\u5217\u7684\u5355\u57fa\u56e0\u7ec4\u5e8f\u5217 \u00b6 ~/BeetlMetagenomDatabase$ metabeetl-db-genomesToSingleSeq -f all.fna/*/*.fna -s singleSeqGenomes ~/BeetlMetagenomDatabase$ cd singleSeqGenomes 2.4 \u521b\u5efaBWT \u00b6 \u4fee\u6539 metabeetl-db-arrayBWT.sh \u6587\u4ef6\u91cc\u6570\u636e\u5e93\u8def\u5f84\uff0c\u521b\u5efaG_* \u548c G_*_rev \u6587\u4ef6\u7684BWTs\uff0c\u7528qsub\u6765\u5411\u7cfb\u7edf\u63d0\u4ea4\u4efb\u52a1\u3002\u4e5f\u53ef\u4ee5\u8fd0\u884c metabeetl-db-makeBWTSkew \u6765\u4e00\u4e2a\u4e2a\u521b\u5efa\u3002 ~/BeetlMetagenomDatabase$ cp ` which metabeetl-db-arrayBWT.sh ` . ~/BeetlMetagenomDatabase$ vim metabeetl-db-arrayBWT.sh # \u5982\u679c\u6587\u4ef6\u662f G_1 - G_500\uff0c\u90a3\u4e48n=1-500 ~/BeetlMetagenomDatabase$ qsub -t n metabeetl-db-arrayBWT.sh # \u6216\u8005 ~/BeetlMetagenomDatabase$ ( echo -n \"all: \" ; for i in G_* ; do echo -n \" bwt_ ${ i } -B00\" ; done ; echo -e \"\\n\" ; \\ > for i in G_* ; do echo \"bwt_ ${ i } -B00: ${ i } \" ; echo -e \"\\tmetabeetl-db-makeBWTSkew ${ i } ${ i } \\n\" ; done ) > Makefile ~$ make -j 2.5 \u5408\u5e76\u5e8f\u5217 \u00b6 \u5728\u4e00\u53f0\u5185\u5b58>60G\u7684\u673a\u5668\u4e0a\u5c06\u5e8f\u5217\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5e76\u5427\u6240\u6709\u6587\u4ef6\u5408\u5e76\u3002 ~/BeetlMetagenomDatabase$ for pileNum in ` seq 0 5 ` ; do metabeetl-db-mergeBacteria $pileNum ncbiMicros < ( ls G_* ) ; done \u751f\u6210\u7684\u6587\u4ef6\u540d\u79f0\u7c7b\u4f3c\uff1ancbiMicros-A0*, -B0* and -C0* -A0* \u5305\u542b\u6bcf\u4e2aBWT\u7684\u4f4d\u7f6e -B0* BWTs -C0* \u5305\u542b\u6bcf\u4e2aBWT\u4f4d\u7f6e\u7684\u6587\u4ef6\u53f7 \u6587\u4ef6 -B0* and -C0* \u7528\u4e8e\u8ba1\u6570\u7b97\u6cd5 2.6 \u8f6c\u6362BWT\u6587\u4ef6\u683c\u5f0f \u00b6 \u53ef\u9009\u64cd\u4f5c\uff1a\u5c06BWT\u6587\u4ef6\u8f6c\u6362\u6210RLE BWT\u683c\u5f0f\uff0c\u8fd0\u884c\u53ef\u4ee5\u66f4\u5feb\u3002 ~/BeetlMetagenomDatabase$ for pileNum in ` seq 0 5 ` ; do \\ > mv ncbiMicros-B0 ${ pileNum } ncbiMicros-B0 ${ pileNum } .ascii ; \\ > beetl-convert \\ > --input-format = bwt_ascii \\ > --output-format = bwt_rle \\ > -i ncbiMicros-B0 ${ pileNum } .ascii \\ > -o ncbiMicros-B0 ${ pileNum } ; \\ > done 2.7 \u4e0b\u8f7dNCBI Taxoonmy \u00b6 ~$ cd tmp ~/tmp$ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump.tar.gz ~/tmp$ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/gi_taxid_nucl.dmp.gz ~/tmp$ tar xzf taxdump.tar.gz names.dmp nodes.dmp ~/tmp$ gunzip gi_taxid_nucl.dmp.gz \u7528 metabeetl-db-findTaxa \u811a\u672c\u67e5\u627e\u6570\u636e\u5e93\u4e2d\u7684taxonomic\u6811\u3002 Use the metabeetl-db-findTaxa script to find the taxonomic tree corresponding to the file numbers in the database. You will need the headerFile produced by running \"metabeetl-db-genomesToSingleSeq\" and fileCounter created during the merging of the bacterial reference genomes. Finally, you get for each file number in the database a taxonomic tree with the taxonomic ids. There will be some 0 in the taxonomic tree. This is a taxonomic id which could not be matched to: Superkingdom, Phylum, Order, Class, Family, Genus, Species or Strain. Sometimes there are just missing taxa in the taxonomy. We supplement this with the file metaBeetlExtraNames.dmp below. ~/BeetlMetagenomDatabase$ metabeetl-db-findTaxa \\ > -nA downloads/names.dmp \\ > -nO downloads/nodes.dmp \\ > -nG downloads/gi_taxid_nucl.dmp \\ > -h singleSeqGenomes/headerFile.csv \\ > -f singleSeqGenomes/filecounter.csv > ncbiFileNumToTaxTree ~/BeetlMEtagenomDatabase$ ( grep scientific downloads/names.dmp ; cat ${ BEETL_INSTALL_DIR } /share/beetl/metaBeetlExtraNames.dmp ) > metaBeetlTaxonomyNames.dmp 2.8 \u8ba1\u7b97 normalisation \u56e0\u5b50 \u00b6 ~/BeetlMetagenomDatabase$ mkdir normalisation ~/BeetlMetagenomDatabase$ cd normalisation ~/BeetlMetagenomDatabase/normalisation$ touch normalize.sh # normalize.sh for genome in ../singleSeqGenomes/G_* ; do ( genomeNum = ` basename ${ genome } ` mkdir ${ genomeNum } cd ${ genomeNum } for i in ../../singleSeqGenomes/bwt_ ${ genomeNum } -B0? ; do ln -s ${ i } ; done for i in ` seq 0 6 ` ; do touch bwt_ ${ genomeNum } -B0 ${ i } ; done time beetl-compare --mode = metagenomics -a bwt_ ${ genomeNum } -b ../../singleSeqGenomes/ncbiMicros -t ../../ncbiFileNumToTaxTree -w 20 -n 1 -k 50 --no-comparison-skip -v & > out.step1 rm -f BeetlCompareOutput/cycle51.subset* touch empty.txt time cat BeetlCompareOutput/cycle*.subset* | metabeetl-convertMetagenomicRangesToTaxa ../../ncbiFileNumToTaxTree ../../singleSeqGenomes/ncbiMicros ../../metaBeetlTaxonomyNames.dmp empty.txt 20 50 - & > out.step2 cd .. ) & done ; wait for i in ` seq 1 2977 ` ; do echo \"G_ $i \" ; X = ` grep -P \"G_ ${ i } $ \" ../singleSeqGenomes/filecounter.csv | cut -f 1 -d ',' ` ; TAX = ` grep -P \"^ ${ X } \" ../ncbiFileNumToTaxTree | tr -d \"\\n\\r\" ` ; echo \"TAX( ${ X } ): ${ TAX } .\" ; TAXID = ` echo \" ${ TAX } \" | sed 's/\\( 0\\)*$//g' | awk '{print $NF}' ` ; echo \"TAXID= ${ TAXID } \" ; COUNTS = ` grep Counts G_ ${ i } /out.step2 | head -1 ` ; echo \"COUNTS= ${ COUNTS } \" ; MAIN_COUNT = ` echo \" ${ COUNTS } \" | sed \"s/^.* ${ TAXID } :\\([0-9]*\\) .* $ /\\1/ ; s/Counts.*/0/\" ` ; echo \"MAIN_COUNT= ${ MAIN_COUNT } \" ; SUM = ` echo \" ${ COUNTS } \" | tr ' ' '\\n' | sed 's/.*://' | awk 'BEGIN { sum=0 } { sum+=$1 } END { print sum }' ` ; echo \"SUM= $SUM \" ; PERCENT = ` echo -e \"scale=5\\n100* ${ MAIN_COUNT } / ${ SUM } \" | bc ` ; echo \"PERCENT= ${ PERCENT } \" ; echo \"FINAL: G_ ${ i } ${ TAXID } ${ MAIN_COUNT } ${ SUM } ${ COUNTS } \" ; done > r2977 grep FINAL r2977 > ../normalisation.txt 2.9 \u521b\u5efa\u6570\u636e\u5e93\u6587\u4ef6\u5939 \u00b6 ~$ mkdir metaBeetlNcbiDb ~$ cd ~/metaBeetlNcbiDb ~$ ln -s ../ncbiFileNumToTaxTree ~$ ln -s ../normalisation.txt ~$ ln -s ../downloads/metaBeetlTaxonomyNames.dmp ~$ ln -s ../singleSeqGenomes/filecounter.csv ~$ ln -s ../singleSeqGenomes/headerFile.csv ~$ for i in ../singleSeqGenomes/ncbiMicros- [ BC ] 0 [ 0 -5 ] ; do ln -s $i ; done 3. \u5206\u6790\u6570\u636e \u00b6 3.1 \u83b7\u53d6\u6570\u636e \u00b6 \u7528 SRS013948 \u8fd9\u4e2a\u4eba\u7c7b\u80a0\u9053\u7ec6\u83cc\u7ec4\u7814\u7a76\u9879\u76ee\u7684\u6570\u636e\u4f5c\u4e3a\u4f8b\u5b50\u3002\u9996\u5148\u4e0b\u8f7d\u6570\u636e: # http download ~/data$ wget http://downloads.hmpdacc.org/data/Illumina/throat/SRS013948.tar.bz2 # ftp download ~/data$ wget ftp://public-ftp.hmpdacc.org/Illumina/throat/SRS013948.tar.bz2 # \u89e3\u538b\u7f29 ~/data$ tar xjf SRS013948.tar.bz2 ~/data$ ls -l \u89e3\u538b\u7f29\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u97623\u4e2a\u6587\u4ef6\uff1a SRS013948.denovo_duplicates_marked.trimmed.1.fastq SRS013948.denovo_duplicates_marked.trimmed.2.fastq SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq 3.2 \u8f6c\u6362\u6570\u636e\u548c\u5408\u5e76\u6570\u636e \u00b6 ~/data$ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.1.fastq \\ > -o paddedSeq1.seq \\ > --sequence-length = 100 ~/data$ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.2.fastq \\ > -o paddedSeq2.seq \\ > --sequence-length = 100 ~/data$ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq \\ > -o paddedSeqSingleton.seq \\ > --sequence-length = 100 ~/data$ cat paddedSeq1.seq paddedSeq2.seq paddedSeqSingleton.seq > SRS013948.seq 3.3 \u4ee5 metagenomic \u6a21\u5f0f\u8fd0\u884c BEETL \u00b6 \u521b\u5efa BWT \u53d8\u6362\uff0c\u7136\u540e\u8fd0\u884c metagenomic \u6a21\u5f0f\u7684 BEETL ~/data$ beetl-bwt -i SRS013948.seq -o bwt_SRS013948 ~/data$ beetl-compare \\ > --mode = metagenomics \\ > -a bwt_SRS013948 \\ > -b ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > -t ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > -w 20 \\ > -n 1 \\ > -k 50 \\ > --no-comparison-skip beetl-compare \u547d\u4ee4\u4f1a\u5728\u6587\u4ef6\u5939 BeetlCompareOutput \u91cc\u751f\u6210\u8bb8\u591a\u6587\u4ef6\u3002k\u503c\u8bbe\u7f6e\u8d8a\u5927\uff0c\u53ef\u4ee5\u83b7\u5f97\u8d8a\u591a\u7684\u4fe1\u606f\u6570\u636e\uff0c\u4f46\u662f\u8f93\u51fa\u6587\u4ef6\u4e5f\u4f1a\u53d8\u5f97\u8d8a\u5927\u3002 3.4 \u56fe\u5f62\u5316\u663e\u793a\u7ed3\u679c \u00b6 metabeetl-convertMetagenomicRangesToTaxa \u5de5\u5177\u6839\u636ekmer\u5339\u914d\uff0c\u4ece\u800c\u83b7\u5f97\u57fa\u56e0\u7ec4\u4ee5\u53ca\u4e0a\u4e00\u7ea7\u5206\u7c7b\u7684ID\u53f7\uff0c\u5e76\u751f\u6210\u6587\u5b57\u4e0e\u56fe\u5f62\u7ed3\u679c\uff08\u91c7\u7528Krona js\u53ef\u89c6\u5316\u5e93\u6765\u5f62\u6210\u7f51\u9875\u683c\u5f0f\u7684\u62a5\u544a\u6587\u4ef6\uff09\u3002 \u7531\u4e8e\u7b97\u6cd5\u539f\u56e0\u9700\u8981\u9891\u7e41\u8bfb\u53d6BWT\u4f4d\u7f6e\uff0c\u56e0\u6b64\u6570\u636e\u5e93\u6587\u4ef6 ncbiMicros-C0* \u6700\u597d\u653e\u5728\u8bfb\u53d6\u901f\u5ea6\u6bd4\u8f83\u5757\u7684\u78c1\u76d8\u6247\u533a\u6216\u8005\u78c1\u76d8\u91cc\u5982SSD\u786c\u76d8\u3002\u53e6\u5916\u5982\u679c\u5185\u5b58\u8db3\u591f\uff0c\u53ef\u4ee5\u7528 metabeetl-convertMetagenomicRangesToTaxa_withMmap \u5de5\u5177\uff0c\u5c06\u8fd9\u4e9b\u6bd4\u5bf9\u6587\u4ef6\u8bfb\u5165\u5185\u5b58\u4e2d\u52a0\u5feb\u901f\u5ea6\u3002 ~/data$ cat BeetlCompareOutput/cycle*.subset* | \\ > metabeetl-convertMetagenomicRangesToTaxa \\ > ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > ${ METAGENOME_DATABASE_PATH } /metaBeetlTaxonomyNames.dmp \\ > ${ METAGENOME_DATABASE_PATH } /normalisation.txt \\ > 20 50 - > metaBeetl.log \u751f\u6210\u7684TSV\uff08\u5236\u8868\u7b26\u5206\u9694\uff09\u6587\u4ef6\u5404\u5217\u542b\u4e49\uff1a \u5217 \u5b57\u6bb5\u542b\u4e49 column 1 Taxonomy Id column 2 Taxonomy level column 3 k-mer count column 4 k-mer count including children TSV\u6587\u4ef6\u7528\u9014\uff1a metaBeetl.tsv: raw k-mer counts for every leaves and ancestors. metaBeetl_normalised.tsv: some counts from ancestors are moved towards leaf items. The proportion thereof is pre-computed by aligning each individual genome to the full database. metaBeetl_normalised2.tsv: Only leaves of the taxonomy tree are kept, and counts are normalised relatively to genome sizes. Krona JS \u7ed3\u679c\u6587\u4ef6 - metaBeetl_krona.html - metaBeetl_krona_normalised.html - metaBeetl_krona_normalised2.html Reference \u00b6 http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3622627/ https://github.com/BEETL/BEETL.git 2. SUPRI \u00b6 SUPRI \u662f\u4e3b\u8981\u7528\u6765\u5bf9\u4e34\u5e8a\u6837\u54c1\u7684 shotgun metagenomics \u6d4b\u5e8f\u6570\u636e\u4e2d\u5bfb\u627e\u5e76\u9274\u5b9a\u75c5\u539f\u7684\u5de5\u5177\u3002\u5b83\u67092\u79cd\u6a21\u5f0f\uff1aFast mode \u548c Comprehensive mode\u3002\u524d\u8005\u53ef\u4ee5\u5feb\u901f\u5bf9\u6d4b\u5e8f\u7684 reads \u8fdb\u884c Mapping\uff0c\u627e\u5230\u7ec6\u83cc\u6216\u75c5\u6bd2 reads\u3002\u540e\u8005\u5206\u6790\u66f4\u4e3a\u8be6\u7ec6\uff0c\u9664\u4e86\u7ec6\u83cc\u75c5\u6bd2\u5916\u8fd8\u6bd4\u5bf9\u4e86\u771f\u83cc\uff0c\u5bc4\u751f\u866b\u7b49\u5176\u4ed6\u7269\u79cd\u6570\u636e\u5e93\uff0c\u5e76\u4e14\u8fdb\u884cde novo assembly\uff0c\u5bf9contig\u4e5f\u8fdb\u884c Mapping\uff0c\u867d\u7136\u8017\u65f6\u66f4\u957f\uff0c\u4f46\u53ef\u4ee5\u83b7\u5f97\u8986\u76d6\u5ea6\uff0ctaxonomic \u5206\u7c7b\u7b49\u4fe1\u606f\u3002 \u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 \u00b6 fastQValidator Minimo (v1.6) Abyss (v1.3.5) RAPSearch (v2.12) seqtk (v 1.0r31) SNAP (v0.15) gt (v1.5.1) fastq fqextract cutadapt (v1.2.1) prinseq dropcache \u5b89\u88c5 SUPRI \u00b6 $ wget https://github.com/chiulab/surpi/releases/download/v1.0.18/surpi-1.0.18.tar.gz $ tar zxf surpi-1.0.18.tar.gz -C surpi \u5efa\u7acb\u6570\u636e\u5e93 \u00b6 $ mkdir -p SNAP_db $ ~/apps/surpi/create_taxonomy_db.sh \u8fd0\u884cSURPI \u00b6 $ ~/apps/surpi/SURPI.sh -z input.fastq $ ~/apps/surpi/go_input & \u8f93\u51fa\u7ed3\u679c \u00b6 \u5f53\u4ee5 Comprehensive mode \u8fd0\u884c\u540e\uff0c\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u6587\u4ef6\u5939\uff1a DATASETS_input deNovoASSEMBLY_input LOG_input OUTPUT_input TRASH_input \u7ed3\u679c\u6587\u4ef6\u5728 OUTPUT_input \u6587\u4ef6\u5939\u91cc\uff0c\u201c.annotated\u201d \u6587\u4ef6\u662f SAM \u683c\u5f0f\u6216\u8005 -m8 \u683c\u5f0f\u7684\u6bd4\u5bf9\u7ed3\u679c, taxonomic \u4fe1\u606f\u4e5f\u5728\u6587\u4ef6\u4e2d\u7684\u6700\u540e\u4e00\u884c\u4e2d\u3002 \u201c.counttable\u201d \u6587\u4ef6\u662f tab \u5206\u5272\u7684\u603b\u7ed3\u6587\u4ef6\u3002\u6bcf\u4e00\u884c\u8868\u793a\u4e0d\u540c\u5c42\u9762\u7684 taxonomic \u6ce8\u91ca\u4fe1\u606f\u3002 Reference \u00b6 SUPRI official Reference \u00b6 Introduction to Metagenomics Data Analysis","title":"09. shotgun \u5206\u6790"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#metagenomics","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u75c5\u539f\u5fae\u751f\u7269 Metagenomics \u6839\u636e\u7814\u7a76\u5185\u5bb9\uff0c\u53ef\u4ee5\u5206\u4e3a\u51e0\u4e2a\u65b9\u5411\uff1a whole genomes \u6d4b\u5e8f\uff0c\u4f8b\u5982 shotgun metagenomics \u5bfb\u627e\u6240\u6709\u5e8f\u5217; 16s rRNA \u6d4b\u5e8f\uff0c\u4f8b\u5982\u7814\u7a76\u7fa4\u83cc\u7ed3\u6784\uff1b Transcriptome \u6d4b\u5e8f\uff0c\u7814\u7a76\u6574\u4e2a\u6837\u54c1\u4e2d\u8f6c\u5f55\u7ec4\u3002 Metagenomics \u6570\u636e\u5206\u6790\u7684\u57fa\u672c\u6d41\u7a0b\uff1a Trimming: \u5207\u9664\u5f15\u7269\u5e8f\u5217\uff0cbarcode\u5e8f\u5217\u7b49 Binnings: OTUs: Chimeras \u5e38\u7528\u5de5\u5177\uff1a MEGAN mothur QIIME AXIOME & CloVR","title":"Metagenomics\u6570\u636e\u5206\u6790"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#1-meta-beetl","text":"BEETL \u662f\u4e00\u5957\u505a Burrows-Wheeler Transform \u7684\u5de5\u5177\u96c6\uff0c[Meta-BEETL] \u662f BEETL \u4e0b\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u7528\u6765\u5206\u6790\u57fa\u4e8e Shotgun metagenomics \u7684\u5fae\u751f\u7269\u6570\u636e\u3002","title":"1. Meta-BEETL"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#1","text":"\u4f5c\u8005\u5df2\u7ecf\u5c06\u7814\u7a76\u6240\u7528\u5230\u7684\u6570\u636e\u5e93\u6574\u7406\u540e\u63d0\u4ea4\u5230 Amazon S3 \u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002\u603b\u6570\u636e\u91cf\u572824G\u5de6\u53f3\u3002 ~$ mkdir BeetlMetagenomeDatabase && cd BeetlMetagenomeDatabase ~/BeetlMetagenomDatabase$ for i in ` curl https://s3.amazonaws.com/metaBEETL | grep -oP \"[^>]*bz2\" ` ; \\ > do wget https://s3.amazonaws.com/metaBEETL/ $i & done \u9759\u6001\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002 https://s3.amazonaws.com/metaBEETL/filecounter.csv.bz2 https://s3.amazonaws.com/metaBEETL/headerFile.csv.bz2 https://s3.amazonaws.com/metaBEETL/names.dmp.bz2 https://s3.amazonaws.com/metaBEETL/ncbiFileNumToTaxTree.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B06.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C06.bz2 \u4e0b\u8f7d\u5b8c\u6210\u540e\u89e3\u538b\u7f29\u3002 ~/BeetlMetagenomDatabase$ bunzip2 *.bz2 ~/BeetlMetagenomDatabase$ export METAGENOME_DATABASE_PATH=`pwd`","title":"1. \u5df2\u6574\u7406\u7684\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#2","text":"\u5904\u4e8e\u5b9e\u9645\u76ee\u7684\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981\u8fd9\u4e48\u5927\u7684\u6570\u636e\u5e93\uff0c\u6216\u8005\u9700\u8981\u66f4\u591a\u5176\u4ed6\u7684\u6570\u636e\u52a0\u5165\u5230\u6570\u636e\u5e93\uff0c\u90a3\u5c31\u9700\u8981\u81ea\u884c\u5efa\u7acb\u6570\u636e\u5e93\u3002","title":"2. \u81ea\u5df1\u5efa\u7acb\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#21-seqan","text":"SeqAn \u662f\u4e00\u4e2a\u9ad8\u6548\u7684 C++ \u7b97\u6cd5\u548c\u6570\u636e\u7ed3\u6784\u5e93\uff0c\u7528\u4e8e\u5206\u6790\u751f\u7269\u5e8f\u5217\u7b49\u7528\u9014\u3002\u8bbf\u95ee SeqAn \u4e0b\u8f7d\u5e76\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\u7f16\u8bd1BEETL\u65f6\u53ef\u4ee5\u6dfb\u52a0 --with-seqan \u53c2\u6570\u3002 # \u5b89\u88c5\u4f9d\u8d56\u5305 ~$ sudo apt-get install g++ cmake python zlib1g-dev libbz2-dev libboost-dev ~$ cd ~/apps ~/apps$ git clone https://github.com/seqan/seqan.git && cd seqan ~/apps/seqan$ git checkout -b develop origin/develop","title":"2.1 \u5b89\u88c5 SeqAn"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#22","text":"\u4e0b\u8f7d\u9700\u8981\u7684\u5e8f\u5217\uff0c\u6bd4\u5982NCBI\u4e0a\u7ec6\u83cc\u7684\u57fa\u56e0\u7ec4 ref \u6570\u636e\u3002 ~/BeetlMetagenomDatabase$ wget ftp://ftp.ncbi.nlm.nih.gov/genomes/Bacteria/all.fna.tar.gz -P downloads ~/BeetlMetagenomDatabase$ mkdir all.fna ~/BeetlMetagenomDatabase$ tar xzf downloads/all.fna.tar.gz -C all.fna/","title":"2.2 \u4e0b\u8f7d\u76ee\u6807\u5e8f\u5217"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#23","text":"~/BeetlMetagenomDatabase$ metabeetl-db-genomesToSingleSeq -f all.fna/*/*.fna -s singleSeqGenomes ~/BeetlMetagenomDatabase$ cd singleSeqGenomes","title":"2.3 \u521b\u5efa\u53bb\u9664\u8d28\u7c92\u5e8f\u5217\u7684\u5355\u57fa\u56e0\u7ec4\u5e8f\u5217"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#24-bwt","text":"\u4fee\u6539 metabeetl-db-arrayBWT.sh \u6587\u4ef6\u91cc\u6570\u636e\u5e93\u8def\u5f84\uff0c\u521b\u5efaG_* \u548c G_*_rev \u6587\u4ef6\u7684BWTs\uff0c\u7528qsub\u6765\u5411\u7cfb\u7edf\u63d0\u4ea4\u4efb\u52a1\u3002\u4e5f\u53ef\u4ee5\u8fd0\u884c metabeetl-db-makeBWTSkew \u6765\u4e00\u4e2a\u4e2a\u521b\u5efa\u3002 ~/BeetlMetagenomDatabase$ cp ` which metabeetl-db-arrayBWT.sh ` . ~/BeetlMetagenomDatabase$ vim metabeetl-db-arrayBWT.sh # \u5982\u679c\u6587\u4ef6\u662f G_1 - G_500\uff0c\u90a3\u4e48n=1-500 ~/BeetlMetagenomDatabase$ qsub -t n metabeetl-db-arrayBWT.sh # \u6216\u8005 ~/BeetlMetagenomDatabase$ ( echo -n \"all: \" ; for i in G_* ; do echo -n \" bwt_ ${ i } -B00\" ; done ; echo -e \"\\n\" ; \\ > for i in G_* ; do echo \"bwt_ ${ i } -B00: ${ i } \" ; echo -e \"\\tmetabeetl-db-makeBWTSkew ${ i } ${ i } \\n\" ; done ) > Makefile ~$ make -j","title":"2.4 \u521b\u5efaBWT"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#25","text":"\u5728\u4e00\u53f0\u5185\u5b58>60G\u7684\u673a\u5668\u4e0a\u5c06\u5e8f\u5217\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5e76\u5427\u6240\u6709\u6587\u4ef6\u5408\u5e76\u3002 ~/BeetlMetagenomDatabase$ for pileNum in ` seq 0 5 ` ; do metabeetl-db-mergeBacteria $pileNum ncbiMicros < ( ls G_* ) ; done \u751f\u6210\u7684\u6587\u4ef6\u540d\u79f0\u7c7b\u4f3c\uff1ancbiMicros-A0*, -B0* and -C0* -A0* \u5305\u542b\u6bcf\u4e2aBWT\u7684\u4f4d\u7f6e -B0* BWTs -C0* \u5305\u542b\u6bcf\u4e2aBWT\u4f4d\u7f6e\u7684\u6587\u4ef6\u53f7 \u6587\u4ef6 -B0* and -C0* \u7528\u4e8e\u8ba1\u6570\u7b97\u6cd5","title":"2.5 \u5408\u5e76\u5e8f\u5217"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#26-bwt","text":"\u53ef\u9009\u64cd\u4f5c\uff1a\u5c06BWT\u6587\u4ef6\u8f6c\u6362\u6210RLE BWT\u683c\u5f0f\uff0c\u8fd0\u884c\u53ef\u4ee5\u66f4\u5feb\u3002 ~/BeetlMetagenomDatabase$ for pileNum in ` seq 0 5 ` ; do \\ > mv ncbiMicros-B0 ${ pileNum } ncbiMicros-B0 ${ pileNum } .ascii ; \\ > beetl-convert \\ > --input-format = bwt_ascii \\ > --output-format = bwt_rle \\ > -i ncbiMicros-B0 ${ pileNum } .ascii \\ > -o ncbiMicros-B0 ${ pileNum } ; \\ > done","title":"2.6 \u8f6c\u6362BWT\u6587\u4ef6\u683c\u5f0f"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#27-ncbi-taxoonmy","text":"~$ cd tmp ~/tmp$ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump.tar.gz ~/tmp$ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/gi_taxid_nucl.dmp.gz ~/tmp$ tar xzf taxdump.tar.gz names.dmp nodes.dmp ~/tmp$ gunzip gi_taxid_nucl.dmp.gz \u7528 metabeetl-db-findTaxa \u811a\u672c\u67e5\u627e\u6570\u636e\u5e93\u4e2d\u7684taxonomic\u6811\u3002 Use the metabeetl-db-findTaxa script to find the taxonomic tree corresponding to the file numbers in the database. You will need the headerFile produced by running \"metabeetl-db-genomesToSingleSeq\" and fileCounter created during the merging of the bacterial reference genomes. Finally, you get for each file number in the database a taxonomic tree with the taxonomic ids. There will be some 0 in the taxonomic tree. This is a taxonomic id which could not be matched to: Superkingdom, Phylum, Order, Class, Family, Genus, Species or Strain. Sometimes there are just missing taxa in the taxonomy. We supplement this with the file metaBeetlExtraNames.dmp below. ~/BeetlMetagenomDatabase$ metabeetl-db-findTaxa \\ > -nA downloads/names.dmp \\ > -nO downloads/nodes.dmp \\ > -nG downloads/gi_taxid_nucl.dmp \\ > -h singleSeqGenomes/headerFile.csv \\ > -f singleSeqGenomes/filecounter.csv > ncbiFileNumToTaxTree ~/BeetlMEtagenomDatabase$ ( grep scientific downloads/names.dmp ; cat ${ BEETL_INSTALL_DIR } /share/beetl/metaBeetlExtraNames.dmp ) > metaBeetlTaxonomyNames.dmp","title":"2.7 \u4e0b\u8f7dNCBI Taxoonmy"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#28-normalisation","text":"~/BeetlMetagenomDatabase$ mkdir normalisation ~/BeetlMetagenomDatabase$ cd normalisation ~/BeetlMetagenomDatabase/normalisation$ touch normalize.sh # normalize.sh for genome in ../singleSeqGenomes/G_* ; do ( genomeNum = ` basename ${ genome } ` mkdir ${ genomeNum } cd ${ genomeNum } for i in ../../singleSeqGenomes/bwt_ ${ genomeNum } -B0? ; do ln -s ${ i } ; done for i in ` seq 0 6 ` ; do touch bwt_ ${ genomeNum } -B0 ${ i } ; done time beetl-compare --mode = metagenomics -a bwt_ ${ genomeNum } -b ../../singleSeqGenomes/ncbiMicros -t ../../ncbiFileNumToTaxTree -w 20 -n 1 -k 50 --no-comparison-skip -v & > out.step1 rm -f BeetlCompareOutput/cycle51.subset* touch empty.txt time cat BeetlCompareOutput/cycle*.subset* | metabeetl-convertMetagenomicRangesToTaxa ../../ncbiFileNumToTaxTree ../../singleSeqGenomes/ncbiMicros ../../metaBeetlTaxonomyNames.dmp empty.txt 20 50 - & > out.step2 cd .. ) & done ; wait for i in ` seq 1 2977 ` ; do echo \"G_ $i \" ; X = ` grep -P \"G_ ${ i } $ \" ../singleSeqGenomes/filecounter.csv | cut -f 1 -d ',' ` ; TAX = ` grep -P \"^ ${ X } \" ../ncbiFileNumToTaxTree | tr -d \"\\n\\r\" ` ; echo \"TAX( ${ X } ): ${ TAX } .\" ; TAXID = ` echo \" ${ TAX } \" | sed 's/\\( 0\\)*$//g' | awk '{print $NF}' ` ; echo \"TAXID= ${ TAXID } \" ; COUNTS = ` grep Counts G_ ${ i } /out.step2 | head -1 ` ; echo \"COUNTS= ${ COUNTS } \" ; MAIN_COUNT = ` echo \" ${ COUNTS } \" | sed \"s/^.* ${ TAXID } :\\([0-9]*\\) .* $ /\\1/ ; s/Counts.*/0/\" ` ; echo \"MAIN_COUNT= ${ MAIN_COUNT } \" ; SUM = ` echo \" ${ COUNTS } \" | tr ' ' '\\n' | sed 's/.*://' | awk 'BEGIN { sum=0 } { sum+=$1 } END { print sum }' ` ; echo \"SUM= $SUM \" ; PERCENT = ` echo -e \"scale=5\\n100* ${ MAIN_COUNT } / ${ SUM } \" | bc ` ; echo \"PERCENT= ${ PERCENT } \" ; echo \"FINAL: G_ ${ i } ${ TAXID } ${ MAIN_COUNT } ${ SUM } ${ COUNTS } \" ; done > r2977 grep FINAL r2977 > ../normalisation.txt","title":"2.8 \u8ba1\u7b97 normalisation \u56e0\u5b50"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#29","text":"~$ mkdir metaBeetlNcbiDb ~$ cd ~/metaBeetlNcbiDb ~$ ln -s ../ncbiFileNumToTaxTree ~$ ln -s ../normalisation.txt ~$ ln -s ../downloads/metaBeetlTaxonomyNames.dmp ~$ ln -s ../singleSeqGenomes/filecounter.csv ~$ ln -s ../singleSeqGenomes/headerFile.csv ~$ for i in ../singleSeqGenomes/ncbiMicros- [ BC ] 0 [ 0 -5 ] ; do ln -s $i ; done","title":"2.9 \u521b\u5efa\u6570\u636e\u5e93\u6587\u4ef6\u5939"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#3","text":"","title":"3. \u5206\u6790\u6570\u636e"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#31","text":"\u7528 SRS013948 \u8fd9\u4e2a\u4eba\u7c7b\u80a0\u9053\u7ec6\u83cc\u7ec4\u7814\u7a76\u9879\u76ee\u7684\u6570\u636e\u4f5c\u4e3a\u4f8b\u5b50\u3002\u9996\u5148\u4e0b\u8f7d\u6570\u636e: # http download ~/data$ wget http://downloads.hmpdacc.org/data/Illumina/throat/SRS013948.tar.bz2 # ftp download ~/data$ wget ftp://public-ftp.hmpdacc.org/Illumina/throat/SRS013948.tar.bz2 # \u89e3\u538b\u7f29 ~/data$ tar xjf SRS013948.tar.bz2 ~/data$ ls -l \u89e3\u538b\u7f29\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u97623\u4e2a\u6587\u4ef6\uff1a SRS013948.denovo_duplicates_marked.trimmed.1.fastq SRS013948.denovo_duplicates_marked.trimmed.2.fastq SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq","title":"3.1 \u83b7\u53d6\u6570\u636e"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#32","text":"~/data$ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.1.fastq \\ > -o paddedSeq1.seq \\ > --sequence-length = 100 ~/data$ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.2.fastq \\ > -o paddedSeq2.seq \\ > --sequence-length = 100 ~/data$ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq \\ > -o paddedSeqSingleton.seq \\ > --sequence-length = 100 ~/data$ cat paddedSeq1.seq paddedSeq2.seq paddedSeqSingleton.seq > SRS013948.seq","title":"3.2 \u8f6c\u6362\u6570\u636e\u548c\u5408\u5e76\u6570\u636e"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#33-metagenomic-beetl","text":"\u521b\u5efa BWT \u53d8\u6362\uff0c\u7136\u540e\u8fd0\u884c metagenomic \u6a21\u5f0f\u7684 BEETL ~/data$ beetl-bwt -i SRS013948.seq -o bwt_SRS013948 ~/data$ beetl-compare \\ > --mode = metagenomics \\ > -a bwt_SRS013948 \\ > -b ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > -t ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > -w 20 \\ > -n 1 \\ > -k 50 \\ > --no-comparison-skip beetl-compare \u547d\u4ee4\u4f1a\u5728\u6587\u4ef6\u5939 BeetlCompareOutput \u91cc\u751f\u6210\u8bb8\u591a\u6587\u4ef6\u3002k\u503c\u8bbe\u7f6e\u8d8a\u5927\uff0c\u53ef\u4ee5\u83b7\u5f97\u8d8a\u591a\u7684\u4fe1\u606f\u6570\u636e\uff0c\u4f46\u662f\u8f93\u51fa\u6587\u4ef6\u4e5f\u4f1a\u53d8\u5f97\u8d8a\u5927\u3002","title":"3.3 \u4ee5 metagenomic \u6a21\u5f0f\u8fd0\u884c BEETL"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#34","text":"metabeetl-convertMetagenomicRangesToTaxa \u5de5\u5177\u6839\u636ekmer\u5339\u914d\uff0c\u4ece\u800c\u83b7\u5f97\u57fa\u56e0\u7ec4\u4ee5\u53ca\u4e0a\u4e00\u7ea7\u5206\u7c7b\u7684ID\u53f7\uff0c\u5e76\u751f\u6210\u6587\u5b57\u4e0e\u56fe\u5f62\u7ed3\u679c\uff08\u91c7\u7528Krona js\u53ef\u89c6\u5316\u5e93\u6765\u5f62\u6210\u7f51\u9875\u683c\u5f0f\u7684\u62a5\u544a\u6587\u4ef6\uff09\u3002 \u7531\u4e8e\u7b97\u6cd5\u539f\u56e0\u9700\u8981\u9891\u7e41\u8bfb\u53d6BWT\u4f4d\u7f6e\uff0c\u56e0\u6b64\u6570\u636e\u5e93\u6587\u4ef6 ncbiMicros-C0* \u6700\u597d\u653e\u5728\u8bfb\u53d6\u901f\u5ea6\u6bd4\u8f83\u5757\u7684\u78c1\u76d8\u6247\u533a\u6216\u8005\u78c1\u76d8\u91cc\u5982SSD\u786c\u76d8\u3002\u53e6\u5916\u5982\u679c\u5185\u5b58\u8db3\u591f\uff0c\u53ef\u4ee5\u7528 metabeetl-convertMetagenomicRangesToTaxa_withMmap \u5de5\u5177\uff0c\u5c06\u8fd9\u4e9b\u6bd4\u5bf9\u6587\u4ef6\u8bfb\u5165\u5185\u5b58\u4e2d\u52a0\u5feb\u901f\u5ea6\u3002 ~/data$ cat BeetlCompareOutput/cycle*.subset* | \\ > metabeetl-convertMetagenomicRangesToTaxa \\ > ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > ${ METAGENOME_DATABASE_PATH } /metaBeetlTaxonomyNames.dmp \\ > ${ METAGENOME_DATABASE_PATH } /normalisation.txt \\ > 20 50 - > metaBeetl.log \u751f\u6210\u7684TSV\uff08\u5236\u8868\u7b26\u5206\u9694\uff09\u6587\u4ef6\u5404\u5217\u542b\u4e49\uff1a \u5217 \u5b57\u6bb5\u542b\u4e49 column 1 Taxonomy Id column 2 Taxonomy level column 3 k-mer count column 4 k-mer count including children TSV\u6587\u4ef6\u7528\u9014\uff1a metaBeetl.tsv: raw k-mer counts for every leaves and ancestors. metaBeetl_normalised.tsv: some counts from ancestors are moved towards leaf items. The proportion thereof is pre-computed by aligning each individual genome to the full database. metaBeetl_normalised2.tsv: Only leaves of the taxonomy tree are kept, and counts are normalised relatively to genome sizes. Krona JS \u7ed3\u679c\u6587\u4ef6 - metaBeetl_krona.html - metaBeetl_krona_normalised.html - metaBeetl_krona_normalised2.html","title":"3.4 \u56fe\u5f62\u5316\u663e\u793a\u7ed3\u679c"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#reference","text":"http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3622627/ https://github.com/BEETL/BEETL.git","title":"Reference"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#2-supri","text":"SUPRI \u662f\u4e3b\u8981\u7528\u6765\u5bf9\u4e34\u5e8a\u6837\u54c1\u7684 shotgun metagenomics \u6d4b\u5e8f\u6570\u636e\u4e2d\u5bfb\u627e\u5e76\u9274\u5b9a\u75c5\u539f\u7684\u5de5\u5177\u3002\u5b83\u67092\u79cd\u6a21\u5f0f\uff1aFast mode \u548c Comprehensive mode\u3002\u524d\u8005\u53ef\u4ee5\u5feb\u901f\u5bf9\u6d4b\u5e8f\u7684 reads \u8fdb\u884c Mapping\uff0c\u627e\u5230\u7ec6\u83cc\u6216\u75c5\u6bd2 reads\u3002\u540e\u8005\u5206\u6790\u66f4\u4e3a\u8be6\u7ec6\uff0c\u9664\u4e86\u7ec6\u83cc\u75c5\u6bd2\u5916\u8fd8\u6bd4\u5bf9\u4e86\u771f\u83cc\uff0c\u5bc4\u751f\u866b\u7b49\u5176\u4ed6\u7269\u79cd\u6570\u636e\u5e93\uff0c\u5e76\u4e14\u8fdb\u884cde novo assembly\uff0c\u5bf9contig\u4e5f\u8fdb\u884c Mapping\uff0c\u867d\u7136\u8017\u65f6\u66f4\u957f\uff0c\u4f46\u53ef\u4ee5\u83b7\u5f97\u8986\u76d6\u5ea6\uff0ctaxonomic \u5206\u7c7b\u7b49\u4fe1\u606f\u3002","title":"2. SUPRI"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#_1","text":"fastQValidator Minimo (v1.6) Abyss (v1.3.5) RAPSearch (v2.12) seqtk (v 1.0r31) SNAP (v0.15) gt (v1.5.1) fastq fqextract cutadapt (v1.2.1) prinseq dropcache","title":"\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#supri","text":"$ wget https://github.com/chiulab/surpi/releases/download/v1.0.18/surpi-1.0.18.tar.gz $ tar zxf surpi-1.0.18.tar.gz -C surpi","title":"\u5b89\u88c5 SUPRI"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#_2","text":"$ mkdir -p SNAP_db $ ~/apps/surpi/create_taxonomy_db.sh","title":"\u5efa\u7acb\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#surpi","text":"$ ~/apps/surpi/SURPI.sh -z input.fastq $ ~/apps/surpi/go_input &","title":"\u8fd0\u884cSURPI"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#_3","text":"\u5f53\u4ee5 Comprehensive mode \u8fd0\u884c\u540e\uff0c\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u6587\u4ef6\u5939\uff1a DATASETS_input deNovoASSEMBLY_input LOG_input OUTPUT_input TRASH_input \u7ed3\u679c\u6587\u4ef6\u5728 OUTPUT_input \u6587\u4ef6\u5939\u91cc\uff0c\u201c.annotated\u201d \u6587\u4ef6\u662f SAM \u683c\u5f0f\u6216\u8005 -m8 \u683c\u5f0f\u7684\u6bd4\u5bf9\u7ed3\u679c, taxonomic \u4fe1\u606f\u4e5f\u5728\u6587\u4ef6\u4e2d\u7684\u6700\u540e\u4e00\u884c\u4e2d\u3002 \u201c.counttable\u201d \u6587\u4ef6\u662f tab \u5206\u5272\u7684\u603b\u7ed3\u6587\u4ef6\u3002\u6bcf\u4e00\u884c\u8868\u793a\u4e0d\u540c\u5c42\u9762\u7684 taxonomic \u6ce8\u91ca\u4fe1\u606f\u3002","title":"\u8f93\u51fa\u7ed3\u679c"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#reference_1","text":"SUPRI official","title":"Reference"},{"location":"book/C12_Metagenomics-Analysis/09_shotgun/#reference_2","text":"Introduction to Metagenomics Data Analysis","title":"Reference"},{"location":"book/C12_Metagenomics-Analysis/10_16s/","text":"16s rRNA Metagenomics \u7814\u7a76 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} 1. \u539f\u6838\u751f\u726916s\u5b8f\u57fa\u56e0\u7ec4\u4ecb\u7ecd \u00b6 \u5b8f\u57fa\u56e0\u7ec4 ( Metagenome)(\u4e5f\u79f0\u5fae\u751f\u7269\u73af\u5883\u57fa\u56e0\u7ec4 Microbial Environmental Genome, \u6216\u5143\u57fa\u56e0\u7ec4) \u3002\u662f\u7531 Handelsman \u7b49 1998 \u5e74\u63d0\u51fa\u7684\u65b0\u540d\u8bcd, \u5176\u5b9a\u4e49\u4e3a\u201cthe genomes of the total microbiota found in nature\u201d , \u5373\u751f\u5883\u4e2d\u5168\u90e8\u5fae\u5c0f\u751f\u7269\u9057\u4f20\u7269\u8d28\u7684\u603b\u548c\u3002\u5b83\u5305\u542b\u4e86\u53ef\u57f9\u517b\u7684\u548c\u672a\u53ef\u57f9\u517b\u7684\u5fae\u751f\u7269\u7684\u57fa\u56e0, \u76ee\u524d\u4e3b\u8981\u6307\u73af\u5883\u6837\u54c1\u4e2d\u7684\u7ec6\u83cc\u548c\u771f\u83cc\u7684\u57fa\u56e0\u7ec4\u603b\u548c\u3002\u800c\u6240\u8c13\u5b8f\u57fa\u56e0\u7ec4\u5b66 (\u6216\u5143\u57fa\u56e0\u7ec4\u5b66, metagenomics) \u5c31\u662f\u4e00\u79cd\u4ee5\u73af\u5883\u6837\u54c1\u4e2d\u7684\u5fae\u751f\u7fa4\u7269\u4f53\u57fa\u56e0\u7ec4\u4e3a\u7814\u7a76\u5bf9\u8c61, \u4ee5\u529f\u80fd\u57fa\u56e0\u7b5b\u9009\u548c/\u6216\u6d4b\u5e8f\u5206\u6790\u4e3a\u7814\u7a76\u624b\u6bb5, \u4ee5\u5fae\u751f\u7269\u591a\u6837\u6027\u3001 \u79cd\u7fa4\u7ed3\u6784\u3001 \u8fdb\u5316\u5173\u7cfb\u3001 \u529f\u80fd\u6d3b\u6027\u3001 \u76f8\u4e92\u534f\u4f5c\u5173\u7cfb\u53ca\u4e0e\u73af\u5883\u4e4b\u95f4\u7684\u5173\u7cfb\u4e3a\u7814\u7a76\u76ee\u7684\u7684\u65b0\u7684\u5fae\u751f\u7269\u7814\u7a76\u65b9\u6cd5\u3002 \u5982\u4f55\u4f30\u8ba1\u5b8f\u57fa\u56e0\u7ec4\u6837\u672c\u4e2d\u7684\u7269\u79cd\u7ec4\u6210\u53ca\u4e30\u5ea6\uff1f \u5b8f\u57fa\u56e0\u7ec4\u4e2d\u7684\u7269\u79cd\u5206\u7c7b\uff0c\u4e00\u822c\u7528OTU (operational taxonomic unit), \u5373\u53ef\u64cd\u4f5c\u7269\u79cd\u5355\u5143\uff0c\u6765\u8868\u793a\u3002\u5728\u5178\u578b\u60c5\u51b5\u4e0b\uff0c\u539f\u6838\u751f\u7269\u7684OTU\u4f7f\u752816S rDNA\u6765\u8861\u91cf\uff0c\u771f\u6838\u751f\u7269\u7684OUT\u4f7f\u752818s rDNA\u6765\u8861\u91cf\u3002\u4f46\u9009\u62e916S/18S rDNA\u9274\u5b9a\u7269\u79cd\uff0c\u5b58\u5728\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff1a rDNA\u4e4b\u95f4\u7684\u5e73\u884c\u8f6c\u79fb\u6765\u5e72\u6270rDNA\u9274\u5b9a\u7684\u53ef\u9760\u6027\u3002 \u5728\u5355\u4e2a\u7ec6\u83cc\u4e2d\uff0c16r DNA\u53ef\u80fd\u5b58\u5728\u5e8f\u5217\u4e0d\u540c\u7684\u51e0\u4e2a\u62f7\u8d1d\uff0c\u5e72\u6270\u4f30\u8ba1OTU\u6570\u76ee\u7684\u51c6\u786e\u6027\u3002 \u6240\u4ee5\uff0c\u5176\u4ed6\u5907\u9009\u7684\u6807\u8bb0\u57fa\u56e0\uff0c\u6bd4\u5982\u5355\u62f7\u8d1d\u7684\u770b\u5bb6\u57fa\u56e0\u88ab\u63a8\u8350\u7528\u6765\u4f5c\u4e3a\u83cc\u79cd\u9274\u5b9a\u7684\u6807\u8bb0\u3002 \u5982\u4f55\u8861\u91cf\u6837\u672c\u4e2d\u7269\u79cd\u7684\u591a\u6837\u6027\uff1f \u4e3a\u4e86\u4f30\u7b97\u6d4b\u5e8f\u7684\u7269\u79cd\u7684\u6bd4\u4f8b\uff0c\u901a\u5e38\u7528rarefaction curse\u6765\u8868\u793a\u3002 \u5b8f\u57fa\u56e0\u7ec4\u5982\u4f55\u505aDe Novo\u62fc\u63a5\uff1f \u7531\u4e8e\u5b8f\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u7684\u8986\u76d6\u7387\u901a\u5e38\u662f\u4e0d\u5b8c\u5168\u7684\uff0c\u6240\u4ee5\u7ec4\u88c5\u6240\u9700\u8981\u7684\u5e8f\u5217\u5e76\u4e0d\u662f\u5f88\u5b8c\u6574\u3002\u5e76\u4e14\u7ec4\u88c5\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u628a\u6765\u81ea\u4e0d\u540c\u5206\u7c7b\u5355\u5143\uff08OTU\uff09\u7684\u5e8f\u5217\u7ec4\u88c5\u5728\u4e00\u8d77\uff0c\u4ea7\u751f\u5d4c\u5408\u4f53\u57fa\u56e0\u7ec4\u3002Phrap,Forge,Arachne,JAZZ\u548cCelera Assembler\u7b49\u53ef\u7528\u6765\u7ec4\u88c5\u7531sanger\u6cd5\u4ea7\u751f\u7684\u5b8f\u57fa\u56e0\u7ec4\u5e8f\u5217\u3002\u8fd9\u4e9b\u7b97\u6cd5\u5927\u90e8\u5206\u90fd\u5229\u7528mate-pair\u4fe1\u606f\u6765\u53c2\u4e0e\u7ec4\u88c5\u3002\u8fd9\u4e9b\u7b97\u6cd5\u7528\u9876\u70b9\u6765\u4ee3\u8868\u6bcf\u6761read,\u4e92\u76f8\u91cd\u53e0\u7684read\u4e4b\u95f4\u7528\u8fb9\u8fde\u8d77\u6765\uff0c\u5b83\u4eec\u7684\u7ec4\u88c5\u95ee\u9898\u53ef\u4ee5\u8f6c\u6362\u6210\u201c\u54c8\u5bc6\u5c14\u987f\u8def\u5f84\u201d\u641c\u7d22\u95ee\u9898\uff0c\u5373\u627e\u5230\u4e00\u6761\u8def\u5f84\u8d70\u8fc7\u6240\u6709\u9876\u70b9\uff0c\u4e14\u6bcf\u4e2a\u9876\u70b9\u53ea\u8d70\u4e00\u6b21\u3002 \u5982\u4f55\u8fdb\u884c\u83cc\u7fa4\u95f4\u5dee\u5f02\u5206\u6790\uff1f \u6709\u51e0\u79cd\u57fa\u4e8e\u5e8f\u5217\u7279\u5f81\u7684\u6bd4\u8f83\uff0c\u5305\u62ec\u6837\u54c1\u95f4GC\u542b\u91cf\u7684\u6bd4\u8f83\uff0c\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u5927\u5c0f\u7684\u6bd4\u8f83\uff0c\u7cfb\u7edf\u53d1\u80b2\u5173\u7cfb\u6811\u7684\u6bd4\u8f83\u548c\u529f\u80fd\u7ec4\u5206\u7684\u6bd4\u8f83\u3002\u8bb8\u591a\u6bd4\u8f83\u5206\u6790\u90fd\u7528\u5230\u4e86\u5173\u8054\u7edf\u8ba1\u5b66\u7684\u65b9\u6cd5\uff0c\u901a\u5e38\u5047\u8bbe\u6709\u51e0\u79cd\u5143\u6570\u636e\u5f71\u54cd\u89c2\u6d4b\u5230\u7684\u5b8f\u57fa\u56e0\u7ec4\u7fa4\u4f53\u7684\u7ec4\u5206\u3002\u4e3b\u6210\u5206\u5206\u6790\uff08PCA\uff09\u548c\u975e\u5ea6\u91cf\u591a\u7ef4\u6807\u5ea6\uff08NM-MDS\uff09\u7528\u6765\u56fe\u5f62\u5316\u5c55\u793a\u6570\u636e\u5e76\u63ed\u793a\u6709\u54ea\u4e9b\u56e0\u7d20\u6700\u5f71\u54cd\u6570\u636e\u3002 \u6709\u51e0\u79cd\u8fdb\u884c\u5b8f\u57fa\u56e0\u7ec4\u6bd4\u8f83\u5206\u6790\u7684\u8f6f\u4ef6\u3002\u7b2c\u4e00\u4e2a\u662fMEGAN\uff0c\u53ef\u4ee5\u6bd4\u8f83\u4e24\u4e2a\u6216\u51e0\u4e2a\u6807\u51c6\u5316\u540e\u7684\u6837\u54c1\u7684GC\u542b\u91cf\u3002\u7b2c\u4e8c\u79cd\u662fMG-RAST\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u6bd4\u8f83\u529f\u80fd\u548c\u57fa\u4e8e\u5e8f\u5217\u7684\u5206\u6790\u6765\u4e0a\u4f20\u6837\u672c\u3002\u7b2c\u4e09\u79cd\u662fCAMERA\uff0c\u63d0\u4f9b\u4e86BLAST\u63a5\u53e3\u8ba9\u5ba2\u6237\u53ef\u4ee5\u6bd4\u5bf940\u591a\u79cd\u73b0\u6709\u7684\u5b8f\u57fa\u56e0\u7ec4\u6570\u636e\u3002 \u5982\u4f55\u9884\u6d4b\u7f16\u7801\u57fa\u56e0\uff1f \u76ee\u524d\u53d1\u73b0\u7f16\u7801\u57fa\u56e0\u7684\u65b9\u6cd5\u6709\u4e24\u79cd\u3002\u4e00\u79cd\u662f\u57fa\u4e8eBLAST\u6bd4\u5bf9\u7684\u65b9\u6cd5\uff0c\u8fd9\u79cd\u65b9\u6cd5\u901a\u8fc7\u6bd4\u5bf9\u5df2\u6709\u7684\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u53d1\u73b0\u5b8f\u57fa\u56e0\u7ec4\u6570\u636e\u4e2d\u6709\u54ea\u4e9b\u5df2\u77e5\u57fa\u56e0\u7684\u540c\u6e90\u57fa\u56e0\u7684\u5b58\u5728\uff0c\u4f46\u7f3a\u9677\u662f\u627e\u4e0d\u5230\u54ea\u4e9b\u548c\u5df2\u7ecf\u57fa\u56e0\u6ca1\u6709\u540c\u6e90\u5173\u7cfb\u7684\u65b0\u57fa\u56e0\u3002\u7b2c\u4e8c\u65b9\u6cd5\u662f\u91cd\u65b0\u9884\u6d4b\u57fa\u56e0\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5927\u90e8\u5206\u662f\u57fa\u4e8e\u6709\u6307\u5bfc\u5b66\u4e60\u548c\u7edf\u8ba1\u6a21\u5f0f\u8bc6\u522b\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u9690\u9a6c\u5c14\u79d1\u592b\u6a21\u578b\u3002GeneMark.hmm\u5c31\u662f\u57fa\u4e8e\u5355\u5bc6\u7801\u5b50\u9891\u7387\u7684\u975e\u5747\u4e00\u9a6c\u5c14\u79d1\u592b\u6a21\u578b\u6765\u9884\u6d4b\u57fa\u56e0\u7684\u8f6f\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u8f6f\u4ef6\u7528\u5230\u5b8f\u57fa\u56e0\u7ec4\u6570\u636e\u4e0a\u65f6\uff0c\u8fd9\u4e9b\u8f6f\u4ef6\u901a\u5e38\u65e0\u6cd5\u786e\u5b9a\u90e8\u5206\u7684ORF,\u5373\u4f7f\u8fd9\u4e9b ORF\u662f\u771f\u5b9e\u57fa\u56e0\u7684\u4e00\u90e8\u5206\u3002 2. 16s rRNA \u6d4b\u5e8f\u6570\u636e\u5206\u6790 \u00b6 2.1 PCA \u5206\u6790 \u00b6 PCA \u5206\u6790(Principal Component Analysis)\uff0c\u5373\u4e3b\u6210\u5206\u5206\u6790\uff0c\u662f\u4e00\u79cd\u5bf9\u6570\u636e\u8fdb\u884c\u7b80\u5316\u5206\u6790\u7684\u6280\u672f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6709\u6548\u7684\u627e\u51fa\u6570\u636e\u4e2d\u6700\u201c\u4e3b\u8981\u201d\u7684\u5143\u7d20\u548c\u7ed3\u6784\uff0c\u53bb\u9664\u566a\u97f3\u548c\u5197\u4f59\uff0c\u5c06\u539f\u6709\u7684\u590d\u6742\u6570\u636e\u964d\u7ef4\uff0c\u63ed\u793a\u9690\u85cf\u5728\u590d\u6742\u6570\u636e\u80cc\u540e\u7684\u7b80\u5355\u7ed3\u6784\u3002\u5176\u4f18\u70b9\u662f\u7b80\u5355\u4e14\u65e0\u53c2\u6570\u9650\u5236\u3002\u901a\u8fc7\u5206\u6790\u4e0d\u540c\u6837\u54c1OTU(97%\u76f8\u4f3c\u6027)\u7ec4\u6210\u53ef\u4ee5\u53cd\u6620\u6837\u54c1\u95f4\u7684\u5dee\u5f02\u548c\u8ddd\u79bb\uff0cPCA \u8fd0\u7528\u65b9\u5dee\u5206\u89e3\uff0c\u5c06\u591a\u7ec4\u6570\u636e\u7684\u5dee\u5f02\u53cd\u6620\u5728\u4e8c\u7ef4\u5750\u6807\u56fe\u4e0a\uff0c\u5750\u6807\u8f74\u53d6\u80fd\u591f\u6700\u5927\u53cd\u6620\u65b9\u5dee\u503c\u7684\u4e24\u4e2a\u7279\u5f81\u503c\u3002\u5982\u6837\u54c1\u7ec4\u6210\u8d8a\u76f8\u4f3c\uff0c\u53cd\u6620\u5728PCA \u56fe\u4e2d\u7684\u8ddd\u79bb\u8d8a\u8fd1\u3002\u4e0d\u540c\u73af\u5883\u95f4\u7684\u6837\u54c1\u53ef\u80fd\u8868\u73b0\u51fa\u5206\u6563\u548c\u805a\u96c6\u7684\u5206\u5e03\u60c5\u51b5\uff0cPCA \u7ed3\u679c\u4e2d\u5bf9\u6837\u54c1\u5dee\u5f02\u6027\u89e3\u91ca\u5ea6\u6700\u9ad8\u7684\u4e24\u4e2a\u6216\u4e09\u4e2a\u6210\u5206\u53ef\u4ee5\u7528\u4e8e\u5bf9\u5047\u8bbe\u56e0\u7d20\u8fdb\u884c\u9a8c\u8bc1\u3002 \u8f6f\u4ef6\uff1a\u4f7f\u752897%\u76f8\u4f3c\u5ea6\u7684OTU\uff0cPC-ORD\u6216\u662fCANOCO\u4f5c\u56fe\u3002 PCA \u7ed3\u679c\u56fe\u793a\u4e2d\u5750\u6807\u8f74\u767e\u5206\u6bd4\u89e3\u91ca\uff1a\u5982\u679cPC1\u503c\u4e3a50%\uff0c\u5219\u8868\u793ax\u8f74\u7684\u5dee\u5f02\u53ef\u4ee5\u89e3\u91ca\u5168\u9762\u5206\u6790\u7ed3\u679c\u768450%\u3002\u4e0d\u540c\u989c\u8272\u6216\u5f62\u72b6\u7684\u70b9\u4ee3\u8868\u4e0d\u540c\u73af\u5883\u6216\u6761\u4ef6\u4e0b\u7684\u6837\u672c\u7ec4\uff0c\u6a2a\u3001\u7eb5\u5750\u6807\u8f74\u7684\u523b\u5ea6\u662f\u76f8\u5bf9\u8ddd\u79bb\uff0c\u65e0\u5b9e\u9645\u610f\u4e49\u3002PC1\u3001PC2 \u5206\u522b\u4ee3\u8868\u5bf9\u4e8e\u4e24\u7ec4\u6837\u672c\u5fae\u751f\u7269\u7ec4\u6210\u53d1\u751f\u504f\u79fb\u7684\u7591\u4f3c\u5f71\u54cd\u56e0\u7d20\uff0c\u9700\u8981\u7ed3\u5408\u6837\u672c\u7279\u5f81\u4fe1\u606f\u5f52\u7eb3\u603b\u7ed3\uff0c\u4f8b\u5982C\u7ec4\uff08\u9ec4\u8272\uff09\u548cD\u7ec4\uff08\u84dd\u8272\uff09\u6837\u54c1\u5728PC1\u8f74\u7684\u65b9\u5411\u4e0a\u5206\u79bb\u5f00\u6765\uff0c\u5219\u53ef\u5206\u6790\u4e3aPC1\u662f\u5bfc\u81f4C\u7ec4\u548cD\u7ec4\u5206\u5f00\uff08\u53ef\u4ee5\u662f\u4e24\u4e2a\u5730\u70b9\u6216\u9178\u78b1\u4e0d\u540c\uff09\u7684\u4e3b\u8981\u56e0\u7d20\uff0c\u540c\u65f6\u9a8c\u8bc1\u4e86\u8fd9\u4e2a\u56e0\u7d20\u6709\u8f83\u9ad8\u7684\u53ef\u80fd\u6027\u5f71\u54cd\u4e86\u6837\u54c1\u7684\u7ec4\u6210\u3002 3. \u5206\u6790\u5b9e\u8df5 \u00b6 \u6d41\u7a0b \u526a\u5207\u5e8f\u5217 FastQC \u8d28\u63a7 + SeqQA \u7edf\u8ba1 Pandaseq \u53cc\u5411\u6d4b\u5e8f\u6570\u636e\u62fc\u63a5 UCHIME \u79fb\u9664\u590d\u5236\u5e8f\u5217 UCHIME \u79fb\u9664\u5d4c\u5408\u4f53\u5e8f\u5217 CREST/RDP Classifier \u67e5\u8be2\u975e\u5d4c\u5408\u4f53\u5e8f\u5217\uff0c\u751f\u6210\u7269\u79cd\u5206\u914d\u6bd4\u4f8b \u751f\u6210\u7269\u79cd\u5404\u5206\u7c7b\u5c42\u7ea7\u7684\u7ed3\u679c \u6240\u9700\u5b89\u88c5\u8f6f\u4ef6 sickle usearch Pandaseq FastQC CREST/RDP Classifier","title":"10. 16S \u79cd\u7fa4\u5206\u6790"},{"location":"book/C12_Metagenomics-Analysis/10_16s/#16s-rrna-metagenomics","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"16s rRNA Metagenomics \u7814\u7a76"},{"location":"book/C12_Metagenomics-Analysis/10_16s/#1-16s","text":"\u5b8f\u57fa\u56e0\u7ec4 ( Metagenome)(\u4e5f\u79f0\u5fae\u751f\u7269\u73af\u5883\u57fa\u56e0\u7ec4 Microbial Environmental Genome, \u6216\u5143\u57fa\u56e0\u7ec4) \u3002\u662f\u7531 Handelsman \u7b49 1998 \u5e74\u63d0\u51fa\u7684\u65b0\u540d\u8bcd, \u5176\u5b9a\u4e49\u4e3a\u201cthe genomes of the total microbiota found in nature\u201d , \u5373\u751f\u5883\u4e2d\u5168\u90e8\u5fae\u5c0f\u751f\u7269\u9057\u4f20\u7269\u8d28\u7684\u603b\u548c\u3002\u5b83\u5305\u542b\u4e86\u53ef\u57f9\u517b\u7684\u548c\u672a\u53ef\u57f9\u517b\u7684\u5fae\u751f\u7269\u7684\u57fa\u56e0, \u76ee\u524d\u4e3b\u8981\u6307\u73af\u5883\u6837\u54c1\u4e2d\u7684\u7ec6\u83cc\u548c\u771f\u83cc\u7684\u57fa\u56e0\u7ec4\u603b\u548c\u3002\u800c\u6240\u8c13\u5b8f\u57fa\u56e0\u7ec4\u5b66 (\u6216\u5143\u57fa\u56e0\u7ec4\u5b66, metagenomics) \u5c31\u662f\u4e00\u79cd\u4ee5\u73af\u5883\u6837\u54c1\u4e2d\u7684\u5fae\u751f\u7fa4\u7269\u4f53\u57fa\u56e0\u7ec4\u4e3a\u7814\u7a76\u5bf9\u8c61, \u4ee5\u529f\u80fd\u57fa\u56e0\u7b5b\u9009\u548c/\u6216\u6d4b\u5e8f\u5206\u6790\u4e3a\u7814\u7a76\u624b\u6bb5, \u4ee5\u5fae\u751f\u7269\u591a\u6837\u6027\u3001 \u79cd\u7fa4\u7ed3\u6784\u3001 \u8fdb\u5316\u5173\u7cfb\u3001 \u529f\u80fd\u6d3b\u6027\u3001 \u76f8\u4e92\u534f\u4f5c\u5173\u7cfb\u53ca\u4e0e\u73af\u5883\u4e4b\u95f4\u7684\u5173\u7cfb\u4e3a\u7814\u7a76\u76ee\u7684\u7684\u65b0\u7684\u5fae\u751f\u7269\u7814\u7a76\u65b9\u6cd5\u3002 \u5982\u4f55\u4f30\u8ba1\u5b8f\u57fa\u56e0\u7ec4\u6837\u672c\u4e2d\u7684\u7269\u79cd\u7ec4\u6210\u53ca\u4e30\u5ea6\uff1f \u5b8f\u57fa\u56e0\u7ec4\u4e2d\u7684\u7269\u79cd\u5206\u7c7b\uff0c\u4e00\u822c\u7528OTU (operational taxonomic unit), \u5373\u53ef\u64cd\u4f5c\u7269\u79cd\u5355\u5143\uff0c\u6765\u8868\u793a\u3002\u5728\u5178\u578b\u60c5\u51b5\u4e0b\uff0c\u539f\u6838\u751f\u7269\u7684OTU\u4f7f\u752816S rDNA\u6765\u8861\u91cf\uff0c\u771f\u6838\u751f\u7269\u7684OUT\u4f7f\u752818s rDNA\u6765\u8861\u91cf\u3002\u4f46\u9009\u62e916S/18S rDNA\u9274\u5b9a\u7269\u79cd\uff0c\u5b58\u5728\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff1a rDNA\u4e4b\u95f4\u7684\u5e73\u884c\u8f6c\u79fb\u6765\u5e72\u6270rDNA\u9274\u5b9a\u7684\u53ef\u9760\u6027\u3002 \u5728\u5355\u4e2a\u7ec6\u83cc\u4e2d\uff0c16r DNA\u53ef\u80fd\u5b58\u5728\u5e8f\u5217\u4e0d\u540c\u7684\u51e0\u4e2a\u62f7\u8d1d\uff0c\u5e72\u6270\u4f30\u8ba1OTU\u6570\u76ee\u7684\u51c6\u786e\u6027\u3002 \u6240\u4ee5\uff0c\u5176\u4ed6\u5907\u9009\u7684\u6807\u8bb0\u57fa\u56e0\uff0c\u6bd4\u5982\u5355\u62f7\u8d1d\u7684\u770b\u5bb6\u57fa\u56e0\u88ab\u63a8\u8350\u7528\u6765\u4f5c\u4e3a\u83cc\u79cd\u9274\u5b9a\u7684\u6807\u8bb0\u3002 \u5982\u4f55\u8861\u91cf\u6837\u672c\u4e2d\u7269\u79cd\u7684\u591a\u6837\u6027\uff1f \u4e3a\u4e86\u4f30\u7b97\u6d4b\u5e8f\u7684\u7269\u79cd\u7684\u6bd4\u4f8b\uff0c\u901a\u5e38\u7528rarefaction curse\u6765\u8868\u793a\u3002 \u5b8f\u57fa\u56e0\u7ec4\u5982\u4f55\u505aDe Novo\u62fc\u63a5\uff1f \u7531\u4e8e\u5b8f\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u7684\u8986\u76d6\u7387\u901a\u5e38\u662f\u4e0d\u5b8c\u5168\u7684\uff0c\u6240\u4ee5\u7ec4\u88c5\u6240\u9700\u8981\u7684\u5e8f\u5217\u5e76\u4e0d\u662f\u5f88\u5b8c\u6574\u3002\u5e76\u4e14\u7ec4\u88c5\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u628a\u6765\u81ea\u4e0d\u540c\u5206\u7c7b\u5355\u5143\uff08OTU\uff09\u7684\u5e8f\u5217\u7ec4\u88c5\u5728\u4e00\u8d77\uff0c\u4ea7\u751f\u5d4c\u5408\u4f53\u57fa\u56e0\u7ec4\u3002Phrap,Forge,Arachne,JAZZ\u548cCelera Assembler\u7b49\u53ef\u7528\u6765\u7ec4\u88c5\u7531sanger\u6cd5\u4ea7\u751f\u7684\u5b8f\u57fa\u56e0\u7ec4\u5e8f\u5217\u3002\u8fd9\u4e9b\u7b97\u6cd5\u5927\u90e8\u5206\u90fd\u5229\u7528mate-pair\u4fe1\u606f\u6765\u53c2\u4e0e\u7ec4\u88c5\u3002\u8fd9\u4e9b\u7b97\u6cd5\u7528\u9876\u70b9\u6765\u4ee3\u8868\u6bcf\u6761read,\u4e92\u76f8\u91cd\u53e0\u7684read\u4e4b\u95f4\u7528\u8fb9\u8fde\u8d77\u6765\uff0c\u5b83\u4eec\u7684\u7ec4\u88c5\u95ee\u9898\u53ef\u4ee5\u8f6c\u6362\u6210\u201c\u54c8\u5bc6\u5c14\u987f\u8def\u5f84\u201d\u641c\u7d22\u95ee\u9898\uff0c\u5373\u627e\u5230\u4e00\u6761\u8def\u5f84\u8d70\u8fc7\u6240\u6709\u9876\u70b9\uff0c\u4e14\u6bcf\u4e2a\u9876\u70b9\u53ea\u8d70\u4e00\u6b21\u3002 \u5982\u4f55\u8fdb\u884c\u83cc\u7fa4\u95f4\u5dee\u5f02\u5206\u6790\uff1f \u6709\u51e0\u79cd\u57fa\u4e8e\u5e8f\u5217\u7279\u5f81\u7684\u6bd4\u8f83\uff0c\u5305\u62ec\u6837\u54c1\u95f4GC\u542b\u91cf\u7684\u6bd4\u8f83\uff0c\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u5927\u5c0f\u7684\u6bd4\u8f83\uff0c\u7cfb\u7edf\u53d1\u80b2\u5173\u7cfb\u6811\u7684\u6bd4\u8f83\u548c\u529f\u80fd\u7ec4\u5206\u7684\u6bd4\u8f83\u3002\u8bb8\u591a\u6bd4\u8f83\u5206\u6790\u90fd\u7528\u5230\u4e86\u5173\u8054\u7edf\u8ba1\u5b66\u7684\u65b9\u6cd5\uff0c\u901a\u5e38\u5047\u8bbe\u6709\u51e0\u79cd\u5143\u6570\u636e\u5f71\u54cd\u89c2\u6d4b\u5230\u7684\u5b8f\u57fa\u56e0\u7ec4\u7fa4\u4f53\u7684\u7ec4\u5206\u3002\u4e3b\u6210\u5206\u5206\u6790\uff08PCA\uff09\u548c\u975e\u5ea6\u91cf\u591a\u7ef4\u6807\u5ea6\uff08NM-MDS\uff09\u7528\u6765\u56fe\u5f62\u5316\u5c55\u793a\u6570\u636e\u5e76\u63ed\u793a\u6709\u54ea\u4e9b\u56e0\u7d20\u6700\u5f71\u54cd\u6570\u636e\u3002 \u6709\u51e0\u79cd\u8fdb\u884c\u5b8f\u57fa\u56e0\u7ec4\u6bd4\u8f83\u5206\u6790\u7684\u8f6f\u4ef6\u3002\u7b2c\u4e00\u4e2a\u662fMEGAN\uff0c\u53ef\u4ee5\u6bd4\u8f83\u4e24\u4e2a\u6216\u51e0\u4e2a\u6807\u51c6\u5316\u540e\u7684\u6837\u54c1\u7684GC\u542b\u91cf\u3002\u7b2c\u4e8c\u79cd\u662fMG-RAST\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u6bd4\u8f83\u529f\u80fd\u548c\u57fa\u4e8e\u5e8f\u5217\u7684\u5206\u6790\u6765\u4e0a\u4f20\u6837\u672c\u3002\u7b2c\u4e09\u79cd\u662fCAMERA\uff0c\u63d0\u4f9b\u4e86BLAST\u63a5\u53e3\u8ba9\u5ba2\u6237\u53ef\u4ee5\u6bd4\u5bf940\u591a\u79cd\u73b0\u6709\u7684\u5b8f\u57fa\u56e0\u7ec4\u6570\u636e\u3002 \u5982\u4f55\u9884\u6d4b\u7f16\u7801\u57fa\u56e0\uff1f \u76ee\u524d\u53d1\u73b0\u7f16\u7801\u57fa\u56e0\u7684\u65b9\u6cd5\u6709\u4e24\u79cd\u3002\u4e00\u79cd\u662f\u57fa\u4e8eBLAST\u6bd4\u5bf9\u7684\u65b9\u6cd5\uff0c\u8fd9\u79cd\u65b9\u6cd5\u901a\u8fc7\u6bd4\u5bf9\u5df2\u6709\u7684\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u53d1\u73b0\u5b8f\u57fa\u56e0\u7ec4\u6570\u636e\u4e2d\u6709\u54ea\u4e9b\u5df2\u77e5\u57fa\u56e0\u7684\u540c\u6e90\u57fa\u56e0\u7684\u5b58\u5728\uff0c\u4f46\u7f3a\u9677\u662f\u627e\u4e0d\u5230\u54ea\u4e9b\u548c\u5df2\u7ecf\u57fa\u56e0\u6ca1\u6709\u540c\u6e90\u5173\u7cfb\u7684\u65b0\u57fa\u56e0\u3002\u7b2c\u4e8c\u65b9\u6cd5\u662f\u91cd\u65b0\u9884\u6d4b\u57fa\u56e0\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5927\u90e8\u5206\u662f\u57fa\u4e8e\u6709\u6307\u5bfc\u5b66\u4e60\u548c\u7edf\u8ba1\u6a21\u5f0f\u8bc6\u522b\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u9690\u9a6c\u5c14\u79d1\u592b\u6a21\u578b\u3002GeneMark.hmm\u5c31\u662f\u57fa\u4e8e\u5355\u5bc6\u7801\u5b50\u9891\u7387\u7684\u975e\u5747\u4e00\u9a6c\u5c14\u79d1\u592b\u6a21\u578b\u6765\u9884\u6d4b\u57fa\u56e0\u7684\u8f6f\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u8f6f\u4ef6\u7528\u5230\u5b8f\u57fa\u56e0\u7ec4\u6570\u636e\u4e0a\u65f6\uff0c\u8fd9\u4e9b\u8f6f\u4ef6\u901a\u5e38\u65e0\u6cd5\u786e\u5b9a\u90e8\u5206\u7684ORF,\u5373\u4f7f\u8fd9\u4e9b ORF\u662f\u771f\u5b9e\u57fa\u56e0\u7684\u4e00\u90e8\u5206\u3002","title":"1. \u539f\u6838\u751f\u726916s\u5b8f\u57fa\u56e0\u7ec4\u4ecb\u7ecd"},{"location":"book/C12_Metagenomics-Analysis/10_16s/#2-16s-rrna","text":"","title":"2. 16s rRNA \u6d4b\u5e8f\u6570\u636e\u5206\u6790"},{"location":"book/C12_Metagenomics-Analysis/10_16s/#21-pca","text":"PCA \u5206\u6790(Principal Component Analysis)\uff0c\u5373\u4e3b\u6210\u5206\u5206\u6790\uff0c\u662f\u4e00\u79cd\u5bf9\u6570\u636e\u8fdb\u884c\u7b80\u5316\u5206\u6790\u7684\u6280\u672f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6709\u6548\u7684\u627e\u51fa\u6570\u636e\u4e2d\u6700\u201c\u4e3b\u8981\u201d\u7684\u5143\u7d20\u548c\u7ed3\u6784\uff0c\u53bb\u9664\u566a\u97f3\u548c\u5197\u4f59\uff0c\u5c06\u539f\u6709\u7684\u590d\u6742\u6570\u636e\u964d\u7ef4\uff0c\u63ed\u793a\u9690\u85cf\u5728\u590d\u6742\u6570\u636e\u80cc\u540e\u7684\u7b80\u5355\u7ed3\u6784\u3002\u5176\u4f18\u70b9\u662f\u7b80\u5355\u4e14\u65e0\u53c2\u6570\u9650\u5236\u3002\u901a\u8fc7\u5206\u6790\u4e0d\u540c\u6837\u54c1OTU(97%\u76f8\u4f3c\u6027)\u7ec4\u6210\u53ef\u4ee5\u53cd\u6620\u6837\u54c1\u95f4\u7684\u5dee\u5f02\u548c\u8ddd\u79bb\uff0cPCA \u8fd0\u7528\u65b9\u5dee\u5206\u89e3\uff0c\u5c06\u591a\u7ec4\u6570\u636e\u7684\u5dee\u5f02\u53cd\u6620\u5728\u4e8c\u7ef4\u5750\u6807\u56fe\u4e0a\uff0c\u5750\u6807\u8f74\u53d6\u80fd\u591f\u6700\u5927\u53cd\u6620\u65b9\u5dee\u503c\u7684\u4e24\u4e2a\u7279\u5f81\u503c\u3002\u5982\u6837\u54c1\u7ec4\u6210\u8d8a\u76f8\u4f3c\uff0c\u53cd\u6620\u5728PCA \u56fe\u4e2d\u7684\u8ddd\u79bb\u8d8a\u8fd1\u3002\u4e0d\u540c\u73af\u5883\u95f4\u7684\u6837\u54c1\u53ef\u80fd\u8868\u73b0\u51fa\u5206\u6563\u548c\u805a\u96c6\u7684\u5206\u5e03\u60c5\u51b5\uff0cPCA \u7ed3\u679c\u4e2d\u5bf9\u6837\u54c1\u5dee\u5f02\u6027\u89e3\u91ca\u5ea6\u6700\u9ad8\u7684\u4e24\u4e2a\u6216\u4e09\u4e2a\u6210\u5206\u53ef\u4ee5\u7528\u4e8e\u5bf9\u5047\u8bbe\u56e0\u7d20\u8fdb\u884c\u9a8c\u8bc1\u3002 \u8f6f\u4ef6\uff1a\u4f7f\u752897%\u76f8\u4f3c\u5ea6\u7684OTU\uff0cPC-ORD\u6216\u662fCANOCO\u4f5c\u56fe\u3002 PCA \u7ed3\u679c\u56fe\u793a\u4e2d\u5750\u6807\u8f74\u767e\u5206\u6bd4\u89e3\u91ca\uff1a\u5982\u679cPC1\u503c\u4e3a50%\uff0c\u5219\u8868\u793ax\u8f74\u7684\u5dee\u5f02\u53ef\u4ee5\u89e3\u91ca\u5168\u9762\u5206\u6790\u7ed3\u679c\u768450%\u3002\u4e0d\u540c\u989c\u8272\u6216\u5f62\u72b6\u7684\u70b9\u4ee3\u8868\u4e0d\u540c\u73af\u5883\u6216\u6761\u4ef6\u4e0b\u7684\u6837\u672c\u7ec4\uff0c\u6a2a\u3001\u7eb5\u5750\u6807\u8f74\u7684\u523b\u5ea6\u662f\u76f8\u5bf9\u8ddd\u79bb\uff0c\u65e0\u5b9e\u9645\u610f\u4e49\u3002PC1\u3001PC2 \u5206\u522b\u4ee3\u8868\u5bf9\u4e8e\u4e24\u7ec4\u6837\u672c\u5fae\u751f\u7269\u7ec4\u6210\u53d1\u751f\u504f\u79fb\u7684\u7591\u4f3c\u5f71\u54cd\u56e0\u7d20\uff0c\u9700\u8981\u7ed3\u5408\u6837\u672c\u7279\u5f81\u4fe1\u606f\u5f52\u7eb3\u603b\u7ed3\uff0c\u4f8b\u5982C\u7ec4\uff08\u9ec4\u8272\uff09\u548cD\u7ec4\uff08\u84dd\u8272\uff09\u6837\u54c1\u5728PC1\u8f74\u7684\u65b9\u5411\u4e0a\u5206\u79bb\u5f00\u6765\uff0c\u5219\u53ef\u5206\u6790\u4e3aPC1\u662f\u5bfc\u81f4C\u7ec4\u548cD\u7ec4\u5206\u5f00\uff08\u53ef\u4ee5\u662f\u4e24\u4e2a\u5730\u70b9\u6216\u9178\u78b1\u4e0d\u540c\uff09\u7684\u4e3b\u8981\u56e0\u7d20\uff0c\u540c\u65f6\u9a8c\u8bc1\u4e86\u8fd9\u4e2a\u56e0\u7d20\u6709\u8f83\u9ad8\u7684\u53ef\u80fd\u6027\u5f71\u54cd\u4e86\u6837\u54c1\u7684\u7ec4\u6210\u3002","title":"2.1 PCA \u5206\u6790"},{"location":"book/C12_Metagenomics-Analysis/10_16s/#3","text":"\u6d41\u7a0b \u526a\u5207\u5e8f\u5217 FastQC \u8d28\u63a7 + SeqQA \u7edf\u8ba1 Pandaseq \u53cc\u5411\u6d4b\u5e8f\u6570\u636e\u62fc\u63a5 UCHIME \u79fb\u9664\u590d\u5236\u5e8f\u5217 UCHIME \u79fb\u9664\u5d4c\u5408\u4f53\u5e8f\u5217 CREST/RDP Classifier \u67e5\u8be2\u975e\u5d4c\u5408\u4f53\u5e8f\u5217\uff0c\u751f\u6210\u7269\u79cd\u5206\u914d\u6bd4\u4f8b \u751f\u6210\u7269\u79cd\u5404\u5206\u7c7b\u5c42\u7ea7\u7684\u7ed3\u679c \u6240\u9700\u5b89\u88c5\u8f6f\u4ef6 sickle usearch Pandaseq FastQC CREST/RDP Classifier","title":"3. \u5206\u6790\u5b9e\u8df5"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/","text":"KmerFinder \u4f7f\u7528 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u7b80\u5355\u4ecb\u7ecd KmerFinder \u5de5\u5177\u7684\u4f7f\u7528\u3002 KmerFinder \u662fDTU\u5927\u5b66\u5f00\u53d1\u7684\u7269\u79cd\u9274\u5b9a\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9fastq/fasta\u6570\u636e\u8fdb\u884c\u626b\u63cf\uff0c\u5229\u7528kmer\u9891\u5ea6\u7684\u65b9\u6cd5\u4e0e\u6570\u636e\u6bd4\u5bf9\uff0c\u9274\u5b9a\u7269\u79cd\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u5728\u7ebf\u7248\u672c\u662f\uff1a https://cge.cbs.dtu.dk/services/KmerFinder/ \u5728\u7ebf\u7248\u5206\u6790\u5de5\u5177 kmerfinder\u4ee3\u7801 \u5bf9\u4e8e\u666e\u901a\u7528\u6237\u6765\u8bf4\uff0c\u76f4\u63a5\u4f7f\u7528 \u5728\u7ebf\u7248\u5206\u6790\u5de5\u5177 \u662f\u6700\u65b9\u4fbf\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u5982\u679c\u9700\u8981\u9274\u5b9a\u591a\u4e2a\u6837\u672c\u6216\u6570\u636e\u96c6\uff0c\u4f7f\u7528\u672c\u5730\u5206\u6790\u7684\u65b9\u5f0f\u4f1a\u66f4\u4e3a\u5feb\u901f\u3002 \u547d\u4ee4\u884c\u65b9\u5f0f \u00b6 1.\u5b89\u88c5 \u00b6 # \u5efa\u7acb\u865a\u62df\u73af\u5883 $ conda create -n kmerfinder $ conda activate kmerfinder # \u5b89\u88c5kma\u5de5\u5177 ( kmerfinder ) $ conda install kma # \u4e0b\u8f7dkmerfinder ( kmerfinder ) $ git clone https://bitbucket.org/genomicepidemiology/kmerfinder.git # \u4e0b\u8f7d\u6570\u636e\u5e93 ( kmerfinder ) $ cd kmerfinder && mkdir database # \u8fd9\u91cc\u8bbe\u7f6e\u6570\u636e\u5e93\u5730\u5740\u4e3a /dbs/kmerfinder ( kmerfinder ) $ mkdir /dbs/kmerfinder && cd /dbs/kmerfinder # wget \u9012\u5f52\u4e0b\u8f7d20190108\u7248\u672c\u7684\u6240\u6709\u6570\u636e ( kmerfinder ) $ wget -r ftp://ftp.cbs.dtu.dk/public/CGE/databases/KmerFinder/version/20190108_stable/ # \u4f60\u4e5f\u53ef\u4ee5\u8bbf\u95eeftp://ftp.cbs.dtu.dk/public/CGE/databases/KmerFinder/version/ # \u9009\u62e9\u6700\u65b0\u7684\u6570\u636e\u4f5c\u4e3a\u6570\u636e\u5e93 # md5\u9a8c\u8bc1\u4e0b\u8f7d\u6570\u636e ( kmerfinder ) $ for i in *.gz ; do if [ \" $( md5sum $i | awk '{print $1}' ) \" ! = \" $( cat ${ i } .md5 ) \" ] ; then echo $i \"data wrong\" ; fi ; done # \u89e3\u538b\u7f29\u6570\u636e\u5e93\u5e76\u5220\u9664\u538b\u7f29\u5305 ( kmerfinder ) $ tar -zxf *.tar.gz ( kmerfinder ) $ rm *.tar.gz # \u5229\u7528\u811a\u672c\u4e0b\u8f7d ( kmerfinder ) $ git clone https://bitbucket.org/genomicepidemiology/kmerfinder_db.git ( kmerfinder ) $ cd kmerfinder_db/ ( kmerfinder ) $ bash install.sh 2.\u8fd0\u884c \u00b6 \u4f7f\u7528 python \u811a\u672c\u8fd0\u884c # \u8bbe\u7f6e\u6570\u636e\u5e93\u8def\u5f84 ( kmerfinder ) $ KmerFinderDB = /dbs/kmerfinder # \u5bf9fastq\u8fdb\u884c\u626b\u63cf ( kmerfinder ) $ python kmerfinder.py -i mydata.fastq.gz -o output -db $KmerFinderDB # \u68c0\u7d22 fasta \u6570\u636e ( kmerfinder ) $ cd KmerFinder ( kmerfinder ) $ python3 kmerfinder.py -o result -db /dbs/kmerfinder/bacteria.ATG -i genome.fna # \u751f\u6210\u7684\u7ed3\u679c ( kmerfinder ) $ cat result/results.spa # \u68c0\u7d22 fastq \u6570\u636e ( kmerfinder ) $ python3 kmerfinder.py -o result -db /dbs/kmerfinder/bacteria.ATG -i Reads.fastq # \u751f\u6210\u7684\u7ed3\u679c ( kmerfinder ) $ cat result/results.spa \u751f\u6210\u7ed3\u679c\u6587\u4ef6\uff1a data.json results.spa docker \u63d0\u4f9b\u5728\u7ebf\u68c0\u7d22 \u00b6 \u5efa\u7acb\u670d\u52a1\u5668\uff0c\u63d0\u4f9bweb\u9875\u9762\u8bbf\u95ee\uff0c\u7528docker\u5b89\u88c5\u914d\u7f6e\u66f4\u4e3a\u65b9\u4fbf\u3002 $ docker run --rm -it -v $HOME /dbs/kmerfinder -v $( pwd ) :/workdir kmerfinder -h \u53c2\u8003\u8d44\u6599 \u00b6 https://bitbucket.org/genomicepidemiology/kmerfinder","title":"11. KmerFinder"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/#kmerfinder","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u7b80\u5355\u4ecb\u7ecd KmerFinder \u5de5\u5177\u7684\u4f7f\u7528\u3002 KmerFinder \u662fDTU\u5927\u5b66\u5f00\u53d1\u7684\u7269\u79cd\u9274\u5b9a\u5de5\u5177\uff0c\u53ef\u4ee5\u5bf9fastq/fasta\u6570\u636e\u8fdb\u884c\u626b\u63cf\uff0c\u5229\u7528kmer\u9891\u5ea6\u7684\u65b9\u6cd5\u4e0e\u6570\u636e\u6bd4\u5bf9\uff0c\u9274\u5b9a\u7269\u79cd\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u5728\u7ebf\u7248\u672c\u662f\uff1a https://cge.cbs.dtu.dk/services/KmerFinder/ \u5728\u7ebf\u7248\u5206\u6790\u5de5\u5177 kmerfinder\u4ee3\u7801 \u5bf9\u4e8e\u666e\u901a\u7528\u6237\u6765\u8bf4\uff0c\u76f4\u63a5\u4f7f\u7528 \u5728\u7ebf\u7248\u5206\u6790\u5de5\u5177 \u662f\u6700\u65b9\u4fbf\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u5982\u679c\u9700\u8981\u9274\u5b9a\u591a\u4e2a\u6837\u672c\u6216\u6570\u636e\u96c6\uff0c\u4f7f\u7528\u672c\u5730\u5206\u6790\u7684\u65b9\u5f0f\u4f1a\u66f4\u4e3a\u5feb\u901f\u3002","title":"KmerFinder \u4f7f\u7528"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/#_1","text":"","title":"\u547d\u4ee4\u884c\u65b9\u5f0f"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/#1","text":"# \u5efa\u7acb\u865a\u62df\u73af\u5883 $ conda create -n kmerfinder $ conda activate kmerfinder # \u5b89\u88c5kma\u5de5\u5177 ( kmerfinder ) $ conda install kma # \u4e0b\u8f7dkmerfinder ( kmerfinder ) $ git clone https://bitbucket.org/genomicepidemiology/kmerfinder.git # \u4e0b\u8f7d\u6570\u636e\u5e93 ( kmerfinder ) $ cd kmerfinder && mkdir database # \u8fd9\u91cc\u8bbe\u7f6e\u6570\u636e\u5e93\u5730\u5740\u4e3a /dbs/kmerfinder ( kmerfinder ) $ mkdir /dbs/kmerfinder && cd /dbs/kmerfinder # wget \u9012\u5f52\u4e0b\u8f7d20190108\u7248\u672c\u7684\u6240\u6709\u6570\u636e ( kmerfinder ) $ wget -r ftp://ftp.cbs.dtu.dk/public/CGE/databases/KmerFinder/version/20190108_stable/ # \u4f60\u4e5f\u53ef\u4ee5\u8bbf\u95eeftp://ftp.cbs.dtu.dk/public/CGE/databases/KmerFinder/version/ # \u9009\u62e9\u6700\u65b0\u7684\u6570\u636e\u4f5c\u4e3a\u6570\u636e\u5e93 # md5\u9a8c\u8bc1\u4e0b\u8f7d\u6570\u636e ( kmerfinder ) $ for i in *.gz ; do if [ \" $( md5sum $i | awk '{print $1}' ) \" ! = \" $( cat ${ i } .md5 ) \" ] ; then echo $i \"data wrong\" ; fi ; done # \u89e3\u538b\u7f29\u6570\u636e\u5e93\u5e76\u5220\u9664\u538b\u7f29\u5305 ( kmerfinder ) $ tar -zxf *.tar.gz ( kmerfinder ) $ rm *.tar.gz # \u5229\u7528\u811a\u672c\u4e0b\u8f7d ( kmerfinder ) $ git clone https://bitbucket.org/genomicepidemiology/kmerfinder_db.git ( kmerfinder ) $ cd kmerfinder_db/ ( kmerfinder ) $ bash install.sh","title":"1.\u5b89\u88c5"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/#2","text":"\u4f7f\u7528 python \u811a\u672c\u8fd0\u884c # \u8bbe\u7f6e\u6570\u636e\u5e93\u8def\u5f84 ( kmerfinder ) $ KmerFinderDB = /dbs/kmerfinder # \u5bf9fastq\u8fdb\u884c\u626b\u63cf ( kmerfinder ) $ python kmerfinder.py -i mydata.fastq.gz -o output -db $KmerFinderDB # \u68c0\u7d22 fasta \u6570\u636e ( kmerfinder ) $ cd KmerFinder ( kmerfinder ) $ python3 kmerfinder.py -o result -db /dbs/kmerfinder/bacteria.ATG -i genome.fna # \u751f\u6210\u7684\u7ed3\u679c ( kmerfinder ) $ cat result/results.spa # \u68c0\u7d22 fastq \u6570\u636e ( kmerfinder ) $ python3 kmerfinder.py -o result -db /dbs/kmerfinder/bacteria.ATG -i Reads.fastq # \u751f\u6210\u7684\u7ed3\u679c ( kmerfinder ) $ cat result/results.spa \u751f\u6210\u7ed3\u679c\u6587\u4ef6\uff1a data.json results.spa","title":"2.\u8fd0\u884c"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/#docker","text":"\u5efa\u7acb\u670d\u52a1\u5668\uff0c\u63d0\u4f9bweb\u9875\u9762\u8bbf\u95ee\uff0c\u7528docker\u5b89\u88c5\u914d\u7f6e\u66f4\u4e3a\u65b9\u4fbf\u3002 $ docker run --rm -it -v $HOME /dbs/kmerfinder -v $( pwd ) :/workdir kmerfinder -h","title":"docker \u63d0\u4f9b\u5728\u7ebf\u68c0\u7d22"},{"location":"book/C12_Metagenomics-Analysis/11_kmerfinder/#_2","text":"https://bitbucket.org/genomicepidemiology/kmerfinder","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/","text":"Meta-BEETL \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb BEETL \u662f\u4e00\u5957\u505a Burrows-Wheeler Transform \u7684\u5de5\u5177\u96c6\uff0c Meta-BEETL <#meta-beetl> \u662f BEETL \u4e0b\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u7528\u6765\u5206\u6790\u57fa\u4e8e Shotgun metagenomics \u7684\u5fae\u751f\u7269\u6570\u636e\u3002 Meta-BEETL Metagenomics \u00b6 \u4e0b\u8f7d\u6570\u636e\u5e93 \u00b6 1. \u5df2\u6574\u7406\u7684\u6570\u636e\u5e93 \u00b6 \u4f5c\u8005\u5df2\u7ecf\u5c06\u7814\u7a76\u6240\u7528\u5230\u7684\u6570\u636e\u5e93\u6574\u7406\u540e\u63d0\u4ea4\u5230 Amazon S3 \u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002\u603b\u6570\u636e\u91cf\u572824G\u5de6\u53f3\u3002 $ mkdir BeetlMetagenomeDatabase && cd BeetlMetagenomeDatabase $ for i in ` curl https://s3.amazonaws.com/metaBEETL | grep -oP \"[^>]*bz2\" ` ; \\ > do wget https://s3.amazonaws.com/metaBEETL/ $i & done \u9759\u6001\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002 https://s3.amazonaws.com/metaBEETL/filecounter.csv.bz2 https://s3.amazonaws.com/metaBEETL/headerFile.csv.bz2 https://s3.amazonaws.com/metaBEETL/names.dmp.bz2 https://s3.amazonaws.com/metaBEETL/ncbiFileNumToTaxTree.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B06.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C06.bz2 \u4e0b\u8f7d\u5b8c\u6210\u540e\u89e3\u538b\u7f29\u3002 $ bunzip2 *.bz2 $ export METAGENOME_DATABASE_PATH = ` pwd ` 2. \u81ea\u5df1\u5efa\u7acb\u6570\u636e\u5e93 \u00b6 \u5904\u4e8e\u5b9e\u9645\u76ee\u7684\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981\u8fd9\u4e48\u5927\u7684\u6570\u636e\u5e93\uff0c\u6216\u8005\u9700\u8981\u66f4\u591a\u5176\u4ed6\u7684\u6570\u636e\u52a0\u5165\u5230\u6570\u636e\u5e93\uff0c\u90a3\u5c31\u9700\u8981\u81ea\u884c\u5efa\u7acb\u6570\u636e\u5e93\u3002 2.1 \u5b89\u88c5 SeqAn SeqAn <www.seqan.de> __ \u662f\u4e00\u4e2a\u9ad8\u6548\u7684 C++ \u7b97\u6cd5\u548c\u6570\u636e\u7ed3\u6784\u5e93\uff0c\u7528\u4e8e\u5206\u6790\u751f\u7269\u5e8f\u5217\u7b49\u7528\u9014\u3002\u8bbf\u95ee SeqAn <www.seqan.de> __ \u4e0b\u8f7d\u5e76\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\u7f16\u8bd1BEETL\u65f6\u53ef\u4ee5\u6dfb\u52a0 --with-seqan \u53c2\u6570\u3002 # \u5b89\u88c5\u4f9d\u8d56\u5305 $ sudo apt-get install g++ cmake python zlib1g-dev libbz2-dev libboost-dev $ cd ~/apps $ git clone https://github.com/seqan/seqan.git && cd seqan $ git checkout -b develop origin/develop 2.2 \u4e0b\u8f7d\u76ee\u6807\u5e8f\u5217 \u4e0b\u8f7d\u9700\u8981\u7684\u5e8f\u5217\uff0c\u6bd4\u5982NCBI\u4e0a\u7ec6\u83cc\u7684\u57fa\u56e0\u7ec4 ref \u6570\u636e\u3002 $ wget ftp://ftp.ncbi.nlm.nih.gov/genomes/Bacteria/all.fna.tar.gz -P downloads $ mkdir all.fna $ tar xzf downloads/all.fna.tar.gz -C all.fna/ 2.3 \u521b\u5efa\u53bb\u9664\u8d28\u7c92\u5e8f\u5217\u7684\u5355\u57fa\u56e0\u7ec4\u5e8f\u5217 $ metabeetl-db-genomesToSingleSeq -f all.fna/*/*.fna -s singleSeqGenomes $ cd singleSeqGenomes 2.4 \u521b\u5efaBWT \u4fee\u6539 metabeetl-db-arrayBWT.sh \u6587\u4ef6\u91cc\u6570\u636e\u5e93\u8def\u5f84\uff0c\u521b\u5efaG_* \u548c G_*_rev \u6587\u4ef6\u7684BWTs\uff0c\u7528qsub\u6765\u5411\u7cfb\u7edf\u63d0\u4ea4\u4efb\u52a1\u3002\u4e5f\u53ef\u4ee5\u8fd0\u884c metabeetl-db-makeBWTSkew \u6765\u4e00\u4e2a\u4e2a\u521b\u5efa\u3002 $ cp ` which metabeetl-db-arrayBWT.sh ` . $ vim metabeetl-db-arrayBWT.sh $ metabeetl-db-arrayBWT.sh # \u6216\u8005\u4f7f\u7528\u5faa\u73af $ ( echo -n \"all: \" ; for i in G_* ; do echo -n \" bwt_ ${ i } -B00\" ; done ; echo -e \"\\n\" ; \\ > for i in G_* ; do echo \"bwt_ ${ i } -B00: ${ i } \" ; echo -e \"\\tmetabeetl-db-makeBWTSkew ${ i } ${ i } \\n\" ; done ) > Makefile $ make -j 2.5 \u5408\u5e76\u5e8f\u5217 \u5728\u4e00\u53f0\u5185\u5b58>60G\u7684\u673a\u5668\u4e0a\u5c06\u5e8f\u5217\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5e76\u5427\u6240\u6709\u6587\u4ef6\u5408\u5e76\u3002 $ for pileNum in ` seq 0 5 ` ; do metabeetl-db-mergeBacteria $pileNum ncbiMicros < ( ls G_* ) ; done \u751f\u6210\u7684\u6587\u4ef6\u540d\u79f0\u7c7b\u4f3c\uff1ancbiMicros-A0*, -B0* and -C0* A0* \u5305\u542b\u6bcf\u4e2aBWT\u7684\u4f4d\u7f6e B0* BWTs C0* \u5305\u542b\u6bcf\u4e2aBWT\u4f4d\u7f6e\u7684\u6587\u4ef6\u53f7 \u6587\u4ef6 -B0* and -C0* \u7528\u4e8e\u8ba1\u6570\u7b97\u6cd5 2.6 \u8f6c\u6362BWT\u6587\u4ef6\u683c\u5f0f \u53ef\u9009\u64cd\u4f5c\uff1a\u5c06BWT\u6587\u4ef6\u8f6c\u6362\u6210RLE BWT\u683c\u5f0f\uff0c\u8fd0\u884c\u53ef\u4ee5\u66f4\u5feb\u3002 $ for pileNum in ` seq 0 5 ` ; do \\ > mv ncbiMicros-B0 ${ pileNum } ncbiMicros-B0 ${ pileNum } .ascii ; \\ > beetl-convert \\ > --input-format = bwt_ascii \\ > --output-format = bwt_rle \\ > -i ncbiMicros-B0 ${ pileNum } .ascii \\ > -o ncbiMicros-B0 ${ pileNum } ; \\ > done 2.7 \u4e0b\u8f7dNCBI Taxoonmy $ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump.tar.gz $ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/gi_taxid_nucl.dmp.gz $ tar xzf taxdump.tar.gz names.dmp nodes.dmp $ gunzip gi_taxid_nucl.dmp.gz Infomation \u7528 metabeetl-db-findTaxa \u811a\u672c\u67e5\u627e\u6570\u636e\u5e93\u4e2d\u7684taxonomic\u6811\u3002 You will need the headerFile produced by running \"metabeetl-db-genomesToSingleSeq\" and fileCounter created during the merging of the bacterial reference genomes. | Finally, you get for each file number in the database a taxonomic tree with the taxonomic ids. | There will be some 0 in the taxonomic tree. This is a taxonomic id which could not be matched to: Superkingdom, Phylum, Order, Class, Family, Genus, Species or Strain. | Sometimes there are just missing taxa in the taxonomy. We supplement this with the file metaBeetlExtraNames.dmp below. $ metabeetl-db-findTaxa \\ > -nA downloads/names.dmp \\ > -nO downloads/nodes.dmp \\ > -nG downloads/gi_taxid_nucl.dmp \\ > -h singleSeqGenomes/headerFile.csv \\ > -f singleSeqGenomes/filecounter.csv > ncbiFileNumToTaxTree $ ( grep scientific downloads/names.dmp ; cat ${ BEETL_INSTALL_DIR } /share/beetl/metaBeetlExtraNames.dmp ) > metaBeetlTaxonomyNames.dmp 2.8 \u8ba1\u7b97 normalisation \u56e0\u5b50 $ mkdir normalisation $ cd normalisation $ touch normalize.sh $ vim normalize.sh \u7f16\u8f91\u811a\u672c\u5185\u5bb9\u5982\u4e0b # normalize.sh for genome in ../singleSeqGenomes/G_* ; do ( genomeNum = ` basename ${ genome } ` mkdir ${ genomeNum } cd ${ genomeNum } for i in ../../singleSeqGenomes/bwt_ ${ genomeNum } -B0? ; do ln -s ${ i } ; done for i in ` seq 0 6 ` ; do touch bwt_ ${ genomeNum } -B0 ${ i } ; done time beetl-compare --mode = metagenomics -a bwt_ ${ genomeNum } -b ../../singleSeqGenomes/ncbiMicros -t ../../ncbiFileNumToTaxTree -w 20 -n 1 -k 50 --no-comparison-skip -v & > out.step1 rm -f BeetlCompareOutput/cycle51.subset* touch empty.txt time cat BeetlCompareOutput/cycle*.subset* | metabeetl-convertMetagenomicRangesToTaxa ../../ncbiFileNumToTaxTree ../../singleSeqGenomes/ncbiMicros ../../metaBeetlTaxonomyNames.dmp empty.txt 20 50 - & > out.step2 cd .. ) & done ; wait for i in ` seq 1 2977 ` ; do echo \"G_ $i \" ; X = ` grep -P \"G_ ${ i } $ \" ../singleSeqGenomes/filecounter.csv | cut -f 1 -d ',' ` ; TAX = ` grep -P \"^ ${ X } \" ../ncbiFileNumToTaxTree | tr -d \"\\n\\r\" ` ; echo \"TAX( ${ X } ): ${ TAX } .\" ; TAXID = ` echo \" ${ TAX } \" | sed 's/\\( 0\\)*$//g' | awk '{print $NF}' ` ; echo \"TAXID= ${ TAXID } \" ; COUNTS = ` grep Counts G_ ${ i } /out.step2 | head -1 ` ; echo \"COUNTS= ${ COUNTS } \" ; MAIN_COUNT = ` echo \" ${ COUNTS } \" | sed \"s/^.* ${ TAXID } :\\([0-9]*\\) .* $ /\\1/ ; s/Counts.*/0/\" ` ; echo \"MAIN_COUNT= ${ MAIN_COUNT } \" ; SUM = ` echo \" ${ COUNTS } \" | tr ' ' '\\n' | sed 's/.*://' | awk 'BEGIN { sum=0 } { sum+=$1 } END { print sum }' ` ; echo \"SUM= $SUM \" ; PERCENT = ` echo -e \"scale=5\\n100* ${ MAIN_COUNT } / ${ SUM } \" | bc ` ; echo \"PERCENT= ${ PERCENT } \" ; echo \"FINAL: G_ ${ i } ${ TAXID } ${ MAIN_COUNT } ${ SUM } ${ COUNTS } \" ; done > r2977 grep FINAL r2977 > ../normalisation.txt 2.9 \u521b\u5efa\u6570\u636e\u5e93\u6587\u4ef6\u5939 $ mkdir metaBeetlNcbiDb $ cd ~/metaBeetlNcbiDb $ ln -s ../ncbiFileNumToTaxTree $ ln -s ../normalisation.txt $ ln -s ../downloads/metaBeetlTaxonomyNames.dmp $ ln -s ../singleSeqGenomes/filecounter.csv $ ln -s ../singleSeqGenomes/headerFile.csv $ for i in ../singleSeqGenomes/ncbiMicros- [ BC ] 0 [ 0 -5 ] ; do ln -s $i ; done 3. \u5206\u6790\u6570\u636e \u00b6 3.1 \u83b7\u53d6\u6570\u636e \u7528 SRS013948 \u8fd9\u4e2a\u4eba\u7c7b\u80a0\u9053\u7ec6\u83cc\u7ec4\u7814\u7a76\u9879\u76ee\u7684\u6570\u636e\u4f5c\u4e3a\u4f8b\u5b50\u3002\u9996\u5148\u4e0b\u8f7d\u6570\u636e: # http download $ wget http://downloads.hmpdacc.org/data/Illumina/throat/SRS013948.tar.bz2 # ftp download $ wget ftp://public-ftp.hmpdacc.org/Illumina/throat/SRS013948.tar.bz2 # \u89e3\u538b\u7f29 $ tar xjf SRS013948.tar.bz2 $ ls -l \u89e3\u538b\u7f29\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u97623\u4e2a\u6587\u4ef6\uff1a SRS013948.denovo_duplicates_marked.trimmed.1.fastq SRS013948.denovo_duplicates_marked.trimmed.2.fastq SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq 3.2 \u8f6c\u6362\u6570\u636e\u548c\u5408\u5e76\u6570\u636e $ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.1.fastq \\ > -o paddedSeq1.seq \\ > --sequence-length = 100 $ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.2.fastq \\ > -o paddedSeq2.seq \\ > --sequence-length = 100 $ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq \\ > -o paddedSeqSingleton.seq \\ > --sequence-length = 100 $ cat paddedSeq1.seq paddedSeq2.seq paddedSeqSingleton.seq > SRS013948.seq 3.3 \u4ee5 metagenomic \u6a21\u5f0f\u8fd0\u884c BEETL \u521b\u5efa BWT \u53d8\u6362\uff0c\u7136\u540e\u8fd0\u884c metagenomic \u6a21\u5f0f\u7684 BEETL $ beetl-bwt -i SRS013948.seq -o bwt_SRS013948 $ beetl-compare \\ > --mode = metagenomics \\ > -a bwt_SRS013948 \\ > -b ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > -t ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > -w 20 \\ > -n 1 \\ > -k 50 \\ > --no-comparison-skip beetl-compare \u547d\u4ee4\u4f1a\u5728\u6587\u4ef6\u5939 BeetlCompareOutput \u91cc\u751f\u6210\u8bb8\u591a\u6587\u4ef6\u3002k\u503c\u8bbe\u7f6e\u8d8a\u5927\uff0c\u53ef\u4ee5\u83b7\u5f97\u8d8a\u591a\u7684\u4fe1\u606f\u6570\u636e\uff0c\u4f46\u662f\u8f93\u51fa\u6587\u4ef6\u4e5f\u4f1a\u53d8\u5f97\u8d8a\u5927\u3002 3.4 \u56fe\u5f62\u5316\u663e\u793a\u7ed3\u679c metabeetl-convertMetagenomicRangesToTaxa : \u5de5\u5177\u6839\u636ekmer\u5339\u914d\uff0c\u4ece\u800c\u83b7\u5f97\u57fa\u56e0\u7ec4\u4ee5\u53ca\u4e0a\u4e00\u7ea7\u5206\u7c7b\u7684ID\u53f7\uff0c\u5e76\u751f\u6210\u6587\u5b57\u4e0e\u56fe\u5f62\u7ed3\u679c\uff08\u91c7\u7528Krona js\u53ef\u89c6\u5316\u5e93\u6765\u5f62\u6210\u7f51\u9875\u683c\u5f0f\u7684\u62a5\u544a\u6587\u4ef6\uff09\u3002\u7531\u4e8e\u7b97\u6cd5\u539f\u56e0\u9700\u8981\u9891\u7e41\u8bfb\u53d6BWT\u4f4d\u7f6e\uff0c\u56e0\u6b64\u6570\u636e\u5e93\u6587\u4ef6 ncbiMicros-C0* \u6700\u597d\u653e\u5728\u8bfb\u53d6\u901f\u5ea6\u6bd4\u8f83\u5757\u7684\u78c1\u76d8\u6247\u533a\u6216\u8005\u78c1\u76d8\u91cc\u5982SSD\u786c\u76d8\u3002\u53e6\u5916\u5982\u679c\u5185\u5b58\u8db3\u591f\uff0c\u53ef\u4ee5\u7528 metabeetl-convertMetagenomicRangesToTaxa_withMmap \u5de5\u5177\uff0c\u5c06\u8fd9\u4e9b\u6bd4\u5bf9\u6587\u4ef6\u8bfb\u5165\u5185\u5b58\u4e2d\u52a0\u5feb\u901f\u5ea6\u3002 $ cat BeetlCompareOutput/cycle*.subset* | \\ > metabeetl-convertMetagenomicRangesToTaxa \\ > ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > ${ METAGENOME_DATABASE_PATH } /metaBeetlTaxonomyNames.dmp \\ > ${ METAGENOME_DATABASE_PATH } /normalisation.txt \\ > 20 50 - > metaBeetl.log \u751f\u6210\u7684TSV\uff08\u5236\u8868\u7b26\u5206\u9694\uff09\u6587\u4ef6\u5404\u5217\u542b\u4e49\uff1a \u5217 \u5b57\u6bb5\u542b\u4e49 column 1 Taxonomy Id column 2 Taxonomy level column 3 k-mer count column 4 k-mer count including children TSV\u6587\u4ef6\u7528\u9014\uff1a metaBeetl.tsv: raw k-mer counts for every leaves and ancestors. metaBeetl_normalised.tsv: some counts from ancestors are moved towards leaf items. The proportion thereof is pre-computed by aligning each individual genome to the full database. metaBeetl_normalised2.tsv: Only leaves of the taxonomy tree are kept, and counts are normalised relatively to genome sizes. Krona JS \u7ed3\u679c\u6587\u4ef6 - metaBeetl_krona.html - metaBeetl_krona_normalised.html - metaBeetl_krona_normalised2.html \u53c2\u8003\u8d44\u6599 \u00b6 http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3622627/ https://github.com/BEETL/BEETL.git","title":"12. Meta-BEETL"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#meta-beetl","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb BEETL \u662f\u4e00\u5957\u505a Burrows-Wheeler Transform \u7684\u5de5\u5177\u96c6\uff0c Meta-BEETL <#meta-beetl> \u662f BEETL \u4e0b\u7684\u4e00\u4e2a\u5b50\u9879\u76ee\uff0c\u7528\u6765\u5206\u6790\u57fa\u4e8e Shotgun metagenomics \u7684\u5fae\u751f\u7269\u6570\u636e\u3002","title":"Meta-BEETL"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#meta-beetl-metagenomics","text":"","title":"Meta-BEETL Metagenomics"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#_1","text":"","title":"\u4e0b\u8f7d\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#1","text":"\u4f5c\u8005\u5df2\u7ecf\u5c06\u7814\u7a76\u6240\u7528\u5230\u7684\u6570\u636e\u5e93\u6574\u7406\u540e\u63d0\u4ea4\u5230 Amazon S3 \u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002\u603b\u6570\u636e\u91cf\u572824G\u5de6\u53f3\u3002 $ mkdir BeetlMetagenomeDatabase && cd BeetlMetagenomeDatabase $ for i in ` curl https://s3.amazonaws.com/metaBEETL | grep -oP \"[^>]*bz2\" ` ; \\ > do wget https://s3.amazonaws.com/metaBEETL/ $i & done \u9759\u6001\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u3002 https://s3.amazonaws.com/metaBEETL/filecounter.csv.bz2 https://s3.amazonaws.com/metaBEETL/headerFile.csv.bz2 https://s3.amazonaws.com/metaBEETL/names.dmp.bz2 https://s3.amazonaws.com/metaBEETL/ncbiFileNumToTaxTree.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-B06.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C00.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C01.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C02.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C03.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C04.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C05.bz2 https://s3.amazonaws.com/metaBEETL/ncbiMicros-C06.bz2 \u4e0b\u8f7d\u5b8c\u6210\u540e\u89e3\u538b\u7f29\u3002 $ bunzip2 *.bz2 $ export METAGENOME_DATABASE_PATH = ` pwd `","title":"1. \u5df2\u6574\u7406\u7684\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#2","text":"\u5904\u4e8e\u5b9e\u9645\u76ee\u7684\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981\u8fd9\u4e48\u5927\u7684\u6570\u636e\u5e93\uff0c\u6216\u8005\u9700\u8981\u66f4\u591a\u5176\u4ed6\u7684\u6570\u636e\u52a0\u5165\u5230\u6570\u636e\u5e93\uff0c\u90a3\u5c31\u9700\u8981\u81ea\u884c\u5efa\u7acb\u6570\u636e\u5e93\u3002 2.1 \u5b89\u88c5 SeqAn SeqAn <www.seqan.de> __ \u662f\u4e00\u4e2a\u9ad8\u6548\u7684 C++ \u7b97\u6cd5\u548c\u6570\u636e\u7ed3\u6784\u5e93\uff0c\u7528\u4e8e\u5206\u6790\u751f\u7269\u5e8f\u5217\u7b49\u7528\u9014\u3002\u8bbf\u95ee SeqAn <www.seqan.de> __ \u4e0b\u8f7d\u5e76\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u540e\u7f16\u8bd1BEETL\u65f6\u53ef\u4ee5\u6dfb\u52a0 --with-seqan \u53c2\u6570\u3002 # \u5b89\u88c5\u4f9d\u8d56\u5305 $ sudo apt-get install g++ cmake python zlib1g-dev libbz2-dev libboost-dev $ cd ~/apps $ git clone https://github.com/seqan/seqan.git && cd seqan $ git checkout -b develop origin/develop 2.2 \u4e0b\u8f7d\u76ee\u6807\u5e8f\u5217 \u4e0b\u8f7d\u9700\u8981\u7684\u5e8f\u5217\uff0c\u6bd4\u5982NCBI\u4e0a\u7ec6\u83cc\u7684\u57fa\u56e0\u7ec4 ref \u6570\u636e\u3002 $ wget ftp://ftp.ncbi.nlm.nih.gov/genomes/Bacteria/all.fna.tar.gz -P downloads $ mkdir all.fna $ tar xzf downloads/all.fna.tar.gz -C all.fna/ 2.3 \u521b\u5efa\u53bb\u9664\u8d28\u7c92\u5e8f\u5217\u7684\u5355\u57fa\u56e0\u7ec4\u5e8f\u5217 $ metabeetl-db-genomesToSingleSeq -f all.fna/*/*.fna -s singleSeqGenomes $ cd singleSeqGenomes 2.4 \u521b\u5efaBWT \u4fee\u6539 metabeetl-db-arrayBWT.sh \u6587\u4ef6\u91cc\u6570\u636e\u5e93\u8def\u5f84\uff0c\u521b\u5efaG_* \u548c G_*_rev \u6587\u4ef6\u7684BWTs\uff0c\u7528qsub\u6765\u5411\u7cfb\u7edf\u63d0\u4ea4\u4efb\u52a1\u3002\u4e5f\u53ef\u4ee5\u8fd0\u884c metabeetl-db-makeBWTSkew \u6765\u4e00\u4e2a\u4e2a\u521b\u5efa\u3002 $ cp ` which metabeetl-db-arrayBWT.sh ` . $ vim metabeetl-db-arrayBWT.sh $ metabeetl-db-arrayBWT.sh # \u6216\u8005\u4f7f\u7528\u5faa\u73af $ ( echo -n \"all: \" ; for i in G_* ; do echo -n \" bwt_ ${ i } -B00\" ; done ; echo -e \"\\n\" ; \\ > for i in G_* ; do echo \"bwt_ ${ i } -B00: ${ i } \" ; echo -e \"\\tmetabeetl-db-makeBWTSkew ${ i } ${ i } \\n\" ; done ) > Makefile $ make -j 2.5 \u5408\u5e76\u5e8f\u5217 \u5728\u4e00\u53f0\u5185\u5b58>60G\u7684\u673a\u5668\u4e0a\u5c06\u5e8f\u5217\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5e76\u5427\u6240\u6709\u6587\u4ef6\u5408\u5e76\u3002 $ for pileNum in ` seq 0 5 ` ; do metabeetl-db-mergeBacteria $pileNum ncbiMicros < ( ls G_* ) ; done \u751f\u6210\u7684\u6587\u4ef6\u540d\u79f0\u7c7b\u4f3c\uff1ancbiMicros-A0*, -B0* and -C0* A0* \u5305\u542b\u6bcf\u4e2aBWT\u7684\u4f4d\u7f6e B0* BWTs C0* \u5305\u542b\u6bcf\u4e2aBWT\u4f4d\u7f6e\u7684\u6587\u4ef6\u53f7 \u6587\u4ef6 -B0* and -C0* \u7528\u4e8e\u8ba1\u6570\u7b97\u6cd5 2.6 \u8f6c\u6362BWT\u6587\u4ef6\u683c\u5f0f \u53ef\u9009\u64cd\u4f5c\uff1a\u5c06BWT\u6587\u4ef6\u8f6c\u6362\u6210RLE BWT\u683c\u5f0f\uff0c\u8fd0\u884c\u53ef\u4ee5\u66f4\u5feb\u3002 $ for pileNum in ` seq 0 5 ` ; do \\ > mv ncbiMicros-B0 ${ pileNum } ncbiMicros-B0 ${ pileNum } .ascii ; \\ > beetl-convert \\ > --input-format = bwt_ascii \\ > --output-format = bwt_rle \\ > -i ncbiMicros-B0 ${ pileNum } .ascii \\ > -o ncbiMicros-B0 ${ pileNum } ; \\ > done 2.7 \u4e0b\u8f7dNCBI Taxoonmy $ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump.tar.gz $ wget ftp://ftp.ncbi.nih.gov/pub/taxonomy/gi_taxid_nucl.dmp.gz $ tar xzf taxdump.tar.gz names.dmp nodes.dmp $ gunzip gi_taxid_nucl.dmp.gz Infomation \u7528 metabeetl-db-findTaxa \u811a\u672c\u67e5\u627e\u6570\u636e\u5e93\u4e2d\u7684taxonomic\u6811\u3002 You will need the headerFile produced by running \"metabeetl-db-genomesToSingleSeq\" and fileCounter created during the merging of the bacterial reference genomes. | Finally, you get for each file number in the database a taxonomic tree with the taxonomic ids. | There will be some 0 in the taxonomic tree. This is a taxonomic id which could not be matched to: Superkingdom, Phylum, Order, Class, Family, Genus, Species or Strain. | Sometimes there are just missing taxa in the taxonomy. We supplement this with the file metaBeetlExtraNames.dmp below. $ metabeetl-db-findTaxa \\ > -nA downloads/names.dmp \\ > -nO downloads/nodes.dmp \\ > -nG downloads/gi_taxid_nucl.dmp \\ > -h singleSeqGenomes/headerFile.csv \\ > -f singleSeqGenomes/filecounter.csv > ncbiFileNumToTaxTree $ ( grep scientific downloads/names.dmp ; cat ${ BEETL_INSTALL_DIR } /share/beetl/metaBeetlExtraNames.dmp ) > metaBeetlTaxonomyNames.dmp 2.8 \u8ba1\u7b97 normalisation \u56e0\u5b50 $ mkdir normalisation $ cd normalisation $ touch normalize.sh $ vim normalize.sh \u7f16\u8f91\u811a\u672c\u5185\u5bb9\u5982\u4e0b # normalize.sh for genome in ../singleSeqGenomes/G_* ; do ( genomeNum = ` basename ${ genome } ` mkdir ${ genomeNum } cd ${ genomeNum } for i in ../../singleSeqGenomes/bwt_ ${ genomeNum } -B0? ; do ln -s ${ i } ; done for i in ` seq 0 6 ` ; do touch bwt_ ${ genomeNum } -B0 ${ i } ; done time beetl-compare --mode = metagenomics -a bwt_ ${ genomeNum } -b ../../singleSeqGenomes/ncbiMicros -t ../../ncbiFileNumToTaxTree -w 20 -n 1 -k 50 --no-comparison-skip -v & > out.step1 rm -f BeetlCompareOutput/cycle51.subset* touch empty.txt time cat BeetlCompareOutput/cycle*.subset* | metabeetl-convertMetagenomicRangesToTaxa ../../ncbiFileNumToTaxTree ../../singleSeqGenomes/ncbiMicros ../../metaBeetlTaxonomyNames.dmp empty.txt 20 50 - & > out.step2 cd .. ) & done ; wait for i in ` seq 1 2977 ` ; do echo \"G_ $i \" ; X = ` grep -P \"G_ ${ i } $ \" ../singleSeqGenomes/filecounter.csv | cut -f 1 -d ',' ` ; TAX = ` grep -P \"^ ${ X } \" ../ncbiFileNumToTaxTree | tr -d \"\\n\\r\" ` ; echo \"TAX( ${ X } ): ${ TAX } .\" ; TAXID = ` echo \" ${ TAX } \" | sed 's/\\( 0\\)*$//g' | awk '{print $NF}' ` ; echo \"TAXID= ${ TAXID } \" ; COUNTS = ` grep Counts G_ ${ i } /out.step2 | head -1 ` ; echo \"COUNTS= ${ COUNTS } \" ; MAIN_COUNT = ` echo \" ${ COUNTS } \" | sed \"s/^.* ${ TAXID } :\\([0-9]*\\) .* $ /\\1/ ; s/Counts.*/0/\" ` ; echo \"MAIN_COUNT= ${ MAIN_COUNT } \" ; SUM = ` echo \" ${ COUNTS } \" | tr ' ' '\\n' | sed 's/.*://' | awk 'BEGIN { sum=0 } { sum+=$1 } END { print sum }' ` ; echo \"SUM= $SUM \" ; PERCENT = ` echo -e \"scale=5\\n100* ${ MAIN_COUNT } / ${ SUM } \" | bc ` ; echo \"PERCENT= ${ PERCENT } \" ; echo \"FINAL: G_ ${ i } ${ TAXID } ${ MAIN_COUNT } ${ SUM } ${ COUNTS } \" ; done > r2977 grep FINAL r2977 > ../normalisation.txt 2.9 \u521b\u5efa\u6570\u636e\u5e93\u6587\u4ef6\u5939 $ mkdir metaBeetlNcbiDb $ cd ~/metaBeetlNcbiDb $ ln -s ../ncbiFileNumToTaxTree $ ln -s ../normalisation.txt $ ln -s ../downloads/metaBeetlTaxonomyNames.dmp $ ln -s ../singleSeqGenomes/filecounter.csv $ ln -s ../singleSeqGenomes/headerFile.csv $ for i in ../singleSeqGenomes/ncbiMicros- [ BC ] 0 [ 0 -5 ] ; do ln -s $i ; done","title":"2. \u81ea\u5df1\u5efa\u7acb\u6570\u636e\u5e93"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#3","text":"3.1 \u83b7\u53d6\u6570\u636e \u7528 SRS013948 \u8fd9\u4e2a\u4eba\u7c7b\u80a0\u9053\u7ec6\u83cc\u7ec4\u7814\u7a76\u9879\u76ee\u7684\u6570\u636e\u4f5c\u4e3a\u4f8b\u5b50\u3002\u9996\u5148\u4e0b\u8f7d\u6570\u636e: # http download $ wget http://downloads.hmpdacc.org/data/Illumina/throat/SRS013948.tar.bz2 # ftp download $ wget ftp://public-ftp.hmpdacc.org/Illumina/throat/SRS013948.tar.bz2 # \u89e3\u538b\u7f29 $ tar xjf SRS013948.tar.bz2 $ ls -l \u89e3\u538b\u7f29\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u97623\u4e2a\u6587\u4ef6\uff1a SRS013948.denovo_duplicates_marked.trimmed.1.fastq SRS013948.denovo_duplicates_marked.trimmed.2.fastq SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq 3.2 \u8f6c\u6362\u6570\u636e\u548c\u5408\u5e76\u6570\u636e $ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.1.fastq \\ > -o paddedSeq1.seq \\ > --sequence-length = 100 $ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.2.fastq \\ > -o paddedSeq2.seq \\ > --sequence-length = 100 $ beetl-convert \\ > -i SRS013948.denovo_duplicates_marked.trimmed.singleton.fastq \\ > -o paddedSeqSingleton.seq \\ > --sequence-length = 100 $ cat paddedSeq1.seq paddedSeq2.seq paddedSeqSingleton.seq > SRS013948.seq 3.3 \u4ee5 metagenomic \u6a21\u5f0f\u8fd0\u884c BEETL \u521b\u5efa BWT \u53d8\u6362\uff0c\u7136\u540e\u8fd0\u884c metagenomic \u6a21\u5f0f\u7684 BEETL $ beetl-bwt -i SRS013948.seq -o bwt_SRS013948 $ beetl-compare \\ > --mode = metagenomics \\ > -a bwt_SRS013948 \\ > -b ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > -t ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > -w 20 \\ > -n 1 \\ > -k 50 \\ > --no-comparison-skip beetl-compare \u547d\u4ee4\u4f1a\u5728\u6587\u4ef6\u5939 BeetlCompareOutput \u91cc\u751f\u6210\u8bb8\u591a\u6587\u4ef6\u3002k\u503c\u8bbe\u7f6e\u8d8a\u5927\uff0c\u53ef\u4ee5\u83b7\u5f97\u8d8a\u591a\u7684\u4fe1\u606f\u6570\u636e\uff0c\u4f46\u662f\u8f93\u51fa\u6587\u4ef6\u4e5f\u4f1a\u53d8\u5f97\u8d8a\u5927\u3002 3.4 \u56fe\u5f62\u5316\u663e\u793a\u7ed3\u679c metabeetl-convertMetagenomicRangesToTaxa : \u5de5\u5177\u6839\u636ekmer\u5339\u914d\uff0c\u4ece\u800c\u83b7\u5f97\u57fa\u56e0\u7ec4\u4ee5\u53ca\u4e0a\u4e00\u7ea7\u5206\u7c7b\u7684ID\u53f7\uff0c\u5e76\u751f\u6210\u6587\u5b57\u4e0e\u56fe\u5f62\u7ed3\u679c\uff08\u91c7\u7528Krona js\u53ef\u89c6\u5316\u5e93\u6765\u5f62\u6210\u7f51\u9875\u683c\u5f0f\u7684\u62a5\u544a\u6587\u4ef6\uff09\u3002\u7531\u4e8e\u7b97\u6cd5\u539f\u56e0\u9700\u8981\u9891\u7e41\u8bfb\u53d6BWT\u4f4d\u7f6e\uff0c\u56e0\u6b64\u6570\u636e\u5e93\u6587\u4ef6 ncbiMicros-C0* \u6700\u597d\u653e\u5728\u8bfb\u53d6\u901f\u5ea6\u6bd4\u8f83\u5757\u7684\u78c1\u76d8\u6247\u533a\u6216\u8005\u78c1\u76d8\u91cc\u5982SSD\u786c\u76d8\u3002\u53e6\u5916\u5982\u679c\u5185\u5b58\u8db3\u591f\uff0c\u53ef\u4ee5\u7528 metabeetl-convertMetagenomicRangesToTaxa_withMmap \u5de5\u5177\uff0c\u5c06\u8fd9\u4e9b\u6bd4\u5bf9\u6587\u4ef6\u8bfb\u5165\u5185\u5b58\u4e2d\u52a0\u5feb\u901f\u5ea6\u3002 $ cat BeetlCompareOutput/cycle*.subset* | \\ > metabeetl-convertMetagenomicRangesToTaxa \\ > ${ METAGENOME_DATABASE_PATH } /ncbiFileNumToTaxTree \\ > ${ METAGENOME_DATABASE_PATH } /ncbiMicros \\ > ${ METAGENOME_DATABASE_PATH } /metaBeetlTaxonomyNames.dmp \\ > ${ METAGENOME_DATABASE_PATH } /normalisation.txt \\ > 20 50 - > metaBeetl.log \u751f\u6210\u7684TSV\uff08\u5236\u8868\u7b26\u5206\u9694\uff09\u6587\u4ef6\u5404\u5217\u542b\u4e49\uff1a \u5217 \u5b57\u6bb5\u542b\u4e49 column 1 Taxonomy Id column 2 Taxonomy level column 3 k-mer count column 4 k-mer count including children TSV\u6587\u4ef6\u7528\u9014\uff1a metaBeetl.tsv: raw k-mer counts for every leaves and ancestors. metaBeetl_normalised.tsv: some counts from ancestors are moved towards leaf items. The proportion thereof is pre-computed by aligning each individual genome to the full database. metaBeetl_normalised2.tsv: Only leaves of the taxonomy tree are kept, and counts are normalised relatively to genome sizes. Krona JS \u7ed3\u679c\u6587\u4ef6 - metaBeetl_krona.html - metaBeetl_krona_normalised.html - metaBeetl_krona_normalised2.html","title":"3. \u5206\u6790\u6570\u636e"},{"location":"book/C12_Metagenomics-Analysis/12_meta-beetl/#_2","text":"http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3622627/ https://github.com/BEETL/BEETL.git","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C13_Single-Molecular-Sequencing/","text":"","title":"Index"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/","text":"Nanopore Minion/Gridon \u6d4b\u5e8f\u6570\u636e\u5904\u7406 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd \u672c\u8282\u4ee5\u4ecb\u7ecd\u7eb3\u7c73\u5b54\u6d4b\u5e8f\u4e0b\u673a\u6570\u636e\u7684\u5e38\u7528\u5206\u6790\u8def\u7ebf\u3002 Nanopore \u6d4b\u5e8f\u7684\u4f18\u70b9\uff1a \u5b9e\u9a8c\u64cd\u4f5c\u65b9\u4fbf \u6570\u636e\u5b9e\u65f6\u751f\u6210\uff0c\u7b2c\u4e00\u65f6\u95f4\u5206\u6790 \u957f\u8bfb\u957f Nanopore \u6d4b\u5e8f\u7684 Nanopore \u6d4b\u5e8f\u56e0\u4e3a\u5176\u7279\u70b9\uff0c\u56e0\u6b64\u5728 basecalling \u548c demultiplexing \u4e0a\u6709\u8bb8\u591a\u8f6f\u4ef6\u53ef\u4ee5\u5bf9\u5176\u64cd\u4f5c\u3002\u4e0d\u540c\u8f6f\u4ef6\u6709\u57fa\u4e8e\u81ea\u5df1\u7684\u7b97\u6cd5\uff0c\u5728\u901f\u5ea6\u548c\u51c6\u786e\u6027\u4e0a\u6709\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u76ee\u524d\u8bb8\u591a\u8f6f\u4ef6\u4e5f\u5728\u4e0d\u65ad\u7684\u53d1\u5c55\u548c\u6539\u8fdb\u4e2d\u3002\u56e0\u6b64\u4e0eillumina\u6570\u636e\u4e0d\u540c\uff0c\u5728\u5bf9\u5176\u6570\u636e\u8fdb\u884c\u5206\u6790\u524d\uff0c\u8fd92\u6b65\u64cd\u4f5c\u9700\u8981\u6709\u4e00\u4e2a\u57fa\u672c\u7684\u8ba4\u8bc6\u3002 Basecalling \u00b6 High accuracy basecalling \u5982\u679c\u53ea\u662f\u7528\u4e8e\u75c5\u539f\u68c0\u6d4b\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 fast basecalling \u6a21\u5f0f\u83b7\u5f97\u78b1\u57fa\uff0c\u666e\u901a\u9ad8\u6027\u80fd\u7535\u8111\u57fa\u672c\u5c31\u53ef\u4ee5\u6ee1\u8db3\u9700\u6c42\u3002\u800c\u5bf9\u4e8e\u6570\u636e\u8d28\u91cf\u66f4\u9ad8\uff0c\u7279\u522b\u5bf9\u5355\u4e2a\u78b1\u57fa\u8fdb\u884c\u5206\u6790\u7684\u5de5\u4f5c\uff0c\u6700\u597d\u91c7\u7528\u57fa\u4e8e GPU \u7684\u9ad8\u7cbe\u5ea6 basecalling\u3002 \u76ee\u524d Minion/Gridion \u91c7\u7528\u7684 MinKNOW \u8f6f\u4ef6\u4f7f\u7528\u7684\u662f Guppy \u8fdb\u884c basecalling \u548c demultiplexing\u3002\u53ef\u4ee5\u4f7f\u7528 fast \u548c accuracy 2\u79cd\u6a21\u5f0f\uff0c\u524d\u8005\u5728\u9ad8\u6027\u80fd\u7684CPU\u548cSSD\u4e0a\u53ef\u4ee5\u8fbe\u5230\u5b9e\u65f6basecalling\uff0c\u540e\u8005\u5219\u9700\u8981\u5728\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684GPU\u548cSSD\u4e0a\u53ef\u4ee5\u505a\u5230\u5b9e\u65f6\u3002 Gridion X5 \u673a\u5668\u81ea\u5e26\u4e86 GV100 GPU \u53ef\u4ee5\u5b9e\u65f6\u540c\u65f6\u4e3a5\u5f20\u82af\u7247\u8fdb\u884cbasecalling\u3002\u5982\u679c\u662fMinion\uff0c\u5219\u9700\u8981\u5916\u63a5 GPU \u505a demultiplexing \u00b6 \u76ee\u524d\u7248\u672c\u7684\u4e00\u5f20 Minion/Gridion \u7684 Flowcell \u4e0a\uff0c\u4e0a\u6837\u5bc6\u5ea6\u4f18\u5316\u540e\u53ef\u4ee5\u83b7\u5f9720G\u4ee5\u4e0a\u7684\u78b1\u57fa\u6570\u636e\u3002\u867d\u7136\u82af\u7247\u53ef\u4ee5\u6e05\u6d17\u4f7f\u7528\u591a\u6b21\uff0c\u4f46\u6b21\u6570\u548c\u65f6\u95f4\u4e5f\u6709\u9650\u5236\u3002\u5b9e\u9645\u5de5\u4f5c\u4e2d\u5f80\u5f80\u9700\u8981\u5728\u4e00\u5f20\u82af\u7247\u540c\u65f6\u8fdb\u884c\u591a\u4e2a\u6837\u672c\u7684\u6d4b\u5e8f\uff0c\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u5728\u5b9e\u9a8c\u5ba4\u6d41\u7a0b\u4e2d\u91c7\u7528\u8fde\u63a5\u6cd5\u6216\u8005PCR\u6cd5\u628abarcode\u751f\u6210\u5230\u6d4b\u5e8f\u5e8f\u5217\u4e0a\uff0c\u4ee5\u533a\u5206\u6837\u672c\u3002 \u7531\u4e8e Nanopore \u6d4b\u5e8f\u51c6\u786e\u5ea6\u76f8\u6bd4 illumina \u4f4e\u5f88\u591a\uff0c\u56e0\u6b64\u51c6\u786e\u505a demultiplexing \u7684\u96be\u5ea6\u4e5f\u4f1a\u5927\u5f88\u591a\u3002\u7279\u522b\u662f\u5982\u679c\u4f7f\u7528\u7684\u662f\u8fde\u63a5\u9176\u8fde\u63a5\u8857\u5934\uff0c\u5b9e\u9645\u83b7\u5f97\u7684\u8fde\u63a5\u5e8f\u5217\u4f1a\u6bd4\u8f83\u590d\u6742\u3002\u76ee\u524d\u6709\u4e00\u4e9b\u8f6f\u4ef6\u53ef\u4ee5\u8fdb\u884c \u5982\u679c\u4e00\u5f20\u82af\u7247\u4e0a\u4e00\u6b21\u8fdb\u884c\u591a\u4e2a\u6837\u672c\u7684\u6d4b\u5e8f\uff0c\u90a3\u4e48\u5c31\u8981\u5bb6barcode\u5e8f\u5217\u533a\u5206\u6837\u672c\uff0c\u5206\u6790\u65f6\u5982\u679c\u62ff\u5230\u7684\u6570\u636e\u6ca1\u6709\u505a\u8fc7demultiplexing\uff0c\u90a3\u4e48\u9700\u8981\u81ea\u5df1\u624b\u5de5\u505a\u3002\u8fd9\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u6709\u591a\u4e2a\u8f6f\u4ef6\u5b9e\u73b0\u3002 \u5b98\u65b9\u7684 guppy \u53ef\u4ee5\u8fdb\u884c demultiplexing\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5bf9 fast5 \u8fdb\u884c demultiplexing \u5de5\u4f5c\u3002 deepbinner porechop qcat guppy deepbinner \u4e0e albacore\u3001porechop \u4e0d\u540c\uff0c\u4ed6\u901a\u8fc7CNN\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c demultiplexing\uff0c\u76ee\u524d\u6700\u65b0\u7248\u7684MinKnow\u4e5f\u4f7f\u7528\u4e86Guppy\u7b49RNN\u5de5\u5177\u63d0\u5347basecalling\uff0c\u7cbe\u5ea6\u6bd4\u8fc7\u53bb\u7684\u8f6f\u4ef6\u6709\u6240\u63d0\u5347\u3002 ```bash # porechop \u4f7f\u7528 -b \u53c2\u6570\uff0c\u53ef\u4ee5\u5bf9reads\u8fdb\u884cdemultiplexing\u64cd\u4f5c # \u89e3\u5f00\u7684\u5404\u4e2a\u6837\u672c\u5e8f\u5217\u653e\u5728ouput\u76ee\u5f55\u4e2d (nanopore)$ porechop -i data.fq.gz -b output \u7ec4\u88c5\u5206\u6790 \u00b6 \u6d41\u7a0b\u4e00 \u00b6 \u4f7f\u7528\u8f6f\u4ef6 porechop v0.2.3: \u53d6\u51fa\u63a5\u5934\u5e8f\u5217 NanoFilt v2.2.0: \u8fc7\u6ee4\u4f4e\u8d28\u91cf\u5e8f\u5217 canu v1.4: \u4e09\u4ee3\u7ec4\u88c5\u8f6f\u4ef6 unicycler v0.4.7: \u6df7\u5408\u7ec4\u88c5\u8f6f\u4ef6 Warning \u7531\u4e8e Nanopore \u786c\u4ef6\u3001\u82af\u7247\u3001\u8f6f\u4ef6\u8fd8\u5728\u4e0d\u65ad\u6539\u8fdb\u4e2d\uff0c\u56e0\u6b64\u7b2c\u4e09\u65b9\u5206\u6790\u8f6f\u4ef6\u7248\u672c\u548c\u529f\u80fd\u53ef\u80fd\u4e5f\u4f1a\u5373\u65f6\u53d8\u5316\u3002 MinKNOW \u4f5c\u4e3a\u6d4b\u5e8f\u8f6f\u4ef6\u5bf9 minION \u8fdb\u884c\u6d4b\u5e8f\u5b9e\u9a8c\u65f6\uff0c\u6d4b\u5e8f\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u65f6\u4f1a\u505a BASECALLING\uff0c\u751f\u6210 fast5 \u548c fastq \u6587\u4ef6\u3002 # \u751f\u6210 conda \u73af\u5883 $ conda create -n nanopore $ conda activate nanopore ( nanopore ) $ conda install porechop nanofilt canu unicycler \u9ed8\u8ba4\u8bbe\u7f6e\u65f6\uff0c\u6bcf4000\u6761\u901a\u8fc7\u6821\u9a8c\u7684reads\u4f1abasecalling\u6210\u4e00\u4e2afastq\u6587\u4ef6\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u91cc\u6211\u4eec\u53ea\u5bf912\u4e2afastq\u6587\u4ef6\u8fdb\u884c\u5206\u6790\uff0c\u6bcf\u4e2a\u6587\u4ef6\u67094K\u6761reads\u3002 # \u53bb\u9664\u63a5\u5934\uff0c\u5c06fastq\u6587\u4ef6\u538b\u7f29\uff0c\u5e94\u8be5\u6ca1\u6709\u538b\u7f29\uff0c\u8fd8\u662f\u7eaf\u6587\u672c # -t 8 \u4e3a\u91c7\u75288\u4e2a\u7ebf\u7a0b\uff0c-i \u4e3a\u8f93\u5165\u5e8f\u5217\uff0c -o \u4e3a\u751f\u6210\u7684\u53bb\u9664\u63a5\u5934\u540e\u7684fastq\u6587\u4ef6 ( nanopore ) $ for fq in { 0 ..11 } ; do porechop -t 8 -i *_ ${ fq } .fastq -o ${ fq } .fastq ; done # \u6216\u8005\u5c06\u6587\u4ef6\u5408\u5e76\uff0c\u5728\u53d6\u51fa\u63a5\u5934 # \u5408\u5e76\u540e\u76f4\u63a5\u7528\u76f8\u5e94\u7a0b\u5e8f\u5bf9data.fq\u8fdb\u884c\u64cd\u4f5c\uff0c ( nanopore ) $ for fq in { 0 ..11 } ; do cat $fq >> data.fq ; done ( nanopore ) $ porechop -t 8 -i data.fq -o data_porechop.fq # \u53bb\u9664\u4f4e\u8d28\u91cf\u78b1\u57fa\uff0c\u5c06reads\u5e73\u5747Q\u503c\u4f4e\u4e8e9\u7684\u53bb\u9664 # \u968f\u7740\u6d4b\u5e8f\u82af\u7247\u7684\u53d1\u5c55\u548cbasecalling\u7684\u51c6\u786e\u5ea6\u63d0\u5347\uff0cnanopore Q\u503c\u4e0d\u65ad\u5728\u6539\u8fdb\u4e2d # \u8fc7\u6ee4 -q \u53c2\u6570\u8bbe\u7f6e\u4e3a\u591a\u5c11\u6bd4\u8f83\u5408\u9002\u4e00\u822c\u6839\u636e\u4f60\u8fdb\u884c\u7684\u5206\u6790\u6765\u51b3\u5b9a # \u5bf9\u4e8e\u7269\u79cd\u9274\u5b9a\u7b49reads\u68c0\u6d4b\u7684\uff0c\u4e00\u822c -q 7 \u5373\u53ef # \u5bf9\u4e8e\u7cbe\u5ea6\u8981\u6c42\u9ad8\u7684\u6eaf\u6e90\uff0c\u5efa\u8bae -q 9 \u4ee5\u4e0a ( nanopore ) $ for trim in { 0 ..11 } ; do cat ${ trim } .fastq | NanoFilt -q 9 >> trimmed.fastq ; done # \u91c7\u7528 canu \u76f4\u63a5\u5bf9\u7eaf nanopore reads \u8fdb\u884c\u7ec4\u88c5 # -correct \u5148\u8fdb\u884c\u77eb\u6b63 # genomeSize \u4e3a\u6240\u62fc\u63a5\u7269\u79cd\u9884\u4f30\u7684\u57fa\u56e0\u7ec4\u5927\u5c0f\uff0c\u8fd9\u91cc\u4e3a6M\u5927\u5c0f ( nanopore ) $ canu -correct genomeSize = 6m -p vp1 -nanopore-raw trimmed.fastq # -assemble \u7ec4\u88c5\u5e8f\u5217 ( nanopore ) $ canu -assemble genomeSize = 6m -p vp1 -d contigs -nanopore-corrected vp1.correctedReads.fasta.gz # unicycler \u6df7\u5408\u7ec4\u88c5illumina\u548cnanopore\u6570\u636e # \u8fd9\u91cc illumina PE \u6d4b\u5e8f reads \u4e3a R1.fastq.tz R2.fastq.gz ( nanopore ) $ unicycler -t 8 -1 R1.fastq.gz -2 R2.fastq.gz -l minion.fastq.gz -o hybrid \u76ee\u524d\u4e3b\u6d41\u7684Nanopore\u957f\u5e8f\u5217\u7ec4\u88c5\u8f6f\u4ef6 \u00b6 miniasm : Li heng \u5f00\u53d1\u7684\u957f\u5e8f\u5217\u7ec4\u88c5\u5de5\u5177 canu : marbl\u5f00\u53d1\u7684\u7ec4\u88c5\u5de5\u5177 wtdbg2 : \u56fd\u5185\u5927\u725b\u5f00\u53d1\u7684\u5de5\u5177 flye : \u6700\u8fd1\u65b0\u51fa\u73b0\u7684\u70ed\u95e8\u7684\u5de5\u5177 unicycler : \u4e3b\u6d41\u7684\u6df7\u5408\u7ec4\u88c5\u8f6f\u4ef6 spades : \u4e3b\u6d41\u7684\u4e8c\u4ee3\u6d4b\u5e8f\u7ec4\u88c5\u8f6f\u4ef6\uff0c\u53ef\u652f\u6301\u6df7\u5408\u7ec4\u88c5 \u53c2\u8003\u8d44\u6599 \u00b6 https://github.com/rrwick/Porechop https://github.com/rrwick/Deepbinner","title":"01. nanopore"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#nanopore-miniongridon","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd \u672c\u8282\u4ee5\u4ecb\u7ecd\u7eb3\u7c73\u5b54\u6d4b\u5e8f\u4e0b\u673a\u6570\u636e\u7684\u5e38\u7528\u5206\u6790\u8def\u7ebf\u3002 Nanopore \u6d4b\u5e8f\u7684\u4f18\u70b9\uff1a \u5b9e\u9a8c\u64cd\u4f5c\u65b9\u4fbf \u6570\u636e\u5b9e\u65f6\u751f\u6210\uff0c\u7b2c\u4e00\u65f6\u95f4\u5206\u6790 \u957f\u8bfb\u957f Nanopore \u6d4b\u5e8f\u7684 Nanopore \u6d4b\u5e8f\u56e0\u4e3a\u5176\u7279\u70b9\uff0c\u56e0\u6b64\u5728 basecalling \u548c demultiplexing \u4e0a\u6709\u8bb8\u591a\u8f6f\u4ef6\u53ef\u4ee5\u5bf9\u5176\u64cd\u4f5c\u3002\u4e0d\u540c\u8f6f\u4ef6\u6709\u57fa\u4e8e\u81ea\u5df1\u7684\u7b97\u6cd5\uff0c\u5728\u901f\u5ea6\u548c\u51c6\u786e\u6027\u4e0a\u6709\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u76ee\u524d\u8bb8\u591a\u8f6f\u4ef6\u4e5f\u5728\u4e0d\u65ad\u7684\u53d1\u5c55\u548c\u6539\u8fdb\u4e2d\u3002\u56e0\u6b64\u4e0eillumina\u6570\u636e\u4e0d\u540c\uff0c\u5728\u5bf9\u5176\u6570\u636e\u8fdb\u884c\u5206\u6790\u524d\uff0c\u8fd92\u6b65\u64cd\u4f5c\u9700\u8981\u6709\u4e00\u4e2a\u57fa\u672c\u7684\u8ba4\u8bc6\u3002","title":"Nanopore Minion/Gridon \u6d4b\u5e8f\u6570\u636e\u5904\u7406"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#basecalling","text":"High accuracy basecalling \u5982\u679c\u53ea\u662f\u7528\u4e8e\u75c5\u539f\u68c0\u6d4b\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 fast basecalling \u6a21\u5f0f\u83b7\u5f97\u78b1\u57fa\uff0c\u666e\u901a\u9ad8\u6027\u80fd\u7535\u8111\u57fa\u672c\u5c31\u53ef\u4ee5\u6ee1\u8db3\u9700\u6c42\u3002\u800c\u5bf9\u4e8e\u6570\u636e\u8d28\u91cf\u66f4\u9ad8\uff0c\u7279\u522b\u5bf9\u5355\u4e2a\u78b1\u57fa\u8fdb\u884c\u5206\u6790\u7684\u5de5\u4f5c\uff0c\u6700\u597d\u91c7\u7528\u57fa\u4e8e GPU \u7684\u9ad8\u7cbe\u5ea6 basecalling\u3002 \u76ee\u524d Minion/Gridion \u91c7\u7528\u7684 MinKNOW \u8f6f\u4ef6\u4f7f\u7528\u7684\u662f Guppy \u8fdb\u884c basecalling \u548c demultiplexing\u3002\u53ef\u4ee5\u4f7f\u7528 fast \u548c accuracy 2\u79cd\u6a21\u5f0f\uff0c\u524d\u8005\u5728\u9ad8\u6027\u80fd\u7684CPU\u548cSSD\u4e0a\u53ef\u4ee5\u8fbe\u5230\u5b9e\u65f6basecalling\uff0c\u540e\u8005\u5219\u9700\u8981\u5728\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684GPU\u548cSSD\u4e0a\u53ef\u4ee5\u505a\u5230\u5b9e\u65f6\u3002 Gridion X5 \u673a\u5668\u81ea\u5e26\u4e86 GV100 GPU \u53ef\u4ee5\u5b9e\u65f6\u540c\u65f6\u4e3a5\u5f20\u82af\u7247\u8fdb\u884cbasecalling\u3002\u5982\u679c\u662fMinion\uff0c\u5219\u9700\u8981\u5916\u63a5 GPU \u505a","title":"Basecalling"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#demultiplexing","text":"\u76ee\u524d\u7248\u672c\u7684\u4e00\u5f20 Minion/Gridion \u7684 Flowcell \u4e0a\uff0c\u4e0a\u6837\u5bc6\u5ea6\u4f18\u5316\u540e\u53ef\u4ee5\u83b7\u5f9720G\u4ee5\u4e0a\u7684\u78b1\u57fa\u6570\u636e\u3002\u867d\u7136\u82af\u7247\u53ef\u4ee5\u6e05\u6d17\u4f7f\u7528\u591a\u6b21\uff0c\u4f46\u6b21\u6570\u548c\u65f6\u95f4\u4e5f\u6709\u9650\u5236\u3002\u5b9e\u9645\u5de5\u4f5c\u4e2d\u5f80\u5f80\u9700\u8981\u5728\u4e00\u5f20\u82af\u7247\u540c\u65f6\u8fdb\u884c\u591a\u4e2a\u6837\u672c\u7684\u6d4b\u5e8f\uff0c\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u5728\u5b9e\u9a8c\u5ba4\u6d41\u7a0b\u4e2d\u91c7\u7528\u8fde\u63a5\u6cd5\u6216\u8005PCR\u6cd5\u628abarcode\u751f\u6210\u5230\u6d4b\u5e8f\u5e8f\u5217\u4e0a\uff0c\u4ee5\u533a\u5206\u6837\u672c\u3002 \u7531\u4e8e Nanopore \u6d4b\u5e8f\u51c6\u786e\u5ea6\u76f8\u6bd4 illumina \u4f4e\u5f88\u591a\uff0c\u56e0\u6b64\u51c6\u786e\u505a demultiplexing \u7684\u96be\u5ea6\u4e5f\u4f1a\u5927\u5f88\u591a\u3002\u7279\u522b\u662f\u5982\u679c\u4f7f\u7528\u7684\u662f\u8fde\u63a5\u9176\u8fde\u63a5\u8857\u5934\uff0c\u5b9e\u9645\u83b7\u5f97\u7684\u8fde\u63a5\u5e8f\u5217\u4f1a\u6bd4\u8f83\u590d\u6742\u3002\u76ee\u524d\u6709\u4e00\u4e9b\u8f6f\u4ef6\u53ef\u4ee5\u8fdb\u884c \u5982\u679c\u4e00\u5f20\u82af\u7247\u4e0a\u4e00\u6b21\u8fdb\u884c\u591a\u4e2a\u6837\u672c\u7684\u6d4b\u5e8f\uff0c\u90a3\u4e48\u5c31\u8981\u5bb6barcode\u5e8f\u5217\u533a\u5206\u6837\u672c\uff0c\u5206\u6790\u65f6\u5982\u679c\u62ff\u5230\u7684\u6570\u636e\u6ca1\u6709\u505a\u8fc7demultiplexing\uff0c\u90a3\u4e48\u9700\u8981\u81ea\u5df1\u624b\u5de5\u505a\u3002\u8fd9\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u6709\u591a\u4e2a\u8f6f\u4ef6\u5b9e\u73b0\u3002 \u5b98\u65b9\u7684 guppy \u53ef\u4ee5\u8fdb\u884c demultiplexing\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5bf9 fast5 \u8fdb\u884c demultiplexing \u5de5\u4f5c\u3002 deepbinner porechop qcat guppy deepbinner \u4e0e albacore\u3001porechop \u4e0d\u540c\uff0c\u4ed6\u901a\u8fc7CNN\u795e\u7ecf\u7f51\u7edc\u8fdb\u884c demultiplexing\uff0c\u76ee\u524d\u6700\u65b0\u7248\u7684MinKnow\u4e5f\u4f7f\u7528\u4e86Guppy\u7b49RNN\u5de5\u5177\u63d0\u5347basecalling\uff0c\u7cbe\u5ea6\u6bd4\u8fc7\u53bb\u7684\u8f6f\u4ef6\u6709\u6240\u63d0\u5347\u3002 ```bash # porechop \u4f7f\u7528 -b \u53c2\u6570\uff0c\u53ef\u4ee5\u5bf9reads\u8fdb\u884cdemultiplexing\u64cd\u4f5c # \u89e3\u5f00\u7684\u5404\u4e2a\u6837\u672c\u5e8f\u5217\u653e\u5728ouput\u76ee\u5f55\u4e2d (nanopore)$ porechop -i data.fq.gz -b output","title":"demultiplexing"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#_1","text":"","title":"\u7ec4\u88c5\u5206\u6790"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#_2","text":"\u4f7f\u7528\u8f6f\u4ef6 porechop v0.2.3: \u53d6\u51fa\u63a5\u5934\u5e8f\u5217 NanoFilt v2.2.0: \u8fc7\u6ee4\u4f4e\u8d28\u91cf\u5e8f\u5217 canu v1.4: \u4e09\u4ee3\u7ec4\u88c5\u8f6f\u4ef6 unicycler v0.4.7: \u6df7\u5408\u7ec4\u88c5\u8f6f\u4ef6 Warning \u7531\u4e8e Nanopore \u786c\u4ef6\u3001\u82af\u7247\u3001\u8f6f\u4ef6\u8fd8\u5728\u4e0d\u65ad\u6539\u8fdb\u4e2d\uff0c\u56e0\u6b64\u7b2c\u4e09\u65b9\u5206\u6790\u8f6f\u4ef6\u7248\u672c\u548c\u529f\u80fd\u53ef\u80fd\u4e5f\u4f1a\u5373\u65f6\u53d8\u5316\u3002 MinKNOW \u4f5c\u4e3a\u6d4b\u5e8f\u8f6f\u4ef6\u5bf9 minION \u8fdb\u884c\u6d4b\u5e8f\u5b9e\u9a8c\u65f6\uff0c\u6d4b\u5e8f\u7684\u9ed8\u8ba4\u8bbe\u7f6e\u65f6\u4f1a\u505a BASECALLING\uff0c\u751f\u6210 fast5 \u548c fastq \u6587\u4ef6\u3002 # \u751f\u6210 conda \u73af\u5883 $ conda create -n nanopore $ conda activate nanopore ( nanopore ) $ conda install porechop nanofilt canu unicycler \u9ed8\u8ba4\u8bbe\u7f6e\u65f6\uff0c\u6bcf4000\u6761\u901a\u8fc7\u6821\u9a8c\u7684reads\u4f1abasecalling\u6210\u4e00\u4e2afastq\u6587\u4ef6\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u91cc\u6211\u4eec\u53ea\u5bf912\u4e2afastq\u6587\u4ef6\u8fdb\u884c\u5206\u6790\uff0c\u6bcf\u4e2a\u6587\u4ef6\u67094K\u6761reads\u3002 # \u53bb\u9664\u63a5\u5934\uff0c\u5c06fastq\u6587\u4ef6\u538b\u7f29\uff0c\u5e94\u8be5\u6ca1\u6709\u538b\u7f29\uff0c\u8fd8\u662f\u7eaf\u6587\u672c # -t 8 \u4e3a\u91c7\u75288\u4e2a\u7ebf\u7a0b\uff0c-i \u4e3a\u8f93\u5165\u5e8f\u5217\uff0c -o \u4e3a\u751f\u6210\u7684\u53bb\u9664\u63a5\u5934\u540e\u7684fastq\u6587\u4ef6 ( nanopore ) $ for fq in { 0 ..11 } ; do porechop -t 8 -i *_ ${ fq } .fastq -o ${ fq } .fastq ; done # \u6216\u8005\u5c06\u6587\u4ef6\u5408\u5e76\uff0c\u5728\u53d6\u51fa\u63a5\u5934 # \u5408\u5e76\u540e\u76f4\u63a5\u7528\u76f8\u5e94\u7a0b\u5e8f\u5bf9data.fq\u8fdb\u884c\u64cd\u4f5c\uff0c ( nanopore ) $ for fq in { 0 ..11 } ; do cat $fq >> data.fq ; done ( nanopore ) $ porechop -t 8 -i data.fq -o data_porechop.fq # \u53bb\u9664\u4f4e\u8d28\u91cf\u78b1\u57fa\uff0c\u5c06reads\u5e73\u5747Q\u503c\u4f4e\u4e8e9\u7684\u53bb\u9664 # \u968f\u7740\u6d4b\u5e8f\u82af\u7247\u7684\u53d1\u5c55\u548cbasecalling\u7684\u51c6\u786e\u5ea6\u63d0\u5347\uff0cnanopore Q\u503c\u4e0d\u65ad\u5728\u6539\u8fdb\u4e2d # \u8fc7\u6ee4 -q \u53c2\u6570\u8bbe\u7f6e\u4e3a\u591a\u5c11\u6bd4\u8f83\u5408\u9002\u4e00\u822c\u6839\u636e\u4f60\u8fdb\u884c\u7684\u5206\u6790\u6765\u51b3\u5b9a # \u5bf9\u4e8e\u7269\u79cd\u9274\u5b9a\u7b49reads\u68c0\u6d4b\u7684\uff0c\u4e00\u822c -q 7 \u5373\u53ef # \u5bf9\u4e8e\u7cbe\u5ea6\u8981\u6c42\u9ad8\u7684\u6eaf\u6e90\uff0c\u5efa\u8bae -q 9 \u4ee5\u4e0a ( nanopore ) $ for trim in { 0 ..11 } ; do cat ${ trim } .fastq | NanoFilt -q 9 >> trimmed.fastq ; done # \u91c7\u7528 canu \u76f4\u63a5\u5bf9\u7eaf nanopore reads \u8fdb\u884c\u7ec4\u88c5 # -correct \u5148\u8fdb\u884c\u77eb\u6b63 # genomeSize \u4e3a\u6240\u62fc\u63a5\u7269\u79cd\u9884\u4f30\u7684\u57fa\u56e0\u7ec4\u5927\u5c0f\uff0c\u8fd9\u91cc\u4e3a6M\u5927\u5c0f ( nanopore ) $ canu -correct genomeSize = 6m -p vp1 -nanopore-raw trimmed.fastq # -assemble \u7ec4\u88c5\u5e8f\u5217 ( nanopore ) $ canu -assemble genomeSize = 6m -p vp1 -d contigs -nanopore-corrected vp1.correctedReads.fasta.gz # unicycler \u6df7\u5408\u7ec4\u88c5illumina\u548cnanopore\u6570\u636e # \u8fd9\u91cc illumina PE \u6d4b\u5e8f reads \u4e3a R1.fastq.tz R2.fastq.gz ( nanopore ) $ unicycler -t 8 -1 R1.fastq.gz -2 R2.fastq.gz -l minion.fastq.gz -o hybrid","title":"\u6d41\u7a0b\u4e00"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#nanopore","text":"miniasm : Li heng \u5f00\u53d1\u7684\u957f\u5e8f\u5217\u7ec4\u88c5\u5de5\u5177 canu : marbl\u5f00\u53d1\u7684\u7ec4\u88c5\u5de5\u5177 wtdbg2 : \u56fd\u5185\u5927\u725b\u5f00\u53d1\u7684\u5de5\u5177 flye : \u6700\u8fd1\u65b0\u51fa\u73b0\u7684\u70ed\u95e8\u7684\u5de5\u5177 unicycler : \u4e3b\u6d41\u7684\u6df7\u5408\u7ec4\u88c5\u8f6f\u4ef6 spades : \u4e3b\u6d41\u7684\u4e8c\u4ee3\u6d4b\u5e8f\u7ec4\u88c5\u8f6f\u4ef6\uff0c\u53ef\u652f\u6301\u6df7\u5408\u7ec4\u88c5","title":"\u76ee\u524d\u4e3b\u6d41\u7684Nanopore\u957f\u5e8f\u5217\u7ec4\u88c5\u8f6f\u4ef6"},{"location":"book/C13_Single-Molecular-Sequencing/01_nanopore/#_3","text":"https://github.com/rrwick/Porechop https://github.com/rrwick/Deepbinner","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C13_Single-Molecular-Sequencing/02_pacbio/","text":"Pacbio \u6570\u636e\u5206\u6790 \u00b6","title":"02. pacbio"},{"location":"book/C13_Single-Molecular-Sequencing/02_pacbio/#pacbio","text":"","title":"Pacbio \u6570\u636e\u5206\u6790"},{"location":"book/C13_Single-Molecular-Sequencing/03_canu/","text":"Canu \u00b6 \u4f7f\u7528 \u00b6 $ canu -p lm -d lm genomeSize = 5m useGrid = false -nanopore-raw sample_lm.fasta","title":"03. canu"},{"location":"book/C13_Single-Molecular-Sequencing/03_canu/#canu","text":"","title":"Canu"},{"location":"book/C13_Single-Molecular-Sequencing/03_canu/#_1","text":"$ canu -p lm -d lm genomeSize = 5m useGrid = false -nanopore-raw sample_lm.fasta","title":"\u4f7f\u7528"},{"location":"book/C13_Single-Molecular-Sequencing/04_seqs-polish/","text":"\u6570\u636e\u6e05\u6d17 \u00b6 \u5185\u5bb9\u4ecb\u7ecd \u56e0\u4e3aNanopore\u5e8f\u5217\u51c6\u786e\u6027\u7684\u7279\u70b9\uff0c\u9700\u8981\u8fdb\u884c\u6570\u636e\u6e05\u6d17\u5df2\u5b8c\u6210\u540e\u7eed\u7684\u5206\u6790\u5de5\u4f5c\uff0c\u672c\u8282\u4ee5 Minion \u4e3a\u4f8b\u4ecb\u7ecd\u7eb3\u7c73\u5b54\u6d4b\u5e8f\u4e0b\u673a\u6570\u636e\u7684\u6e05\u6d17\u64cd\u4f5c\u3002 1. porechop \u00b6 \u53bb\u9664\u63a5\u5934 $ porechop -i minion_brown_metagenome/brown_metagenome.template.fasta > brown_metagenome.template.chopped.fasta","title":"04. trimming"},{"location":"book/C13_Single-Molecular-Sequencing/04_seqs-polish/#_1","text":"\u5185\u5bb9\u4ecb\u7ecd \u56e0\u4e3aNanopore\u5e8f\u5217\u51c6\u786e\u6027\u7684\u7279\u70b9\uff0c\u9700\u8981\u8fdb\u884c\u6570\u636e\u6e05\u6d17\u5df2\u5b8c\u6210\u540e\u7eed\u7684\u5206\u6790\u5de5\u4f5c\uff0c\u672c\u8282\u4ee5 Minion \u4e3a\u4f8b\u4ecb\u7ecd\u7eb3\u7c73\u5b54\u6d4b\u5e8f\u4e0b\u673a\u6570\u636e\u7684\u6e05\u6d17\u64cd\u4f5c\u3002","title":"\u6570\u636e\u6e05\u6d17"},{"location":"book/C13_Single-Molecular-Sequencing/04_seqs-polish/#1-porechop","text":"\u53bb\u9664\u63a5\u5934 $ porechop -i minion_brown_metagenome/brown_metagenome.template.fasta > brown_metagenome.template.chopped.fasta","title":"1. porechop"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/","text":"Nanopore Reads \u7ec4\u88c5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} minimap2 + miniasm \u00b6 minimap2 miniasm Minion_QC \u5efa\u7acb\u73af\u5883 \u00b6 $ conda create -n minasm $ conda activate minasm ( minasm ) $ conda install minimap2 miniasm Minion_QC \u7ec4\u88c5\u6d41\u7a0b \u00b6 # QC ( minasm ) $ Rscript MinIONQC.R -i data/reads.fastq -o qc/result # \u8fc7\u6ee4\u6bb5\u7247\u6bb5\uff0c\u5207\u96645'\u548c3'\u7aef\u4f4e\u8d28\u91cf\u5e8f\u5217 ( minasm ) $ NanoFilt -l 1000 --headcrop 30 -q 9 < reads.fastq > reads_trimmed.fastq # \u6bd4\u5bf9\u5e8f\u5217 ( minasm ) $ minimap -x ava-ont reads_trimmed.fastq | gzip -1 > minimap.paf.gz # \u7ec4\u88c5\u5e8f\u5217 ( minasm ) $ miniasm -f reads_trimmed.fastq minimap.paf.gz > miniasm.gfa ( minasm ) $ awk '/^S/{print \">\"$2\"\\n\"$3}' miniasm.gfa > miniasm.fasta ( minasm ) $ assembly-stats miniasm.fasta # mummer \u6bd4\u8f832\u4e2a\u57fa\u56e0\u7ec4\u5171\u7ebf\u6027 ( mummer ) $ dnadiff -p result ref.fasta miniasm.fasta # \u8bbf\u95ee www.assemblytics.com\uff0c\u7528\u53ef\u89c6\u5316\u5de5\u5177\u67e5\u770b\u6bd4\u8f83\u63a5\u4fc4\u56fd Flye \u7ec4\u88c5 \u00b6 # \u7ec4\u88c5 ( flye ) $ flye --nano-raw reads_trimmed.fastq --genome-size 5m --out-dir flye_result # mummer \u6bd4\u8f832\u4e2a\u57fa\u56e0\u7ec4 ( mummer ) $ dnadiff -p result ref.fasta flye_result/assembly.fasta Reference \u00b6 https://timkahlke.github.io/LongRead_tutorials","title":"Nanopore Reads \u7ec4\u88c5"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/#nanopore-reads","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Nanopore Reads \u7ec4\u88c5"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/#minimap2-miniasm","text":"minimap2 miniasm Minion_QC","title":"minimap2 + miniasm"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/#_1","text":"$ conda create -n minasm $ conda activate minasm ( minasm ) $ conda install minimap2 miniasm Minion_QC","title":"\u5efa\u7acb\u73af\u5883"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/#_2","text":"# QC ( minasm ) $ Rscript MinIONQC.R -i data/reads.fastq -o qc/result # \u8fc7\u6ee4\u6bb5\u7247\u6bb5\uff0c\u5207\u96645'\u548c3'\u7aef\u4f4e\u8d28\u91cf\u5e8f\u5217 ( minasm ) $ NanoFilt -l 1000 --headcrop 30 -q 9 < reads.fastq > reads_trimmed.fastq # \u6bd4\u5bf9\u5e8f\u5217 ( minasm ) $ minimap -x ava-ont reads_trimmed.fastq | gzip -1 > minimap.paf.gz # \u7ec4\u88c5\u5e8f\u5217 ( minasm ) $ miniasm -f reads_trimmed.fastq minimap.paf.gz > miniasm.gfa ( minasm ) $ awk '/^S/{print \">\"$2\"\\n\"$3}' miniasm.gfa > miniasm.fasta ( minasm ) $ assembly-stats miniasm.fasta # mummer \u6bd4\u8f832\u4e2a\u57fa\u56e0\u7ec4\u5171\u7ebf\u6027 ( mummer ) $ dnadiff -p result ref.fasta miniasm.fasta # \u8bbf\u95ee www.assemblytics.com\uff0c\u7528\u53ef\u89c6\u5316\u5de5\u5177\u67e5\u770b\u6bd4\u8f83\u63a5\u4fc4\u56fd","title":"\u7ec4\u88c5\u6d41\u7a0b"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/#flye","text":"# \u7ec4\u88c5 ( flye ) $ flye --nano-raw reads_trimmed.fastq --genome-size 5m --out-dir flye_result # mummer \u6bd4\u8f832\u4e2a\u57fa\u56e0\u7ec4 ( mummer ) $ dnadiff -p result ref.fasta flye_result/assembly.fasta","title":"Flye \u7ec4\u88c5"},{"location":"book/C13_Single-Molecular-Sequencing/05_nanopore-assembly/#reference","text":"https://timkahlke.github.io/LongRead_tutorials","title":"Reference"},{"location":"book/C13_Single-Molecular-Sequencing/06_hybrid-assembling/","text":"\u4e8c\u4ee3/\u4e09\u4ee3\u6d4b\u5e8f\u6570\u636e\u6df7\u5408\u62fc\u63a5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u7528\u4e8c\u4ee3\u52a0\u4e09\u4ee3\u6d4b\u5e8f\u53ef\u4ee5\u83b7\u5f97\u8f83\u597d\u7684\u57fa\u56e0\u7ec4\u5e8f\u5217\uff0c\u5f80\u5f80\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f97\u6210\u73af\u7684\u67d3\u8272\u4f53\u3002\u672c\u8282\u63a5\u5355\u4ecb\u7ecd\u4e00\u4e9b\u6df7\u5408\u7ec4\u88c5\u7684\u65b9\u6cd5\u3002 2\u4ee3+3\u4ee3\u6570\u636e\u6df7\u5408\u7ec4\u88c5 \u00b6 1.Spades \u00b6 # Spades \u6df7\u5408\u62fc\u63a5\u540c\u4e00\u4e2a\u6837\u672c miseq \u548c nanopore \u6d4b\u5e8f\u6570\u636e ( spades ) $ spades.py -m -k 33 ,55,77,99,121 --only_assembler -1 S1_R1.fastq.gz -2 S1_R2.fastq.gz --nanopore minion.fastq.gz -o hybrid -t 40 2.Unicycle \u00b6 # \u53bb\u9664\u63a5\u5934\uff0c\u5c06fastq\u6587\u4ef6\u538b\u7f29 ( nanopore ) $ for fq in { 0 ..11 } ; do porechop -i *_ ${ fq } .fastq -o ../clean/ ${ fq } .fq ; done # \u6587\u4ef6\u6570\u91cf\u591a\u65f6\u53ef\u7528 parallel \u52a0\u901f ( nanopore ) $ find . -name *.fastq | parallel --max-args = 1 porechop -i { 1 } -o ../clean/ { 1 } # \u53bb\u9664\u4f4e\u8d28\u91cf\u78b1\u57fa\uff0c\u5c06reads\u5e73\u5747Q\u503c\u4f4e\u4e8e9\u7684\u53bb\u9664 ( nanopore ) $ for trim in ../clean/*.fastq ; do cat ${ trim } | NanoFilt -q 9 >> trimmed.fastq ; done # unicycler \u6df7\u5408\u7ec4\u88c5illumina\u548cnanopore\u6570\u636e ( nanopore ) $ unicycler -1 R1.fastq.gz -2 R2.fastq.gz -l trimmed.fastq -o hybrid \u53c2\u8003\u8d44\u6599 \u00b6","title":"06. hybrid"},{"location":"book/C13_Single-Molecular-Sequencing/06_hybrid-assembling/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u7528\u4e8c\u4ee3\u52a0\u4e09\u4ee3\u6d4b\u5e8f\u53ef\u4ee5\u83b7\u5f97\u8f83\u597d\u7684\u57fa\u56e0\u7ec4\u5e8f\u5217\uff0c\u5f80\u5f80\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f97\u6210\u73af\u7684\u67d3\u8272\u4f53\u3002\u672c\u8282\u63a5\u5355\u4ecb\u7ecd\u4e00\u4e9b\u6df7\u5408\u7ec4\u88c5\u7684\u65b9\u6cd5\u3002","title":"\u4e8c\u4ee3/\u4e09\u4ee3\u6d4b\u5e8f\u6570\u636e\u6df7\u5408\u62fc\u63a5"},{"location":"book/C13_Single-Molecular-Sequencing/06_hybrid-assembling/#23","text":"","title":"2\u4ee3+3\u4ee3\u6570\u636e\u6df7\u5408\u7ec4\u88c5"},{"location":"book/C13_Single-Molecular-Sequencing/06_hybrid-assembling/#1spades","text":"# Spades \u6df7\u5408\u62fc\u63a5\u540c\u4e00\u4e2a\u6837\u672c miseq \u548c nanopore \u6d4b\u5e8f\u6570\u636e ( spades ) $ spades.py -m -k 33 ,55,77,99,121 --only_assembler -1 S1_R1.fastq.gz -2 S1_R2.fastq.gz --nanopore minion.fastq.gz -o hybrid -t 40","title":"1.Spades"},{"location":"book/C13_Single-Molecular-Sequencing/06_hybrid-assembling/#2unicycle","text":"# \u53bb\u9664\u63a5\u5934\uff0c\u5c06fastq\u6587\u4ef6\u538b\u7f29 ( nanopore ) $ for fq in { 0 ..11 } ; do porechop -i *_ ${ fq } .fastq -o ../clean/ ${ fq } .fq ; done # \u6587\u4ef6\u6570\u91cf\u591a\u65f6\u53ef\u7528 parallel \u52a0\u901f ( nanopore ) $ find . -name *.fastq | parallel --max-args = 1 porechop -i { 1 } -o ../clean/ { 1 } # \u53bb\u9664\u4f4e\u8d28\u91cf\u78b1\u57fa\uff0c\u5c06reads\u5e73\u5747Q\u503c\u4f4e\u4e8e9\u7684\u53bb\u9664 ( nanopore ) $ for trim in ../clean/*.fastq ; do cat ${ trim } | NanoFilt -q 9 >> trimmed.fastq ; done # unicycler \u6df7\u5408\u7ec4\u88c5illumina\u548cnanopore\u6570\u636e ( nanopore ) $ unicycler -1 R1.fastq.gz -2 R2.fastq.gz -l trimmed.fastq -o hybrid","title":"2.Unicycle"},{"location":"book/C13_Single-Molecular-Sequencing/06_hybrid-assembling/#_2","text":"","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/","text":"Nanopore \u57fa\u56e0\u7ec4\u6d4b\u5e8f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} !!! \"Abstract\" \u6848\u4f8b1.\u75c5\u6bd2\u6bd4\u5bf9\u83b7\u5f97\u57fa\u56e0\u7ec4 \u00b6 \u9488\u5bf9\u4e00\u4e2a1.5k\uff5e1.8k\u5de6\u53f3\u7684Dengue\u75c5\u6bd2\u6269\u589e\u5b50\u6d4b\u5e8f\u6587\u5e93\u8fdb\u884c\u7684 Nanopore \u6d4b\u5e8f\u6570\u636e\u5904\u7406\u3002\u5171\u5bf924\u4e2a\u6837\u672c\u8fdb\u884c\u6587\u5e93\u6784\u5efa\u6d4b\u5e8f\uff0c\u4f7f\u7528NBD104,114\u4f5c\u4e3abarcodes\u3002 # \u76ee\u5f55\u7ed3\u6784 fastq_pass \u251c\u2500\u2500 barcode01 \u2502 \u251c\u2500\u2500 00_raw # nanopore guppy basecalling \u83b7\u5f97\u7684fastq_pass\u6570\u636e \u2502 \u251c\u2500\u2500 01_centrifuge # \u7528centrifuge\u5bf9\u6570\u636e\u8fdb\u884c\u626b\u63cf\u540e\u83b7\u5f97\u7684\u57fa\u672c\u7269\u79cd\u5206\u5e03 \u2502 \u251c\u2500\u2500 02_porechop # \u7528porechop\u53bb\u9664barcodes\u7684reads \u2502 \u251c\u2500\u2500 03_nanofilt # \u7528nanofilt\u53bb\u9664\u4f4e\u8d28\u91cf\u5e8f\u5217\u548c\u77ed\u5e8f\u5217 \u251c\u2500\u2500 barcode02 \u251c\u2500\u2500 ... \u2514\u2500\u2500 barcode24 1.\u6d4b\u5e8f\u7ed3\u679c\u626b\u63cf \u00b6 \u975e\u5fc5\u987b\uff0c\u521d\u6b65\u4e86\u89e3\u76ee\u6807\u6269\u589e\u5b50\u5728\u6d4b\u5e8f\u7ed3\u679c\u4e2d\u7684\u5206\u5e03\uff0c\u5982\u679c\u6709\u5927\u91cf\u4eba\u6e90reads\uff0c\u53ef\u80fd\u6269\u589e\u6548\u7387\u4e0d\u4f73\uff0c\u9700\u8981\u6539\u6362\u5f15\u7269\u91cd\u65b0\u6269\u589e\u3002 # cenrifuge \u5bf9 reads \u8fdb\u884c\u626b\u63cf ( centrifuge ) $ export DB = $HOME /dbs/centrifuge/b_compressed+h+v ( centrifuge ) $ ls 00_raw/*.fastq | parallel --max-args = 1 centrifuge -x $DB -U { 1 } -S 01_centrifuge/ { 1 } .result --report-file 01 +centrifuge/ { 1 } .reprot 2.\u53bb\u9664\u63a5\u5934 \u00b6 \u4f7f\u7528 guppy \u505a demultiplex \u548c basecalling \u65f6\u6ca1\u6709\u505atrim barcodes\uff0c\u9700\u8981\u4f7f\u7528 porechop \u7b49\u8f6f\u4ef6\u53bb\u9664 barcodes \u5e8f\u5217\u3002 ( nanopore ) $ ls 00_raw/*.fastq | parallel --max-args = 1 porechop -i { 1 } -o 02_porechop/ { 1 } 3.\u53bb\u9664\u4f4e\u8d28\u91cf\u5e8f\u5217\u548c\u77ed\u7247\u6bb5 \u00b6 \u5bf9\u4e8e Nanopore \u751f\u6210\u7684\u78b1\u57fa\u8d28\u91cf\u505a\u4e00\u4fbf\u8fc7\u6ee4\uff0c\u8fd9\u91cc\u4f7f\u7528reads Q\u503c\u4e3a9\u4f5c\u4e3acut-off\uff0creads \u957f\u5ea6\u8d85\u8fc71200\u7684\u4fdd\u7559\u3002 ( nanopore ) $ ls 02_porechop/*.fastq | parallel --max-args = 1 NanoFilt -q 9 -l 1200 { 1 } | gzip > 03_nanofilt/trimed.fastq.gz 4.\u53bb\u9664\u5f15\u7269\u533a\u57df \u00b6 \u53bb\u96645'\u548c3'\u7aef\u7684\u5f15\u7269\u533a\u57df\u3002\u5982\u679creads\u6bd4\u5bf9\u65f6\u8d77\u59cb\u6bd4\u5bf9\u7684\u4f4d\u7f6e\u843d\u5728\u5f15\u7269\u6269\u589e\u533a\uff0c\u5219\u53bb\u9664\u3002 2.\u7ec6\u83cc\u7ec4\u88c5\u83b7\u5f97\u57fa\u56e0\u7ec4 \u00b6 \u6848\u4f8b\u4f7f\u7528\u970d\u4e71\u5f27\u83ccgDNA\u505a\u4e3a\u8d77\u59cb\u6837\u672c\uff0c\u8fdb\u884cde novo\u6d4b\u5e8f\u3002\u83b7\u5f97 Nanopore reads \u540e\u76f4\u63a5\u4f7f\u7528\u7ec4\u88c5\u8f6f\u4ef6\u5bf9nanopore\u6570\u636e\u8fdb\u884c\u7ec4\u88c5\u83b7\u5f97\u57fa\u56e0\u7ec4\u3002 \u5e38\u7528\u7684\u7ec4\u88c5\u8f6f\u4ef6\uff1a flye canu shata \u4f7f\u7528 flye # flye \u8fdb\u884c\u57fa\u56e0\u7ec4\u7ec4\u88c5 nanopore \u6d4b\u5e8f\u7684\u970d\u4e71\u57fa\u56e0\u7ec4 reads ( nanopore ) $ flye --nano-raw trimed.fq.gz -g 4m -t 160 -o 04_flye ( nanopore ) $ ls 04_flye assembly.fasta # \u7ec4\u88c5\u7ed3\u679c\uff0c\u542bcontigs\u7684fasta\u683c\u5f0f\u6587\u4ef6 \u4f7f\u7528 canu ( nanopore ) $ canu \u4f7f\u7528 miniasm ( nanopore ) $ \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\u83b7\u5f97\u57fa\u56e0\u7ec4 \u00b6 \u91c7\u7528 minimap2 ( nanopore ) $ minimap2 \u91c7\u7528 bwa mem ( nanopore ) $ bwa index ref.fa ( nanopore ) $ bwa mem -t 4 -R \"@RG:S1\\tSM:S1\" ref.fa 03_nanofilt/trimed.fastq.gz | \\ > samtools view -bS - | samtools sort -@4 -O bam -o sorted.fastq.gz ( nanopore ) $ bwa index sorted.fastq.gz \u83b7\u5f97\u57fa\u56e0\u7ec4\u53ca\u7a81\u53d8\u4f4d\u70b9 \u00b6 \u6784\u5efa\u6d41\u7a0b \u00b6 \u91c7\u7528shell\u811a\u672c #!/bin/sh # pipeline # \u8fc7\u6ee4\u83b7\u5f97\u7ec4\u88c5reads\u6570\u636e for i in barcode { 01 ..24 } do mkdir ${ i } /02_porechop ${ i } /03_nanofilt ls ${ i } /*.fastq | parallel --max-args = 1 porechop -i { 1 } -o { // } /02_porechop/ { 1 } ls ${ i } /02_porechop/*.fastq | parallel --max-args = 1 NanoFilt -q 9 { 1 } | gzip > ${ i } /03_nanofilt/ ${ i } _trimed.fq.gz done # \u7ec4\u88c5\u6210contigs ls barcode*/03_nanofilt/*.fq.gz | parallel --max-args = 1 flye --nano-raw { 1 } -g 4m -o { // } /../04_flye \u91c7\u7528snakemake Reference \u00b6 #!/bin/sh DB = $HOME /dbs/centrifuge/b_compressed+h+v CPU = 160 for i in barcode { 01 ..24 } ; do mkdir ${ i } /00_raw ${ i } /01_centrifuge ${ i } /02_porechop ${ i } /03_nanofilt ${ i } /04_mapping mv ${ i } /*.fastq ${ i } /00_raw ls ${ i } /00_raw/*.fastq | parallel --max-args = 1 centrifuge -x $DB -U { 1 } -S ${ i } /01_centrifuge/ { 1 } .result --report-file ${ i } /01_centrifuge/ { 1 } .reprot cd ${ i } /00_raw ls *.fastq | parallel --max-args = 1 porechop -i { 1 } -o ../02_porechop/ { 1 } cd ../02_porechop ls *.fastq | parallel --max-args = 1 NanoFilt -q 9 -l 1200 { 1 } | gzip > ../03_nanofilt/ ${ i } _trimed.fastq.gz cd ../../ bwa index ref.fa bwa mem -t $CPU -R $( echo \"@RG\\tID: ${ i } \\tSM: ${ i } \" ) ref.fa ${ i } /03_nanofilt/ ${ i } _trimed.fastq.gz | samtools view -bS - | samtools sort -@ $CPU -O bam -o ${ i } /04_mapping/ ${ i } _sorted.fastq.gz bwa index ${ i } /04_mapping/ ${ i } _sorted.fastq.gz done mkdir $1 /00_raw $1 /01_centrifuge $1 /02_porechop $1 /03_nanofilt $1 /04_mapping mv $1 /*.fastq $1 /00_raw centrifuge -x $DB -U $ -S ${ i } /01_centrifuge/ { 1 } .result --report-file ${ i } /01_centrifuge/ { 1 } .reprot cd ${ i } /00_raw ls *.fastq | parallel --max-args = 1 porechop -i { 1 } -o ../02_porechop/ { 1 } ls *.fastq | parallel --max-args = 1 NanoFilt -q 9 -l 1200 { 1 } | gzip > ../03_nanofilt/ ${ i } _trimed.fastq.gz cd ../../ bwa index ref.fa bwa mem -t $CPU -R $( echo \"@RG\\tID: ${ i } \\tSM: ${ i } \" ) ref.fa ${ i } /03_nanofilt/ ${ i } _trimed.fastq.gz | samtools view -bS - | samtools sort -@ $CPU -O bam -o ${ i } /04_mapping/ ${ i } _sorted.fastq.gz bwa index ${ i } /04_mapping/ ${ i } _sorted.fastq.gz #!/bin/sh CPU = 160 HEADER = $( zcat $1 | head -n 1 ) ID = $( echo $HEADER | cut -f 1 -4 -d \":\" | sed 's/@//' | sed 's/:/_/g' ) SM = $( echo $HEADER | grep -Eo \"[ATGCN]+ $ \" ) echo \"Read Group @RG\\tID: $id \\tSM: $id \" _ \" $sm \\tLB: $id \" _ \" $sm \\tPL:ILLUMINA\" bwa mem -M -t $CPU -v 3 -R $( echo \"@RG\\tID: $ID \\tSM: $ID \" _ \" $SM \\tLB: $ID \" _ \" $SM \\tPL:ILLUMINA\" ) \\ ref.fa $1 $2 | samtools view -bS - | samtools sort -@ $CPU -O bam -o $ID_$SM_mapped .bam # snakemake Nanopore \u6570\u636e\u76f4\u63a5\u7ec4\u88c5\u7684\u5e94\u7528 \u00b6 \u867d\u7136\u76ee\u524d\u5982 flye \u7b49\u7ec4\u88c5\u8f6f\u4ef6\u5bf9\u4e8e\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7684\u7ec4\u88c5\u51c6\u786e\u5ea6\u5df2\u7ecf\u5f88\u9ad8\u4e86\uff0c\u4f46\u662f\u7531\u4e8e Nanopore \u672c\u8eab\u6280\u672f\u7279\u70b9\u539f\u56e0\uff0c\u8fd8\u662f\u4e0d\u53ef\u80fd\u50cf2\u4ee3\u6d4b\u5e8f\u4e00\u6837\u83b7\u5f97\u7cbe\u51c6\u7684\u57fa\u56e0\u7ec4\u5e8f\u5217\u7684\u3002 \u7ec6\u83cc\u7eaf Nanopore \u6570\u636e\u8fdb\u884c\u7ec4\u88c5\u4e0d\u80fd\u80dc\u4efb\uff1a\u57fa\u4e8eSNP\u5206\u6790\uff0c\u6bd4\u5982MLST\uff0cMLVA\uff0c\u57fa\u4e8eSNP\u6784\u5efa\u8fdb\u5316\u6811\u7b49\u3002\u8981\u8fdb\u884c\u8fd9\u4e9b\u5206\u6790\u9700\u8981\u7ed3\u5408\u4e8c\u4ee3\u6570\u636e\u3002 \u53ef\u4ee5\u505a\u7684\uff1a\u57fa\u4e8e\u57fa\u56e0\u548c\u57fa\u56e0\u7ec4\u7ed3\u6784\u7684\u5206\u6790\uff0c\u6bd4\u5982\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7ed3\u6784\u5171\u7ebf\u6027\u5206\u6790\uff0c\u6bd2\u529b\u57fa\u56e0\u3001\u8010\u836f\u57fa\u56e0\u7684\u626b\u63cf\u7b49 Reference \u00b6 https://timkahlke.github.io/LongRead_tutorials","title":"Nanopore \u57fa\u56e0\u7ec4\u6d4b\u5e8f"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#nanopore","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} !!! \"Abstract\"","title":"Nanopore \u57fa\u56e0\u7ec4\u6d4b\u5e8f"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#1","text":"\u9488\u5bf9\u4e00\u4e2a1.5k\uff5e1.8k\u5de6\u53f3\u7684Dengue\u75c5\u6bd2\u6269\u589e\u5b50\u6d4b\u5e8f\u6587\u5e93\u8fdb\u884c\u7684 Nanopore \u6d4b\u5e8f\u6570\u636e\u5904\u7406\u3002\u5171\u5bf924\u4e2a\u6837\u672c\u8fdb\u884c\u6587\u5e93\u6784\u5efa\u6d4b\u5e8f\uff0c\u4f7f\u7528NBD104,114\u4f5c\u4e3abarcodes\u3002 # \u76ee\u5f55\u7ed3\u6784 fastq_pass \u251c\u2500\u2500 barcode01 \u2502 \u251c\u2500\u2500 00_raw # nanopore guppy basecalling \u83b7\u5f97\u7684fastq_pass\u6570\u636e \u2502 \u251c\u2500\u2500 01_centrifuge # \u7528centrifuge\u5bf9\u6570\u636e\u8fdb\u884c\u626b\u63cf\u540e\u83b7\u5f97\u7684\u57fa\u672c\u7269\u79cd\u5206\u5e03 \u2502 \u251c\u2500\u2500 02_porechop # \u7528porechop\u53bb\u9664barcodes\u7684reads \u2502 \u251c\u2500\u2500 03_nanofilt # \u7528nanofilt\u53bb\u9664\u4f4e\u8d28\u91cf\u5e8f\u5217\u548c\u77ed\u5e8f\u5217 \u251c\u2500\u2500 barcode02 \u251c\u2500\u2500 ... \u2514\u2500\u2500 barcode24","title":"\u6848\u4f8b1.\u75c5\u6bd2\u6bd4\u5bf9\u83b7\u5f97\u57fa\u56e0\u7ec4"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#1_1","text":"\u975e\u5fc5\u987b\uff0c\u521d\u6b65\u4e86\u89e3\u76ee\u6807\u6269\u589e\u5b50\u5728\u6d4b\u5e8f\u7ed3\u679c\u4e2d\u7684\u5206\u5e03\uff0c\u5982\u679c\u6709\u5927\u91cf\u4eba\u6e90reads\uff0c\u53ef\u80fd\u6269\u589e\u6548\u7387\u4e0d\u4f73\uff0c\u9700\u8981\u6539\u6362\u5f15\u7269\u91cd\u65b0\u6269\u589e\u3002 # cenrifuge \u5bf9 reads \u8fdb\u884c\u626b\u63cf ( centrifuge ) $ export DB = $HOME /dbs/centrifuge/b_compressed+h+v ( centrifuge ) $ ls 00_raw/*.fastq | parallel --max-args = 1 centrifuge -x $DB -U { 1 } -S 01_centrifuge/ { 1 } .result --report-file 01 +centrifuge/ { 1 } .reprot","title":"1.\u6d4b\u5e8f\u7ed3\u679c\u626b\u63cf"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#2","text":"\u4f7f\u7528 guppy \u505a demultiplex \u548c basecalling \u65f6\u6ca1\u6709\u505atrim barcodes\uff0c\u9700\u8981\u4f7f\u7528 porechop \u7b49\u8f6f\u4ef6\u53bb\u9664 barcodes \u5e8f\u5217\u3002 ( nanopore ) $ ls 00_raw/*.fastq | parallel --max-args = 1 porechop -i { 1 } -o 02_porechop/ { 1 }","title":"2.\u53bb\u9664\u63a5\u5934"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#3","text":"\u5bf9\u4e8e Nanopore \u751f\u6210\u7684\u78b1\u57fa\u8d28\u91cf\u505a\u4e00\u4fbf\u8fc7\u6ee4\uff0c\u8fd9\u91cc\u4f7f\u7528reads Q\u503c\u4e3a9\u4f5c\u4e3acut-off\uff0creads \u957f\u5ea6\u8d85\u8fc71200\u7684\u4fdd\u7559\u3002 ( nanopore ) $ ls 02_porechop/*.fastq | parallel --max-args = 1 NanoFilt -q 9 -l 1200 { 1 } | gzip > 03_nanofilt/trimed.fastq.gz","title":"3.\u53bb\u9664\u4f4e\u8d28\u91cf\u5e8f\u5217\u548c\u77ed\u7247\u6bb5"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#4","text":"\u53bb\u96645'\u548c3'\u7aef\u7684\u5f15\u7269\u533a\u57df\u3002\u5982\u679creads\u6bd4\u5bf9\u65f6\u8d77\u59cb\u6bd4\u5bf9\u7684\u4f4d\u7f6e\u843d\u5728\u5f15\u7269\u6269\u589e\u533a\uff0c\u5219\u53bb\u9664\u3002","title":"4.\u53bb\u9664\u5f15\u7269\u533a\u57df"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#2_1","text":"\u6848\u4f8b\u4f7f\u7528\u970d\u4e71\u5f27\u83ccgDNA\u505a\u4e3a\u8d77\u59cb\u6837\u672c\uff0c\u8fdb\u884cde novo\u6d4b\u5e8f\u3002\u83b7\u5f97 Nanopore reads \u540e\u76f4\u63a5\u4f7f\u7528\u7ec4\u88c5\u8f6f\u4ef6\u5bf9nanopore\u6570\u636e\u8fdb\u884c\u7ec4\u88c5\u83b7\u5f97\u57fa\u56e0\u7ec4\u3002 \u5e38\u7528\u7684\u7ec4\u88c5\u8f6f\u4ef6\uff1a flye canu shata \u4f7f\u7528 flye # flye \u8fdb\u884c\u57fa\u56e0\u7ec4\u7ec4\u88c5 nanopore \u6d4b\u5e8f\u7684\u970d\u4e71\u57fa\u56e0\u7ec4 reads ( nanopore ) $ flye --nano-raw trimed.fq.gz -g 4m -t 160 -o 04_flye ( nanopore ) $ ls 04_flye assembly.fasta # \u7ec4\u88c5\u7ed3\u679c\uff0c\u542bcontigs\u7684fasta\u683c\u5f0f\u6587\u4ef6 \u4f7f\u7528 canu ( nanopore ) $ canu \u4f7f\u7528 miniasm ( nanopore ) $","title":"2.\u7ec6\u83cc\u7ec4\u88c5\u83b7\u5f97\u57fa\u56e0\u7ec4"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#_1","text":"\u91c7\u7528 minimap2 ( nanopore ) $ minimap2 \u91c7\u7528 bwa mem ( nanopore ) $ bwa index ref.fa ( nanopore ) $ bwa mem -t 4 -R \"@RG:S1\\tSM:S1\" ref.fa 03_nanofilt/trimed.fastq.gz | \\ > samtools view -bS - | samtools sort -@4 -O bam -o sorted.fastq.gz ( nanopore ) $ bwa index sorted.fastq.gz","title":"\u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\u83b7\u5f97\u57fa\u56e0\u7ec4"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#_2","text":"","title":"\u83b7\u5f97\u57fa\u56e0\u7ec4\u53ca\u7a81\u53d8\u4f4d\u70b9"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#_3","text":"\u91c7\u7528shell\u811a\u672c #!/bin/sh # pipeline # \u8fc7\u6ee4\u83b7\u5f97\u7ec4\u88c5reads\u6570\u636e for i in barcode { 01 ..24 } do mkdir ${ i } /02_porechop ${ i } /03_nanofilt ls ${ i } /*.fastq | parallel --max-args = 1 porechop -i { 1 } -o { // } /02_porechop/ { 1 } ls ${ i } /02_porechop/*.fastq | parallel --max-args = 1 NanoFilt -q 9 { 1 } | gzip > ${ i } /03_nanofilt/ ${ i } _trimed.fq.gz done # \u7ec4\u88c5\u6210contigs ls barcode*/03_nanofilt/*.fq.gz | parallel --max-args = 1 flye --nano-raw { 1 } -g 4m -o { // } /../04_flye \u91c7\u7528snakemake","title":"\u6784\u5efa\u6d41\u7a0b"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#reference","text":"#!/bin/sh DB = $HOME /dbs/centrifuge/b_compressed+h+v CPU = 160 for i in barcode { 01 ..24 } ; do mkdir ${ i } /00_raw ${ i } /01_centrifuge ${ i } /02_porechop ${ i } /03_nanofilt ${ i } /04_mapping mv ${ i } /*.fastq ${ i } /00_raw ls ${ i } /00_raw/*.fastq | parallel --max-args = 1 centrifuge -x $DB -U { 1 } -S ${ i } /01_centrifuge/ { 1 } .result --report-file ${ i } /01_centrifuge/ { 1 } .reprot cd ${ i } /00_raw ls *.fastq | parallel --max-args = 1 porechop -i { 1 } -o ../02_porechop/ { 1 } cd ../02_porechop ls *.fastq | parallel --max-args = 1 NanoFilt -q 9 -l 1200 { 1 } | gzip > ../03_nanofilt/ ${ i } _trimed.fastq.gz cd ../../ bwa index ref.fa bwa mem -t $CPU -R $( echo \"@RG\\tID: ${ i } \\tSM: ${ i } \" ) ref.fa ${ i } /03_nanofilt/ ${ i } _trimed.fastq.gz | samtools view -bS - | samtools sort -@ $CPU -O bam -o ${ i } /04_mapping/ ${ i } _sorted.fastq.gz bwa index ${ i } /04_mapping/ ${ i } _sorted.fastq.gz done mkdir $1 /00_raw $1 /01_centrifuge $1 /02_porechop $1 /03_nanofilt $1 /04_mapping mv $1 /*.fastq $1 /00_raw centrifuge -x $DB -U $ -S ${ i } /01_centrifuge/ { 1 } .result --report-file ${ i } /01_centrifuge/ { 1 } .reprot cd ${ i } /00_raw ls *.fastq | parallel --max-args = 1 porechop -i { 1 } -o ../02_porechop/ { 1 } ls *.fastq | parallel --max-args = 1 NanoFilt -q 9 -l 1200 { 1 } | gzip > ../03_nanofilt/ ${ i } _trimed.fastq.gz cd ../../ bwa index ref.fa bwa mem -t $CPU -R $( echo \"@RG\\tID: ${ i } \\tSM: ${ i } \" ) ref.fa ${ i } /03_nanofilt/ ${ i } _trimed.fastq.gz | samtools view -bS - | samtools sort -@ $CPU -O bam -o ${ i } /04_mapping/ ${ i } _sorted.fastq.gz bwa index ${ i } /04_mapping/ ${ i } _sorted.fastq.gz #!/bin/sh CPU = 160 HEADER = $( zcat $1 | head -n 1 ) ID = $( echo $HEADER | cut -f 1 -4 -d \":\" | sed 's/@//' | sed 's/:/_/g' ) SM = $( echo $HEADER | grep -Eo \"[ATGCN]+ $ \" ) echo \"Read Group @RG\\tID: $id \\tSM: $id \" _ \" $sm \\tLB: $id \" _ \" $sm \\tPL:ILLUMINA\" bwa mem -M -t $CPU -v 3 -R $( echo \"@RG\\tID: $ID \\tSM: $ID \" _ \" $SM \\tLB: $ID \" _ \" $SM \\tPL:ILLUMINA\" ) \\ ref.fa $1 $2 | samtools view -bS - | samtools sort -@ $CPU -O bam -o $ID_$SM_mapped .bam # snakemake","title":"Reference"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#nanopore_1","text":"\u867d\u7136\u76ee\u524d\u5982 flye \u7b49\u7ec4\u88c5\u8f6f\u4ef6\u5bf9\u4e8e\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7684\u7ec4\u88c5\u51c6\u786e\u5ea6\u5df2\u7ecf\u5f88\u9ad8\u4e86\uff0c\u4f46\u662f\u7531\u4e8e Nanopore \u672c\u8eab\u6280\u672f\u7279\u70b9\u539f\u56e0\uff0c\u8fd8\u662f\u4e0d\u53ef\u80fd\u50cf2\u4ee3\u6d4b\u5e8f\u4e00\u6837\u83b7\u5f97\u7cbe\u51c6\u7684\u57fa\u56e0\u7ec4\u5e8f\u5217\u7684\u3002 \u7ec6\u83cc\u7eaf Nanopore \u6570\u636e\u8fdb\u884c\u7ec4\u88c5\u4e0d\u80fd\u80dc\u4efb\uff1a\u57fa\u4e8eSNP\u5206\u6790\uff0c\u6bd4\u5982MLST\uff0cMLVA\uff0c\u57fa\u4e8eSNP\u6784\u5efa\u8fdb\u5316\u6811\u7b49\u3002\u8981\u8fdb\u884c\u8fd9\u4e9b\u5206\u6790\u9700\u8981\u7ed3\u5408\u4e8c\u4ee3\u6570\u636e\u3002 \u53ef\u4ee5\u505a\u7684\uff1a\u57fa\u4e8e\u57fa\u56e0\u548c\u57fa\u56e0\u7ec4\u7ed3\u6784\u7684\u5206\u6790\uff0c\u6bd4\u5982\u7ec6\u83cc\u57fa\u56e0\u7ec4\u7ed3\u6784\u5171\u7ebf\u6027\u5206\u6790\uff0c\u6bd2\u529b\u57fa\u56e0\u3001\u8010\u836f\u57fa\u56e0\u7684\u626b\u63cf\u7b49","title":"Nanopore \u6570\u636e\u76f4\u63a5\u7ec4\u88c5\u7684\u5e94\u7528"},{"location":"book/C13_Single-Molecular-Sequencing/07_nanopore-data-analysis/#reference_1","text":"https://timkahlke.github.io/LongRead_tutorials","title":"Reference"},{"location":"book/C14_Multiple-Sequence-Alignment/01_msa/","text":"\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9 \u00b6 Multiple Sequences Alignment(MSA)","title":"01. \u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9"},{"location":"book/C14_Multiple-Sequence-Alignment/01_msa/#_1","text":"Multiple Sequences Alignment(MSA)","title":"\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9"},{"location":"book/C14_Multiple-Sequence-Alignment/02_mafft/","text":"Mafft \u4f7f\u7528 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Mafft \u662f\u5e38\u7528\u7684\u5927\u89c4\u6a21\u5e8f\u5217\u6bd4\u5bf9\u7684\u5de5\u5177\uff0c\u5728\u901f\u5ea6\u548c\u51c6\u786e\u5ea6\u4e0a\u6709\u5f88\u597d\u7684\u5e73\u8861\u3002 \u5b89\u88c5 \u00b6 # conda \u5b89\u88c5 ( msa ) $ conda install mafft \u4f7f\u7528 \u00b6 # \u6700\u57fa\u672c\u7684\u5e8f\u5217\u6bd4\u5bf9\u7528\u6cd5 ( msa ) $ mafft seq.fas > seq.maf PubMLST \u73b0\u6709\u7269\u79cd\u6570\u636e\u5e93\uff1a Achromobacter spp. Acinetobacter baumannii#1 Acinetobacter baumannii#2 Aeromonas spp. Aggregatibacter actinomycetemcomitans Anaplasma phagocytophilum Arcobacter spp. Aspergillus fumigatus Bacillus cereus Bacillus licheniformis Bacillus subtilis Bartonella bacilliformis Bartonella henselae Bartonella washoensis Bordetella spp. Borrelia spp. Brachyspira hampsonii Brachyspira hyodysenteriae Brachyspira intermedia Brachyspira pilosicoli Brachyspira spp. Brucella spp. Burkholderia cepacia complex Burkholderia pseudomallei Campylobacter concisus/curvus Campylobacter fetus Campylobacter helveticus Campylobacter hyointestinalis Campylobacter insulaenigrae Campylobacter jejuni Campylobacter lanienae Campylobacter lari Campylobacter sputorum Campylobacter upsaliensis Candida albicans Candida glabrata Candida krusei Candida tropicalis Candidatus Liberibacter solanacearum Carnobacterium maltaromaticum Chlamydiales spp. Citrobacter freundii Clonorchis sinensis Clostridioides difficile Clostridium botulinum Clostridium perfringens Clostridium septicum Corynebacterium diphtheriae Cronobacter spp. Dichelobacter nodosus Edwardsiella spp. Enterobacter cloacae Enterococcus faecalis Enterococcus faecium Escherichia coli#1 Escherichia coli#2 Flavobacterium psychrophilum Gallibacterium anatis Geotrichum spp. Glaesserella parasuis Haemophilus influenzae Helicobacter cinaedi Helicobacter pylori Helicobacter suis Kingella kingae Klebsiella aerogenes Klebsiella oxytoca Klebsiella pneumoniae Kudoa septempunctata Lactobacillus salivarius Leptospira spp. Leptospira spp.#2 Leptospira spp.#3 Listeria monocytogenes Macrococcus canis Macrococcus caseolyticus Mannheimia haemolytica Melissococcus plutonius Moraxella catarrhalis Mycobacteria spp. Mycobacterium abscessus Mycobacterium massiliense Mycoplasma agalactiae Mycoplasma anserisalpingitidis Mycoplasma bovis Mycoplasma flocculare Mycoplasma gallisepticum#1 Mycoplasma gallisepticum#2 Mycoplasma hominis Mycoplasma hyopneumoniae Mycoplasma hyorhinis Mycoplasma iowae Mycoplasma pneumoniae Mycoplasma synoviae Neisseria spp. Orientia tsutsugamushi Ornithobacterium rhinotracheale Paenibacillus larvae Pasteurella multocida#1 Pasteurella multocida#2 Pediococcus pentosaceus Photobacterium damselae Piscirickettsia salmonis Porphyromonas gingivalis Propionibacterium acnes Pseudomonas aeruginosa Pseudomonas fluorescens Pseudomonas putida Rhodococcus spp. Riemerella anatipestifer Salmonella enterica Saprolegnia parasitica Shewanella spp. Sinorhizobium spp. Staphylococcus aureus Staphylococcus chromogenes Staphylococcus epidermidis Staphylococcus haemolyticus Staphylococcus hominis Staphylococcus lugdunensis Staphylococcus pseudintermedius Stenotrophomonas maltophilia Streptococcus agalactiae Streptococcus bovis/equinus complex (SBSEC) Streptococcus canis Streptococcus dysgalactiae equisimilis Streptococcus gallolyticus Streptococcus oralis Streptococcus pneumoniae Streptococcus pyogenes Streptococcus suis Streptococcus thermophilus Streptococcus thermophilus#2 Streptococcus uberis Streptococcus zooepidemicus Streptomyces spp Taylorella spp. Tenacibaculum spp. Treponema pallidum Trichomonas vaginalis Ureaplasma spp. Vibrio cholerae Vibrio cholerae#2 Vibrio parahaemolyticus Vibrio spp. Vibrio tapetis Vibrio vulnificus Wolbachia Xylella fastidiosa Yersinia pseudotuberculosis Yersinia ruckeri ( ariba ) $ ariba pubmlstget \"Salmonella enterica\" salmonella ( ariba ) $ ariba run salmonella/ref_db S1_1.fastq.gz S1_2.fastq.gz output Reference \u00b6","title":"Mafft \u4f7f\u7528"},{"location":"book/C14_Multiple-Sequence-Alignment/02_mafft/#mafft","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Mafft \u662f\u5e38\u7528\u7684\u5927\u89c4\u6a21\u5e8f\u5217\u6bd4\u5bf9\u7684\u5de5\u5177\uff0c\u5728\u901f\u5ea6\u548c\u51c6\u786e\u5ea6\u4e0a\u6709\u5f88\u597d\u7684\u5e73\u8861\u3002","title":"Mafft \u4f7f\u7528"},{"location":"book/C14_Multiple-Sequence-Alignment/02_mafft/#_1","text":"# conda \u5b89\u88c5 ( msa ) $ conda install mafft","title":"\u5b89\u88c5"},{"location":"book/C14_Multiple-Sequence-Alignment/02_mafft/#_2","text":"# \u6700\u57fa\u672c\u7684\u5e8f\u5217\u6bd4\u5bf9\u7528\u6cd5 ( msa ) $ mafft seq.fas > seq.maf PubMLST \u73b0\u6709\u7269\u79cd\u6570\u636e\u5e93\uff1a Achromobacter spp. Acinetobacter baumannii#1 Acinetobacter baumannii#2 Aeromonas spp. Aggregatibacter actinomycetemcomitans Anaplasma phagocytophilum Arcobacter spp. Aspergillus fumigatus Bacillus cereus Bacillus licheniformis Bacillus subtilis Bartonella bacilliformis Bartonella henselae Bartonella washoensis Bordetella spp. Borrelia spp. Brachyspira hampsonii Brachyspira hyodysenteriae Brachyspira intermedia Brachyspira pilosicoli Brachyspira spp. Brucella spp. Burkholderia cepacia complex Burkholderia pseudomallei Campylobacter concisus/curvus Campylobacter fetus Campylobacter helveticus Campylobacter hyointestinalis Campylobacter insulaenigrae Campylobacter jejuni Campylobacter lanienae Campylobacter lari Campylobacter sputorum Campylobacter upsaliensis Candida albicans Candida glabrata Candida krusei Candida tropicalis Candidatus Liberibacter solanacearum Carnobacterium maltaromaticum Chlamydiales spp. Citrobacter freundii Clonorchis sinensis Clostridioides difficile Clostridium botulinum Clostridium perfringens Clostridium septicum Corynebacterium diphtheriae Cronobacter spp. Dichelobacter nodosus Edwardsiella spp. Enterobacter cloacae Enterococcus faecalis Enterococcus faecium Escherichia coli#1 Escherichia coli#2 Flavobacterium psychrophilum Gallibacterium anatis Geotrichum spp. Glaesserella parasuis Haemophilus influenzae Helicobacter cinaedi Helicobacter pylori Helicobacter suis Kingella kingae Klebsiella aerogenes Klebsiella oxytoca Klebsiella pneumoniae Kudoa septempunctata Lactobacillus salivarius Leptospira spp. Leptospira spp.#2 Leptospira spp.#3 Listeria monocytogenes Macrococcus canis Macrococcus caseolyticus Mannheimia haemolytica Melissococcus plutonius Moraxella catarrhalis Mycobacteria spp. Mycobacterium abscessus Mycobacterium massiliense Mycoplasma agalactiae Mycoplasma anserisalpingitidis Mycoplasma bovis Mycoplasma flocculare Mycoplasma gallisepticum#1 Mycoplasma gallisepticum#2 Mycoplasma hominis Mycoplasma hyopneumoniae Mycoplasma hyorhinis Mycoplasma iowae Mycoplasma pneumoniae Mycoplasma synoviae Neisseria spp. Orientia tsutsugamushi Ornithobacterium rhinotracheale Paenibacillus larvae Pasteurella multocida#1 Pasteurella multocida#2 Pediococcus pentosaceus Photobacterium damselae Piscirickettsia salmonis Porphyromonas gingivalis Propionibacterium acnes Pseudomonas aeruginosa Pseudomonas fluorescens Pseudomonas putida Rhodococcus spp. Riemerella anatipestifer Salmonella enterica Saprolegnia parasitica Shewanella spp. Sinorhizobium spp. Staphylococcus aureus Staphylococcus chromogenes Staphylococcus epidermidis Staphylococcus haemolyticus Staphylococcus hominis Staphylococcus lugdunensis Staphylococcus pseudintermedius Stenotrophomonas maltophilia Streptococcus agalactiae Streptococcus bovis/equinus complex (SBSEC) Streptococcus canis Streptococcus dysgalactiae equisimilis Streptococcus gallolyticus Streptococcus oralis Streptococcus pneumoniae Streptococcus pyogenes Streptococcus suis Streptococcus thermophilus Streptococcus thermophilus#2 Streptococcus uberis Streptococcus zooepidemicus Streptomyces spp Taylorella spp. Tenacibaculum spp. Treponema pallidum Trichomonas vaginalis Ureaplasma spp. Vibrio cholerae Vibrio cholerae#2 Vibrio parahaemolyticus Vibrio spp. Vibrio tapetis Vibrio vulnificus Wolbachia Xylella fastidiosa Yersinia pseudotuberculosis Yersinia ruckeri ( ariba ) $ ariba pubmlstget \"Salmonella enterica\" salmonella ( ariba ) $ ariba run salmonella/ref_db S1_1.fastq.gz S1_2.fastq.gz output","title":"\u4f7f\u7528"},{"location":"book/C14_Multiple-Sequence-Alignment/02_mafft/#reference","text":"","title":"Reference"},{"location":"book/C14_Multiple-Sequence-Alignment/03_clustal/","text":"","title":"03 clustal"},{"location":"book/C14_Multiple-Sequence-Alignment/04_muscle/","text":"Muscle \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Muscle \u662f\u4e00\u4e2a\u8001\u724c\u7684\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u5de5\u5177\uff0c\u5b83\u662f\u4e00\u4e2aprogressive alignment\u5de5\u5177\uff0c\u7cbe\u5ea6\u4e0emafft\u76f8\u4f3c\uff0c\u4f46\u901f\u5ea6\u66f4\u5feb\u3002 \u53c2\u8003\u6587\u732e Muscle \u6784\u5efa\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u57fa\u672c\u6b65\u9aa4\u662f3\u90e8\u5206\uff1a\u8349\u56feProgressive\u5f0f\u6bd4\u5bf9\uff08\u5229\u7528kmer\u8fdb\u884c\u8ddd\u79bb\u6bd4\u8f83\uff09\uff1b\u7cbe\u7ec6Progressive\u6bd4\u5bf9\uff08Kimura distance\u91cd\u8bc4\u4f30\uff09\uff1b\u7cbe\u7ec6\u4fee\u6b63 \u5b89\u88c5 \u00b6 \u4f7f\u7528\u7248\u672c\uff1a muscle: v3.8.1151 # muscle \u6ca1\u6709\u9700\u8981\u5176\u4ed6\u4f9d\u8d56\uff0c\u53ef\u4ee5\u76f4\u63a5\u5b89\u88c5\u5728\u9ed8\u8ba4\u7684\u73af\u5883\u4e2d $ conda activate seqs ( msa ) $ conda install muscle \u4f7f\u7528 \u00b6 # seqs.fas \u662f multifasta \u6587\u4ef6\uff0cseqs.aln \u662f\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u7ed3\u679c ( msa ) $ muscle -in seqs.fas -out seqs.aln # \u5bf9\u4e8e\u8fd1\u6e90\u5e8f\u5217\uff0c\u53ef\u4ee5\u6dfb\u52a0 -diags \u53c2\u6570\uff0c\u5e76\u51cf\u5c11\u56de\u8c03\u6b21\u6570\u52a0\u5feb\u8fd0\u884c ( msa ) $ muscle -in seqs.fas -out seqs.aln -diags -maxiters 2 Reference \u00b6 User Guide","title":"Muscle"},{"location":"book/C14_Multiple-Sequence-Alignment/04_muscle/#muscle","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Muscle \u662f\u4e00\u4e2a\u8001\u724c\u7684\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u5de5\u5177\uff0c\u5b83\u662f\u4e00\u4e2aprogressive alignment\u5de5\u5177\uff0c\u7cbe\u5ea6\u4e0emafft\u76f8\u4f3c\uff0c\u4f46\u901f\u5ea6\u66f4\u5feb\u3002 \u53c2\u8003\u6587\u732e Muscle \u6784\u5efa\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u57fa\u672c\u6b65\u9aa4\u662f3\u90e8\u5206\uff1a\u8349\u56feProgressive\u5f0f\u6bd4\u5bf9\uff08\u5229\u7528kmer\u8fdb\u884c\u8ddd\u79bb\u6bd4\u8f83\uff09\uff1b\u7cbe\u7ec6Progressive\u6bd4\u5bf9\uff08Kimura distance\u91cd\u8bc4\u4f30\uff09\uff1b\u7cbe\u7ec6\u4fee\u6b63","title":"Muscle"},{"location":"book/C14_Multiple-Sequence-Alignment/04_muscle/#_1","text":"\u4f7f\u7528\u7248\u672c\uff1a muscle: v3.8.1151 # muscle \u6ca1\u6709\u9700\u8981\u5176\u4ed6\u4f9d\u8d56\uff0c\u53ef\u4ee5\u76f4\u63a5\u5b89\u88c5\u5728\u9ed8\u8ba4\u7684\u73af\u5883\u4e2d $ conda activate seqs ( msa ) $ conda install muscle","title":"\u5b89\u88c5"},{"location":"book/C14_Multiple-Sequence-Alignment/04_muscle/#_2","text":"# seqs.fas \u662f multifasta \u6587\u4ef6\uff0cseqs.aln \u662f\u591a\u91cd\u5e8f\u5217\u6bd4\u5bf9\u7ed3\u679c ( msa ) $ muscle -in seqs.fas -out seqs.aln # \u5bf9\u4e8e\u8fd1\u6e90\u5e8f\u5217\uff0c\u53ef\u4ee5\u6dfb\u52a0 -diags \u53c2\u6570\uff0c\u5e76\u51cf\u5c11\u56de\u8c03\u6b21\u6570\u52a0\u5feb\u8fd0\u884c ( msa ) $ muscle -in seqs.fas -out seqs.aln -diags -maxiters 2","title":"\u4f7f\u7528"},{"location":"book/C14_Multiple-Sequence-Alignment/04_muscle/#reference","text":"User Guide","title":"Reference"},{"location":"book/C15_Phylogeny-Analysis/","text":"","title":"Index"},{"location":"book/C15_Phylogeny-Analysis/00_all-about-phylogeny/","text":"\u5173\u4e8e\u8fdb\u5316\u6811 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Maximum Parsimony Bootstrap Sampling Reference \u00b6 Tree termology","title":"00. \u6784\u5efa\u8fdb\u5316\u4e66"},{"location":"book/C15_Phylogeny-Analysis/00_all-about-phylogeny/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Maximum Parsimony Bootstrap Sampling","title":"\u5173\u4e8e\u8fdb\u5316\u6811"},{"location":"book/C15_Phylogeny-Analysis/00_all-about-phylogeny/#reference","text":"Tree termology","title":"Reference"},{"location":"book/C15_Phylogeny-Analysis/01_raxml/","text":"RAxML \u4f7f\u7528 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd\u6700\u5e38\u7528\u7684ML\u8fdb\u5316\u6811\u6784\u5efa\u8f6f\u4ef6 RAxML \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\u3002 \u4e3b\u8981\u53c2\u6570: -m \u5e8f\u5217\u66ff\u4ee3\u6a21\u578b \u5e38\u7528\u78b1\u57fa\u6a21\u578b: GTRCAT: GTR approximation with optimization of individual per site substitution rates and classi\ufb01cation of those individual rates into the number of rate categories speci\ufb01ed by -c. This is only a work-around for GTRGAMMA, so be sure not to compare alternative topologies based on their GTRCAT likelihood values. GTRMIX: This option will make RAxML perform a tree inference (search for a good topology) under GTRCAT. When the analysis is \ufb01nished RAxML will switch its model to GTRGAMMA and evaluate the \ufb01nal tree topology under GTRGAMMA such that it yields stable likelihood values. GTRGAMMA: GTR model of nucleotide substitution with the \u0393 model of rate heterogeneity. All model parameters are estimated by RAxML. The GTRGAMMA implementation uses 4 discrete rate categories which represents an acceptable trade-off between speed and accuracy. Note that, this has been hard-coded for performance reasons, i.e. the number of discrete rate categories can not be changed by the user. \u5e38\u7528\u6c28\u57fa\u9178\u6a21\u578b Available AA models: Values for matrixName: DAYHOFF, DCMUT, JTT, MTREV, WAG, RTREV, CPREV, VT, BLOSUM62, MTMAM, GTR. The optional F appendix allows you to specify whether or not you want to use empirical base frequencies. PROTCATmatrixName[F]: (e.g. DAYHOFF or DAYHOFFF) AA matrix speci\ufb01ed by an allowed matrixName, with optimization of individual per\u2013site substitution rates and classi\ufb01cation of those individual rates into the number of rate categories speci\ufb01ed by -c. This is only a work-around for the GAMMA model of rate heterogeneity, so make sure not to compare alternative topologies based on their PROTCAT-based likelihood values. This is due to the fact that the author assumes that you want to compare trees based on likelihoods if you do a multiple run on the original alignment. PROTMIXmatrixName[F]: This option will make RAxML perform a tree inference (search for a good topology) under PROTCAT. When the analysis is \ufb01nished, RAxML will switch its model to the respective PROTGAMMA model and evaluate the \ufb01nal tree topology under PROTGAMMA such that it yields stable likelihood values. PROTGAMMAmatrixName[F]: AA matrix speci\ufb01ed by matrixName with the \u0393 model of rate heterogeneity. All free model parameters are estimated by RAxML. The GAMMA implementation uses 4 discrete rate categories which represents an acceptable trade-off between speed and accuracy. Note that, this has been hard-coded for performance reasons, i.e. the number of discrete rate categories can not be changed by the user. -c numberOfCategories This option allows you to specify the number of distinct rate categories used into which the individually optimized rates for each individual site are \u201cthrown\u201d under -m GTRCAT. The results in [Stamatakis, A.: Phylogenetic models of rate heterogeneity: A high performance computing perspective. In: Proc. of IPDPS2006, Rhodos, Greece (2006)] [pdf] indicate that the default of -c 25 works \ufb01ne in most practical cases. -i initialRearrangementSetting This allows you to specify an initial rearrangement setting for the initial phase of the search algorithm. If you specify e.g. -i 10 the pruned subtrees will be inserted up to a distance of 10 nodes away from their original pruning point. If you don\u2019t specify -i, a \u201cgood\u201d initial rearrangement setting will automatically be determined by RAxML (see Section 5.1 for further details). We do not support the following sub-options at present: [-a weightFileName] [-b bootstrapRandomNumberSeed] [-d infer a complete random starting tree] [-e likelihoodEpsilon] [-f algorithm (d is the default) b|c|d|e|o|s] [-g groupingFileName] [-j write intermediate trees to a separate file] [-k optimize branches and model parameters on ootstrapped trees] [-o outgroupName(s)] [-q multipleModelFileName] [-r constraintFileName] [-t userStartingTree] [-w workingDirectory] [-v display version information] [-y ] [-z multipleTreesFile] [-# numberOfRuns] Prior to implementation of the Guigen applet, RAxML was run with only two flags: -c number of categories; =25; and -m model Of Evolution; =GTRGAMMA An explanation of the flags is above (the manual [pdf] provides more details):","title":"RAxML \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/01_raxml/#raxml","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd\u6700\u5e38\u7528\u7684ML\u8fdb\u5316\u6811\u6784\u5efa\u8f6f\u4ef6 RAxML \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\u3002 \u4e3b\u8981\u53c2\u6570: -m \u5e8f\u5217\u66ff\u4ee3\u6a21\u578b \u5e38\u7528\u78b1\u57fa\u6a21\u578b: GTRCAT: GTR approximation with optimization of individual per site substitution rates and classi\ufb01cation of those individual rates into the number of rate categories speci\ufb01ed by -c. This is only a work-around for GTRGAMMA, so be sure not to compare alternative topologies based on their GTRCAT likelihood values. GTRMIX: This option will make RAxML perform a tree inference (search for a good topology) under GTRCAT. When the analysis is \ufb01nished RAxML will switch its model to GTRGAMMA and evaluate the \ufb01nal tree topology under GTRGAMMA such that it yields stable likelihood values. GTRGAMMA: GTR model of nucleotide substitution with the \u0393 model of rate heterogeneity. All model parameters are estimated by RAxML. The GTRGAMMA implementation uses 4 discrete rate categories which represents an acceptable trade-off between speed and accuracy. Note that, this has been hard-coded for performance reasons, i.e. the number of discrete rate categories can not be changed by the user. \u5e38\u7528\u6c28\u57fa\u9178\u6a21\u578b Available AA models: Values for matrixName: DAYHOFF, DCMUT, JTT, MTREV, WAG, RTREV, CPREV, VT, BLOSUM62, MTMAM, GTR. The optional F appendix allows you to specify whether or not you want to use empirical base frequencies. PROTCATmatrixName[F]: (e.g. DAYHOFF or DAYHOFFF) AA matrix speci\ufb01ed by an allowed matrixName, with optimization of individual per\u2013site substitution rates and classi\ufb01cation of those individual rates into the number of rate categories speci\ufb01ed by -c. This is only a work-around for the GAMMA model of rate heterogeneity, so make sure not to compare alternative topologies based on their PROTCAT-based likelihood values. This is due to the fact that the author assumes that you want to compare trees based on likelihoods if you do a multiple run on the original alignment. PROTMIXmatrixName[F]: This option will make RAxML perform a tree inference (search for a good topology) under PROTCAT. When the analysis is \ufb01nished, RAxML will switch its model to the respective PROTGAMMA model and evaluate the \ufb01nal tree topology under PROTGAMMA such that it yields stable likelihood values. PROTGAMMAmatrixName[F]: AA matrix speci\ufb01ed by matrixName with the \u0393 model of rate heterogeneity. All free model parameters are estimated by RAxML. The GAMMA implementation uses 4 discrete rate categories which represents an acceptable trade-off between speed and accuracy. Note that, this has been hard-coded for performance reasons, i.e. the number of discrete rate categories can not be changed by the user. -c numberOfCategories This option allows you to specify the number of distinct rate categories used into which the individually optimized rates for each individual site are \u201cthrown\u201d under -m GTRCAT. The results in [Stamatakis, A.: Phylogenetic models of rate heterogeneity: A high performance computing perspective. In: Proc. of IPDPS2006, Rhodos, Greece (2006)] [pdf] indicate that the default of -c 25 works \ufb01ne in most practical cases. -i initialRearrangementSetting This allows you to specify an initial rearrangement setting for the initial phase of the search algorithm. If you specify e.g. -i 10 the pruned subtrees will be inserted up to a distance of 10 nodes away from their original pruning point. If you don\u2019t specify -i, a \u201cgood\u201d initial rearrangement setting will automatically be determined by RAxML (see Section 5.1 for further details). We do not support the following sub-options at present: [-a weightFileName] [-b bootstrapRandomNumberSeed] [-d infer a complete random starting tree] [-e likelihoodEpsilon] [-f algorithm (d is the default) b|c|d|e|o|s] [-g groupingFileName] [-j write intermediate trees to a separate file] [-k optimize branches and model parameters on ootstrapped trees] [-o outgroupName(s)] [-q multipleModelFileName] [-r constraintFileName] [-t userStartingTree] [-w workingDirectory] [-v display version information] [-y ] [-z multipleTreesFile] [-# numberOfRuns] Prior to implementation of the Guigen applet, RAxML was run with only two flags: -c number of categories; =25; and -m model Of Evolution; =GTRGAMMA An explanation of the flags is above (the manual [pdf] provides more details):","title":"RAxML \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/02_figtree/","text":"Figtree \u00b6","title":"Figtree"},{"location":"book/C15_Phylogeny-Analysis/02_figtree/#figtree","text":"","title":"Figtree"},{"location":"book/C15_Phylogeny-Analysis/03_ggtree/","text":"ggtree \u00b6","title":"ggtree"},{"location":"book/C15_Phylogeny-Analysis/03_ggtree/#ggtree","text":"","title":"ggtree"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/","text":"PhyML \u4f7f\u7528 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} PhyML \u662f\u7531 Stephane Guindon \u5f00\u53d1\u7684\u4e00\u6b3e\u8fdb\u5316\u6811\u8f6f\u4ef6\u3002 1. \u5b89\u88c5 \u00b6 1.1 \u4ece\u6e90\u4ee3\u7801\u5b89\u88c5 \u00b6 $ git clone https://github.com/stephaneguindon/phyml $ cd phyml && sh ./autogen.sh # \u5b89\u88c5 phyml \u4ee5\u53ca\u76f8\u5173\u7684\u8f6f\u4ef6 phyrex \u548c phytime $ ./configure --enable-phyml $ make $ sudo make install 1.2 \u9884\u7f16\u8bd1\u5305\u5b89\u88c5 \u00b6 $ conda activate phylo ( phylo ) $ conda install phyml 2. \u4f7f\u7528 \u00b6 # \u5bf9\u78b1\u57fa\u5e8f\u5217\u6784\u5efaGTR\u8fdb\u5316\u6811 $ phyml -i nucl.maf -d nt -b 1000 -m GTR -f m -v e -a e -o tlr # \u5bf9\u6c28\u57fa\u9178\u5e8f\u5217\u6784\u5efaJTT\u8fdb\u5316\u6811 $ phyml -i prot.maf -d aa -m JTT -a e \u8f6f\u4ef6\u53c2\u6570 -i seq_file_name \u8f93\u5165\u6587\u4ef6\uff0cphylip \u683c\u5f0f\u7684\u591a\u5e8f\u5217\u6bd4\u5bf9\u7ed3\u679c\u3002 -d data_type default\uff1ant \u8be5\u53c2\u6570\u7684\u503c\u4e3a nt, aa \u6216 generic\u3002 -b int \u8bbe\u7f6e bootstrap \u6b21\u6570\u3002 -m model \u8bbe\u7f6e\u66ff\u4ee3\u6a21\u578b\u3002 \u6838\u9178\u7684\u6a21\u578b\u6709\uff1a HKY85\uff08\u9ed8\u8ba4\u7684\uff09, JC69, K80, F81, TN93, GTR ; \u6c28\u57fa\u9178\u7684\u6a21\u578b\u6709\uff1aLG \uff08\u9ed8\u8ba4\u7684\uff09, WAG, JTT, MtREV, Dayhoff, DCMut, RtREV, CpREV, VT, Blosum62, MtMam, HIVw, HIVb \u3002 -f e,m or fA,fC,fG,fT \u8bbe\u7f6e\u9891\u7387\u8ba1\u7b97\u7684\u65b9\u6cd5\u3002 e \u8868\u793a\u4f7f\u7528\u6bd4\u5bf9\u7ed3\u679c\u4e2d\u4e0d\u540c\u6c28\u57fa\u9178\u6216\u78b1\u57fa\u51fa\u73b0\u7684\u9891\u7387\u6765\u8ba1\u7b97\uff1b m \u8868\u793a\u4f7f\u7528\u6700\u5927\u4f3c\u7136\u6cd5\u8ba1\u7b97\u78b1\u57fa\u9891\u7387\uff0c\u6216\u4f7f\u7528\u66ff\u6362\u6a21\u578b\u8ba1\u7b97\u6c28\u57fa\u9178\u9891\u7387\uff1b fA,fC,fG,fT \u5219\u662f 4 \u4e2a\u6d6e\u70b9\u6570\uff0c\u8868\u793a 4 \u4e2d\u78b1\u57fa\u7684\u9891\u7387\uff0c\u4ec5\u9002\u5408\u6838\u9178\u5e8f\u5217\u3002 -v prop_invar \u8bbe\u7f6e\u4e0d\u53d8\u4f4d\u70b9\u7684\u6bd4\u4f8b\uff0c\u662f\u4e00\u4e2a[0,1]\u533a\u95f4\u7684\u503c\u3002\u6216\u8005\u4f7f\u7528 e \u8868\u793a\u7a0b\u5e8f\u83b7\u5f97\u5176\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u503c\u3002 -a gamma gamma \u5206\u5e03\u7684\u53c2\u6570\u3002\u6b64\u53c2\u6570\u503c\u662f\u4e2a\u6b63\u6570\uff0c\u6216\u8005\u4f7f\u7528 e \u8868\u793a\u7a0b\u5e8f\u83b7\u5f97\u5176\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u503c\u3002\u5728 ProtTest \u8f6f\u4ef6\u7ed9\u51fa\u7684\u6700\u4f18\u6a21\u578b\u4e2d\u542b\u6709 G \u65f6\uff0c\u4f7f\u7528\u8be5\u53c2\u6570\u3002 -o params \u53c2\u6570\u4f18\u5316\u7684\u9009\u9879\u3002t \u8868\u793a\u5bf9 tree topology \u8fdb\u884c\u4f18\u5316\uff1b l \u8868\u793a\u5bf9 branch length \u8fdb\u884c\u4f18\u5316\uff1b r \u8868\u793a\u5bf9 rate parameters \u4f18\u5316\u3002params=tlr \u8fd9\u8868\u793a\u5bf9 3 \u8005\u90fd\u8fdb\u884c\u4f18\u5316\u3002 params=n \u8868\u793a\u4e0d\u8fdb\u884c\u4f18\u5316\u3002 \u53c2\u8003\u8d44\u6599 \u00b6 PhyML Paper","title":"PhyML \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/#phyml","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} PhyML \u662f\u7531 Stephane Guindon \u5f00\u53d1\u7684\u4e00\u6b3e\u8fdb\u5316\u6811\u8f6f\u4ef6\u3002","title":"PhyML \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/#1","text":"","title":"1. \u5b89\u88c5"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/#11","text":"$ git clone https://github.com/stephaneguindon/phyml $ cd phyml && sh ./autogen.sh # \u5b89\u88c5 phyml \u4ee5\u53ca\u76f8\u5173\u7684\u8f6f\u4ef6 phyrex \u548c phytime $ ./configure --enable-phyml $ make $ sudo make install","title":"1.1 \u4ece\u6e90\u4ee3\u7801\u5b89\u88c5"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/#12","text":"$ conda activate phylo ( phylo ) $ conda install phyml","title":"1.2 \u9884\u7f16\u8bd1\u5305\u5b89\u88c5"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/#2","text":"# \u5bf9\u78b1\u57fa\u5e8f\u5217\u6784\u5efaGTR\u8fdb\u5316\u6811 $ phyml -i nucl.maf -d nt -b 1000 -m GTR -f m -v e -a e -o tlr # \u5bf9\u6c28\u57fa\u9178\u5e8f\u5217\u6784\u5efaJTT\u8fdb\u5316\u6811 $ phyml -i prot.maf -d aa -m JTT -a e \u8f6f\u4ef6\u53c2\u6570 -i seq_file_name \u8f93\u5165\u6587\u4ef6\uff0cphylip \u683c\u5f0f\u7684\u591a\u5e8f\u5217\u6bd4\u5bf9\u7ed3\u679c\u3002 -d data_type default\uff1ant \u8be5\u53c2\u6570\u7684\u503c\u4e3a nt, aa \u6216 generic\u3002 -b int \u8bbe\u7f6e bootstrap \u6b21\u6570\u3002 -m model \u8bbe\u7f6e\u66ff\u4ee3\u6a21\u578b\u3002 \u6838\u9178\u7684\u6a21\u578b\u6709\uff1a HKY85\uff08\u9ed8\u8ba4\u7684\uff09, JC69, K80, F81, TN93, GTR ; \u6c28\u57fa\u9178\u7684\u6a21\u578b\u6709\uff1aLG \uff08\u9ed8\u8ba4\u7684\uff09, WAG, JTT, MtREV, Dayhoff, DCMut, RtREV, CpREV, VT, Blosum62, MtMam, HIVw, HIVb \u3002 -f e,m or fA,fC,fG,fT \u8bbe\u7f6e\u9891\u7387\u8ba1\u7b97\u7684\u65b9\u6cd5\u3002 e \u8868\u793a\u4f7f\u7528\u6bd4\u5bf9\u7ed3\u679c\u4e2d\u4e0d\u540c\u6c28\u57fa\u9178\u6216\u78b1\u57fa\u51fa\u73b0\u7684\u9891\u7387\u6765\u8ba1\u7b97\uff1b m \u8868\u793a\u4f7f\u7528\u6700\u5927\u4f3c\u7136\u6cd5\u8ba1\u7b97\u78b1\u57fa\u9891\u7387\uff0c\u6216\u4f7f\u7528\u66ff\u6362\u6a21\u578b\u8ba1\u7b97\u6c28\u57fa\u9178\u9891\u7387\uff1b fA,fC,fG,fT \u5219\u662f 4 \u4e2a\u6d6e\u70b9\u6570\uff0c\u8868\u793a 4 \u4e2d\u78b1\u57fa\u7684\u9891\u7387\uff0c\u4ec5\u9002\u5408\u6838\u9178\u5e8f\u5217\u3002 -v prop_invar \u8bbe\u7f6e\u4e0d\u53d8\u4f4d\u70b9\u7684\u6bd4\u4f8b\uff0c\u662f\u4e00\u4e2a[0,1]\u533a\u95f4\u7684\u503c\u3002\u6216\u8005\u4f7f\u7528 e \u8868\u793a\u7a0b\u5e8f\u83b7\u5f97\u5176\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u503c\u3002 -a gamma gamma \u5206\u5e03\u7684\u53c2\u6570\u3002\u6b64\u53c2\u6570\u503c\u662f\u4e2a\u6b63\u6570\uff0c\u6216\u8005\u4f7f\u7528 e \u8868\u793a\u7a0b\u5e8f\u83b7\u5f97\u5176\u6700\u5927\u4f3c\u7136\u4f30\u8ba1\u503c\u3002\u5728 ProtTest \u8f6f\u4ef6\u7ed9\u51fa\u7684\u6700\u4f18\u6a21\u578b\u4e2d\u542b\u6709 G \u65f6\uff0c\u4f7f\u7528\u8be5\u53c2\u6570\u3002 -o params \u53c2\u6570\u4f18\u5316\u7684\u9009\u9879\u3002t \u8868\u793a\u5bf9 tree topology \u8fdb\u884c\u4f18\u5316\uff1b l \u8868\u793a\u5bf9 branch length \u8fdb\u884c\u4f18\u5316\uff1b r \u8868\u793a\u5bf9 rate parameters \u4f18\u5316\u3002params=tlr \u8fd9\u8868\u793a\u5bf9 3 \u8005\u90fd\u8fdb\u884c\u4f18\u5316\u3002 params=n \u8868\u793a\u4e0d\u8fdb\u884c\u4f18\u5316\u3002","title":"2. \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/03_phyml/#_1","text":"PhyML Paper","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C15_Phylogeny-Analysis/04_beast2/","text":"Beast2 \u4f7f\u7528 \u00b6 \u5b89\u88c5 \u00b6 # \u521b\u5efa beast2 \u865a\u62df\u73af\u5883\uff0c\u5b89\u88c5 beast2 $ conda create -n beast2 $ conda activate beast2 ( beast2 ) $ conda install beast2 # \u5411conda\u73af\u5883\u6dfb\u52a0\u53d8\u91cf\uff0c\u4f18\u5316 java \u5bf9 beauti \u7a0b\u5e8f\u5b57\u4f53\u6e32\u67d3 ( beast2 ) $ echo \"export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=lcd'\" >> $CONDA_PREFIX /etc/conda/activate.d/java_home.sh ( beast2 ) $ echo \"unset _JAVA_OPTIONS\" >> $CONDA_PREFIX /etc/conda/deactivate.d/java_home.sh","title":"Beast2 \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/04_beast2/#beast2","text":"","title":"Beast2 \u4f7f\u7528"},{"location":"book/C15_Phylogeny-Analysis/04_beast2/#_1","text":"# \u521b\u5efa beast2 \u865a\u62df\u73af\u5883\uff0c\u5b89\u88c5 beast2 $ conda create -n beast2 $ conda activate beast2 ( beast2 ) $ conda install beast2 # \u5411conda\u73af\u5883\u6dfb\u52a0\u53d8\u91cf\uff0c\u4f18\u5316 java \u5bf9 beauti \u7a0b\u5e8f\u5b57\u4f53\u6e32\u67d3 ( beast2 ) $ echo \"export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=lcd'\" >> $CONDA_PREFIX /etc/conda/activate.d/java_home.sh ( beast2 ) $ echo \"unset _JAVA_OPTIONS\" >> $CONDA_PREFIX /etc/conda/deactivate.d/java_home.sh","title":"\u5b89\u88c5"},{"location":"book/C15_Phylogeny-Analysis/05_mrbayes/","text":"","title":"05 mrbayes"},{"location":"book/C16_Standalone-Platform/","text":"","title":"Index"},{"location":"book/C16_Standalone-Platform/01_anvio/","text":"Anvi'o \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Anvi'o \u662f\u4e00\u4e2a\u6574\u5408\u7684B/S\u5de5\u5177 1. \u5b89\u88c5 \u00b6 Archlinux \u5b89\u88c5 v5.5 \u7248\u672c\u7684 anvio $ sudo pacman -Syu $ sudo pacman -S blas cblas lapack \u53c2\u8003\u8d44\u6599 \u00b6 Anvi'o \u5b98\u65b9\u7f51\u7ad9","title":"05. anvio"},{"location":"book/C16_Standalone-Platform/01_anvio/#anvio","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Anvi'o \u662f\u4e00\u4e2a\u6574\u5408\u7684B/S\u5de5\u5177","title":"Anvi'o"},{"location":"book/C16_Standalone-Platform/01_anvio/#1","text":"Archlinux \u5b89\u88c5 v5.5 \u7248\u672c\u7684 anvio $ sudo pacman -Syu $ sudo pacman -S blas cblas lapack","title":"1. \u5b89\u88c5"},{"location":"book/C16_Standalone-Platform/01_anvio/#_1","text":"Anvi'o \u5b98\u65b9\u7f51\u7ad9","title":"\u53c2\u8003\u8d44\u6599"},{"location":"book/C16_Standalone-Platform/02_galaxy/","text":"Galaxy \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"02. galaxy"},{"location":"book/C16_Standalone-Platform/02_galaxy/#galaxy","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Galaxy"},{"location":"book/C17_Pathogen-Geospatial-Analysis/","text":"","title":"Index"},{"location":"book/C17_Pathogen-Geospatial-Analysis/04_cartodb/","text":"CartoDB \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} CartoDB \u662f\u4e00\u4e2a\u5730\u7406\u6570\u636e\u53ef\u89c6\u5316\u8f6f\u4ef6\u3002carto.com \u63d0\u4f9b\u4e86\u57fa\u4e8e Web \u7684\u5b9e\u4f8b\u5316\u5e94\u7528\uff0c\u5176\u514d\u8d39\u5e10\u53f7\u6570\u636e\u4f7f\u7528\u6709\u4e00\u4e9b\u6743\u9650\u9650\u5236\uff0c\u540c\u65f6\u5236\u4f5c\u7684 map \u5fc5\u987b\u516c\u5f00\u3002\u5982\u679c\u8981\u505a\u79c1\u6709\u5316\u6570\u636e\u7684 map\uff0c\u6216\u8005\u81ea\u5df1\u56e2\u961f\u5185\u90e8\u6570\u636e\u5206\u6790\u5206\u4eab\uff0c\u5c31\u8981\u81ea\u5df1\u5efa\u7acb\u670d\u52a1\u3002\u800cCartoDB\u662f\u5f00\u6e90\u7684\uff0c\u5f88\u65b9\u4fbf\u7684\u5efa\u7acb\u76f8\u5173\u5e94\u7528\u548c\u670d\u52a1\u3002 1. \u5b89\u88c5 \u00b6 cartodb \u4f5c\u4e3a\u4e00\u5957\u5e94\u7528\u5305\uff0c\u5982\u679c\u81ea\u5df1\u624b\u52a8\u4e00\u4e2a\u4e2a\u5b89\u88c5\uff0c\u5bf9\u4e8e\u666e\u901a\u7528\u6237\u6765\u8bf4\u5b66\u4e60\u66f2\u7ebf\u662f\u6bd4\u8f83\u9ad8\u7684\u3002\u56e0\u6b64\u6211\u4eec\u4e00\u822c\u4f7f\u7528 docker \u6765\u5b89\u88c5\u548c\u90e8\u7f72\u670d\u52a1\u3002 1.1 Ubuntu \u5b89\u88c5 docker \u00b6 # \u5220\u9664\u65e7\u7248\u672c docker $ sudo apt remove docker docker-engine $ sudo apt purge docker docker-engine # \u5b89\u88c5\u4f9d\u8d56\uff0c\u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u53ef\u4ee5\u8df3\u8fc7 $ sudo apt install -y apt-transport-https ca-certificates curl software-properties-common # \u6dfb\u52a0\u5b98\u65b9 GPG key $ curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - $ sudo apt-key fingerprint 0EBFCD88 $ sudo add-apt-repository \"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \\ > $( lsb_release -cs ) stable\" # \u5b89\u88c5 docker $ sudo apt update $ sudo apt install -y docker-ce # \u6d4b\u8bd5\u5b89\u88c5\u662f\u5426\u6210\u529f\uff0c\u5982\u679c\u770b\u5230\u4e0b\u8f7d\u8fdc\u7a0b\u955c\u50cf\u4fe1\u606f\uff0c\u5e76\u7531\u6253\u5370\u4e86\u6b22\u8fce\u4fe1\u606f\uff0c\u5219\u8868\u793a\u5b89\u88c5\u6210\u529f\u3002 $ docker run hello-world # \u7528 daocloud \u52a0\u901f\u955c\u50cf\u4e0b\u8f7d\uff0c\u5e76\u91cd\u542f\u670d\u52a1 $ curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://8ad7943c.m.daocloud.io $ sudo systemctl restart docker.service # \u6dfb\u52a0\u7528\u6237\u5230 docker \u7ec4 $ grep 'docker' /etc/group | grep $USER # \u5982\u679c\u6ca1\u6709\u8f93\u51fa\uff0c\u5219\u53ef\u4ee5\u628a\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230 docker \u7ec4\uff0c\u4ee5\u514d\u8fd0\u884c docker \u65f6\u9700\u8981 root \u6743\u9650\u3002 $ sudo usermod -aG docker $USER 1.2 \u5b89\u88c5 cartodb \u00b6 # \u514b\u9686 docker-cartodb \u5230\u672c\u5730\u4ed3\u5e93\uff0c\u6784\u5efa\u955c\u50cf $ git clone https://github.com/sverhoeven/docker-cartodb.git $ docker build -t = sverhoeven/cartodb docker-cartodb/ # \u63a5\u4e0b\u6765\u5c31\u662f\u6f2b\u957f\u7684\u7b49\u5f85\u5b8c\u6210\u865a\u62df\u7cfb\u7edf\u7684\u5b89\u88c5\u8fc7\u7a0b # \u8fd0\u884c\u955c\u50cf\uff0cip_address\u8f93\u5165\u670d\u52a1\u5668ip\u5730\u5740\uff0c\u8ba9docker container\u7ed1\u5b9a\u5230\u670d\u52a1\u566880\u7aef\u53e3\u4e0a\uff0c\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\u670d\u52a1\u5668ip\u5373\u53ef\u770b\u5230carto web\u754c\u9762 $ docker run -d -p 80 :80 -h ip_address sverhoeven/cartodb 2. \u4f7f\u7528 \u00b6 # docker\u6570\u636e\u5c42\u662f\u72ec\u7acb\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5efa\u7acb\u5355\u72ec\u7684PostgreSQL persistant $ docker create --name cartodb_pgdata sverhoeven/cartodb # Change to directory to save the Postgresql data dir (cartodb_pgdata) of the CartoDB image $ docker cp cartodb_pgdata:/var/lib/postgresql $PWD /cartodb_pgdata $ docker rm -f cartodb_pgdata # Inside container cartodb_pgdata is owned by postgres (uid=105) user, # it should be owned by same user on the local filesystem $ sudo chown -R 105 .105 $PWD /cartodb_pgdata # \u8fd9\u6837\u5373\u4f7f container \u91cd\u542f\uff0c\u4e4b\u524d\u5efa\u7acb\u7684\u6570\u636e\u96c6\u4e5f\u4e0d\u4f1a\u4e22\u5931\u4e86\u3002 $ docker run -d -p 80 :80 -h ip -v $PWD /cartodb_pgdata:/var/lib/postgresql sverhoeven/cartodb","title":"04. CartoDB"},{"location":"book/C17_Pathogen-Geospatial-Analysis/04_cartodb/#cartodb","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} CartoDB \u662f\u4e00\u4e2a\u5730\u7406\u6570\u636e\u53ef\u89c6\u5316\u8f6f\u4ef6\u3002carto.com \u63d0\u4f9b\u4e86\u57fa\u4e8e Web \u7684\u5b9e\u4f8b\u5316\u5e94\u7528\uff0c\u5176\u514d\u8d39\u5e10\u53f7\u6570\u636e\u4f7f\u7528\u6709\u4e00\u4e9b\u6743\u9650\u9650\u5236\uff0c\u540c\u65f6\u5236\u4f5c\u7684 map \u5fc5\u987b\u516c\u5f00\u3002\u5982\u679c\u8981\u505a\u79c1\u6709\u5316\u6570\u636e\u7684 map\uff0c\u6216\u8005\u81ea\u5df1\u56e2\u961f\u5185\u90e8\u6570\u636e\u5206\u6790\u5206\u4eab\uff0c\u5c31\u8981\u81ea\u5df1\u5efa\u7acb\u670d\u52a1\u3002\u800cCartoDB\u662f\u5f00\u6e90\u7684\uff0c\u5f88\u65b9\u4fbf\u7684\u5efa\u7acb\u76f8\u5173\u5e94\u7528\u548c\u670d\u52a1\u3002","title":"CartoDB"},{"location":"book/C17_Pathogen-Geospatial-Analysis/04_cartodb/#1","text":"cartodb \u4f5c\u4e3a\u4e00\u5957\u5e94\u7528\u5305\uff0c\u5982\u679c\u81ea\u5df1\u624b\u52a8\u4e00\u4e2a\u4e2a\u5b89\u88c5\uff0c\u5bf9\u4e8e\u666e\u901a\u7528\u6237\u6765\u8bf4\u5b66\u4e60\u66f2\u7ebf\u662f\u6bd4\u8f83\u9ad8\u7684\u3002\u56e0\u6b64\u6211\u4eec\u4e00\u822c\u4f7f\u7528 docker \u6765\u5b89\u88c5\u548c\u90e8\u7f72\u670d\u52a1\u3002","title":"1. \u5b89\u88c5"},{"location":"book/C17_Pathogen-Geospatial-Analysis/04_cartodb/#11-ubuntu-docker","text":"# \u5220\u9664\u65e7\u7248\u672c docker $ sudo apt remove docker docker-engine $ sudo apt purge docker docker-engine # \u5b89\u88c5\u4f9d\u8d56\uff0c\u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u53ef\u4ee5\u8df3\u8fc7 $ sudo apt install -y apt-transport-https ca-certificates curl software-properties-common # \u6dfb\u52a0\u5b98\u65b9 GPG key $ curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - $ sudo apt-key fingerprint 0EBFCD88 $ sudo add-apt-repository \"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu \\ > $( lsb_release -cs ) stable\" # \u5b89\u88c5 docker $ sudo apt update $ sudo apt install -y docker-ce # \u6d4b\u8bd5\u5b89\u88c5\u662f\u5426\u6210\u529f\uff0c\u5982\u679c\u770b\u5230\u4e0b\u8f7d\u8fdc\u7a0b\u955c\u50cf\u4fe1\u606f\uff0c\u5e76\u7531\u6253\u5370\u4e86\u6b22\u8fce\u4fe1\u606f\uff0c\u5219\u8868\u793a\u5b89\u88c5\u6210\u529f\u3002 $ docker run hello-world # \u7528 daocloud \u52a0\u901f\u955c\u50cf\u4e0b\u8f7d\uff0c\u5e76\u91cd\u542f\u670d\u52a1 $ curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://8ad7943c.m.daocloud.io $ sudo systemctl restart docker.service # \u6dfb\u52a0\u7528\u6237\u5230 docker \u7ec4 $ grep 'docker' /etc/group | grep $USER # \u5982\u679c\u6ca1\u6709\u8f93\u51fa\uff0c\u5219\u53ef\u4ee5\u628a\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230 docker \u7ec4\uff0c\u4ee5\u514d\u8fd0\u884c docker \u65f6\u9700\u8981 root \u6743\u9650\u3002 $ sudo usermod -aG docker $USER","title":"1.1 Ubuntu \u5b89\u88c5 docker"},{"location":"book/C17_Pathogen-Geospatial-Analysis/04_cartodb/#12-cartodb","text":"# \u514b\u9686 docker-cartodb \u5230\u672c\u5730\u4ed3\u5e93\uff0c\u6784\u5efa\u955c\u50cf $ git clone https://github.com/sverhoeven/docker-cartodb.git $ docker build -t = sverhoeven/cartodb docker-cartodb/ # \u63a5\u4e0b\u6765\u5c31\u662f\u6f2b\u957f\u7684\u7b49\u5f85\u5b8c\u6210\u865a\u62df\u7cfb\u7edf\u7684\u5b89\u88c5\u8fc7\u7a0b # \u8fd0\u884c\u955c\u50cf\uff0cip_address\u8f93\u5165\u670d\u52a1\u5668ip\u5730\u5740\uff0c\u8ba9docker container\u7ed1\u5b9a\u5230\u670d\u52a1\u566880\u7aef\u53e3\u4e0a\uff0c\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\u670d\u52a1\u5668ip\u5373\u53ef\u770b\u5230carto web\u754c\u9762 $ docker run -d -p 80 :80 -h ip_address sverhoeven/cartodb","title":"1.2 \u5b89\u88c5 cartodb"},{"location":"book/C17_Pathogen-Geospatial-Analysis/04_cartodb/#2","text":"# docker\u6570\u636e\u5c42\u662f\u72ec\u7acb\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u5efa\u7acb\u5355\u72ec\u7684PostgreSQL persistant $ docker create --name cartodb_pgdata sverhoeven/cartodb # Change to directory to save the Postgresql data dir (cartodb_pgdata) of the CartoDB image $ docker cp cartodb_pgdata:/var/lib/postgresql $PWD /cartodb_pgdata $ docker rm -f cartodb_pgdata # Inside container cartodb_pgdata is owned by postgres (uid=105) user, # it should be owned by same user on the local filesystem $ sudo chown -R 105 .105 $PWD /cartodb_pgdata # \u8fd9\u6837\u5373\u4f7f container \u91cd\u542f\uff0c\u4e4b\u524d\u5efa\u7acb\u7684\u6570\u636e\u96c6\u4e5f\u4e0d\u4f1a\u4e22\u5931\u4e86\u3002 $ docker run -d -p 80 :80 -h ip -v $PWD /cartodb_pgdata:/var/lib/postgresql sverhoeven/cartodb","title":"2. \u4f7f\u7528"},{"location":"book/C17_Pathogen-Geospatial-Analysis/05_leaflet/","text":"Leaflet \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} -- Leaflet \u662f\u4e00\u4e2a R \u5730\u56fe\u5e94\u7528\u5305\uff0c\u53ef\u4ee5\u7528\u4e8e\u75c5\u539f\u6d41\u884c\u75c5\u5b66\u5206\u6790\u3002 1. \u5b89\u88c5 \u00b6 # https://cloud.tencent.com/developer/article/1092335 library ( plyr ) library ( mapdata ) library ( leaflet ) library ( maptools ) library ( ggplot2 ) #\u5bfc\u5165\u4e2d\u56fd\u5404\u7701\u4f1a\u57ce\u5e02\u5730\u7406\u4fe1\u606f\u6570\u636e\uff1a province_city <- read.csv ( \"c:/rstudy/chinaprovincecity.csv\" ) province_city $ size <- round ( runif ( 34 , 5 , 10 ), 2 ) province_city $ type <- factor ( sample ( LETTERS [ 1 : 5 ], 34 , replace = TRUE )) co <- substr ( rainbow ( 34 ), 1 , 7 ) province_city <- data.frame ( province_city , co ) leaflet ( province_city ) %>% addTiles () %>% setView ( lng = 116.38 , lat = 39.9 , zoom = 3 ) %>% addMarkers ( lng =~ jd , lat =~ wd , popup =~ city ) 2. \u4f7f\u7528 \u00b6","title":"05. leaflet"},{"location":"book/C17_Pathogen-Geospatial-Analysis/05_leaflet/#leaflet","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} -- Leaflet \u662f\u4e00\u4e2a R \u5730\u56fe\u5e94\u7528\u5305\uff0c\u53ef\u4ee5\u7528\u4e8e\u75c5\u539f\u6d41\u884c\u75c5\u5b66\u5206\u6790\u3002","title":"Leaflet"},{"location":"book/C17_Pathogen-Geospatial-Analysis/05_leaflet/#1","text":"# https://cloud.tencent.com/developer/article/1092335 library ( plyr ) library ( mapdata ) library ( leaflet ) library ( maptools ) library ( ggplot2 ) #\u5bfc\u5165\u4e2d\u56fd\u5404\u7701\u4f1a\u57ce\u5e02\u5730\u7406\u4fe1\u606f\u6570\u636e\uff1a province_city <- read.csv ( \"c:/rstudy/chinaprovincecity.csv\" ) province_city $ size <- round ( runif ( 34 , 5 , 10 ), 2 ) province_city $ type <- factor ( sample ( LETTERS [ 1 : 5 ], 34 , replace = TRUE )) co <- substr ( rainbow ( 34 ), 1 , 7 ) province_city <- data.frame ( province_city , co ) leaflet ( province_city ) %>% addTiles () %>% setView ( lng = 116.38 , lat = 39.9 , zoom = 3 ) %>% addMarkers ( lng =~ jd , lat =~ wd , popup =~ city )","title":"1. \u5b89\u88c5"},{"location":"book/C17_Pathogen-Geospatial-Analysis/05_leaflet/#2","text":"","title":"2. \u4f7f\u7528"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/","text":"\u94dc\u7eff\u5047\u5355\u80de\u83cc\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682aSNP\u6eaf\u6e90 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u5229\u7528\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5bf9\u94dc\u7eff\u5047\u5355\u80de\u83cc( Pseudomonas aeruginosa )\u7684\u4e34\u5e8a\u5206\u79bb\u682a\u4e0e\u73af\u5883\u5206\u79bb\u682a\u5728\u57fa\u56e0\u7ec4\u6c34\u5e73\u4e0a\u8fdb\u884cSNP\u5206\u6790\uff0c\u4ece\u800c\u6eaf\u6e90\u83cc\u682a\u5e76\u505a\u8010\u836f\u5206\u6790\u3002 \u5185\u5bb9\u5b8c\u6210\u60c5\u51b5\uff1a 85% \u5206\u6790\u65b9\u6cd5 \uff1a \u5229\u7528 bwa \u5c06\u76ee\u6807\u57fa\u56e0\u7ec4 reads \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u7528 freebayes \u505a variant calling\uff0c\u83b7\u5f97\u5404\u4e2a\u6837\u672c\u7684 SNPs\uff0c\u6839\u636e\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u5206\u6790\u3002 \u5e94\u7528\u5de5\u5177 : bwa samtools freebayes vcffilter \u5b9e\u8df5\u610f\u4e49 \uff1a\u53ef\u4ee5\u4f5c\u4e3a\u4eca\u540e\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u83cc\u6eaf\u6e90\u5de5\u4f5c\u7684\u4e00\u4e2a\u6280\u672f\u6307\u5bfc\u4f9d\u636e\u3002 1. \u63d0\u51fa\u95ee\u9898 \u00b6 \u5de5\u4f5c\u6d41\u7a0b\u5c06\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u5bf9\u4e8e\u8fd9\u4e2a\u6848\u4f8b\u5f00\u5c55\u6570\u636e\u5206\u6790\uff1a \u6d4b\u5e8f\u8d28\u91cf: reads\u7684\u957f\u5ea6\uff0c\u63d2\u5165\u7247\u6bb5\u7684\u957f\u5ea6 \u5c06\u6d4b\u5e8f\u6570\u636e\u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4ST17 \u6bcf\u4e2a\u6837\u54c1reads\u7684\u5206\u5e03\u60c5\u51b5 \u6bcf\u4e2a\u6837\u54c1\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u8986\u76d6\u5ea6 \u4e0d\u540c\u6837\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u7279\u522b\u662f\u5f53\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fc7\u6ee4\u53c2\u6570\u65f6\u7684\u60c5\u51b5\uff1a Quality filter: QUAL > 100 Likelihood filter: QUAL / AO > 10 Variant frequency filter: AO / DP > 0.9 (90% allele frequency) \u54ea\u4e00\u4e2a\u6c34\u9f99\u5934\u6c34\u6837\u7684\u5206\u79bb\u682a\u6700\u6709\u53ef\u80fd\u662f\u611f\u67d3\u6e90\u3002(\u65b9\u6cd5: \u7528 vcfsamplediff \u6bd4\u8f83\u73af\u5883\u682a\u4e0e\u4e34\u5e8a\u682aSNPs\u6570\u91cf) 2\u4e2a\u75c5\u4eba\u5206\u79bb\u682a\u4e4b\u95f4\u4f7f\u7528\u4e86\u5927\u91cf\u7684\u6297\u751f\u7d20\u6cbb\u7597\uff0c\u54ea\u4e00\u4e2a\u83b7\u5f97\u3001\u5f97\u4e86\u8010\u836f\u6027\uff1f \u7528 joint calling \u6765\u6bd4\u8f832\u4e2a\u4e34\u5e8a\u6837\u54c1\u6570\u636e\uff0c\u5e76\u7528 vcfsamplediff \u5206\u6790 \u5bf9\u4e8e\u83b7\u5f97\u7684\u5927\u91cfSNPs\uff0c\u662f\u5426\u9700\u8981\u8fc7\u6ee4\u4ee5\u53ca\u5982\u4f55\u8fc7\u6ee4 \u4e86\u89e3SNPs\u7684\u5206\u5e03\u89c4\u5f8b \u91cd\u70b9\u67e5\u770bSNPs 2. \u5206\u6790\u6d41\u7a0b \u00b6 2.1 \u4e0b\u8f7d\u6570\u636e \u00b6 \u6570\u636e\u53ef\u4ee5\u4ece \u8fd9\u91cc \u4e0b\u8f7d\u83b7\u5f97\uff0c\u53ef\u4ee5\u7528 wget -m \u9012\u5f52\u4e0b\u8f7d\u8def\u5f84\u4e0b\u6240\u6709\u6587\u4ef6\u3002\u6587\u4ef6\u5305\u62ec\uff1a TAP1 - \u75c5\u623f1\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a TAP2 - \u75c5\u623f2\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a TAP3 - \u75c5\u623f3\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a PATIENT1 - \u670d\u7528\u6297\u751f\u7d20\u540e\u7684\u75c5\u4eba\u5206\u79bb\u682a PATIENT2 - \u4e00\u5468\u5185\u8fdb\u4e00\u6b65\u670d\u7528\u6297\u751f\u7d20\u7684\u75c5\u4eba\u5206\u79bb\u682a # \u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55\uff0c\u6570\u636e\u548c\u64cd\u4f5c\u5747\u5728\u91cc\u9762\u8fdb\u884c $ mkdir pae-case && cd pae-case # \u4e0b\u8f7d\u6570\u636e\u6587\u4ef6 $ wget -m http://www.microbesng.uk/filedist/pseudomonas-practical/ $ mv www.microbesng.uk/filedist/pseudomonas-practical/* . wget \u7684 -m \u53c2\u6570\u53ef\u4ee5\u9012\u5f52\u4e0b\u8f7d\u3002 Warning \u6570\u636e\u4e0b\u8f7d\u5730\u5740\u76ee\u524d\u5df2\u7ecf\u5931\u6548\uff01 2.2 \u5efa\u7acb ST17 \u578b\u53c2\u8003\u83cc\u682a\u7d22\u5f15 \u00b6 \u8f6f\u4ef6\u4f7f\u7528 bwa \u6765\u5bf9\u53c2\u8003\u57fa\u56e0\u7ec4ST17\u5efa\u7acb\u7d22\u5f15\uff0c\u4ee5\u4fbf\u540e\u7eed\u6bd4\u5bf9\u3002 $ bwa index ST17.fasta 2.3 \u5c06\u6d4b\u5e8f reads \u6bd4\u5bf9\u5230 ST17 \u5e76\u6392\u5e8f\u7d22\u5f15 \u00b6 \u7528 bwa mem \u8fdb\u884c\u6bd4\u5bf9\uff0c\u8f93\u51fa\u7684\u7ed3\u679c\u901a\u8fc7\u7ba1\u9053\u7531samtools\u8f6c\u6362\u6210BAM\u6587\u4ef6\u5e76\u8fdb\u884c\u6392\u5e8f\u548c\u7d22\u5f15 $ bwa mem -t 4 -R '@RG\\tID:TAP1\\tSM:TAP1' ST17.fasta \\ > TAP1_R1_paired.fastq.gz TAP1_R2_paired.fastq.gz | \\ > samtools view -bS - | samtools sort - TAP1.sorted $ samtools index TAP1.sorted.bam \u53c2\u6570\u4ecb\u7ecd -t 4: \u8868\u793a\u4f7f\u75284\u7ebf\u7a0b\uff0c\u6839\u636e\u81ea\u5df1\u7684\u8ba1\u7b97\u673aCPU\u8d44\u6e90\u8bbe\u7f6e\u3002 -R '...': \u8bbe\u7f6ereads\u7684ID\uff0c\\t\u4e3a\u5236\u8868\u7b26\u4f1a\u8f6c\u4e49\u6210tab\u952e\u3002 \u5bf9\u5176\u4ed62\u682a\u73af\u5883\u682a\u548c2\u682a\u4e34\u5e8a\u682a\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u3002 2.4 \u7ed8\u5236\u6d4b\u5e8f reads \u7684\u8986\u76d6\u5ea6 \u00b6 bam\u6587\u4ef6\u542b\u6709\u6bd4\u5bf9\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528 stats \u53c2\u6570\u67e5\u770b $ samtools stats TAP1.sorted.bam | grep \"maximum length\" $ samtools stats TAP1.sorted.bam | grep \"insert size\" $ samtools stats TAP1.sorted.bam | grep \"^COV\" > TAP1.coverage.txt \u5c06\u622a\u53d6\u7684\u8986\u76d6\u5ea6\u76f8\u5173\u4fe1\u606f\u4fdd\u5b58\u6210 .txt \u6587\u4ef6\uff0c\u5728R\u91cc\u7528ggplot2\u7ed8\u5236\u8986\u76d6\u5ea6\u56fe\uff1a > library ( ggplot2 ) > cov = read.table ( \"TAP1.coverage.txt\" , sep = \"\\t\" ) > cov [ 1 ,] > ggplot ( cov , aes ( x = V3 , y = V4 )) + geom_bar ( stat = \"identity\" ) + xlab ( \"Coverage\" ) + ylab ( \"Count\" ) 2.5 \u6bd4\u8f831\u53f7\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u7684SNPs\u5dee\u5f02 \u00b6 \u7528\u540c\u6837\u7684\u65b9\u6cd5\u5bf9\u5176\u4ed6\u51e0\u4e2a\u6837\u672c\u8fdb\u884c\u64cd\u4f5c\uff0c\u83b7\u5f97sorted\u7684bam\u683c\u5f0f\u6587\u4ef6\uff0c\u7528 freebayes \u5bf9\u4e34\u5e8a\u4e0e\u73af\u5883\u682a\u6bd4\u8f83\u83b7\u5f97vcf\u6587\u4ef6\u3002\u7136\u540e\u7528vcflib\u5de5\u5177\u8fc7\u6ee4 QUAL/AO>10 \u7684\u90e8\u5206(VCF\u5143\u6570\u636e\u90e8\u5206\u53ef\u4ee5\u53c2\u8003 \u6587\u6863 )\uff0c\u5e76\u7528 wc-l \u8ba1\u7b97\u884c\u6570\u7edf\u8ba1\u7ed3\u679c\u3002 $ freebayes -p 1 -C 5 -f ST17.fasta TAP1.sorted.bam PATIENT1.sorted.bam > compare_tap1.vcf $ vcffilter -f \"QUAL / AO > 10\" compare_tap1.vcf | vcffilter -f \"NS = 2\" | wc -l 6685 \u83b7\u5f97\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u4e4b\u95f4\u7684SNP\u5dee\u5f02\u6570\u91cf\uff0c\u7ed3\u679c\u8868\u660e\u8fd92\u682a\u4e4b\u95f4\u53ea\u67095\u4e2aSNPs\u3002 $ vcfsamplediff SAME TAP1 PATIENT1 compare_tap1.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" | grep -v \"^#\" | wc -l 5 \u7528 vcfsamplediff \u4e86\u89e3SNPs\u5dee\u5f02\u7684\u57fa\u56e0\uff0c\u53ef\u4ee5\u77e5\u9053\u662f\u90a3\u4e9bgene/CDS\u91cc\u9762\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u5b9a\u4f4d\u770b\u7a81\u53d8\u662f\u5426\u662f\u540c\u4e49\u7a81\u53d8\u3002\u5982\u679csnps\u6570\u91cf\u63a5\u8fd1\u65e0\u6cd5\u533a\u5206\uff0c\u4f46\u662f\u5b9a\u4f4d\u7684\u57fa\u56e0\u6709\u5dee\u5f02\uff0c\u90a3\u4e48\u83cc\u682a\u7684\u6eaf\u6e90\u8fd8\u9700\u8981\u8fdb\u4e00\u6b65\u8003\u8651\u3002 $ vcfsamplediff SAME PATIENT1 TAP1 compare_tap1.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > tap_differences.vcf $ bedtools intersect -a ST17.gff -b tap_differences.vcf | awk -F \";\" '{print NR, $2}' OFS = \"\\t\" \u7ed3\u679c\u8f93\u51fa\uff1a 1 gene = yfiR 2 inference = ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5 3 inference = ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5 4 gene = trbL 5 inference = ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_001349879.1,protein motif:Cdd:COG3481,protein motif:TIGRFAMs:TIGR03760,protein motif:Pfam:PF07514.5 2.6 2\u4e2a\u4e34\u5e8a\u682a\u7684\u8010\u836f\u53d8\u8fc1 \u00b6 \u4e86\u89e32\u4e2a\u4e34\u5e8a\u682a\u7684SNPs\u5dee\u5f02\uff0c\u5e76\u67e5\u770b\u8fd9\u4e9bSNPs\u6240\u5f71\u54cd\u7684gene $ freebayes --ploidy 1 -C 5 -f ST17.fasta PATIENT1.sorted.bam PATIENT2.sorted.bam > compare_patient.vcf ~$ vcfsamplediff SAME PATIENT1 TAP1 compare_patient.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > patient_differences.vcf $ bedtools intersect -a ST17.gff -b patient_differences.vcf | awk -F \";\" '{print $2}' 3. \u7528 Snippy \u6765\u5b9e\u73b0 \u00b6 \u5927\u91cf\u7684\u65e5\u5e38\u5de5\u4f5c\u6216\u8005\u4e0d\u719f\u6089\u5404\u79cd\u547d\u4ee4\u884c\u5de5\u5177\u4f7f\u7528\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u66f4\u7b80\u4fbf\u7684\u8f6f\u4ef6\u6216\u8005pipelines\u6765\u5e2e\u52a9\u5b8c\u6210\u6574\u4e2a\u5206\u6790\u5de5\u4f5c\u3002\u56e0\u6b64\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 snippy \u6765\u5b9e\u73b0\u5206\u6790SNPs\uff0c\u5e76\u7ed8\u5236\u57fa\u4e8esnps\u7684\u8fdb\u5316\u6811\u3002 3.1 \u5b89\u88c5 Snippy \u00b6 Snippy\u662f\u6bd4\u8f83\u9002\u5408\u65b0\u624b\u7684\u5de5\u5177\uff0c\u5b83\u63d0\u4f9b\u4e86All in One\u7684\u5de5\u5177\u5957\u88c5\u3002\u867d\u7136Snippy\u9700\u8981\u4ee5\u4e0b\u8f6f\u4ef6\u652f\u6301\uff1a Perl >= 5.6 BioPerl >= 1.6 bwa mem >= 0.7.12 samtools >= 1.1 GNU parallel > 2013xxxx freebayes >= 0.9.20 freebayes sripts ( freebayes-parallel,fasta_generate_regions.py) vcflib (vcffilter, vcfstreamsort, vcfuniq, vcffirstheader) vcftools (vcf-consensus) snpEff >= 4.1 \u4f46\u8fd9\u4e9b\u5de5\u5177\u5728Snippy\u5b89\u88c5\u5305\u91cc\u90fd\u5df2\u7ecf\u63d0\u4f9b\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u7cfb\u7edf\u8bbe\u7f6e\u5c06\u4ee5\u6765\u5de5\u5177\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\u53bb\u5373\u53ef\u3002\u5bf9\u4e8eperl\u7684\u4e00\u4e9b\u6a21\u5757\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u540e\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\uff1a sudo cpan -u module_name $ wget https://github.com/tseemann/snippy/archive/v2.9.tar.gz $ tar xzf v2.9.tar.gz -C ~/app $ echo \"export PATH= $PATH : $HOME /app/snippy-2.9/bin: $HOME /app/snippy-2.9/binaries/linux/\" >> /.bashrc $ source ~/.bashrc # update all perl module $ sudo cpan -u 3.2 \u4f7f\u7528 Snippy \u00b6 Snippy \u4e0d\u4ec5\u53ef\u4ee5\u83b7\u5f97SNP(\u5305\u62ecMultiSNP)\uff0c\u4e5f\u53ef\u4ee5\u83b7\u5f97insertion, indeletion\u4ee5\u53caComibination\u3002\u6587\u672c\u683c\u5f0f\u7684\u7ed3\u679c\u8bb0\u5f55\u6587\u4ef6\u4e2d\u7684snps.tab\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7528\u6d4f\u89c8\u5668\u6253\u5f00snps.html\u67e5\u770b\u3002 $ snippy --cpus 4 --outdir output1 --ref ST17.fasta \\ > --R1 TAP1_R1_paired.fastq.gz --R2 TAP1_R2_paired.fastq.gz $ head output/snps.tab # snps.txt\u5bf9\u5404\u79cd\u7a81\u53d8\u4f4d\u70b9\u505a\u4e00\u4e2a\u6570\u636e\u7edf\u8ba1 $ cat output1/snps.txt ... Software snippy 2 .9 Variant-COMPLEX 1124 Variant-DEL 27 Variant-INS 43 Variant-MNP 222 Variant-SNP 3351 VariantTotal 4767 # \u8ba1\u7b97\u4e0d\u540c # \u4e86\u89e3\u4e0d\u540c\u78b1\u57fa\u7684SNP\u53d8\u5316\u6570\u91cf\uff0c\u5982T->C\u7684SNP\u6570\u91cf $ awk '$10==\"T=>C\" {n++} END{print n}' output1/snps.gff Snippy\u8fd8\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u57fa\u56e0\u7ec4\u7684\u5171\u6709SNPs\u7684\u6bd4\u5bf9\u6587\u4ef6\u3002\u7528snippy\u5206\u522b\u751f\u62103\u4e2aTAP\u7684snp\u5217\u8868\u6570\u636e\u5230ouput*\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u7edf\u8ba1\u5171\u6709snps\u6570\u91cf\u5e76\u751f\u6210snp\u5e8f\u5217\u6587\u4ef6aln\u3002 # for old ubuntu system you need update outdated perl module List::Util $ sudo cpan -u List::Util $ snippy-core --prefix core output1 output2 output3 ... Found 30711 core SNPs from 42075 variant sites. Saved SNP table: core.tab Constructing alignment object for core.aln ... \u5982\u679c\u8981\u7528raxml\u6784\u5efa\u8fdb\u5316\u6811\uff0c\u90a3\u83b7\u5f97\u7684.aln\u6587\u4ef6\u8fd8\u9700\u8981\u8f6c\u6362\u6210.phy\u624d\u53ef\u4ee5\u4f7f\u7528\u3002\u5f88\u591a\u5de5\u5177\u53ef\u4ee5\u5b9e\u73b0\u8f6c\u6362\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u670d\u52a1\u6765\u5b9e\u73b0\uff1a http://sing.ei.uvigo.es/ALTER/ # RAxML \u6784\u5efa\u8fdb\u5316\u6811 $ raxmlHPC -f a -x 12345 -p 12345 -# 100 -m GTRGAMMA -s core.phy -n pae -T 40 $ figtree RAxML_bestTree.pae \u751f\u6210\u7684\u8fdb\u5316\u6811\u56fe\u7c7b\u4f3c\u4e0b\u56fe \u56e0\u4e3a\u6bd4\u5bf9\u7684\u662ffasta\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6240\u4ee5snps\u4e0d\u6b62\u662f\u7f16\u7801\u533aCDS\u7684\uff0c\u800c\u662f\u6574\u4e2a\u57fa\u56e0\u7ec4\u4e0a\u7684snps\u3002 4. \u7528 Workflow \u811a\u672c\u6765\u7b80\u5316\u64cd\u4f5c \u00b6 \u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5e73\u65f6\u4f1a\u6709\u8bb8\u591a\u7c7b\u4f3c\u7684SNP\u9274\u5b9a\u5de5\u4f5c\uff0c\u90a3\u4e48\u4e0b\u673a\u6570\u636e\u8981\u4e00\u4e2a\u4e2a\u64cd\u4f5c\u4f1a\u5f88\u7e41\u7410\uff0c\u6709\u65f6\u5019\u6211\u4eec\u901a\u8fc7 unix \u7684 pipeline \u6765\u7b80\u5316\u6216\u8005\u5199 pipeline \u811a\u672c\u6765\u5b9e\u73b0\u3002\u800c\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u5f0f\u662f\u901a\u8fc7 Workflow \u5de5\u5177\u6765\u81ea\u52a8\u5316\u6570\u636e\u5206\u6790\u3002\u4e13\u95e8\u7684 Workflow \u8f6f\u4ef6\u6709\u8bb8\u591a\uff0c\u6709\u4e9b\u5e26GUI\uff08\u5982 galaxy \u5c31\u53ef\u4ee5\u5efa\u7acb\u56fe\u5f62\u5316\u7684 workflow\uff09\uff0c\u6709\u4e9b\u57fa\u4e8eCML\u3002\u5bf9\u4e8e\u5728\u670d\u52a1\u5668\u4e0a\u7684\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u662f\u4e22\u7ed9\u547d\u4ee4\u884c\u6765\u5b9e\u73b0\u3002Workflow \u56e0\u6b64\uff0c\u8fd9\u91cc\u4f7f\u7528\u57fa\u4e8e python \u7684 ruffus \u6765\u5efa\u7acb workflow\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u7b80\u5316\u5e73\u65f6\u5927\u91cf\u91cd\u590d\u7684\u5de5\u4f5c\u3002 \u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e workflow/pipeline \u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u67e5\u770b\u4ee5\u4e0b\u7f51\u7ad9\uff1a - common-workflow - awesome-pipeline 4.1 \u51c6\u5907\u6570\u636e \u00b6 not finished 5. \u5982\u4f55\u9009\u62e9 Reference \u00b6 \u5728\u505a\u5fae\u751f\u7269SNP calling\u65f6\uff0c\u9009\u62e9\u4e0d\u540creference\u5bf9\u7ed3\u679c\u662f\u5426\u4f1a\u6709\u5f71\u54cd\uff1f\u4f1a\u6709\u591a\u5927\u5f71\u54cd\uff1f\u8fd9\u662f\u5177\u4f53\u5206\u6790\u65f6\u9700\u8981\u8003\u8651\u7684\u95ee\u9898\u3002\u6709\u4e00\u4e9b \u6587\u7ae0 \u8fdb\u884c\u4e86\u8ba8\u8bba\u3002\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6eaf\u6e90\u65f6\uff0c\u7531\u4e8e\u83cc\u682a\u4e00\u822c\u662f\u9ad8\u5ea6\u8fd1\u6e90\u7684\uff0c\u6240\u4ee5\u5f71\u54cd\u4e0d\u5927\u3002\u5bf9\u4e8e\u505a\u8fdb\u5316\u5173\u7cfb\u5206\u6790\u7684\uff0c\u8fd8\u662f\u9700\u8981\u8003\u8651snp\u7684\u5047\u9633\u6027\u95ee\u9898\uff0c\u901a\u5e38\u662f\u8981\u5bf9snp\u505a filtering\u3002\u800c\u4e14\u5bf9\u4e8e\u4e0d\u540c\u7269\u79cd\u8003\u8651\u5176\u4ed6\u7684\u7a81\u53d8\u4e8b\u4ef6\u4e0e\u91cd\u7ec4\u5728\u8fdb\u5316\u4e0a\u7684\u5f71\u54cd\u3002 \u53e6\u4e00\u65b9\u9762\u4e0d\u540c\u8f6f\u4ef6\u7684\u6d41\u7a0b\u4e0e\u53c2\u6570\u4e0d\u540c\uff0c\u5bf9\u4e8e\u4e0d\u719f\u6089\u751f\u7269\u4fe1\u606f\u5b66\u7684\u751f\u7269\u5b66\u5bb6\u5f53\u4f7f\u7528 All in One \u4e4b\u7c7b\u7684\u5957\u4ef6\u5de5\u5177\u5206\u6790\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u4e0d\u540c\u8f6f\u4ef6\u7684\u7ed3\u679c\u4f1a\u6709\u4e0d\u5c0f\u7684\u5dee\u5f02\u3002\u56e0\u6b64\u8fd8\u662f\u8981\u4ece\u81ea\u5df1\u7814\u7a76\u7684\u7269\u79cd\u7279\u70b9\u89d2\u5ea6\u53bb\u9009\u62e9\u8f6f\u4ef6\uff0c\u6240\u4ee5\u8bf4\u6700\u597d\u5bf9\u4e8e\u8fd9\u7c7b\u5de5\u5177\u7684\u5177\u4f53\u7ec6\u8282\u9700\u8981\u8fdb\u884c\u4e86\u89e3\uff0c\u7279\u522b\u662f\u8f6f\u4ef6\u7684\u53c2\u6570\u3002\u90a3\u4e48\u5bf9\u4e8e\u6587\u6863\u4e0d\u5168\u6216\u8005\u4e0d\u591f\u4e30\u5bcc\u7684\u8f6f\u4ef6\u6765\u8bf4\uff0c\u5c31\u8981\u4ed4\u7ec6\u7814\u8bfb\u5b83\u7684\u6e90\u4ee3\u7801\u6765\u4e86\u89e3\u5176\u5b9e\u73b0\u65b9\u5f0f\uff0c\u8fd9\u4e5f\u5c31\u662f\u5b66\u4e60\u4e00\u4e9bshell\u3001python\u3001perl\u7b49\u8bed\u8a00\u7684\u539f\u56e0\u4e4b\u4e00\u4e86\u3002 6. \u53c2\u8003\u8d44\u6599 \u00b6 Jupyter Notebook for Pseudomonas Practical Seeking the source of Pseudomonas aeruginosa infections in a recently opened hospital: an observational study using whole-genome sequencing. Vcflib Git Repository Freebayes Git Repository Snippy VCF Document v4.1","title":"01. \u7ec6\u83ccSNP\u6eaf\u6e90\u5206\u6790\u4e00"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#snp","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u5229\u7528\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5bf9\u94dc\u7eff\u5047\u5355\u80de\u83cc( Pseudomonas aeruginosa )\u7684\u4e34\u5e8a\u5206\u79bb\u682a\u4e0e\u73af\u5883\u5206\u79bb\u682a\u5728\u57fa\u56e0\u7ec4\u6c34\u5e73\u4e0a\u8fdb\u884cSNP\u5206\u6790\uff0c\u4ece\u800c\u6eaf\u6e90\u83cc\u682a\u5e76\u505a\u8010\u836f\u5206\u6790\u3002 \u5185\u5bb9\u5b8c\u6210\u60c5\u51b5\uff1a 85% \u5206\u6790\u65b9\u6cd5 \uff1a \u5229\u7528 bwa \u5c06\u76ee\u6807\u57fa\u56e0\u7ec4 reads \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u7528 freebayes \u505a variant calling\uff0c\u83b7\u5f97\u5404\u4e2a\u6837\u672c\u7684 SNPs\uff0c\u6839\u636e\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u5206\u6790\u3002 \u5e94\u7528\u5de5\u5177 : bwa samtools freebayes vcffilter \u5b9e\u8df5\u610f\u4e49 \uff1a\u53ef\u4ee5\u4f5c\u4e3a\u4eca\u540e\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u83cc\u6eaf\u6e90\u5de5\u4f5c\u7684\u4e00\u4e2a\u6280\u672f\u6307\u5bfc\u4f9d\u636e\u3002","title":"\u94dc\u7eff\u5047\u5355\u80de\u83cc\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682aSNP\u6eaf\u6e90"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#1","text":"\u5de5\u4f5c\u6d41\u7a0b\u5c06\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u5bf9\u4e8e\u8fd9\u4e2a\u6848\u4f8b\u5f00\u5c55\u6570\u636e\u5206\u6790\uff1a \u6d4b\u5e8f\u8d28\u91cf: reads\u7684\u957f\u5ea6\uff0c\u63d2\u5165\u7247\u6bb5\u7684\u957f\u5ea6 \u5c06\u6d4b\u5e8f\u6570\u636e\u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4ST17 \u6bcf\u4e2a\u6837\u54c1reads\u7684\u5206\u5e03\u60c5\u51b5 \u6bcf\u4e2a\u6837\u54c1\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u8986\u76d6\u5ea6 \u4e0d\u540c\u6837\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u7279\u522b\u662f\u5f53\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fc7\u6ee4\u53c2\u6570\u65f6\u7684\u60c5\u51b5\uff1a Quality filter: QUAL > 100 Likelihood filter: QUAL / AO > 10 Variant frequency filter: AO / DP > 0.9 (90% allele frequency) \u54ea\u4e00\u4e2a\u6c34\u9f99\u5934\u6c34\u6837\u7684\u5206\u79bb\u682a\u6700\u6709\u53ef\u80fd\u662f\u611f\u67d3\u6e90\u3002(\u65b9\u6cd5: \u7528 vcfsamplediff \u6bd4\u8f83\u73af\u5883\u682a\u4e0e\u4e34\u5e8a\u682aSNPs\u6570\u91cf) 2\u4e2a\u75c5\u4eba\u5206\u79bb\u682a\u4e4b\u95f4\u4f7f\u7528\u4e86\u5927\u91cf\u7684\u6297\u751f\u7d20\u6cbb\u7597\uff0c\u54ea\u4e00\u4e2a\u83b7\u5f97\u3001\u5f97\u4e86\u8010\u836f\u6027\uff1f \u7528 joint calling \u6765\u6bd4\u8f832\u4e2a\u4e34\u5e8a\u6837\u54c1\u6570\u636e\uff0c\u5e76\u7528 vcfsamplediff \u5206\u6790 \u5bf9\u4e8e\u83b7\u5f97\u7684\u5927\u91cfSNPs\uff0c\u662f\u5426\u9700\u8981\u8fc7\u6ee4\u4ee5\u53ca\u5982\u4f55\u8fc7\u6ee4 \u4e86\u89e3SNPs\u7684\u5206\u5e03\u89c4\u5f8b \u91cd\u70b9\u67e5\u770bSNPs","title":"1. \u63d0\u51fa\u95ee\u9898"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#2","text":"","title":"2. \u5206\u6790\u6d41\u7a0b"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#21","text":"\u6570\u636e\u53ef\u4ee5\u4ece \u8fd9\u91cc \u4e0b\u8f7d\u83b7\u5f97\uff0c\u53ef\u4ee5\u7528 wget -m \u9012\u5f52\u4e0b\u8f7d\u8def\u5f84\u4e0b\u6240\u6709\u6587\u4ef6\u3002\u6587\u4ef6\u5305\u62ec\uff1a TAP1 - \u75c5\u623f1\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a TAP2 - \u75c5\u623f2\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a TAP3 - \u75c5\u623f3\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a PATIENT1 - \u670d\u7528\u6297\u751f\u7d20\u540e\u7684\u75c5\u4eba\u5206\u79bb\u682a PATIENT2 - \u4e00\u5468\u5185\u8fdb\u4e00\u6b65\u670d\u7528\u6297\u751f\u7d20\u7684\u75c5\u4eba\u5206\u79bb\u682a # \u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55\uff0c\u6570\u636e\u548c\u64cd\u4f5c\u5747\u5728\u91cc\u9762\u8fdb\u884c $ mkdir pae-case && cd pae-case # \u4e0b\u8f7d\u6570\u636e\u6587\u4ef6 $ wget -m http://www.microbesng.uk/filedist/pseudomonas-practical/ $ mv www.microbesng.uk/filedist/pseudomonas-practical/* . wget \u7684 -m \u53c2\u6570\u53ef\u4ee5\u9012\u5f52\u4e0b\u8f7d\u3002 Warning \u6570\u636e\u4e0b\u8f7d\u5730\u5740\u76ee\u524d\u5df2\u7ecf\u5931\u6548\uff01","title":"2.1 \u4e0b\u8f7d\u6570\u636e"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#22-st17","text":"\u8f6f\u4ef6\u4f7f\u7528 bwa \u6765\u5bf9\u53c2\u8003\u57fa\u56e0\u7ec4ST17\u5efa\u7acb\u7d22\u5f15\uff0c\u4ee5\u4fbf\u540e\u7eed\u6bd4\u5bf9\u3002 $ bwa index ST17.fasta","title":"2.2 \u5efa\u7acb ST17 \u578b\u53c2\u8003\u83cc\u682a\u7d22\u5f15"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#23-reads-st17","text":"\u7528 bwa mem \u8fdb\u884c\u6bd4\u5bf9\uff0c\u8f93\u51fa\u7684\u7ed3\u679c\u901a\u8fc7\u7ba1\u9053\u7531samtools\u8f6c\u6362\u6210BAM\u6587\u4ef6\u5e76\u8fdb\u884c\u6392\u5e8f\u548c\u7d22\u5f15 $ bwa mem -t 4 -R '@RG\\tID:TAP1\\tSM:TAP1' ST17.fasta \\ > TAP1_R1_paired.fastq.gz TAP1_R2_paired.fastq.gz | \\ > samtools view -bS - | samtools sort - TAP1.sorted $ samtools index TAP1.sorted.bam \u53c2\u6570\u4ecb\u7ecd -t 4: \u8868\u793a\u4f7f\u75284\u7ebf\u7a0b\uff0c\u6839\u636e\u81ea\u5df1\u7684\u8ba1\u7b97\u673aCPU\u8d44\u6e90\u8bbe\u7f6e\u3002 -R '...': \u8bbe\u7f6ereads\u7684ID\uff0c\\t\u4e3a\u5236\u8868\u7b26\u4f1a\u8f6c\u4e49\u6210tab\u952e\u3002 \u5bf9\u5176\u4ed62\u682a\u73af\u5883\u682a\u548c2\u682a\u4e34\u5e8a\u682a\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u3002","title":"2.3 \u5c06\u6d4b\u5e8f reads \u6bd4\u5bf9\u5230 ST17 \u5e76\u6392\u5e8f\u7d22\u5f15"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#24-reads","text":"bam\u6587\u4ef6\u542b\u6709\u6bd4\u5bf9\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528 stats \u53c2\u6570\u67e5\u770b $ samtools stats TAP1.sorted.bam | grep \"maximum length\" $ samtools stats TAP1.sorted.bam | grep \"insert size\" $ samtools stats TAP1.sorted.bam | grep \"^COV\" > TAP1.coverage.txt \u5c06\u622a\u53d6\u7684\u8986\u76d6\u5ea6\u76f8\u5173\u4fe1\u606f\u4fdd\u5b58\u6210 .txt \u6587\u4ef6\uff0c\u5728R\u91cc\u7528ggplot2\u7ed8\u5236\u8986\u76d6\u5ea6\u56fe\uff1a > library ( ggplot2 ) > cov = read.table ( \"TAP1.coverage.txt\" , sep = \"\\t\" ) > cov [ 1 ,] > ggplot ( cov , aes ( x = V3 , y = V4 )) + geom_bar ( stat = \"identity\" ) + xlab ( \"Coverage\" ) + ylab ( \"Count\" )","title":"2.4 \u7ed8\u5236\u6d4b\u5e8f reads \u7684\u8986\u76d6\u5ea6"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#25-1snps","text":"\u7528\u540c\u6837\u7684\u65b9\u6cd5\u5bf9\u5176\u4ed6\u51e0\u4e2a\u6837\u672c\u8fdb\u884c\u64cd\u4f5c\uff0c\u83b7\u5f97sorted\u7684bam\u683c\u5f0f\u6587\u4ef6\uff0c\u7528 freebayes \u5bf9\u4e34\u5e8a\u4e0e\u73af\u5883\u682a\u6bd4\u8f83\u83b7\u5f97vcf\u6587\u4ef6\u3002\u7136\u540e\u7528vcflib\u5de5\u5177\u8fc7\u6ee4 QUAL/AO>10 \u7684\u90e8\u5206(VCF\u5143\u6570\u636e\u90e8\u5206\u53ef\u4ee5\u53c2\u8003 \u6587\u6863 )\uff0c\u5e76\u7528 wc-l \u8ba1\u7b97\u884c\u6570\u7edf\u8ba1\u7ed3\u679c\u3002 $ freebayes -p 1 -C 5 -f ST17.fasta TAP1.sorted.bam PATIENT1.sorted.bam > compare_tap1.vcf $ vcffilter -f \"QUAL / AO > 10\" compare_tap1.vcf | vcffilter -f \"NS = 2\" | wc -l 6685 \u83b7\u5f97\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u4e4b\u95f4\u7684SNP\u5dee\u5f02\u6570\u91cf\uff0c\u7ed3\u679c\u8868\u660e\u8fd92\u682a\u4e4b\u95f4\u53ea\u67095\u4e2aSNPs\u3002 $ vcfsamplediff SAME TAP1 PATIENT1 compare_tap1.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" | grep -v \"^#\" | wc -l 5 \u7528 vcfsamplediff \u4e86\u89e3SNPs\u5dee\u5f02\u7684\u57fa\u56e0\uff0c\u53ef\u4ee5\u77e5\u9053\u662f\u90a3\u4e9bgene/CDS\u91cc\u9762\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u5b9a\u4f4d\u770b\u7a81\u53d8\u662f\u5426\u662f\u540c\u4e49\u7a81\u53d8\u3002\u5982\u679csnps\u6570\u91cf\u63a5\u8fd1\u65e0\u6cd5\u533a\u5206\uff0c\u4f46\u662f\u5b9a\u4f4d\u7684\u57fa\u56e0\u6709\u5dee\u5f02\uff0c\u90a3\u4e48\u83cc\u682a\u7684\u6eaf\u6e90\u8fd8\u9700\u8981\u8fdb\u4e00\u6b65\u8003\u8651\u3002 $ vcfsamplediff SAME PATIENT1 TAP1 compare_tap1.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > tap_differences.vcf $ bedtools intersect -a ST17.gff -b tap_differences.vcf | awk -F \";\" '{print NR, $2}' OFS = \"\\t\" \u7ed3\u679c\u8f93\u51fa\uff1a 1 gene = yfiR 2 inference = ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5 3 inference = ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5 4 gene = trbL 5 inference = ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_001349879.1,protein motif:Cdd:COG3481,protein motif:TIGRFAMs:TIGR03760,protein motif:Pfam:PF07514.5","title":"2.5 \u6bd4\u8f831\u53f7\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u7684SNPs\u5dee\u5f02"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#26-2","text":"\u4e86\u89e32\u4e2a\u4e34\u5e8a\u682a\u7684SNPs\u5dee\u5f02\uff0c\u5e76\u67e5\u770b\u8fd9\u4e9bSNPs\u6240\u5f71\u54cd\u7684gene $ freebayes --ploidy 1 -C 5 -f ST17.fasta PATIENT1.sorted.bam PATIENT2.sorted.bam > compare_patient.vcf ~$ vcfsamplediff SAME PATIENT1 TAP1 compare_patient.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > patient_differences.vcf $ bedtools intersect -a ST17.gff -b patient_differences.vcf | awk -F \";\" '{print $2}'","title":"2.6 2\u4e2a\u4e34\u5e8a\u682a\u7684\u8010\u836f\u53d8\u8fc1"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#3-snippy","text":"\u5927\u91cf\u7684\u65e5\u5e38\u5de5\u4f5c\u6216\u8005\u4e0d\u719f\u6089\u5404\u79cd\u547d\u4ee4\u884c\u5de5\u5177\u4f7f\u7528\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u66f4\u7b80\u4fbf\u7684\u8f6f\u4ef6\u6216\u8005pipelines\u6765\u5e2e\u52a9\u5b8c\u6210\u6574\u4e2a\u5206\u6790\u5de5\u4f5c\u3002\u56e0\u6b64\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 snippy \u6765\u5b9e\u73b0\u5206\u6790SNPs\uff0c\u5e76\u7ed8\u5236\u57fa\u4e8esnps\u7684\u8fdb\u5316\u6811\u3002","title":"3. \u7528 Snippy \u6765\u5b9e\u73b0"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#31-snippy","text":"Snippy\u662f\u6bd4\u8f83\u9002\u5408\u65b0\u624b\u7684\u5de5\u5177\uff0c\u5b83\u63d0\u4f9b\u4e86All in One\u7684\u5de5\u5177\u5957\u88c5\u3002\u867d\u7136Snippy\u9700\u8981\u4ee5\u4e0b\u8f6f\u4ef6\u652f\u6301\uff1a Perl >= 5.6 BioPerl >= 1.6 bwa mem >= 0.7.12 samtools >= 1.1 GNU parallel > 2013xxxx freebayes >= 0.9.20 freebayes sripts ( freebayes-parallel,fasta_generate_regions.py) vcflib (vcffilter, vcfstreamsort, vcfuniq, vcffirstheader) vcftools (vcf-consensus) snpEff >= 4.1 \u4f46\u8fd9\u4e9b\u5de5\u5177\u5728Snippy\u5b89\u88c5\u5305\u91cc\u90fd\u5df2\u7ecf\u63d0\u4f9b\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u7cfb\u7edf\u8bbe\u7f6e\u5c06\u4ee5\u6765\u5de5\u5177\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\u53bb\u5373\u53ef\u3002\u5bf9\u4e8eperl\u7684\u4e00\u4e9b\u6a21\u5757\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u540e\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\uff1a sudo cpan -u module_name $ wget https://github.com/tseemann/snippy/archive/v2.9.tar.gz $ tar xzf v2.9.tar.gz -C ~/app $ echo \"export PATH= $PATH : $HOME /app/snippy-2.9/bin: $HOME /app/snippy-2.9/binaries/linux/\" >> /.bashrc $ source ~/.bashrc # update all perl module $ sudo cpan -u","title":"3.1 \u5b89\u88c5 Snippy"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#32-snippy","text":"Snippy \u4e0d\u4ec5\u53ef\u4ee5\u83b7\u5f97SNP(\u5305\u62ecMultiSNP)\uff0c\u4e5f\u53ef\u4ee5\u83b7\u5f97insertion, indeletion\u4ee5\u53caComibination\u3002\u6587\u672c\u683c\u5f0f\u7684\u7ed3\u679c\u8bb0\u5f55\u6587\u4ef6\u4e2d\u7684snps.tab\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7528\u6d4f\u89c8\u5668\u6253\u5f00snps.html\u67e5\u770b\u3002 $ snippy --cpus 4 --outdir output1 --ref ST17.fasta \\ > --R1 TAP1_R1_paired.fastq.gz --R2 TAP1_R2_paired.fastq.gz $ head output/snps.tab # snps.txt\u5bf9\u5404\u79cd\u7a81\u53d8\u4f4d\u70b9\u505a\u4e00\u4e2a\u6570\u636e\u7edf\u8ba1 $ cat output1/snps.txt ... Software snippy 2 .9 Variant-COMPLEX 1124 Variant-DEL 27 Variant-INS 43 Variant-MNP 222 Variant-SNP 3351 VariantTotal 4767 # \u8ba1\u7b97\u4e0d\u540c # \u4e86\u89e3\u4e0d\u540c\u78b1\u57fa\u7684SNP\u53d8\u5316\u6570\u91cf\uff0c\u5982T->C\u7684SNP\u6570\u91cf $ awk '$10==\"T=>C\" {n++} END{print n}' output1/snps.gff Snippy\u8fd8\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u57fa\u56e0\u7ec4\u7684\u5171\u6709SNPs\u7684\u6bd4\u5bf9\u6587\u4ef6\u3002\u7528snippy\u5206\u522b\u751f\u62103\u4e2aTAP\u7684snp\u5217\u8868\u6570\u636e\u5230ouput*\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u7edf\u8ba1\u5171\u6709snps\u6570\u91cf\u5e76\u751f\u6210snp\u5e8f\u5217\u6587\u4ef6aln\u3002 # for old ubuntu system you need update outdated perl module List::Util $ sudo cpan -u List::Util $ snippy-core --prefix core output1 output2 output3 ... Found 30711 core SNPs from 42075 variant sites. Saved SNP table: core.tab Constructing alignment object for core.aln ... \u5982\u679c\u8981\u7528raxml\u6784\u5efa\u8fdb\u5316\u6811\uff0c\u90a3\u83b7\u5f97\u7684.aln\u6587\u4ef6\u8fd8\u9700\u8981\u8f6c\u6362\u6210.phy\u624d\u53ef\u4ee5\u4f7f\u7528\u3002\u5f88\u591a\u5de5\u5177\u53ef\u4ee5\u5b9e\u73b0\u8f6c\u6362\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u670d\u52a1\u6765\u5b9e\u73b0\uff1a http://sing.ei.uvigo.es/ALTER/ # RAxML \u6784\u5efa\u8fdb\u5316\u6811 $ raxmlHPC -f a -x 12345 -p 12345 -# 100 -m GTRGAMMA -s core.phy -n pae -T 40 $ figtree RAxML_bestTree.pae \u751f\u6210\u7684\u8fdb\u5316\u6811\u56fe\u7c7b\u4f3c\u4e0b\u56fe \u56e0\u4e3a\u6bd4\u5bf9\u7684\u662ffasta\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6240\u4ee5snps\u4e0d\u6b62\u662f\u7f16\u7801\u533aCDS\u7684\uff0c\u800c\u662f\u6574\u4e2a\u57fa\u56e0\u7ec4\u4e0a\u7684snps\u3002","title":"3.2 \u4f7f\u7528 Snippy"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#4-workflow","text":"\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5e73\u65f6\u4f1a\u6709\u8bb8\u591a\u7c7b\u4f3c\u7684SNP\u9274\u5b9a\u5de5\u4f5c\uff0c\u90a3\u4e48\u4e0b\u673a\u6570\u636e\u8981\u4e00\u4e2a\u4e2a\u64cd\u4f5c\u4f1a\u5f88\u7e41\u7410\uff0c\u6709\u65f6\u5019\u6211\u4eec\u901a\u8fc7 unix \u7684 pipeline \u6765\u7b80\u5316\u6216\u8005\u5199 pipeline \u811a\u672c\u6765\u5b9e\u73b0\u3002\u800c\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u5f0f\u662f\u901a\u8fc7 Workflow \u5de5\u5177\u6765\u81ea\u52a8\u5316\u6570\u636e\u5206\u6790\u3002\u4e13\u95e8\u7684 Workflow \u8f6f\u4ef6\u6709\u8bb8\u591a\uff0c\u6709\u4e9b\u5e26GUI\uff08\u5982 galaxy \u5c31\u53ef\u4ee5\u5efa\u7acb\u56fe\u5f62\u5316\u7684 workflow\uff09\uff0c\u6709\u4e9b\u57fa\u4e8eCML\u3002\u5bf9\u4e8e\u5728\u670d\u52a1\u5668\u4e0a\u7684\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u662f\u4e22\u7ed9\u547d\u4ee4\u884c\u6765\u5b9e\u73b0\u3002Workflow \u56e0\u6b64\uff0c\u8fd9\u91cc\u4f7f\u7528\u57fa\u4e8e python \u7684 ruffus \u6765\u5efa\u7acb workflow\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u7b80\u5316\u5e73\u65f6\u5927\u91cf\u91cd\u590d\u7684\u5de5\u4f5c\u3002 \u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e workflow/pipeline \u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u67e5\u770b\u4ee5\u4e0b\u7f51\u7ad9\uff1a - common-workflow - awesome-pipeline","title":"4. \u7528 Workflow \u811a\u672c\u6765\u7b80\u5316\u64cd\u4f5c"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#41","text":"not finished","title":"4.1 \u51c6\u5907\u6570\u636e"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#5-reference","text":"\u5728\u505a\u5fae\u751f\u7269SNP calling\u65f6\uff0c\u9009\u62e9\u4e0d\u540creference\u5bf9\u7ed3\u679c\u662f\u5426\u4f1a\u6709\u5f71\u54cd\uff1f\u4f1a\u6709\u591a\u5927\u5f71\u54cd\uff1f\u8fd9\u662f\u5177\u4f53\u5206\u6790\u65f6\u9700\u8981\u8003\u8651\u7684\u95ee\u9898\u3002\u6709\u4e00\u4e9b \u6587\u7ae0 \u8fdb\u884c\u4e86\u8ba8\u8bba\u3002\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6eaf\u6e90\u65f6\uff0c\u7531\u4e8e\u83cc\u682a\u4e00\u822c\u662f\u9ad8\u5ea6\u8fd1\u6e90\u7684\uff0c\u6240\u4ee5\u5f71\u54cd\u4e0d\u5927\u3002\u5bf9\u4e8e\u505a\u8fdb\u5316\u5173\u7cfb\u5206\u6790\u7684\uff0c\u8fd8\u662f\u9700\u8981\u8003\u8651snp\u7684\u5047\u9633\u6027\u95ee\u9898\uff0c\u901a\u5e38\u662f\u8981\u5bf9snp\u505a filtering\u3002\u800c\u4e14\u5bf9\u4e8e\u4e0d\u540c\u7269\u79cd\u8003\u8651\u5176\u4ed6\u7684\u7a81\u53d8\u4e8b\u4ef6\u4e0e\u91cd\u7ec4\u5728\u8fdb\u5316\u4e0a\u7684\u5f71\u54cd\u3002 \u53e6\u4e00\u65b9\u9762\u4e0d\u540c\u8f6f\u4ef6\u7684\u6d41\u7a0b\u4e0e\u53c2\u6570\u4e0d\u540c\uff0c\u5bf9\u4e8e\u4e0d\u719f\u6089\u751f\u7269\u4fe1\u606f\u5b66\u7684\u751f\u7269\u5b66\u5bb6\u5f53\u4f7f\u7528 All in One \u4e4b\u7c7b\u7684\u5957\u4ef6\u5de5\u5177\u5206\u6790\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u4e0d\u540c\u8f6f\u4ef6\u7684\u7ed3\u679c\u4f1a\u6709\u4e0d\u5c0f\u7684\u5dee\u5f02\u3002\u56e0\u6b64\u8fd8\u662f\u8981\u4ece\u81ea\u5df1\u7814\u7a76\u7684\u7269\u79cd\u7279\u70b9\u89d2\u5ea6\u53bb\u9009\u62e9\u8f6f\u4ef6\uff0c\u6240\u4ee5\u8bf4\u6700\u597d\u5bf9\u4e8e\u8fd9\u7c7b\u5de5\u5177\u7684\u5177\u4f53\u7ec6\u8282\u9700\u8981\u8fdb\u884c\u4e86\u89e3\uff0c\u7279\u522b\u662f\u8f6f\u4ef6\u7684\u53c2\u6570\u3002\u90a3\u4e48\u5bf9\u4e8e\u6587\u6863\u4e0d\u5168\u6216\u8005\u4e0d\u591f\u4e30\u5bcc\u7684\u8f6f\u4ef6\u6765\u8bf4\uff0c\u5c31\u8981\u4ed4\u7ec6\u7814\u8bfb\u5b83\u7684\u6e90\u4ee3\u7801\u6765\u4e86\u89e3\u5176\u5b9e\u73b0\u65b9\u5f0f\uff0c\u8fd9\u4e5f\u5c31\u662f\u5b66\u4e60\u4e00\u4e9bshell\u3001python\u3001perl\u7b49\u8bed\u8a00\u7684\u539f\u56e0\u4e4b\u4e00\u4e86\u3002","title":"5. \u5982\u4f55\u9009\u62e9 Reference"},{"location":"book/C18_Analysis-Examples/01_trace-Pae-from-different-source-by-SNP/#6","text":"Jupyter Notebook for Pseudomonas Practical Seeking the source of Pseudomonas aeruginosa infections in a recently opened hospital: an observational study using whole-genome sequencing. Vcflib Git Repository Freebayes Git Repository Snippy VCF Document v4.1","title":"6. \u53c2\u8003\u8d44\u6599"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/","text":"\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4 SNPs \u5206\u6790 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4e3b\u8981\u901a\u8fc7\u6784\u5efa\u76f8\u5e94\u7684\u5206\u6790\u6d41\u7a0b\uff0c\u83b7\u5f97\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u83cc\u682a\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u7b2c\u4e00\u65f6\u95f4\u5c31\u8fdb\u884c\u6eaf\u6e90\u65b9\u9762\u7684\u7814\u7a76\u3002\u5c06\u8fd9\u4e2a\u5de5\u4f5c\u7684\u8fc7\u7a0b\u5efa\u7acb\u6587\u6863\u4fdd\u5b58\u3002\u5206\u6790\u6d41\u7a0b\u7c97\u7565\u7b80\u5355\uff0c\u4e3b\u8981\u76ee\u7684\u4e5f\u662f\u4e3a\u5b9e\u9a8c\u5ba4\u5185\u90e8\u6559\u5b66\uff0c\u5e0c\u671b\u80fd\u505a\u5230\u4e3e\u4e00\u53cd\u4e09\uff0c\u7ed9\u5176\u4ed6\u7ec6\u83cc\u6027\u75c5\u539f\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6eaf\u6e90\u5206\u6790\u7814\u7a76\u63d0\u4f9b\u5e2e\u52a9\u3002 \u505a\u4e3a\u75be\u63a7\u4e2d\u5fc3\u7684\u5b9e\u9a8c\u5ba4\uff0c\u5bf9\u751f\u7269\u6050\u6016\u4e8b\u4ef6\u7684\u9632\u63a7\u548c\u5e94\u5bf9\u5904\u7f6e\u80fd\u529b\u662f\u5e94\u6025\u5de5\u4f5c\u80fd\u529b\u7684\u91cd\u8981\u7ec4\u6210\u4e4b\u4e00\u3002\u800c\u7ec6\u83cc\u6027\u751f\u7269\u6050\u6016\u6218\u5242\u4e2d\u6700\u8457\u540d\u7684\u5c31\u662f\u542b\u6709\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u767d\u8272\u7c89\u672b\u3002\u505a\u4e3a\u57fa\u5c42\u5b9e\u9a8c\u5ba4\uff0c\u56e0\u4e3a\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u63a5\u89e6\u5230\u8fd9\u4e9b\u6837\u54c1\u548c\u75c5\u539f\u7684\u673a\u4f1a\u5fae\u4e4e\u5176\u5fae\uff0c\u6240\u4ee5\u7ecf\u9a8c\u548c\u6280\u80fd\u65b9\u9762\u8f83\u4e3a\u7f3a\u4e4f\u3002\u901a\u8fc7\u5e73\u65f6\u52a0\u5f3a\u76f8\u5173\u9879\u76ee\u7684\u5e94\u6025\u6f14\u7ec3\u5916\uff0c\u5b9e\u9a8c\u5ba4\u5feb\u901f\u5206\u6790\u548c\u6eaf\u6e90\u5de5\u4f5c\u9700\u8981\u505a\u597d\u80fd\u529b\u50a8\u5907\uff0c\u56e0\u6b64\u5b9e\u9a8c\u5ba4\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u57fa\u56e0\u7ec4\u6570\u636e\u8fdb\u884c\u4e86\u57fa\u672c\u5206\u6790\uff0c\u5bf9\u76f8\u5173\u8d44\u6599\u548c\u4fe1\u606f\u8fdb\u884c\u4e86\u50a8\u5907\u3002 \u8f6f\u4ef6\u4e2d\u4f7f\u7528\u7684\u4e00\u4e9b\u53c2\u6570\u662f\u6839\u636e\u81ea\u5df1\u7684\u670d\u52a1\u5668\u8bbe\u7f6e\u7684\uff0c\u5177\u4f53\u8fd0\u884c\u65f6\u9700\u8981\u6839\u636e\u8ba1\u7b97\u673a\u914d\u7f6e\u8fdb\u884c\u76f8\u5e94\u7684\u8c03\u6574\u3002 \u670d\u52a1\u5668\u914d\u7f6e CPU: E3 2650v3 x2 Memory: ECC 16G x8 Harddisk: 7200\u8f6c 1T x4 \u7ec4 Raid 5 + 1 Hotspare System: Ubuntu 16.04 LTS 64bit 1. \u83b7\u53d6\u516c\u5171\u6570\u636e\u5e93\u6570\u636e \u00b6 \u6570\u636e\u91c7\u7528 NCBI SRA \u6570\u636e\u5e93\u4e2d\u7684\u516c\u5171\u6570\u636e\u6765\u4f5c\u5206\u6790\u3002\u9996\u5148\u68c0\u7d22 NCBI SRA \u6570\u636e\u5e93\u4e2d\u6240\u6709\u4f7f\u7528 illumina \u5e73\u53f0\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4\u8fdb\u884c PE \u6d4b\u5e8f\u7684 \u5927\u4e8e 100M \u7684 NGS \u6570\u636e\uff0c\u5e76\u5728\u4e0b\u8f7d\u8fd9\u4e9b sra \u6570\u636e\u540e\u8f6c\u6362\u6210 fastq.gz \u683c\u5f0f\u3002\u4f7f\u7528\u7684\u5de5\u5177\u4e3b\u8981\u4e3a edirect \u548c sra-tools \u3002 1.1 \u4e0b\u8f7d sra \u00b6 # \u4e0b\u8f7d\u70ad\u75bd\u82bd\u80de\u6746\u83cc SRA \u53cc\u672b\u7aef\u6d4b\u5e8f\u6570\u636e $ esearch -db sra -query '\"Bacillus anthracis\"[Organism] AND \\ > (Hiseq[ALL] OR Miseq[ALL]) AND \"strategy wgs\"[Properties] AND paired[ALL]' | \\ > efetch -db sra -format runinfo | grep '^[DSE]RR*' | \\ > awk -F ',' '{if($5>100000000) print $1}' | sort -n | \\ > xargs fastq-dump --split-files --gzip --outdir bacillus_anthracis \u4e0a\u9762\u7684\u547d\u4ee4\u4f1a\u76f4\u63a5\u8c03\u7528 fastq-dump \u4e0b\u8f7d\u6570\u636e\u5230 --outdir \u4e2d\u3002\u867d\u7136\u6211\u4eec\u7528\u4e86 grep PAIRED \u6765\u533a\u5206\u4e0d\u540c\u7684\u6d4b\u5e8f\u65b9\u5f0f\uff0c\u4f46\u662f\u7531\u4e8e\u4fe1\u606f\u662f\u63d0\u4ea4\u8005\u4e0a\u4f20\u7684\uff0c\u53ef\u80fd\u4fe1\u606f\u4e0d\u4e00\u5b9a\u662f\u6b63\u786e\u7684\u3002\u7531\u4e8e\u540e\u9762\u7684\u6d41\u7a0b\u4e2d\u7275\u6d89\u5230\u7ec4\u88c5\u548c\u6bd4\u5bf9\u7b49\u64cd\u4f5c\uff0cPE/SE\u7684\u65b9\u5f0f\u4f1a\u6709\u533a\u522b\uff0c\u6700\u597d\u8fd8\u662f\u8fdb\u884c\u9a8c\u8bc1\u540e\u518d\u4e0b\u8f7d\uff0c\u6216\u8005\u5c06PE/SE\u7684\u6570\u636e\u533a\u5206\u5b58\u653e\u3002 # \u5148\u751f\u6210\u6570\u636e\u8bb0\u5f55 $ esearch -db sra -query '\"Bacillus anthracis\"[Organism] AND \\ > (Hiseq[ALL] OR Miseq[ALL]) AND \"strategy wgs\"[Properties]' | \\ > efetch -db sra -format runinfo | grep 'PAIRED' | grep '^[DSE]RR*' | \\ > awk -F ',' '{if($5>100000000) print $1}' | sort -n > ban-sra.txt # \u4e0b\u8f7d sra $ cat ban-sra.txt | xargs prefetch \u8fd9\u6837\u4f1a\u4e0b\u8f7d sra \u6587\u4ef6\u5230\u9ed8\u8ba4\u76ee\u5f55(~/.ncbi/public/sra)\uff0c\u7136\u540e\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u6765\u533a\u5206\u4e0b\u8f7d\u7684\u6570\u636e\u5230\u5e95\u662fPE\u8fd8\u662fSE\u6d4b\u5e8f\u3002 1.2 \u533a\u5206 PE/SE \u6570\u636e \u00b6 \u867d\u7136\u6211\u4eec\u68c0\u7d22\u65f6\u9650\u5b9a\u4e86 PE \u6d4b\u5e8f\u6570\u636e\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6570\u636e\u5e93\u91cc\u7684\u4fe1\u606f\u4e0d\u51c6\u786e\uff0c\u8fd8\u662f\u4f1a\u6709\u5f88\u591a SE \u7684\u6570\u636e\u4f1a\u88ab\u4e0b\u8f7d\u3002\u786e\u5b9a PE \u6216\u8005 SE \u7684\u65b9\u6cd5\u5f88\u591a\u3002 # sra-stat \u7edf\u8ba1 sra \u6587\u4ef6\uff0cnreads=1 \u8868\u793a SE \u6d4b\u5e8f\uff0cnreads=2 \u8868\u793a PE \u6d4b\u5e8f\u3002-e 2 \u53ea\u7edf\u8ba1\u524d2\u4e2aspot\uff0c\u5982\u679c\u53bb\u6389-e\u53c2\u6570\uff0c\u7a0b\u5e8f\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162 $ for i in *.sra ; do echo $i ` sra-stat -xs -e 2 $i | grep \"nreads\" ` ; done # \u6279\u91cf\u5220\u9664 $ parallel 'sra-stat -xs -e 2' ::: *.sra | xtract -Pattern Run -element Run@accession \\ > Statistics@nreads | awk '{if($2==1) print $1}' | xargs rm sra-stat \u5de5\u5177\u53ef\u4ee5\u63d0\u53d6 sra \u6587\u4ef6\u7684\u6d4b\u5e8f\u76f8\u5173\u4fe1\u606f\u3002 -xs \u53c2\u6570\u751f\u6210 xml \u683c\u5f0f\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\u91cc\u9762\u5c5e\u6027\u503c nreads \u53ef\u4ee5\u8868\u793a\u91c7\u7528\u7684\u662f\u54ea\u4e00\u79cd\u6d4b\u5e8f\u65b9\u5f0f\u3002\u5982\u679c spot-id \u662f\u89c4\u5219\u6392\u5217\uff0c\u90a3\u4e48\u53ef\u4ee5\u6dfb\u52a0 -e 2 \u6700\u5feb\u65f6\u95f4\u83b7\u5f97\u7ed3\u679c\u3002 parallel \u5de5\u5177\u6765\u5e76\u884c\u5316\u5904\u7406 sra-stat \uff0c\u5982\u679c\u8ba1\u7b97\u91cf\u5927\u662f\u5f88\u597d\u7684\u5229\u7528\u591a\u6838CPU\u5904\u7406\u7ec8\u7aef\u547d\u4ee4\u7684\u65b9\u6cd5\u3002 # fastq-dump \u8f93\u51fa\u4e00\u4e2a reads\uff0c\u8ba1\u7b97\u884c\u6570\u5982\u679c\u662f4\uff0c\u90a3\u4e48\u5c31\u662f SE\uff0c\u5982\u679c\u662f8,\u5219\u662f PE $ fastq-dump -X 1 --split-spot -Z SRR955386.sra | wc -l # \u5229\u7528 -A \u53c2\u6570\u8fdc\u7a0b\u83b7\u5f97\u7ed3\u679c $ fastq-dump -X1 --split-spot -Z -L 5 -A SRR955386 # fastq-dump \u81ea\u5df1\u5224\u65ad\uff0c\u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump \u53ea\u80fd\u751f\u62101\u4e2a *_1.fastq \u6587\u4ef6 $ fastq-dump --split-files ERR493452.sra # fastq-dump \u53ea\u80fd\u8c03\u7528\u5355\u6838\u8f6c\u6362\uff0c\u53ef\u4ee5\u4f7f\u7528 parallel \u5de5\u5177\u5e76\u884c\u5904\u7406\u52a0\u5feb\u901f\u5ea6\u3002 $ parallel \"fastq-dump --split-files --gzip --outdir bacillus_anthracis\" ::: *.sra \u53e6\u5916\u4e00\u79cd\u83b7\u5f97\u662f PE/SE \u7684\u65b9\u6cd5\u662f\u7528 fastq-dump \u6765\u8bfb\u53d6\u51fa\u76f8\u540c spot-id \u7684 reads \u518d\u8ba1\u7b97\u884c\u6570\u3002 -X \u8868\u793a\u6700\u591a\u8bfb\u53d6\u7684 spot-id \u6570\u91cf\uff1b --split-spot \u533a\u5206spot\u5230reads\u7136\u540e\u7528 -Z \u8f93\u51fa\uff0c\u518d wc -l \u7edf\u8ba1\u884c\u6570\u3002 \u6709\u65f6\u5019\u6709\u4e9bsra\u6587\u4ef6\u5728 dump \u65f6\u4f1a\u51fa\u9519\uff0c\u4e0d\u80fd\u751f\u6210\u5bf9\u5e94\u7684 PE fastq \u6587\u4ef6\uff0c\u8fd9\u5c31\u9700\u8981\u6bd4\u8f83\u540e\u5220\u9664\u4e86\u3002\u5982\u679c\u662f mate pair \u7684\u6570\u636e\uff0c\u4f1a\u751f\u6210 *_3.fastq.gz \uff0c\u5982\u679c\u4e0d\u9700\u8981\u5219\u53ef\u624b\u5de5\u5220\u9664\u3002 1.3 \u9a8c\u8bc1 fastq.gz \u6587\u4ef6\u540d\u7684\u4e00\u81f4\u6027 \u00b6 fastq-dump \u6279\u91cf\u751f\u6210 fastq \u6570\u636e\u540e\uff0c\u6709\u65f6\u56e0\u4e3a\u5404\u79cd\u539f\u56e0\uff0c\u8fd8\u662f\u4f1a dump \u51fa\u975e PE \u7c7b\u578b\u7684 *._1 \u548c *._2 \u547d\u540d\u98ce\u683c\u76842\u4e2aPE\u6570\u636e\u6587\u4ef6\u3002\u6587\u4ef6\u91cf\u5927\u65f6\u901a\u8fc7\u8089\u773c\u5f88\u96be\u5224\u65ad\u3002 # \u6838\u5bf9 PE \u53cc\u7aef\u6d4b\u5e8f\u6587\u4ef6\u662f\u5426\u4e00\u81f4 $ ls -l *_1.fastq.gz | awk '{print $9}' | awk -F '_' '{print $1}' > R1.txt $ ls -l *_2.fastq.gz | awk '{print $9}' | awk -F '_' '{print $1}' > R2.txt $ diff R1.txt R2.txt \u901a\u8fc7 diff \u5de5\u5177\u6bd4\u8f83\uff0c\u5982\u679c2\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e00\u81f4\uff0c\u5219\u7ec8\u7aef\u4e0d\u4f1a\u6709\u8f93\u51fa\u3002\u5426\u5219\u5c31\u8981\u5220\u9664\u5dee\u5f02\u7684\u90a3\u4e2a\u6587\u4ef6\u4e86\u3002 2. \u6570\u636e\u7684\u524d\u671f\u5904\u7406 \u00b6 \u7531\u4e8e\u662f\u516c\u5171\u6570\u636e\u5e93\u4e0b\u8f7d\u7684\u6570\u636e\uff0c\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6d4b\u5e8f\u5b9e\u9a8c\u8d28\u91cf\u6216\u8005\u6570\u636e\u63d0\u4ea4\u8005\u662f\u5426\u63d0\u4ea4\u7684\u662f\u8d28\u63a7\u540e\u7684\u6570\u636e\u3002\u56e0\u6b64\u5efa\u8bae\u8981\u5bf9\u6570\u636e\u505a\u4e00\u4e9b\u524d\u671f\u7684\u8d28\u63a7\u5904\u7406\u3002 2.1 \u6570\u636e QC \u00b6 \u9996\u5148\u5bf9\u57fa\u56e0\u7ec4 GC \u542b\u91cf\u548c Q \u503c\u8fdb\u884c\u521d\u6b65\u7b5b\u9009\uff0c\u5bf9\u4e8e\u504f\u5dee\u8f83\u5927\u7684\u6570\u636e\u8003\u8651\u76f4\u63a5\u5254\u9664\uff08\u6216\u8005\u7528\u5176\u4ed6\u8f6f\u4ef6\u9a8c\u8bc1\u770b\u662f\u5426\u662f\u9519\u8bef\u7269\u79cd\uff09\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u4e3a bioawk \u6216 parallel \u3002 # \u56e0\u4e3a reads \u8986\u76d6\u5ea6\u53ef\u80fd\u5e76\u4e0d\u5747\u4e00\uff0c\u9ad8\u8986\u76d6\u5ea6\u7684\u533a\u57df GC \u542b\u91cf\u6bd4\u91cd\u4f1a\u7565\u9ad8\u3002\u4f46\u662f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6b63\u5e38\u6d4b\u5e8f\u7684\u57fa\u56e0\u7ec4\u8fd9\u79cd\u533a\u57df\u76f8\u5bf9\u6765\u8bf4\u4e0d\u591a\uff0c\u5e73\u5747\u5230\u57fa\u56e0\u7ec4\u540e\u4f1a\u6574\u4f53 GC \u542b\u91cf\u5f71\u54cd\u4e0d\u5927\u3002 $ for i in *.fastq.gz ; do bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc($seq);q+=meanqual($seq)}END{print $name,n/NR,q/NR}' $i >> result.txt ; done # awk \u7c7b\u5de5\u5177\u662f\u5355\u8fdb\u7a0b\u7684\uff0c\u4e3a\u4e86\u52a0\u901f\u53ef\u4ee5\u4f7f\u7528 parallel \u6765\u5e76\u884c\u8ba1\u7b97 $ parallel \"bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc(\\$seq);q+=meanqual(\\$seq)}END{print \\$name,n/NR,q/NR}' >> result.txt\" ::: *.fastq.gz # \u6309\u7167 GC \u542b\u91cf\u6392\u5e8f $ cat result.txt | sort -n -k3 R \u7ed8\u5236 gc \u5206\u5e03\u56fe\uff0c\u5982\u679c gc \u542b\u91cf\u504f\u5dee\u8d85\u8fc7 10% \u65f6\u5c31\u5254\u9664\u8be5\u57fa\u56e0\u7ec4\u6570\u636e\u3002 > library ( ggplot2 ) > data <- read.table ( \"result.txt\" ) > qplot ( v2 , v3 , data = data ) \u7ed3\u679c\u663e\u793a\u6709\u4e00\u4e2a\u9ed1\u70b9\u7684GC\u542b\u91cf\u7279\u522b\u4f4e\uff0c\u4e14Q\u503c\u7279\u522b\u9ad8\u3002\u7ed3\u679c\u663e\u793a\u6d4b\u5e8f\u5b9e\u9a8c SRR2155551 \u548c SRR2164197 \u7684 GC \u542b\u91cf\u4ec5\u4e3a22%\uff0c\u800c\u5176\u4ed6\u6837\u672c GC \u542b\u91cf\u8303\u56f4\u572834%\uff5e41%\u3002\u4e14\u8fd92\u4e2a\u5b9e\u9a8c\u7684\u6837\u672c\u5747\u4e3a\u540c\u4e00\u4e2a\uff0c\u662f1\u4e2a\u6837\u672c\u76842\u6b64\u6d4b\u5e8f\uff08\u6216\u8005\u6570\u636e\u4e0a\u4f20\u4e862\u6b21\uff09\uff0c\u56e0\u6b64\u5c06\u5176\u5254\u9664\u3002 2.2 \u53bb\u9664\u63a5\u5934 \u00b6 \u5176\u6b21\u8981\u53bb\u9664\u63a5\u5934\u7684\u6c61\u67d3\u3002\u56e0\u4e3a\u5206\u6790\u6d41\u7a0b\u4e2d\u4e0d\u4ec5\u5305\u62ec mapping \u7684\u65b9\u5f0f\uff0c\u8fd8\u5305\u542b de novo assembly\uff0c\u4e3a\u4e86\u907f\u514d\u63a5\u5934\u5e8f\u5217\u5bf9\u57fa\u56e0\u7ec4\u62fc\u63a5\u7684\u5f71\u54cd\uff0c\u8fd9\u91cc\u6700\u597d\u8fdb\u884c\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u662f FastQC \u548c fadapa # \u4f7f\u7528\u811a\u672c scan_adaptors.py \u6765\u626b\u63cf\u4e0b\u8f7d\u7684\u9ad8\u901a\u91cf\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u662f\u5426\u6709\u63a5\u5934\u6c61\u67d3\u7684\u60c5\u51b5\u3002 $ fastqc -t 40 -q --extract *.fastq.gz $ python scan_fastqc_report.py -d qc \u63a5\u5934\u53bb\u9664\u8f6f\u4ef6\u5f88\u591a\uff0c\u4f46\u662f\u8981\u81ea\u52a8\u5224\u65ad\u5e76\u4e14\u6279\u91cf\u5904\u7406\u6700\u597d\u81ea\u5df1\u5199\u811a\u672c\u6bd4\u8f83\u65b9\u4fbf\u3002\u8fd9\u91cc\u7528 python \u5199\u4e00\u4e2a\u6279\u91cf\u79fb\u9664\u7684\u811a\u672c\u3002 #!usr/bin/env python # -*- coding: utf-8 -*- # scripts name: scan_fastqc_report.py import os from Bio.Seq import Seq from Bio import SeqIO from Bio.SeqRecord import SeqRecord from Bio.Alphabet import generic_nucleotide from fadapa import Fadapa import argparse parser = argparse . ArgumentParser () parser . add_argument ( '-i' , '--input' , action = 'store' , dest = 'qcfile' , type = str , help = \"fastqc extract data file\" ) parser . add_argument ( '-o' , '--output' , action = 'store' , dest = 'adaptor' , type = str , help = \"adaptors file\" ) args = parser . parse_args () qc_file = Fadapa ( args . qcfile ) if qc_file . summary ()[ - 3 ][ 0 ] == 'fail' : adaptors = [] ors = qc_file . clean_data ( \"Overrepresented sequences\" ) ors . pop ( 0 ) for ( index , seq ) in enumerate ( ors ): if 'NNNNNN' in seq [ 0 ]: continue adaptors . append ( SeqRecord ( Seq ( seq [ 0 ], generic_nucleotide ), id = \"adaptor_ %d \" % ( index + 1 ))) if not os . path . exists ( args . adaptor ): os . makedirs ( args . adaptor ) SeqIO . write ( adaptors , \" %s /adaptor.fasta\" % args . adaptor , \"fasta\" ) print \"Overrepresented sequences has been save to adaptors.fasta\" else : print \"No Overrepresented sequences\" 3. Pangenome \u5206\u6790 \u00b6 \u5e38\u7528\u7684 Pangenome \u5206\u6790\u5305\u62ec\u57fa\u56e0\u7ec4\u7ec4\u88c5\u6ce8\u91ca\u540e\u5bf9\u57fa\u56e0 3.1 \u57fa\u56e0\u7ec4\u7ec4\u88c5 \u00b6 \u7ec4\u88c5\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6700\u5e38\u7528\u7684\u5de5\u5177\u662f spades \uff0c\u5b83\u53ef\u4ee5\u5206\u6279\u5bf9\u591a\u4e2akmer\u8fdb\u884c\u7ec4\u88c5\u3002 # spades \u7ec4\u88c5 $ for i in $( awk -F '_' '!a[$1]++{print}' ) ; do spades.py --careful \\ > -k 21 ,33,55,77,99,121 -1 $i_1 .fastq.gz -2 $i_2 .fastq.gz -T 40 -o $i ; done \u4f46\u662f\u7531\u4e8e\u4e0b\u8f7d\u7684\u6279\u91cf\u6570\u636e\u91c7\u7528\u4e0d\u540c\u5e73\u53f0\uff0c\u5728\u4e0d\u540c\u65f6\u95f4\u8fdb\u884c\u7684\u6d4b\u5e8f\uff0c\u8bfb\u957f\u5f7c\u6b64\u5dee\u5f02\u8fd8\u662f\u6bd4\u8f83\u5927\u7684\u3002\u6bd4\u598210K\u75c5\u539f\u57fa\u56e0\u7ec4\u8ba1\u5212\u91cc\uff0c\u5f88\u591a\u6837\u672c\u9002\u7528 miseq \u8fdb\u884c\u6d4b\u5e8f\u7684\uff0c\u8bfb\u957f\u53ef\u8fbe250\u4ee5\u4e0a\uff0c\u800c\u5f88\u591a\u5546\u4e1a\u516c\u53f8\u6216\u8005\u79d1\u7814\u9662\u6821\u5219\u7528 hiseq \u6d4b\u5e8f\uff0c\u8bfb\u957f\u4e00\u822c\u5728100\uff5e150\u3002\u7528\u540c\u4e00\u4e2a\u53c2\u6570\u6765\u7ec4\u88c5\u53ef\u80fd\u4e0d\u4f1a\u83b7\u5f97\u8f83\u597d\u7684\u7ed3\u679c\u3002 shovill \u5de5\u5177\u53ef\u4ee5\u5e2e\u6211\u4eec\u81ea\u52a8\u5316\u6700\u4f73kmer\u9009\u62e9\uff0c\u53bb\u9664\u4f4e\u8986\u76d6contigs\u7b49\u64cd\u4f5c\uff0c\u4e00\u6b65\u8fbe\u5230\u8f83\u597d\u7684\u7ec4\u88c5\u5e8f\u5217\u3002 # shovill \u7ec4\u88c5 $ for i in $( awk -F '_' '!a[$1]++{print}' ) ; do shovill -R1 $i_1 .fastq.gz -R2 $i_2 .fastq.gz -o $i ; done 3.2 \u57fa\u56e0\u7ec4\u6ce8\u91ca \u00b6 $ for i in $( awk -F '_' '!a[$1]++{print}' ) ; do prokka --prefix prokka_ $i $i /contigs.fa ; done 3.3 \u7528 Roary \u8fdb\u884c\u5206\u6790 \u00b6 $ cp prokka_*/ $i .gff gff/ && cd gff $ roary -p -e mafft *.gff 3.4 Harvest \u00b6 $ parsnp -g ref.gbk -d data -c -p 40 -o output $ harvesttools -i outut/*.ggr -S snp 4. SNPs \u6784\u5efa\u8fdb\u5316\u6811 \u00b6 $ raxml -f a -x 12345 -p 12345 -#100 -n ban -T 40 -s snp -m GTRGAMMA 4.1 \u57fa\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4 Mapping \u7684\u65b9\u6cd5 \u00b6 1. Snippy* \u00b6 # snippy mapping $ for i in *.fastq.gz | sort | uniq ; \\ > do snippy --cpus 40 --outdir $i -ref reference.fa \\ > --R1 $i *_1*.fastq.gz --R2 $i *_2*.fastq.gz ; done # snippy-core \u6c47\u96c6 snps $ snippy-core --prefix core-snps SRR* DRR* ERR* # raxml \u7ed8\u5236\u8fdb\u5316\u6811 $ raxml -f a -x 12345 -p 12345 -# 100 -m GTRGAMMA -s core-snps.aln -n ex -T 40 # \u5c06 raxml \u8fdb\u5316\u6811\u7ed3\u679c\u6587\u4ef6\u4ece\u670d\u52a1\u5668\u4f20\u5230\u672c\u5730\u7535\u8111\uff0c\u7528 figtree \u751f\u6210\u56fe\u7247 $ scp user@server-ip:/path/RAxML_bestTree.ex . $ figtree RAxML_bestTree.ex & 5. \u6838\u5fc3\u57fa\u56e0\u5206\u6790 \u00b6 5.1 get_homologues \u00b6 6. \u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5 \u00b6 *****edirect** $ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz $ sudo tar zxf edirect.tar.gz -C /opt $ sudo chown -R root:root /opt/edirect $ cd /opt/edirect && sudo ./setup.sh $ sudo ln -s /opt/edirect/* /usr/local/sbin/ sra-tools $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.7.0/sratoolkit.2.7.0-ubuntu64.tar.gz $ sudo tar zxf sratoolkit.2.7.0-ubuntu64.tar.gz -C /opt/sratoolkit $ sudo chown -R root:root /opt/sratoolkit && cd /opt/sratoolkit $ sudo ln -s ` pwd ` /bin/* /usr/local/sbin/ bio-awk $ sudo apt-get install bison $ git clone https://github.com/lh3/bioawk $ cd bioawk && make $ sudo cp bioawk /usr/local/sbin parallel $ sudo apt install parallel gplot $ sudo apt install gnuplot $ git clone https://github.com/RhysU/gplot $ sudo cp gplot/gplot /usr/local/sbin FastQC $ wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip $ sudo unzip fastqc_v0.11.5.zip $ sudo mv fastqc_v0.11.5 /opt/fastqc && sudo chown -R root:root /opt/fastqc $ sudo cp /opt/fastqc/fastqc /usr/local/sbin Fadapa $ sudo pip install fadapa snippy $ git clone https://github.com/tseemann/snippy $ sudo cp snippy/bin/* /usr/local/sbin $ sudo cp snippy/binaries/linux/* /usr/local/sbin RAxML $ wget https://github.com/stamatak/standard-RAxML/archive/v8.1.17.tar.gz $ sudo tar zxf v8.1.17.tar.gz -C /opt/raxml $ sudo chown -R root:root /opt/raxml && cd /opt/raxml $ sudo make -f Makefile.SSE3.PTHREADS.gcc $ sudo ln -s ` pwd ` /raxmlHPC-PTHREADS-SSE3 /usr/local/raxml 7. Reference \u00b6 edirect help book: http://www.ncbi.nlm.nih.gov/books/NBK179288/ sra-tools wiki: https://github.com/ncbi/sra-tools/wiki parallel tutorial: https://www.biostars.org/p/63816/ gnuplot tutorial: http://lzz5235.github.io/2016/01/12/gnuplot.html gplot usage: https://github.com/RhysU/gplot/blob/master/README.md","title":"02. \u7ec6\u83cc\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u7814\u7a76"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#snps","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4e3b\u8981\u901a\u8fc7\u6784\u5efa\u76f8\u5e94\u7684\u5206\u6790\u6d41\u7a0b\uff0c\u83b7\u5f97\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u83cc\u682a\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u7b2c\u4e00\u65f6\u95f4\u5c31\u8fdb\u884c\u6eaf\u6e90\u65b9\u9762\u7684\u7814\u7a76\u3002\u5c06\u8fd9\u4e2a\u5de5\u4f5c\u7684\u8fc7\u7a0b\u5efa\u7acb\u6587\u6863\u4fdd\u5b58\u3002\u5206\u6790\u6d41\u7a0b\u7c97\u7565\u7b80\u5355\uff0c\u4e3b\u8981\u76ee\u7684\u4e5f\u662f\u4e3a\u5b9e\u9a8c\u5ba4\u5185\u90e8\u6559\u5b66\uff0c\u5e0c\u671b\u80fd\u505a\u5230\u4e3e\u4e00\u53cd\u4e09\uff0c\u7ed9\u5176\u4ed6\u7ec6\u83cc\u6027\u75c5\u539f\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6eaf\u6e90\u5206\u6790\u7814\u7a76\u63d0\u4f9b\u5e2e\u52a9\u3002 \u505a\u4e3a\u75be\u63a7\u4e2d\u5fc3\u7684\u5b9e\u9a8c\u5ba4\uff0c\u5bf9\u751f\u7269\u6050\u6016\u4e8b\u4ef6\u7684\u9632\u63a7\u548c\u5e94\u5bf9\u5904\u7f6e\u80fd\u529b\u662f\u5e94\u6025\u5de5\u4f5c\u80fd\u529b\u7684\u91cd\u8981\u7ec4\u6210\u4e4b\u4e00\u3002\u800c\u7ec6\u83cc\u6027\u751f\u7269\u6050\u6016\u6218\u5242\u4e2d\u6700\u8457\u540d\u7684\u5c31\u662f\u542b\u6709\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u767d\u8272\u7c89\u672b\u3002\u505a\u4e3a\u57fa\u5c42\u5b9e\u9a8c\u5ba4\uff0c\u56e0\u4e3a\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u63a5\u89e6\u5230\u8fd9\u4e9b\u6837\u54c1\u548c\u75c5\u539f\u7684\u673a\u4f1a\u5fae\u4e4e\u5176\u5fae\uff0c\u6240\u4ee5\u7ecf\u9a8c\u548c\u6280\u80fd\u65b9\u9762\u8f83\u4e3a\u7f3a\u4e4f\u3002\u901a\u8fc7\u5e73\u65f6\u52a0\u5f3a\u76f8\u5173\u9879\u76ee\u7684\u5e94\u6025\u6f14\u7ec3\u5916\uff0c\u5b9e\u9a8c\u5ba4\u5feb\u901f\u5206\u6790\u548c\u6eaf\u6e90\u5de5\u4f5c\u9700\u8981\u505a\u597d\u80fd\u529b\u50a8\u5907\uff0c\u56e0\u6b64\u5b9e\u9a8c\u5ba4\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u57fa\u56e0\u7ec4\u6570\u636e\u8fdb\u884c\u4e86\u57fa\u672c\u5206\u6790\uff0c\u5bf9\u76f8\u5173\u8d44\u6599\u548c\u4fe1\u606f\u8fdb\u884c\u4e86\u50a8\u5907\u3002 \u8f6f\u4ef6\u4e2d\u4f7f\u7528\u7684\u4e00\u4e9b\u53c2\u6570\u662f\u6839\u636e\u81ea\u5df1\u7684\u670d\u52a1\u5668\u8bbe\u7f6e\u7684\uff0c\u5177\u4f53\u8fd0\u884c\u65f6\u9700\u8981\u6839\u636e\u8ba1\u7b97\u673a\u914d\u7f6e\u8fdb\u884c\u76f8\u5e94\u7684\u8c03\u6574\u3002 \u670d\u52a1\u5668\u914d\u7f6e CPU: E3 2650v3 x2 Memory: ECC 16G x8 Harddisk: 7200\u8f6c 1T x4 \u7ec4 Raid 5 + 1 Hotspare System: Ubuntu 16.04 LTS 64bit","title":"\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4 SNPs \u5206\u6790"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#1","text":"\u6570\u636e\u91c7\u7528 NCBI SRA \u6570\u636e\u5e93\u4e2d\u7684\u516c\u5171\u6570\u636e\u6765\u4f5c\u5206\u6790\u3002\u9996\u5148\u68c0\u7d22 NCBI SRA \u6570\u636e\u5e93\u4e2d\u6240\u6709\u4f7f\u7528 illumina \u5e73\u53f0\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4\u8fdb\u884c PE \u6d4b\u5e8f\u7684 \u5927\u4e8e 100M \u7684 NGS \u6570\u636e\uff0c\u5e76\u5728\u4e0b\u8f7d\u8fd9\u4e9b sra \u6570\u636e\u540e\u8f6c\u6362\u6210 fastq.gz \u683c\u5f0f\u3002\u4f7f\u7528\u7684\u5de5\u5177\u4e3b\u8981\u4e3a edirect \u548c sra-tools \u3002","title":"1. \u83b7\u53d6\u516c\u5171\u6570\u636e\u5e93\u6570\u636e"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#11-sra","text":"# \u4e0b\u8f7d\u70ad\u75bd\u82bd\u80de\u6746\u83cc SRA \u53cc\u672b\u7aef\u6d4b\u5e8f\u6570\u636e $ esearch -db sra -query '\"Bacillus anthracis\"[Organism] AND \\ > (Hiseq[ALL] OR Miseq[ALL]) AND \"strategy wgs\"[Properties] AND paired[ALL]' | \\ > efetch -db sra -format runinfo | grep '^[DSE]RR*' | \\ > awk -F ',' '{if($5>100000000) print $1}' | sort -n | \\ > xargs fastq-dump --split-files --gzip --outdir bacillus_anthracis \u4e0a\u9762\u7684\u547d\u4ee4\u4f1a\u76f4\u63a5\u8c03\u7528 fastq-dump \u4e0b\u8f7d\u6570\u636e\u5230 --outdir \u4e2d\u3002\u867d\u7136\u6211\u4eec\u7528\u4e86 grep PAIRED \u6765\u533a\u5206\u4e0d\u540c\u7684\u6d4b\u5e8f\u65b9\u5f0f\uff0c\u4f46\u662f\u7531\u4e8e\u4fe1\u606f\u662f\u63d0\u4ea4\u8005\u4e0a\u4f20\u7684\uff0c\u53ef\u80fd\u4fe1\u606f\u4e0d\u4e00\u5b9a\u662f\u6b63\u786e\u7684\u3002\u7531\u4e8e\u540e\u9762\u7684\u6d41\u7a0b\u4e2d\u7275\u6d89\u5230\u7ec4\u88c5\u548c\u6bd4\u5bf9\u7b49\u64cd\u4f5c\uff0cPE/SE\u7684\u65b9\u5f0f\u4f1a\u6709\u533a\u522b\uff0c\u6700\u597d\u8fd8\u662f\u8fdb\u884c\u9a8c\u8bc1\u540e\u518d\u4e0b\u8f7d\uff0c\u6216\u8005\u5c06PE/SE\u7684\u6570\u636e\u533a\u5206\u5b58\u653e\u3002 # \u5148\u751f\u6210\u6570\u636e\u8bb0\u5f55 $ esearch -db sra -query '\"Bacillus anthracis\"[Organism] AND \\ > (Hiseq[ALL] OR Miseq[ALL]) AND \"strategy wgs\"[Properties]' | \\ > efetch -db sra -format runinfo | grep 'PAIRED' | grep '^[DSE]RR*' | \\ > awk -F ',' '{if($5>100000000) print $1}' | sort -n > ban-sra.txt # \u4e0b\u8f7d sra $ cat ban-sra.txt | xargs prefetch \u8fd9\u6837\u4f1a\u4e0b\u8f7d sra \u6587\u4ef6\u5230\u9ed8\u8ba4\u76ee\u5f55(~/.ncbi/public/sra)\uff0c\u7136\u540e\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u6765\u533a\u5206\u4e0b\u8f7d\u7684\u6570\u636e\u5230\u5e95\u662fPE\u8fd8\u662fSE\u6d4b\u5e8f\u3002","title":"1.1 \u4e0b\u8f7d sra"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#12-pese","text":"\u867d\u7136\u6211\u4eec\u68c0\u7d22\u65f6\u9650\u5b9a\u4e86 PE \u6d4b\u5e8f\u6570\u636e\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6570\u636e\u5e93\u91cc\u7684\u4fe1\u606f\u4e0d\u51c6\u786e\uff0c\u8fd8\u662f\u4f1a\u6709\u5f88\u591a SE \u7684\u6570\u636e\u4f1a\u88ab\u4e0b\u8f7d\u3002\u786e\u5b9a PE \u6216\u8005 SE \u7684\u65b9\u6cd5\u5f88\u591a\u3002 # sra-stat \u7edf\u8ba1 sra \u6587\u4ef6\uff0cnreads=1 \u8868\u793a SE \u6d4b\u5e8f\uff0cnreads=2 \u8868\u793a PE \u6d4b\u5e8f\u3002-e 2 \u53ea\u7edf\u8ba1\u524d2\u4e2aspot\uff0c\u5982\u679c\u53bb\u6389-e\u53c2\u6570\uff0c\u7a0b\u5e8f\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162 $ for i in *.sra ; do echo $i ` sra-stat -xs -e 2 $i | grep \"nreads\" ` ; done # \u6279\u91cf\u5220\u9664 $ parallel 'sra-stat -xs -e 2' ::: *.sra | xtract -Pattern Run -element Run@accession \\ > Statistics@nreads | awk '{if($2==1) print $1}' | xargs rm sra-stat \u5de5\u5177\u53ef\u4ee5\u63d0\u53d6 sra \u6587\u4ef6\u7684\u6d4b\u5e8f\u76f8\u5173\u4fe1\u606f\u3002 -xs \u53c2\u6570\u751f\u6210 xml \u683c\u5f0f\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\u91cc\u9762\u5c5e\u6027\u503c nreads \u53ef\u4ee5\u8868\u793a\u91c7\u7528\u7684\u662f\u54ea\u4e00\u79cd\u6d4b\u5e8f\u65b9\u5f0f\u3002\u5982\u679c spot-id \u662f\u89c4\u5219\u6392\u5217\uff0c\u90a3\u4e48\u53ef\u4ee5\u6dfb\u52a0 -e 2 \u6700\u5feb\u65f6\u95f4\u83b7\u5f97\u7ed3\u679c\u3002 parallel \u5de5\u5177\u6765\u5e76\u884c\u5316\u5904\u7406 sra-stat \uff0c\u5982\u679c\u8ba1\u7b97\u91cf\u5927\u662f\u5f88\u597d\u7684\u5229\u7528\u591a\u6838CPU\u5904\u7406\u7ec8\u7aef\u547d\u4ee4\u7684\u65b9\u6cd5\u3002 # fastq-dump \u8f93\u51fa\u4e00\u4e2a reads\uff0c\u8ba1\u7b97\u884c\u6570\u5982\u679c\u662f4\uff0c\u90a3\u4e48\u5c31\u662f SE\uff0c\u5982\u679c\u662f8,\u5219\u662f PE $ fastq-dump -X 1 --split-spot -Z SRR955386.sra | wc -l # \u5229\u7528 -A \u53c2\u6570\u8fdc\u7a0b\u83b7\u5f97\u7ed3\u679c $ fastq-dump -X1 --split-spot -Z -L 5 -A SRR955386 # fastq-dump \u81ea\u5df1\u5224\u65ad\uff0c\u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump \u53ea\u80fd\u751f\u62101\u4e2a *_1.fastq \u6587\u4ef6 $ fastq-dump --split-files ERR493452.sra # fastq-dump \u53ea\u80fd\u8c03\u7528\u5355\u6838\u8f6c\u6362\uff0c\u53ef\u4ee5\u4f7f\u7528 parallel \u5de5\u5177\u5e76\u884c\u5904\u7406\u52a0\u5feb\u901f\u5ea6\u3002 $ parallel \"fastq-dump --split-files --gzip --outdir bacillus_anthracis\" ::: *.sra \u53e6\u5916\u4e00\u79cd\u83b7\u5f97\u662f PE/SE \u7684\u65b9\u6cd5\u662f\u7528 fastq-dump \u6765\u8bfb\u53d6\u51fa\u76f8\u540c spot-id \u7684 reads \u518d\u8ba1\u7b97\u884c\u6570\u3002 -X \u8868\u793a\u6700\u591a\u8bfb\u53d6\u7684 spot-id \u6570\u91cf\uff1b --split-spot \u533a\u5206spot\u5230reads\u7136\u540e\u7528 -Z \u8f93\u51fa\uff0c\u518d wc -l \u7edf\u8ba1\u884c\u6570\u3002 \u6709\u65f6\u5019\u6709\u4e9bsra\u6587\u4ef6\u5728 dump \u65f6\u4f1a\u51fa\u9519\uff0c\u4e0d\u80fd\u751f\u6210\u5bf9\u5e94\u7684 PE fastq \u6587\u4ef6\uff0c\u8fd9\u5c31\u9700\u8981\u6bd4\u8f83\u540e\u5220\u9664\u4e86\u3002\u5982\u679c\u662f mate pair \u7684\u6570\u636e\uff0c\u4f1a\u751f\u6210 *_3.fastq.gz \uff0c\u5982\u679c\u4e0d\u9700\u8981\u5219\u53ef\u624b\u5de5\u5220\u9664\u3002","title":"1.2 \u533a\u5206 PE/SE \u6570\u636e"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#13-fastqgz","text":"fastq-dump \u6279\u91cf\u751f\u6210 fastq \u6570\u636e\u540e\uff0c\u6709\u65f6\u56e0\u4e3a\u5404\u79cd\u539f\u56e0\uff0c\u8fd8\u662f\u4f1a dump \u51fa\u975e PE \u7c7b\u578b\u7684 *._1 \u548c *._2 \u547d\u540d\u98ce\u683c\u76842\u4e2aPE\u6570\u636e\u6587\u4ef6\u3002\u6587\u4ef6\u91cf\u5927\u65f6\u901a\u8fc7\u8089\u773c\u5f88\u96be\u5224\u65ad\u3002 # \u6838\u5bf9 PE \u53cc\u7aef\u6d4b\u5e8f\u6587\u4ef6\u662f\u5426\u4e00\u81f4 $ ls -l *_1.fastq.gz | awk '{print $9}' | awk -F '_' '{print $1}' > R1.txt $ ls -l *_2.fastq.gz | awk '{print $9}' | awk -F '_' '{print $1}' > R2.txt $ diff R1.txt R2.txt \u901a\u8fc7 diff \u5de5\u5177\u6bd4\u8f83\uff0c\u5982\u679c2\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e00\u81f4\uff0c\u5219\u7ec8\u7aef\u4e0d\u4f1a\u6709\u8f93\u51fa\u3002\u5426\u5219\u5c31\u8981\u5220\u9664\u5dee\u5f02\u7684\u90a3\u4e2a\u6587\u4ef6\u4e86\u3002","title":"1.3 \u9a8c\u8bc1 fastq.gz \u6587\u4ef6\u540d\u7684\u4e00\u81f4\u6027"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#2","text":"\u7531\u4e8e\u662f\u516c\u5171\u6570\u636e\u5e93\u4e0b\u8f7d\u7684\u6570\u636e\uff0c\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6d4b\u5e8f\u5b9e\u9a8c\u8d28\u91cf\u6216\u8005\u6570\u636e\u63d0\u4ea4\u8005\u662f\u5426\u63d0\u4ea4\u7684\u662f\u8d28\u63a7\u540e\u7684\u6570\u636e\u3002\u56e0\u6b64\u5efa\u8bae\u8981\u5bf9\u6570\u636e\u505a\u4e00\u4e9b\u524d\u671f\u7684\u8d28\u63a7\u5904\u7406\u3002","title":"2. \u6570\u636e\u7684\u524d\u671f\u5904\u7406"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#21-qc","text":"\u9996\u5148\u5bf9\u57fa\u56e0\u7ec4 GC \u542b\u91cf\u548c Q \u503c\u8fdb\u884c\u521d\u6b65\u7b5b\u9009\uff0c\u5bf9\u4e8e\u504f\u5dee\u8f83\u5927\u7684\u6570\u636e\u8003\u8651\u76f4\u63a5\u5254\u9664\uff08\u6216\u8005\u7528\u5176\u4ed6\u8f6f\u4ef6\u9a8c\u8bc1\u770b\u662f\u5426\u662f\u9519\u8bef\u7269\u79cd\uff09\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u4e3a bioawk \u6216 parallel \u3002 # \u56e0\u4e3a reads \u8986\u76d6\u5ea6\u53ef\u80fd\u5e76\u4e0d\u5747\u4e00\uff0c\u9ad8\u8986\u76d6\u5ea6\u7684\u533a\u57df GC \u542b\u91cf\u6bd4\u91cd\u4f1a\u7565\u9ad8\u3002\u4f46\u662f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6b63\u5e38\u6d4b\u5e8f\u7684\u57fa\u56e0\u7ec4\u8fd9\u79cd\u533a\u57df\u76f8\u5bf9\u6765\u8bf4\u4e0d\u591a\uff0c\u5e73\u5747\u5230\u57fa\u56e0\u7ec4\u540e\u4f1a\u6574\u4f53 GC \u542b\u91cf\u5f71\u54cd\u4e0d\u5927\u3002 $ for i in *.fastq.gz ; do bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc($seq);q+=meanqual($seq)}END{print $name,n/NR,q/NR}' $i >> result.txt ; done # awk \u7c7b\u5de5\u5177\u662f\u5355\u8fdb\u7a0b\u7684\uff0c\u4e3a\u4e86\u52a0\u901f\u53ef\u4ee5\u4f7f\u7528 parallel \u6765\u5e76\u884c\u8ba1\u7b97 $ parallel \"bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc(\\$seq);q+=meanqual(\\$seq)}END{print \\$name,n/NR,q/NR}' >> result.txt\" ::: *.fastq.gz # \u6309\u7167 GC \u542b\u91cf\u6392\u5e8f $ cat result.txt | sort -n -k3 R \u7ed8\u5236 gc \u5206\u5e03\u56fe\uff0c\u5982\u679c gc \u542b\u91cf\u504f\u5dee\u8d85\u8fc7 10% \u65f6\u5c31\u5254\u9664\u8be5\u57fa\u56e0\u7ec4\u6570\u636e\u3002 > library ( ggplot2 ) > data <- read.table ( \"result.txt\" ) > qplot ( v2 , v3 , data = data ) \u7ed3\u679c\u663e\u793a\u6709\u4e00\u4e2a\u9ed1\u70b9\u7684GC\u542b\u91cf\u7279\u522b\u4f4e\uff0c\u4e14Q\u503c\u7279\u522b\u9ad8\u3002\u7ed3\u679c\u663e\u793a\u6d4b\u5e8f\u5b9e\u9a8c SRR2155551 \u548c SRR2164197 \u7684 GC \u542b\u91cf\u4ec5\u4e3a22%\uff0c\u800c\u5176\u4ed6\u6837\u672c GC \u542b\u91cf\u8303\u56f4\u572834%\uff5e41%\u3002\u4e14\u8fd92\u4e2a\u5b9e\u9a8c\u7684\u6837\u672c\u5747\u4e3a\u540c\u4e00\u4e2a\uff0c\u662f1\u4e2a\u6837\u672c\u76842\u6b64\u6d4b\u5e8f\uff08\u6216\u8005\u6570\u636e\u4e0a\u4f20\u4e862\u6b21\uff09\uff0c\u56e0\u6b64\u5c06\u5176\u5254\u9664\u3002","title":"2.1 \u6570\u636e QC"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#22","text":"\u5176\u6b21\u8981\u53bb\u9664\u63a5\u5934\u7684\u6c61\u67d3\u3002\u56e0\u4e3a\u5206\u6790\u6d41\u7a0b\u4e2d\u4e0d\u4ec5\u5305\u62ec mapping \u7684\u65b9\u5f0f\uff0c\u8fd8\u5305\u542b de novo assembly\uff0c\u4e3a\u4e86\u907f\u514d\u63a5\u5934\u5e8f\u5217\u5bf9\u57fa\u56e0\u7ec4\u62fc\u63a5\u7684\u5f71\u54cd\uff0c\u8fd9\u91cc\u6700\u597d\u8fdb\u884c\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u662f FastQC \u548c fadapa # \u4f7f\u7528\u811a\u672c scan_adaptors.py \u6765\u626b\u63cf\u4e0b\u8f7d\u7684\u9ad8\u901a\u91cf\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u662f\u5426\u6709\u63a5\u5934\u6c61\u67d3\u7684\u60c5\u51b5\u3002 $ fastqc -t 40 -q --extract *.fastq.gz $ python scan_fastqc_report.py -d qc \u63a5\u5934\u53bb\u9664\u8f6f\u4ef6\u5f88\u591a\uff0c\u4f46\u662f\u8981\u81ea\u52a8\u5224\u65ad\u5e76\u4e14\u6279\u91cf\u5904\u7406\u6700\u597d\u81ea\u5df1\u5199\u811a\u672c\u6bd4\u8f83\u65b9\u4fbf\u3002\u8fd9\u91cc\u7528 python \u5199\u4e00\u4e2a\u6279\u91cf\u79fb\u9664\u7684\u811a\u672c\u3002 #!usr/bin/env python # -*- coding: utf-8 -*- # scripts name: scan_fastqc_report.py import os from Bio.Seq import Seq from Bio import SeqIO from Bio.SeqRecord import SeqRecord from Bio.Alphabet import generic_nucleotide from fadapa import Fadapa import argparse parser = argparse . ArgumentParser () parser . add_argument ( '-i' , '--input' , action = 'store' , dest = 'qcfile' , type = str , help = \"fastqc extract data file\" ) parser . add_argument ( '-o' , '--output' , action = 'store' , dest = 'adaptor' , type = str , help = \"adaptors file\" ) args = parser . parse_args () qc_file = Fadapa ( args . qcfile ) if qc_file . summary ()[ - 3 ][ 0 ] == 'fail' : adaptors = [] ors = qc_file . clean_data ( \"Overrepresented sequences\" ) ors . pop ( 0 ) for ( index , seq ) in enumerate ( ors ): if 'NNNNNN' in seq [ 0 ]: continue adaptors . append ( SeqRecord ( Seq ( seq [ 0 ], generic_nucleotide ), id = \"adaptor_ %d \" % ( index + 1 ))) if not os . path . exists ( args . adaptor ): os . makedirs ( args . adaptor ) SeqIO . write ( adaptors , \" %s /adaptor.fasta\" % args . adaptor , \"fasta\" ) print \"Overrepresented sequences has been save to adaptors.fasta\" else : print \"No Overrepresented sequences\"","title":"2.2 \u53bb\u9664\u63a5\u5934"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#3-pangenome","text":"\u5e38\u7528\u7684 Pangenome \u5206\u6790\u5305\u62ec\u57fa\u56e0\u7ec4\u7ec4\u88c5\u6ce8\u91ca\u540e\u5bf9\u57fa\u56e0","title":"3. Pangenome \u5206\u6790"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#31","text":"\u7ec4\u88c5\u7ec6\u83cc\u57fa\u56e0\u7ec4\u6700\u5e38\u7528\u7684\u5de5\u5177\u662f spades \uff0c\u5b83\u53ef\u4ee5\u5206\u6279\u5bf9\u591a\u4e2akmer\u8fdb\u884c\u7ec4\u88c5\u3002 # spades \u7ec4\u88c5 $ for i in $( awk -F '_' '!a[$1]++{print}' ) ; do spades.py --careful \\ > -k 21 ,33,55,77,99,121 -1 $i_1 .fastq.gz -2 $i_2 .fastq.gz -T 40 -o $i ; done \u4f46\u662f\u7531\u4e8e\u4e0b\u8f7d\u7684\u6279\u91cf\u6570\u636e\u91c7\u7528\u4e0d\u540c\u5e73\u53f0\uff0c\u5728\u4e0d\u540c\u65f6\u95f4\u8fdb\u884c\u7684\u6d4b\u5e8f\uff0c\u8bfb\u957f\u5f7c\u6b64\u5dee\u5f02\u8fd8\u662f\u6bd4\u8f83\u5927\u7684\u3002\u6bd4\u598210K\u75c5\u539f\u57fa\u56e0\u7ec4\u8ba1\u5212\u91cc\uff0c\u5f88\u591a\u6837\u672c\u9002\u7528 miseq \u8fdb\u884c\u6d4b\u5e8f\u7684\uff0c\u8bfb\u957f\u53ef\u8fbe250\u4ee5\u4e0a\uff0c\u800c\u5f88\u591a\u5546\u4e1a\u516c\u53f8\u6216\u8005\u79d1\u7814\u9662\u6821\u5219\u7528 hiseq \u6d4b\u5e8f\uff0c\u8bfb\u957f\u4e00\u822c\u5728100\uff5e150\u3002\u7528\u540c\u4e00\u4e2a\u53c2\u6570\u6765\u7ec4\u88c5\u53ef\u80fd\u4e0d\u4f1a\u83b7\u5f97\u8f83\u597d\u7684\u7ed3\u679c\u3002 shovill \u5de5\u5177\u53ef\u4ee5\u5e2e\u6211\u4eec\u81ea\u52a8\u5316\u6700\u4f73kmer\u9009\u62e9\uff0c\u53bb\u9664\u4f4e\u8986\u76d6contigs\u7b49\u64cd\u4f5c\uff0c\u4e00\u6b65\u8fbe\u5230\u8f83\u597d\u7684\u7ec4\u88c5\u5e8f\u5217\u3002 # shovill \u7ec4\u88c5 $ for i in $( awk -F '_' '!a[$1]++{print}' ) ; do shovill -R1 $i_1 .fastq.gz -R2 $i_2 .fastq.gz -o $i ; done","title":"3.1 \u57fa\u56e0\u7ec4\u7ec4\u88c5"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#32","text":"$ for i in $( awk -F '_' '!a[$1]++{print}' ) ; do prokka --prefix prokka_ $i $i /contigs.fa ; done","title":"3.2 \u57fa\u56e0\u7ec4\u6ce8\u91ca"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#33-roary","text":"$ cp prokka_*/ $i .gff gff/ && cd gff $ roary -p -e mafft *.gff","title":"3.3 \u7528 Roary \u8fdb\u884c\u5206\u6790"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#34-harvest","text":"$ parsnp -g ref.gbk -d data -c -p 40 -o output $ harvesttools -i outut/*.ggr -S snp","title":"3.4 Harvest"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#4-snps","text":"$ raxml -f a -x 12345 -p 12345 -#100 -n ban -T 40 -s snp -m GTRGAMMA","title":"4. SNPs \u6784\u5efa\u8fdb\u5316\u6811"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#41-mapping","text":"","title":"4.1 \u57fa\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4 Mapping \u7684\u65b9\u6cd5"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#1-snippy","text":"# snippy mapping $ for i in *.fastq.gz | sort | uniq ; \\ > do snippy --cpus 40 --outdir $i -ref reference.fa \\ > --R1 $i *_1*.fastq.gz --R2 $i *_2*.fastq.gz ; done # snippy-core \u6c47\u96c6 snps $ snippy-core --prefix core-snps SRR* DRR* ERR* # raxml \u7ed8\u5236\u8fdb\u5316\u6811 $ raxml -f a -x 12345 -p 12345 -# 100 -m GTRGAMMA -s core-snps.aln -n ex -T 40 # \u5c06 raxml \u8fdb\u5316\u6811\u7ed3\u679c\u6587\u4ef6\u4ece\u670d\u52a1\u5668\u4f20\u5230\u672c\u5730\u7535\u8111\uff0c\u7528 figtree \u751f\u6210\u56fe\u7247 $ scp user@server-ip:/path/RAxML_bestTree.ex . $ figtree RAxML_bestTree.ex &","title":"1. Snippy*"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#5","text":"","title":"5. \u6838\u5fc3\u57fa\u56e0\u5206\u6790"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#51-get_homologues","text":"","title":"5.1 get_homologues"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#6","text":"*****edirect** $ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz $ sudo tar zxf edirect.tar.gz -C /opt $ sudo chown -R root:root /opt/edirect $ cd /opt/edirect && sudo ./setup.sh $ sudo ln -s /opt/edirect/* /usr/local/sbin/ sra-tools $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.7.0/sratoolkit.2.7.0-ubuntu64.tar.gz $ sudo tar zxf sratoolkit.2.7.0-ubuntu64.tar.gz -C /opt/sratoolkit $ sudo chown -R root:root /opt/sratoolkit && cd /opt/sratoolkit $ sudo ln -s ` pwd ` /bin/* /usr/local/sbin/ bio-awk $ sudo apt-get install bison $ git clone https://github.com/lh3/bioawk $ cd bioawk && make $ sudo cp bioawk /usr/local/sbin parallel $ sudo apt install parallel gplot $ sudo apt install gnuplot $ git clone https://github.com/RhysU/gplot $ sudo cp gplot/gplot /usr/local/sbin FastQC $ wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip $ sudo unzip fastqc_v0.11.5.zip $ sudo mv fastqc_v0.11.5 /opt/fastqc && sudo chown -R root:root /opt/fastqc $ sudo cp /opt/fastqc/fastqc /usr/local/sbin Fadapa $ sudo pip install fadapa snippy $ git clone https://github.com/tseemann/snippy $ sudo cp snippy/bin/* /usr/local/sbin $ sudo cp snippy/binaries/linux/* /usr/local/sbin RAxML $ wget https://github.com/stamatak/standard-RAxML/archive/v8.1.17.tar.gz $ sudo tar zxf v8.1.17.tar.gz -C /opt/raxml $ sudo chown -R root:root /opt/raxml && cd /opt/raxml $ sudo make -f Makefile.SSE3.PTHREADS.gcc $ sudo ln -s ` pwd ` /raxmlHPC-PTHREADS-SSE3 /usr/local/raxml","title":"6. \u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5"},{"location":"book/C18_Analysis-Examples/02_comparative-analysis-Ban-genomes/#7-reference","text":"edirect help book: http://www.ncbi.nlm.nih.gov/books/NBK179288/ sra-tools wiki: https://github.com/ncbi/sra-tools/wiki parallel tutorial: https://www.biostars.org/p/63816/ gnuplot tutorial: http://lzz5235.github.io/2016/01/12/gnuplot.html gplot usage: https://github.com/RhysU/gplot/blob/master/README.md","title":"7. Reference"},{"location":"book/C18_Analysis-Examples/03_vpa-analysis/","text":"\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u6570\u636e\u5206\u6790 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u7b80\u8ff0\u5bf9\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u8fdb\u884c\u5206\u6790\u7684\u4e00\u4e2a\u9879\u76ee\u8fc7\u7a0b\u3002 \u6570\u636e\u4e0b\u8f7d \u00b6 \u8f6f\u4ef6\u5217\u8868 entrez-direct sra-tools parallel-fastq-dump \u9009\u62e9\u4e0b\u8f7d illlumina \u5e73\u53f0\u7684\u6570\u636e\uff0c\u4e3b\u8981\u9488\u5bf9 miseq \u548c hiseq\uff08hiseq \u5404\u4e2a\u5e73\u53f0\u5305\u62ec x ten\uff09\u3002novaseq \u76ee\u524d\u6682\u65f6\u6ca1\u6709\u5fae\u751f\u7269\u6570\u636e\u3002 # \u641c\u7d22 SRA \u6570\u636e\u5e93\u4e2d\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u7684\u8bb0\u5f55\uff0c\u4fdd\u5b58\u6210 vpa.sra.xml \u6587\u4ef6 $ esearch -query 'txid670[organism] AND \"strategy wgs\"[properties] AND \"biomol dna\"[properties]' -db sra | efetch -format docsum > vpa.sra.xml # \u83b7\u5f97 vpa.sra.xml \u6570\u636e\u4e2d\u5404\u4e2a\u6d4b\u5e8f\u5e73\u53f0\u7684\u6570\u636e $ xtract -input vpa.sra.xml -pattern DocumentSummary -element Platform@instrument_model | sort | uniq -c 8 454 GS FLX+ 1 454 GS Junior 18 AB SOLiD 4 System 25 HiSeq X Ten 158 Illumina HiSeq 2000 161 Illumina HiSeq 2500 991 Illumina MiSeq 119 Ion Torrent PGM 2 NextSeq 500 28 PacBio RS 1 PacBio RS II 1 Sequel # \u5206\u79bb\u4e0d\u540c\u6d4b\u5e8f\u5e73\u53f0\u7684\u6570\u636e\u8868 # \u5bf9\u4e8e MiSeq \u5e73\u53f0\uff0c\u7b5b\u9009\u6d4b\u5e8f\u78b1\u57fa\u6570\u636e\u5927\u4e8e150M\uff0c\u4e14\u6ca1\u6709\u4e00\u4e2a\u6837\u672c\u5bf9\u5e94\u5bf9\u591a\u4e2a\u6d4b\u5e8f\u6570\u636e\u7684\u5b9e\u9a8c $ xtract -input vpa.sra.xml -pattern DocumentSummary -element \\ > Platform@instrument_model Statistics@total_bases Biosample Run@acc | \\ > grep MiSeq | awk -F '\\t' '{if($2>150000000 && !$5) print $0}' > vpa.sra.miseq.acc # \u786e\u8ba4\u662f\u5426\u6709\u591a\u4e2a Run \u5bf9\u5e94\u76f8\u540c\u7684 Biosample $ awk -F '\\t' '{print $3}' vpa.sra.miseq.acc | awk 'a[$0]++' # \u4e0b\u8f7d\u83b7\u5f97\u7684 Run accession $ for i in $( cat vpa.sra.miseq.acc | awk -F '\\t' '{print $4}' ) ; do prefetch $i ; done # \u63d0\u53d6 biosample \u4fe1\u606f $ for i in $( cat vpa.sra.miseq.acc | awk -F '\\t' '{print $3}' | awk '!a[$0]++' ) ; do efetch -db Biosample -id $i > biosample/miseq/ $i .xml ; sleep 5 ; done # \u5bf9\u4e8e HiSeq 2000, 2500, X Ten \u5e73\u53f0\u7684\u6570\u636e\uff0c\u78b1\u57fa\u6570\u636e\u5927\u4e8e150M\uff0c\u5e73\u5747\u8bfb\u957f\u8d85\u8fc7 PE100 \u7684\u6d4b\u5e8f\u6570\u636e $ cat vpa.sra.xml | xtract -pattern DocumentSummary -element \\ > Platform@instrument_model Statistics@total_spots Statistics@total_bases \\ > Biosample Run@acc | grep HiSeq | awk -F '\\t' '{if($3 >150000000 && $3/$2 > 200 && !$6) print $0}' > vpa.sra.hiseq.acc # \u786e\u8ba4\u662f\u5426\u6709\u591a\u4e2a Run \u5bf9\u5e94\u76f8\u540c\u7684 Biosample $ awk -F '\\t' '{print $4}' vpa.sra.hiseq.acc | awk 'a[$0]++' # \u4e0b\u8f7d\u83b7\u5f97\u7684 Run accession $ for i in $( cat vpa.sra.hiseq.acc | awk -F '\\t' '{print $5}' ) ; do prefetch $i ; done # \u63d0\u53d6 biosample \u4fe1\u606f $ for i in $( cat vpa.sra.hiseq.acc | awk -F '\\t' '{print $4}' | awk '!a[$0]++' ) ; do efetch -db Biosample -id $i > biosample/hiseq/ $i .xml ; sleep 5 ; done # fastq-dump \u5de5\u5177\u53ea\u652f\u6301\u5355\u7ebf\u7a0b\u8f6c\u6362\uff0c\u901f\u5ea6\u6536\u5230\u9650\u5236\u3002 # \u5bf9\u4e8e\u6279\u91cf sra \u6570\u636e\uff0c\u53ef\u4ee5\u7528 parallel \u6765\u6279\u91cf\u8fdb\u884c fastq \u8f6c\u6362 $ parallel \"fastq-dump --gzip --split-3\" ::: *.sra # \u5bf9\u4e8e\u5355\u4e2a sra \u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528 parallel-fastq-dump \u8fdb\u884c\u591a\u6838\u52a0\u901f\u5904\u7406\u3002 $ conda install parallel-fastq-dump $ parallel-fastq-dump --sra-id ... --threads 40 --split-files --gzip --out-dir . # Assembly \u6570\u636e\u5e93 $ esearch -db assembly -query 'txid670[Organism] AND latest[filter] NOT anomalous[filter]' | efetch -format xml > vpa.assembly.xml # Assembly \u6570\u636e\u5e93\u5bf9\u5e94\u7684 Biosample \u53bb\u9664\u5197\u4f59\u7684\u6837\u672c\u4fe1\u606f $ for i in $( xtract -input vpa.assembly.xml -pattern DocumentSummary -element AssemblyAccession BioSampleAccn | awk '{print $2}' | awk '!a[$0]++' ) ; \\ > do efetch -db Biosample -id $i > biosample/assembly/ $i .xml ; sleep 5 ; \\ > done","title":"\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u6570\u636e\u5206\u6790"},{"location":"book/C18_Analysis-Examples/03_vpa-analysis/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u7b80\u8ff0\u5bf9\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u8fdb\u884c\u5206\u6790\u7684\u4e00\u4e2a\u9879\u76ee\u8fc7\u7a0b\u3002","title":"\u526f\u6eb6\u8840\u6027\u5f27\u83cc\u6570\u636e\u5206\u6790"},{"location":"book/C18_Analysis-Examples/03_vpa-analysis/#_2","text":"\u8f6f\u4ef6\u5217\u8868 entrez-direct sra-tools parallel-fastq-dump \u9009\u62e9\u4e0b\u8f7d illlumina \u5e73\u53f0\u7684\u6570\u636e\uff0c\u4e3b\u8981\u9488\u5bf9 miseq \u548c hiseq\uff08hiseq \u5404\u4e2a\u5e73\u53f0\u5305\u62ec x ten\uff09\u3002novaseq \u76ee\u524d\u6682\u65f6\u6ca1\u6709\u5fae\u751f\u7269\u6570\u636e\u3002 # \u641c\u7d22 SRA \u6570\u636e\u5e93\u4e2d\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u7684\u8bb0\u5f55\uff0c\u4fdd\u5b58\u6210 vpa.sra.xml \u6587\u4ef6 $ esearch -query 'txid670[organism] AND \"strategy wgs\"[properties] AND \"biomol dna\"[properties]' -db sra | efetch -format docsum > vpa.sra.xml # \u83b7\u5f97 vpa.sra.xml \u6570\u636e\u4e2d\u5404\u4e2a\u6d4b\u5e8f\u5e73\u53f0\u7684\u6570\u636e $ xtract -input vpa.sra.xml -pattern DocumentSummary -element Platform@instrument_model | sort | uniq -c 8 454 GS FLX+ 1 454 GS Junior 18 AB SOLiD 4 System 25 HiSeq X Ten 158 Illumina HiSeq 2000 161 Illumina HiSeq 2500 991 Illumina MiSeq 119 Ion Torrent PGM 2 NextSeq 500 28 PacBio RS 1 PacBio RS II 1 Sequel # \u5206\u79bb\u4e0d\u540c\u6d4b\u5e8f\u5e73\u53f0\u7684\u6570\u636e\u8868 # \u5bf9\u4e8e MiSeq \u5e73\u53f0\uff0c\u7b5b\u9009\u6d4b\u5e8f\u78b1\u57fa\u6570\u636e\u5927\u4e8e150M\uff0c\u4e14\u6ca1\u6709\u4e00\u4e2a\u6837\u672c\u5bf9\u5e94\u5bf9\u591a\u4e2a\u6d4b\u5e8f\u6570\u636e\u7684\u5b9e\u9a8c $ xtract -input vpa.sra.xml -pattern DocumentSummary -element \\ > Platform@instrument_model Statistics@total_bases Biosample Run@acc | \\ > grep MiSeq | awk -F '\\t' '{if($2>150000000 && !$5) print $0}' > vpa.sra.miseq.acc # \u786e\u8ba4\u662f\u5426\u6709\u591a\u4e2a Run \u5bf9\u5e94\u76f8\u540c\u7684 Biosample $ awk -F '\\t' '{print $3}' vpa.sra.miseq.acc | awk 'a[$0]++' # \u4e0b\u8f7d\u83b7\u5f97\u7684 Run accession $ for i in $( cat vpa.sra.miseq.acc | awk -F '\\t' '{print $4}' ) ; do prefetch $i ; done # \u63d0\u53d6 biosample \u4fe1\u606f $ for i in $( cat vpa.sra.miseq.acc | awk -F '\\t' '{print $3}' | awk '!a[$0]++' ) ; do efetch -db Biosample -id $i > biosample/miseq/ $i .xml ; sleep 5 ; done # \u5bf9\u4e8e HiSeq 2000, 2500, X Ten \u5e73\u53f0\u7684\u6570\u636e\uff0c\u78b1\u57fa\u6570\u636e\u5927\u4e8e150M\uff0c\u5e73\u5747\u8bfb\u957f\u8d85\u8fc7 PE100 \u7684\u6d4b\u5e8f\u6570\u636e $ cat vpa.sra.xml | xtract -pattern DocumentSummary -element \\ > Platform@instrument_model Statistics@total_spots Statistics@total_bases \\ > Biosample Run@acc | grep HiSeq | awk -F '\\t' '{if($3 >150000000 && $3/$2 > 200 && !$6) print $0}' > vpa.sra.hiseq.acc # \u786e\u8ba4\u662f\u5426\u6709\u591a\u4e2a Run \u5bf9\u5e94\u76f8\u540c\u7684 Biosample $ awk -F '\\t' '{print $4}' vpa.sra.hiseq.acc | awk 'a[$0]++' # \u4e0b\u8f7d\u83b7\u5f97\u7684 Run accession $ for i in $( cat vpa.sra.hiseq.acc | awk -F '\\t' '{print $5}' ) ; do prefetch $i ; done # \u63d0\u53d6 biosample \u4fe1\u606f $ for i in $( cat vpa.sra.hiseq.acc | awk -F '\\t' '{print $4}' | awk '!a[$0]++' ) ; do efetch -db Biosample -id $i > biosample/hiseq/ $i .xml ; sleep 5 ; done # fastq-dump \u5de5\u5177\u53ea\u652f\u6301\u5355\u7ebf\u7a0b\u8f6c\u6362\uff0c\u901f\u5ea6\u6536\u5230\u9650\u5236\u3002 # \u5bf9\u4e8e\u6279\u91cf sra \u6570\u636e\uff0c\u53ef\u4ee5\u7528 parallel \u6765\u6279\u91cf\u8fdb\u884c fastq \u8f6c\u6362 $ parallel \"fastq-dump --gzip --split-3\" ::: *.sra # \u5bf9\u4e8e\u5355\u4e2a sra \u6570\u636e\uff0c\u53ef\u4ee5\u5229\u7528 parallel-fastq-dump \u8fdb\u884c\u591a\u6838\u52a0\u901f\u5904\u7406\u3002 $ conda install parallel-fastq-dump $ parallel-fastq-dump --sra-id ... --threads 40 --split-files --gzip --out-dir . # Assembly \u6570\u636e\u5e93 $ esearch -db assembly -query 'txid670[Organism] AND latest[filter] NOT anomalous[filter]' | efetch -format xml > vpa.assembly.xml # Assembly \u6570\u636e\u5e93\u5bf9\u5e94\u7684 Biosample \u53bb\u9664\u5197\u4f59\u7684\u6837\u672c\u4fe1\u606f $ for i in $( xtract -input vpa.assembly.xml -pattern DocumentSummary -element AssemblyAccession BioSampleAccn | awk '{print $2}' | awk '!a[$0]++' ) ; \\ > do efetch -db Biosample -id $i > biosample/assembly/ $i .xml ; sleep 5 ; \\ > done","title":"\u6570\u636e\u4e0b\u8f7d"},{"location":"book/C18_Analysis-Examples/04_amr/","text":"\u57fa\u4e8e\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u8fdb\u884c\u75c5\u539f\u7ec6\u83cc\u8010\u836f\u7814\u7a76 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd\u57fa\u56e0\u7ec4\u6570\u636e\u8fdb\u884c\u8010\u836f\u57fa\u56e0\u7684\u7814\u7a76\u5b9e\u8df5\u3002 \u6570\u636e\u8d28\u63a7 \u00b6 # trimmomatic \u53d6\u51fa\u4f4e\u8d28\u91cf\u5e8f\u5217\u548c\u63a5\u5934\u5e8f\u5217 # \u53bb\u9664 NexteraPE-PE.fa \u6587\u4ef6\u4e2d\u7684\u63a5\u5934\u6587\u4ef6 # \u53d6\u51fa\u5934\u5c3e\u90e83\u78b1\u57fa\u8303\u56f4\u4e2dQ\u503c\u4f4e\u4e8e3\u7684\u8d28\u91cf\u78b1\u57fa # \u4ee54\u4e2a\u78b1\u57fa\u957f\u5ea6\u4e3a\u8bfb\u7801\u957f\u5ea6\uff0c\u53d6\u51fa\u5e73\u5747\u8d28\u91cf\u4f4e\u4e8e15\u7684\u526a\u8f91 # \u53d6\u51fa\u957f\u5ea6\u5c0f\u4e8e36bp\u7684\u78b1\u57fa $ export ADAPTER = $CONDA_PREFIX /share//trimmomatic-0.39-1/adapters $ trimmomatic PE -threads 4 -trimlog 02_trim/trim.log -summary 02_trim/ \\ > summary.log DRR015013_1.fastq.gz DRR015013_2.fastq.gz 02_trim/ \\ > DRR015013_1.clean.fq.gz 02_trim/DRR015013_1.trim.fq.gz 02_trim/ \\ > DRR015013_2.clean.fq.gz 02_trim/DRR015013_2.trim.fq.gz \\ > ILLUMINACLIP: $ADAPTER /NexteraPE-PE.fa:2:30:10 \\ > LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36 $ fastp \u57fa\u56e0\u7ec4\u6570\u636e\u5904\u7406 \u00b6 1.\u57fa\u56e0\u7ec4\u7ec4\u88c5 \u00b6 2.\u57fa\u56e0\u7ec4\u6bd4\u5bf9 \u00b6 3.\u57fa\u56e0\u7ec4\u6ce8\u91ca \u00b6 swiss-prot KEGG COG GO ncRNA 4.\u57fa\u56e0\u7ec4\u7279\u5f81\u5c55\u793a \u00b6 circos 5.\u7ec6\u83cc \u00b6 \u57fa\u56e0\u7ec4\u6bd4\u8f83 \u00b6 1.\u5171\u7ebf\u6027\u5206\u6790 \u00b6 \u591a\u4e2a\u57fa\u56e0\u7ec4\u5206\u6790 \u00b6","title":"\u57fa\u4e8e\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u8fdb\u884c\u75c5\u539f\u7ec6\u83cc\u8010\u836f\u7814\u7a76"},{"location":"book/C18_Analysis-Examples/04_amr/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd\u57fa\u56e0\u7ec4\u6570\u636e\u8fdb\u884c\u8010\u836f\u57fa\u56e0\u7684\u7814\u7a76\u5b9e\u8df5\u3002","title":"\u57fa\u4e8e\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u8fdb\u884c\u75c5\u539f\u7ec6\u83cc\u8010\u836f\u7814\u7a76"},{"location":"book/C18_Analysis-Examples/04_amr/#_2","text":"# trimmomatic \u53d6\u51fa\u4f4e\u8d28\u91cf\u5e8f\u5217\u548c\u63a5\u5934\u5e8f\u5217 # \u53bb\u9664 NexteraPE-PE.fa \u6587\u4ef6\u4e2d\u7684\u63a5\u5934\u6587\u4ef6 # \u53d6\u51fa\u5934\u5c3e\u90e83\u78b1\u57fa\u8303\u56f4\u4e2dQ\u503c\u4f4e\u4e8e3\u7684\u8d28\u91cf\u78b1\u57fa # \u4ee54\u4e2a\u78b1\u57fa\u957f\u5ea6\u4e3a\u8bfb\u7801\u957f\u5ea6\uff0c\u53d6\u51fa\u5e73\u5747\u8d28\u91cf\u4f4e\u4e8e15\u7684\u526a\u8f91 # \u53d6\u51fa\u957f\u5ea6\u5c0f\u4e8e36bp\u7684\u78b1\u57fa $ export ADAPTER = $CONDA_PREFIX /share//trimmomatic-0.39-1/adapters $ trimmomatic PE -threads 4 -trimlog 02_trim/trim.log -summary 02_trim/ \\ > summary.log DRR015013_1.fastq.gz DRR015013_2.fastq.gz 02_trim/ \\ > DRR015013_1.clean.fq.gz 02_trim/DRR015013_1.trim.fq.gz 02_trim/ \\ > DRR015013_2.clean.fq.gz 02_trim/DRR015013_2.trim.fq.gz \\ > ILLUMINACLIP: $ADAPTER /NexteraPE-PE.fa:2:30:10 \\ > LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36 $ fastp","title":"\u6570\u636e\u8d28\u63a7"},{"location":"book/C18_Analysis-Examples/04_amr/#_3","text":"","title":"\u57fa\u56e0\u7ec4\u6570\u636e\u5904\u7406"},{"location":"book/C18_Analysis-Examples/04_amr/#1","text":"","title":"1.\u57fa\u56e0\u7ec4\u7ec4\u88c5"},{"location":"book/C18_Analysis-Examples/04_amr/#2","text":"","title":"2.\u57fa\u56e0\u7ec4\u6bd4\u5bf9"},{"location":"book/C18_Analysis-Examples/04_amr/#3","text":"swiss-prot KEGG COG GO ncRNA","title":"3.\u57fa\u56e0\u7ec4\u6ce8\u91ca"},{"location":"book/C18_Analysis-Examples/04_amr/#4","text":"circos","title":"4.\u57fa\u56e0\u7ec4\u7279\u5f81\u5c55\u793a"},{"location":"book/C18_Analysis-Examples/04_amr/#5","text":"","title":"5.\u7ec6\u83cc"},{"location":"book/C18_Analysis-Examples/04_amr/#_4","text":"","title":"\u57fa\u56e0\u7ec4\u6bd4\u8f83"},{"location":"book/C18_Analysis-Examples/04_amr/#1_1","text":"","title":"1.\u5171\u7ebf\u6027\u5206\u6790"},{"location":"book/C18_Analysis-Examples/04_amr/#_5","text":"","title":"\u591a\u4e2a\u57fa\u56e0\u7ec4\u5206\u6790"},{"location":"book/C19_Pipelines-and-Workflows/","text":"","title":"Index"},{"location":"book/C19_Pipelines-and-Workflows/01_snakemake/","text":"SnakeMake \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb","title":"SnakeMake"},{"location":"book/C19_Pipelines-and-Workflows/01_snakemake/#snakemake","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb","title":"SnakeMake"},{"location":"book/C19_Pipelines-and-Workflows/02_nextflow/","text":"Nextflow \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Reference \u00b6","title":"Nextflow"},{"location":"book/C19_Pipelines-and-Workflows/02_nextflow/#nextflow","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Nextflow"},{"location":"book/C19_Pipelines-and-Workflows/02_nextflow/#reference","text":"","title":"Reference"},{"location":"book/C19_Pipelines-and-Workflows/05_workflow-software/","text":"Workflow Software \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5e38\u89c1\u7684\u521b\u5efa\u6d41\u7a0b\u7c7b\u8f6f\u4ef6\uff1a Taverna Galaxy SHIWA DNANexus Snakemake Ruffus NextFlow GATK Queue \u66f4\u591a\u6d41\u7a0b\u8f6f\u4ef6\u53c2\u89c1 \u8fd9\u91cc \u3002","title":"05. workflow\u5de5\u5177\u8f6f\u4ef6"},{"location":"book/C19_Pipelines-and-Workflows/05_workflow-software/#workflow-software","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5e38\u89c1\u7684\u521b\u5efa\u6d41\u7a0b\u7c7b\u8f6f\u4ef6\uff1a Taverna Galaxy SHIWA DNANexus Snakemake Ruffus NextFlow GATK Queue \u66f4\u591a\u6d41\u7a0b\u8f6f\u4ef6\u53c2\u89c1 \u8fd9\u91cc \u3002","title":"Workflow Software"},{"location":"book/C20_Galaxy-Platform/01_install/","text":"\u5b89\u88c5 Galaxy \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5b89\u88c5\u65b9\u5f0f1. \u00b6 \u4e0b\u8f7d\u6e90\u4ee3\u7801 # git clone github\u4e0a\u6258\u7ba1\u7684\u6e90\u4ee3\u7801 # -b \u6307\u5b9a\u5206\u652f\uff0c\u6bd4\u5982\u76ee\u524d\u6700\u65b0\u7248\u672c\u7684\u5206\u652frelease_20.05\uff0c\u8ffd\u6c42stable\u7a33\u5b9a\u53d1\u5e03\u7248\u7684\u53ef\u4ee5\u9009\u62e9\u8fd9\u4e2a\u5206\u652f $ git clone -b release_20.05 https://github.com/galaxyproject/galaxy/ # \u5982\u679c\u5c1d\u8bd5\u65b0\u529f\u80fd\u7684\uff0c\u53ef\u4ee5\u4e0b\u8f7dmaster\u5206\u652f\u4ee3\u7801 $ git clone -b master https://github.com/galaxyproject/galaxy/ \u8fd0\u884c\u7a0b\u5e8f\uff0c\u6700\u7406\u60f3\u7684\u65b9\u5f0f\u8fd8\u662f\u91c7\u7528\u865a\u62df\u73af\u5883\uff0c\u6bd4\u5982\u7528conda\u5efa\u7acb\u3002\u56e0\u4e3agalaxy\u662fpython\u5f00\u53d1\u7684\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528\u4f17\u591a\u7684python\u865a\u62df\u73af\u5883\u5305\u5efa\u7acb\u3002 # conda \u73af\u5883 $ conda create -n galaxy $ conda activate galaxy # \u521d\u59cb\u5316galaxy\uff0c\u7b2c\u4e00\u6b21\u8fd0\u884crun.sh\u811a\u672c\u4f1a\u68c0\u67e5\u73af\u5883\u5e76\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6 ( galaxy ) $ cd galaxy && sh run.sh \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee 127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230galaxy\u7684\u663e\u793a\u9875\u9762\u3002 \u5b89\u88c5\u65b9\u5f0f2. docker\u65b9\u5f0f \u00b6 Galaxy \u7531\u4e8e\u4f9d\u8d56\u4f17\u591a\uff0c\u5b89\u88c5\u6bd4\u8f83\u590d\u6742\uff0c\u63a8\u8350\u7528 docker \u955c\u50cf\u5b89\u88c5\uff0c\u6bd4\u8f83\u7b80\u5355\u3002\u4f46\u662f\u5bf9docker\u9700\u8981\u6709\u4e00\u5b9a\u7684\u4e86\u89e3\uff0c\u7279\u522b\u662f\u914d\u7f6e\u6570\u636e\u5377\u65b9\u9762\u3002 # \u4e0b\u8f7d\u955c\u50cf $ docker pull bgruening/galaxy-stable # \u8fd0\u884cimages $ docker run -d -p 8080 :80 -p 8021 :21 -p 8022 :22 bgruening/galaxy-stable # \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee http://127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230 galaxy \u754c\u9762 Reference \u00b6 https://mimodd.readthedocs.io/en/latest/install_galaxy.html 2.","title":"\u5b89\u88c5 Galaxy"},{"location":"book/C20_Galaxy-Platform/01_install/#galaxy","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"\u5b89\u88c5 Galaxy"},{"location":"book/C20_Galaxy-Platform/01_install/#1","text":"\u4e0b\u8f7d\u6e90\u4ee3\u7801 # git clone github\u4e0a\u6258\u7ba1\u7684\u6e90\u4ee3\u7801 # -b \u6307\u5b9a\u5206\u652f\uff0c\u6bd4\u5982\u76ee\u524d\u6700\u65b0\u7248\u672c\u7684\u5206\u652frelease_20.05\uff0c\u8ffd\u6c42stable\u7a33\u5b9a\u53d1\u5e03\u7248\u7684\u53ef\u4ee5\u9009\u62e9\u8fd9\u4e2a\u5206\u652f $ git clone -b release_20.05 https://github.com/galaxyproject/galaxy/ # \u5982\u679c\u5c1d\u8bd5\u65b0\u529f\u80fd\u7684\uff0c\u53ef\u4ee5\u4e0b\u8f7dmaster\u5206\u652f\u4ee3\u7801 $ git clone -b master https://github.com/galaxyproject/galaxy/ \u8fd0\u884c\u7a0b\u5e8f\uff0c\u6700\u7406\u60f3\u7684\u65b9\u5f0f\u8fd8\u662f\u91c7\u7528\u865a\u62df\u73af\u5883\uff0c\u6bd4\u5982\u7528conda\u5efa\u7acb\u3002\u56e0\u4e3agalaxy\u662fpython\u5f00\u53d1\u7684\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528\u4f17\u591a\u7684python\u865a\u62df\u73af\u5883\u5305\u5efa\u7acb\u3002 # conda \u73af\u5883 $ conda create -n galaxy $ conda activate galaxy # \u521d\u59cb\u5316galaxy\uff0c\u7b2c\u4e00\u6b21\u8fd0\u884crun.sh\u811a\u672c\u4f1a\u68c0\u67e5\u73af\u5883\u5e76\u5b89\u88c5\u4f9d\u8d56\u8f6f\u4ef6 ( galaxy ) $ cd galaxy && sh run.sh \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee 127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230galaxy\u7684\u663e\u793a\u9875\u9762\u3002","title":"\u5b89\u88c5\u65b9\u5f0f1."},{"location":"book/C20_Galaxy-Platform/01_install/#2-docker","text":"Galaxy \u7531\u4e8e\u4f9d\u8d56\u4f17\u591a\uff0c\u5b89\u88c5\u6bd4\u8f83\u590d\u6742\uff0c\u63a8\u8350\u7528 docker \u955c\u50cf\u5b89\u88c5\uff0c\u6bd4\u8f83\u7b80\u5355\u3002\u4f46\u662f\u5bf9docker\u9700\u8981\u6709\u4e00\u5b9a\u7684\u4e86\u89e3\uff0c\u7279\u522b\u662f\u914d\u7f6e\u6570\u636e\u5377\u65b9\u9762\u3002 # \u4e0b\u8f7d\u955c\u50cf $ docker pull bgruening/galaxy-stable # \u8fd0\u884cimages $ docker run -d -p 8080 :80 -p 8021 :21 -p 8022 :22 bgruening/galaxy-stable # \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee http://127.0.0.1:8080 \u53ef\u4ee5\u770b\u5230 galaxy \u754c\u9762","title":"\u5b89\u88c5\u65b9\u5f0f2. docker\u65b9\u5f0f"},{"location":"book/C20_Galaxy-Platform/01_install/#reference","text":"https://mimodd.readthedocs.io/en/latest/install_galaxy.html 2.","title":"Reference"},{"location":"book/C20_Galaxy-Platform/02_configure/","text":"\u914d\u7f6e Galaxy \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} # \u914d\u7f6e\u4e3b\u8bbe\u7f6e\u6587\u4ef6 ( galaxy ) $ cd galaxy ( galaxy ) $ cp galaxy.yml.sample galaxy.yml \u5efa\u7acb\u7ba1\u7406\u5458 \u6ce8\u518c\u4e00\u4e2a\u65b0\u7528\u6237\uff0c\u5c06\u5176email\u5730\u5740\u4f5c\u4e3a\u7ba1\u7406\u5458\u7528\u6237\u6dfb\u52a0\u5230 galaxy.yml \u4e2d\u3002 # \u6dfb\u52a0admin\uff0c\u5c06\u5b9e\u9645\u7684\u6ce8\u518cemail\u4fe1\u606f\u586b\u5165\uff0c\u5982\u679c\u8981\u591a\u4e2a\u7ba1\u7406\u5458\uff0c\u7528\u9017\u53f7\u533a\u5206 admin_users: abc@123.com,myuser@new.com \u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7ba1\u7406\u5458\u540e\uff0c\u5728\u4e3b\u9875\u83dc\u5355\u680f\u4e2d\u4f1a\u51fa\u73b0 \u7ba1\u7406\u5458 \u83dc\u5355\uff0c\u70b9\u51fb\u8fdb\u5165\u3002","title":"\u914d\u7f6e Galaxy"},{"location":"book/C20_Galaxy-Platform/02_configure/#galaxy","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} # \u914d\u7f6e\u4e3b\u8bbe\u7f6e\u6587\u4ef6 ( galaxy ) $ cd galaxy ( galaxy ) $ cp galaxy.yml.sample galaxy.yml \u5efa\u7acb\u7ba1\u7406\u5458 \u6ce8\u518c\u4e00\u4e2a\u65b0\u7528\u6237\uff0c\u5c06\u5176email\u5730\u5740\u4f5c\u4e3a\u7ba1\u7406\u5458\u7528\u6237\u6dfb\u52a0\u5230 galaxy.yml \u4e2d\u3002 # \u6dfb\u52a0admin\uff0c\u5c06\u5b9e\u9645\u7684\u6ce8\u518cemail\u4fe1\u606f\u586b\u5165\uff0c\u5982\u679c\u8981\u591a\u4e2a\u7ba1\u7406\u5458\uff0c\u7528\u9017\u53f7\u533a\u5206 admin_users: abc@123.com,myuser@new.com \u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u7ba1\u7406\u5458\u540e\uff0c\u5728\u4e3b\u9875\u83dc\u5355\u680f\u4e2d\u4f1a\u51fa\u73b0 \u7ba1\u7406\u5458 \u83dc\u5355\uff0c\u70b9\u51fb\u8fdb\u5165\u3002","title":"\u914d\u7f6e Galaxy"},{"location":"book/C20_Galaxy-Platform/03_toolshed/","text":"\u5b89\u88c5\u5206\u6790\u5de5\u5177 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"\u5b89\u88c5\u5206\u6790\u5de5\u5177"},{"location":"book/C20_Galaxy-Platform/03_toolshed/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"\u5b89\u88c5\u5206\u6790\u5de5\u5177"},{"location":"book/C20_Galaxy-Platform/04_usage/","text":"\u4f7f\u7528\u793a\u4f8b\u4ecb\u7ecd \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"\u4f7f\u7528\u793a\u4f8b\u4ecb\u7ecd"},{"location":"book/C20_Galaxy-Platform/04_usage/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"\u4f7f\u7528\u793a\u4f8b\u4ecb\u7ecd"},{"location":"book/C20_Others/00_download-genome-data/","text":"\u547d\u4ee4\u884c\u4e0b\u8f7d\u516c\u5171\u6570\u636e\u5e93\u4e2d\u57fa\u56e0\u7ec4\u6570\u636e \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u672c\u8282\u7b80\u4ecb \u7b80\u4ecb\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u4ece\u516c\u5171\u6570\u636e\u5e93\u4e2d\u4e0b\u8f7d\u5404\u79cd\u57fa\u56e0\u7ec4\u6570\u636e\u3002 \u5171\u516c\u5171\u6570\u636e\u5e93\u4e2d\u4e0b\u8f7d\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u6700\u5e38\u7528\u7684\u4ece NCBI \u7684 Assembly, Genbank \u7b49\u6570\u636e\u5e93\u4e0b\u8f7d fasta/genbank \u683c\u5f0f\u7684\u6570\u636e\uff0c\u6216\u8005\u4ece SRA \u4e0b\u8f7d\u6d4b\u5e8f\u539f\u59cb\u6570\u636e\u3002 SRA\u6570\u636e\u4e0b\u8f7d\u65b9\u5f0f\u66f4\u65b0 \u76ee\u524d NCBI \u5df2\u5c06\u65b0\u63d0\u4ea4\u7684 SRA \u6570\u636e\u653e\u5230 AWS \u548c GCP \u4e91\u670d\u52a1\u5668\u7aef\uff0cNCBI\u670d\u52a1\u5668\u53ea\u4fdd\u7559\u4e86\u90e8\u5206\u8001\u7684 SRA \u6570\u636e\u3002\u8fc7\u53bb\u7528 aspera \u5feb\u901f\u4e0b\u8f7d\u65b0\u6570\u636e\u7684\u65b9\u5f0f\u5df2\u7ecf\u65e0\u6cd5\u4f7f\u7528\uff0c\u5982\u679c\u8c03\u7528 prefetch \u53ea\u80fd\u7528 https \u6a21\u5f0f\u4e0b\u8f7d\uff0c\u56fd\u5185\u901f\u5ea6\u4f1a\u6bd4\u8f83\u6162\u3002\u5982\u679c\u4f60\u5728\u56fd\u5916\uff0c\u6216\u8005\u6709\u5feb\u901f\u7684\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u8fd8\u53ef\u4ee5\u83b7\u5f97\u6bd4\u8f83\u4f18\u79c0\u7684\u4e0b\u8f7d\u901f\u5ea6\u3002\u5982\u679c\u5b89\u88c5\u4e86 AWS \u548c GCP \u7684\u547d\u4ee4\u884c\u5de5\u5177\u4e0b\u8f7d\uff0c\u56fd\u5185\u8bbf\u95ee GCP \u9700\u8981\u4ee3\u7406\uff0c\u800c AWS \u7684 S3 \u670d\u52a1\u5668\u4e5f\u4e0d\u5b9a\u65f6\u62bd\u98ce\uff0c\u57fa\u672c\u4e0a\u4e5f\u8981\u9760\u4ee3\u7406\u3002 \u9996\u5148\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\uff0c\u5b89\u88c5\u6240\u9700\u7684\u4e0b\u8f7d\u5de5\u5177\u3002 # \u6784\u5efa\u73af\u5883 $ conda create -n dlngs $ conda activate dlngs 1.\u4e0b\u8f7d Assembly \u6570\u636e \u00b6 # \u4e0b\u8f7d NCBI entrez-direct \u5de5\u5177 ( dlngs ) $ conda install entrez-direct # ( dlngs ) $ esearch -query | efetch 2.\u4e0b\u8f7d SRA \u6570\u636e \u00b6 \u9996\u5148\u8981\u5b89\u88c5 sra-tools \u5de5\u5177 ( dlngs ) $ conda install sra-tools prefetch \u4e0b\u8f7d fastq-dump fasterq-dump vdb-config \u8bbe\u7f6e sra-tools \u5de5\u5177\u7684\u53c2\u6570 \u4ece EBI \u4e0b\u8f7d FastQ \u6570\u636e \u00b6 EBI ENA \u652f\u6301\u76f4\u63a5\u4e0b\u8f7d fastq \u683c\u5f0f\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u7528 aspera \u52a0\u901f\u4e0b\u8f7d\u3002 ( dlngs ) $ conda install -c hcc aspera-cli \u4f7f\u7528 ascp \u4e0b\u8f7d fastq \u6570\u636e\u793a\u4f8b ( dlngs ) $ ascp -QT -l 100m -P33001 -i $CONDA_PREFIX /etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/SRR100/000/SRR1001720/SRR1001720_1.fastq.gz . \u4f7f\u7528 ftp \u6a21\u5f0f\u4e0b\u8f7d ( dlngs ) $ aria2c ftp://ftp.ebi.ac.uk/vol1/fastq/SRR100/000/SRR1001720/SRR1001720_1.fastq.gz \u5982\u679c\u6211\u4eec\u5e0c\u671b\u6279\u91cf\u4e0b\u8f7d\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u811a\u672c\u3002\u73b0\u5c06\u8981\u4e0b\u8f7d\u7684SRA\u6570\u636e\u7684Accession\u4fdd\u5b58\u6210list.txt\u6587\u4ef6\uff0c\u7136\u540e\u7528 ena-dl.sh list.txt output \u4e0b\u8f7d\u5230output\u76ee\u5f55 #!/bin/sh # ena-dl.sh list.txt for i in $( cat $1 ) ; do ascp -QT -l 100m -P33001 -i $CONDA_PREFIX /etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/ ${ i : 0 : 6 } /00 ${ i : 0 -1: 1 } / $i / ${ i } _1.fastq.gz $2 / ${ i } _1.fastq.gz ; ascp -QT -l 100m -P33001 -i $CONDA_PREFIX /etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/ ${ i : 0 : 6 } /00 ${ i : 0 -1: 1 } / $i / ${ i } _2.fastq.gz $2 / ${ i } _2.fastq.gz ; done \u5982\u679c\u662fSE\u6d4b\u5e8f\uff0c\u90a3\u4e48\u53ea\u6709_1.fastq.gz\u6587\u4ef6\u53ef\u4ee5\u88ab\u4e0b\u8f7d\u3002\u5982\u679c\u662f6\u4f4d\u957f\u5ea6\u7684SRA\u6587\u4ef6\uff0c\u5219\u4e0d\u9700\u8981000\u7684\u672b\u5c3e\u7f16\u53f7\u3002","title":"\u547d\u4ee4\u884c\u4e0b\u8f7d\u516c\u5171\u6570\u636e\u5e93\u4e2d\u57fa\u56e0\u7ec4\u6570\u636e"},{"location":"book/C20_Others/00_download-genome-data/#_1","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u672c\u8282\u7b80\u4ecb \u7b80\u4ecb\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u4ece\u516c\u5171\u6570\u636e\u5e93\u4e2d\u4e0b\u8f7d\u5404\u79cd\u57fa\u56e0\u7ec4\u6570\u636e\u3002 \u5171\u516c\u5171\u6570\u636e\u5e93\u4e2d\u4e0b\u8f7d\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u6700\u5e38\u7528\u7684\u4ece NCBI \u7684 Assembly, Genbank \u7b49\u6570\u636e\u5e93\u4e0b\u8f7d fasta/genbank \u683c\u5f0f\u7684\u6570\u636e\uff0c\u6216\u8005\u4ece SRA \u4e0b\u8f7d\u6d4b\u5e8f\u539f\u59cb\u6570\u636e\u3002 SRA\u6570\u636e\u4e0b\u8f7d\u65b9\u5f0f\u66f4\u65b0 \u76ee\u524d NCBI \u5df2\u5c06\u65b0\u63d0\u4ea4\u7684 SRA \u6570\u636e\u653e\u5230 AWS \u548c GCP \u4e91\u670d\u52a1\u5668\u7aef\uff0cNCBI\u670d\u52a1\u5668\u53ea\u4fdd\u7559\u4e86\u90e8\u5206\u8001\u7684 SRA \u6570\u636e\u3002\u8fc7\u53bb\u7528 aspera \u5feb\u901f\u4e0b\u8f7d\u65b0\u6570\u636e\u7684\u65b9\u5f0f\u5df2\u7ecf\u65e0\u6cd5\u4f7f\u7528\uff0c\u5982\u679c\u8c03\u7528 prefetch \u53ea\u80fd\u7528 https \u6a21\u5f0f\u4e0b\u8f7d\uff0c\u56fd\u5185\u901f\u5ea6\u4f1a\u6bd4\u8f83\u6162\u3002\u5982\u679c\u4f60\u5728\u56fd\u5916\uff0c\u6216\u8005\u6709\u5feb\u901f\u7684\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u8fd8\u53ef\u4ee5\u83b7\u5f97\u6bd4\u8f83\u4f18\u79c0\u7684\u4e0b\u8f7d\u901f\u5ea6\u3002\u5982\u679c\u5b89\u88c5\u4e86 AWS \u548c GCP \u7684\u547d\u4ee4\u884c\u5de5\u5177\u4e0b\u8f7d\uff0c\u56fd\u5185\u8bbf\u95ee GCP \u9700\u8981\u4ee3\u7406\uff0c\u800c AWS \u7684 S3 \u670d\u52a1\u5668\u4e5f\u4e0d\u5b9a\u65f6\u62bd\u98ce\uff0c\u57fa\u672c\u4e0a\u4e5f\u8981\u9760\u4ee3\u7406\u3002 \u9996\u5148\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\uff0c\u5b89\u88c5\u6240\u9700\u7684\u4e0b\u8f7d\u5de5\u5177\u3002 # \u6784\u5efa\u73af\u5883 $ conda create -n dlngs $ conda activate dlngs","title":"\u547d\u4ee4\u884c\u4e0b\u8f7d\u516c\u5171\u6570\u636e\u5e93\u4e2d\u57fa\u56e0\u7ec4\u6570\u636e"},{"location":"book/C20_Others/00_download-genome-data/#1-assembly","text":"# \u4e0b\u8f7d NCBI entrez-direct \u5de5\u5177 ( dlngs ) $ conda install entrez-direct # ( dlngs ) $ esearch -query | efetch","title":"1.\u4e0b\u8f7d Assembly \u6570\u636e"},{"location":"book/C20_Others/00_download-genome-data/#2-sra","text":"\u9996\u5148\u8981\u5b89\u88c5 sra-tools \u5de5\u5177 ( dlngs ) $ conda install sra-tools prefetch \u4e0b\u8f7d fastq-dump fasterq-dump vdb-config \u8bbe\u7f6e sra-tools \u5de5\u5177\u7684\u53c2\u6570","title":"2.\u4e0b\u8f7d SRA \u6570\u636e"},{"location":"book/C20_Others/00_download-genome-data/#ebi-fastq","text":"EBI ENA \u652f\u6301\u76f4\u63a5\u4e0b\u8f7d fastq \u683c\u5f0f\u7684\u57fa\u56e0\u7ec4\u6570\u636e\uff0c\u53ef\u4ee5\u7528 aspera \u52a0\u901f\u4e0b\u8f7d\u3002 ( dlngs ) $ conda install -c hcc aspera-cli \u4f7f\u7528 ascp \u4e0b\u8f7d fastq \u6570\u636e\u793a\u4f8b ( dlngs ) $ ascp -QT -l 100m -P33001 -i $CONDA_PREFIX /etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/SRR100/000/SRR1001720/SRR1001720_1.fastq.gz . \u4f7f\u7528 ftp \u6a21\u5f0f\u4e0b\u8f7d ( dlngs ) $ aria2c ftp://ftp.ebi.ac.uk/vol1/fastq/SRR100/000/SRR1001720/SRR1001720_1.fastq.gz \u5982\u679c\u6211\u4eec\u5e0c\u671b\u6279\u91cf\u4e0b\u8f7d\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u811a\u672c\u3002\u73b0\u5c06\u8981\u4e0b\u8f7d\u7684SRA\u6570\u636e\u7684Accession\u4fdd\u5b58\u6210list.txt\u6587\u4ef6\uff0c\u7136\u540e\u7528 ena-dl.sh list.txt output \u4e0b\u8f7d\u5230output\u76ee\u5f55 #!/bin/sh # ena-dl.sh list.txt for i in $( cat $1 ) ; do ascp -QT -l 100m -P33001 -i $CONDA_PREFIX /etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/ ${ i : 0 : 6 } /00 ${ i : 0 -1: 1 } / $i / ${ i } _1.fastq.gz $2 / ${ i } _1.fastq.gz ; ascp -QT -l 100m -P33001 -i $CONDA_PREFIX /etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/ ${ i : 0 : 6 } /00 ${ i : 0 -1: 1 } / $i / ${ i } _2.fastq.gz $2 / ${ i } _2.fastq.gz ; done \u5982\u679c\u662fSE\u6d4b\u5e8f\uff0c\u90a3\u4e48\u53ea\u6709_1.fastq.gz\u6587\u4ef6\u53ef\u4ee5\u88ab\u4e0b\u8f7d\u3002\u5982\u679c\u662f6\u4f4d\u957f\u5ea6\u7684SRA\u6587\u4ef6\uff0c\u5219\u4e0d\u9700\u8981000\u7684\u672b\u5c3e\u7f16\u53f7\u3002","title":"\u4ece EBI \u4e0b\u8f7d FastQ \u6570\u636e"},{"location":"book/C20_Others/01_genomic-data-simulation/","text":"\u57fa\u56e0\u7ec4\u6570\u636e\u6a21\u62df \u00b6 \u5f53\u9700\u8981\u5bf9\u6240\u5f00\u53d1\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u8f6f\u4ef6\u8fdb\u884c\u6d4b\u8bd5\u65f6\uff0c\u4f7f\u7528\u6a21\u62df\u6570\u636e\u53ef\u4ee5 illumina fastq\u6570\u636e\u6a21\u62df \u00b6","title":"\u57fa\u56e0\u7ec4\u6570\u636e\u6a21\u62df"},{"location":"book/C20_Others/01_genomic-data-simulation/#_1","text":"\u5f53\u9700\u8981\u5bf9\u6240\u5f00\u53d1\u7684\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u8f6f\u4ef6\u8fdb\u884c\u6d4b\u8bd5\u65f6\uff0c\u4f7f\u7528\u6a21\u62df\u6570\u636e\u53ef\u4ee5","title":"\u57fa\u56e0\u7ec4\u6570\u636e\u6a21\u62df"},{"location":"book/C20_Others/01_genomic-data-simulation/#illumina-fastq","text":"","title":"illumina fastq\u6570\u636e\u6a21\u62df"},{"location":"book/C20_Others/02_gi-to-accession/","text":"GI to Accession Number \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u5c06\u539f\u6765\u6570\u636e\u4e2d\u7684GI\u8f6c\u6362\u6210\u76ee\u524dNCBI\u4f7f\u7528\u7684Accession\u3002 NCBI \u5df2\u7ecf\u53d6\u6d88\u4e86 gi \uff0c\u5168\u9762\u8f6c\u5411\u4f7f\u7528 accession \u3002\u5982\u679c\u624b\u4e0a\u7684\u6570\u636e\u8fd8\u662f gi \u53f7\uff0c\u5efa\u8bae\u5c06\u5176\u8fdb\u884c\u8f6c\u6362\u3002 1. \u8f6c\u6362\u65b9\u6cd5 \u00b6 1.1 \u4f7f\u7528E-utilies \u00b6 \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u5730\u5740\u680f\u91cc\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5c06\u4f60\u60f3\u67e5\u8be2 gi \u7f16\u53f7\u653e\u5728 id= \u540e\u9762\uff0c\u591a\u4e2a gi \u53ef\u4ee5\u7528\u9017\u53f7\u5206\u9694\u3002\u8bbf\u95ee\u8be5\u5730\u5740\u5373\u53ef\u83b7\u5f97\u5bf9\u5e94\u7684 accession\u3002\u4f8b\u5982\uff1a https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=nuccore&id=663070995,568815587&rettype=acc \u8bbf\u95ee\u8fd9\u4e2a\u5730\u5740\uff0c\u5c06id=...\u6570\u5b57\u6362\u6210\u4f60\u60f3\u8981\u67e5\u8be2\u7684gi\u53f7\uff0c\u83b7\u5f97\u7684\u7ed3\u679c\u5c31\u662fnuccore\u6570\u636e\u5e93\u4e2d\u7684accession\u53f7\uff0c\u540c\u65f6\u67e5\u8be2\u591a\u4e2agi\u662f\uff0c\u7528 , \u5206\u9694\u3002 1.2 \u4f7f\u7528edirect \u00b6 \u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u5e2e\u52a9\u6279\u91cf\u8f6c\u6362\uff0c\u6bd4\u5982\u8001\u7248\u672c\u7684\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93VFDB\u91cc\u8bb8\u591a\u5e8f\u5217\u4f7f\u7528\u7684\u8fd8\u662fgi\u7f16\u53f7\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u4f8b\u5b50\u91cc\u7684\u547d\u4ee4\u8fdb\u884c\u8f6c\u6362\u3002\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8f6c\u6362\u597d\u7684\u6587\u4ef6\uff1a https://github.com/indexofire/VFDB_update # efetch \u83b7\u53d6 accession $ efetch -db nuccore -id 663070995 -format acc # \u6279\u91cf\u4fee\u6539 VFDB \u6587\u4ef6\uff0c\u65e0NCBI\u8d26\u6237\u6bcf\u79d2\u53ea\u80fd\u53d1\u51fa3\u6b21\u7533\u8bf7 $ cp VFDB_setB_nt.fas VFDB_setB_nt.fas.bak $ for i in $( grep 'gi:' VFDB_setB_nt.fas | awk -F '(' '{print $2}' | awk -F ')' '{print $1}' ) ; do r = ` efetch -db nuccore -id ${ i #gi: } -format acc ` ; sed -i 's/' $i '/' $r '/g' ; sleep 0 .1 ; done 1.3 gi2accession.py \u00b6 \u4e0b\u8f7d ftp://ftp.ncbi.nlm.nih.gov/genbank/livelists/gi2acc_mapping/ \u4e0b\u6570\u636e\u5e93\u548c\u4fee\u6539\u811a\u672cgi2_accession.py\u3002\u6570\u636e\u5e93\u6587\u4ef6\u6bd4\u8f83\u5927\uff0c\u9664\u975e\u9700\u8981\u8f6c\u6362\u7684\u91cf\u5927\u6216\u8005\u9891\u7387\u9ad8\uff0c\u4e00\u822c\u4e0d\u5efa\u8bae # \u8fd0\u884c gi2_accession.py \u811a\u672c\uff0c\u8f6c\u6362\u5355\u4e2agi $ python gi2_accession.py gi: 42 42 CAA44840.1 416 # \u6279\u91cf\u83b7\u5f97\u7ed3\u679c $ python gi2_accession.py < list_ids.txt 2. \u8865\u5145\u6750\u6599 \u00b6 2.1 Refseq Accession \u542b\u4e49 \u00b6 NCBI\u7684URL\u9075\u5faaURI\u8bbe\u8ba1\u539f\u5219\uff0c\u56e0\u6b64\u6211\u4eec\u770b\u5230NCBI\u5e8f\u5217\u7684accession\u7f16\u53f7\u76f4\u63a5\u6307\u5411\u94fe\u63a5\u3002Refseq\u6570\u636e\u5e93\u4e2d\u4e0d\u540c\u7684\u7f16\u53f7\u99962\u4f4d\u5b57\u6bcd\u4ee3\u8868\u4e0d\u540c\u7684\u542b\u4e49\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5b57\u6bcd\u6765\u5224\u65ad\u5e8f\u5217\u7684\u6765\u6e90\u6216\u8005\u7279\u5f81\u3002 Accession prefix Molecule type Comment AC_ Genomic \u5b8c\u6574\u57fa\u56e0\u7ec4\u5e8f\u5217 NC_ Genomic \u5b8c\u6574\u57fa\u56e0\u7ec4\u5e8f\u5217 NG_ Genomic \u4e0d\u5b8c\u6574\u7684\u57fa\u56e0\u7ec4\uff0c\u5982\u57fa\u56e0\u7ec4\u7279\u5b9a\u533a\u57df\u5e8f\u5217 NT_ Genomic \u57fa\u4e8e\u5206\u5b50\u514b\u9686\u6216WGS[1]\u83b7\u5f97\u7684 Contig or scaffold NW_ Genomic WGS[1]\u6d4b\u5e8f\u83b7\u5f97\u7684 Contig or scaffold NZ_[2] Genomic \u5168\u57fa\u56e0\u7ec4\u6216\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u672a\u5b8c\u6210\u5e8f\u5217\u6570\u636e NM_ mRNA Protein-coding transcripts (usually curated) NR_ RNA Non-protein-coding transcripts XM_[3] mRNA Predicted model protein-coding transcript XR_[3] RNA Predicted model non-protein-coding transcript AP_ Protein Protein Annotated on AC_ alternate assembly NP_ Protein Protein Associated with an NM_ or NC_ accession YP_[3] Protein Annotated on genomic molecules without an instantiated transcript record XP_ Protein Predicted model, associated with an XM_ accession WP_ Protein Non-redundant across multiple strains and species - [1]\uff1a whole genomic sequence - [2]\uff1a An ordered collection of WGS sequence for a genome. - [3]\uff1a computed Reference \u00b6 Refseq Accession Dict NCBI Youtube Tutorial","title":"02. GI\u8f6cAccession"},{"location":"book/C20_Others/02_gi-to-accession/#gi-to-accession-number","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u5c06\u539f\u6765\u6570\u636e\u4e2d\u7684GI\u8f6c\u6362\u6210\u76ee\u524dNCBI\u4f7f\u7528\u7684Accession\u3002 NCBI \u5df2\u7ecf\u53d6\u6d88\u4e86 gi \uff0c\u5168\u9762\u8f6c\u5411\u4f7f\u7528 accession \u3002\u5982\u679c\u624b\u4e0a\u7684\u6570\u636e\u8fd8\u662f gi \u53f7\uff0c\u5efa\u8bae\u5c06\u5176\u8fdb\u884c\u8f6c\u6362\u3002","title":"GI to Accession Number"},{"location":"book/C20_Others/02_gi-to-accession/#1","text":"","title":"1. \u8f6c\u6362\u65b9\u6cd5"},{"location":"book/C20_Others/02_gi-to-accession/#11-e-utilies","text":"\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u5730\u5740\u680f\u91cc\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5c06\u4f60\u60f3\u67e5\u8be2 gi \u7f16\u53f7\u653e\u5728 id= \u540e\u9762\uff0c\u591a\u4e2a gi \u53ef\u4ee5\u7528\u9017\u53f7\u5206\u9694\u3002\u8bbf\u95ee\u8be5\u5730\u5740\u5373\u53ef\u83b7\u5f97\u5bf9\u5e94\u7684 accession\u3002\u4f8b\u5982\uff1a https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=nuccore&id=663070995,568815587&rettype=acc \u8bbf\u95ee\u8fd9\u4e2a\u5730\u5740\uff0c\u5c06id=...\u6570\u5b57\u6362\u6210\u4f60\u60f3\u8981\u67e5\u8be2\u7684gi\u53f7\uff0c\u83b7\u5f97\u7684\u7ed3\u679c\u5c31\u662fnuccore\u6570\u636e\u5e93\u4e2d\u7684accession\u53f7\uff0c\u540c\u65f6\u67e5\u8be2\u591a\u4e2agi\u662f\uff0c\u7528 , \u5206\u9694\u3002","title":"1.1 \u4f7f\u7528E-utilies"},{"location":"book/C20_Others/02_gi-to-accession/#12-edirect","text":"\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u5e2e\u52a9\u6279\u91cf\u8f6c\u6362\uff0c\u6bd4\u5982\u8001\u7248\u672c\u7684\u6bd2\u529b\u57fa\u56e0\u6570\u636e\u5e93VFDB\u91cc\u8bb8\u591a\u5e8f\u5217\u4f7f\u7528\u7684\u8fd8\u662fgi\u7f16\u53f7\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u4f8b\u5b50\u91cc\u7684\u547d\u4ee4\u8fdb\u884c\u8f6c\u6362\u3002\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8f6c\u6362\u597d\u7684\u6587\u4ef6\uff1a https://github.com/indexofire/VFDB_update # efetch \u83b7\u53d6 accession $ efetch -db nuccore -id 663070995 -format acc # \u6279\u91cf\u4fee\u6539 VFDB \u6587\u4ef6\uff0c\u65e0NCBI\u8d26\u6237\u6bcf\u79d2\u53ea\u80fd\u53d1\u51fa3\u6b21\u7533\u8bf7 $ cp VFDB_setB_nt.fas VFDB_setB_nt.fas.bak $ for i in $( grep 'gi:' VFDB_setB_nt.fas | awk -F '(' '{print $2}' | awk -F ')' '{print $1}' ) ; do r = ` efetch -db nuccore -id ${ i #gi: } -format acc ` ; sed -i 's/' $i '/' $r '/g' ; sleep 0 .1 ; done","title":"1.2 \u4f7f\u7528edirect"},{"location":"book/C20_Others/02_gi-to-accession/#13-gi2accessionpy","text":"\u4e0b\u8f7d ftp://ftp.ncbi.nlm.nih.gov/genbank/livelists/gi2acc_mapping/ \u4e0b\u6570\u636e\u5e93\u548c\u4fee\u6539\u811a\u672cgi2_accession.py\u3002\u6570\u636e\u5e93\u6587\u4ef6\u6bd4\u8f83\u5927\uff0c\u9664\u975e\u9700\u8981\u8f6c\u6362\u7684\u91cf\u5927\u6216\u8005\u9891\u7387\u9ad8\uff0c\u4e00\u822c\u4e0d\u5efa\u8bae # \u8fd0\u884c gi2_accession.py \u811a\u672c\uff0c\u8f6c\u6362\u5355\u4e2agi $ python gi2_accession.py gi: 42 42 CAA44840.1 416 # \u6279\u91cf\u83b7\u5f97\u7ed3\u679c $ python gi2_accession.py < list_ids.txt","title":"1.3 gi2accession.py"},{"location":"book/C20_Others/02_gi-to-accession/#2","text":"","title":"2. \u8865\u5145\u6750\u6599"},{"location":"book/C20_Others/02_gi-to-accession/#21-refseq-accession","text":"NCBI\u7684URL\u9075\u5faaURI\u8bbe\u8ba1\u539f\u5219\uff0c\u56e0\u6b64\u6211\u4eec\u770b\u5230NCBI\u5e8f\u5217\u7684accession\u7f16\u53f7\u76f4\u63a5\u6307\u5411\u94fe\u63a5\u3002Refseq\u6570\u636e\u5e93\u4e2d\u4e0d\u540c\u7684\u7f16\u53f7\u99962\u4f4d\u5b57\u6bcd\u4ee3\u8868\u4e0d\u540c\u7684\u542b\u4e49\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5b57\u6bcd\u6765\u5224\u65ad\u5e8f\u5217\u7684\u6765\u6e90\u6216\u8005\u7279\u5f81\u3002 Accession prefix Molecule type Comment AC_ Genomic \u5b8c\u6574\u57fa\u56e0\u7ec4\u5e8f\u5217 NC_ Genomic \u5b8c\u6574\u57fa\u56e0\u7ec4\u5e8f\u5217 NG_ Genomic \u4e0d\u5b8c\u6574\u7684\u57fa\u56e0\u7ec4\uff0c\u5982\u57fa\u56e0\u7ec4\u7279\u5b9a\u533a\u57df\u5e8f\u5217 NT_ Genomic \u57fa\u4e8e\u5206\u5b50\u514b\u9686\u6216WGS[1]\u83b7\u5f97\u7684 Contig or scaffold NW_ Genomic WGS[1]\u6d4b\u5e8f\u83b7\u5f97\u7684 Contig or scaffold NZ_[2] Genomic \u5168\u57fa\u56e0\u7ec4\u6216\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u672a\u5b8c\u6210\u5e8f\u5217\u6570\u636e NM_ mRNA Protein-coding transcripts (usually curated) NR_ RNA Non-protein-coding transcripts XM_[3] mRNA Predicted model protein-coding transcript XR_[3] RNA Predicted model non-protein-coding transcript AP_ Protein Protein Annotated on AC_ alternate assembly NP_ Protein Protein Associated with an NM_ or NC_ accession YP_[3] Protein Annotated on genomic molecules without an instantiated transcript record XP_ Protein Predicted model, associated with an XM_ accession WP_ Protein Non-redundant across multiple strains and species - [1]\uff1a whole genomic sequence - [2]\uff1a An ordered collection of WGS sequence for a genome. - [3]\uff1a computed","title":"2.1 Refseq Accession \u542b\u4e49"},{"location":"book/C20_Others/02_gi-to-accession/#reference","text":"Refseq Accession Dict NCBI Youtube Tutorial","title":"Reference"},{"location":"book/C20_Others/03_insilico-pfge/","text":"in silico PFGE \u00b6 UPGMA \u00b6 https://mitbal.wordpress.com/2014/06/11/upgma/ Biopython Enzymes \u00b6 http://biopython.org/DIST/docs/cookbook/Restriction.html#7","title":"in silico PFGE"},{"location":"book/C20_Others/03_insilico-pfge/#in-silico-pfge","text":"","title":"in silico PFGE"},{"location":"book/C20_Others/03_insilico-pfge/#upgma","text":"https://mitbal.wordpress.com/2014/06/11/upgma/","title":"UPGMA"},{"location":"book/C20_Others/03_insilico-pfge/#biopython-enzymes","text":"http://biopython.org/DIST/docs/cookbook/Restriction.html#7","title":"Biopython Enzymes"},{"location":"book/C20_Others/04_metagenomic-data-simulation/","text":"Metagenomic Data Simulation \u00b6 InSilicoSeq \u00b6 InSilicoSeq \u662f\u4e00\u4e2a\u53ef\u4ee5\u751f\u6210\u5b8f\u57fa\u56e0\u7ec4\u7684\u6570\u636e\u6a21\u62df\u5668\u3002 \u6587\u6863 Reference \u00b6 https://www.ncbi.nlm.nih.gov/pubmed/30016412","title":"Metagenomic Data Simulation"},{"location":"book/C20_Others/04_metagenomic-data-simulation/#metagenomic-data-simulation","text":"","title":"Metagenomic Data Simulation"},{"location":"book/C20_Others/04_metagenomic-data-simulation/#insilicoseq","text":"InSilicoSeq \u662f\u4e00\u4e2a\u53ef\u4ee5\u751f\u6210\u5b8f\u57fa\u56e0\u7ec4\u7684\u6570\u636e\u6a21\u62df\u5668\u3002 \u6587\u6863","title":"InSilicoSeq"},{"location":"book/C20_Others/04_metagenomic-data-simulation/#reference","text":"https://www.ncbi.nlm.nih.gov/pubmed/30016412","title":"Reference"},{"location":"book/C20_Others/06_primer-verify/","text":"Primer Verify \u00b6 \u7f8e\u56fdCDC SARS-CoV-2 \u75c5\u6bd2\u7684qPCR\u5f15\u7269\u51fa\u73b0\u95ee\u9898\u5bfc\u81f4\u68c0\u6d4b\u8bd5\u5242\u5ef6\u671f\u7684\u95ee\u9898\u7ed9\u6211\u4eec\u6572\u4e86\u8b66\u949f\uff0c\u5728\u75ab\u60c5\u5e94\u6025\u671f\u95f4\uff0c\u5f15\u7269\u8d28\u91cf\u5bf9\u4e8e\u75be\u75c5\u9632\u63a7\u7684\u91cd\u8981\u6027\u4e0d\u8a00\u800c\u55bb\u3002\u8fd9\u91cc\u6211\u4eec\u6765\u8c08\u4e00\u4e0b\u5982\u4f55\u9a8c\u8bc1\u5f15\u7269\u3002","title":"Primer Verify"},{"location":"book/C20_Others/06_primer-verify/#primer-verify","text":"\u7f8e\u56fdCDC SARS-CoV-2 \u75c5\u6bd2\u7684qPCR\u5f15\u7269\u51fa\u73b0\u95ee\u9898\u5bfc\u81f4\u68c0\u6d4b\u8bd5\u5242\u5ef6\u671f\u7684\u95ee\u9898\u7ed9\u6211\u4eec\u6572\u4e86\u8b66\u949f\uff0c\u5728\u75ab\u60c5\u5e94\u6025\u671f\u95f4\uff0c\u5f15\u7269\u8d28\u91cf\u5bf9\u4e8e\u75be\u75c5\u9632\u63a7\u7684\u91cd\u8981\u6027\u4e0d\u8a00\u800c\u55bb\u3002\u8fd9\u91cc\u6211\u4eec\u6765\u8c08\u4e00\u4e0b\u5982\u4f55\u9a8c\u8bc1\u5f15\u7269\u3002","title":"Primer Verify"},{"location":"protocol/artic-network-covid19/","text":"ARTIC\u7eb3\u7c73\u5b54\u65b0\u578b\u51a0\u72b6\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u65b9\u6848 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u6839\u636e\u76ee\u524d ARTIC-Network v3 \u7248 Sars-Cov-2 \u57fa\u56e0\u7ec4\u6d4b\u5e8f\u65b9\u6848\uff0c\u6839\u636e\u6211\u4eec\u81ea\u5df1\u5b9e\u9a8c\u5ba4\u7684\u5de5\u4f5c\u6d41\u7a0b\u7ed3\u5408\u7f51\u7edc\u4e0a\u7684\u8d44\u6e90\uff0c\u5efa\u7acb\u5b9e\u9a8c\u65b9\u6848\u3002 \u5b9e\u9a8c\u7b80\u4ecb \u00b6 \u65b0\u51a0\u75c5\u6bd2\u57f9\u517b\u9700\u8981P3\u5b9e\u9a8c\u5ba4\uff0c\u56e0\u6b64\u666e\u901a\u5b9e\u9a8c\u5ba4\u53ea\u80fd\u9488\u5bf9\u6837\u54c1\u6838\u9178\u8fdb\u884c\u6d4b\u5e8f\uff0c\u5982\u4f55\u628a\u65b0\u51a0\u75c5\u6bd2\u6838\u9178\u5bcc\u96c6\u5230\u80fd\u591f\u6d4b\u5e8f\u7684\u6c34\u5e73\u662f\u9996\u5148\u8981\u89e3\u51b3\u7684\uff0c\u867d\u7136\u76ee\u524d\u4e5f\u6709\u63a2\u9488\u6355\u83b7\u7b49\u8bd5\u5242\u76d2\u6216\u8005\u65b9\u6cd5\uff0c\u4f46\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u91c7\u7528PCR\u6269\u589e\u3002\u6211\u4eec\u53ef\u4ee5\u81ea\u884c\u8bbe\u8ba1\u6269\u589e\u5f15\u7269\uff0c\u83b7\u5f97\u76ee\u6807\u7247\u6bb5\uff0c\u4e0d\u8fc7\u65b0\u51a0\u75c5\u6bd2\u57fa\u56e0\u7ec4\u8fbe\uff5e30k\uff0c\u3002\u6269\u589e\u7684\u65b9\u5f0f\u4e00\u822c\u90fd\u662f\u91c7\u7528\u591a\u91cdPCR\uff0cARTIC Network\u7684\u5b9e\u9a8c\u65b9\u6848\u91c7\u7528\u77ed\u7247\u6bb5\uff08300~700bp\uff09\u8fdb\u884c\u6269\u589e\uff0c\u6709\u5229\u4e8e\u6269\u589e\u83b7\u5f97\u6837\u54c1\u4e2d\u75c5\u6bd2\u5e8f\u5217\u8f83\u9ad8\u7684\u4e30\u5ea6\u3002\u91c7\u7528Nanopore\u6d4b\u5e8f\u65b9\u6cd5\uff0c\u5bf9CT32\u4ee5\u4e0b\u7684\u4e34\u5e8a\u6807\u672c\u5bb9\u6613\u83b7\u5f97\u8986\u76d6\u5ea6\u8f83\u4e3a\u5b8c\u6574\u7684\u57fa\u56e0\u7ec4\u6570\u636e\u3002\u9ad8CT\u503c\u7684\u6837\u672c\uff0c\u5bb9\u6613\u51fa\u73b0\u90e8\u5206\u533a\u57df\u6d4b\u5e8f\u6df1\u5ea6\u8fc7\u4f4e\u6216\u5b58\u5728gap\u7684\u60c5\u51b5\u3002\u6211\u4eec\u91c7\u7528\u7c7b\u4f3c\u65b9\u6cd5\u901a\u8fc7illumina\u6d4b\u5e8f\u5e73\u53f0\u4e5f\u83b7\u5f97\u4e86\u8f83\u597d\u7684\u7ed3\u679c\uff0c\u6709\u9700\u8981\u65f6\u53ef\u4ee5\u4e92\u76f8\u8865\u5145\u3002 \u672c\u65b9\u6848\u9002\u5408\u591a\u6837\u672c\u4e0a\u673a\u6d4b\u5e8f\uff0c\u5982\u679c\u6837\u54c1\u6570\u91cf\u8f83\u5c11\uff0c \u6d4b\u5e8f\u8d28\u91cf \u5f88\u591a\u4eba\u62c5\u5fc3\u4e09\u4ee3\u6d4b\u5e8f\u6570\u636e\u7684\u8d28\u91cf\uff0c\u662f\u5426\u4f1a\u5bfc\u81f4\u57fa\u56e0\u7ec4\u4e0d\u51c6\u786e\u3002Artic Network\u7ed9\u51fa\u4e86\u901a\u7528\u7684\u65b9\u6848\u3002 \u6d4b\u5e8f\u65b9\u6cd5\u6c47\u603b\u53ef\u53c2\u8003CDC\u7684\u8d44\u6599 https://github.com/CDCgov/SARS-CoV-2_Sequencing 1. cDNA\u83b7\u53d6 \u00b6 1.1 \u8bd5\u5242\u4e0e\u8017\u6750 \u00b6 RNA\u63d0\u53d6\u8bd5\u5242 Invitrogen SuperScript\u2122 IV First-Strand Synthesis System 0.2mL PCR\u7ba1 \u6ce8\u610f\u4e8b\u9879 SSIV\u7684\u9176\u65e0RNaseH\u6d3b\u6027\uff0c\u83b7\u5f97\u957f\u7247\u6bb5cDNA\u6548\u679c\u66f4\u597d\u3002SSIII\uff0c\u6709\u4e2d\u7b49\u6d3b\u6027\u7684RNaseH\u6d3b\u6027\uff0c\u83b7\u5f97\u7684cDNA\u8fdb\u884c\u77ed\u7247\u6bb5\u6d4b\u5e8f\u4e5f\u53ef\u4ee5\u6210\u529f\uff0c\u5982\u679c\u662f\u957f\u5ea6\u66f4\u957f\u4e00\u4e9b\u7684\u7247\u6bb5\uff0cSSIV\u6548\u679c\u660e\u663e\u66f4\u597d\u4e00\u4e9b\u3002 1.2 \u5b9e\u9a8c\u6d41\u7a0b \u00b6 \u91c7\u7528RNA\u8bd5\u5242\u76d2\u624b\u5de5\u63d0\u53d6\u6837\u672c\u603bRNA\uff0c\u4e5f\u53ef\u4ee5\u7528\u673a\u5668\u81ea\u52a8\u63d0\u53d6\u3002 RNA\u901a\u8fc7Qiagen RNeasy Mini Kit \u624b\u5de5\u63d0\u53d6\u8bd5\u5242\u76d2\u6216\u8005\u673a\u5668\u63d0\u53d6\u7684\u90fd\u53ef\u4ee5\uff0cPCR\u5b9e\u9a8c\u7ed3\u679cCT\u65e0\u660e\u663e\u5dee\u5f02\u3002\u6709 \u6587\u7ae0 \u6bd4\u8f83\u8fc7Qiagen\u4e0d\u540c\u7684RNA\u63d0\u53d6\u8bd5\u5242\u76d2\u7684\u5b8f\u57fa\u56e0\u7ec4\u6d4b\u5e8freads\u4ea7\u51fa\u6548\u679c\uff0c\u53ef\u4ee5\u4f9b\u5927\u5bb6\u53c2\u8003\u3002 \u53d6EP\u7ba1\uff0c\u4f9d\u6b21\u88c5\u5165\u4ee5\u4e0b\u8bd5\u5242\uff0c\u5206\u88c5\u52300.2mL PCR\u4e2d\uff0c\u52a0\u5165RNA\u6a21\u677f\uff0cPCR\u7ba1\u7528\u79fb\u6db2\u5668\u5439\u5438\u6df7\u5300\uff0c\u79bb\u5fc3\u5c06\u7ba1\u58c1\u6b8b\u6db2\u7529\u4e0b\u3002 \u8bd5\u5242 1x 8x 50\u00b5M random hexamers 1 \u00b5l 8\u00b5l 10mM dNTPs mix (10mM each) 1 \u00b5l 8\u00b5l Template RNA 11 \u00b5l 11\u00b5l * 8 Total 13 \u00b5l 13\u00b5l * 8 \u6ce8\u610f\u4e8b\u9879 \u6837\u672cRNA\u505a\u8fc7SARS-CoV-2 qPCR\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u6839\u636eCT\u503c\u521d\u6b65\u5224\u65adRNA\u542b\u91cf\u3002\u5982\u679cRNA\u91cf\u5728CT18\uff5e35\u4e4b\u95f4\uff0c\u53ef\u4ee5\u76f4\u63a5\u52a0\u5165\u6a21\u677fRNA\u3002\u5982\u679c\u572812\uff5e15\u4e4b\u95f4\uff0c100\u500d\u7a00\u91ca\uff1b\u5982\u679c\u572815\uff5e18\u4e4b\u95f4\uff0c10\u500d\u7a00\u91ca\u3002\u5bf9\u4e8e\u4e34\u5e8a\u75c5\u4f8b\u6765\u8bf4\uff0c\u5927\u90e8\u5206\u6837\u672cCT\u503c\u572818\uff5e35\u4e4b\u95f4\u3002 \u4f7f\u7528random hexamers\u662f\u4e3a\u4e86\u6700\u5927\u7a0b\u5ea6\u83b7\u5f97\u5168\u957fcDNA\uff0cSSIV\u81ea\u5e26\u7684random hexamers\u6d53\u5ea6\u662f50ng/\u00b5l\uff0c6mers\u957f\u5ea6\uff0c\u5982\u679c\u52a01\u00b5l\uff0c\u76f8\u5f53\u4e0e\u6469\u5c14\u6570 25e-6\u00b5mol\uff0c\u56e0\u6b64\u6839\u636e\u8868\u4e2d\u91cf\uff0c\u9700\u8981\u52a02\u00b5l\u3002\u4f46\u6839\u636e\u8bd5\u5242\u76d2\u8bf4\u660e\u4e66\u4e2d\u4e5f\u662f\u52a01\u00b5l\u91cf\uff0c\u56e0\u6b64\u8fd9\u91cc\u53c2\u8003\u8bf4\u660e\u4e66\u3002 \u63a8\u8350\u52a0\u5165\u6837\u672c\u524d\uff0c\u5728PCR\u4eea\u4e0a\u9884\u70ed\u3002 \u53cd\u5e94\u4f53\u7cfb\u5728PCR\u4eea\u5668\u4e2d 65\u00b0C 5min\u3002\u7136\u540e\u7acb\u5373\u7f6e\u4e8e\u51b0\u4e0a\u81f3\u5c111min\u3002 \u6309\u4e0b\u8868\u914d\u7f6e\u53cd\u5e94\u4f53\u7cfb\uff0c\u6dfb\u52a0\u5230\u51b0\u4e0a\u7684PCR\u7ba1\u4e2d\u3002\u7f6e\u4e8ePCR\u4eea\u5668\u4e2d\uff0c42\u00b0C 50min\uff0c70\u00b0C 10min\uff0c\u7ed3\u675f\u540e5\u00b0C \u4fdd\u6e29\u3002\u8fd9\u4e00\u6b65\u8981\u8bbe\u7f6e105\u00b0C\u70ed\u76d6\u3002 \u8bd5\u5242 1x 8x 5x SSIV Buffer 4 \u00b5l 32 \u00b5l 100mM DTT 1 \u00b5l 8 \u00b5l RNaseOUT RNase Inhibitor 1 \u00b5l 8 \u00b5l SSIV Reverse Transcriptase 1 \u00b5l 8 \u00b5l \u524d\u4e00\u6b65PCR\u7ba1\u5185\u6db2\u4f53 13 \u00b5l 13 \u00b5l * 8 Total 20 \u00b5l 20 \u00b5l * 8 \u4ee5\u4e0a\u914d\u6db2\u64cd\u4f5c\u5728PCR\u5de5\u4f5c\u7ad9\u6216\u751f\u7269\u5b89\u5168\u67dc\u5185\u8fdb\u884c\u3002\u4f7f\u7528\u524d\u7d2b\u5916\u5904\u740630\u5206\u949f\u5e76\u901a\u98ce\u3002 2. PCR\u6269\u589e \u00b6 2.1 \u8bd5\u5242\u4e0e\u8017\u6750 \u00b6 DEPC H2O QIAGEN Multiplex PCR Kit Q5 Hot Start High-Fidelity DNA Polymerase ARTIC Network\u6d41\u7a0b\u91cc\u4f7f\u7528\u7684\u662fNEB Q5\u9176\uff0c\u8bd5\u7528Qiagen\u7684\u591a\u91cdPCR\u4ea7\u54c1\uff0c\u6548\u679c\u4e5f\u53ef\u4ee5\u3002 2.2 \u5b9e\u9a8c\u6d41\u7a0b \u00b6 \u5c0698\u7ec4\u51bb\u5e72\u5f15\u7269 8000rpm \u79bb\u5fc3 10min\u3002\u5c06\u6bcf\u4e2a\u5f15\u7269\u914d\u7f6e\u6210100uM\u6d53\u5ea6\u3002 \u51c6\u59072\u4e2aEP\u7ba1\uff0c\u6807\u8bb0\u4e3aP1\u548cP2\u3002\u4ece98\u4e2a100uM\u7684\u5f15\u7269\uff0c\u6bcf\u7ba1\u5438\u53d65uL\u5206\u522b\u5230Pool1\u548c2\u4e2d\uff0c\u6700\u7ec8\u6bcf\u7ba1\u542b100uM\u6d53\u5ea6\u7684\u5f15\u7269\u5171980uL\u3002 \u9707\u8361\u6df7\u5300\uff0c\u79bb\u5fc3\u7529\u5e72\u540e\uff0c\u5404\u53d620uL P\u00bd \u5f15\u7269\uff0c\u52a0\u5165180uL\u6c34\u3002\u4f7f\u5f97Pool1\u548cPool2\u5f15\u7269\u7ec8\u6d53\u5ea6\u4e3a10uM\u3002 \u4ee5\u4e0a\u914d\u6db2\u64cd\u4f5c\u5728PCR\u5de5\u4f5c\u7ad9\u6216\u751f\u7269\u5b89\u5168\u67dc\u5185\u8fdb\u884c\u3002\u4f7f\u7528\u524d\u7d2b\u5916\u5904\u740630\u5206\u949f\u5e76\u901a\u98ce\u3002 \u6bcf\u4e2a\u6837\u672c\u53d62\u4e2aPCR\u7ba1\uff0c\u4f7f\u7528NEB Q5 Hot Start DNA Polymerase\u8bd5\u5242\u6216\u8005Qiagen Multiplex PCR\u8bd5\u5242\u8fdb\u884cPCR\u6269\u589e\uff0c\u914d\u6db2\u53c2\u89c1\u8868\u00bd\u3002 NEB Q5 Hot Start DNA Polymerase Pool1 Pool2 5X Q5 Reaction Buffer 5 \u00b5l 5 \u00b5l 10 mM dNTPs 0.5 \u00b5l 0.5 \u00b5l Q5 Hot Start DNA Polymerase 0.25 \u00b5l 0.25 \u00b5l Primer Pool 1 or 2 (10\u00b5M) 3.6 \u00b5l 3.6 \u00b5l Nuclease-free water 13.15 \u00b5l 13.15 \u00b5l cDNA 2.5uL 2.5uL Total 25 \u00b5l 25 \u00b5l Qiagen Multiplex PCR Kit Pool1 Pool2 2X Qiagen Multiplex PCR Master Mix 12.5 \u00b5l 12.5 \u00b5l Primer Pool 1 or 2 (10\u00b5M) 3.6 \u00b5l 3.6 \u00b5l 5X Q Solution 2.5 \u00b5l 2.5 \u00b5l Nuclease-free water 3.9 \u00b5l 3.9 \u00b5l cDNA 2.5uL 2.5uL Total 25 \u00b5l 25 \u00b5l \u6839\u636e\u4f53\u7cfb\u4f18\u5316\uff0c\u6bcf\u4e2a\u5f15\u7269\u7684\u7ec8\u6d53\u5ea6\u4e3a0.015uM\u3002 NEB Q5 \u7684PCR\u7a0b\u5e8f\u4e3a\uff1a \u5e8f\u53f7 \u6e29\u5ea6 \u65f6\u95f4 \u524d\u5f80 1. 98\u00b0C 30s 2. 98\u00b0C 15s 3. 65\u00b0C 5min \u524d\u5f802, \u5faa\u73af25\uff5e35cycles 4. 4\u00b0C Hold Qiagen Multiplex Kit\u7684PCR\u7a0b\u5e8f\u4e3a\uff1a \u5e8f\u53f7 \u6e29\u5ea6 \u65f6\u95f4 \u524d\u5f80 1. 95\u00b0C 15min 2. 94\u00b0C 30s 3. 58\u00b0C 90s 4. 72\u00b0C 45s \u524d\u5f802, \u5faa\u73af25\uff5e35cycles 5. 72\u00b0C 10min 6. 4\u00b0C Hold Ct18-21\u7684\u6837\u672c\u752825\u5faa\u73af, Ct 35\u7684\u6837\u672c\u752835\u4e2a\u5faa\u73af\u3002CT\u503c\u4ecb\u4e8e21\uff5e35\u7684\u6839\u636e\u5206\u5e03\u81ea\u884c\u8bbe\u7f6e\u3002 \u5e94\u7528\u672c\u65b9\u6cd5\u5230\u5176\u4ed6\u75c5\u539f\u68c0\u6d4b\u65f6\uff0c\u9700\u8981\u8bbe\u8ba1\u591a\u91cdPCR\u7684\u8bdd\uff0c\u53ef\u4ee5\u4f7f\u7528 \u8fd9\u91cc \u7684\u5f15\u7269\u8bbe\u8ba1\u5de5\u5177\u83b7\u5f97\u5f15\u7269\u7ec4\u3002 3. Amplicon\u7eaf\u5316\u56de\u6536 \u00b6 3.1 \u8bd5\u5242\u4e0e\u8017\u6750 \u00b6 Elution Buffer AMPure XP Beads 3.2 \u5b9e\u9a8c\u6d41\u7a0b \u00b6 \u5c06\u6bcf\u4e2a\u6837\u672c\u7684Pool1\u548cPool2\u6df7\u5408\uff0c\u56e0\u4e3a\u6d4b\u5e8f\u6587\u5e93\u4e0e\u4e0a\u6837\u91cf\u6709\u5173\uff0c\u672c\u5b9e\u9a8c\u6d41\u7a0b\u8bbe\u8ba1\u7684\u662f\u9488\u5bf98\u4e2a\u4ee5\u4e0a\u6837\u672c\u7684\u4e0a\u6837\u91cf\u3002\u5efa\u8bae\u68c0\u6d4b\u6837\u672c\u5e26\u8d28\u63a7DNA\u505a\u4e3a\u9634\u6027\u5bf9\u7167\uff0c\u4ee5\u4fbf\u68c0\u67e5\u662f\u5426\u6709\u6c61\u67d3\u5e8f\u5217\u3002 \u5c06AMPure XP Beads \u63d0\u524d30min\u53d6\u51fa\u7f6e\u4e8e\u5e38\u6e29\uff0c\u4f7f\u7528\u524d\u5728\u9707\u8361\u4eea\u4e0a\u6df7\u5408\u5747\u5300\u3002 \u53d650uL AMPure XP Beads \u5230 50uL \u6df7\u5408pooling Amplicon\u4e2d\u3002\u9707\u8361\u6df7\u5300\uff08\u589e\u52a0\u9707\u8361\u65f6\u95f4\u80fd\u6781\u5927\u63d0\u9ad8\u56de\u6536\u7387\uff09\uff0c\u79bb\u5fc3\u7529\u5e72\u3002 1x \u78c1\u73e0\u5438\u9644250\uff5e1000bp\u6548\u7387\u8f83\u597d\u3002\u5177\u4f53 \u53c2\u89c1 \u5ba4\u6e29\u653e\u7f6e5min\u3002 \u5c06EP\u7ba1\u653e\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a2min\uff0c\u76f4\u81f3\u6db2\u4f53\u6f84\u6e05\u3002 \u5438\u5f03\u6db2\u4f53\uff0c\u7528200uL\u65b0\u9c9c\u914d\u7f6e\u768470\uff5e80%\u4e59\u9187\u6d172\u6b21\u3002 \u752810uL\u79fb\u6db2\u5668\u5438\u5f03\u6b8b\u6db2\uff0c\u5f00\u76d61min\uff0c\u8ba9\u4e59\u9187\u6325\u53d1\u3002 \u4ece\u78c1\u529b\u67b6\u4e0a\u53d6\u4e0b\uff0c\u752815\uff5e30uL Elution Buffer\u6216\u8005\u6c34\u91cd\u60ac\u78c1\u73e0\uff0c\u7528\u67aa\u5934\u6216\u624b\u6307\u8f7b\u8f7b\u6df7\u5300\uff0c\u9759\u7f6e2min\u3002 \u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c\u6db2\u4f53\u6f84\u6e05\u540e\u5438\u53d630uL\u6db2\u4f53\u5230\u4e00\u4e2a\u65b0\u7684EP\u7ba1\u4e2d\u3002\u53d61uL\u8fdb\u884cQubit\u5b9a\u91cf\u3002 \u6837\u672c\u6d53\u5ea6\u4e0ePCR\u4ea7\u7269\u56de\u6536\u76f8\u5173\u6027\uff1a - 10E5\u5927\u7ea6200ng/uL - 10E4\u5927\u7ea6120ng/uL - 10E3\u5927\u7ea680ng/uL - 10E2\u5927\u7ea625ng/uL - 10E1\u5927\u7ea610ng/uL 4. \u6587\u5e93\u6784\u5efa \u00b6 4.1 Nanopore \u6d4b\u5e8f\u6587\u5e93 \u00b6 4.1.1 \u8bd5\u5242\u4e0e\u8017\u6750 \u00b6 Nanopore EXP-NBD104/114 Nanopore SQK-LSK109 Nanopore \u6d4b\u5e8f\u82af\u7247\u5236\u5907\u8bd5\u5242\u76d2 EXP-FLP002 Eppendorf DNA LoBind Tubes NEBNext\u00ae Ultra\u2122 II DNA Library Prep Kit for Illumina E7645 4.1.2 \u5b9e\u9a8c\u6d41\u7a0b \u00b6 \u6ce8\u610f\u6b64\u6d41\u7a0b\u662f\u6839\u636e6~24\u4e2a\u6837\u672c\u6df7\u6837\u7684\u91cf\u89c4\u5212\u7684\u3002\u5982\u679c\u53ea\u505a\u5355\u4e2a\u6837\u672c\uff0c\u53ef\u4ee5\u4e0d\u52a0barcodes\uff0c\u4f46\u9700\u8981\u8c03\u6574input DNA\u91cf\uff0c\u5efa\u8bae\u52a0\u5165DNA\u8fbe40ng\uff0c\u4fdd\u8bc1\u4e0a\u673a\u65f6\u80fd\u7ea6\u670920ng DNA\uff0c\u8fbe\u5230\u6700\u4f73\u7684\u82af\u7247\u6d4b\u5e8f\u5206\u5b50\u6570\u3002 \u5c06\u5b9a\u91cf\u7684DNA\u7a00\u91ca\u62101ng/uL\uff0c\u8be5\u6d53\u5ea6\u662f\u9488\u5bf9700bp\u957f\u5ea6\u7684Amplicon\uff0c\u5982\u679c\u7247\u6bb5\u957f400bp\uff0c\u5efa\u8bae\u6d53\u5ea6\u4e3a2ng/uL\uff0c\u8fd9\u6837\u5206\u5b50\u6d53\u5ea6\u7ea6\u4e3a100\uff5e200fmol\u3002 \u53d60.2mLPCR\u7ba1\uff0c\u6839\u636e\u4e0b\u8868\u8fdb\u884c\u914d\u6db2\uff0c\u8fdb\u884c\u672b\u7aef\u4fee\u590d\u3002 \u8bd5\u5242 \u91cf DNA amplicons 5 \u00b5l Nuclease-free water 7.5 \u00b5l Ultra II End Prep Reaction Buffer 1.75 \u00b5l Ultra II End Prep Enzyme Mix 0.75 \u00b5l \u603b\u91cf 15 \u00b5l \u5ba4\u6e29\u653e\u7f6e10min\u3002\u7f6e\u4e8ePCR\u4eea\u4e0a\uff0c65\u00b0C 5min\uff0c\u7acb\u5373\u7f6e\u4e8e\u51b0\u4e0a\u81f3\u5c111min \u5728PCR\u7ba1\u4e2d\u52a0\u5165\u4ee5\u4e0b\u8bd5\u5242\uff1a \u8bd5\u5242 \u91cf \u8fde\u63a5NBXX\u7684\u6df7\u5408\u6db2 15 \u00b5l NBXX barcode 2.5 \u00b5l Ultra II Ligation Master Mix 17.5 \u00b5l Ligation Enhancer 0.5 \u00b5l \u603b\u91cf 35.5 \u00b5l NBXX barcodes \u4e3a EXP-NBD104(01~12)\u548cEXP-NBD114(13\uff5e24) \u8bd5\u5242\u4e2d\u7684 barcodes \u5ba4\u6e29\u653e\u7f6e15min\u3002\u7f6e\u4e8ePCR\u4eea\u4e0a\uff0c70\u00b0C 10min\uff0c\u7acb\u5373\u7f6e\u4e8e\u51b0\u4e0a\u81f3\u5c111min 70\u00b0C 10min \u76ee\u7684\u662f\u6291\u5236DNA Ligase\u6d3b\u6027\uff0c\u907f\u514d\u63a5\u5934\u5f62\u6210\u4e8c\u805a\u4f53\u3002 \u5c06\u8fde\u63a5barcodes\u540e\u7684\u6240\u6709\u6837\u672c\u7684\u6df7\u5408\u5230\u4e00\u4e2aEP\u7ba1\u4e2d\u3002\u53d61uL\u8fdb\u884c\u5b9a\u91cf \u53d6LoBind Tubes EP\u7ba1\uff0c\u6309\u7167\u4e0b\u8868\u8fdb\u884c\u914d\u6db2\uff0c\u5ba4\u6e29\u653e\u7f6e15min\u3002 \u8bd5\u5242 \u91cf Barcoded amplicon pools 30 \u00b5l NEBNext Quick Ligation Reaction Buffer (5X) 10 \u00b5l AMII adapter mix 5 \u00b5l Quick T4 DNA Ligase 5 \u00b5l \u603b\u91cf 50 \u00b5l input DNA\u7684\u91cf\u6839\u636ebarcods\u6570\u91cf\u51b3\u5b9a\uff0c\u6570\u91cf\u572840ng\uff5e160ng(8\uff5e24 barcods)\u3002 \u52a0\u516550uL AMPure XP Beads\uff0c\u8f7b\u8f7b\u6df7\u5300\u3002\u5ba4\u6e29\u653e\u7f6e5min \u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a2min\uff0c\u6db2\u4f53\u6f84\u6e05\u540e\u5438\u5f03\u6db2\u4f53\u3002 \u78c1\u529b\u67b6\u4e0a\u53d6\u4e0bEP\u7ba1\uff0c\u52a0\u5165200uL SFB\uff0c\u91cd\u60ac\u78c1\u73e0\u3002 EP\u7ba1\u653e\u5230\u78c1\u529b\u67b6\u4e0a\u9759\u7f6e2min\uff0c\u6db2\u4f53\u6f84\u6e05\u540e\u5438\u5f03\u3002\u7528SFB\u518d\u6d171\u6b21\u3002 \u52a0\u516515uL EB\u91cd\u60ac\u78c1\u73e0\uff0c\u5ba4\u6e29\u653e\u7f6e2min\u3002 \u5c06EP\u7ba1\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\u3002\u5438\u53d6\u6f84\u6e05\u6db2\u4f53\u5230\u4e00\u4e2a\u65b0\u7684EP\u7ba1\u4e2d\uff0c\u4e3a\u6d4b\u5e8f\u6587\u5e93\u3002 \u7528\u4e8e\u4e0a\u673a\u6d4b\u5e8f\u7684\u6587\u5e93DNA\u91cf\u4e3a20ng \u5c0630uL FLT \u52a0\u5165\u52301\u7ba1FB\u4e2d\uff0c\u9707\u8361\u6df7\u5300\u3002 \u6253\u5f00\u6d4b\u5e8f\u82af\u7247\u7684priming port\uff0c\u75281mL\u79fb\u6db2\u5668\u5782\u76f4\u9876\u4f4fpriming port\uff0c\u6162\u6162\u65cb\u8f6c\u79fb\u6db2\u5668\u91cf\u7a0b\uff0c\u9ec4\u8272\u7eb3\u7c73\u5b54\u4fdd\u62a4\u6db2\uff0c\u76f4\u5230\u6ca1\u6709\u6c14\u6ce1\u3002 \u5438\u53d6800uL FLT/FB\u6df7\u5408\u6db2\uff0c\u4ecePriming port\u4e2d\u52a0\u5165\uff0c\u53ef\u4ee5\u4e0d\u7528\u52a0\u5b8c\uff0c\u907f\u514d\u6c14\u6ce1\u52a0\u5165\u82af\u7247\u4e2d\u3002\u7b49\u5f855min\u3002 \u6253\u5f00Spot on port\uff0c\u6ef4\u52a0200uL FLT/FB\u6df7\u5408\u6db2\u3002\u76f4\u81f3Spoton port\u5b8c\u5168\u5438\u6536\u3002 \u53d6\u4e00\u4e2aEP\u7ba1\uff0c\u6309\u7167\u4e0b\u8868\u914d\u6db2\uff1a \u8bd5\u5242 \u91cf SQB 37.5 \u00b5l LB 25.5 \u00b5l Final library 12 \u00b5l \u603b\u91cf 75 \u00b5l LB\u4f7f\u7528\u524d\u518d\u5145\u5206\u6df7\u5300 \u6ef4\u52a075uL\u6587\u5e93\u5230Spoton Port\u4e2d\uff0c\u6db2\u4f53\u5b8c\u5168\u5438\u6536\u540e\u5173\u95edSpoton Port\u548cPriming Port\uff0c\u5c06\u82af\u7247\u88c5\u5165\u6d4b\u5e8f\u4eea\uff0c\u6253\u5f00MinKnow\u6d4b\u5e8f\u8f6f\u4ef6\u8fdb\u884c\u6d4b\u5e8f\u3002 \u5bf9\u4e8e\u6ca1\u7528\u7528\u5b8cnanopores\u7684\u82af\u7247\uff0c\u53ef\u4ee5\u542f\u7528\u6e05\u6d17\u7a0b\u5e8f\u4ee5\u540e\u7ee7\u7eed\u4f7f\u7528\uff1a \u53d6 1\u7ba1 Wash Solution B\u7f6e\u4e8e\u5ba4\u6e29\uff0c\u9707\u8361\u6df7\u5300\u540e\u653e\u5728\u51b0\u4e0a\u5f85\u7528\u3002 \u5728 1\u4e2a EP\u7ba1\u4e2d\uff0c\u52a0\u516520uL Wash Solution A\u548c380uL Wash Solution B\u3002\u5439\u5438\u6df7\u5300\uff08\u4e0d\u8981\u9707\u8361\uff09\uff0c\u7f6e\u4e8e\u51b0\u4e0a\u3002 \u6682\u505c\u6d4b\u5e8f\uff0c\u4f46\u4e0d\u8981\u53d6\u51fa\u82af\u7247\u3002 \u786e\u5b9aPriming Port\u548cSpotON Port\u5173\u95ed\u3002\u75281000uL\u79fb\u6db2\u5668\uff0c\u4eceWaste Port1\u4e2d\u5438\u51fa\u6240\u6709\u6db2\u4f53\uff0c\u786e\u5b9a\u82af\u7247\u7eb3\u7c73\u5b54\u5904\u6ca1\u6709\u6b8b\u6db2\u3002 \u6253\u5f00Priming Port\uff0c\u5148\u786e\u8ba4\u6d88\u9664\u6c14\u6ce1\u3002\u7136\u540e\u52a0\u5165400Wash Solution\u6d17\u6db2\uff0c\u6ce8\u610f\u907f\u514d\u52a0\u5165\u6c14\u6ce1\u3002 \u5173\u95edPriming Port\uff0c\u7b4930min\u540e\uff0c\u75281000uL\u79fb\u6db2\u5668\u4eceWaste Port1\u4e2d\u5438\u5f03\u6240\u6709\u6db2\u4f53\u3002 \u5982\u679c\u8fd8\u8981\u6d4b\u5176\u4ed6\u6837\u672c\uff0c\u53ef\u53c2\u8003\u4e0a\u6837\u6d41\u7a0b\u64cd\u4f5c\u3002\u5982\u679c\u6682\u65f6\u4e0d\u7528\uff0c\u5219\u6309\u7167\u4e0b\u9762\u6d41\u7a0b\u8fdb\u884c\u4fdd\u5b58\u82af\u7247\u3002 \u5c06\u4e00\u7ba1Storage Buffer(S)\u53d6\u51fa\u7f6e\u4e8e\u5ba4\u6e29\uff0c\u6eb6\u89e3\u540e\u4e0a\u4e0b\u98a0\u5012\u6df7\u5300\u3002 \u6253\u5f00\u7528\u5b8c\u7684\u82af\u7247Priming Port\uff0c1000uL\u79fb\u6db2\u5668\u8bbe\u7f6e\u6210200uL\u91cf\u7a0b\uff0c\u7136\u540e\u67aa\u5934Priming Port\u9876\u4f4f\u5b54\uff0c\u65cb\u8f6c\u79fb\u6db2\u5668\u91cf\u7a0b20uL\uff0c\u4ee5\u786e\u5b9a\u6392\u9664\u6c14\u6ce1\u3002 \u5438\u53d6500uL Storage Buffer(S)\uff0c\u4ecePriming Port\u4e2d\u7f13\u6162\u52a0\u5165\u3002\u5173\u95edPriming Port\u3002 \u5173\u95edPriming Port\u548cSpotON Port\uff0c\u75281000uL\u79fb\u6db2\u5668\u4eceWaste Port1\u4e2d\u5438\u53d6\u6240\u6709\u6db2\u4f53\u3002 \u82af\u7247\u7f6e\u4e8e\u51b0\u7bb1\u51b7\u85cf\u3002 \u4e0b\u4e00\u6b21\u4f7f\u7528\u7684\u82af\u7247\uff0c\u6700\u597d\u8bbe\u7f6e\u6210\u4e0d\u540c\u7684\u7535\u538b\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u7ed3\u679c\uff0c \u53c2\u89c1 4.2 illumina Miseq \u6d4b\u5e8f\u6587\u5e93 \u00b6 4.2.1 \u8bd5\u5242\u4e0e\u8017\u6750 \u00b6 Nextera XT LIbrary Preparation Kit NEB Ultra II DNA Library Prep Kit for Illumina AMPure XP Beads Miseq Reagent v2 PE150 \u5bf9\u4e8e\u6d53\u5ea6\u8f83\u9ad8\u7684\u6837\u672c\uff0cillumina\u6269\u589e\u5b50\u6d4b\u5e8f\u63a8\u8350\u4f7f\u7528PCR-Free\u7684\u65b9\u5f0f\u8fdb\u884c\u3002\u8fd9\u91cc\u7528NEB Ultra II DNA Library Prep Kit for Illumina(E7645)\u6587\u5e93\u6784\u5efa\u8bd5\u5242\u76d2\u8fdb\u884c\u3002\u5982\u679c\u4f7f\u7528Nextera XT\u4e4b\u7c7b\u7684\u9176\u7247\u6bb5\u5316\u8bd5\u5242\u76d2\uff0c\u540e\u671f\u6570\u636e\u5206\u6790\u65f6\u8981\u8003\u8651\u5f15\u7269\u6269\u589e\u4f4d\u70b9\u5bf9\u4e8econsensus\u5e8f\u5217\u7684\u5f71\u54cd\u3002 4.2.2 \u5b9e\u9a8c\u6d41\u7a0b \u00b6 \u5c06 pool1 \u548c pool2 \u7684 PCR \u4ea7\u7269\u6df7\u5408\u540e\uff0c\u4f7f\u7528Qubit\u8fdb\u884c\u5b9a\u91cf\u3002NEB\u6587\u5e93\u6784\u5efa\u8bd5\u5242\u76d2\u9002\u5408500pg~1ug\u7684\u8d77\u59cbinput DNA\u91cf\u3002 \u53d6\u65b0\u7684 PCR \u7ba1\uff0c\u6309\u7167\u4e0b\u8868\u914d\u6db2\u3002\u7528200uL\u67aa\u768450uL\u91cf\u7a0b\u5439\u543810\u6b21\u6df7\u5300\u3002\u79bb\u5fc3\u7529\u5e72\u3002 \u8bd5\u5242 \u91cf NEBNext Ultra II End Prep Enzyme Mix 3 \u00b5l NEBNext Ultra II End Prep Reaction Buffer 7 \u00b5l DNA 50 \u00b5l \u603b\u91cf 60 \u00b5l \u653e\u7f6e\u4e8ePCR\u4eea\u5668\u4e0a\uff0c\u70ed\u76d6\u6e29\u5ea6\u5927\u4e8e\u7b49\u4e8e75\u00b0C \uff0c\u8fd0\u884c\u4ee5\u4e0b\u7a0b\u5e8f\uff1a20\u00b0C 30min\uff0c65\u00b0C 30min\uff0c4\u00b0C hold\u3002 \u6309\u7167\u4e0b\u8868\u7a00\u91ca adaptor\u3002\u5efa\u8bae\u521d\u59cbDNA\u91cf\u5927\u4e8e100ng\uff0c\u5982200ng\u5de6\u53f3\u3002 Input DNA Adaptor Adaptor \u5de5\u4f5c\u6d53\u5ea6 1ug-101ng \u4e0d\u7a00\u91ca 15uM 100ng-5ng 1:10\u7a00\u91ca 1.5 uM <5ng 1:25\u7a00\u91ca 0.6uM \u6839\u636e\u4e0b\u8868\u914d\u7f6eAdaptor\u8fde\u63a5\u4f53\u7cfb\u3002NEBNext Ultra II Ligation Master Mix\u52a0\u5165\u524d\u8981\u98a0\u5012\u6df7\u5300\u3002 \u8bd5\u5242 \u91cf \u524d\u4e00\u6b65\u53cd\u5e94\u6db2 60 \u00b5l NEBNext Ultra II Ligation Master Mix 30 \u00b5l NEBNext LIgation Enhancer 1 \u00b5l NEBNext Adaptor for illumina 2.5 \u00b5l \u603b\u91cf 93.5 \u00b5l \u53ef\u4ee5\u91c7\u7528\u7684Adaptor\u4ea7\u54c1\uff1a\u5355\u7aef\uff08E7350\uff09\uff0c\u53cc\u7aef\uff08E7335,E7500,E7710,E7730,E7600,E7535,E6609\uff09 \u7528200uL\u67aa\u768480uL\u91cf\u7a0b\u5439\u620f10\u6b21\u6df7\u5300\u3002\u79bb\u5fc3\u7529\u5e72\u3002 \u7f6e\u4e8e\u91d1\u5c5e\u6d74\u6216PCR\u4eea\u4e0a\uff08\u4e0d\u5f00\u70ed\u76d6\uff0920\u00b0C 15min\u3002 \u5411\u53cd\u5e94\u4f53\u7cfb\u4e2d\u52a0\u51653uL USER Enzyme\uff08\u8fd9\u4e2a\u8bd5\u5242\u5305\u542b\u5728\u63a5\u5934\u8bd5\u5242\u76d2\u4e2d\uff09\u3002\u5728PCR\u4eea\u5668\u4e0a37\u00b0C 15min\uff08\u70ed\u76d6\u5927\u4e8e\u7b49\u4e8e47\u00b0C\uff09\u3002 \u5c06\u6db2\u4f53\u8f6c\u79fb\u5230\u6df1\u5b54\u677f\u5185\uff0c\u5f53input DNA\u5927\u4e8e50ng\u65f6\uff0c\u8fdb\u884c\u4e0b\u9762\u7684DNA\u7eaf\u5316\u56de\u6536\u3002\u5bf9\u4e8e\u5c0f\u4e8e50ng DNA\u7684\u6837\u672c\uff0c\u53ea\u9700\u8981\u7528\u78c1\u682a\u7eaf\u53161\u6b21\uff0c\u752887uL\u91cf\u3002 \u52a0\u516518uL AMPure Beads\u5230\u53cd\u5e94\u6db2\u4e2d\uff0c\u5439\u543810\u6b21\u6df7\u5300\uff0c\u6ce8\u610f\u67aa\u5934\u4e2d\u7684\u6db2\u4f53\u8981\u5168\u90e8\u6253\u51fa\u3002\u5ba4\u6e29\u5b75\u80b25min\u3002 \u5c06\u6df1\u5b54\u677f\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c\u9759\u7f6e5min\u5f85\u6db2\u4f53\u6f84\u6e05\u3002\u5438\u51fa\u6db2\u4f53\u5230\u65b0\u7684\u5b54\u4e2d\u3002 \u5c06\u6df1\u5b54\u677f\u4ece\u78c1\u529b\u67b6\u4e0a\u53d6\u4e0b\uff0c\u52a0\u516510uL AMPure Beads\uff0c\u5439\u543810\u6b21\u6df7\u5300\u540e\uff0c\u5ba4\u6e29\u5b75\u80b25min\u3002 \u5c06\u6df1\u5b54\u677f\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c\u9759\u7f6e5min\u5f85\u6db2\u4f53\u6f84\u6e05\u3002\u5c06\u6db2\u4f53\u5438\u5f03\u3002 \u52a0\u516580%\u65b0\u9c9c\u914d\u7f6e\u7684\u4e59\u9187200uL\uff0c\u5ba4\u6e29\u653e\u7f6e30s\u540e\u5438\u5f03\u3002\u91cd\u590d\u6d171\u6b21\u3002 \u5f00\u76d6\u98ce\u5e72\u78c1\u73e05min\u3002\u5982\u679c\u98ce\u5e72\u65f6\u95f4\u8fc7\u957f\uff0c\u4f1a\u5bfc\u81f4DNA\u56de\u6536\u7387\u4e0b\u964d\u3002 \u4ece\u78c1\u529b\u67b6\u4e0a\u53d6\u4e0b\u6df1\u5b54\u677f\uff0c17uL 10mM Tris-HCl\u62160.1xTE\u6d17\u8131\u3002 \u9707\u8361\u4eea\u4e0a1800rpm\u9707\u836110min\uff0c\u5ba4\u6e29\u653e\u7f6e2min\u3002 \u5c06\u6df1\u5b54\u677f\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c5min\u540e\u5f85\u6db2\u4f53\u6f84\u6e05\uff0c\u53d61uL\u8fdb\u884cQubit\u5b9a\u91cf\u3002 \u5438\u53d615uL\u6db2\u4f53\u5230\u65b0\u7684PCR\u677f\u3002 5. \u6570\u636e\u5206\u6790 \u00b6 5.1 Nanopore \u6d4b\u5e8f\u6570\u636e \u00b6 5.1.1 \u8f6f\u4ef6\u5b89\u88c5 \u00b6 \u4f7f\u7528 conda \u6784\u5efa\u72ec\u7acb\u7684\u8fd0\u884c\u73af\u5883\u3002 $ git clone --recursive https://github.com/artic-network/artic-ncov2019.git $ conda env create -n ncov -f artic-ncov2019/environment.yml $ conda activate ncov ( ncov ) $ conda list \u5982\u679c\u4f7f\u7528docker images\u6765\u8fd0\u884cguppy $ docker pull genomicpariscentre/guppy # \u5982\u679c\u670d\u52a1\u5668\u6709GPU\u652f\u6301\uff0c\u53ef\u4ee5\u9009\u62e9guppy-gpu $ docker pull genomicpariscentre/guppy-gpu # \u4ea4\u4e92\u6a21\u5f0f\u8fd0\u884ccontainer $ docker run --name my_exp -it -v local_dir_of_fast5:/media/ genomicpariscentre/guppy /bin/bash # \u5bf9fast5\u6570\u636e\u8fdb\u884cbasecalling $ guppy_basecaller -i $HOME /data/fast5 -s output_folder \\ > -c dna_r9.4.1_450bps_hac.cfg --barcode_kits EXP-NBD104 \\ > --num_callers 40 --trim_barcodes 5.1.2 \u5206\u6790\u6d41\u7a0b \u00b6 \u4e0eillumina\u539f\u59cb\u6570\u636e\u662f\u56fe\u50cf\u6587\u4ef6\u4e0d\u540c\uff0cNanopore\u7684\u539f\u59cb\u6570\u636e\u4ee5HDF5\u683c\u5f0f\u4fdd\u5b58\u3002HDF\u662f\"Hierarchical Data Format\"\u9996\u5b57\u6bcd\u7f29\u5199\uff0cHDF5\u662f\u4e00\u79cd\u7eaf\u6587\u672c\uff0c\u7c7b\u4f3cjson\u7684\u6570\u636e\u683c\u5f0f\u8bb0\u5f55\u7535\u4fe1\u53f7\u3002\u67e5\u770bHDF5\u539f\u59cb\u6570\u636e\u53ef\u4ee5\u7528 hdf5_tools \u5de5\u5177\u3002\u6570\u636e\u6587\u4ef6\u540e\u7f00\u4e00\u822c\u7528.fast5\u8868\u793a\u3002 Nanopore \u6d4b\u5e8f\u6570\u636e\u671f\u521d\u7531\u4e8e\u5176\u9519\u8bef\u7387\u9ad8\u800c\u201c\u95fb\u540d\u201d\uff0c\u7279\u522b\u662f\u5bf9\u4e8c\u805a\u4f53\u7684\u533a\u5206\u3002\u7535\u4fe1\u53f7\u6570\u636e\u968f\u7740\u5904\u7406\u8f6f\u4ef6\u548c\u7b97\u6cd5\u7684\u4e0d\u65ad\u6539\u8fdb\uff0c\u51c6\u786e\u7387\u5f97\u5230\u4e0d\u65ad\u7684\u63d0\u5347\u3002HDF5\u6570\u636e\u8fdb\u884cbasecalling\u7684\u8f6f\u4ef6\u76ee\u524d\u5f88\u591a\uff0c\u91c7\u7528\u7684\u7b97\u6cd5\u4e5f\u5404\u5f02\u3002\u5b98\u65b9\u7684\u5982albacore\uff0cguppy\u7b49\uff0c\u7b2c\u4e09\u65b9\u5de5\u5177\u4e5f\u6709\u5f88\u591a\u3002 MinKnow\u8f6f\u4ef6 \u5c06fast5\u6570\u636e\u590d\u5236\u5230\u670d\u52a1\u5668\uff0c\u4f7f\u7528guppy\u8fdb\u884c\u5206\u6790 guppy\u662f\u4e00\u4e2a\u662f\u7528 \u6211\u4eec\u7684\u5b9e\u9a8c\u5ba4\u7528\u4e00\u53f0Workstation\u6302\u8f7dMinION\u6d4b\u5e8f\u4eea\uff0c\u8fdb\u884c\u6d4b\u5e8f\u5de5\u4f5c\u3002\u57fa\u672c\u914d\u7f6e\u662fi7-7700k+16G+1TSSD/1T HD\u3002\u4e00\u822c\u53ef\u4ee5\u505a\u523070%\u4ee5\u4e0a\u7684MinKnow\u5b9e\u65f6basecalling\u3002\u4f46\u662f\u5982\u679c\u8981\u4f7f\u7528guppy\u8fdb\u884c\u66f4\u51c6\u786e\u7684basecalling\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u5c06\u6570\u636e\u540c\u6b65\u5230\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u3002 # \u5728\u670d\u52a1\u5668\u4e0a rsync \u540c\u6b65\u6570\u636e\u5230\u672c\u5730 ( ncov ) $ rsync -avz username@minknow_ip:/var/lib/minknown/path/to/fast5 . # \u6216\u8005\u5728\u5de5\u4f5c\u7ad9\u4e0a\u540c\u6b65\u6570\u636e\u5230\u670d\u52a1\u5668\u7aef $ rsync -avz /var/lib/minknown/path/to/fast5 username@server_ip:~/data/fast5 \u8fd9\u91cc\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef fast5 \u6570\u636e\u76ee\u5f55\u5b58\u653e\u4e8e\uff1a$HOME/data/fast5\uff1b\u91c7\u7528\u7684\u662fR9.4\u7684\u6d4b\u5e8f\u82af\u7247\uff0c\u5404\u4e2a\u4e0d\u540c\u6d4b\u5e8f\u82af\u7247basecalling\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u53c2\u89c1 \u8fd9\u91cc ( ncov ) $ guppy_basecaller -c dna_r9.4.1_450bps_fast.cfg \\ > -i $HOME /data/fast5 -s run_name -x auto -r \u6211\u4eec\u7684MinION\u6d4b\u5e8f\u4eea\u8fde\u63a5\u7684\u662f\u4e00\u53f0Ubuntu 16.04\u7684Workstation\uff0c\u6d4b\u5e8f\u4eea\u6700\u5927\u6d4b\u5e8f\u72b6\u6001\u65f6\uff0c\u8dd1\u9ed8\u8ba4\u7684basecalling\u57fa\u672c\u4e0a\u53ef\u4ee5\u5b9e\u65f6\u8fbe\u523080%\u7684\u72b6\u6001\u3002\u5982\u679c\u9700\u8981\u7528guppy\u505a\u66f4\u51c6\u786e\u7684basecalling\uff0c\u6211\u4eec\u4f1a\u7528inotify-tools\u4e4b\u7c7b\u7684\u5de5\u5177\u52a0\u4e0a rsync \u5b9e\u65f6\u540c\u6b65\u5230\u670d\u52a1\u5668\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u3002 artic \u7684 demultiplex \u547d\u4ee4\u662f $ porechop --verbosity 2 --untrimmed -i \"re_all.fastq\" -b ./tmp5vx2iwn0 --native_barcodes --discard_middle --require_two_barcodes --barcode_threshold 80 --threads 8 --check_reads 10000 --barcode_diff 5 > re_all.fastq.demultiplexreport.txt 5.2 Illumina \u6d4b\u5e8f\u6570\u636e \u00b6 5.2.1 \u8f6f\u4ef6\u5b89\u88c5 \u00b6 \u66b4\u53d1\u75ab\u60c5\u4e2d\u75c5\u6bd2\u6bd2\u682a\u53d1\u751f\u7ed3\u6784\u53d8\u5f02\u7684\u53ef\u80fd\u6027\u8f83\u5c0f\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6bd4\u5bf9\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u65b9\u6cd5\u83b7\u5f97\u6bd2\u682a\u57fa\u56e0\u7ec4\u5e8f\u5217\u3002\u5982\u679c\u662f\u7814\u7a76\u65b0\u53d1\u7684\u8fdc\u6e90\u75c5\u6bd2\u6216\u957f\u65f6\u95f4\u6f14\u5316\u7684\u75c5\u6bd2\u5e8f\u5217\uff0c\u53ef\u80fd\u4e0e\u53c2\u8003\u57fa\u56e0\u7ec4\u5dee\u5f02\u8f83\u5927\u65f6\uff0c\u5e94\u7ed3\u5408\u7ec4\u88c5\u4e0e\u6bd4\u5bf9\u7684\u65b9\u6cd5\u83b7\u5f97\u57fa\u56e0\u7ec4\u5e8f\u5217\u3002 $ conda create -n mapping $ conda activate mapping ( mapping ) $ conda install bwa samtools igv 5.2.2 \u5206\u6790\u6d41\u7a0b \u00b6 \u4f7f\u7528Miseq\u81ea\u5e26\u7684SAV\u8f6f\u4ef6\u8fdb\u884cbasecalling\uff0c\u751f\u6210fastq\u6570\u636e\u590d\u5236\u5230\u670d\u52a1\u5668\u7aef \u53ef\u4ee5\u91c7\u7528bwa+samtools\u8fdb\u884c\u53c2\u8003\u5e8f\u5217\u6bd4\u5bf9\u83b7\u5f97\u4e00\u81f4\u6027\u5e8f\u5217\uff0c\u6216\u8005\u91c7\u7528bwa\u7b49\u5de5\u5177\u6bd4\u5bf9\u83b7\u5f97\u65b0\u51a0\u75c5\u6bd2\u5e8f\u5217\u540e\u5728\u8fdb\u884cde novo\u7ec4\u88c5\u3002 # \u6700\u57fa\u672c\u7684\u6bd4\u5bf9\u5206\u6790\u6d41\u7a0b ( mapping ) $ bwa index MN909847.3.fasta ( mapping ) $ bwa mem -k 45 -R \"@RG\\tID:HZ-1_1\\tSM:HZ-1\" MN909847.3.fasta \\ > HZ-1_S1...R1.fastq.gz HZ-1_S1...R2.fastq.gz | samtools view -bS > HZ-1.bam ( mapping ) $ samtools sort -O bam -o HZ-1.sorted.bam -@4 HZ-1.bam ( mapping ) $ samtools index HZ-1.sorted.bam ( mapping ) $ igv HZ-1.sorted.bam # \u4ee5bwa\u4e3a\u4f8b\u8fdb\u884creads\u8fc7\u6ee4\u540espades\u7ec4\u88c5 $ bwa index MN908947.3.fasta $ bwa mem -k 47 -R \"@RG\\tID:HZ-1\\tSM:HZ-1\" MN908947.3.fasta \\ > HZ-1_S1_L001_R1_001.fastq.gz HZ-1_S1_L001_R2_001.fastq.gz -t 40 | \\ > samtools view -bS - | samtools sorted -@40 -O bam HZ-1.sorted.bam $ samtools index HZ-1.sorted.bam $ samtools faidx MN908947.3.fasta $ samtools mpileup -uf MN908047.3.fasta HZ-1.sorted.bam | \\ > bcftools call --ploidy 1 -mv -Oz > HZ-1.vcf.gz $ tabix HZ-1.vcf.gz $ cat MN908947.3.fasta | bcftools consensus HZ-1.vcf.gz > Hz-1_consensus.fasta # de novo \u7ec4\u88c5 $ bwa index MN908947.3.fasta $ bwa mem -k 45 -R \"@RG\\tID:HZ-1\\tSM:HZ-1\" MN908947.3.fasta \\ > HZ-1_S1_L001_R1_001.fastq.gz HZ-1_S1_L001_R2_001.fastq.gz -t 4 | \\ > samtools view -bS > HZ-1.bam # \u63d0\u53d6\u53cc\u7aef\u90fd\u6bd4\u5bf9\u5230\u53c2\u8003\u5e8f\u5217\u7684reads $ samtools view -bF 12 HZ-1.bam > HZ-1.mapped.bam # bam\u683c\u5f0f\u8f6c\u5316\u6210fastq\u683c\u5f0f $ bamToFastq -i HZ-1.mapped.bam -fq HZ-1.mapped_R1.fastq -fq2 HZ-1.mapped_R2.fastq # de novo assembly $ shovill --trim --outdir test --R1 HZ-1.mapped_R1.fastq -fq2 HZ-1.mapped_R2.fastq --ram 16 --cpus 40 $ bwa mem -t 40 -x ont2d MN908947.3.fasta test/contigs.fa | samtools view -bS - | samtools sort -o test.sorted.bam - $ samtools index test.sorted.bam \u81ea\u5b9a\u4e49\u5206\u6790\u6d41\u7a0b \u00b6 \u9488\u5bf9MinKnow\u751f\u6210\u7684\u6570\u636e # \u751f\u6210\u6837\u672c\u7684 fastq $ for i in *.fastq ; do zcat $i >> s1.fq ; done $ gzip s1.fq # \u53bb\u9664\u53ef\u80fd\u7684\u63a5\u5934\u5e8f\u5217 $ porechop -t 4 -i s1.fq.gz --format fastq.gz -o s1.clean.fq.gz # \u53bb\u9664\u4f4e\u8d28\u91cf\u5e8f\u5217 $ gunzip -c s1.clean.fq.gz | NanoFilt -q 10 -l 400 --maxlength 700 | gzip > s1.clean.hq.fq.gz # \u83b7\u5f97\u6bd4\u5bf9\u7ed3\u679c $ bwa index MN908947.3.fasta $ bwa mem -t 4 -x ont2d MN908947.3.fasta s1.clean.hq.fq.gz | \\ > samtools view -bS - | \\ > samtools sort -o s1.clean.hq.sorted.bam - $ samtools index s1.clean.hq.sorted.bam $ samtools faidx MN908947.3.fasta # vcf calling $ bcftools mpileup -f --threads 4 MN908047.3.fasta s1.clean.hq.sorted.bam | \\ > bcftools call --ploidy 1 -mv -Oz > s1.vcf.gz $ tabix s1.vcf.gz # \u83b7\u5f97 consensus \u5e8f\u5217 $ bcftools consensus -f MN908947.3.fasta -H 1 s1.vcf.gz -o s1_consensus.fasta # \u6216\u8005\u4f7f\u7528minimap\u5de5\u5177\u8fdb\u884c\u6bd4\u5bf9 \u53c2\u8003\u8d44\u6599 \u00b6 https://www.protocols.io/view/ncov-2019-sequencing-protocol-bbmuik6w https://artic.network/ncov-2019/ncov2019-bioinformatics-sop.html https://nanoporetech.com/resource-centre/nanopore-sequencing-sars-cov-2-genome-introduction-protocol","title":"ArticNetwork Covid-19\u6d4b\u5e8f"},{"location":"protocol/artic-network-covid19/#artic","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u6839\u636e\u76ee\u524d ARTIC-Network v3 \u7248 Sars-Cov-2 \u57fa\u56e0\u7ec4\u6d4b\u5e8f\u65b9\u6848\uff0c\u6839\u636e\u6211\u4eec\u81ea\u5df1\u5b9e\u9a8c\u5ba4\u7684\u5de5\u4f5c\u6d41\u7a0b\u7ed3\u5408\u7f51\u7edc\u4e0a\u7684\u8d44\u6e90\uff0c\u5efa\u7acb\u5b9e\u9a8c\u65b9\u6848\u3002","title":"ARTIC\u7eb3\u7c73\u5b54\u65b0\u578b\u51a0\u72b6\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u65b9\u6848"},{"location":"protocol/artic-network-covid19/#_1","text":"\u65b0\u51a0\u75c5\u6bd2\u57f9\u517b\u9700\u8981P3\u5b9e\u9a8c\u5ba4\uff0c\u56e0\u6b64\u666e\u901a\u5b9e\u9a8c\u5ba4\u53ea\u80fd\u9488\u5bf9\u6837\u54c1\u6838\u9178\u8fdb\u884c\u6d4b\u5e8f\uff0c\u5982\u4f55\u628a\u65b0\u51a0\u75c5\u6bd2\u6838\u9178\u5bcc\u96c6\u5230\u80fd\u591f\u6d4b\u5e8f\u7684\u6c34\u5e73\u662f\u9996\u5148\u8981\u89e3\u51b3\u7684\uff0c\u867d\u7136\u76ee\u524d\u4e5f\u6709\u63a2\u9488\u6355\u83b7\u7b49\u8bd5\u5242\u76d2\u6216\u8005\u65b9\u6cd5\uff0c\u4f46\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u662f\u91c7\u7528PCR\u6269\u589e\u3002\u6211\u4eec\u53ef\u4ee5\u81ea\u884c\u8bbe\u8ba1\u6269\u589e\u5f15\u7269\uff0c\u83b7\u5f97\u76ee\u6807\u7247\u6bb5\uff0c\u4e0d\u8fc7\u65b0\u51a0\u75c5\u6bd2\u57fa\u56e0\u7ec4\u8fbe\uff5e30k\uff0c\u3002\u6269\u589e\u7684\u65b9\u5f0f\u4e00\u822c\u90fd\u662f\u91c7\u7528\u591a\u91cdPCR\uff0cARTIC Network\u7684\u5b9e\u9a8c\u65b9\u6848\u91c7\u7528\u77ed\u7247\u6bb5\uff08300~700bp\uff09\u8fdb\u884c\u6269\u589e\uff0c\u6709\u5229\u4e8e\u6269\u589e\u83b7\u5f97\u6837\u54c1\u4e2d\u75c5\u6bd2\u5e8f\u5217\u8f83\u9ad8\u7684\u4e30\u5ea6\u3002\u91c7\u7528Nanopore\u6d4b\u5e8f\u65b9\u6cd5\uff0c\u5bf9CT32\u4ee5\u4e0b\u7684\u4e34\u5e8a\u6807\u672c\u5bb9\u6613\u83b7\u5f97\u8986\u76d6\u5ea6\u8f83\u4e3a\u5b8c\u6574\u7684\u57fa\u56e0\u7ec4\u6570\u636e\u3002\u9ad8CT\u503c\u7684\u6837\u672c\uff0c\u5bb9\u6613\u51fa\u73b0\u90e8\u5206\u533a\u57df\u6d4b\u5e8f\u6df1\u5ea6\u8fc7\u4f4e\u6216\u5b58\u5728gap\u7684\u60c5\u51b5\u3002\u6211\u4eec\u91c7\u7528\u7c7b\u4f3c\u65b9\u6cd5\u901a\u8fc7illumina\u6d4b\u5e8f\u5e73\u53f0\u4e5f\u83b7\u5f97\u4e86\u8f83\u597d\u7684\u7ed3\u679c\uff0c\u6709\u9700\u8981\u65f6\u53ef\u4ee5\u4e92\u76f8\u8865\u5145\u3002 \u672c\u65b9\u6848\u9002\u5408\u591a\u6837\u672c\u4e0a\u673a\u6d4b\u5e8f\uff0c\u5982\u679c\u6837\u54c1\u6570\u91cf\u8f83\u5c11\uff0c \u6d4b\u5e8f\u8d28\u91cf \u5f88\u591a\u4eba\u62c5\u5fc3\u4e09\u4ee3\u6d4b\u5e8f\u6570\u636e\u7684\u8d28\u91cf\uff0c\u662f\u5426\u4f1a\u5bfc\u81f4\u57fa\u56e0\u7ec4\u4e0d\u51c6\u786e\u3002Artic Network\u7ed9\u51fa\u4e86\u901a\u7528\u7684\u65b9\u6848\u3002 \u6d4b\u5e8f\u65b9\u6cd5\u6c47\u603b\u53ef\u53c2\u8003CDC\u7684\u8d44\u6599 https://github.com/CDCgov/SARS-CoV-2_Sequencing","title":"\u5b9e\u9a8c\u7b80\u4ecb"},{"location":"protocol/artic-network-covid19/#1-cdna","text":"","title":"1. cDNA\u83b7\u53d6"},{"location":"protocol/artic-network-covid19/#11","text":"RNA\u63d0\u53d6\u8bd5\u5242 Invitrogen SuperScript\u2122 IV First-Strand Synthesis System 0.2mL PCR\u7ba1 \u6ce8\u610f\u4e8b\u9879 SSIV\u7684\u9176\u65e0RNaseH\u6d3b\u6027\uff0c\u83b7\u5f97\u957f\u7247\u6bb5cDNA\u6548\u679c\u66f4\u597d\u3002SSIII\uff0c\u6709\u4e2d\u7b49\u6d3b\u6027\u7684RNaseH\u6d3b\u6027\uff0c\u83b7\u5f97\u7684cDNA\u8fdb\u884c\u77ed\u7247\u6bb5\u6d4b\u5e8f\u4e5f\u53ef\u4ee5\u6210\u529f\uff0c\u5982\u679c\u662f\u957f\u5ea6\u66f4\u957f\u4e00\u4e9b\u7684\u7247\u6bb5\uff0cSSIV\u6548\u679c\u660e\u663e\u66f4\u597d\u4e00\u4e9b\u3002","title":"1.1 \u8bd5\u5242\u4e0e\u8017\u6750"},{"location":"protocol/artic-network-covid19/#12","text":"\u91c7\u7528RNA\u8bd5\u5242\u76d2\u624b\u5de5\u63d0\u53d6\u6837\u672c\u603bRNA\uff0c\u4e5f\u53ef\u4ee5\u7528\u673a\u5668\u81ea\u52a8\u63d0\u53d6\u3002 RNA\u901a\u8fc7Qiagen RNeasy Mini Kit \u624b\u5de5\u63d0\u53d6\u8bd5\u5242\u76d2\u6216\u8005\u673a\u5668\u63d0\u53d6\u7684\u90fd\u53ef\u4ee5\uff0cPCR\u5b9e\u9a8c\u7ed3\u679cCT\u65e0\u660e\u663e\u5dee\u5f02\u3002\u6709 \u6587\u7ae0 \u6bd4\u8f83\u8fc7Qiagen\u4e0d\u540c\u7684RNA\u63d0\u53d6\u8bd5\u5242\u76d2\u7684\u5b8f\u57fa\u56e0\u7ec4\u6d4b\u5e8freads\u4ea7\u51fa\u6548\u679c\uff0c\u53ef\u4ee5\u4f9b\u5927\u5bb6\u53c2\u8003\u3002 \u53d6EP\u7ba1\uff0c\u4f9d\u6b21\u88c5\u5165\u4ee5\u4e0b\u8bd5\u5242\uff0c\u5206\u88c5\u52300.2mL PCR\u4e2d\uff0c\u52a0\u5165RNA\u6a21\u677f\uff0cPCR\u7ba1\u7528\u79fb\u6db2\u5668\u5439\u5438\u6df7\u5300\uff0c\u79bb\u5fc3\u5c06\u7ba1\u58c1\u6b8b\u6db2\u7529\u4e0b\u3002 \u8bd5\u5242 1x 8x 50\u00b5M random hexamers 1 \u00b5l 8\u00b5l 10mM dNTPs mix (10mM each) 1 \u00b5l 8\u00b5l Template RNA 11 \u00b5l 11\u00b5l * 8 Total 13 \u00b5l 13\u00b5l * 8 \u6ce8\u610f\u4e8b\u9879 \u6837\u672cRNA\u505a\u8fc7SARS-CoV-2 qPCR\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u6839\u636eCT\u503c\u521d\u6b65\u5224\u65adRNA\u542b\u91cf\u3002\u5982\u679cRNA\u91cf\u5728CT18\uff5e35\u4e4b\u95f4\uff0c\u53ef\u4ee5\u76f4\u63a5\u52a0\u5165\u6a21\u677fRNA\u3002\u5982\u679c\u572812\uff5e15\u4e4b\u95f4\uff0c100\u500d\u7a00\u91ca\uff1b\u5982\u679c\u572815\uff5e18\u4e4b\u95f4\uff0c10\u500d\u7a00\u91ca\u3002\u5bf9\u4e8e\u4e34\u5e8a\u75c5\u4f8b\u6765\u8bf4\uff0c\u5927\u90e8\u5206\u6837\u672cCT\u503c\u572818\uff5e35\u4e4b\u95f4\u3002 \u4f7f\u7528random hexamers\u662f\u4e3a\u4e86\u6700\u5927\u7a0b\u5ea6\u83b7\u5f97\u5168\u957fcDNA\uff0cSSIV\u81ea\u5e26\u7684random hexamers\u6d53\u5ea6\u662f50ng/\u00b5l\uff0c6mers\u957f\u5ea6\uff0c\u5982\u679c\u52a01\u00b5l\uff0c\u76f8\u5f53\u4e0e\u6469\u5c14\u6570 25e-6\u00b5mol\uff0c\u56e0\u6b64\u6839\u636e\u8868\u4e2d\u91cf\uff0c\u9700\u8981\u52a02\u00b5l\u3002\u4f46\u6839\u636e\u8bd5\u5242\u76d2\u8bf4\u660e\u4e66\u4e2d\u4e5f\u662f\u52a01\u00b5l\u91cf\uff0c\u56e0\u6b64\u8fd9\u91cc\u53c2\u8003\u8bf4\u660e\u4e66\u3002 \u63a8\u8350\u52a0\u5165\u6837\u672c\u524d\uff0c\u5728PCR\u4eea\u4e0a\u9884\u70ed\u3002 \u53cd\u5e94\u4f53\u7cfb\u5728PCR\u4eea\u5668\u4e2d 65\u00b0C 5min\u3002\u7136\u540e\u7acb\u5373\u7f6e\u4e8e\u51b0\u4e0a\u81f3\u5c111min\u3002 \u6309\u4e0b\u8868\u914d\u7f6e\u53cd\u5e94\u4f53\u7cfb\uff0c\u6dfb\u52a0\u5230\u51b0\u4e0a\u7684PCR\u7ba1\u4e2d\u3002\u7f6e\u4e8ePCR\u4eea\u5668\u4e2d\uff0c42\u00b0C 50min\uff0c70\u00b0C 10min\uff0c\u7ed3\u675f\u540e5\u00b0C \u4fdd\u6e29\u3002\u8fd9\u4e00\u6b65\u8981\u8bbe\u7f6e105\u00b0C\u70ed\u76d6\u3002 \u8bd5\u5242 1x 8x 5x SSIV Buffer 4 \u00b5l 32 \u00b5l 100mM DTT 1 \u00b5l 8 \u00b5l RNaseOUT RNase Inhibitor 1 \u00b5l 8 \u00b5l SSIV Reverse Transcriptase 1 \u00b5l 8 \u00b5l \u524d\u4e00\u6b65PCR\u7ba1\u5185\u6db2\u4f53 13 \u00b5l 13 \u00b5l * 8 Total 20 \u00b5l 20 \u00b5l * 8 \u4ee5\u4e0a\u914d\u6db2\u64cd\u4f5c\u5728PCR\u5de5\u4f5c\u7ad9\u6216\u751f\u7269\u5b89\u5168\u67dc\u5185\u8fdb\u884c\u3002\u4f7f\u7528\u524d\u7d2b\u5916\u5904\u740630\u5206\u949f\u5e76\u901a\u98ce\u3002","title":"1.2 \u5b9e\u9a8c\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#2-pcr","text":"","title":"2. PCR\u6269\u589e"},{"location":"protocol/artic-network-covid19/#21","text":"DEPC H2O QIAGEN Multiplex PCR Kit Q5 Hot Start High-Fidelity DNA Polymerase ARTIC Network\u6d41\u7a0b\u91cc\u4f7f\u7528\u7684\u662fNEB Q5\u9176\uff0c\u8bd5\u7528Qiagen\u7684\u591a\u91cdPCR\u4ea7\u54c1\uff0c\u6548\u679c\u4e5f\u53ef\u4ee5\u3002","title":"2.1 \u8bd5\u5242\u4e0e\u8017\u6750"},{"location":"protocol/artic-network-covid19/#22","text":"\u5c0698\u7ec4\u51bb\u5e72\u5f15\u7269 8000rpm \u79bb\u5fc3 10min\u3002\u5c06\u6bcf\u4e2a\u5f15\u7269\u914d\u7f6e\u6210100uM\u6d53\u5ea6\u3002 \u51c6\u59072\u4e2aEP\u7ba1\uff0c\u6807\u8bb0\u4e3aP1\u548cP2\u3002\u4ece98\u4e2a100uM\u7684\u5f15\u7269\uff0c\u6bcf\u7ba1\u5438\u53d65uL\u5206\u522b\u5230Pool1\u548c2\u4e2d\uff0c\u6700\u7ec8\u6bcf\u7ba1\u542b100uM\u6d53\u5ea6\u7684\u5f15\u7269\u5171980uL\u3002 \u9707\u8361\u6df7\u5300\uff0c\u79bb\u5fc3\u7529\u5e72\u540e\uff0c\u5404\u53d620uL P\u00bd \u5f15\u7269\uff0c\u52a0\u5165180uL\u6c34\u3002\u4f7f\u5f97Pool1\u548cPool2\u5f15\u7269\u7ec8\u6d53\u5ea6\u4e3a10uM\u3002 \u4ee5\u4e0a\u914d\u6db2\u64cd\u4f5c\u5728PCR\u5de5\u4f5c\u7ad9\u6216\u751f\u7269\u5b89\u5168\u67dc\u5185\u8fdb\u884c\u3002\u4f7f\u7528\u524d\u7d2b\u5916\u5904\u740630\u5206\u949f\u5e76\u901a\u98ce\u3002 \u6bcf\u4e2a\u6837\u672c\u53d62\u4e2aPCR\u7ba1\uff0c\u4f7f\u7528NEB Q5 Hot Start DNA Polymerase\u8bd5\u5242\u6216\u8005Qiagen Multiplex PCR\u8bd5\u5242\u8fdb\u884cPCR\u6269\u589e\uff0c\u914d\u6db2\u53c2\u89c1\u8868\u00bd\u3002 NEB Q5 Hot Start DNA Polymerase Pool1 Pool2 5X Q5 Reaction Buffer 5 \u00b5l 5 \u00b5l 10 mM dNTPs 0.5 \u00b5l 0.5 \u00b5l Q5 Hot Start DNA Polymerase 0.25 \u00b5l 0.25 \u00b5l Primer Pool 1 or 2 (10\u00b5M) 3.6 \u00b5l 3.6 \u00b5l Nuclease-free water 13.15 \u00b5l 13.15 \u00b5l cDNA 2.5uL 2.5uL Total 25 \u00b5l 25 \u00b5l Qiagen Multiplex PCR Kit Pool1 Pool2 2X Qiagen Multiplex PCR Master Mix 12.5 \u00b5l 12.5 \u00b5l Primer Pool 1 or 2 (10\u00b5M) 3.6 \u00b5l 3.6 \u00b5l 5X Q Solution 2.5 \u00b5l 2.5 \u00b5l Nuclease-free water 3.9 \u00b5l 3.9 \u00b5l cDNA 2.5uL 2.5uL Total 25 \u00b5l 25 \u00b5l \u6839\u636e\u4f53\u7cfb\u4f18\u5316\uff0c\u6bcf\u4e2a\u5f15\u7269\u7684\u7ec8\u6d53\u5ea6\u4e3a0.015uM\u3002 NEB Q5 \u7684PCR\u7a0b\u5e8f\u4e3a\uff1a \u5e8f\u53f7 \u6e29\u5ea6 \u65f6\u95f4 \u524d\u5f80 1. 98\u00b0C 30s 2. 98\u00b0C 15s 3. 65\u00b0C 5min \u524d\u5f802, \u5faa\u73af25\uff5e35cycles 4. 4\u00b0C Hold Qiagen Multiplex Kit\u7684PCR\u7a0b\u5e8f\u4e3a\uff1a \u5e8f\u53f7 \u6e29\u5ea6 \u65f6\u95f4 \u524d\u5f80 1. 95\u00b0C 15min 2. 94\u00b0C 30s 3. 58\u00b0C 90s 4. 72\u00b0C 45s \u524d\u5f802, \u5faa\u73af25\uff5e35cycles 5. 72\u00b0C 10min 6. 4\u00b0C Hold Ct18-21\u7684\u6837\u672c\u752825\u5faa\u73af, Ct 35\u7684\u6837\u672c\u752835\u4e2a\u5faa\u73af\u3002CT\u503c\u4ecb\u4e8e21\uff5e35\u7684\u6839\u636e\u5206\u5e03\u81ea\u884c\u8bbe\u7f6e\u3002 \u5e94\u7528\u672c\u65b9\u6cd5\u5230\u5176\u4ed6\u75c5\u539f\u68c0\u6d4b\u65f6\uff0c\u9700\u8981\u8bbe\u8ba1\u591a\u91cdPCR\u7684\u8bdd\uff0c\u53ef\u4ee5\u4f7f\u7528 \u8fd9\u91cc \u7684\u5f15\u7269\u8bbe\u8ba1\u5de5\u5177\u83b7\u5f97\u5f15\u7269\u7ec4\u3002","title":"2.2 \u5b9e\u9a8c\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#3-amplicon","text":"","title":"3. Amplicon\u7eaf\u5316\u56de\u6536"},{"location":"protocol/artic-network-covid19/#31","text":"Elution Buffer AMPure XP Beads","title":"3.1 \u8bd5\u5242\u4e0e\u8017\u6750"},{"location":"protocol/artic-network-covid19/#32","text":"\u5c06\u6bcf\u4e2a\u6837\u672c\u7684Pool1\u548cPool2\u6df7\u5408\uff0c\u56e0\u4e3a\u6d4b\u5e8f\u6587\u5e93\u4e0e\u4e0a\u6837\u91cf\u6709\u5173\uff0c\u672c\u5b9e\u9a8c\u6d41\u7a0b\u8bbe\u8ba1\u7684\u662f\u9488\u5bf98\u4e2a\u4ee5\u4e0a\u6837\u672c\u7684\u4e0a\u6837\u91cf\u3002\u5efa\u8bae\u68c0\u6d4b\u6837\u672c\u5e26\u8d28\u63a7DNA\u505a\u4e3a\u9634\u6027\u5bf9\u7167\uff0c\u4ee5\u4fbf\u68c0\u67e5\u662f\u5426\u6709\u6c61\u67d3\u5e8f\u5217\u3002 \u5c06AMPure XP Beads \u63d0\u524d30min\u53d6\u51fa\u7f6e\u4e8e\u5e38\u6e29\uff0c\u4f7f\u7528\u524d\u5728\u9707\u8361\u4eea\u4e0a\u6df7\u5408\u5747\u5300\u3002 \u53d650uL AMPure XP Beads \u5230 50uL \u6df7\u5408pooling Amplicon\u4e2d\u3002\u9707\u8361\u6df7\u5300\uff08\u589e\u52a0\u9707\u8361\u65f6\u95f4\u80fd\u6781\u5927\u63d0\u9ad8\u56de\u6536\u7387\uff09\uff0c\u79bb\u5fc3\u7529\u5e72\u3002 1x \u78c1\u73e0\u5438\u9644250\uff5e1000bp\u6548\u7387\u8f83\u597d\u3002\u5177\u4f53 \u53c2\u89c1 \u5ba4\u6e29\u653e\u7f6e5min\u3002 \u5c06EP\u7ba1\u653e\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a2min\uff0c\u76f4\u81f3\u6db2\u4f53\u6f84\u6e05\u3002 \u5438\u5f03\u6db2\u4f53\uff0c\u7528200uL\u65b0\u9c9c\u914d\u7f6e\u768470\uff5e80%\u4e59\u9187\u6d172\u6b21\u3002 \u752810uL\u79fb\u6db2\u5668\u5438\u5f03\u6b8b\u6db2\uff0c\u5f00\u76d61min\uff0c\u8ba9\u4e59\u9187\u6325\u53d1\u3002 \u4ece\u78c1\u529b\u67b6\u4e0a\u53d6\u4e0b\uff0c\u752815\uff5e30uL Elution Buffer\u6216\u8005\u6c34\u91cd\u60ac\u78c1\u73e0\uff0c\u7528\u67aa\u5934\u6216\u624b\u6307\u8f7b\u8f7b\u6df7\u5300\uff0c\u9759\u7f6e2min\u3002 \u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c\u6db2\u4f53\u6f84\u6e05\u540e\u5438\u53d630uL\u6db2\u4f53\u5230\u4e00\u4e2a\u65b0\u7684EP\u7ba1\u4e2d\u3002\u53d61uL\u8fdb\u884cQubit\u5b9a\u91cf\u3002 \u6837\u672c\u6d53\u5ea6\u4e0ePCR\u4ea7\u7269\u56de\u6536\u76f8\u5173\u6027\uff1a - 10E5\u5927\u7ea6200ng/uL - 10E4\u5927\u7ea6120ng/uL - 10E3\u5927\u7ea680ng/uL - 10E2\u5927\u7ea625ng/uL - 10E1\u5927\u7ea610ng/uL","title":"3.2 \u5b9e\u9a8c\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#4","text":"","title":"4. \u6587\u5e93\u6784\u5efa"},{"location":"protocol/artic-network-covid19/#41-nanopore","text":"","title":"4.1 Nanopore \u6d4b\u5e8f\u6587\u5e93"},{"location":"protocol/artic-network-covid19/#411","text":"Nanopore EXP-NBD104/114 Nanopore SQK-LSK109 Nanopore \u6d4b\u5e8f\u82af\u7247\u5236\u5907\u8bd5\u5242\u76d2 EXP-FLP002 Eppendorf DNA LoBind Tubes NEBNext\u00ae Ultra\u2122 II DNA Library Prep Kit for Illumina E7645","title":"4.1.1 \u8bd5\u5242\u4e0e\u8017\u6750"},{"location":"protocol/artic-network-covid19/#412","text":"\u6ce8\u610f\u6b64\u6d41\u7a0b\u662f\u6839\u636e6~24\u4e2a\u6837\u672c\u6df7\u6837\u7684\u91cf\u89c4\u5212\u7684\u3002\u5982\u679c\u53ea\u505a\u5355\u4e2a\u6837\u672c\uff0c\u53ef\u4ee5\u4e0d\u52a0barcodes\uff0c\u4f46\u9700\u8981\u8c03\u6574input DNA\u91cf\uff0c\u5efa\u8bae\u52a0\u5165DNA\u8fbe40ng\uff0c\u4fdd\u8bc1\u4e0a\u673a\u65f6\u80fd\u7ea6\u670920ng DNA\uff0c\u8fbe\u5230\u6700\u4f73\u7684\u82af\u7247\u6d4b\u5e8f\u5206\u5b50\u6570\u3002 \u5c06\u5b9a\u91cf\u7684DNA\u7a00\u91ca\u62101ng/uL\uff0c\u8be5\u6d53\u5ea6\u662f\u9488\u5bf9700bp\u957f\u5ea6\u7684Amplicon\uff0c\u5982\u679c\u7247\u6bb5\u957f400bp\uff0c\u5efa\u8bae\u6d53\u5ea6\u4e3a2ng/uL\uff0c\u8fd9\u6837\u5206\u5b50\u6d53\u5ea6\u7ea6\u4e3a100\uff5e200fmol\u3002 \u53d60.2mLPCR\u7ba1\uff0c\u6839\u636e\u4e0b\u8868\u8fdb\u884c\u914d\u6db2\uff0c\u8fdb\u884c\u672b\u7aef\u4fee\u590d\u3002 \u8bd5\u5242 \u91cf DNA amplicons 5 \u00b5l Nuclease-free water 7.5 \u00b5l Ultra II End Prep Reaction Buffer 1.75 \u00b5l Ultra II End Prep Enzyme Mix 0.75 \u00b5l \u603b\u91cf 15 \u00b5l \u5ba4\u6e29\u653e\u7f6e10min\u3002\u7f6e\u4e8ePCR\u4eea\u4e0a\uff0c65\u00b0C 5min\uff0c\u7acb\u5373\u7f6e\u4e8e\u51b0\u4e0a\u81f3\u5c111min \u5728PCR\u7ba1\u4e2d\u52a0\u5165\u4ee5\u4e0b\u8bd5\u5242\uff1a \u8bd5\u5242 \u91cf \u8fde\u63a5NBXX\u7684\u6df7\u5408\u6db2 15 \u00b5l NBXX barcode 2.5 \u00b5l Ultra II Ligation Master Mix 17.5 \u00b5l Ligation Enhancer 0.5 \u00b5l \u603b\u91cf 35.5 \u00b5l NBXX barcodes \u4e3a EXP-NBD104(01~12)\u548cEXP-NBD114(13\uff5e24) \u8bd5\u5242\u4e2d\u7684 barcodes \u5ba4\u6e29\u653e\u7f6e15min\u3002\u7f6e\u4e8ePCR\u4eea\u4e0a\uff0c70\u00b0C 10min\uff0c\u7acb\u5373\u7f6e\u4e8e\u51b0\u4e0a\u81f3\u5c111min 70\u00b0C 10min \u76ee\u7684\u662f\u6291\u5236DNA Ligase\u6d3b\u6027\uff0c\u907f\u514d\u63a5\u5934\u5f62\u6210\u4e8c\u805a\u4f53\u3002 \u5c06\u8fde\u63a5barcodes\u540e\u7684\u6240\u6709\u6837\u672c\u7684\u6df7\u5408\u5230\u4e00\u4e2aEP\u7ba1\u4e2d\u3002\u53d61uL\u8fdb\u884c\u5b9a\u91cf \u53d6LoBind Tubes EP\u7ba1\uff0c\u6309\u7167\u4e0b\u8868\u8fdb\u884c\u914d\u6db2\uff0c\u5ba4\u6e29\u653e\u7f6e15min\u3002 \u8bd5\u5242 \u91cf Barcoded amplicon pools 30 \u00b5l NEBNext Quick Ligation Reaction Buffer (5X) 10 \u00b5l AMII adapter mix 5 \u00b5l Quick T4 DNA Ligase 5 \u00b5l \u603b\u91cf 50 \u00b5l input DNA\u7684\u91cf\u6839\u636ebarcods\u6570\u91cf\u51b3\u5b9a\uff0c\u6570\u91cf\u572840ng\uff5e160ng(8\uff5e24 barcods)\u3002 \u52a0\u516550uL AMPure XP Beads\uff0c\u8f7b\u8f7b\u6df7\u5300\u3002\u5ba4\u6e29\u653e\u7f6e5min \u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a2min\uff0c\u6db2\u4f53\u6f84\u6e05\u540e\u5438\u5f03\u6db2\u4f53\u3002 \u78c1\u529b\u67b6\u4e0a\u53d6\u4e0bEP\u7ba1\uff0c\u52a0\u5165200uL SFB\uff0c\u91cd\u60ac\u78c1\u73e0\u3002 EP\u7ba1\u653e\u5230\u78c1\u529b\u67b6\u4e0a\u9759\u7f6e2min\uff0c\u6db2\u4f53\u6f84\u6e05\u540e\u5438\u5f03\u3002\u7528SFB\u518d\u6d171\u6b21\u3002 \u52a0\u516515uL EB\u91cd\u60ac\u78c1\u73e0\uff0c\u5ba4\u6e29\u653e\u7f6e2min\u3002 \u5c06EP\u7ba1\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\u3002\u5438\u53d6\u6f84\u6e05\u6db2\u4f53\u5230\u4e00\u4e2a\u65b0\u7684EP\u7ba1\u4e2d\uff0c\u4e3a\u6d4b\u5e8f\u6587\u5e93\u3002 \u7528\u4e8e\u4e0a\u673a\u6d4b\u5e8f\u7684\u6587\u5e93DNA\u91cf\u4e3a20ng \u5c0630uL FLT \u52a0\u5165\u52301\u7ba1FB\u4e2d\uff0c\u9707\u8361\u6df7\u5300\u3002 \u6253\u5f00\u6d4b\u5e8f\u82af\u7247\u7684priming port\uff0c\u75281mL\u79fb\u6db2\u5668\u5782\u76f4\u9876\u4f4fpriming port\uff0c\u6162\u6162\u65cb\u8f6c\u79fb\u6db2\u5668\u91cf\u7a0b\uff0c\u9ec4\u8272\u7eb3\u7c73\u5b54\u4fdd\u62a4\u6db2\uff0c\u76f4\u5230\u6ca1\u6709\u6c14\u6ce1\u3002 \u5438\u53d6800uL FLT/FB\u6df7\u5408\u6db2\uff0c\u4ecePriming port\u4e2d\u52a0\u5165\uff0c\u53ef\u4ee5\u4e0d\u7528\u52a0\u5b8c\uff0c\u907f\u514d\u6c14\u6ce1\u52a0\u5165\u82af\u7247\u4e2d\u3002\u7b49\u5f855min\u3002 \u6253\u5f00Spot on port\uff0c\u6ef4\u52a0200uL FLT/FB\u6df7\u5408\u6db2\u3002\u76f4\u81f3Spoton port\u5b8c\u5168\u5438\u6536\u3002 \u53d6\u4e00\u4e2aEP\u7ba1\uff0c\u6309\u7167\u4e0b\u8868\u914d\u6db2\uff1a \u8bd5\u5242 \u91cf SQB 37.5 \u00b5l LB 25.5 \u00b5l Final library 12 \u00b5l \u603b\u91cf 75 \u00b5l LB\u4f7f\u7528\u524d\u518d\u5145\u5206\u6df7\u5300 \u6ef4\u52a075uL\u6587\u5e93\u5230Spoton Port\u4e2d\uff0c\u6db2\u4f53\u5b8c\u5168\u5438\u6536\u540e\u5173\u95edSpoton Port\u548cPriming Port\uff0c\u5c06\u82af\u7247\u88c5\u5165\u6d4b\u5e8f\u4eea\uff0c\u6253\u5f00MinKnow\u6d4b\u5e8f\u8f6f\u4ef6\u8fdb\u884c\u6d4b\u5e8f\u3002 \u5bf9\u4e8e\u6ca1\u7528\u7528\u5b8cnanopores\u7684\u82af\u7247\uff0c\u53ef\u4ee5\u542f\u7528\u6e05\u6d17\u7a0b\u5e8f\u4ee5\u540e\u7ee7\u7eed\u4f7f\u7528\uff1a \u53d6 1\u7ba1 Wash Solution B\u7f6e\u4e8e\u5ba4\u6e29\uff0c\u9707\u8361\u6df7\u5300\u540e\u653e\u5728\u51b0\u4e0a\u5f85\u7528\u3002 \u5728 1\u4e2a EP\u7ba1\u4e2d\uff0c\u52a0\u516520uL Wash Solution A\u548c380uL Wash Solution B\u3002\u5439\u5438\u6df7\u5300\uff08\u4e0d\u8981\u9707\u8361\uff09\uff0c\u7f6e\u4e8e\u51b0\u4e0a\u3002 \u6682\u505c\u6d4b\u5e8f\uff0c\u4f46\u4e0d\u8981\u53d6\u51fa\u82af\u7247\u3002 \u786e\u5b9aPriming Port\u548cSpotON Port\u5173\u95ed\u3002\u75281000uL\u79fb\u6db2\u5668\uff0c\u4eceWaste Port1\u4e2d\u5438\u51fa\u6240\u6709\u6db2\u4f53\uff0c\u786e\u5b9a\u82af\u7247\u7eb3\u7c73\u5b54\u5904\u6ca1\u6709\u6b8b\u6db2\u3002 \u6253\u5f00Priming Port\uff0c\u5148\u786e\u8ba4\u6d88\u9664\u6c14\u6ce1\u3002\u7136\u540e\u52a0\u5165400Wash Solution\u6d17\u6db2\uff0c\u6ce8\u610f\u907f\u514d\u52a0\u5165\u6c14\u6ce1\u3002 \u5173\u95edPriming Port\uff0c\u7b4930min\u540e\uff0c\u75281000uL\u79fb\u6db2\u5668\u4eceWaste Port1\u4e2d\u5438\u5f03\u6240\u6709\u6db2\u4f53\u3002 \u5982\u679c\u8fd8\u8981\u6d4b\u5176\u4ed6\u6837\u672c\uff0c\u53ef\u53c2\u8003\u4e0a\u6837\u6d41\u7a0b\u64cd\u4f5c\u3002\u5982\u679c\u6682\u65f6\u4e0d\u7528\uff0c\u5219\u6309\u7167\u4e0b\u9762\u6d41\u7a0b\u8fdb\u884c\u4fdd\u5b58\u82af\u7247\u3002 \u5c06\u4e00\u7ba1Storage Buffer(S)\u53d6\u51fa\u7f6e\u4e8e\u5ba4\u6e29\uff0c\u6eb6\u89e3\u540e\u4e0a\u4e0b\u98a0\u5012\u6df7\u5300\u3002 \u6253\u5f00\u7528\u5b8c\u7684\u82af\u7247Priming Port\uff0c1000uL\u79fb\u6db2\u5668\u8bbe\u7f6e\u6210200uL\u91cf\u7a0b\uff0c\u7136\u540e\u67aa\u5934Priming Port\u9876\u4f4f\u5b54\uff0c\u65cb\u8f6c\u79fb\u6db2\u5668\u91cf\u7a0b20uL\uff0c\u4ee5\u786e\u5b9a\u6392\u9664\u6c14\u6ce1\u3002 \u5438\u53d6500uL Storage Buffer(S)\uff0c\u4ecePriming Port\u4e2d\u7f13\u6162\u52a0\u5165\u3002\u5173\u95edPriming Port\u3002 \u5173\u95edPriming Port\u548cSpotON Port\uff0c\u75281000uL\u79fb\u6db2\u5668\u4eceWaste Port1\u4e2d\u5438\u53d6\u6240\u6709\u6db2\u4f53\u3002 \u82af\u7247\u7f6e\u4e8e\u51b0\u7bb1\u51b7\u85cf\u3002 \u4e0b\u4e00\u6b21\u4f7f\u7528\u7684\u82af\u7247\uff0c\u6700\u597d\u8bbe\u7f6e\u6210\u4e0d\u540c\u7684\u7535\u538b\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u7ed3\u679c\uff0c \u53c2\u89c1","title":"4.1.2 \u5b9e\u9a8c\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#42-illumina-miseq","text":"","title":"4.2 illumina Miseq \u6d4b\u5e8f\u6587\u5e93"},{"location":"protocol/artic-network-covid19/#421","text":"Nextera XT LIbrary Preparation Kit NEB Ultra II DNA Library Prep Kit for Illumina AMPure XP Beads Miseq Reagent v2 PE150 \u5bf9\u4e8e\u6d53\u5ea6\u8f83\u9ad8\u7684\u6837\u672c\uff0cillumina\u6269\u589e\u5b50\u6d4b\u5e8f\u63a8\u8350\u4f7f\u7528PCR-Free\u7684\u65b9\u5f0f\u8fdb\u884c\u3002\u8fd9\u91cc\u7528NEB Ultra II DNA Library Prep Kit for Illumina(E7645)\u6587\u5e93\u6784\u5efa\u8bd5\u5242\u76d2\u8fdb\u884c\u3002\u5982\u679c\u4f7f\u7528Nextera XT\u4e4b\u7c7b\u7684\u9176\u7247\u6bb5\u5316\u8bd5\u5242\u76d2\uff0c\u540e\u671f\u6570\u636e\u5206\u6790\u65f6\u8981\u8003\u8651\u5f15\u7269\u6269\u589e\u4f4d\u70b9\u5bf9\u4e8econsensus\u5e8f\u5217\u7684\u5f71\u54cd\u3002","title":"4.2.1 \u8bd5\u5242\u4e0e\u8017\u6750"},{"location":"protocol/artic-network-covid19/#422","text":"\u5c06 pool1 \u548c pool2 \u7684 PCR \u4ea7\u7269\u6df7\u5408\u540e\uff0c\u4f7f\u7528Qubit\u8fdb\u884c\u5b9a\u91cf\u3002NEB\u6587\u5e93\u6784\u5efa\u8bd5\u5242\u76d2\u9002\u5408500pg~1ug\u7684\u8d77\u59cbinput DNA\u91cf\u3002 \u53d6\u65b0\u7684 PCR \u7ba1\uff0c\u6309\u7167\u4e0b\u8868\u914d\u6db2\u3002\u7528200uL\u67aa\u768450uL\u91cf\u7a0b\u5439\u543810\u6b21\u6df7\u5300\u3002\u79bb\u5fc3\u7529\u5e72\u3002 \u8bd5\u5242 \u91cf NEBNext Ultra II End Prep Enzyme Mix 3 \u00b5l NEBNext Ultra II End Prep Reaction Buffer 7 \u00b5l DNA 50 \u00b5l \u603b\u91cf 60 \u00b5l \u653e\u7f6e\u4e8ePCR\u4eea\u5668\u4e0a\uff0c\u70ed\u76d6\u6e29\u5ea6\u5927\u4e8e\u7b49\u4e8e75\u00b0C \uff0c\u8fd0\u884c\u4ee5\u4e0b\u7a0b\u5e8f\uff1a20\u00b0C 30min\uff0c65\u00b0C 30min\uff0c4\u00b0C hold\u3002 \u6309\u7167\u4e0b\u8868\u7a00\u91ca adaptor\u3002\u5efa\u8bae\u521d\u59cbDNA\u91cf\u5927\u4e8e100ng\uff0c\u5982200ng\u5de6\u53f3\u3002 Input DNA Adaptor Adaptor \u5de5\u4f5c\u6d53\u5ea6 1ug-101ng \u4e0d\u7a00\u91ca 15uM 100ng-5ng 1:10\u7a00\u91ca 1.5 uM <5ng 1:25\u7a00\u91ca 0.6uM \u6839\u636e\u4e0b\u8868\u914d\u7f6eAdaptor\u8fde\u63a5\u4f53\u7cfb\u3002NEBNext Ultra II Ligation Master Mix\u52a0\u5165\u524d\u8981\u98a0\u5012\u6df7\u5300\u3002 \u8bd5\u5242 \u91cf \u524d\u4e00\u6b65\u53cd\u5e94\u6db2 60 \u00b5l NEBNext Ultra II Ligation Master Mix 30 \u00b5l NEBNext LIgation Enhancer 1 \u00b5l NEBNext Adaptor for illumina 2.5 \u00b5l \u603b\u91cf 93.5 \u00b5l \u53ef\u4ee5\u91c7\u7528\u7684Adaptor\u4ea7\u54c1\uff1a\u5355\u7aef\uff08E7350\uff09\uff0c\u53cc\u7aef\uff08E7335,E7500,E7710,E7730,E7600,E7535,E6609\uff09 \u7528200uL\u67aa\u768480uL\u91cf\u7a0b\u5439\u620f10\u6b21\u6df7\u5300\u3002\u79bb\u5fc3\u7529\u5e72\u3002 \u7f6e\u4e8e\u91d1\u5c5e\u6d74\u6216PCR\u4eea\u4e0a\uff08\u4e0d\u5f00\u70ed\u76d6\uff0920\u00b0C 15min\u3002 \u5411\u53cd\u5e94\u4f53\u7cfb\u4e2d\u52a0\u51653uL USER Enzyme\uff08\u8fd9\u4e2a\u8bd5\u5242\u5305\u542b\u5728\u63a5\u5934\u8bd5\u5242\u76d2\u4e2d\uff09\u3002\u5728PCR\u4eea\u5668\u4e0a37\u00b0C 15min\uff08\u70ed\u76d6\u5927\u4e8e\u7b49\u4e8e47\u00b0C\uff09\u3002 \u5c06\u6db2\u4f53\u8f6c\u79fb\u5230\u6df1\u5b54\u677f\u5185\uff0c\u5f53input DNA\u5927\u4e8e50ng\u65f6\uff0c\u8fdb\u884c\u4e0b\u9762\u7684DNA\u7eaf\u5316\u56de\u6536\u3002\u5bf9\u4e8e\u5c0f\u4e8e50ng DNA\u7684\u6837\u672c\uff0c\u53ea\u9700\u8981\u7528\u78c1\u682a\u7eaf\u53161\u6b21\uff0c\u752887uL\u91cf\u3002 \u52a0\u516518uL AMPure Beads\u5230\u53cd\u5e94\u6db2\u4e2d\uff0c\u5439\u543810\u6b21\u6df7\u5300\uff0c\u6ce8\u610f\u67aa\u5934\u4e2d\u7684\u6db2\u4f53\u8981\u5168\u90e8\u6253\u51fa\u3002\u5ba4\u6e29\u5b75\u80b25min\u3002 \u5c06\u6df1\u5b54\u677f\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c\u9759\u7f6e5min\u5f85\u6db2\u4f53\u6f84\u6e05\u3002\u5438\u51fa\u6db2\u4f53\u5230\u65b0\u7684\u5b54\u4e2d\u3002 \u5c06\u6df1\u5b54\u677f\u4ece\u78c1\u529b\u67b6\u4e0a\u53d6\u4e0b\uff0c\u52a0\u516510uL AMPure Beads\uff0c\u5439\u543810\u6b21\u6df7\u5300\u540e\uff0c\u5ba4\u6e29\u5b75\u80b25min\u3002 \u5c06\u6df1\u5b54\u677f\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c\u9759\u7f6e5min\u5f85\u6db2\u4f53\u6f84\u6e05\u3002\u5c06\u6db2\u4f53\u5438\u5f03\u3002 \u52a0\u516580%\u65b0\u9c9c\u914d\u7f6e\u7684\u4e59\u9187200uL\uff0c\u5ba4\u6e29\u653e\u7f6e30s\u540e\u5438\u5f03\u3002\u91cd\u590d\u6d171\u6b21\u3002 \u5f00\u76d6\u98ce\u5e72\u78c1\u73e05min\u3002\u5982\u679c\u98ce\u5e72\u65f6\u95f4\u8fc7\u957f\uff0c\u4f1a\u5bfc\u81f4DNA\u56de\u6536\u7387\u4e0b\u964d\u3002 \u4ece\u78c1\u529b\u67b6\u4e0a\u53d6\u4e0b\u6df1\u5b54\u677f\uff0c17uL 10mM Tris-HCl\u62160.1xTE\u6d17\u8131\u3002 \u9707\u8361\u4eea\u4e0a1800rpm\u9707\u836110min\uff0c\u5ba4\u6e29\u653e\u7f6e2min\u3002 \u5c06\u6df1\u5b54\u677f\u7f6e\u4e8e\u78c1\u529b\u67b6\u4e0a\uff0c5min\u540e\u5f85\u6db2\u4f53\u6f84\u6e05\uff0c\u53d61uL\u8fdb\u884cQubit\u5b9a\u91cf\u3002 \u5438\u53d615uL\u6db2\u4f53\u5230\u65b0\u7684PCR\u677f\u3002","title":"4.2.2 \u5b9e\u9a8c\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#5","text":"","title":"5. \u6570\u636e\u5206\u6790"},{"location":"protocol/artic-network-covid19/#51-nanopore","text":"","title":"5.1 Nanopore \u6d4b\u5e8f\u6570\u636e"},{"location":"protocol/artic-network-covid19/#511","text":"\u4f7f\u7528 conda \u6784\u5efa\u72ec\u7acb\u7684\u8fd0\u884c\u73af\u5883\u3002 $ git clone --recursive https://github.com/artic-network/artic-ncov2019.git $ conda env create -n ncov -f artic-ncov2019/environment.yml $ conda activate ncov ( ncov ) $ conda list \u5982\u679c\u4f7f\u7528docker images\u6765\u8fd0\u884cguppy $ docker pull genomicpariscentre/guppy # \u5982\u679c\u670d\u52a1\u5668\u6709GPU\u652f\u6301\uff0c\u53ef\u4ee5\u9009\u62e9guppy-gpu $ docker pull genomicpariscentre/guppy-gpu # \u4ea4\u4e92\u6a21\u5f0f\u8fd0\u884ccontainer $ docker run --name my_exp -it -v local_dir_of_fast5:/media/ genomicpariscentre/guppy /bin/bash # \u5bf9fast5\u6570\u636e\u8fdb\u884cbasecalling $ guppy_basecaller -i $HOME /data/fast5 -s output_folder \\ > -c dna_r9.4.1_450bps_hac.cfg --barcode_kits EXP-NBD104 \\ > --num_callers 40 --trim_barcodes","title":"5.1.1 \u8f6f\u4ef6\u5b89\u88c5"},{"location":"protocol/artic-network-covid19/#512","text":"\u4e0eillumina\u539f\u59cb\u6570\u636e\u662f\u56fe\u50cf\u6587\u4ef6\u4e0d\u540c\uff0cNanopore\u7684\u539f\u59cb\u6570\u636e\u4ee5HDF5\u683c\u5f0f\u4fdd\u5b58\u3002HDF\u662f\"Hierarchical Data Format\"\u9996\u5b57\u6bcd\u7f29\u5199\uff0cHDF5\u662f\u4e00\u79cd\u7eaf\u6587\u672c\uff0c\u7c7b\u4f3cjson\u7684\u6570\u636e\u683c\u5f0f\u8bb0\u5f55\u7535\u4fe1\u53f7\u3002\u67e5\u770bHDF5\u539f\u59cb\u6570\u636e\u53ef\u4ee5\u7528 hdf5_tools \u5de5\u5177\u3002\u6570\u636e\u6587\u4ef6\u540e\u7f00\u4e00\u822c\u7528.fast5\u8868\u793a\u3002 Nanopore \u6d4b\u5e8f\u6570\u636e\u671f\u521d\u7531\u4e8e\u5176\u9519\u8bef\u7387\u9ad8\u800c\u201c\u95fb\u540d\u201d\uff0c\u7279\u522b\u662f\u5bf9\u4e8c\u805a\u4f53\u7684\u533a\u5206\u3002\u7535\u4fe1\u53f7\u6570\u636e\u968f\u7740\u5904\u7406\u8f6f\u4ef6\u548c\u7b97\u6cd5\u7684\u4e0d\u65ad\u6539\u8fdb\uff0c\u51c6\u786e\u7387\u5f97\u5230\u4e0d\u65ad\u7684\u63d0\u5347\u3002HDF5\u6570\u636e\u8fdb\u884cbasecalling\u7684\u8f6f\u4ef6\u76ee\u524d\u5f88\u591a\uff0c\u91c7\u7528\u7684\u7b97\u6cd5\u4e5f\u5404\u5f02\u3002\u5b98\u65b9\u7684\u5982albacore\uff0cguppy\u7b49\uff0c\u7b2c\u4e09\u65b9\u5de5\u5177\u4e5f\u6709\u5f88\u591a\u3002 MinKnow\u8f6f\u4ef6 \u5c06fast5\u6570\u636e\u590d\u5236\u5230\u670d\u52a1\u5668\uff0c\u4f7f\u7528guppy\u8fdb\u884c\u5206\u6790 guppy\u662f\u4e00\u4e2a\u662f\u7528 \u6211\u4eec\u7684\u5b9e\u9a8c\u5ba4\u7528\u4e00\u53f0Workstation\u6302\u8f7dMinION\u6d4b\u5e8f\u4eea\uff0c\u8fdb\u884c\u6d4b\u5e8f\u5de5\u4f5c\u3002\u57fa\u672c\u914d\u7f6e\u662fi7-7700k+16G+1TSSD/1T HD\u3002\u4e00\u822c\u53ef\u4ee5\u505a\u523070%\u4ee5\u4e0a\u7684MinKnow\u5b9e\u65f6basecalling\u3002\u4f46\u662f\u5982\u679c\u8981\u4f7f\u7528guppy\u8fdb\u884c\u66f4\u51c6\u786e\u7684basecalling\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u5c06\u6570\u636e\u540c\u6b65\u5230\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u3002 # \u5728\u670d\u52a1\u5668\u4e0a rsync \u540c\u6b65\u6570\u636e\u5230\u672c\u5730 ( ncov ) $ rsync -avz username@minknow_ip:/var/lib/minknown/path/to/fast5 . # \u6216\u8005\u5728\u5de5\u4f5c\u7ad9\u4e0a\u540c\u6b65\u6570\u636e\u5230\u670d\u52a1\u5668\u7aef $ rsync -avz /var/lib/minknown/path/to/fast5 username@server_ip:~/data/fast5 \u8fd9\u91cc\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef fast5 \u6570\u636e\u76ee\u5f55\u5b58\u653e\u4e8e\uff1a$HOME/data/fast5\uff1b\u91c7\u7528\u7684\u662fR9.4\u7684\u6d4b\u5e8f\u82af\u7247\uff0c\u5404\u4e2a\u4e0d\u540c\u6d4b\u5e8f\u82af\u7247basecalling\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u53c2\u89c1 \u8fd9\u91cc ( ncov ) $ guppy_basecaller -c dna_r9.4.1_450bps_fast.cfg \\ > -i $HOME /data/fast5 -s run_name -x auto -r \u6211\u4eec\u7684MinION\u6d4b\u5e8f\u4eea\u8fde\u63a5\u7684\u662f\u4e00\u53f0Ubuntu 16.04\u7684Workstation\uff0c\u6d4b\u5e8f\u4eea\u6700\u5927\u6d4b\u5e8f\u72b6\u6001\u65f6\uff0c\u8dd1\u9ed8\u8ba4\u7684basecalling\u57fa\u672c\u4e0a\u53ef\u4ee5\u5b9e\u65f6\u8fbe\u523080%\u7684\u72b6\u6001\u3002\u5982\u679c\u9700\u8981\u7528guppy\u505a\u66f4\u51c6\u786e\u7684basecalling\uff0c\u6211\u4eec\u4f1a\u7528inotify-tools\u4e4b\u7c7b\u7684\u5de5\u5177\u52a0\u4e0a rsync \u5b9e\u65f6\u540c\u6b65\u5230\u670d\u52a1\u5668\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u8fdb\u884c\u3002 artic \u7684 demultiplex \u547d\u4ee4\u662f $ porechop --verbosity 2 --untrimmed -i \"re_all.fastq\" -b ./tmp5vx2iwn0 --native_barcodes --discard_middle --require_two_barcodes --barcode_threshold 80 --threads 8 --check_reads 10000 --barcode_diff 5 > re_all.fastq.demultiplexreport.txt","title":"5.1.2 \u5206\u6790\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#52-illumina","text":"","title":"5.2 Illumina \u6d4b\u5e8f\u6570\u636e"},{"location":"protocol/artic-network-covid19/#521","text":"\u66b4\u53d1\u75ab\u60c5\u4e2d\u75c5\u6bd2\u6bd2\u682a\u53d1\u751f\u7ed3\u6784\u53d8\u5f02\u7684\u53ef\u80fd\u6027\u8f83\u5c0f\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6bd4\u5bf9\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u65b9\u6cd5\u83b7\u5f97\u6bd2\u682a\u57fa\u56e0\u7ec4\u5e8f\u5217\u3002\u5982\u679c\u662f\u7814\u7a76\u65b0\u53d1\u7684\u8fdc\u6e90\u75c5\u6bd2\u6216\u957f\u65f6\u95f4\u6f14\u5316\u7684\u75c5\u6bd2\u5e8f\u5217\uff0c\u53ef\u80fd\u4e0e\u53c2\u8003\u57fa\u56e0\u7ec4\u5dee\u5f02\u8f83\u5927\u65f6\uff0c\u5e94\u7ed3\u5408\u7ec4\u88c5\u4e0e\u6bd4\u5bf9\u7684\u65b9\u6cd5\u83b7\u5f97\u57fa\u56e0\u7ec4\u5e8f\u5217\u3002 $ conda create -n mapping $ conda activate mapping ( mapping ) $ conda install bwa samtools igv","title":"5.2.1 \u8f6f\u4ef6\u5b89\u88c5"},{"location":"protocol/artic-network-covid19/#522","text":"\u4f7f\u7528Miseq\u81ea\u5e26\u7684SAV\u8f6f\u4ef6\u8fdb\u884cbasecalling\uff0c\u751f\u6210fastq\u6570\u636e\u590d\u5236\u5230\u670d\u52a1\u5668\u7aef \u53ef\u4ee5\u91c7\u7528bwa+samtools\u8fdb\u884c\u53c2\u8003\u5e8f\u5217\u6bd4\u5bf9\u83b7\u5f97\u4e00\u81f4\u6027\u5e8f\u5217\uff0c\u6216\u8005\u91c7\u7528bwa\u7b49\u5de5\u5177\u6bd4\u5bf9\u83b7\u5f97\u65b0\u51a0\u75c5\u6bd2\u5e8f\u5217\u540e\u5728\u8fdb\u884cde novo\u7ec4\u88c5\u3002 # \u6700\u57fa\u672c\u7684\u6bd4\u5bf9\u5206\u6790\u6d41\u7a0b ( mapping ) $ bwa index MN909847.3.fasta ( mapping ) $ bwa mem -k 45 -R \"@RG\\tID:HZ-1_1\\tSM:HZ-1\" MN909847.3.fasta \\ > HZ-1_S1...R1.fastq.gz HZ-1_S1...R2.fastq.gz | samtools view -bS > HZ-1.bam ( mapping ) $ samtools sort -O bam -o HZ-1.sorted.bam -@4 HZ-1.bam ( mapping ) $ samtools index HZ-1.sorted.bam ( mapping ) $ igv HZ-1.sorted.bam # \u4ee5bwa\u4e3a\u4f8b\u8fdb\u884creads\u8fc7\u6ee4\u540espades\u7ec4\u88c5 $ bwa index MN908947.3.fasta $ bwa mem -k 47 -R \"@RG\\tID:HZ-1\\tSM:HZ-1\" MN908947.3.fasta \\ > HZ-1_S1_L001_R1_001.fastq.gz HZ-1_S1_L001_R2_001.fastq.gz -t 40 | \\ > samtools view -bS - | samtools sorted -@40 -O bam HZ-1.sorted.bam $ samtools index HZ-1.sorted.bam $ samtools faidx MN908947.3.fasta $ samtools mpileup -uf MN908047.3.fasta HZ-1.sorted.bam | \\ > bcftools call --ploidy 1 -mv -Oz > HZ-1.vcf.gz $ tabix HZ-1.vcf.gz $ cat MN908947.3.fasta | bcftools consensus HZ-1.vcf.gz > Hz-1_consensus.fasta # de novo \u7ec4\u88c5 $ bwa index MN908947.3.fasta $ bwa mem -k 45 -R \"@RG\\tID:HZ-1\\tSM:HZ-1\" MN908947.3.fasta \\ > HZ-1_S1_L001_R1_001.fastq.gz HZ-1_S1_L001_R2_001.fastq.gz -t 4 | \\ > samtools view -bS > HZ-1.bam # \u63d0\u53d6\u53cc\u7aef\u90fd\u6bd4\u5bf9\u5230\u53c2\u8003\u5e8f\u5217\u7684reads $ samtools view -bF 12 HZ-1.bam > HZ-1.mapped.bam # bam\u683c\u5f0f\u8f6c\u5316\u6210fastq\u683c\u5f0f $ bamToFastq -i HZ-1.mapped.bam -fq HZ-1.mapped_R1.fastq -fq2 HZ-1.mapped_R2.fastq # de novo assembly $ shovill --trim --outdir test --R1 HZ-1.mapped_R1.fastq -fq2 HZ-1.mapped_R2.fastq --ram 16 --cpus 40 $ bwa mem -t 40 -x ont2d MN908947.3.fasta test/contigs.fa | samtools view -bS - | samtools sort -o test.sorted.bam - $ samtools index test.sorted.bam","title":"5.2.2 \u5206\u6790\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#_2","text":"\u9488\u5bf9MinKnow\u751f\u6210\u7684\u6570\u636e # \u751f\u6210\u6837\u672c\u7684 fastq $ for i in *.fastq ; do zcat $i >> s1.fq ; done $ gzip s1.fq # \u53bb\u9664\u53ef\u80fd\u7684\u63a5\u5934\u5e8f\u5217 $ porechop -t 4 -i s1.fq.gz --format fastq.gz -o s1.clean.fq.gz # \u53bb\u9664\u4f4e\u8d28\u91cf\u5e8f\u5217 $ gunzip -c s1.clean.fq.gz | NanoFilt -q 10 -l 400 --maxlength 700 | gzip > s1.clean.hq.fq.gz # \u83b7\u5f97\u6bd4\u5bf9\u7ed3\u679c $ bwa index MN908947.3.fasta $ bwa mem -t 4 -x ont2d MN908947.3.fasta s1.clean.hq.fq.gz | \\ > samtools view -bS - | \\ > samtools sort -o s1.clean.hq.sorted.bam - $ samtools index s1.clean.hq.sorted.bam $ samtools faidx MN908947.3.fasta # vcf calling $ bcftools mpileup -f --threads 4 MN908047.3.fasta s1.clean.hq.sorted.bam | \\ > bcftools call --ploidy 1 -mv -Oz > s1.vcf.gz $ tabix s1.vcf.gz # \u83b7\u5f97 consensus \u5e8f\u5217 $ bcftools consensus -f MN908947.3.fasta -H 1 s1.vcf.gz -o s1_consensus.fasta # \u6216\u8005\u4f7f\u7528minimap\u5de5\u5177\u8fdb\u884c\u6bd4\u5bf9","title":"\u81ea\u5b9a\u4e49\u5206\u6790\u6d41\u7a0b"},{"location":"protocol/artic-network-covid19/#_3","text":"https://www.protocols.io/view/ncov-2019-sequencing-protocol-bbmuik6w https://artic.network/ncov-2019/ncov2019-bioinformatics-sop.html https://nanoporetech.com/resource-centre/nanopore-sequencing-sars-cov-2-genome-introduction-protocol","title":"\u53c2\u8003\u8d44\u6599"},{"location":"tutorial/Format/","text":"","title":"Index"},{"location":"tutorial/Format/01_fasta/","text":"FASTA \u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5e8f\u5217\u7684\u6700\u57fa\u672c\u683c\u5f0f\uff0c\u53ea\u9700\u8981\u4e00\u4e2a > \u7b26\u53f7\u8868\u793a\u5e8f\u5217\u5f00\u59cb\uff0c\u540e\u8ddf\u5e8f\u5217\u540d\u79f0\u3002\u518d\u6362\u4e00\u884c\u5185\u5bb9\u4e3aDNA\u6216\u86cb\u767d\u8d28\u5e8f\u5217\u3002 >AB000263 | acc=AB000263|descr=Homo sapiens mRNA for prepro cortistatin like peptide, complete cds.| len=368 ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCC CCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGC CTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGG AAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCC CTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAG TTTAATTACAGACCTGAA \u4e00\u4e2afasta\u683c\u5f0f\u7684\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5305\u542b\u591a\u6761\u5e8f\u5217\uff1a >seq1 ATCCGGACCGGA >seq2 CCGGATTGAGGA >seq3 ACCGGAGATTTG Reference \u00b6 http://www.cnblogs.com/ace9/archive/2011/04/29/2032716.html","title":"01. fasta"},{"location":"tutorial/Format/01_fasta/#fasta","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5e8f\u5217\u7684\u6700\u57fa\u672c\u683c\u5f0f\uff0c\u53ea\u9700\u8981\u4e00\u4e2a > \u7b26\u53f7\u8868\u793a\u5e8f\u5217\u5f00\u59cb\uff0c\u540e\u8ddf\u5e8f\u5217\u540d\u79f0\u3002\u518d\u6362\u4e00\u884c\u5185\u5bb9\u4e3aDNA\u6216\u86cb\u767d\u8d28\u5e8f\u5217\u3002 >AB000263 | acc=AB000263|descr=Homo sapiens mRNA for prepro cortistatin like peptide, complete cds.| len=368 ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCC CCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGC CTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGG AAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCC CTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAG TTTAATTACAGACCTGAA \u4e00\u4e2afasta\u683c\u5f0f\u7684\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5305\u542b\u591a\u6761\u5e8f\u5217\uff1a >seq1 ATCCGGACCGGA >seq2 CCGGATTGAGGA >seq3 ACCGGAGATTTG","title":"FASTA \u683c\u5f0f"},{"location":"tutorial/Format/01_fasta/#reference","text":"http://www.cnblogs.com/ace9/archive/2011/04/29/2032716.html","title":"Reference"},{"location":"tutorial/Format/02_embl/","text":"EMBL \u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} A sequence file in EMBL format can contain several sequences. One sequence entry starts with an identifier line (\"ID\"), followed by further annotation lines. The start of the sequence is marked by a line starting with \"SQ\" and the end of the sequence is marked by two slashes (\"//\"). An example sequence in EMBL format is: EMBL\u4ee5tab\u5206\u5272\u6807\u9898\u548c\u5185\u5bb9\uff0c\u5e38\u89c1\u7684\u5305\u62ecID\uff0cAC\uff0cSQ\u7b49\u3002\u4e00\u822c\u7684\u5e8f\u5217\u89c1\u4e0b\uff1a ID AB000263 standard; RNA; PRI; 368 BP. XX AC AB000263; XX DE Homo sapiens mRNA for prepro cortistatin like peptide, complete cds. XX SQ Sequence 368 BP; acaagatgcc attgtccccc ggcctcctgc tgctgctgct ctccggggcc acggccaccg 60 ctgccctgcc cctggagggt ggccccaccg gccgagacag cgagcatatg caggaagcgg 120 caggaataag gaaaagcagc ctcctgactt tcctcgcttg gtggtttgag tggacctccc 180 aggccagtgc cgggcccctc ataggagagg aagctcggga ggtggccagg cggcaggaag 240 gcgcaccccc ccagcaatcc gcgcgccggg acagaatgcc ctgcaggaac ttcttctgga 300 agaccttctc ctcctgcaaa taaaacctca cccatgaatg ctcacgcaag tttaattaca 360 gacctgaa 368 // \u4e00\u4e2aEMBL\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5305\u542b\u591a\u6761\u5e8f\u5217\u3002","title":"02. embl"},{"location":"tutorial/Format/02_embl/#embl","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} A sequence file in EMBL format can contain several sequences. One sequence entry starts with an identifier line (\"ID\"), followed by further annotation lines. The start of the sequence is marked by a line starting with \"SQ\" and the end of the sequence is marked by two slashes (\"//\"). An example sequence in EMBL format is: EMBL\u4ee5tab\u5206\u5272\u6807\u9898\u548c\u5185\u5bb9\uff0c\u5e38\u89c1\u7684\u5305\u62ecID\uff0cAC\uff0cSQ\u7b49\u3002\u4e00\u822c\u7684\u5e8f\u5217\u89c1\u4e0b\uff1a ID AB000263 standard; RNA; PRI; 368 BP. XX AC AB000263; XX DE Homo sapiens mRNA for prepro cortistatin like peptide, complete cds. XX SQ Sequence 368 BP; acaagatgcc attgtccccc ggcctcctgc tgctgctgct ctccggggcc acggccaccg 60 ctgccctgcc cctggagggt ggccccaccg gccgagacag cgagcatatg caggaagcgg 120 caggaataag gaaaagcagc ctcctgactt tcctcgcttg gtggtttgag tggacctccc 180 aggccagtgc cgggcccctc ataggagagg aagctcggga ggtggccagg cggcaggaag 240 gcgcaccccc ccagcaatcc gcgcgccggg acagaatgcc ctgcaggaac ttcttctgga 300 agaccttctc ctcctgcaaa taaaacctca cccatgaatg ctcacgcaag tttaattaca 360 gacctgaa 368 // \u4e00\u4e2aEMBL\u6587\u4ef6\u4e5f\u53ef\u4ee5\u5305\u542b\u591a\u6761\u5e8f\u5217\u3002","title":"EMBL \u683c\u5f0f"},{"location":"tutorial/Format/03_fastq/","text":"FastQ \u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} fastq \u683c\u5f0f\u7684\u6570\u636e\u7531\u82e5\u5e72\u6761reads\u7ec4\u6210\uff0c\u6bcf\u6761read\u75314\u884c\u8868\u793a\u4fe1\u606f\u4e3a \u7b2c\u4e00\u884c\u5185\u5bb9\u5305\u62ec\u6d4b\u5e8f\u4eea\u4fe1\u606f\uff0c\u5b9e\u9a8c\u4fe1\u606f\u548c\u5e8f\u5217\u4fe1\u606f\u7b49 @<instrument>:<run number>:<flowcell ID>:<lane>:<tile>:<x-pos>:<y-pos> <read>:<is filtered>:<control number>:<index sequence> \u7b2c\u4e8c\u884c\u5185\u5bb9\u662f\u5e8f\u5217 \u7b2c\u4e09\u884c\u4e3a\u6807\u8bc6\u7b26\u53f7\uff0c\u6ca1\u6709\u7279\u6b8a\u542b\u4e49 \u7b2c\u56db\u884c\u4e3a\u5bf9\u5e94\u7684\u5e8f\u5217\u8d28\u91cf","title":"FastQ \u683c\u5f0f"},{"location":"tutorial/Format/03_fastq/#fastq","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} fastq \u683c\u5f0f\u7684\u6570\u636e\u7531\u82e5\u5e72\u6761reads\u7ec4\u6210\uff0c\u6bcf\u6761read\u75314\u884c\u8868\u793a\u4fe1\u606f\u4e3a \u7b2c\u4e00\u884c\u5185\u5bb9\u5305\u62ec\u6d4b\u5e8f\u4eea\u4fe1\u606f\uff0c\u5b9e\u9a8c\u4fe1\u606f\u548c\u5e8f\u5217\u4fe1\u606f\u7b49 @<instrument>:<run number>:<flowcell ID>:<lane>:<tile>:<x-pos>:<y-pos> <read>:<is filtered>:<control number>:<index sequence> \u7b2c\u4e8c\u884c\u5185\u5bb9\u662f\u5e8f\u5217 \u7b2c\u4e09\u884c\u4e3a\u6807\u8bc6\u7b26\u53f7\uff0c\u6ca1\u6709\u7279\u6b8a\u542b\u4e49 \u7b2c\u56db\u884c\u4e3a\u5bf9\u5e94\u7684\u5e8f\u5217\u8d28\u91cf","title":"FastQ \u683c\u5f0f"},{"location":"tutorial/Format/04_gcg/","text":"GCG \u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} GCG \u683c\u5f0f\u6570\u636e\u4e0eEMBL\u7c7b\u4f3c\uff0c\u4f46\u662f\u6807\u8bb0\u5e8f\u5217\u8d77\u59cb\u7684\u7b2c\u4e00\u884c\u4ee5'..'\u7b26\u53f7\u7ed3\u5c3e\uff0c\u5185\u5bb9\u5305\u62ec\u957f\u5ea6\uff0c\u6821\u9a8c\u503c\u4fe1\u606f\u3002\u6bcf\u4e2a GCG \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6\u53ea\u80fd\u5305\u542b\u4e00\u6761\u5e8f\u5217\u3002 ID AB000263 standard; RNA; PRI; 368 BP. XX AC AB000263; XX DE Homo sapiens mRNA for prepro cortistatin like peptide, complete cds. XX SQ Sequence 368 BP; AB000263 Length: 368 Check: 4514 .. 1 acaagatgcc attgtccccc ggcctcctgc tgctgctgct ctccggggcc acggccaccg 61 ctgccctgcc cctggagggt ggccccaccg gccgagacag cgagcatatg caggaagcgg 121 caggaataag gaaaagcagc ctcctgactt tcctcgcttg gtggtttgag tggacctccc 181 aggccagtgc cgggcccctc ataggagagg aagctcggga ggtggccagg cggcaggaag 241 gcgcaccccc ccagcaatcc gcgcgccggg acagaatgcc ctgcaggaac ttcttctgga 301 agaccttctc ctcctgcaaa taaaacctca cccatgaatg ctcacgcaag tttaattaca 361 gacctgaa","title":"04. gcg"},{"location":"tutorial/Format/04_gcg/#gcg","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} GCG \u683c\u5f0f\u6570\u636e\u4e0eEMBL\u7c7b\u4f3c\uff0c\u4f46\u662f\u6807\u8bb0\u5e8f\u5217\u8d77\u59cb\u7684\u7b2c\u4e00\u884c\u4ee5'..'\u7b26\u53f7\u7ed3\u5c3e\uff0c\u5185\u5bb9\u5305\u62ec\u957f\u5ea6\uff0c\u6821\u9a8c\u503c\u4fe1\u606f\u3002\u6bcf\u4e2a GCG \u683c\u5f0f\u7684\u6570\u636e\u6587\u4ef6\u53ea\u80fd\u5305\u542b\u4e00\u6761\u5e8f\u5217\u3002 ID AB000263 standard; RNA; PRI; 368 BP. XX AC AB000263; XX DE Homo sapiens mRNA for prepro cortistatin like peptide, complete cds. XX SQ Sequence 368 BP; AB000263 Length: 368 Check: 4514 .. 1 acaagatgcc attgtccccc ggcctcctgc tgctgctgct ctccggggcc acggccaccg 61 ctgccctgcc cctggagggt ggccccaccg gccgagacag cgagcatatg caggaagcgg 121 caggaataag gaaaagcagc ctcctgactt tcctcgcttg gtggtttgag tggacctccc 181 aggccagtgc cgggcccctc ataggagagg aagctcggga ggtggccagg cggcaggaag 241 gcgcaccccc ccagcaatcc gcgcgccggg acagaatgcc ctgcaggaac ttcttctgga 301 agaccttctc ctcctgcaaa taaaacctca cccatgaatg ctcacgcaag tttaattaca 361 gacctgaa","title":"GCG \u683c\u5f0f"},{"location":"tutorial/Format/05_sam/","text":"SAM \u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"05. sam"},{"location":"tutorial/Format/05_sam/#sam","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"SAM \u683c\u5f0f"},{"location":"tutorial/Format/06_bam/","text":"BAM \u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} BAM\u662f\u5e8f\u5217\u6bd4\u5bf9/\u56fe\u8c31\uff08SAM\uff09\u683c\u5f0f\u7684\u538b\u7f29\u4e8c\u8fdb\u5236\u7248\u672c\uff0c\u662f\u6838\u82f7\u9178\u5e8f\u5217\u6bd4\u5bf9\u7684\u7d27\u51d1\u4e14\u53ef\u7d22\u5f15\u7684\u8868\u793a\u3002\u8bb8\u591a\u65b0\u4e00\u4ee3\u6d4b\u5e8f\u548c\u5206\u6790\u5de5\u5177\u4e0eSAM / BAM\u914d\u5408\u4f7f\u7528\u3002 \u5bf9\u4e8e\u81ea\u5b9a\u4e49\u8f68\u9053\u663e\u793a\uff0c\u7d22\u5f15BAM\u4f18\u4e8ePSL\u548c\u5176\u4ed6\u4eba\u7c7b\u53ef\u8bfb\u5bf9\u9f50\u683c\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u53ea\u6709\u663e\u793a\u7279\u5b9a\u533a\u57df\u6240\u9700\u7684\u6587\u4ef6\u90e8\u5206\u624d\u4f1a\u4f20\u8f93\u5230UCSC\u3002 \u8fd9\u6837\u5c31\u53ef\u4ee5\u663e\u793a\u6587\u4ef6\u4e2d\u7684\u5bf9\u9f50\u65b9\u5f0f\uff0c\u8fd9\u4e9b\u6587\u4ef6\u975e\u5e38\u5927\uff0c\u4ee5\u81f3\u4e8e\u5728\u5c1d\u8bd5\u5c06\u6574\u4e2a\u6587\u4ef6\u4e0a\u4f20\u5230UCSC\u65f6\uff0c\u4e0eUCSC\u7684\u8fde\u63a5\u4f1a\u8d85\u65f6\u3002 BAM\u6587\u4ef6\u53ca\u5176\u5173\u8054\u7684\u7d22\u5f15\u6587\u4ef6\u90fd\u4fdd\u7559\u5728Web\u53ef\u8bbf\u95ee\u7684\u670d\u52a1\u5668\uff08http\u6216ftp\uff09\u4e0a\uff0c\u800c\u4e0d\u662fUCSC\u670d\u52a1\u5668\u4e0a\u3002 UCSC\u4e34\u65f6\u7f13\u5b58\u6587\u4ef6\u7684\u8bbf\u95ee\u90e8\u5206\u4ee5\u52a0\u901f\u4ea4\u4e92\u5f0f\u663e\u793a\u3002","title":"06. bam"},{"location":"tutorial/Format/06_bam/#bam","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} BAM\u662f\u5e8f\u5217\u6bd4\u5bf9/\u56fe\u8c31\uff08SAM\uff09\u683c\u5f0f\u7684\u538b\u7f29\u4e8c\u8fdb\u5236\u7248\u672c\uff0c\u662f\u6838\u82f7\u9178\u5e8f\u5217\u6bd4\u5bf9\u7684\u7d27\u51d1\u4e14\u53ef\u7d22\u5f15\u7684\u8868\u793a\u3002\u8bb8\u591a\u65b0\u4e00\u4ee3\u6d4b\u5e8f\u548c\u5206\u6790\u5de5\u5177\u4e0eSAM / BAM\u914d\u5408\u4f7f\u7528\u3002 \u5bf9\u4e8e\u81ea\u5b9a\u4e49\u8f68\u9053\u663e\u793a\uff0c\u7d22\u5f15BAM\u4f18\u4e8ePSL\u548c\u5176\u4ed6\u4eba\u7c7b\u53ef\u8bfb\u5bf9\u9f50\u683c\u5f0f\u7684\u4e3b\u8981\u4f18\u70b9\u662f\u53ea\u6709\u663e\u793a\u7279\u5b9a\u533a\u57df\u6240\u9700\u7684\u6587\u4ef6\u90e8\u5206\u624d\u4f1a\u4f20\u8f93\u5230UCSC\u3002 \u8fd9\u6837\u5c31\u53ef\u4ee5\u663e\u793a\u6587\u4ef6\u4e2d\u7684\u5bf9\u9f50\u65b9\u5f0f\uff0c\u8fd9\u4e9b\u6587\u4ef6\u975e\u5e38\u5927\uff0c\u4ee5\u81f3\u4e8e\u5728\u5c1d\u8bd5\u5c06\u6574\u4e2a\u6587\u4ef6\u4e0a\u4f20\u5230UCSC\u65f6\uff0c\u4e0eUCSC\u7684\u8fde\u63a5\u4f1a\u8d85\u65f6\u3002 BAM\u6587\u4ef6\u53ca\u5176\u5173\u8054\u7684\u7d22\u5f15\u6587\u4ef6\u90fd\u4fdd\u7559\u5728Web\u53ef\u8bbf\u95ee\u7684\u670d\u52a1\u5668\uff08http\u6216ftp\uff09\u4e0a\uff0c\u800c\u4e0d\u662fUCSC\u670d\u52a1\u5668\u4e0a\u3002 UCSC\u4e34\u65f6\u7f13\u5b58\u6587\u4ef6\u7684\u8bbf\u95ee\u90e8\u5206\u4ee5\u52a0\u901f\u4ea4\u4e92\u5f0f\u663e\u793a\u3002","title":"BAM \u683c\u5f0f"},{"location":"tutorial/Format/07_bed/","text":"BED \u683c\u5f0f\u6570\u636e \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb BED \u683c\u5f0f\u6570\u636e\u662f\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5e38\u7528\u683c\u5f0f\u4e4b\u4e00\u3002\u5b83\u4e0eBAM\u4e0d\u540c\uff0c\u4e3b\u8981\u9488\u5bf9\u5982\u57fa\u56e0\u6216\u7a81\u53d8\u4f53\u6570\u636e\u7684\u5c55\u793a\u3002\u5e38\u89c1\u7684bed\u5de5\u5177\u5982bedtools\uff0c\u5728\u8bb8\u591a\u5de5\u5177\u6d41\u4e2d\u90fd\u96c6\u6210\u4e86bed\u65b9\u5f0f\u7684\u5904\u7406\u3002 BED\uff08Browser Extensible Data\uff0c\u6d4f\u89c8\u5668\u53ef\u6269\u5c55\u6570\u636e\uff09\u683c\u5f0f\u63d0\u4f9b\u4e86\u4e00\u79cd\u7075\u6d3b\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u6ce8\u91ca\u8f68\u9053\u4e2d\u663e\u793a\u7684\u6570\u636e\u884c\u3002 BED\u884c\u6709\u4e09\u4e2a\u5fc5\u586b\u5b57\u6bb5\u548c\u4e5d\u4e2a\u9644\u52a0\u53ef\u9009\u5b57\u6bb5\u3002 \u6bcf\u884c\u7684\u5b57\u6bb5\u6570\u5fc5\u987b\u5728\u6ce8\u91ca\u8f68\u9053\u4e2d\u7684\u4efb\u4f55\u4e00\u7ec4\u6570\u636e\u4e2d\u4fdd\u6301\u4e00\u81f4\u3002 \u53ef\u9009\u5b57\u6bb5\u7684\u987a\u5e8f\u662f\u7ed1\u5b9a\uff1a\u5982\u679c\u4f7f\u7528\u7f16\u53f7\u8f83\u5927\u7684\u5b57\u6bb5\uff0c\u5219\u5fc5\u987b\u59cb\u7ec8\u586b\u5145\u8f83\u4f4e\u7f16\u53f7\u7684\u5b57\u6bb5\u3002 BED\u4fe1\u606f\u4e0d\u5e94\u5982\u4e0a\u6240\u8ff0\u6df7\u5408\uff08BED3\u4e0d\u5e94\u4e0eBED4\u6df7\u5408\uff09\uff0c\u800c\u662f\u5fc5\u987b\u586b\u5199\u989d\u5916\u7684\u5217\u4fe1\u606f\u4ee5\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u4f8b\u5982\u4f7f\u7528\u201c\u3002\u201d\u3002 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b57\u6bb5\u5185\u5bb9\u662f\u7a7a\u7684\u3002 \u81ea\u5b9a\u4e49\u8f68\u9053\u4e2d\u7684BED\u5b57\u6bb5\u53ef\u4ee5\u4ee5\u7a7a\u683c\u5206\u9694\u6216\u5236\u8868\u7b26\u5206\u9694\u3002 \u53ea\u6709BED\u7c7b\u578b\u7684\u67d0\u4e9b\u53d8\u4f53\uff08\u4f8b\u5982bedDetail\uff09\u9700\u8981\u5bf9\u8be6\u7ec6\u4fe1\u606f\u5217\u8fdb\u884c\u5236\u8868\u7b26\u5206\u9694\u3002 \u8bf7\u6ce8\u610f\uff0c\u53ea\u6709\u5728\u81ea\u5b9a\u4e49\u8f68\u9053\u4e2d\uff0c\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u624d\u80fd\u5305\u542b\u6807\u9898\u884c\uff0c\u6807\u9898\u884c\u4ee5\u201c\u6d4f\u89c8\u5668\u201d\u6216\u201c\u8f68\u9053\u201d\u5f00\u5934\uff0c\u4ee5\u5e2e\u52a9\u6d4f\u89c8\u5668\u663e\u793a\u548c\u89e3\u91ca\u6807\u9898\u540e\u9762\u7684BED\u6570\u636e\u884c\u3002 \u5728\u8bf8\u5982bedToBigBed\u7684\u4e0b\u6e38\u5b9e\u7528\u7a0b\u5e8f\u4e2d\u4e0d\u5141\u8bb8\u8fd9\u6837\u7684\u6ce8\u91ca\u8f68\u9053\u6807\u9898\u884c\uff0cbedToBigBed\u5c06BED\u6587\u672c\u7684\u884c\u8f6c\u6362\u4e3a\u7d22\u5f15\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u5bf9\u4e8e\u8981\u50a8\u5b58\u6570\u636e\u91cf\u7279\u522b\u5927\u7684BED\u6587\u4ef6\uff08\u4f8b\u5982\u8d85\u8fc750M\uff09\uff0c\u5e94\u8be5\u4f7f\u7528bigBed\u683c\u5f0f\u3002 BED \u683c\u5f0f\u5982\u4e0b\uff1a chrom - \u67d3\u8272\u4f53\u7684\u540d\u79f0\uff08\u4f8b\u5982chr3\uff0cchrY\uff09\u6216scaffold\u540d\u79f0\uff08\u4f8b\u5982scaffold_1\uff09 chromStart - \u67d3\u8272\u4f53\u6216scaffold\u4e2d\u7279\u5f81\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\u67d3\u8272\u4f53\u4e2d\u7684\u7b2c\u4e00\u4e2a\u78b1\u57fa\u7f16\u53f7\u4e3a0 chromEnd - \u67d3\u8272\u4f53\u6216scaffold\u4e2d\u7279\u5f81\u7684\u7ed3\u675f\u4f4d\u7f6e name - \u5b9a\u4e49BED\u884c\u7684\u540d\u79f0\u3002 \u5f53\u8f68\u9053\u6253\u5f00\u5230\u5b8c\u5168\u663e\u793a\u6a21\u5f0f\u65f6\uff0c\u6b64\u6807\u7b7e\u663e\u793a\u5728\u57fa\u56e0\u7ec4\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2dBED\u884c\u7684\u5de6\u4fa7\uff0c\u6216\u8005\u5728\u6253\u5305\u6a21\u5f0f\u4e0b\u76f4\u63a5\u663e\u793a\u5728\u9879\u76ee\u5de6\u4fa7 score - \u5f97\u5206\u57280\u52301000\u4e4b\u95f4\u3002\u5982\u679c\u6b64\u6ce8\u91ca\u6570\u636e\u96c6\u7684\u8f68\u8ff9\u7ebfuseScore\u5c5e\u6027\u8bbe\u7f6e\u4e3a1\uff0c\u5219\u5f97\u5206\u503c\u5c06\u786e\u5b9a\u663e\u793a\u6b64\u8981\u7d20\u7684\u7070\u5ea6\u7ea7\u522b\uff08\u8f83\u9ad8\u7684\u6570\u5b57=\u8f83\u6df1\u7684\u7070\u8272\uff09 strand - \u5b9a\u4e49strand\u3002 . \u6216 + \u6216 - thickStart - \u7ed8\u5236\u7279\u5f81\u7684\u8d77\u59cb\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0c\u57fa\u56e0\u4e2d\u7684\u8d77\u59cb\u5bc6\u7801\u5b50\uff09\u3002\u5f53\u6ca1\u6709\u7279\u5f81\u8d77\u59cb\u4f4d\u7f6e\u65f6\uff0cthickStart\u548cthickEnd\u901a\u5e38\u8bbe\u7f6e\u4e3achromStart\u4f4d\u7f6e thickEnd - \u7ed8\u5236\u7279\u5f81\u7684\u7ed3\u675f\u4f4d\u7f6e\uff08\u4f8b\u5982\u57fa\u56e0\u4e2d\u7684\u7ec8\u6b62\u5bc6\u7801\u5b50\uff09 itemRgb - R\uff0cG\uff0cB\u5f62\u5f0f\u7684RGB\u503c\uff08\u4f8b\u5982255,0,0\uff09\u3002\u5982\u679c\u8f68\u8ff9\u884c itemRgb \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u201cOn\u201d\uff0c\u5219\u6b64RBG\u503c\u5c06\u786e\u5b9a\u6b64BED\u884c\u4e2d\u5305\u542b\u7684\u6570\u636e\u7684\u663e\u793a\u989c\u8272\u3002\u6ce8\u610f\uff1a\u5efa\u8bae\u4f7f\u7528\u6b64\u5c5e\u6027\u7684\u7b80\u5355\u989c\u8272\u65b9\u6848\uff08\u516b\u79cd\u989c\u8272\u6216\u66f4\u5c11\u989c\u8272\uff09\uff0c\u4ee5\u907f\u514d\u538b\u5012Genome\u6d4f\u89c8\u5668\u548cInternet\u6d4f\u89c8\u5668\u7684\u989c\u8272\u8d44\u6e90 blockCount - BED\u884c\u4e2d\u7684\u5757\uff08\u5916\u663e\u5b50\uff09\u6570 blockSizes - \u5757\u5927\u5c0f\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u6b64\u5217\u8868\u4e2d\u7684\u9879\u76ee\u6570\u5e94\u4e0eblockCount\u76f8\u5bf9\u5e94 blockStarts - \u4ee5\u9017\u53f7\u5206\u9694\u7684\u5757\u5f00\u59cb\u5217\u8868\u3002\u5e94\u8be5\u76f8\u5bf9\u4e8echromStart\u8ba1\u7b97\u6240\u6709 blockStart \u4f4d\u7f6e\u3002\u6b64\u5217\u8868\u4e2d\u7684\u9879\u76ee\u6570\u5e94\u4e0eblockCount\u76f8\u5bf9\u5e94 \u5728\u5177\u6709\u5757\u5b9a\u4e49\u7684BED\u6587\u4ef6\u4e2d\uff0c\u7b2c\u4e00\u4e2ablockStart\u503c\u5fc5\u987b\u4e3a0\uff0c\u4ee5\u4fbf\u7b2c\u4e00\u4e2a\u5757\u4ecechromStart\u5f00\u59cb\u3002\u540c\u6837\uff0c\u6700\u540e\u7684blockStart\u4f4d\u7f6e\u52a0\u4e0a\u6700\u540e\u7684blockSize\u503c\u5fc5\u987b\u7b49\u4e8echromEnd\u3002\u5757\u53ef\u80fd\u4e0d\u91cd\u53e0\u3002 Tips \u6b64\u8868\u663e\u793a\u4e86Genome Browser\u5c06BED\u5206\u6570\u503c\u8f6c\u6362\u4e3a\u7070\u8272\u9634\u5f71 \u57fa\u672c\u4f8b\u5b50\uff1a track name=pairedReads description=\"Clone Paired Reads\" useScore=1 chr22 1000 5000 cloneA 960 + 1000 5000 0 2 567,488, 0,3512 chr22 2000 6000 cloneB 900 - 2000 6000 0 2 433,399, 0,3601 \u4e0b\u9762\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a\u6ce8\u91ca\u8f68\u8ff9\uff0c\u8be5\u8f68\u8ff9\u4f7f\u7528itemRgb\u5c5e\u6027\u4e3a\u6bcf\u4e2a\u6570\u636e\u884c\u5355\u72ec\u7740\u8272\u3002 \u5728\u6b64\u8f68\u9053\u4e2d\uff0c\u989c\u8272\u65b9\u6848\u533a\u5206\u540d\u4e3a\u201cPos *\u201d\u7684\u9879\u76ee\u548c\u540d\u4e3a\u201cNeg *\u201d\u7684\u9879\u76ee\u3002 \u6709\u5173\u8c03\u8272\u677f\u9650\u5236\uff0c\u8bf7\u53c2\u9605\u4e0a\u9762itemRgb\u63cf\u8ff0\u4e2d\u7684\u4f7f\u7528\u8bf4\u660e\u3002 \u6ce8\u610f\uff1a\u6b64\u793a\u4f8b\u4e2d\u7684\u8f68\u9053\u548c\u6570\u636e\u884c\u5df2\u91cd\u65b0\u683c\u5f0f\u5316\u4ee5\u7528\u4e8e\u6587\u6863\u76ee\u7684\u3002 \u6b64\u793a\u4f8b\u53ef\u4ee5\u7c98\u8d34\u5230\u6d4f\u89c8\u5668\u4e2d\u800c\u65e0\u9700\u7f16\u8f91\u3002 browser position chr7:127471196-127495720 browser hide all track name=\"ItemRGBDemo\" description=\"Item RGB demonstration\" visibility=2 itemRgb=\"On\" chr7 127471196 127472363 Pos1 0 + 127471196 127472363 255,0,0 chr7 127472363 127473530 Pos2 0 + 127472363 127473530 255,0,0 chr7 127473530 127474697 Pos3 0 + 127473530 127474697 255,0,0 chr7 127474697 127475864 Pos4 0 + 127474697 127475864 255,0,0 chr7 127475864 127477031 Neg1 0 - 127475864 127477031 0,0,255 chr7 127477031 127478198 Neg2 0 - 127477031 127478198 0,0,255 chr7 127478198 127479365 Neg3 0 - 127478198 127479365 0,0,255 chr7 127479365 127480532 Pos5 0 + 127479365 127480532 255,0,0 chr7 127480532 127481699 Neg4 0 - 127480532 127481699 0,0,255 \u4e5f\u53ef\u4ee5\u4f7f\u7528\u8f68\u8ff9\u7ebf\u4e2d\u7684colorByStrand\u5c5e\u6027\u5728BED\u8f68\u9053\u4e2d\u9010\u4e2a\u9879\u76ee\u7740\u8272\uff0c\u5982\u4e0b\u6240\u793a\u3002 \u5bf9\u4e8eBED\u8f68\u9053\uff0c\u8be5\u5c5e\u6027\u4ec5\u7528\u4e8e\u5177\u67096\u52308\u4e2a\u5b57\u6bb5\u7684\u81ea\u5b9a\u4e49\u8f68\u9053\uff08\u5373BED6\u5230BED8\uff09\u3002 \u6ce8\u610f\uff1a\u6b64\u793a\u4f8b\u4e2d\u7684\u8f68\u9053\u548c\u6570\u636e\u884c\u5df2\u91cd\u65b0\u683c\u5f0f\u5316\u4ee5\u7528\u4e8e\u6587\u6863\u76ee\u7684\u3002 \u6b64\u793a\u4f8b\u53ef\u4ee5\u7c98\u8d34\u5230\u6d4f\u89c8\u5668\u4e2d\u800c\u65e0\u9700\u7f16\u8f91\u3002 browser position chr7:127471196-127495720 browser hide all track name=\"ColorByStrandDemo\" description=\"Color by strand demonstration\" visibility=2 colorByStrand=\"255,0,0 0,0,255\" chr7 127471196 127472363 Pos1 0 + chr7 127472363 127473530 Pos2 0 + chr7 127473530 127474697 Pos3 0 + chr7 127474697 127475864 Pos4 0 + chr7 127475864 127477031 Neg1 0 - chr7 127477031 127478198 Neg2 0 - chr7 127478198 127479365 Neg3 0 - chr7 127479365 127480532 Pos5 0 + chr7 127480532 127481699 Neg4 0 - \u53c2\u8003\u8d44\u6599 \u00b6 https://genome.ucsc.edu/FAQ/FAQformat.html#format1.7","title":"07. bed"},{"location":"tutorial/Format/07_bed/#bed","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb BED \u683c\u5f0f\u6570\u636e\u662f\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u5e38\u7528\u683c\u5f0f\u4e4b\u4e00\u3002\u5b83\u4e0eBAM\u4e0d\u540c\uff0c\u4e3b\u8981\u9488\u5bf9\u5982\u57fa\u56e0\u6216\u7a81\u53d8\u4f53\u6570\u636e\u7684\u5c55\u793a\u3002\u5e38\u89c1\u7684bed\u5de5\u5177\u5982bedtools\uff0c\u5728\u8bb8\u591a\u5de5\u5177\u6d41\u4e2d\u90fd\u96c6\u6210\u4e86bed\u65b9\u5f0f\u7684\u5904\u7406\u3002 BED\uff08Browser Extensible Data\uff0c\u6d4f\u89c8\u5668\u53ef\u6269\u5c55\u6570\u636e\uff09\u683c\u5f0f\u63d0\u4f9b\u4e86\u4e00\u79cd\u7075\u6d3b\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u6ce8\u91ca\u8f68\u9053\u4e2d\u663e\u793a\u7684\u6570\u636e\u884c\u3002 BED\u884c\u6709\u4e09\u4e2a\u5fc5\u586b\u5b57\u6bb5\u548c\u4e5d\u4e2a\u9644\u52a0\u53ef\u9009\u5b57\u6bb5\u3002 \u6bcf\u884c\u7684\u5b57\u6bb5\u6570\u5fc5\u987b\u5728\u6ce8\u91ca\u8f68\u9053\u4e2d\u7684\u4efb\u4f55\u4e00\u7ec4\u6570\u636e\u4e2d\u4fdd\u6301\u4e00\u81f4\u3002 \u53ef\u9009\u5b57\u6bb5\u7684\u987a\u5e8f\u662f\u7ed1\u5b9a\uff1a\u5982\u679c\u4f7f\u7528\u7f16\u53f7\u8f83\u5927\u7684\u5b57\u6bb5\uff0c\u5219\u5fc5\u987b\u59cb\u7ec8\u586b\u5145\u8f83\u4f4e\u7f16\u53f7\u7684\u5b57\u6bb5\u3002 BED\u4fe1\u606f\u4e0d\u5e94\u5982\u4e0a\u6240\u8ff0\u6df7\u5408\uff08BED3\u4e0d\u5e94\u4e0eBED4\u6df7\u5408\uff09\uff0c\u800c\u662f\u5fc5\u987b\u586b\u5199\u989d\u5916\u7684\u5217\u4fe1\u606f\u4ee5\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u4f8b\u5982\u4f7f\u7528\u201c\u3002\u201d\u3002 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b57\u6bb5\u5185\u5bb9\u662f\u7a7a\u7684\u3002 \u81ea\u5b9a\u4e49\u8f68\u9053\u4e2d\u7684BED\u5b57\u6bb5\u53ef\u4ee5\u4ee5\u7a7a\u683c\u5206\u9694\u6216\u5236\u8868\u7b26\u5206\u9694\u3002 \u53ea\u6709BED\u7c7b\u578b\u7684\u67d0\u4e9b\u53d8\u4f53\uff08\u4f8b\u5982bedDetail\uff09\u9700\u8981\u5bf9\u8be6\u7ec6\u4fe1\u606f\u5217\u8fdb\u884c\u5236\u8868\u7b26\u5206\u9694\u3002 \u8bf7\u6ce8\u610f\uff0c\u53ea\u6709\u5728\u81ea\u5b9a\u4e49\u8f68\u9053\u4e2d\uff0c\u6587\u4ef6\u7684\u7b2c\u4e00\u884c\u624d\u80fd\u5305\u542b\u6807\u9898\u884c\uff0c\u6807\u9898\u884c\u4ee5\u201c\u6d4f\u89c8\u5668\u201d\u6216\u201c\u8f68\u9053\u201d\u5f00\u5934\uff0c\u4ee5\u5e2e\u52a9\u6d4f\u89c8\u5668\u663e\u793a\u548c\u89e3\u91ca\u6807\u9898\u540e\u9762\u7684BED\u6570\u636e\u884c\u3002 \u5728\u8bf8\u5982bedToBigBed\u7684\u4e0b\u6e38\u5b9e\u7528\u7a0b\u5e8f\u4e2d\u4e0d\u5141\u8bb8\u8fd9\u6837\u7684\u6ce8\u91ca\u8f68\u9053\u6807\u9898\u884c\uff0cbedToBigBed\u5c06BED\u6587\u672c\u7684\u884c\u8f6c\u6362\u4e3a\u7d22\u5f15\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u5bf9\u4e8e\u8981\u50a8\u5b58\u6570\u636e\u91cf\u7279\u522b\u5927\u7684BED\u6587\u4ef6\uff08\u4f8b\u5982\u8d85\u8fc750M\uff09\uff0c\u5e94\u8be5\u4f7f\u7528bigBed\u683c\u5f0f\u3002 BED \u683c\u5f0f\u5982\u4e0b\uff1a chrom - \u67d3\u8272\u4f53\u7684\u540d\u79f0\uff08\u4f8b\u5982chr3\uff0cchrY\uff09\u6216scaffold\u540d\u79f0\uff08\u4f8b\u5982scaffold_1\uff09 chromStart - \u67d3\u8272\u4f53\u6216scaffold\u4e2d\u7279\u5f81\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\u67d3\u8272\u4f53\u4e2d\u7684\u7b2c\u4e00\u4e2a\u78b1\u57fa\u7f16\u53f7\u4e3a0 chromEnd - \u67d3\u8272\u4f53\u6216scaffold\u4e2d\u7279\u5f81\u7684\u7ed3\u675f\u4f4d\u7f6e name - \u5b9a\u4e49BED\u884c\u7684\u540d\u79f0\u3002 \u5f53\u8f68\u9053\u6253\u5f00\u5230\u5b8c\u5168\u663e\u793a\u6a21\u5f0f\u65f6\uff0c\u6b64\u6807\u7b7e\u663e\u793a\u5728\u57fa\u56e0\u7ec4\u6d4f\u89c8\u5668\u7a97\u53e3\u4e2dBED\u884c\u7684\u5de6\u4fa7\uff0c\u6216\u8005\u5728\u6253\u5305\u6a21\u5f0f\u4e0b\u76f4\u63a5\u663e\u793a\u5728\u9879\u76ee\u5de6\u4fa7 score - \u5f97\u5206\u57280\u52301000\u4e4b\u95f4\u3002\u5982\u679c\u6b64\u6ce8\u91ca\u6570\u636e\u96c6\u7684\u8f68\u8ff9\u7ebfuseScore\u5c5e\u6027\u8bbe\u7f6e\u4e3a1\uff0c\u5219\u5f97\u5206\u503c\u5c06\u786e\u5b9a\u663e\u793a\u6b64\u8981\u7d20\u7684\u7070\u5ea6\u7ea7\u522b\uff08\u8f83\u9ad8\u7684\u6570\u5b57=\u8f83\u6df1\u7684\u7070\u8272\uff09 strand - \u5b9a\u4e49strand\u3002 . \u6216 + \u6216 - thickStart - \u7ed8\u5236\u7279\u5f81\u7684\u8d77\u59cb\u4f4d\u7f6e\uff08\u4f8b\u5982\uff0c\u57fa\u56e0\u4e2d\u7684\u8d77\u59cb\u5bc6\u7801\u5b50\uff09\u3002\u5f53\u6ca1\u6709\u7279\u5f81\u8d77\u59cb\u4f4d\u7f6e\u65f6\uff0cthickStart\u548cthickEnd\u901a\u5e38\u8bbe\u7f6e\u4e3achromStart\u4f4d\u7f6e thickEnd - \u7ed8\u5236\u7279\u5f81\u7684\u7ed3\u675f\u4f4d\u7f6e\uff08\u4f8b\u5982\u57fa\u56e0\u4e2d\u7684\u7ec8\u6b62\u5bc6\u7801\u5b50\uff09 itemRgb - R\uff0cG\uff0cB\u5f62\u5f0f\u7684RGB\u503c\uff08\u4f8b\u5982255,0,0\uff09\u3002\u5982\u679c\u8f68\u8ff9\u884c itemRgb \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u201cOn\u201d\uff0c\u5219\u6b64RBG\u503c\u5c06\u786e\u5b9a\u6b64BED\u884c\u4e2d\u5305\u542b\u7684\u6570\u636e\u7684\u663e\u793a\u989c\u8272\u3002\u6ce8\u610f\uff1a\u5efa\u8bae\u4f7f\u7528\u6b64\u5c5e\u6027\u7684\u7b80\u5355\u989c\u8272\u65b9\u6848\uff08\u516b\u79cd\u989c\u8272\u6216\u66f4\u5c11\u989c\u8272\uff09\uff0c\u4ee5\u907f\u514d\u538b\u5012Genome\u6d4f\u89c8\u5668\u548cInternet\u6d4f\u89c8\u5668\u7684\u989c\u8272\u8d44\u6e90 blockCount - BED\u884c\u4e2d\u7684\u5757\uff08\u5916\u663e\u5b50\uff09\u6570 blockSizes - \u5757\u5927\u5c0f\u7684\u9017\u53f7\u5206\u9694\u5217\u8868\u3002\u6b64\u5217\u8868\u4e2d\u7684\u9879\u76ee\u6570\u5e94\u4e0eblockCount\u76f8\u5bf9\u5e94 blockStarts - \u4ee5\u9017\u53f7\u5206\u9694\u7684\u5757\u5f00\u59cb\u5217\u8868\u3002\u5e94\u8be5\u76f8\u5bf9\u4e8echromStart\u8ba1\u7b97\u6240\u6709 blockStart \u4f4d\u7f6e\u3002\u6b64\u5217\u8868\u4e2d\u7684\u9879\u76ee\u6570\u5e94\u4e0eblockCount\u76f8\u5bf9\u5e94 \u5728\u5177\u6709\u5757\u5b9a\u4e49\u7684BED\u6587\u4ef6\u4e2d\uff0c\u7b2c\u4e00\u4e2ablockStart\u503c\u5fc5\u987b\u4e3a0\uff0c\u4ee5\u4fbf\u7b2c\u4e00\u4e2a\u5757\u4ecechromStart\u5f00\u59cb\u3002\u540c\u6837\uff0c\u6700\u540e\u7684blockStart\u4f4d\u7f6e\u52a0\u4e0a\u6700\u540e\u7684blockSize\u503c\u5fc5\u987b\u7b49\u4e8echromEnd\u3002\u5757\u53ef\u80fd\u4e0d\u91cd\u53e0\u3002 Tips \u6b64\u8868\u663e\u793a\u4e86Genome Browser\u5c06BED\u5206\u6570\u503c\u8f6c\u6362\u4e3a\u7070\u8272\u9634\u5f71 \u57fa\u672c\u4f8b\u5b50\uff1a track name=pairedReads description=\"Clone Paired Reads\" useScore=1 chr22 1000 5000 cloneA 960 + 1000 5000 0 2 567,488, 0,3512 chr22 2000 6000 cloneB 900 - 2000 6000 0 2 433,399, 0,3601 \u4e0b\u9762\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a\u6ce8\u91ca\u8f68\u8ff9\uff0c\u8be5\u8f68\u8ff9\u4f7f\u7528itemRgb\u5c5e\u6027\u4e3a\u6bcf\u4e2a\u6570\u636e\u884c\u5355\u72ec\u7740\u8272\u3002 \u5728\u6b64\u8f68\u9053\u4e2d\uff0c\u989c\u8272\u65b9\u6848\u533a\u5206\u540d\u4e3a\u201cPos *\u201d\u7684\u9879\u76ee\u548c\u540d\u4e3a\u201cNeg *\u201d\u7684\u9879\u76ee\u3002 \u6709\u5173\u8c03\u8272\u677f\u9650\u5236\uff0c\u8bf7\u53c2\u9605\u4e0a\u9762itemRgb\u63cf\u8ff0\u4e2d\u7684\u4f7f\u7528\u8bf4\u660e\u3002 \u6ce8\u610f\uff1a\u6b64\u793a\u4f8b\u4e2d\u7684\u8f68\u9053\u548c\u6570\u636e\u884c\u5df2\u91cd\u65b0\u683c\u5f0f\u5316\u4ee5\u7528\u4e8e\u6587\u6863\u76ee\u7684\u3002 \u6b64\u793a\u4f8b\u53ef\u4ee5\u7c98\u8d34\u5230\u6d4f\u89c8\u5668\u4e2d\u800c\u65e0\u9700\u7f16\u8f91\u3002 browser position chr7:127471196-127495720 browser hide all track name=\"ItemRGBDemo\" description=\"Item RGB demonstration\" visibility=2 itemRgb=\"On\" chr7 127471196 127472363 Pos1 0 + 127471196 127472363 255,0,0 chr7 127472363 127473530 Pos2 0 + 127472363 127473530 255,0,0 chr7 127473530 127474697 Pos3 0 + 127473530 127474697 255,0,0 chr7 127474697 127475864 Pos4 0 + 127474697 127475864 255,0,0 chr7 127475864 127477031 Neg1 0 - 127475864 127477031 0,0,255 chr7 127477031 127478198 Neg2 0 - 127477031 127478198 0,0,255 chr7 127478198 127479365 Neg3 0 - 127478198 127479365 0,0,255 chr7 127479365 127480532 Pos5 0 + 127479365 127480532 255,0,0 chr7 127480532 127481699 Neg4 0 - 127480532 127481699 0,0,255 \u4e5f\u53ef\u4ee5\u4f7f\u7528\u8f68\u8ff9\u7ebf\u4e2d\u7684colorByStrand\u5c5e\u6027\u5728BED\u8f68\u9053\u4e2d\u9010\u4e2a\u9879\u76ee\u7740\u8272\uff0c\u5982\u4e0b\u6240\u793a\u3002 \u5bf9\u4e8eBED\u8f68\u9053\uff0c\u8be5\u5c5e\u6027\u4ec5\u7528\u4e8e\u5177\u67096\u52308\u4e2a\u5b57\u6bb5\u7684\u81ea\u5b9a\u4e49\u8f68\u9053\uff08\u5373BED6\u5230BED8\uff09\u3002 \u6ce8\u610f\uff1a\u6b64\u793a\u4f8b\u4e2d\u7684\u8f68\u9053\u548c\u6570\u636e\u884c\u5df2\u91cd\u65b0\u683c\u5f0f\u5316\u4ee5\u7528\u4e8e\u6587\u6863\u76ee\u7684\u3002 \u6b64\u793a\u4f8b\u53ef\u4ee5\u7c98\u8d34\u5230\u6d4f\u89c8\u5668\u4e2d\u800c\u65e0\u9700\u7f16\u8f91\u3002 browser position chr7:127471196-127495720 browser hide all track name=\"ColorByStrandDemo\" description=\"Color by strand demonstration\" visibility=2 colorByStrand=\"255,0,0 0,0,255\" chr7 127471196 127472363 Pos1 0 + chr7 127472363 127473530 Pos2 0 + chr7 127473530 127474697 Pos3 0 + chr7 127474697 127475864 Pos4 0 + chr7 127475864 127477031 Neg1 0 - chr7 127477031 127478198 Neg2 0 - chr7 127478198 127479365 Neg3 0 - chr7 127479365 127480532 Pos5 0 + chr7 127480532 127481699 Neg4 0 -","title":"BED \u683c\u5f0f\u6570\u636e"},{"location":"tutorial/Format/07_bed/#_1","text":"https://genome.ucsc.edu/FAQ/FAQformat.html#format1.7","title":"\u53c2\u8003\u8d44\u6599"},{"location":"tutorial/Format/08_vcf/","text":"VCF \u683c\u5f0f\u6570\u636e\u6587\u4ef6 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} VCF\uff08Variant Calling File\uff09\u4f53\u73b0\u5e8f\u5217\u4f4d\u70b9\u53d8\u5316\uff08\u70b9\u7a81\u53d8\u3001\u5220\u9664\u3001\u7ed3\u6784\u53d8\u5316\u7b49\uff09\u7684\u6807\u51c6\u683c\u5f0f\u6587\u4ef6\u3002\u6587\u4ef6\u662f\u538b\u7f29\u5e76\u7d22\u5f15\u8fc7\u7684\u3002\u6700\u65e9\u662f\u4e3a\u4e861000\u57fa\u56e0\u7ec4\u8ba1\u5212\u800c\u8bbe\u8ba1\u7684\u3002\u53ef\u4ee5\u7528vcftools\u4ece\u57fa\u56e0\u7ec4\u6570\u636e\u4e2d\u521b\u5efa\u3002 VCF header \u533a\u57df ##fileformat=VCF4.2 \u63cf\u8ff0SNP\uff0cINDEL\u548cSV\u7ed3\u679c\u7684\u6587\u672c\u6587\u4ef6\u3002\u5728GATK\u8f6f\u4ef6\u4e2d\u5f97\u5230\u6700\u597d\u7684\u652f\u6301\uff0c\u5f53\u7136SAMtools\u5f97\u5230\u7684\u7ed3\u679c\u4e5f\u662fVCF\u683c\u5f0f\uff0c\u548cGATK\u7684VCF\u683c\u5f0f\u6709\u70b9\u5dee\u522b\u3002 VCF\u7684\u4e3b\u4f53\u7ed3\u6784 \u00b6 VCF\u6587\u4ef6\u5206\u4e3a\u4e24\u90e8\u5206\u5185\u5bb9\uff1a\u4ee5\u201c#\u201d\u5f00\u5934\u7684\u6ce8\u91ca\u90e8\u5206\uff1b\u6ca1\u6709\u201c#\u201d\u5f00\u5934\u7684\u4e3b\u4f53\u90e8\u5206 3.VCF\u768410\u5217\u7684\u610f\u4e49 CHROM \uff1a \u53c2\u8003\u5e8f\u5217\u540d\u79f0 POS:variant\u7684\u4f4d\u7f6e\uff1b\u5982\u679c\u662fINDEL\u7684\u8bdd\uff0c\u4f4d\u7f6e\u662fINDEL\u7684\u7b2c\u4e00\u4e2a\u78b1\u57fa\u4f4d\u7f6e ID:variant\u7684ID;\u6bd4\u5982\u5728dbSNP\u4e2d\u6709\u8be5SNP\u7684id\uff0c\u5219\u4f1a\u5728\u6b64\u884c\u7ed9\u51fa\uff1b\u82e5\u6ca1\u6709\uff0c\u5219\u7528\u2019.'\u8868\u793a\u5176\u4e3a\u4e00\u4e2anovel variant REF:\u53c2\u8003\u5e8f\u5217\u7684\u78b1\u57fa ALT:variant\u7684\u78b1\u57fa QUAL:Phred\u683c\u5f0f(Phred_scaled)\u7684\u8d28\u91cf\u503c\uff0c\u8868 \u793a\u5728\u8be5\u4f4d\u70b9\u5b58\u5728variant\u7684\u53ef\u80fd\u6027\uff1b\u8be5\u503c\u8d8a\u9ad8\uff0c\u5219variant\u7684\u53ef\u80fd\u6027\u8d8a\u5927\uff1b\u8ba1\u7b97\u65b9\u6cd5\uff1aPhred\u503c = -10 * log (1-p) p\u4e3avariant\u5b58\u5728\u7684\u6982\u7387; \u901a\u8fc7\u8ba1\u7b97\u516c\u5f0f\u53ef\u4ee5\u770b\u51fa\u503c\u4e3a10\u7684\u8868\u793a\u9519\u8bef\u6982\u7387\u4e3a0.1\uff0c\u8be5\u4f4d\u70b9\u4e3avariant\u7684\u6982\u7387\u4e3a90%,qual\u503c\u4e0ep\u6210\u6b63\u6bd4\u4f8b FILTER:\u4f7f\u7528\u4e0a\u4e00\u4e2aQUAL\u503c\u6765\u8fdb\u884c\u8fc7\u6ee4\u7684\u8bdd\uff0c\u662f\u4e0d\u591f\u7684\u3002GATK\u80fd\u4f7f\u7528\u5176\u5b83\u7684\u65b9\u6cd5\u6765\u8fdb\u884c\u8fc7\u6ee4\uff0c\u8fc7\u6ee4\u7ed3\u679c\u4e2d\u901a\u8fc7\u5219\u8be5\u503c\u4e3a\u201dPASS\u201d;\u82e5variant\u4e0d\u53ef\u9760\uff0c\u5219\u8be5\u9879\u4e0d\u4e3a\u201dPASS\u201d\u6216\u201d.\u201d\u3002 INFO:\u8fd9\u4e00\u884c\u662fvariant\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5185\u5bb9\u5f88\u591a\uff0c\u4ee5\u4e0b\u518d\u5177\u4f53\u8be6\u8ff0\u3002 FORMAT:variants\u7684\u683c\u5f0f\uff0c\u4f8b\u5982GT:AD:DP:GQ:PL SAMPLES:\u5404\u4e2aSample\u7684\u503c\uff0c\u7531BAM\u6587\u4ef6\u4e2d\u7684@RG\u4e0b\u7684SM\u6807\u7b7e\u6240\u51b3\u5b9a INFO: #DP-read depth\uff1a\u6837\u672c\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u7684reads\u8986\u76d6\u5ea6\u3002\u662f\u4e00\u4e9breads\u88ab\u8fc7\u6ee4\u6389\u540e\u7684\u8986\u76d6\u5ea6\u3002DP4:\u9ad8\u8d28\u91cf\u6d4b\u5e8f\u78b1\u57fa\uff0c\u4f4d\u4e8eREF\u6216\u8005ALT\u524d\u540e #QD\uff1a\u901a\u8fc7\u6df1\u5ea6\u6765\u8bc4\u4f30\u4e00\u4e2a\u53d8\u5f02\u7684\u53ef\u4fe1\u5ea6\u3002Variant call confidence normalized by depth of sample reads supporting a variant #MQ\uff1a\u8868\u793a\u8986\u76d6\u5e8f\u5217\u8d28\u91cf\u7684\u5747\u65b9\u503cRMS Mapping Quality #FQ\uff1aphred\u503c\u5173\u4e8e\u6240\u6709\u6837\u672c\u76f8\u4f3c\u7684\u53ef\u80fd\u6027 #AC\uff0cAF \u548c AN\uff1aAC(Allele Count) \u8868\u793a\u8be5Allele\u7684\u6570\u76ee\uff1bAF(Allele Frequency) \u8868\u793aAllele\u7684\u9891\u7387\uff1b AN(Allele Number) \u8868\u793aAllele\u7684\u603b\u6570\u76ee\u3002 \u5bf9\u4e8e1\u4e2adiploid sample\u800c\u8a00\uff1a\u5219\u57fa\u56e0\u578b 0/1 \u8868\u793asample\u4e3a\u6742\u5408\u5b50\uff0cAllele\u6570\u4e3a1(\u53cc\u500d\u4f53\u7684sample\u5728\u8be5\u4f4d\u70b9\u53ea\u67091\u4e2a\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0c Allele\u7684\u9891\u7387\u4e3a0.5(\u53cc\u500d\u4f53\u7684sample\u5728\u8be5\u4f4d\u70b9\u53ea\u670950%\u7684\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0c\u603b\u7684Allele\u4e3a2\uff1b \u57fa\u56e0\u578b 1/1 \u5219\u8868\u793asample\u4e3a\u7eaf\u5408\u7684\uff0cAllele\u6570\u4e3a2\uff0cAllele\u7684\u9891\u7387\u4e3a1\uff0c\u603b\u7684Allele\u4e3a2\u3002 #MLEAC\uff1aMaximum likelihood expectation (MLE) for the allele counts (not necessarily the same as the AC), for each ALT allele, in the same order as listed #MLEAF\uff1aMaximum likelihood expectation (MLE) for the allele frequency (not necessarily the same as the AF), for each ALT allele, in the same order as listed #BaseQRankSum \u6bd4\u8f83\u652f\u6301\u53d8\u5f02\u7684\u78b1\u57fa\u548c\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u78b1\u57fa\u7684\u8d28\u91cf\uff0c\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684\u78b1\u57fa\u8d28\u91cf\u503c\u4e0d\u53ca\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\uff0c \u6b63\u503c\u5219\u76f8\u53cd\uff0c\u652f\u6301\u53d8\u5f02\u7684\u8d28\u91cf\u503c\u597d\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u30020\u8868\u793a\u4e24\u8005\u65e0\u660e\u663e\u5dee\u5f02\u3002 #FS \u4f7f\u7528F\u68c0\u9a8c\u6765\u68c0\u9a8c\u6d4b\u5e8f\u662f\u5426\u5b58\u5728\u94fe\u504f\u597d\u6027\u3002\u94fe\u504f\u597d\u6027\u53ef\u80fd\u4f1a\u5bfc\u81f4\u53d8\u5f02\u7b49\u4f4d\u57fa\u56e0\u68c0\u6d4b\u51fa\u73b0\u9519\u8bef\u3002\u8f93\u51fa\u503cPhred-scaled p-value\uff0c\u503c\u8d8a\u5927\u8d8a\u53ef\u80fd\u51fa\u73b0\u94fe\u504f\u597d\u6027\u3002 #InbreedingCoeff \u4f7f\u7528\u4f3c\u7136\u6cd5\u68c0\u9a8c\u6837\u672c\u95f4\u7684\u8fd1\u4ea4\u7cfb\u6570\uff08\u53c8\u6216\u8005\u79f0\u4e3a\u8fd1\u4eb2\u5173\u7cfb\uff09\u3002\u503c\u8d8a\u9ad8\u8d8a\u53ef\u80fd\u662f\u8fd1\u4eb2\u7e41\u6b96\u3002 #MQRankSum \u6bd4\u8f83\u652f\u6301\u53d8\u5f02\u7684\u5e8f\u5217\u548c\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u5e8f\u5217\u7684\u8d28\u91cf\uff0c\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684\u78b1\u57fa\u8d28\u91cf\u503c\u4e0d\u53ca\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\uff0c\u53ea\u9488\u5bf9\u6742\u5408\u3002 \u6b63\u503c\u5219\u76f8\u53cd\uff0c\u652f\u6301\u53d8\u5f02\u7684\u8d28\u91cf\u503c\u597d\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u30020\u8868\u793a\u4e24\u8005\u65e0\u660e\u663e\u5dee\u5f02\u3002\u5b9e\u9645\u5e94\u7528\u4e2d\u4e00\u822c\u8fc7\u6ee4\u6389\u8f83\u5c0f\u7684\u8d1f\u503c\u3002 #BaseCounts \u6240\u6709\u6837\u672c\u5728\u53d8\u5f02\u4f4d\u70b9ATCG\u7684\u6570\u91cf #ClippingRankSum \u540c\u524d\u9762\u4e24\u4e2a\u7c7b\u4f3c\uff0c\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684read\u6709\u66f4\u7684\u7684hard-clip\u78b1\u57fa\uff0c\u6b63\u503c\u8868\u793a\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u7684read\u6709\u66f4\u591a\u7684hard-clip\u30020\u6700\u597d\uff0c\u65e0\u8bba\u662f\u6b63\u503c\u8fd8\u662f\u8d1f\u503c\u90fd\u8868\u793a\u53ef\u80fd\u53ef\u80fd\u5b58\u5728\u4eba\u4e3a\u504f\u5dee\u3002 #ReadPosRankSum \u68c0\u6d4b\u53d8\u5f02\u4f4d\u70b9\u662f\u5426\u6709\u4f4d\u7f6e\u504f\u597d\u6027\uff08\u662f\u5426\u5b58\u5728\u4e8e\u5e8f\u5217\u672b\u7aef\uff0c\u6b64\u65f6\u5f80\u5f80\u5bb9\u6613\u51fa\u9519\uff09\u3002\u6700\u4f73\u503c\u4e3a0\uff0c\u8868\u793a\u53d8\u5f02\u4e0e\u5176\u5728\u5e8f\u5217\u4e0a\u7684\u4f4d\u7f6e\u65e0\u5173\u3002\u8d1f\u503c\u8868\u793a\u53d8\u5f02\u4f4d\u70b9\u66f4\u5bb9\u6613\u5728\u672b\u7aef\u51fa\u73b0\uff0c\u6b63\u503c\u8868\u793a\u53c2\u8003\u57fa\u56e0\u7ec4\u4e2d\u7684\u7b49\u4f4d\u57fa\u56e0\u66f4\u5bb9\u6613\u5728\u672b\u7aef\u51fa\u73b0\u3002 #ExcessHet \u68c0\u6d4b\u8fd9\u4e9b\u6837\u672c\u7684\u76f8\u5173\u6027\uff0c\u4e0eInbreedingCoeff\u76f8\u4f3c\uff0c\u503c\u8d8a\u5927\u8d8a\u53ef\u80fd\u662f\u9519\u8bef\u3002 #LikelihoodRankSum \u8bc4\u4ef7\u652f\u6301\u53d8\u5f02\u548cref\u7684\u5e8f\u5217\u4e0ebest hyplotype\u7684\u5339\u914d\u6027\uff0c0\u4e3a\u6700\u4f73\u503c\u3002\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684read\u5339\u914d\u5ea6\u4e0d\u53ca\u652f\u6301ref\u7684\u5339\u914d\u5ea6\uff0c\u6b63\u503c\u5219\u76f8\u53cd\u3002\u503c\u8d8a\u5927\u8868\u793a\u8d8a\u53ef\u80fd\u662f\u51fa\u73b0\u4e86\u9519\u8bef\u3002 #HaplotypeScore \u5206\u6570\u8d8a\u9ad8\u8d8a\u53ef\u80fd\u51fa\u73b0\u9519\u8bef\u3002Higher scores are indicative of regions with bad alignments, typically leading to artifactual SNP and indel calls. #SOR\uff1a\u4e5f\u662f\u4e00\u4e2a\u7528\u6765\u8bc4\u4f30\u662f\u5426\u5b58\u5728\u94fe\u504f\u5411\u6027\u7684\u53c2\u6570\uff0c\u76f8\u5f53\u4e8eFS\u7684\u5347\u7ea7\u7248\u3002The StrandOddsRatio annotation is one of several methods that aims to evaluate whether there is strand bias in the data. It is an updated form of the Fisher Strand Test that is better at taking into account large amounts of data in high coverage situations. It is used to determine if there is strand bias between forward and reverse strands for the reference or alternate allele. The reported value is ln-scaled. #IS\uff1a\u63d2\u5165\u7f3a\u5931\u6216\u90e8\u5206\u63d2\u5165\u7f3a\u5931\u7684reads\u5141\u8bb8\u7684\u6700\u5927\u6570\u91cf #G3\uff1aML \u8bc4\u4f30\u57fa\u56e0\u578b\u51fa\u73b0\u7684\u9891\u7387 #HWE\uff1achi^2\u57fa\u4e8eHWE\u7684\u6d4b\u8bd5p\u503c\u548cG3 #CLR\uff1a\u5728\u53d7\u5230\u6216\u8005\u4e0d\u53d7\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u57fa\u56e0\u578b\u51fa\u73b0\u53ef\u80fd\u6027log\u503c #UGT\uff1a\u6700\u53ef\u80fd\u4e0d\u53d7\u9650\u5236\u7684\u4e09\u79cd\u57fa\u56e0\u578b\u7ed3\u6784 #CGT\uff1a\u6700\u53ef\u80fd\u53d7\u9650\u5236\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u7ed3\u6784 #PV4\uff1a\u56db\u79cdP\u503c\u5f97\u8bef\u5dee\uff0c\u5206\u522b\u662f\uff08strand\u3001baseQ\u3001mapQ\u3001tail distance bias\uff09 #INDEL\uff1a\u8868\u793a\u8be5\u4f4d\u7f6e\u7684\u53d8\u5f02\u662f\u63d2\u5165\u7f3a\u5931 #PC2\uff1a\u975e\u53c2\u8003\u7b49\u4f4d\u57fa\u56e0\u7684phred\uff08\u53d8\u5f02\u7684\u53ef\u80fd\u6027\uff09\u503c\u5728\u4e24\u4e2a\u5206\u7ec4\u4e2d\u5927\u5c0f\u4e0d\u540c #PCHI2\uff1a\u540e\u52a0\u6743chi^2\uff0c\u6839\u636ep\u503c\u6765\u6d4b\u8bd5\u4e24\u7ec4\u6837\u672c\u4e4b\u95f4\u7684\u8054\u7cfb #QCHI2\uff1aPhred scaled PCHI2 #PR\uff1a\u7f6e\u6362\u4ea7\u751f\u7684\u4e00\u4e2a\u8f83\u5c0f\u7684PCHI2 #QBD\uff1aQuality by Depth\uff0c\u6d4b\u5e8f\u6df1\u5ea6\u5bf9\u8d28\u91cf\u7684\u5f71\u54cd #RPB\uff1a\u5e8f\u5217\u7684\u8bef\u5dee\u4f4d\u7f6e\uff08Read Position Bias\uff09 #MDV\uff1a\u6837\u672c\u4e2d\u9ad8\u8d28\u91cf\u975e\u53c2\u8003\u5e8f\u5217\u7684\u6700\u5927\u6570\u76ee #VDB\uff1aVariant Distance Bias\uff0cRNA\u5e8f\u5217\u4e2d\u8fc7\u6ee4\u4eba\u5de5\u62fc\u63a5\u5e8f\u5217\u7684\u53d8\u5f02\u8bef\u5dee\u8303\u56f4 FORMAT: #AD \u548c DP\uff1aAD(Allele Depth)\u4e3asample\u4e2d\u6bcf\u4e00\u79cdallele\u7684reads\u8986\u76d6\u5ea6,\u5728diploid\u4e2d\u5219\u662f\u7528\u9017\u53f7\u5206\u5272\u7684\u4e24\u4e2a\u503c\uff0c \u524d\u8005\u5bf9\u5e94ref\u57fa\u56e0\u578b\uff0c\u540e\u8005\u5bf9\u5e94variant\u57fa\u56e0\u578b\uff1b DP\uff08Depth\uff09\u4e3asample\u4e2d\u8be5\u4f4d\u70b9\u7684\u8986\u76d6\u5ea6\u3002 #GT\uff1a\u6837\u54c1\u7684\u57fa\u56e0\u578b\uff08genotype\uff09\u3002\u4e24\u4e2a\u6570\u5b57\u4e2d\u95f4\u7528\u2019/'\u5206 \u5f00\uff0c\u8fd9\u4e24\u4e2a\u6570\u5b57\u8868\u793a\u53cc\u500d\u4f53\u7684sample\u7684\u57fa\u56e0\u578b\u30020 \u8868\u793a\u6837\u54c1\u4e2d\u6709ref\u7684allele\uff1b 1\u8868\u793a\u6837\u54c1\u4e2dvariant\u7684allele\uff1b 2\u8868\u793a\u6709\u7b2c\u4e8c\u4e2avariant\u7684allele\u3002\u56e0\u6b64\uff1a 0/0 \u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u7684\uff0c\u548cref\u4e00\u81f4\uff1b 0/1 \u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u6742\u5408\u7684\uff0c\u6709ref\u548cvariant\u4e24\u4e2a\u57fa\u56e0\u578b\uff1b 1/1 \u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u7684\uff0c\u548cvariant\u4e00\u81f4\u3002 #GQ\uff1a\u5373\u7b2c\u4e8c\u53ef\u80fd\u7684\u57fa\u56e0\u578b\u7684PL\u503c\uff0c\u76f8\u5bf9\u4e8e\u6700\u53ef\u80fd\u57fa\u56e0\u578b\u7684PL\u503c\uff08\u5176PL=0\uff09\u800c\u8a00\uff0c\u5927\u4e8e99\u65f6\uff0c\u5176\u4fe1\u606f\u91cf\u5df2\u4e0d\u5927\uff0c\u56e0\u6b64\u5927\u4e8e99\u7684\u5168\u90e8\u8d4b\u503c99\u3002\u5f53GQ\u503c\u5f88\u5c0f\u65f6\uff0c\u610f\u5473\u7740\u7b2c\u4e8c\u53ef\u80fd\u57fa\u56e0\u578b\u4e0e\u6700\u53ef\u80fd\u57fa\u56e0\u578b\u5dee\u522b\u4e0d\u5927\u3002 #GL\uff1a\u4e09\u79cd\u57fa\u56e0\u578b\uff08RR RA AA\uff09\u51fa\u73b0\u7684\u53ef\u80fd\u6027\uff0cR\u8868\u793a\u53c2\u8003\u78b1\u57fa\uff0cA\u8868\u793a\u53d8\u5f02\u78b1\u57fa #DV\uff1a\u9ad8\u8d28\u91cf\u7684\u975e\u53c2\u8003\u78b1\u57fa #SP\uff1aphred\u7684p\u503c\u8bef\u5dee\u7ebf #PL\uff1a\u6307\u5b9a\u7684\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u53ef\u80fd\u6027(provieds the likelihoods of the given genotypes)\u3002\u8fd9\u4e09\u79cd\u6307\u5b9a\u7684\u57fa\u56e0\u578b\u4e3a(0/0,0/1,1/1)\uff0c\u8fd9\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u6982\u7387\u603b\u548c\u4e3a1\u3002 \u548c\u4e4b\u524d\u4e0d\u4e00\u81f4\uff0c\u8be5\u503c\u8d8a\u5927\uff0c\u8868\u660e\u4e3a\u8be5\u79cd\u57fa\u56e0\u578b\u7684\u53ef\u80fd\u6027\u8d8a\u5c0f\u3002 Phred\u503c = -10 * log (p) p\u4e3a\u57fa\u56e0\u578b\u5b58\u5728\u7684\u6982\u7387\u3002 4.vcf\u6587\u4ef6\u7684\u57fa\u56e0\u578b\u4fe1\u606f GT:\u6837\u54c1\u7684\u57fa\u56e0\u578b\uff08genotype\uff09\u3002\u4e24\u4e2a\u6570\u5b57\u4e2d\u95f4\u7528\u2019/'\u5206 \u5f00\uff0c\u8fd9\u4e24\u4e2a\u6570\u5b57\u8868\u793a\u53cc\u500d\u4f53\u7684sample\u7684\u57fa\u56e0\u578b\u30020 \u8868\u793a\u6837\u54c1\u4e2d\u6709ref\u7684allele\uff1b 1 \u8868\u793a\u6837\u54c1\u4e2dvariant\u7684allele\uff1b 2\u8868\u793a\u6709\u7b2c\u4e8c\u4e2avariant\u7684allele\u3002\u6240\u4ee5\uff1a 0/0\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u4f4d\u70b9\uff0c\u548cREF\u7684\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4 0/1\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u6742\u5408\u7a81\u53d8\uff0c\u6709REF\u548cALT\u4e24\u4e2a\u57fa\u56e0\u578b\uff08\u90e8\u5206\u78b1\u57fa\u548cREF\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff0c\u90e8\u5206\u78b1\u57fa\u548cALT\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff09 1/1\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u7a81\u53d8\uff0c\u603b\u4f53\u7a81\u53d8\u7c7b\u578b\u548cALT\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4 \u00bd\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u6742\u5408\u7a81\u53d8\uff0c\u6709ALT1\u548cALT2\u4e24\u4e2a\u57fa\u56e0\u578b\uff08\u90e8\u5206\u548cALT1\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff0c\u90e8\u5206\u548cALT2\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff09 AD\u548cDP:AD(Allele Depth)\u4e3asample\u4e2d\u6bcf\u4e00\u79cdallele\u7684reads\u8986\u76d6\u5ea6,\u5728diploid\uff08\u4e8c\u500d\u4f53\uff0c\u6216\u53ef\u6307\u4ee3\u591a\u500d\u578b\uff09\u4e2d\u5219\u662f\u7528\u9017\u53f7\u5206\u9694\u7684\u4e24\u4e2a\u503c\uff0c\u524d\u8005\u5bf9\u5e94REF\u57fa\u56e0\uff0c\u540e\u8005\u5bf9\u5e94ALT\u57fa\u56e0\u578b DP(Depth)\u4e3asample\u4e2d\u8be5\u4f4d\u70b9\u7684\u8986\u76d6\u5ea6\uff0c\u662f\u6240\u652f\u6301\u7684\u4e24\u4e2aAD\u503c\uff08\u9017\u53f7\u524d\u548c\u9017\u53f7\u540e\uff09\u7684\u52a0\u548c \u4f8b\u5982\uff1a 1/1:0,175:175\u2014GT:AD(REF),AD(ALT):DP 0/1:79,96:175 \u00bd:0,20,56:76 \u8fd9\u91cc\u7684\u4e09\u79cd\u7c7b\u578b\u5bf9\u5e94\u7684DP\u503c\u5747\u662f\u5176\u5bf9\u5e94\u7684AD\u503c\u7684\u52a0\u548c\uff0c1/1\u7684175\u662f0+175\uff0c0/1\u7684175\u662f79+96\uff0c\u00bd\u768476\u662f0+20+56 GQ:\u57fa\u56e0\u578b\u7684\u8d28\u91cf\u503c\uff08Genotype Quality\uff09\u3002Phred\u683c\u5f0f\uff08Phred_scaled\uff09\u7684\u8d28\u91cf\u503c\uff0c\u8868\u793a\u5728\u8be5\u4f4d\u70b9\u8be5\u57fa\u56e0\u578b\u5b58\u5728\u7684\u53ef\u80fd\u6027\uff1b\u8be5\u503c\u8d8a\u9ad8\uff0c\u5219Genotype\u7684\u53ef\u80fd\u6027\u8d8a\u5927\uff1b\u8ba1\u7b97\u65b9\u6cd5\uff1aPhred\u503c=-10log(1-P)\uff0cP\u4e3a\u57fa\u56e0\u578b\u5b58\u5728\u7684\u6982\u7387\u3002\uff08\u4e00\u822c\u5728final.snp.vcf\u6587\u4ef6\u4e2d\uff0c\u8be5\u503c\u4e3a99\uff0c\u4e3a99\u65f6\uff0c\u5176\u53ef\u80fd\u6027\u6700\u5927\uff09 PL:\u6307\u5b9a\u7684\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u8d28\u91cf\u503c\uff08provieds the likelihoods of the given genotypes\uff09\uff1b\u8fd9\u4e09\u79cd\u6307\u5b9a\u7684\u57fa\u56e0\u578b\u4e3a\uff080/0\uff0c0/1\uff0c1/1\uff09\uff0c\u8fd9\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u6982\u7387\u603b\u548c\u4e3a1\u3002\u8be5\u503c\u8d8a\u5927\uff0c\u8868\u660e\u4e3a\u8be5\u79cd\u57fa\u56e0\u578b\u7684\u53ef\u80fd\u6027\u8d8a\u5c0f\u3002Phred\u503c=-10log(P)\uff0cP\u4e3a\u57fa\u56e0\u578b\u5b58\u5728\u7684\u6982\u7387\u3002\u6700\u6709\u53ef\u80fd\u7684genotype\u7684\u503c\u4e3a0 VCF\u7b2c8\u5217\u7684\u4fe1\u606f \u7b2c8\u5217\u7684\u4fe1\u606f\u5305\u62ec18\u79cd\uff0c\u90fd\u662f\u4ee5\u201cTAG=Value\u201d\uff0c\u5e76\u4f7f\u7528\u5206\u53f7\u5206\u9694\u7684\u5f62\u5f0f\uff0c\u5176\u4e2d\u5f88\u591a\u7684\u6ce8\u91ca\u4fe1\u606f\u5728VCF\u6587\u4ef6\u7684\u5934\u90e8\u6ce8\u91ca\u4e2d\u7ed9\u51fa\uff0c\u4e0b\u9762\u5bf9\u5e38\u7528\u7684TAG\u8fdb\u884c\u89e3\u91ca: AC\uff0cAF\u548cAN AC(Allele Count) \u8868\u793a\u8be5Allele\u7684\u6570\u76ee\uff1bAF(Allele Frequency) \u8868\u793aAllele\u7684\u9891\u7387\uff1b AN(Allele Number) \u8868\u793aAllele\u7684\u603b\u6570\u76ee\u3002\u5bf9\u4e8e1\u4e2adiploid sample\u800c\u8a00\uff1a\u5219\u57fa\u56e0\u578b 0/1 \u8868\u793asample\u4e3a\u6742\u5408\u5b50\uff0cAllele\u6570\u4e3a1(\u53cc\u500d\u4f53\u7684sample\u5728\u8be5\u4f4d\u70b9\u53ea\u67091\u4e2a\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0cAllele\u7684\u9891\u7387\u4e3a0.5(\u53cc\u500d\u4f53\u7684 sample\u5728\u8be5\u4f4d\u70b9\u53ea\u670950%\u7684\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0c\u603b\u7684Allele\u4e3a2\uff1b \u57fa\u56e0\u578b 1/1 \u5219\u8868\u793asample\u4e3a\u7eaf\u5408\u7684\uff0cAllele\u6570\u4e3a2\uff0cAllele\u7684\u9891\u7387\u4e3a1\uff0c\u603b\u7684Allele\u4e3a2 DP\uff08reads\u8986\u76d6\u5ea6\uff09 \u8868\u793areads\u88ab\u8fc7\u6ee4\u540e\u7684\u8986\u76d6\u5ea6 FS FisherStrand\u7684\u7f29\u5199\uff0c\u8868\u793a\u4f7f\u7528Fisher\u2019s\u7cbe\u786e\u68c0\u9a8c\u6765\u68c0\u6d4bstrand bias\u800c\u5f97\u5230\u7684Fhred\u683c\u5f0f\u7684p\u503c\uff0c\u8be5\u503c\u8d8a\u5c0f\u8d8a\u597d\uff1b\u5982\u679c\u8be5\u503c\u8f83\u5927\uff0c\u8868\u793astrand bias\uff08\u6b63\u8d1f\u94fe\u504f\u79fb\uff09\u8d8a\u4e25\u91cd\uff0c\u5373\u6240\u68c0\u6d4b\u5230\u7684variants\u4f4d\u70b9\u4e0a\uff0creads\u6bd4\u5bf9\u5230\u6b63\u8d1f\u4e49\u94fe\u4e0a\u7684\u6bd4\u4f8b\u4e0d\u5747\u8861\u3002\u4e00\u822c\u8fdb\u884cfilter\u7684\u65f6\u5019\uff0c\u63a8\u8350\u4fdd\u7559FS<10~20\u7684variants\u4f4d\u70b9\u3002GATK\u53ef\u8bbe\u5b9aFS\u53c2\u6570\u3002 ReadPosRandSum Z-score from Wilcoxon rank sum test of Alt vs. Ref read position bias.\u5f53variants\u51fa\u73b0\u5728reads\u5c3e\u90e8\u7684\u65f6\u5019\uff0c\u5176\u7ed3\u679c\u53ef\u80fd\u4e0d\u51c6\u786e\u3002\u8be5\u503c\u7528\u4e8e\u8861\u91cfalternative allele\uff08\u53d8\u5f02\u7684\u7b49\u4f4d\u57fa\u56e0\uff09\u76f8\u6bd4\u4e8ereference allele\uff08\u53c2\u8003\u57fa\u56e0\u7ec4\u7b49\u4f4d\u57fa\u56e0\uff09\uff0c\u5176variant\u4f4d\u70b9\u662f\u5426\u5339\u914d\u5230reads\u66f4\u9760\u4e2d\u90e8\u7684\u4f4d\u7f6e\u3002\u56e0\u6b64\u53ea\u6709\u57fa\u56e0\u578b\u662f\u6742\u5408\u4e14\u6709\u4e00\u4e2aallele\u548c\u53c2\u8003\u57fa\u56e0\u7ec4\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u624d\u80fd\u8ba1\u7b97\u8be5\u503c\u3002\u82e5\u8be5\u503c\u4e3a\u6b63\u503c\uff0c\u8868\u660e\u548calternative allele\u76f8\u5f53\u4e8ereference allele\uff0c\u843d\u6765reads\u66f4\u9760\u4e2d\u90e8\u7684\u4f4d\u7f6e\uff1b\u82e5\u8be5\u503c\u662f\u8d1f\u503c\uff0c\u5219\u8868\u793aalternative allele\u76f8\u6bd4\u4e8ereference allele\u843d\u5728reads\u66f4\u9760\u5c3e\u90e8\u7684\u4f4d\u7f6e\u3002 \u8fdb\u884cfilter\u7684\u4e4b\u540e\uff0c\u63a8\u8350\u4fdd\u7559ReadPosRankSum>-1.65~-3.0\u7684variant\u4f4d\u70b9 MQRankSum \u8be5\u503c\u7528\u4e8e\u8861\u91cfalternative allele\u4e0areads\u7684mapping quality\u4e0ereference allele\u4e0areads\u7684mapping quality\u7684\u5dee\u5f02\u3002\u82e5\u8be5\u503c\u662f\u8d1f\u6570\u503c\uff0c\u5219\u8868\u660ealternative allele\u6bd4reference allele\u7684reads mapping quality\u5dee\u3002\u8fdb\u884cfilter\u7684\u65f6\u5019\uff0c\u63a8\u8350\u4fdd\u7559MQRankSum>-1.65~-3.0\u7684variant\u4f4d\u70b9\u3002","title":"08. vcf"},{"location":"tutorial/Format/08_vcf/#vcf","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} VCF\uff08Variant Calling File\uff09\u4f53\u73b0\u5e8f\u5217\u4f4d\u70b9\u53d8\u5316\uff08\u70b9\u7a81\u53d8\u3001\u5220\u9664\u3001\u7ed3\u6784\u53d8\u5316\u7b49\uff09\u7684\u6807\u51c6\u683c\u5f0f\u6587\u4ef6\u3002\u6587\u4ef6\u662f\u538b\u7f29\u5e76\u7d22\u5f15\u8fc7\u7684\u3002\u6700\u65e9\u662f\u4e3a\u4e861000\u57fa\u56e0\u7ec4\u8ba1\u5212\u800c\u8bbe\u8ba1\u7684\u3002\u53ef\u4ee5\u7528vcftools\u4ece\u57fa\u56e0\u7ec4\u6570\u636e\u4e2d\u521b\u5efa\u3002 VCF header \u533a\u57df ##fileformat=VCF4.2 \u63cf\u8ff0SNP\uff0cINDEL\u548cSV\u7ed3\u679c\u7684\u6587\u672c\u6587\u4ef6\u3002\u5728GATK\u8f6f\u4ef6\u4e2d\u5f97\u5230\u6700\u597d\u7684\u652f\u6301\uff0c\u5f53\u7136SAMtools\u5f97\u5230\u7684\u7ed3\u679c\u4e5f\u662fVCF\u683c\u5f0f\uff0c\u548cGATK\u7684VCF\u683c\u5f0f\u6709\u70b9\u5dee\u522b\u3002","title":"VCF \u683c\u5f0f\u6570\u636e\u6587\u4ef6"},{"location":"tutorial/Format/08_vcf/#vcf_1","text":"VCF\u6587\u4ef6\u5206\u4e3a\u4e24\u90e8\u5206\u5185\u5bb9\uff1a\u4ee5\u201c#\u201d\u5f00\u5934\u7684\u6ce8\u91ca\u90e8\u5206\uff1b\u6ca1\u6709\u201c#\u201d\u5f00\u5934\u7684\u4e3b\u4f53\u90e8\u5206 3.VCF\u768410\u5217\u7684\u610f\u4e49 CHROM \uff1a \u53c2\u8003\u5e8f\u5217\u540d\u79f0 POS:variant\u7684\u4f4d\u7f6e\uff1b\u5982\u679c\u662fINDEL\u7684\u8bdd\uff0c\u4f4d\u7f6e\u662fINDEL\u7684\u7b2c\u4e00\u4e2a\u78b1\u57fa\u4f4d\u7f6e ID:variant\u7684ID;\u6bd4\u5982\u5728dbSNP\u4e2d\u6709\u8be5SNP\u7684id\uff0c\u5219\u4f1a\u5728\u6b64\u884c\u7ed9\u51fa\uff1b\u82e5\u6ca1\u6709\uff0c\u5219\u7528\u2019.'\u8868\u793a\u5176\u4e3a\u4e00\u4e2anovel variant REF:\u53c2\u8003\u5e8f\u5217\u7684\u78b1\u57fa ALT:variant\u7684\u78b1\u57fa QUAL:Phred\u683c\u5f0f(Phred_scaled)\u7684\u8d28\u91cf\u503c\uff0c\u8868 \u793a\u5728\u8be5\u4f4d\u70b9\u5b58\u5728variant\u7684\u53ef\u80fd\u6027\uff1b\u8be5\u503c\u8d8a\u9ad8\uff0c\u5219variant\u7684\u53ef\u80fd\u6027\u8d8a\u5927\uff1b\u8ba1\u7b97\u65b9\u6cd5\uff1aPhred\u503c = -10 * log (1-p) p\u4e3avariant\u5b58\u5728\u7684\u6982\u7387; \u901a\u8fc7\u8ba1\u7b97\u516c\u5f0f\u53ef\u4ee5\u770b\u51fa\u503c\u4e3a10\u7684\u8868\u793a\u9519\u8bef\u6982\u7387\u4e3a0.1\uff0c\u8be5\u4f4d\u70b9\u4e3avariant\u7684\u6982\u7387\u4e3a90%,qual\u503c\u4e0ep\u6210\u6b63\u6bd4\u4f8b FILTER:\u4f7f\u7528\u4e0a\u4e00\u4e2aQUAL\u503c\u6765\u8fdb\u884c\u8fc7\u6ee4\u7684\u8bdd\uff0c\u662f\u4e0d\u591f\u7684\u3002GATK\u80fd\u4f7f\u7528\u5176\u5b83\u7684\u65b9\u6cd5\u6765\u8fdb\u884c\u8fc7\u6ee4\uff0c\u8fc7\u6ee4\u7ed3\u679c\u4e2d\u901a\u8fc7\u5219\u8be5\u503c\u4e3a\u201dPASS\u201d;\u82e5variant\u4e0d\u53ef\u9760\uff0c\u5219\u8be5\u9879\u4e0d\u4e3a\u201dPASS\u201d\u6216\u201d.\u201d\u3002 INFO:\u8fd9\u4e00\u884c\u662fvariant\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5185\u5bb9\u5f88\u591a\uff0c\u4ee5\u4e0b\u518d\u5177\u4f53\u8be6\u8ff0\u3002 FORMAT:variants\u7684\u683c\u5f0f\uff0c\u4f8b\u5982GT:AD:DP:GQ:PL SAMPLES:\u5404\u4e2aSample\u7684\u503c\uff0c\u7531BAM\u6587\u4ef6\u4e2d\u7684@RG\u4e0b\u7684SM\u6807\u7b7e\u6240\u51b3\u5b9a INFO: #DP-read depth\uff1a\u6837\u672c\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u7684reads\u8986\u76d6\u5ea6\u3002\u662f\u4e00\u4e9breads\u88ab\u8fc7\u6ee4\u6389\u540e\u7684\u8986\u76d6\u5ea6\u3002DP4:\u9ad8\u8d28\u91cf\u6d4b\u5e8f\u78b1\u57fa\uff0c\u4f4d\u4e8eREF\u6216\u8005ALT\u524d\u540e #QD\uff1a\u901a\u8fc7\u6df1\u5ea6\u6765\u8bc4\u4f30\u4e00\u4e2a\u53d8\u5f02\u7684\u53ef\u4fe1\u5ea6\u3002Variant call confidence normalized by depth of sample reads supporting a variant #MQ\uff1a\u8868\u793a\u8986\u76d6\u5e8f\u5217\u8d28\u91cf\u7684\u5747\u65b9\u503cRMS Mapping Quality #FQ\uff1aphred\u503c\u5173\u4e8e\u6240\u6709\u6837\u672c\u76f8\u4f3c\u7684\u53ef\u80fd\u6027 #AC\uff0cAF \u548c AN\uff1aAC(Allele Count) \u8868\u793a\u8be5Allele\u7684\u6570\u76ee\uff1bAF(Allele Frequency) \u8868\u793aAllele\u7684\u9891\u7387\uff1b AN(Allele Number) \u8868\u793aAllele\u7684\u603b\u6570\u76ee\u3002 \u5bf9\u4e8e1\u4e2adiploid sample\u800c\u8a00\uff1a\u5219\u57fa\u56e0\u578b 0/1 \u8868\u793asample\u4e3a\u6742\u5408\u5b50\uff0cAllele\u6570\u4e3a1(\u53cc\u500d\u4f53\u7684sample\u5728\u8be5\u4f4d\u70b9\u53ea\u67091\u4e2a\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0c Allele\u7684\u9891\u7387\u4e3a0.5(\u53cc\u500d\u4f53\u7684sample\u5728\u8be5\u4f4d\u70b9\u53ea\u670950%\u7684\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0c\u603b\u7684Allele\u4e3a2\uff1b \u57fa\u56e0\u578b 1/1 \u5219\u8868\u793asample\u4e3a\u7eaf\u5408\u7684\uff0cAllele\u6570\u4e3a2\uff0cAllele\u7684\u9891\u7387\u4e3a1\uff0c\u603b\u7684Allele\u4e3a2\u3002 #MLEAC\uff1aMaximum likelihood expectation (MLE) for the allele counts (not necessarily the same as the AC), for each ALT allele, in the same order as listed #MLEAF\uff1aMaximum likelihood expectation (MLE) for the allele frequency (not necessarily the same as the AF), for each ALT allele, in the same order as listed #BaseQRankSum \u6bd4\u8f83\u652f\u6301\u53d8\u5f02\u7684\u78b1\u57fa\u548c\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u78b1\u57fa\u7684\u8d28\u91cf\uff0c\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684\u78b1\u57fa\u8d28\u91cf\u503c\u4e0d\u53ca\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\uff0c \u6b63\u503c\u5219\u76f8\u53cd\uff0c\u652f\u6301\u53d8\u5f02\u7684\u8d28\u91cf\u503c\u597d\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u30020\u8868\u793a\u4e24\u8005\u65e0\u660e\u663e\u5dee\u5f02\u3002 #FS \u4f7f\u7528F\u68c0\u9a8c\u6765\u68c0\u9a8c\u6d4b\u5e8f\u662f\u5426\u5b58\u5728\u94fe\u504f\u597d\u6027\u3002\u94fe\u504f\u597d\u6027\u53ef\u80fd\u4f1a\u5bfc\u81f4\u53d8\u5f02\u7b49\u4f4d\u57fa\u56e0\u68c0\u6d4b\u51fa\u73b0\u9519\u8bef\u3002\u8f93\u51fa\u503cPhred-scaled p-value\uff0c\u503c\u8d8a\u5927\u8d8a\u53ef\u80fd\u51fa\u73b0\u94fe\u504f\u597d\u6027\u3002 #InbreedingCoeff \u4f7f\u7528\u4f3c\u7136\u6cd5\u68c0\u9a8c\u6837\u672c\u95f4\u7684\u8fd1\u4ea4\u7cfb\u6570\uff08\u53c8\u6216\u8005\u79f0\u4e3a\u8fd1\u4eb2\u5173\u7cfb\uff09\u3002\u503c\u8d8a\u9ad8\u8d8a\u53ef\u80fd\u662f\u8fd1\u4eb2\u7e41\u6b96\u3002 #MQRankSum \u6bd4\u8f83\u652f\u6301\u53d8\u5f02\u7684\u5e8f\u5217\u548c\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u5e8f\u5217\u7684\u8d28\u91cf\uff0c\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684\u78b1\u57fa\u8d28\u91cf\u503c\u4e0d\u53ca\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\uff0c\u53ea\u9488\u5bf9\u6742\u5408\u3002 \u6b63\u503c\u5219\u76f8\u53cd\uff0c\u652f\u6301\u53d8\u5f02\u7684\u8d28\u91cf\u503c\u597d\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u30020\u8868\u793a\u4e24\u8005\u65e0\u660e\u663e\u5dee\u5f02\u3002\u5b9e\u9645\u5e94\u7528\u4e2d\u4e00\u822c\u8fc7\u6ee4\u6389\u8f83\u5c0f\u7684\u8d1f\u503c\u3002 #BaseCounts \u6240\u6709\u6837\u672c\u5728\u53d8\u5f02\u4f4d\u70b9ATCG\u7684\u6570\u91cf #ClippingRankSum \u540c\u524d\u9762\u4e24\u4e2a\u7c7b\u4f3c\uff0c\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684read\u6709\u66f4\u7684\u7684hard-clip\u78b1\u57fa\uff0c\u6b63\u503c\u8868\u793a\u652f\u6301\u53c2\u8003\u57fa\u56e0\u7ec4\u7684\u7684read\u6709\u66f4\u591a\u7684hard-clip\u30020\u6700\u597d\uff0c\u65e0\u8bba\u662f\u6b63\u503c\u8fd8\u662f\u8d1f\u503c\u90fd\u8868\u793a\u53ef\u80fd\u53ef\u80fd\u5b58\u5728\u4eba\u4e3a\u504f\u5dee\u3002 #ReadPosRankSum \u68c0\u6d4b\u53d8\u5f02\u4f4d\u70b9\u662f\u5426\u6709\u4f4d\u7f6e\u504f\u597d\u6027\uff08\u662f\u5426\u5b58\u5728\u4e8e\u5e8f\u5217\u672b\u7aef\uff0c\u6b64\u65f6\u5f80\u5f80\u5bb9\u6613\u51fa\u9519\uff09\u3002\u6700\u4f73\u503c\u4e3a0\uff0c\u8868\u793a\u53d8\u5f02\u4e0e\u5176\u5728\u5e8f\u5217\u4e0a\u7684\u4f4d\u7f6e\u65e0\u5173\u3002\u8d1f\u503c\u8868\u793a\u53d8\u5f02\u4f4d\u70b9\u66f4\u5bb9\u6613\u5728\u672b\u7aef\u51fa\u73b0\uff0c\u6b63\u503c\u8868\u793a\u53c2\u8003\u57fa\u56e0\u7ec4\u4e2d\u7684\u7b49\u4f4d\u57fa\u56e0\u66f4\u5bb9\u6613\u5728\u672b\u7aef\u51fa\u73b0\u3002 #ExcessHet \u68c0\u6d4b\u8fd9\u4e9b\u6837\u672c\u7684\u76f8\u5173\u6027\uff0c\u4e0eInbreedingCoeff\u76f8\u4f3c\uff0c\u503c\u8d8a\u5927\u8d8a\u53ef\u80fd\u662f\u9519\u8bef\u3002 #LikelihoodRankSum \u8bc4\u4ef7\u652f\u6301\u53d8\u5f02\u548cref\u7684\u5e8f\u5217\u4e0ebest hyplotype\u7684\u5339\u914d\u6027\uff0c0\u4e3a\u6700\u4f73\u503c\u3002\u8d1f\u503c\u8868\u793a\u652f\u6301\u53d8\u5f02\u7684read\u5339\u914d\u5ea6\u4e0d\u53ca\u652f\u6301ref\u7684\u5339\u914d\u5ea6\uff0c\u6b63\u503c\u5219\u76f8\u53cd\u3002\u503c\u8d8a\u5927\u8868\u793a\u8d8a\u53ef\u80fd\u662f\u51fa\u73b0\u4e86\u9519\u8bef\u3002 #HaplotypeScore \u5206\u6570\u8d8a\u9ad8\u8d8a\u53ef\u80fd\u51fa\u73b0\u9519\u8bef\u3002Higher scores are indicative of regions with bad alignments, typically leading to artifactual SNP and indel calls. #SOR\uff1a\u4e5f\u662f\u4e00\u4e2a\u7528\u6765\u8bc4\u4f30\u662f\u5426\u5b58\u5728\u94fe\u504f\u5411\u6027\u7684\u53c2\u6570\uff0c\u76f8\u5f53\u4e8eFS\u7684\u5347\u7ea7\u7248\u3002The StrandOddsRatio annotation is one of several methods that aims to evaluate whether there is strand bias in the data. It is an updated form of the Fisher Strand Test that is better at taking into account large amounts of data in high coverage situations. It is used to determine if there is strand bias between forward and reverse strands for the reference or alternate allele. The reported value is ln-scaled. #IS\uff1a\u63d2\u5165\u7f3a\u5931\u6216\u90e8\u5206\u63d2\u5165\u7f3a\u5931\u7684reads\u5141\u8bb8\u7684\u6700\u5927\u6570\u91cf #G3\uff1aML \u8bc4\u4f30\u57fa\u56e0\u578b\u51fa\u73b0\u7684\u9891\u7387 #HWE\uff1achi^2\u57fa\u4e8eHWE\u7684\u6d4b\u8bd5p\u503c\u548cG3 #CLR\uff1a\u5728\u53d7\u5230\u6216\u8005\u4e0d\u53d7\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u57fa\u56e0\u578b\u51fa\u73b0\u53ef\u80fd\u6027log\u503c #UGT\uff1a\u6700\u53ef\u80fd\u4e0d\u53d7\u9650\u5236\u7684\u4e09\u79cd\u57fa\u56e0\u578b\u7ed3\u6784 #CGT\uff1a\u6700\u53ef\u80fd\u53d7\u9650\u5236\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u7ed3\u6784 #PV4\uff1a\u56db\u79cdP\u503c\u5f97\u8bef\u5dee\uff0c\u5206\u522b\u662f\uff08strand\u3001baseQ\u3001mapQ\u3001tail distance bias\uff09 #INDEL\uff1a\u8868\u793a\u8be5\u4f4d\u7f6e\u7684\u53d8\u5f02\u662f\u63d2\u5165\u7f3a\u5931 #PC2\uff1a\u975e\u53c2\u8003\u7b49\u4f4d\u57fa\u56e0\u7684phred\uff08\u53d8\u5f02\u7684\u53ef\u80fd\u6027\uff09\u503c\u5728\u4e24\u4e2a\u5206\u7ec4\u4e2d\u5927\u5c0f\u4e0d\u540c #PCHI2\uff1a\u540e\u52a0\u6743chi^2\uff0c\u6839\u636ep\u503c\u6765\u6d4b\u8bd5\u4e24\u7ec4\u6837\u672c\u4e4b\u95f4\u7684\u8054\u7cfb #QCHI2\uff1aPhred scaled PCHI2 #PR\uff1a\u7f6e\u6362\u4ea7\u751f\u7684\u4e00\u4e2a\u8f83\u5c0f\u7684PCHI2 #QBD\uff1aQuality by Depth\uff0c\u6d4b\u5e8f\u6df1\u5ea6\u5bf9\u8d28\u91cf\u7684\u5f71\u54cd #RPB\uff1a\u5e8f\u5217\u7684\u8bef\u5dee\u4f4d\u7f6e\uff08Read Position Bias\uff09 #MDV\uff1a\u6837\u672c\u4e2d\u9ad8\u8d28\u91cf\u975e\u53c2\u8003\u5e8f\u5217\u7684\u6700\u5927\u6570\u76ee #VDB\uff1aVariant Distance Bias\uff0cRNA\u5e8f\u5217\u4e2d\u8fc7\u6ee4\u4eba\u5de5\u62fc\u63a5\u5e8f\u5217\u7684\u53d8\u5f02\u8bef\u5dee\u8303\u56f4 FORMAT: #AD \u548c DP\uff1aAD(Allele Depth)\u4e3asample\u4e2d\u6bcf\u4e00\u79cdallele\u7684reads\u8986\u76d6\u5ea6,\u5728diploid\u4e2d\u5219\u662f\u7528\u9017\u53f7\u5206\u5272\u7684\u4e24\u4e2a\u503c\uff0c \u524d\u8005\u5bf9\u5e94ref\u57fa\u56e0\u578b\uff0c\u540e\u8005\u5bf9\u5e94variant\u57fa\u56e0\u578b\uff1b DP\uff08Depth\uff09\u4e3asample\u4e2d\u8be5\u4f4d\u70b9\u7684\u8986\u76d6\u5ea6\u3002 #GT\uff1a\u6837\u54c1\u7684\u57fa\u56e0\u578b\uff08genotype\uff09\u3002\u4e24\u4e2a\u6570\u5b57\u4e2d\u95f4\u7528\u2019/'\u5206 \u5f00\uff0c\u8fd9\u4e24\u4e2a\u6570\u5b57\u8868\u793a\u53cc\u500d\u4f53\u7684sample\u7684\u57fa\u56e0\u578b\u30020 \u8868\u793a\u6837\u54c1\u4e2d\u6709ref\u7684allele\uff1b 1\u8868\u793a\u6837\u54c1\u4e2dvariant\u7684allele\uff1b 2\u8868\u793a\u6709\u7b2c\u4e8c\u4e2avariant\u7684allele\u3002\u56e0\u6b64\uff1a 0/0 \u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u7684\uff0c\u548cref\u4e00\u81f4\uff1b 0/1 \u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u6742\u5408\u7684\uff0c\u6709ref\u548cvariant\u4e24\u4e2a\u57fa\u56e0\u578b\uff1b 1/1 \u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u7684\uff0c\u548cvariant\u4e00\u81f4\u3002 #GQ\uff1a\u5373\u7b2c\u4e8c\u53ef\u80fd\u7684\u57fa\u56e0\u578b\u7684PL\u503c\uff0c\u76f8\u5bf9\u4e8e\u6700\u53ef\u80fd\u57fa\u56e0\u578b\u7684PL\u503c\uff08\u5176PL=0\uff09\u800c\u8a00\uff0c\u5927\u4e8e99\u65f6\uff0c\u5176\u4fe1\u606f\u91cf\u5df2\u4e0d\u5927\uff0c\u56e0\u6b64\u5927\u4e8e99\u7684\u5168\u90e8\u8d4b\u503c99\u3002\u5f53GQ\u503c\u5f88\u5c0f\u65f6\uff0c\u610f\u5473\u7740\u7b2c\u4e8c\u53ef\u80fd\u57fa\u56e0\u578b\u4e0e\u6700\u53ef\u80fd\u57fa\u56e0\u578b\u5dee\u522b\u4e0d\u5927\u3002 #GL\uff1a\u4e09\u79cd\u57fa\u56e0\u578b\uff08RR RA AA\uff09\u51fa\u73b0\u7684\u53ef\u80fd\u6027\uff0cR\u8868\u793a\u53c2\u8003\u78b1\u57fa\uff0cA\u8868\u793a\u53d8\u5f02\u78b1\u57fa #DV\uff1a\u9ad8\u8d28\u91cf\u7684\u975e\u53c2\u8003\u78b1\u57fa #SP\uff1aphred\u7684p\u503c\u8bef\u5dee\u7ebf #PL\uff1a\u6307\u5b9a\u7684\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u53ef\u80fd\u6027(provieds the likelihoods of the given genotypes)\u3002\u8fd9\u4e09\u79cd\u6307\u5b9a\u7684\u57fa\u56e0\u578b\u4e3a(0/0,0/1,1/1)\uff0c\u8fd9\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u6982\u7387\u603b\u548c\u4e3a1\u3002 \u548c\u4e4b\u524d\u4e0d\u4e00\u81f4\uff0c\u8be5\u503c\u8d8a\u5927\uff0c\u8868\u660e\u4e3a\u8be5\u79cd\u57fa\u56e0\u578b\u7684\u53ef\u80fd\u6027\u8d8a\u5c0f\u3002 Phred\u503c = -10 * log (p) p\u4e3a\u57fa\u56e0\u578b\u5b58\u5728\u7684\u6982\u7387\u3002 4.vcf\u6587\u4ef6\u7684\u57fa\u56e0\u578b\u4fe1\u606f GT:\u6837\u54c1\u7684\u57fa\u56e0\u578b\uff08genotype\uff09\u3002\u4e24\u4e2a\u6570\u5b57\u4e2d\u95f4\u7528\u2019/'\u5206 \u5f00\uff0c\u8fd9\u4e24\u4e2a\u6570\u5b57\u8868\u793a\u53cc\u500d\u4f53\u7684sample\u7684\u57fa\u56e0\u578b\u30020 \u8868\u793a\u6837\u54c1\u4e2d\u6709ref\u7684allele\uff1b 1 \u8868\u793a\u6837\u54c1\u4e2dvariant\u7684allele\uff1b 2\u8868\u793a\u6709\u7b2c\u4e8c\u4e2avariant\u7684allele\u3002\u6240\u4ee5\uff1a 0/0\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u4f4d\u70b9\uff0c\u548cREF\u7684\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4 0/1\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u6742\u5408\u7a81\u53d8\uff0c\u6709REF\u548cALT\u4e24\u4e2a\u57fa\u56e0\u578b\uff08\u90e8\u5206\u78b1\u57fa\u548cREF\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff0c\u90e8\u5206\u78b1\u57fa\u548cALT\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff09 1/1\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u7eaf\u5408\u7a81\u53d8\uff0c\u603b\u4f53\u7a81\u53d8\u7c7b\u578b\u548cALT\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4 \u00bd\u8868\u793asample\u4e2d\u8be5\u4f4d\u70b9\u4e3a\u6742\u5408\u7a81\u53d8\uff0c\u6709ALT1\u548cALT2\u4e24\u4e2a\u57fa\u56e0\u578b\uff08\u90e8\u5206\u548cALT1\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff0c\u90e8\u5206\u548cALT2\u78b1\u57fa\u7c7b\u578b\u4e00\u81f4\uff09 AD\u548cDP:AD(Allele Depth)\u4e3asample\u4e2d\u6bcf\u4e00\u79cdallele\u7684reads\u8986\u76d6\u5ea6,\u5728diploid\uff08\u4e8c\u500d\u4f53\uff0c\u6216\u53ef\u6307\u4ee3\u591a\u500d\u578b\uff09\u4e2d\u5219\u662f\u7528\u9017\u53f7\u5206\u9694\u7684\u4e24\u4e2a\u503c\uff0c\u524d\u8005\u5bf9\u5e94REF\u57fa\u56e0\uff0c\u540e\u8005\u5bf9\u5e94ALT\u57fa\u56e0\u578b DP(Depth)\u4e3asample\u4e2d\u8be5\u4f4d\u70b9\u7684\u8986\u76d6\u5ea6\uff0c\u662f\u6240\u652f\u6301\u7684\u4e24\u4e2aAD\u503c\uff08\u9017\u53f7\u524d\u548c\u9017\u53f7\u540e\uff09\u7684\u52a0\u548c \u4f8b\u5982\uff1a 1/1:0,175:175\u2014GT:AD(REF),AD(ALT):DP 0/1:79,96:175 \u00bd:0,20,56:76 \u8fd9\u91cc\u7684\u4e09\u79cd\u7c7b\u578b\u5bf9\u5e94\u7684DP\u503c\u5747\u662f\u5176\u5bf9\u5e94\u7684AD\u503c\u7684\u52a0\u548c\uff0c1/1\u7684175\u662f0+175\uff0c0/1\u7684175\u662f79+96\uff0c\u00bd\u768476\u662f0+20+56 GQ:\u57fa\u56e0\u578b\u7684\u8d28\u91cf\u503c\uff08Genotype Quality\uff09\u3002Phred\u683c\u5f0f\uff08Phred_scaled\uff09\u7684\u8d28\u91cf\u503c\uff0c\u8868\u793a\u5728\u8be5\u4f4d\u70b9\u8be5\u57fa\u56e0\u578b\u5b58\u5728\u7684\u53ef\u80fd\u6027\uff1b\u8be5\u503c\u8d8a\u9ad8\uff0c\u5219Genotype\u7684\u53ef\u80fd\u6027\u8d8a\u5927\uff1b\u8ba1\u7b97\u65b9\u6cd5\uff1aPhred\u503c=-10log(1-P)\uff0cP\u4e3a\u57fa\u56e0\u578b\u5b58\u5728\u7684\u6982\u7387\u3002\uff08\u4e00\u822c\u5728final.snp.vcf\u6587\u4ef6\u4e2d\uff0c\u8be5\u503c\u4e3a99\uff0c\u4e3a99\u65f6\uff0c\u5176\u53ef\u80fd\u6027\u6700\u5927\uff09 PL:\u6307\u5b9a\u7684\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u8d28\u91cf\u503c\uff08provieds the likelihoods of the given genotypes\uff09\uff1b\u8fd9\u4e09\u79cd\u6307\u5b9a\u7684\u57fa\u56e0\u578b\u4e3a\uff080/0\uff0c0/1\uff0c1/1\uff09\uff0c\u8fd9\u4e09\u79cd\u57fa\u56e0\u578b\u7684\u6982\u7387\u603b\u548c\u4e3a1\u3002\u8be5\u503c\u8d8a\u5927\uff0c\u8868\u660e\u4e3a\u8be5\u79cd\u57fa\u56e0\u578b\u7684\u53ef\u80fd\u6027\u8d8a\u5c0f\u3002Phred\u503c=-10log(P)\uff0cP\u4e3a\u57fa\u56e0\u578b\u5b58\u5728\u7684\u6982\u7387\u3002\u6700\u6709\u53ef\u80fd\u7684genotype\u7684\u503c\u4e3a0 VCF\u7b2c8\u5217\u7684\u4fe1\u606f \u7b2c8\u5217\u7684\u4fe1\u606f\u5305\u62ec18\u79cd\uff0c\u90fd\u662f\u4ee5\u201cTAG=Value\u201d\uff0c\u5e76\u4f7f\u7528\u5206\u53f7\u5206\u9694\u7684\u5f62\u5f0f\uff0c\u5176\u4e2d\u5f88\u591a\u7684\u6ce8\u91ca\u4fe1\u606f\u5728VCF\u6587\u4ef6\u7684\u5934\u90e8\u6ce8\u91ca\u4e2d\u7ed9\u51fa\uff0c\u4e0b\u9762\u5bf9\u5e38\u7528\u7684TAG\u8fdb\u884c\u89e3\u91ca: AC\uff0cAF\u548cAN AC(Allele Count) \u8868\u793a\u8be5Allele\u7684\u6570\u76ee\uff1bAF(Allele Frequency) \u8868\u793aAllele\u7684\u9891\u7387\uff1b AN(Allele Number) \u8868\u793aAllele\u7684\u603b\u6570\u76ee\u3002\u5bf9\u4e8e1\u4e2adiploid sample\u800c\u8a00\uff1a\u5219\u57fa\u56e0\u578b 0/1 \u8868\u793asample\u4e3a\u6742\u5408\u5b50\uff0cAllele\u6570\u4e3a1(\u53cc\u500d\u4f53\u7684sample\u5728\u8be5\u4f4d\u70b9\u53ea\u67091\u4e2a\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0cAllele\u7684\u9891\u7387\u4e3a0.5(\u53cc\u500d\u4f53\u7684 sample\u5728\u8be5\u4f4d\u70b9\u53ea\u670950%\u7684\u7b49\u4f4d\u57fa\u56e0\u53d1\u751f\u4e86\u7a81\u53d8)\uff0c\u603b\u7684Allele\u4e3a2\uff1b \u57fa\u56e0\u578b 1/1 \u5219\u8868\u793asample\u4e3a\u7eaf\u5408\u7684\uff0cAllele\u6570\u4e3a2\uff0cAllele\u7684\u9891\u7387\u4e3a1\uff0c\u603b\u7684Allele\u4e3a2 DP\uff08reads\u8986\u76d6\u5ea6\uff09 \u8868\u793areads\u88ab\u8fc7\u6ee4\u540e\u7684\u8986\u76d6\u5ea6 FS FisherStrand\u7684\u7f29\u5199\uff0c\u8868\u793a\u4f7f\u7528Fisher\u2019s\u7cbe\u786e\u68c0\u9a8c\u6765\u68c0\u6d4bstrand bias\u800c\u5f97\u5230\u7684Fhred\u683c\u5f0f\u7684p\u503c\uff0c\u8be5\u503c\u8d8a\u5c0f\u8d8a\u597d\uff1b\u5982\u679c\u8be5\u503c\u8f83\u5927\uff0c\u8868\u793astrand bias\uff08\u6b63\u8d1f\u94fe\u504f\u79fb\uff09\u8d8a\u4e25\u91cd\uff0c\u5373\u6240\u68c0\u6d4b\u5230\u7684variants\u4f4d\u70b9\u4e0a\uff0creads\u6bd4\u5bf9\u5230\u6b63\u8d1f\u4e49\u94fe\u4e0a\u7684\u6bd4\u4f8b\u4e0d\u5747\u8861\u3002\u4e00\u822c\u8fdb\u884cfilter\u7684\u65f6\u5019\uff0c\u63a8\u8350\u4fdd\u7559FS<10~20\u7684variants\u4f4d\u70b9\u3002GATK\u53ef\u8bbe\u5b9aFS\u53c2\u6570\u3002 ReadPosRandSum Z-score from Wilcoxon rank sum test of Alt vs. Ref read position bias.\u5f53variants\u51fa\u73b0\u5728reads\u5c3e\u90e8\u7684\u65f6\u5019\uff0c\u5176\u7ed3\u679c\u53ef\u80fd\u4e0d\u51c6\u786e\u3002\u8be5\u503c\u7528\u4e8e\u8861\u91cfalternative allele\uff08\u53d8\u5f02\u7684\u7b49\u4f4d\u57fa\u56e0\uff09\u76f8\u6bd4\u4e8ereference allele\uff08\u53c2\u8003\u57fa\u56e0\u7ec4\u7b49\u4f4d\u57fa\u56e0\uff09\uff0c\u5176variant\u4f4d\u70b9\u662f\u5426\u5339\u914d\u5230reads\u66f4\u9760\u4e2d\u90e8\u7684\u4f4d\u7f6e\u3002\u56e0\u6b64\u53ea\u6709\u57fa\u56e0\u578b\u662f\u6742\u5408\u4e14\u6709\u4e00\u4e2aallele\u548c\u53c2\u8003\u57fa\u56e0\u7ec4\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u624d\u80fd\u8ba1\u7b97\u8be5\u503c\u3002\u82e5\u8be5\u503c\u4e3a\u6b63\u503c\uff0c\u8868\u660e\u548calternative allele\u76f8\u5f53\u4e8ereference allele\uff0c\u843d\u6765reads\u66f4\u9760\u4e2d\u90e8\u7684\u4f4d\u7f6e\uff1b\u82e5\u8be5\u503c\u662f\u8d1f\u503c\uff0c\u5219\u8868\u793aalternative allele\u76f8\u6bd4\u4e8ereference allele\u843d\u5728reads\u66f4\u9760\u5c3e\u90e8\u7684\u4f4d\u7f6e\u3002 \u8fdb\u884cfilter\u7684\u4e4b\u540e\uff0c\u63a8\u8350\u4fdd\u7559ReadPosRankSum>-1.65~-3.0\u7684variant\u4f4d\u70b9 MQRankSum \u8be5\u503c\u7528\u4e8e\u8861\u91cfalternative allele\u4e0areads\u7684mapping quality\u4e0ereference allele\u4e0areads\u7684mapping quality\u7684\u5dee\u5f02\u3002\u82e5\u8be5\u503c\u662f\u8d1f\u6570\u503c\uff0c\u5219\u8868\u660ealternative allele\u6bd4reference allele\u7684reads mapping quality\u5dee\u3002\u8fdb\u884cfilter\u7684\u65f6\u5019\uff0c\u63a8\u8350\u4fdd\u7559MQRankSum>-1.65~-3.0\u7684variant\u4f4d\u70b9\u3002","title":"VCF\u7684\u4e3b\u4f53\u7ed3\u6784"},{"location":"tutorial/Format/09_gff/","text":"GFF \u683c\u5f0f\u6570\u636e \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} GFF\uff08General Feature Format\uff0c\u901a\u7528\u7279\u5f81\u683c\u5f0f\uff09\u57fa\u4e8eSanger GFF2\u89c4\u8303\u3002 GFF\u683c\u5f0f\u5185\u6709\u4e5d\u4e2a\u5fc5\u586b\u5b57\u6bb5\uff0c\u5fc5\u987b\u4ee5\u5236\u8868\u7b26\u5206\u9694\u3002 \u5982\u679c\u5b57\u6bb5\u7531\u7a7a\u683c\u800c\u4e0d\u662f\u5236\u8868\u7b26\u5206\u9694\uff0c\u5219\u8f68\u9053\u5c06\u65e0\u6cd5\u6b63\u786e\u663e\u793a\u3002 \u6709\u5173GFF\u683c\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605Sanger\u7684 GFF\u9875\u9762 \u3002 GFF\u683c\u5f0f\u5b57\u6bb5\uff1a seqname - \u5e8f\u5217\u7684\u540d\u79f0\u3002 source - \u751f\u6210\u6570\u636e\u7684\u7a0b\u5e8f\u3002 feature - \u6b64\u7c7b\u529f\u80fd\u7684\u540d\u79f0\u3002 CDS start_codon stop_codon exon start - \u5e8f\u5217\u4e2d\u8981\u7d20\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\u7b2c\u4e00\u4e2a\u57fa\u6570\u7f16\u53f7\u4e3a1\u3002 end - \u8981\u7d20\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002\u5e8f\u5217\u957f\u5ea6100bp\uff0c\u5219\u7ed3\u675f\u4f4d\u7f6e\u662f100\u3002 score - \u5f97\u5206\u57280\u52301000\u4e4b\u95f4\u3002\u5982\u679c\u6b64\u6ce8\u91ca\u6570\u636e\u96c6\u7684\u8f68\u8ff9\u7ebfuseScore\u5c5e\u6027\u8bbe\u7f6e\u4e3a1\uff0c\u5219\u5f97\u5206\u503c\u5c06\u786e\u5b9a\u663e\u793a\u6b64\u8981\u7d20\u7684\u7070\u5ea6\u7ea7\u522b\uff08\u8f83\u9ad8\u7684\u6570\u5b57=\u8f83\u6df1\u7684\u7070\u8272\uff09\u3002\u5982\u679c\u6ca1\u6709\u5f97\u5206\u503c\uff0c\u8bf7\u8f93\u5165 . strand - + \uff0c - \u6216 . frame - \u5982\u679c\u662f\u7f16\u7801\u5916\u663e\u5b50/\u57fa\u56e0\uff0c\u5219\u5e94\u4e3a0-2\u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u8868\u793a\u7b2c\u4e00\u4e2a\u78b1\u57fa\u7684\u8bfb\u6570\u5e27\u3002\u5982\u679c\u8be5\u7279\u5f81\u4e0d\u662f\u7f16\u7801\u5916\u663e\u5b50\uff0c\u5219\u8be5\u503c\u5e94\u4e3a\u201c\u3002\u201d\u3002 group - \u5177\u6709\u76f8\u540c\u7ec4\u7684\u6240\u6709\u884c\u90fd\u94fe\u63a5\u5728\u4e00\u8d77\u6210\u4e3a\u4e00\u4e2a\u9879\u76ee\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a prokka \u6ce8\u91ca\u751f\u6210\u7684gff\u90e8\u5206 chr22 TeleGene enhancer 10000000 10001000 500 + . touch1 chr22 TeleGene promoter 10010000 10010100 900 + . touch1 chr22 TeleGene promoter 10020000 10025000 800 - . touch2","title":"09. gff"},{"location":"tutorial/Format/09_gff/#gff","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} GFF\uff08General Feature Format\uff0c\u901a\u7528\u7279\u5f81\u683c\u5f0f\uff09\u57fa\u4e8eSanger GFF2\u89c4\u8303\u3002 GFF\u683c\u5f0f\u5185\u6709\u4e5d\u4e2a\u5fc5\u586b\u5b57\u6bb5\uff0c\u5fc5\u987b\u4ee5\u5236\u8868\u7b26\u5206\u9694\u3002 \u5982\u679c\u5b57\u6bb5\u7531\u7a7a\u683c\u800c\u4e0d\u662f\u5236\u8868\u7b26\u5206\u9694\uff0c\u5219\u8f68\u9053\u5c06\u65e0\u6cd5\u6b63\u786e\u663e\u793a\u3002 \u6709\u5173GFF\u683c\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605Sanger\u7684 GFF\u9875\u9762 \u3002 GFF\u683c\u5f0f\u5b57\u6bb5\uff1a seqname - \u5e8f\u5217\u7684\u540d\u79f0\u3002 source - \u751f\u6210\u6570\u636e\u7684\u7a0b\u5e8f\u3002 feature - \u6b64\u7c7b\u529f\u80fd\u7684\u540d\u79f0\u3002 CDS start_codon stop_codon exon start - \u5e8f\u5217\u4e2d\u8981\u7d20\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\u7b2c\u4e00\u4e2a\u57fa\u6570\u7f16\u53f7\u4e3a1\u3002 end - \u8981\u7d20\u7684\u7ed3\u675f\u4f4d\u7f6e\u3002\u5e8f\u5217\u957f\u5ea6100bp\uff0c\u5219\u7ed3\u675f\u4f4d\u7f6e\u662f100\u3002 score - \u5f97\u5206\u57280\u52301000\u4e4b\u95f4\u3002\u5982\u679c\u6b64\u6ce8\u91ca\u6570\u636e\u96c6\u7684\u8f68\u8ff9\u7ebfuseScore\u5c5e\u6027\u8bbe\u7f6e\u4e3a1\uff0c\u5219\u5f97\u5206\u503c\u5c06\u786e\u5b9a\u663e\u793a\u6b64\u8981\u7d20\u7684\u7070\u5ea6\u7ea7\u522b\uff08\u8f83\u9ad8\u7684\u6570\u5b57=\u8f83\u6df1\u7684\u7070\u8272\uff09\u3002\u5982\u679c\u6ca1\u6709\u5f97\u5206\u503c\uff0c\u8bf7\u8f93\u5165 . strand - + \uff0c - \u6216 . frame - \u5982\u679c\u662f\u7f16\u7801\u5916\u663e\u5b50/\u57fa\u56e0\uff0c\u5219\u5e94\u4e3a0-2\u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u8868\u793a\u7b2c\u4e00\u4e2a\u78b1\u57fa\u7684\u8bfb\u6570\u5e27\u3002\u5982\u679c\u8be5\u7279\u5f81\u4e0d\u662f\u7f16\u7801\u5916\u663e\u5b50\uff0c\u5219\u8be5\u503c\u5e94\u4e3a\u201c\u3002\u201d\u3002 group - \u5177\u6709\u76f8\u540c\u7ec4\u7684\u6240\u6709\u884c\u90fd\u94fe\u63a5\u5728\u4e00\u8d77\u6210\u4e3a\u4e00\u4e2a\u9879\u76ee\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a prokka \u6ce8\u91ca\u751f\u6210\u7684gff\u90e8\u5206 chr22 TeleGene enhancer 10000000 10001000 500 + . touch1 chr22 TeleGene promoter 10010000 10010100 900 + . touch1 chr22 TeleGene promoter 10020000 10025000 800 - . touch2","title":"GFF \u683c\u5f0f\u6570\u636e"},{"location":"tutorial/Format/10_cram/","text":"CRAM \u6570\u636e\u683c\u5f0f \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} CRAM\u6587\u4ef6\u683c\u5f0f\u662f\u4e00\u79cd\u66f4\u5bc6\u96c6\u7684BAM\u6587\u4ef6\u5f62\u5f0f\uff0c\u5177\u6709\u8282\u7701\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4\u7684\u4f18\u70b9\u3002 \u867d\u7136BAM\u6587\u4ef6\u5305\u542b\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5e8f\u5217\u6570\u636e\uff0c\u4f46CRAM\u6587\u4ef6\u901a\u8fc7\u5229\u7528\u989d\u5916\u7684\u5916\u90e8 Ref - \u53c2\u8003\u5e8f\u5217\u6587\u4ef6\u800c\u53d8\u5c0f\u3002 \u538b\u7f29\u548c\u89e3\u538b\u7f29\u8bfb\u53d6\u4fe1\u606f\u90fd\u9700\u8981\u6b64\u6587\u4ef6\u3002 CRAM\u6570\u636e\u4e3b\u8981\u7528\u4e8e\u4eba\u7b49\u9ad8\u7b49\u751f\u7269\u6570\u636e\u50a8\u5b58\uff0c\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6bd4\u8f83\u5c0f\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u50a8\u5b58\u4e3aCRAM\u683c\u5f0f\u3002\u67e5\u770b \u6b64\u5904 \u83b7\u53d6\u6709\u5173CRAM\u683c\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\u3002","title":"10. cram"},{"location":"tutorial/Format/10_cram/#cram","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} CRAM\u6587\u4ef6\u683c\u5f0f\u662f\u4e00\u79cd\u66f4\u5bc6\u96c6\u7684BAM\u6587\u4ef6\u5f62\u5f0f\uff0c\u5177\u6709\u8282\u7701\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4\u7684\u4f18\u70b9\u3002 \u867d\u7136BAM\u6587\u4ef6\u5305\u542b\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5e8f\u5217\u6570\u636e\uff0c\u4f46CRAM\u6587\u4ef6\u901a\u8fc7\u5229\u7528\u989d\u5916\u7684\u5916\u90e8 Ref - \u53c2\u8003\u5e8f\u5217\u6587\u4ef6\u800c\u53d8\u5c0f\u3002 \u538b\u7f29\u548c\u89e3\u538b\u7f29\u8bfb\u53d6\u4fe1\u606f\u90fd\u9700\u8981\u6b64\u6587\u4ef6\u3002 CRAM\u6570\u636e\u4e3b\u8981\u7528\u4e8e\u4eba\u7b49\u9ad8\u7b49\u751f\u7269\u6570\u636e\u50a8\u5b58\uff0c\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6bd4\u8f83\u5c0f\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u50a8\u5b58\u4e3aCRAM\u683c\u5f0f\u3002\u67e5\u770b \u6b64\u5904 \u83b7\u53d6\u6709\u5173CRAM\u683c\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\u3002","title":"CRAM \u6570\u636e\u683c\u5f0f"},{"location":"tutorial/Format/19_ig/","text":"IG format \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} A sequence file in IG format can contain several sequences, each consisting of a number of comment lines that must begin with a semicolon (\";\"), a line with the sequence name (it may not contain spaces!) and the sequence itself terminated with the termination character '1' for linear or '2' for circular sequences. An example sequence in IG format is: ; comment ; comment AB000263 ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCC CCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGC CTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGG AAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCC CTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAG TTTAATTACAGACCTGAA1","title":"IG format"},{"location":"tutorial/Format/19_ig/#ig-format","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} A sequence file in IG format can contain several sequences, each consisting of a number of comment lines that must begin with a semicolon (\";\"), a line with the sequence name (it may not contain spaces!) and the sequence itself terminated with the termination character '1' for linear or '2' for circular sequences. An example sequence in IG format is: ; comment ; comment AB000263 ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCC CCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGC CTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGG AAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCC CTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAG TTTAATTACAGACCTGAA1","title":"IG format"},{"location":"tutorial/Format/20_other/","text":"Other Format \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} Genomatix annotation syntax \u00b6 Some Genomatix tools, e.g. Gene2Promoter or GPD allow the extraction of sequences. Genomatix uses the following syntax to annotate sequence information: each information item is denoted by a keyword, followed by a \"=\" and the value. These information items are separated by a pipe symbol \"|\". The keywords are the following: keyword meaning loc The Genomatix Locus Id, consisting of the string \"GXL_\" followed by a number. sym The gene symbol. This can be a (comma-separated) list. geneid The NCBI Gene Id. This can be a (comma-separated) list. acc A unique identifier for the sequence. E.g. for Genomatix promoter regions, the Genomatix Promoter Id is listed in this field. taxid The organism's Taxon Id spec The organism name chr The chromosome within the organism. ctg The NCBI contig within the chromosome. str Strand, (+) for sense, (-) for antisense strand. start Start position of the sequence (relative to the contig). end End position of the sequence (relative to the contig). len Length of the sequence in basepairs. tss A (comma-separated list of) UTR-start/TSS position(s). If there are several TSS/UTR-starts, this means that several transcripts share the same promoter (e.g. when they are splice variants). The positions are relative to the promoter region. probe A (comma-separated list of) Affymetrix Probe Id(s). unigene A (comma-separated list of) UniGene Cluster Id(s). homgroup An identifier (a number) for the homology group (available for promoter sequences only). Orthologously related sequences have the same value in this field. promset If the sequence is a promoter region, the promoter set is denoted here. descr The gene description. If several genes (i.e. NCBI gene ids) are associated with the sequence, the descriptions for all of the genes are note, separated by \";\" comm A comment field, used for additional annotation. For promoter sequences, this field contains information about the transcripts associated with the promoter. For each transcript the Genomatix Transcript Id, accession number, TSS position and quality is listed, separated by \"/\". For Genomatix CompGen promoters no transcripts are assigned, in this case the string \"CompGen promoter\" is denoted. This syntax is currently used only for sequences in the FASTA and GenBank formats. Example (a promoter sequence in GenBank format): LOCUS GXP_170357 743 bp DNA DEFINITION loc=GXL_141619|sym=TPH2|geneid=121278|acc=GXP_170357| taxid=9606|spec=Homo sapiens|chr=12|ctg=NC_000012|str=(+)| start=70618393|end=70619135|len=743|tss=501,632| homgroup=4612|promset=1|descr=tryptophan hydroxylase 2| comm=GXT_2756574/AK094614/632/gold; GXT_2799672/NM_173353/501/bronze ACCESSION GXP_170357 BASE COUNT 216 a 180 c 147 g 200 t ORIGIN 1 TTGATTACCT TATTTGATCA TTACACATTG TACGCTTGTG TCAAAATATC ACATGTGCCT 61 TATAAATGTG TACAACTATT AGTTATCCAT AAAAATTAAA AATTAAAAAA TCCGTAAAAT 121 GGTTTAAGCA TTCAGCAGTG CTGATCTTTC TTAAATTATT TTTCTAATTT TGGAAAGAAA 181 GCACAAAATC TTTGAATTCA CAATTGCTTA AAGACTGAGG TTAACTTGCC AGTGGCAGGC 241 TTGAGAGATG AGAGAACTAA CGTCAGAGGA TAGATGGTTT CTTGTACAAA TAACACCCCC 301 TTATGTATTG TTCTCCACCA CCCCCGCCCA AAAAGCTACT CGACCTATGA AACAAATCAC 361 ACTATGAGCA CAGATAACCC CAGGCTTCAG GTCTGTAATC TGACTGTGGC CATCGGCAAC 421 CAGAAATGAG TTTCTTTCTA ATCAGTCTTG CATCAGTCTC CAGTCATTCA TATAAAGGAG 481 CCCGGGGATG GGAGGATTCG CATTGCTCTT CAGCACCAGG GTTCTGGACA GCGCCCCAAG 541 CAGGCAGCTG ATCGCACGCC CCTTCCTCTC AATCTCCGCC AGCGCTGCTA CTGCCCCTCT 601 AGTACCCCCT GCTGCAGAGA AAGAATATTA CACCGGGATC CATGCAGCCA GCAATGATGA 661 TGTTTTCCAG TAAATACTGG GCACGGAGAG GGTTTTCCCT GGATTCAGCA GTGCCCGAAG 721 AGCATCAGCT ACTTGGCAGC TCA // IUPAC nucleic acid codes \u00b6 To represent ambiguity in DNA sequences the following letters can be used (following the rules of the International Union of Pure and Applied Chemistry (IUPAC)): A = adenine C = cytosine G = guanine T = thymine U = uracil R = G A (purine) Y = T C (pyrimidine) K = G T (keto) M = A C (amino) S = G C W = A T B = G T C D = G A T H = A C T V = G C A N = A G C T (any)","title":"Other Format"},{"location":"tutorial/Format/20_other/#other-format","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }}","title":"Other Format"},{"location":"tutorial/Format/20_other/#genomatix-annotation-syntax","text":"Some Genomatix tools, e.g. Gene2Promoter or GPD allow the extraction of sequences. Genomatix uses the following syntax to annotate sequence information: each information item is denoted by a keyword, followed by a \"=\" and the value. These information items are separated by a pipe symbol \"|\". The keywords are the following: keyword meaning loc The Genomatix Locus Id, consisting of the string \"GXL_\" followed by a number. sym The gene symbol. This can be a (comma-separated) list. geneid The NCBI Gene Id. This can be a (comma-separated) list. acc A unique identifier for the sequence. E.g. for Genomatix promoter regions, the Genomatix Promoter Id is listed in this field. taxid The organism's Taxon Id spec The organism name chr The chromosome within the organism. ctg The NCBI contig within the chromosome. str Strand, (+) for sense, (-) for antisense strand. start Start position of the sequence (relative to the contig). end End position of the sequence (relative to the contig). len Length of the sequence in basepairs. tss A (comma-separated list of) UTR-start/TSS position(s). If there are several TSS/UTR-starts, this means that several transcripts share the same promoter (e.g. when they are splice variants). The positions are relative to the promoter region. probe A (comma-separated list of) Affymetrix Probe Id(s). unigene A (comma-separated list of) UniGene Cluster Id(s). homgroup An identifier (a number) for the homology group (available for promoter sequences only). Orthologously related sequences have the same value in this field. promset If the sequence is a promoter region, the promoter set is denoted here. descr The gene description. If several genes (i.e. NCBI gene ids) are associated with the sequence, the descriptions for all of the genes are note, separated by \";\" comm A comment field, used for additional annotation. For promoter sequences, this field contains information about the transcripts associated with the promoter. For each transcript the Genomatix Transcript Id, accession number, TSS position and quality is listed, separated by \"/\". For Genomatix CompGen promoters no transcripts are assigned, in this case the string \"CompGen promoter\" is denoted. This syntax is currently used only for sequences in the FASTA and GenBank formats. Example (a promoter sequence in GenBank format): LOCUS GXP_170357 743 bp DNA DEFINITION loc=GXL_141619|sym=TPH2|geneid=121278|acc=GXP_170357| taxid=9606|spec=Homo sapiens|chr=12|ctg=NC_000012|str=(+)| start=70618393|end=70619135|len=743|tss=501,632| homgroup=4612|promset=1|descr=tryptophan hydroxylase 2| comm=GXT_2756574/AK094614/632/gold; GXT_2799672/NM_173353/501/bronze ACCESSION GXP_170357 BASE COUNT 216 a 180 c 147 g 200 t ORIGIN 1 TTGATTACCT TATTTGATCA TTACACATTG TACGCTTGTG TCAAAATATC ACATGTGCCT 61 TATAAATGTG TACAACTATT AGTTATCCAT AAAAATTAAA AATTAAAAAA TCCGTAAAAT 121 GGTTTAAGCA TTCAGCAGTG CTGATCTTTC TTAAATTATT TTTCTAATTT TGGAAAGAAA 181 GCACAAAATC TTTGAATTCA CAATTGCTTA AAGACTGAGG TTAACTTGCC AGTGGCAGGC 241 TTGAGAGATG AGAGAACTAA CGTCAGAGGA TAGATGGTTT CTTGTACAAA TAACACCCCC 301 TTATGTATTG TTCTCCACCA CCCCCGCCCA AAAAGCTACT CGACCTATGA AACAAATCAC 361 ACTATGAGCA CAGATAACCC CAGGCTTCAG GTCTGTAATC TGACTGTGGC CATCGGCAAC 421 CAGAAATGAG TTTCTTTCTA ATCAGTCTTG CATCAGTCTC CAGTCATTCA TATAAAGGAG 481 CCCGGGGATG GGAGGATTCG CATTGCTCTT CAGCACCAGG GTTCTGGACA GCGCCCCAAG 541 CAGGCAGCTG ATCGCACGCC CCTTCCTCTC AATCTCCGCC AGCGCTGCTA CTGCCCCTCT 601 AGTACCCCCT GCTGCAGAGA AAGAATATTA CACCGGGATC CATGCAGCCA GCAATGATGA 661 TGTTTTCCAG TAAATACTGG GCACGGAGAG GGTTTTCCCT GGATTCAGCA GTGCCCGAAG 721 AGCATCAGCT ACTTGGCAGC TCA //","title":"Genomatix annotation syntax"},{"location":"tutorial/Format/20_other/#iupac-nucleic-acid-codes","text":"To represent ambiguity in DNA sequences the following letters can be used (following the rules of the International Union of Pure and Applied Chemistry (IUPAC)): A = adenine C = cytosine G = guanine T = thymine U = uracil R = G A (purine) Y = T C (pyrimidine) K = G T (keto) M = A C (amino) S = G C W = A T B = G T C D = G A T H = A C T V = G C A N = A G C T (any)","title":"IUPAC nucleic acid codes"},{"location":"tutorial/Linux/","text":"\u57fa\u7840\u77e5\u8bc6 \u00b6 \u672c\u672c\u7ae0\u4e3b\u8981\u5bf9\u751f\u7269\u4fe1\u606f\u5206\u6790\u6240\u8981\u5177\u5907\u7684\u4e00\u4e9bLinux\u3001\u811a\u672c\u8bed\u8a00\u7b49\u5e38\u7528\u80cc\u666f\u77e5\u8bc6\u505a\u4e00\u4e9b\u521d\u6b65\u7684\u4ecb\u7ecd\u3002\u5982\u679c\u5bf9\u8fd9\u4e00\u90e8\u5206\u5185\u5bb9\u719f\u6089\u540e\uff0c\u540e\u9762\u7ae0\u8282\u7684\u5185\u5bb9\u7406\u89e3\u8d77\u6765\u4f1a\u975e\u5e38\u5feb\u901f\u3002 01. Linux \u7cfb\u7edf\u64cd\u4f5c\u57fa\u672c\u547d\u4ee4","title":"\u57fa\u7840\u77e5\u8bc6"},{"location":"tutorial/Linux/#_1","text":"\u672c\u672c\u7ae0\u4e3b\u8981\u5bf9\u751f\u7269\u4fe1\u606f\u5206\u6790\u6240\u8981\u5177\u5907\u7684\u4e00\u4e9bLinux\u3001\u811a\u672c\u8bed\u8a00\u7b49\u5e38\u7528\u80cc\u666f\u77e5\u8bc6\u505a\u4e00\u4e9b\u521d\u6b65\u7684\u4ecb\u7ecd\u3002\u5982\u679c\u5bf9\u8fd9\u4e00\u90e8\u5206\u5185\u5bb9\u719f\u6089\u540e\uff0c\u540e\u9762\u7ae0\u8282\u7684\u5185\u5bb9\u7406\u89e3\u8d77\u6765\u4f1a\u975e\u5e38\u5feb\u901f\u3002 01. Linux \u7cfb\u7edf\u64cd\u4f5c\u57fa\u672c\u547d\u4ee4","title":"\u57fa\u7840\u77e5\u8bc6"},{"location":"tutorial/Linux/01_linux-installation/","text":"Linux \u5b89\u88c5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u5c06\u4e4b\u524d\u4e00\u7bc7\u4e2a\u4eba\u8d2d\u4e70\u7684\u5c0f\u7c73 15 pro\u7b14\u8bb0\u672c\u4e0a\u5b89\u88c5 ArchLinux \u7684\u6559\u7a0b\u4f5c\u4e3a\u4ecb\u7ecdLinux\u5b89\u88c5\u7684\u8303\u4f8b\u3002\u7531\u4e8e\u8bb8\u591a\u7684 Linux \u53d1\u884c\u7248\u90fd\u6709\u56fe\u5f62\u5316\u7684\u5b89\u88c5\u754c\u9762\uff0c\u53ea\u8981\u7a0d\u5fae\u5177\u5907\u4e00\u4e9b\u8ba1\u7b97\u673a\u77e5\u8bc6\uff0c\u52a0\u4e0a\u641c\u7d22\u5f15\u64ce\u5e2e\u52a9\uff0c\u5b89\u88c5\u5b8c\u6210\u96be\u5ea6\u4e0d\u5927\u3002\u4f46\u662f\u5bf9\u4e8e\u8ba1\u7b97\u673a\u3001Linux\u548c\u751f\u7269\u4fe1\u606f\u547d\u4ee4\u7684\u5b66\u4e60\u6765\u8bf4\uff0cArchLinux \u8fd9\u79cd\u547d\u4ee4\u884c\u5b89\u88c5\u754c\u9762\u66f4\u6709\u5e2e\u52a9\u3002\u4ee5\u6b64\u5b89\u88c5\u4f5c\u4e3a\u5165\u95e8\u8bfb\u7269\uff0c\u5e0c\u671b\u5bf9\u8ba1\u7b97\u673a\u548c Linux \u5b66\u4e60\u6709\u6240\u5e2e\u52a9\u3002 \u5c0f\u7c73 pro 15.6 \u5b89\u88c5 ArchLinux \u00b6 \u64cd\u4f5c\u7cfb\u7edf: ArchLinux WM: i3wm DM: none \u9009\u62e9\u5c0f\u7c73 15.6 pro \u00b6 \u4ed4\u7ec6\u8bc4\u4f30\u4e86\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u6a2a\u5411\u6bd4\u8f83\u4e86dell xps\uff0c\u534e\u4e3amate\uff0c\u5c0f\u7c73pro\u7b49\u51e0\u6b3e\u7b14\u8bb0\u672c\u3002\u6700\u7ec8\u5728\u770b\u5230\u5c0f\u7c73\u65b0\u51fa\u7684\u6e38\u620f\u672c\u5e76\u4e0d\u9002\u5408\u6211\u4e4b\u540e\uff0c\u679c\u65ad\u6dd8\u5b9d\u4e86\u5c0f\u7c73 pro 15.6 \u4f4e\u914d\u7248\uff0c5000\u4ee5\u5185\u53ef\u4ee5\u62ff\u4e0b\u3002\u4e2a\u4eba\u7684\u9700\u6c42\u662f\u4e00\u6b3e\u548c\u513f\u5b50\u5171\u540c\u4f7f\u7528\u7684\u7b14\u8bb0\u672c\u3002\u81ea\u5df1\u4e3b\u8981\u505a\u6570\u636e\u5206\u6790\u548c\u5f00\u53d1\u7528\uff0c\u540c\u65f6\u6559\u513f\u5b50\u7f16\u7a0b\uff0c\u8fd8\u53ef\u4ee5\u73a9\u73a9\u7b80\u5355\u7684\u6e38\u620f\u3002\u52a0\u4e0a\u5c0f\u7c73pro\u6781\u7b80\u5316\u7684\u8bbe\u8ba1\uff0c\u975e\u5e38\u7b26\u5408\u4e2a\u4eba\u7684\u88c5\u903c\u98ce\u683c\uff0c\u56e0\u6b64\u679c\u65ad\u5165\u624b\u3002\u66fe\u7ecf\u5728\u65b0\u6b3e\u5c0f\u7c7313\u548c15.6 pro\u4e2d\u72b9\u8c6b\u8fc7\uff0c\u6700\u7ec8\u5728\u6563\u70ed+\u566a\u97f3 vs \u4fbf\u643a\u6027\u4e2d\u59a5\u534f\u4e86\u524d\u8005\u3002 \u5982\u679c\u8981\u4f5c\u4e3a\u4e3b\u8981\u7684\u751f\u7269\u4fe1\u606f\u5b66\u5904\u7406\u7535\u8111\uff0c\u5f3a\u70c8\u5efa\u8bae\u5c06\u5185\u5b58\u5347\u7ea7\u621016G\uff0c\u518d\u81ea\u884c\u6dfb\u52a0\u786c\u76d8\u3002 \u786c\u4ef6\u4e0e\u8f6f\u4ef6 \u00b6 \u786c\u4ef6\u914d\u7f6e\uff1a CPU i5 8250 \u5185\u5b58 8G \u786c\u76d8 256G SSD \u5c4f\u5e55 15.6 1920x1080 IPS 72% \u8272\u57df \u8f6f\u4ef6\u914d\u7f6e\uff1a \u64cd\u4f5c\u7cfb\u7edf ArchLinux \u7a97\u53e3\u7ba1\u7406 i3-gaps \u6587\u4ef6\u7ba1\u7406 ranger \u97f3\u4e50\u64ad\u653e mpd \u89c6\u9891\u64ad\u653e mpv \u6587\u672c\u7f16\u8f91 vim \u56fe\u7247\u67e5\u770b w3m \u6587\u6863\u5904\u7406 wps/libreoffice \u56fe\u5f62\u56fe\u50cf\u5904\u7406 wine+photoship/gimp \u5c4f\u5e55\u5f55\u5236\u89c6\u9891 ffmpeg \u6e38\u620f steam \u5410\u69fd\uff1a\u673a\u5668\u5230\u624b\u57fa\u672c\u6ee1\u610f\u3002\u5c4f\u5e55\u5de6\u4e0a\u89d2\u6709\u4e00\u70b9\u6f0f\u5149\uff0c\u8003\u8651\u5230\u6211\u5927\u90e8\u5206\u662f\u5728\u7ec8\u7aef\u4e0b\u5de5\u4f5c\uff0c\u57fa\u672c\u6ca1\u6709\u5f71\u54cd\u3002\u81f3\u4e8e\u505a\u5de5\uff0c\u603b\u4f53\u611f\u89c9\u662f\u6a21\u4effmac\uff0c\u4f46\u662f\u7531\u4e8e\u6210\u672c\u53d7\u9650\u53ea\u80fd\u505a\u5230\u5927\u6982\u3002\u6bd4\u5982\u673a\u5668\u8fb9\u7f18\u7684\u5272\u624b\u611f\u76f8\u5f53\u5f3a\u70c8\uff0c\u5947\u602a\u600e\u4e48\u5f88\u5c11\u770b\u5230\u8bc4\u6d4b\u91cc\u6709\u4eba\u63d0\u5230\u8fd9\u4e00\u70b9\uff1f\u7531\u4e8e\u6211\u662f\u76f4\u7ebf\u63a7\uff0c\u5bf9\u8fd9\u4e00\u70b9\u76ee\u524d\u8868\u793a\u53ef\u4ee5\u63a5\u53d7\u3002\u8fd8\u6709\u5c31\u662f\u5f88\u591a\u8bf4\u8bf4\u7684B/C\u9762\u7f1d\u9699\u7684\u95ee\u9898\uff0c\u5982\u679c\u662f\u5b8c\u7f8e\u4e3b\u4e49\u8005\u5bf9\u8fd9\u4e00\u70b9\u4f1a\u89c9\u5f97\u5f88\u96be\u53d7\u3002\u4f46\u662f\u65e5\u5e38\u4f7f\u7528\u4e2d\u786e\u5b9e\u6ca1\u6709\u4ec0\u4e48\u5f71\u54cd\u3002\u4f7f\u7528\u624d\u662f\u7b2c\u4e00\u4f4d\u7684\u3002 BIOS\u8fc7\u4e8e\u7b80\u964b\u4e86\u3002\u6781\u7b80\u7684\u5916\u5f62\u8bbe\u8ba1\u70b9\u8d5e\uff0c\u4f46\u662f\u5185\u91cc\u4e5f\u8fc7\u4e8e\u7b80\u5355\u4e86\uff0c\u96be\u9053\u5b9a\u4f4d\u5bf9\u8c61\u662f\u5973\u6027\u7b49\u666e\u901a\u7528\u6237\uff1f\u8d77\u59cb\u5c0f\u7c73pro\u914d\u7a0b\u5e8f\u5458\u8fd8\u662f\u633a\u5408\u9002\u7684\u3002 \u5c4f\u5e55\u7684\u4f18\u70b9\u662fIPS 72% \u8272\u57df\u7684\uff0c\u786e\u5b9e\u975e\u5e38\u4eae\u4e3d\u3002\u4e0d\u8fc7\u662f\u955c\u9762\u5c4f\uff0c\u8fd9\u4e00\u70b9\u4e0d\u592a\u7b26\u5408\u6211\u7684\u9700\u6c42\u3002\u53e6\u5916\u5206\u8fa8\u7387\u662f1920x1080\uff0c\u5c5e\u4e8e\u5e38\u89c4\u914d\u7f6e\u300215\u5bf8\u76844K\u5c4f\u5e55\u786e\u5b9e\u663e\u793a\u975e\u5e38\u7ec6\u817b\uff0c\u6709\u4e00\u79cd\u77e2\u91cf\u822c\u6cb9\u753b\u7684\u611f\u89c9\u3002\u4f46\u662f4k\u7684\u7f3a\u70b9\u662f\u652f\u6301\u8fd8\u4e0d\u662f\u5f88\u7406\u60f3\uff0c\u6211\u5e38\u7528\u7684\u4e00\u4e9b Java \u8f6f\u4ef6\u5fc5\u987b\u75281.8\u7684JRE\uff0c\u4e0d\u652f\u63014k\u663e\u793a\uff0c\u7528\u8d77\u6765\u4f1a\u5f88\u9ebb\u70e6\u3002\u9ad8\u6e05\u5c4f\uff081920x1080\uff09\u867d\u7136\u9897\u7c92\u611f\u8fd8\u662f\u6bd4\u8f83\u660e\u663e\uff0c\u4f46\u662f\u8f6f\u4ef6\u3001\u6295\u5f71\u7b49\u652f\u6301\u76ee\u524d\u8fd8\u8bf4\u8fd8\u662f\u6bd44K\u66f4\u4fbf\u5229\u4e00\u4e9b\u3002 \u5b89\u88c5ArchLinux \u00b6 \u5c0f\u7c73\u7684BIOS\u754c\u9762\u529f\u80fd\u771f\u662f\u7b80\u5355\uff0c\u770b\u4e86\u4e00\u4e0b\u62ff\u5230\u624b\u7684\u662f0502\u7248BIOS\u3002\u5728windows10\u91cc\u8dd1\u4e86ssd\u6d4b\u8bd5\u3002BIOS \u5fc5\u987b\u8bbe\u7f6e supervisor password \u624d\u80fd\u5c06\u4fee\u6539 secure boot \u4e3a disabled\u3002\u5f00\u673a\u6309F2\u8fdb\u5165BIOS\uff0c\u6309F12\u9009\u62e9\u5f15\u5bfc\u8bbe\u5907\u3002 \u5f00\u673a\u6309F12\uff0c\u9009\u62e9U\u76d8\u542f\u52a8\uff0c\u8fdb\u5165Archlinux\u754c\u9762\u3002\u63d2\u4e0a\u4e00\u4e2a\u5927\u5bb9\u91cfU\u76d8\uff0c\u7528\u6765\u5c06\u539f\u786c\u76d8\u5185\u5bb9\u8fdb\u884c\u5907\u4efd\uff0c\u4ee5\u5907\u5c06\u6765\u9700\u8981\u6062\u590d\u65f6\u4f7f\u7528\u3002\u67e5\u770b\u4e00\u4e0b\u5f53\u524d\u78c1\u76d8\u60c5\u51b5\uff1a root@archiso~ # lsblk -f NAME FSTYPE LABEL UUID MOUNTPOINT loop0 squashfs /run/archiso/sfs/airrootfs sda -sda1 vfat BANQ C873-E5BF sdb iso9660 ARCH_201803 2018 -03-01-15-13-16-00 -sdb1 iso9660 ARCH_201803 2018 -03-01-15-13-16-00 /run/archiso/bootmnt -sdb2 vfat ARCHISO_EFI 8688 -0060 nvme0n1 -nvme0n1p1 vfat SYSTEM E479-B82E -nvme0n1p2 -nvme0n1p3 ntfs Windows 3ACC7A8CCC7A4265 -nvme0n1p4 ntfs Recovery image C2DE7AF4DE7ADFD9 \u5f53\u524d\u7248\u672c\u7684linux\u5185\u6838\u5df2\u7ecf\u5305\u542b\u4e86\u9a71\u52a8\uff0c\u4e0d\u4f1a\u51fa\u73b0nvme ssd\u786c\u76d8\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u3002\u5c0f\u7c73pro 256G SSD\u786c\u76d8\u4e0a\u67094\u4e2a\u5206\u533a\uff0c\u5206\u522b\u65f6\u7cfb\u7edf\u5f15\u5bfcEFI\u5206\u533a\uff0c\u4fdd\u7559\u5206\u533a\uff0cwin10\u5206\u533a\u548c\u7cfb\u7edf\u6062\u590d\u5206\u533a\u3002\u6211\u60f3\u4fdd\u7559win10\u7684recovery\u533a\uff0c\u627e\u4e00\u4e2aU\u76d8\u6765\u5907\u4efd\u5206\u533a\u5230\u6587\u4ef6\u3002 root@archiso~ # mkdir -p /backup root@archiso~ # mount /dev/sda1 /backup root@archiso~ # dd if=/dev/nvme0n4 of=/backup/mmipro_recovery.bin bs=64k conv=notrunc,noerror,sync status=progress 15680 +0 records in 15680 +0 records out 10276604480 bytes ( 1 .0 GB, 908 MiB ) copied, 0 .697636 s, 1 .5 GB/s \u8fde\u63a5wifi\u7f51\u7edc\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528wifi-menu\uff0c\u4e5f\u53ef\u4ee5\u7528wpa_supplicant\u547d\u4ee4\u8fde\u63a5\u3002\u8fde\u63a5\u6210\u529f\u540e\u8fd0\u884cdhcpcd\uff0c\u5c31\u53ef\u4ee5\u8bbf\u95ee\u4e92\u8054\u7f51\u7edc\u4e86\u3002 # \u7528wifi-menu root@archiso~ # wifi-menu # \u7528wpa_supplicant root@archiso~ # wpa_supplicant -i wlp2s0 -c <(wpa_passphrase \"YourSSID\" \"YourKey\") -B # \u8fde\u63a5\u7f51\u7edc root@archiso~ # dhcpcd root@archiso~ # ping -c 3 www.archlinux.org \u8003\u8651\u4e86\u5f88\u4e45\u8981\u4e0d\u8981\u52a0\u5bc6\u5b89\u88c5\uff0c\u7531\u4e8e\u662f\u548c\u5b69\u5b50\u4e00\u8d77\u4f7f\u7528\u7684\uff0c\u6709\u52a0\u5bc6\u72d7\u7684\u8bdd\u53ef\u4ee5\u9650\u5236\u5c0f\u5b69\u3002\u4f46\u662f\u8003\u8651\u5230\u53ef\u80fd\u5b58\u5728\u7684\u4e00\u4e9b\u610f\u5916\u60c5\u51b5\uff0c\u5b89\u88c5\u5c31\u91c7\u7528\u666e\u901a\u6a21\u5f0f\u5427\u3002\u5bf9\u5c0f\u5b69\u7684\u4f7f\u7528\u9650\u5236\u5c31\u4ece\u5176\u4ed6\u65b9\u9762\u7740\u624b\u4e86\u3002 \u8fd0\u884c blkdiscard \u6e05\u9664\u786c\u76d8\uff0cSSD\u4e0a\u6240\u6709\u6570\u636e\u90fd\u4f1a\u88ab\u6e05\u695a\uff0c\u8bf7\u786e\u8ba4\u51c6\u5907\u5b8c\u6210\u518d\u6267\u884c\u3002\u5206\u533a\u5f88\u7b80\u5355\uff0c\u7528fdisk\u6216\u8005parted\u90fd\u53ef\u4ee5\uff0c\u559c\u6b22\u56fe\u5f62\u5316\u754c\u9762\u7684\u53ef\u4ee5\u7528cgdisk\u3002 # \u64e6\u9664SSD\u6570\u636e root@archiso~ # blkdiscard /dev/nvme0n1 # fdisk\u5206\u533a root@archiso~ # fdisk /dev/nvme0n1 # \u521b\u5efagpt\u5206\u533a\u8868 Command ( m for help ) : g # \u521b\u5efa\u5206\u533a Command ( m for help ) : n Partition number ( 1 -128, default 1 ) : 1 First sector ( 2048 -500118158, default 2048 ) : 2048 Last sector, +sector or +size { K,M,G,T,P } ( 2048 -500118158, default 500118158 ) : +512M # parted \u5206\u533a root@archiso~ # parted /dev/nvme0n1 \u6302\u8f7d / \u548c /boot \u5206\u533a\u5230/mnt # \u6dfb\u52a0\u6302\u8f7dboot\u7684\u8def\u5f84 root@archiso~ # mkdir /mnt/boot root@archiso~ # mount /dev/nvme0n1p2 /mnt root@archiso~ # mount /dev/nvme0n1p1 /mnt/boot # \u5b89\u88c5\u57fa\u7840\u7cfb\u7edf root@archiso~ # pacstrap /mnt base base-devel # \u751f\u6210fstab root@archiso~ # genfstab -U /mnt >> /mnt/etc/fstab # chroot\u5230\u65b0\u5b89\u88c5\u7684\u7cfb\u7edf\u4e2d\u8fdb\u884c\u64cd\u4f5c root@archiso~ # arch-chroot /mnt /bin/bash # \u5b89\u88c5\u5fc3\u7cfb\u7edf\u6240\u5fc5\u987b\u7684\u65e0\u7ebf\u7f51\u7edc\u76f8\u5173\u8f6f\u4ef6 [ root@archiso / ] # pacman -S vim wpa_supplicant networkmanager \u521b\u5efa\u7ba1\u7406\u5458\u5bc6\u7801\uff0c\u65b0\u5efa\u7528\u6237mark\uff0c\u5e76\u5efa\u7acb\u4e3b\u7528\u6237\u76ee\u5f55\u548c\u5bc6\u7801\u3002\u5c06\u7528\u6237mark\u8bbe\u7f6e\u4e3awheel\u7ec4\uff0c\u83b7\u5f97\u7ba1\u7406\u5458\u6743\u9650\u3002 [ root@archiso / ] # passwd root [ root@archiso / ] # useradd -G -m mark \u4ee5\u524d\u7248\u672c\u7684grub\u4e0d\u652f\u6301nvme\uff0c\u4e0d\u786e\u5b9a\u65b0\u7248\u672c\u6216\u8005grub-git\u662f\u5426\u53ef\u4ee5\u5b8c\u7f8e\u652f\u6301\uff0c\u8fd9\u91cc\u6211\u4eec\u5c31\u4e0d\u7528grub\u5f15\u5bfc\u4e86\uff0c\u76f4\u63a5\u7528systemd-boot\u6765\u5f15\u5bfc\u7cfb\u7edf\u3002 # \u5b89\u88c5efi [ root@archiso / ] # bootctl install [ root@archiso / ] # vim /boot/efi/entities/arch.conf [ root@archiso / ] # vim /boot/efi/load.conf \u5206\u533a\u65f6\u6211\u4eec\u6ca1\u6709\u5efa\u7acbswap\u5206\u533a\uff0c\u56e0\u4e3a\u5728SSD\u4e2d\uff0c\u66f4\u559c\u6b22\u7528\u6587\u4ef6\u65b9\u5f0f\u4f7f\u7528swap\uff0c\u66f4\u4e3a\u7075\u6d3b\u3002 # mkdir /swap # fallocate -l 2G /swap/swapfile # chmod 600 /swap/swapfile # mkswap /swap/swapfile # swapon /swap/swapfile # echo \"/swap/swapfile none swap defaults 0 0\" >> /etc/fstab \u5b89\u88c5 teminal \u5de5\u5177 urxvt \u00b6 \u4ece\u526a\u8d34\u677f\u4e2d\u7c98\u8d34\u5185\u5bb9\u5230urxvt\u4e2d\uff0c\u53ef\u4ee5\u7528 shift+insert\uff0c\u6216\u8005\u9f20\u6807\u4e2d\u952e\u3002\u4eceurxvt\u4e2d\u590d\u5236\uff0c\u76f4\u63a5\u7528\u9f20\u6807\u9009\u4e2d\u5373\u53ef\u3002\u590d\u5236\u5230\u5176\u4ed6\u7a0b\u5e8f\u65f6\uff0c\u53ea\u8981\u4f7f\u7528\u9f20\u6807\u4e2d\u952e\u5373\u53ef\u3002 # pacman -S xorg xorg-xinit libgl # pacman -S rxvt-unicode urxvt-perls # pacman -S linux-headers # pacman -S sudo # EDITOR=vim visudo %wheel ALL =( ALL ) ALL \u6dfb\u52a0\u5f53\u524d\u7528\u6237\uff0c\u5e76\u8d4b\u4e88\u7ba1\u7406\u5458\u6743\u9650\u3002 # useradd mark -g wheel -m # passwd mark New password: Retype new password: \u5b57\u4f53\u8bbe\u7f6e \u00b6 # \u5b89\u88c5\u6587\u6cc9\u9a7f\u3001noto\u7b49\u4e2d\u6587\u5b57\u4f53 $ sudo pacman -S ttf-inconsolata wqy-microhei wqy-microhei-lite wqy-zenhei wqy-bitmapfont ttf-font-awesome ttf-arphic-ukai ttf-arphic-uming noto-fonts $ sudo ln -s /etc/fonts/conf.avail/70-no-bitmaps.conf /etc/fonts/conf.d/ $ sudo unlink /etc/fonts/conf.d/10-scal-bitmap-fonts.conf \u8bbe\u7f6e\u65e0\u7ebf\u7f51\u7edc \u00b6 \u5b89\u88c5 ArchLinux \u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u7528\u8fc7 wifi-menu \u5de5\u5177\u8fde\u63a5\u4e86\u65e0\u7ebf\u7f51\u7edc\u3002\u8fdb\u5165\u5b89\u88c5\u5b8c\u6bd5\u7684\u7cfb\u7edf\uff0c\u4e5f\u53ef\u4ee5\u4ee5\u7ba1\u7406\u5458\u8fd0\u884c wifi-menu \u8fde\u63a5\uff0c\u518d\u8fd0\u884c dhcpcd\uff0c\u5373\u53ef\u4e0a\u7f51\u3002\u5982\u679c\u8981\u542f\u7528\u7f51\u7edc\u670d\u52a1\uff0c\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\u548c\u8fde\u63a5\uff0c\u9700\u8981\u5b89\u88c5 NetworkManager # \u5b89\u88c5 NetworkManager $ sudo pacman -S networkmanager $ sudo systemctl enable NetworkManager # \u547d\u4ee4\u884c\u4e0b\u5efa\u7acb wifi \u8fde\u63a5 $ nmcli dev wifi connect \"your-wifi-ssid\" password \"wifi-password\" # \u901a\u8fc7\u7ec8\u7aef\u56fe\u5f62\u754c\u9762\u8bbe\u7f6e $ nmtui \u8bbe\u7f6e\u97f3\u9891\u8f93\u5165\u8f93\u51fa \u00b6 ArchLinux \u7684\u5185\u6838\u6a21\u5757\u5df2\u7ecf\u5305\u542b ALSA\uff0c\u6ca1\u6709\u58f0\u97f3\u662f\u56e0\u4e3a\u9ed8\u8ba4\u8bbe\u7f6e\u6210\u9759\u97f3\u72b6\u6001\u3002\u63a7\u5236\u58f0\u97f3\uff0c\u8981\u5b89\u88c5\u76f8\u5e94\u7684\u5de5\u5177\u3002 # alsa \u5de5\u5177 $ sudo pacman -S alsa-utils alsa-oss # alsamixer \u914d\u7f6e\u58f0\u97f3\uff0c\u901a\u8fc7ncurse\u754c\u9762\u3002 # \u8f93\u51faMaster\u4e0b\u65b9\u5982\u679c\u663e\u793a\u662fMM\uff0c\u5219\u5904\u4e8emute\u9759\u97f3\u72b6\u6001\uff0c\u6309m\u952e\u63a5\u89e6 $ alsamixer # amixer \u547d\u4ee4\u884c\u58f0\u97f3\u8bbe\u7f6e\uff0c\u4e0b\u9762\u547d\u4ee4\u89e3\u9664\u9759\u97f3 $ amixer sset Master unmute # \u67e5\u770b\u6240\u6709 mixer $ amixer scontrols \u58f0\u97f3\u914d\u7f6e\u6587\u4ef6\uff0c\u7cfb\u7edf\u7ea7\u7684\u5728 /etc/asound.conf \uff0c\u7528\u6237\u7ea7\u7684\u5728 ~/.asound.rc \u5c4f\u5e55\u8272\u5f69\u77eb\u6b63 \u00b6 ICC\u662f1993\u5e74\u7531\u5305\u62ecAdobe\u3001Apple\u3001Kodak\u3001Microsoft\u5728\u5185\u7684\u6570\u5341\u5bb6\u516c\u53f8\u53d1\u8d77\u5e76\u6210\u7acb\u7684\uff0c\u5168\u79f0\u662f\u56fd\u9645\u8272\u5f69\u8054\u76df\uff08International Color Consortium\uff09\uff0c\u7b80\u79f0ICC\u3002\u8fd9\u4e2a\u7ec4\u7ec7\u7684\u4e3b\u8981\u76ee\u6807\uff0c\u5c31\u662f\u8981\u5728\u5404\u4e2a\u8bbe\u5907\u3001\u8f6f\u4ef6\u4e4b\u95f4\u5f62\u6210\u7edf\u4e00\u7684\u8272\u5f69\u6807\u51c6\uff0c\u5373ICC\u6807\u51c6\u3002\u6700\u7ec8\u7684\u76ee\u6807\u5c31\u662f\u8ba9\u8f93\u5165\u8bbe\u5907\uff08\u5982\u6570\u7801\u76f8\u673a\uff09\u3001\u663e\u793a\u8bbe\u5907\uff08\u5982\u663e\u793a\u5668\uff09\u3001\u8f93\u51fa\u8bbe\u5907\uff08\u5982\u6253\u5370\u673a\uff09\u80fd\u591f\u81ea\u59cb\u81f3\u7ec8\u5f97\u4fdd\u8bc1\u8272\u5f69\u88ab\u51c6\u786e\u91cd\u73b0\u3002 ICC\u501f\u52a9\u4e8e\u4e00\u4e2a\u72ec\u7acb\u7684\u8272\u5f69\u7a7a\u95f4\u5373\u8bbe\u5907\u8272\u5f69\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6\u8fde\u63a5\u7a7a\u95f4/\u53c2\u8003\u7a7a\u95f4\uff08Profile Connection Space\uff0c\u7f29\u5199PCS\uff09\u4f5c\u4e3a\u8272\u5f69\u7a7a\u95f4\u8f6c\u6362\u7684\u4e2d\u95f4\u8272\u5f69\u7a7a\u95f4\uff0c\u901a\u8fc7\u5f69\u8272\u8bbe\u5907\u8272\u5f69\u7a7a\u95f4\uff08RGB\u6216CMYK\uff09\u548cPCS\u7a7a\u95f4\u4e4b\u95f4\u7684\u8054\u7cfb\u4e3a\u8be5\u8bbe\u5907\u5efa\u7acb\u8bbe\u5907\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6\uff08Profile\uff09\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5bf9\u8272\u5f69\u7684\u5f00\u653e\u6027\u7ba1\u7406\uff0c\u4f7f\u5f97\u8272\u5f69\u4f20\u9012\u4e0d\u4f9d\u8d56\u4e8e\u5f69\u8272\u8bbe\u5907\u3002PCS\u7a7a\u95f4\u662f\u901a\u8fc7XYZ\u7a7a\u95f4\u6216LAB\u7a7a\u95f4\u6765\u5b9a\u4e49\u7684\u3002ICC\u6807\u51c6\u603b\u5171\u89c4\u5b9a\u4e867\u79cd\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6Profile\uff0c\u5176\u4e2d\u5305\u62ec\uff1a3\u79cd\u57fa\u672c\u8bbe\u5907\u7684\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6Profile\uff0c\u5373\u8f93\u5165\u8bbe\u5907Profile\u6587\u4ef6\u3001\u663e\u793a\u8bbe\u5907Profile\u6587\u4ef6\u548c\u8f93\u51fa\u8bbe\u5907Profile\u6587\u4ef6\uff1b4\u4e2a\u9644\u52a0\u7684\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6Profile\uff0c\u5373\u8bbe\u5907\u94fe\u63a5Profile\u3001\u8272\u5f69\u7a7a\u95f4\u8f6c\u6362Profile\u3001\u62bd\u8c61Profile\u548c\u88ab\u547d\u540d\u8272Profile \u5728 Mac \u4e0e Windows \u5e73\u53f0\u4e0a\uff0c\u540d\u79f0\u5206\u522b\u88ab\u81ea\u52a8\u52a0\u4e0a .icc \u4e0e .icm \u7684\u914d\u7f6e\u6587\u4ef6\u6269\u5c55\u540d\u3002.icm \u4e0e .icc \u6269\u5c55\u540d\u53ef\u4ee5\u4e92\u6362\u3002 ArchLinux\u5b89\u88c5\u5b8c\u540e\uff0c\u9ed8\u8ba4\u7684\u5c4f\u5e55\u8272\u6e29\u504f\u51b7\u3002\u53ef\u4ee5\u7528Win10\u7684icc\u6587\u4ef6\u77eb\u6b63\u3002\u5982\u679c\u6ca1\u6709\u5907\u4efd\u539f\u6709\u8272\u5f69\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u65b9\u6cd5\u6765\u52a0\u8f7d\u3002\u76f8\u5173\u5185\u5bb9 \u53c2\u89c1\u8fd9\u91cc \u3002 ## \u53ef\u4ee5\u7528 edid-decode \u6765\u67e5\u770b\u5c4f\u5e55\u53c2\u6570\uff0c\u5c0f\u7c73pro\u7684\u5c4f\u5e55\u662f\u4eac\u4e1c\u65b9BOE ## \u751f\u4ea7\u7684\u3002\u6211\u7684\u8fd9\u5757\u662f2017\u5e7418\u5468\u51fa\u54c1\u3002\u4e0d\u5173\u5fc3\u53c2\u6570\u7684\u8bdd\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65 $ git clone https://aur.archlinux.org/edid-decode-git.git $ cd edid-decode $ makepkg -si $ edid-decode < /sys/class/drm/card0-eDP-1/edid Extracted contents: header: 00 ff ff ff ff ff ff 00 serial number: 09 e5 47 07 00 00 00 00 12 1b version: 01 04 basic params: a5 22 13 78 02 chroma info: 1b bb a6 58 55 9d 26 0e 4f 55 established: 00 00 00 standard: 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 descriptor 1 : 9c 3b 80 36 71 38 3c 40 30 20 36 00 58 c2 10 00 00 1a descriptor 2 : fd 2d 80 0e 71 38 28 40 30 20 36 00 58 c2 10 00 00 1a descriptor 3 : 00 00 00 fe 00 42 4f 45 20 43 51 0a 20 20 20 20 20 20 descriptor 4 : 00 00 00 fe 00 4e 56 31 35 36 46 48 4d 2d 4e 36 31 0a extensions: 00 checksum: 30 EDID version: 1 .4 Manufacturer: BOE Model 747 Serial Number 0 Made in week 18 of 2017 Digital display 8 bits per primary color channel DisplayPort interface Maximum image size: 34 cm x 19 cm Gamma: 2 .20 Supported color formats: RGB 4 :4:4 First detailed timing includes the native pixel format and preferred refresh rate Display x,y Chromaticity: Red: 0 .6484, 0 .3447 Green: 0 .3339, 0 .6162 Blue: 0 .1503, 0 .0576 White: 0 .3105, 0 .3349 Established timings supported: Standard timings supported: Detailed mode: Clock 152 .600 MHz, 344 mm x 194 mm 1920 1968 2000 2230 hborder 0 1080 1083 1089 1140 vborder 0 +hsync -vsync VertFreq: 60 Hz, HorFreq: 68430 Hz Detailed mode: Clock 117 .730 MHz, 344 mm x 194 mm 1920 1968 2000 2190 hborder 0 1080 1083 1089 1120 vborder 0 +hsync -vsync VertFreq: 47 Hz, HorFreq: 53757 Hz ASCII string: BOE CQ ASCII string: NV156FHM-N61 Checksum: 0x30 ( valid ) EDID block does NOT conform to EDID 1 .4! Missing name descriptor Missing monitor ranges \u6ca1\u6709\u5907\u4efdicc\u6587\u4ef6\u7684\u8bdd\uff0c\u53ef\u4ee5\u5728 \u8fd9\u91cc \u4e0b\u8f7d\u3002\u901a\u8fc7.xinitrc\u7528\u6237\u7ea7\u65b9\u5f0f\u5728\u8fdb\u5165\u684c\u9762\u7cfb\u7edf\u5e76\u52a0\u8f7d\u3002 # \u5907\u4efdicm\u6587\u4ef6\uff0c\u5b89\u88c5xcalib $ wget https://www.notebookcheck.net/uploads/tx_nbc2/BOE_CQ_______NV156FHM_N61.icm $ sudo cp BOE*.icm /usr/local/share/color/icc/BOE_CQ_NV156FHM_N61.icm $ git clone https://aur.archlinux.org/xcalib.git $ cd xcalib $ makepkg -si $ echo \"/usr/bin/xcalib -d :0 /usr/local/share/color/icc/BOE_CQ_NV156FHM_N61.icm\" >> ~/.xinitrc \u952e\u76d8\u6309\u952e\u8bbe\u7f6e \u00b6 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f1a\u53d1\u73b0\u952e\u76d8\u529f\u80fd\u952e\u6ca1\u6709\u542f\u7528\u3002\u7528 xev | awk -F'[ )]+' '/^KeyPress/ { a[NR+2] } NR in a { printf \"%-3s %s\\n\", $5, $8 }' \u6d4b\u8bd5\u53d1\u73b0\u5b9e\u9645\u4e0a\u662fFn+F1 12\u9ed8\u8ba4\u8bbe\u7f6e\u6210\u4e86F1\uff5e12\u529f\u80fd\u3002\u8fd9\u5728\u4e00\u4e9b\u7b14\u8bb0\u672c\u4e2dBIOS\u53ef\u4ee5\u6539\u3002\u5c0f\u7c73\u7b14\u8bb0\u672c\u5982\u679c\u8981\u5728F1\uff5e12\u548cFn+F1 F12\u4e4b\u95f4\u5207\u6362\uff0c\u53ea\u8981\u6309\u4e0bFn+Esc\u5373\u53ef\u3002 ## \u67e5\u770b\u952e\u76d8\u6309\u952e\u5bf9\u5e94\u529f\u80fd $ xmodmap -pke | less ... F1-F12\u5bf9\u5e94\u6309\u952e\uff1a F1 121 F2 122 F3 123 F4 232 F5 233 F6 133 F7 F8 F9 F10 F11 107 F12 118 \u63a7\u5236\u5c4f\u5e55\u4eae\u5ea6\uff0cxbacklight\u4e0d\u8d77\u4f5c\u7528\uff0c\u4f7f\u7528light\u63a7\u5236 $ sudo pacman -S light ## eidt in .config/.i3/config bindsym XF86MonBrightnessUp exec light -A 10 bindsym XF86MonBrightnessDown exec light -U 10 ## \u5982\u679c\u60f3\u67e5\u770b\u5f53\u524d\u4eae\u5ea6 $ light -G \u63a7\u5236\u58f0\u97f3\uff0c\u8fd9\u91cc\u4f7f\u7528amixer\uff08pactl for pulseAudio\uff09 ## edit in .config/.i3/config bindsym XF86AudioRaiseVolume exec amixer set Master 10 %+ bindsym XF86AudioLowerVolume exec amixer set Master 10 %- bindsym XF86AudioMute exec amixer set Master toggle \u907f\u514d\u7535\u6e90\u6309\u94ae\u8bef\u89e6\uff0c\u8fdb\u884c\u4ee5\u4e0b\u8bbe\u7f6e\u3002 $ sudo echo \"HandlePowerKey=ignore\" >> /etc/systemd/logind.conf ## edit in .config/i3/config bindsym --release XF86PowerOff mode \" $power \" set $power Say Goodbye? [ L ] ogout | [ S ] hutdown | [ C ] ancel mode \" $power \" { bindsym l exec i3-msg exit bindsym s exec systemctl poweroff bindsym c mode \"default\" bindsym Return mode \"default\" bindsym Escape mode \"default\" } \u8bbe\u7f6e\u89e6\u6478\u677f \u00b6 $ sudo pacman -S xf86-input-libinput $ sudo vim /etc/X11/xorg.conf.d/20-touchpad.conf Section \"InputClass\" Identifier \"libinput touchpad\" Driver \"libinput\" MatchIsTouchpad \"on\" MatchDevicePath \"/dev/input/event*\" Option \"Tapping\" \"on\" Option \"ClickMethod\" \"clickfinger\" Option \"NaturalScrolling\" \"true\" EndSection \u5b89\u88c5 i3-gaps \u00b6 # \u5c06\u542f\u52a8\u811a\u672c\u6dfb\u52a0\u5230 .xinitrc $ echo \"exec i3\" >> ~/.xinitrc \u5b89\u88c5polybar \u00b6 # \u5b89\u88c5\u65e0\u7ebf wifi \u652f\u6301 $ sudo pacman -S wireless_tools # \u5b89\u88c5 mpd \u652f\u6301 $ sudo pacman -S libmpdclient mpd # $ git clone https:// $ makepkg -si \u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6 \u00b6 # \u5b89\u88c5\u6d4f\u89c8\u5668 $ sudo pacman -S chromium firefox pepper-flash ttf-liberation # \u5b89\u88c5 git $ sudo pacman -S git-core # \u5b89\u88c5 python3 \u4ee5\u53ca python \u865a\u62df\u73af\u5883 $ sudo pacman -S python python-pipenv \u5b89\u88c5\u6587\u4ef6\u7ba1\u7406\u5668 \u00b6 \u6211\u4eec\u7528 ranger \u6765\u505a\u4e3a\u6587\u4ef6\u7ba1\u7406\u5668\u3002 $ pacman -S ranger \u4e2d\u6587\u8f93\u5165 \u00b6 # \u5b89\u88c5 fcitx $ sudo pacman -S fcitx $ vim ~/.xinitrc export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = @im = fcitx # \u5b89\u88c5 im \u548c\u62fc\u97f3\u8f93\u5165\u6cd5 $ sudo pacman -S fcitx-im $ sudo pacman -S fcitx-googlepinyin # \u4e2a\u522b\u7248\u672c\u7684 wps \u9700\u8981\u5728\u542f\u52a8\u811a\u672c\u4e2d\u52a0\u5165 export QT_IM_MODULE=fcitx \u624d\u80fd\u4f7f\u7528\u8f93\u5165\u6cd5\u3002 \u79d1\u5b66\u4e0a\u7f51 \u00b6 \u4fee\u590d sslocal \u4e0e openssl 1.1 \u51b2\u7a81\uff0c\u4fee\u590d\u65b9\u5f0f\u53c2\u89c1 \u8fd9\u91cc $ cd /usr/lib/python3.6/site-packages/shadowsocks/crypto/ $ sudo cp openssl.py openssl.py.bak $ sudo sed 's/EVP_CIPHER_CTX_cleanup/EVP_CIPHER_CTX_reset/g' openssl.py > openssl.py \u4f7f\u7528shadowsocks\uff0c\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u8fd0\u884c ## \u7528\u6237\u7ea7 shadowsocks $ sudo sslocal -c ~/.config/shadowsocks/server.json -d start --user mark ## \u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\u7cfb\u7edf\u7ea7shadowsocks\uff0c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528 $ sudo mkdir /etc/shadowsocks $ sudo ln -s ~/.config/shadowsocks/server.json /etc/shadowsocks/ $ sudo vim /etc/systemd/system/sslocal.service [ Unit ] Description = Daemon to start Shadowsocks Client Wants = network-online.target After = network.target [ Service ] Type = simple ExecStart = /usr/bin/sslocal -c /etc/shadowsocks/server.json --pid-file /var/run/sslocal.pid --log-file /var/log/sslocal.log [ Install ] WantedBy = multi-user.target ## systemd \u8bbe\u7f6e $ sudo systemctl enable sslocal.service $ sudo systemctl start sslocal.service $ sudo systemctl stop sslocal.service \u8bbe\u7f6e\u6d4f\u89c8\u5668\u63d2\u4ef6 ## SwitchyOmega for Chromium $ wget https://www.switchyomega.com/static/file/v2.5.6/SwitchyOmega_Chromium.crx $ 7z x SwitchyOmega_Chromium -r chromium://extensions Developer mode load extensions packs ## SwitchOmega for Firefox $ wget https://www.switchyomega.com/static/file/v2.5.6/SwitchyOmega_Firefox.fx.xpi about:addons Install Add-ons From File \u672c\u5730\u5f00\u542fbbr\uff0c\u4e0a\u4f20\u6570\u636e\uff08\u5982\u89c6\u9891\uff09\u9632\u963b\u585e\u3002 ## \u5f00\u542f bbr $ sudo echo \"net.core.default_qdisc=fq\" >> /etc/sysctl.d/233-bbr.conf $ sudo echo \"net.ipv4.tcp_congestion_control=bbr\" >> /etc/sysctl.d/233-bbr.conf $ lsmod | grep bbr tcp_bbr 20480 1 \u53cc\u663e\u5361\u8bbe\u7f6e\u4e0e\u6e38\u620f \u00b6 \u5c0f\u7c73pro15.6\u53cc\u663e\u5361\u5206\u522b\u662fHD620\u548cMX150\u3002\u540e\u8005\u67092G\u663e\u5b58\u3002\u7535\u8111\u8fd8\u662f\u4ee5\u5de5\u4f5c\u4e3a\u4e3b\uff0c\u5076\u5c14\u548c\u513f\u5b50\u73a9\u4e00\u73a9\u6e38\u620f\u3002\u5c0f\u7c73pro 15.6\u7684BIOS\u91cc\u6ca1\u6709\u53ef\u4ee5\u9009\u62e9\u7684\u663e\u5361\uff0c\u56e0\u6b64\u65e0\u6cd5\u5355\u72ec\u7981\u7528\u67d0\u4e2a\u663e\u5361\u3002\u6211\u4eec\u91c7\u7528\u53cc\u663e\u5361\u7528optimus\u4ea4\u706b\u6765\u5728\u5e94\u7528\u548c\u80fd\u8017\u4e2d\u5bfb\u627e\u5e73\u8861\u3002 $ sudo pacman -S bumblebee # \u6dfb\u52a0\u5f53\u524d\u7528\u6237\u5230\u7ec4 bumblebee $ sudo gpasswd -a ` whoami ` bumblebee $ sudo systemctl enable bumblebeed.service # test bumblebee $ optirun glxgears -info ## \u5b89\u88c5 steam $ vim /etc/pacman.conf [ multilib ] Include = /etc/pacman.d/mirrorlist $ sudo pacman -Syu $ sudo pacman -S steam \u53f3\u952e\u70b9\u51fb\u6e38\u620f-> Properties\uff0c\u6dfb\u52a0\u53c2\u6570 primusrun \u7535\u6e90\u7ba1\u7406 \u00b6 $ sudo pacman -S tlp \u8bbe\u7f6e\u7528\u6237\u76ee\u5f55\u8def\u5f84 \u00b6 # \u8def\u5f84\u53ef\u4ee5\u8bbe\u7f6e\u6210\u81ea\u5df1\u559c\u7231\u7684\u65b9\u5f0f $ sudo pacman -S xdg-user-dirs $ vim ~/.config/user-dirs.dirs XDG_DESKTOP_DIR = \" $HOME /desktop\" XDG_DOCUMENTS_DIR = \" $HOME /documents\" XDG_DOWNLOAD_DIR = \" $HOME /downloads\" XDG_MUSIC_DIR = \" $HOME /musics\" XDG_PICTURES_DIR = \" $HOME /pictures\" XDG_PUBLICSHARE_DIR = \" $HOME /public\" XDG_TEMPLATES_DIR = \" $HOME /templates\" XDG_VIDEOS_DIR = \" $HOME /videos\" # \u66f4\u65b0\u8def\u5f84\u76ee\u5f55 $ xdg-user-dirs-update \u529e\u516c\u8f6f\u4ef6 wps \u00b6 # \u6dfb\u52a0 archlinux cn \u6e90 $ sudo echo \"[archlinuxcn]\" >> /etc/pacman.conf $ sudo echo \"Server = http://repo.archlinuxcn.org/ $arch \" >> /etc/pacman.conf $ sudo pacman -Syu $ sudo pacman -S archlinuxcn-keyring $ sudo pacman -S wps-office ttf-wps-fonts # $ git clone https://aur.archlinux.org/ttf-ms-fonts.git # $ cd ttf-ms-fonts && makepkg -si \u84dd\u7259 \u00b6 \u901a\u8fc7\u914d\u7f6e\uff0c\u5927\u7ea6\u5728\u4e2d\u65ad\u84dd\u7259\u8fde\u63a530\u79d2\u540e\u624d\u80fd\u81ea\u52a8\u94fe\u63a5\u4e0a\u3002 $ sudo pacman -S bluez bluez-utils $ sudo modprobe btusb $ sudo systemctl enable bluetooth.service # \u6dfb\u52a0\u5f53\u524d\u7528\u6237\u5230\u7ec4lp $ sudo gpasswd -a ` whoami ` lp # \u542f\u52a8 bluetoothd $ sudo systemctl start bluetooth.service # \u786e\u8ba4 hci0 \u662f\u5426\u88abrfkill\u5173\u95ed $ rfkill list # \u94fe\u63a5 blue \u8bbe\u5907 $ bluetoothctl Agent registered [ bluetooth ] # \u5f00\u673a\u84dd\u7259\u81ea\u52a8\u5f00\u542f\uff0c\u5e76\u4e14\u81ea\u52a8\u8fde\u63a5\u4e4b\u524d\u63e1\u624b\u6210\u529f\u7684\u84dd\u7259\u9f20\u6807\u3002 $ sudo vim /etc/bluetooth/main.conf Name = BlueZ Class = 0x0000010c DiscoverableTimeout = 30 Cache = always ReconnectUUIDs = RecommectAttempts = 7 ReconnectIntervals = 1 ,2,4,8,16,32,64 AutoEnable = true Conda and Bioconda \u00b6 \u91c7\u7528 conda \u7ba1\u7406\u751f\u7269\u8f6f\u4ef6 # \u4e0b\u8f7d\u5b89\u88c5 conda $ cd /tmp $ wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh $ sh Miniconda3-latest-Linux-x86 ... # \u8bbe\u7f6e\u8def\u5f84\uff0c\u4e2a\u4eba\u4e00\u822c\u8bbe\u7f6e\u4e3a $HOME/.conda $ conda config --add channels defaults $ conda config --add channels conda-forge $ conda config --add channels bioconda Music \u64ad\u653e \u00b6 \u547d\u4ee4\u884c\u4e0b\u7684\u97f3\u4e50\u64ad\u653e\u5668\u4f17\u591a\uff0c\u6bd4\u8f83\u7b26\u5408\u4e2a\u4eba\u559c\u6b22\u7684\u662fcmus/nm $ sudo pacman -S cmus \u6307\u7eb9\u8bc6\u522b \u00b6 \u7528 fprintd \u9a8c\u8bc1\u65f6\uff0c\u9700\u8981\u5c06\u53f3\u624b\u98df\u6307\u5212\u7b2c\u4e00\u8282\u6162\u6162\u6ed1\u8fc7sensor\uff082\u79d2\u5de6\u53f3\uff095\u6b21\u3002\u5b9e\u9645\u4f7f\u7528\u4e0b\u6765\uff0c\u5c0f\u7c73\u7684Linux\u6307\u7eb9\u8bc6\u522b\u6548\u679c\u4e0d\u5982Win10\uff0c\u53ef\u80fd\u9700\u8981\u65b0\u7248\u672c\u7684fprint\uff0c\u76ee\u524d\u4e0d\u5efa\u8bae\u5f00\u542f\u3002 ## Archlinux \u6e90\u91cc\u7684\u7248\u672c\u8fd8\u4e0d\u652f\u6301 Elan\u3002github\u4e0b\u8f7d\u6700\u65b0\u6e90\u4ee3\u7801 ## \u652f\u6301\u4e86\u5c0f\u7c73pro 04f3:0c1a \u7684 Elan Microeletronics \u6307\u7eb9\u8bc6\u522b\u5668\u3002 $ git clone https://github.com/iafilatov/libfprint $ cd libfprint $ ./autogen.sh $ ./autoconfigure $ make && sudo make install $ sudo ln -s /usr/local/lib/libfprint.so.0 /usr/lib ## \u4e0d\u5b89\u88c5 libfprint \u4f9d\u8d56 $ sudo pacman -Sdd fprintd ## \u786e\u8ba4fprintd.service\u6b63\u5e38\u8fd0\u884c\uff0c\u5982\u679cfailed\uff0c\u7528`systemctl status fprintd`\u67e5\u770b\u95ee\u9898 $ systemctl | grep fprinted.service ## \u4fee\u6539\u767b\u5f55\u9a8c\u8bc1\u673a\u5236\uff0c\u5982\u679c\u987a\u5e8f\u662ffprintd\u5728\u524d\uff0c\u5219\u767b\u5f55\u65f6\u5148\u7528finger\u9a8c\u8bc1 $ sudo vim /etc/pam.d/system-local-login auth sufficient pam_fprintd.so auth include system-login ## \u5efa\u7acb\u6307\u7eb9\u5e76\u9a8c\u8bc1 $ fprintd-enroll Using device /net/reactivated/Fprint/Device/0 Enrolling right-index-finger finger. Enroll result: enroll-stage-passed Enroll result: enroll-stage-passed Enroll result: enroll-stage-passed Enroll result: enroll-stage-passed Enroll result: enroll-completed ## \u9a8c\u8bc1\u8fc7\u7a0b\uff0c\u770b\u5230veryify-match\u5373\u8868\u793a\u9a8c\u8bc1\u901a\u8fc7 $ fprintd-verify Using device /net/reactivated/Fprint/Device/0 Listing enrolled fingers: - #0: right-index-finger Verify result: verify-match ( done ) ## \u91cd\u542f\uff0c\u7531\u4e8e\u6211\u6ca1\u6709\u7528 Display manager\uff0c\u7528xinit startx\u6765\u542f\u52a8i3\uff0c ## \u6240\u4ee5console\u754c\u9762\u8f93\u5165\u7528\u6237\u540d\u540e\u5c31\u4f1a\u63d0\u793a\u201c\u6ed1\u52a8\u624b\u6307\u9a8c\u8bc1\u6307\u7eb9\u767b\u5f55\u201d $ reboot ## i3lock\u6307\u7eb9\u89e3\u9501\u6709\u4e00\u4e2a\u95ee\u9898\u5728\u4e8e\u9700\u8981\u8f93\u95191\u6b21\u5bc6\u7801\u540e\u624d\u80fd\u6b63\u5e38\u6307\u7eb9\u89e3\u9501\u3002 ## \u53ef\u80fd\u9700\u8981 xss-lock \u7b49\u5176\u4ed6\u65b9\u6cd5\u89e3\u51b3 $ sudo pacman -S i3lock $ sudo vim /etc/pam.d/i3lock auth include login ## \u603b\u7ed3\uff1a ## \u5c0f\u7c73\u7684 Elan \u6307\u7eb9\u8bc6\u522b\u5668\u9762\u79ef\u592a\u5c0f\uff0c\u5bfc\u81f4libfprint\u9700\u8981\u6ed1\u52a8\u624d\u80fd\u8bc6\u522b, ## \u53e6\u5916\u611f\u89c9\u6307\u7eb9\u8bc6\u522b\u901f\u5ea6\u4e0d\u662f\u7279\u522b\u654f\u9510\uff0c\u626b\u5b8c\u6307\u7eb9\u9700\u89810.5s\u5de6\u53f3\u624d\u80fd\u89e3\u9501\u3002 ## \u603b\u4f53\u4e0a\u6765\u8bf4\uff0c\u53ef\u7528\u6027\u4e0d\u662f\u592a\u9ad8\u3002\u4e2a\u4eba\u611f\u89c9\u4e0d\u5982\u6444\u50cf\u5934\u4eba\u8138\u8bc6\u522b\u53ef\u7528\u6027\u66f4\u9ad8... i3lock \u53c2\u89c1 \u8fd9\u91cc \u6444\u50cf\u5934 \u00b6 \u6444\u50cf\u5934\u9ed8\u8ba4\u914d\u7f6e\u597d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ## \u7528ffmpeg\u6d4b\u8bd5 $ ffmpeg -f v4l2 -video_size 640x480 -i /dev/video0 output.mkv $ mpv output.mkv Wine \u00b6 $ sudo pacman -S wine wine-mono wine-tricks wine_gecko $ WINEPREFIX = $HOME /.wine wineboot -u $ WINEARCH = win64 WINEPREFIX = $HOME /.wine64 winetricks fontsmooth = rgb gdiplus vcrun2008 vcrun2010 vcrun2012 vcrun2013 vcrun2015 atmlib msxml3 msxml6 gdiplus corefonts Photoshop \u00b6 \u5b89\u88c5\u7684\u7248\u672c\u662f\uff1aAdobe Photoshop CC 2018 v19.1.3.49649\uff0c\u57fa\u672c\u80fd\u6b63\u5e38\u4f7f\u7528\uff0c\u4e2a\u522b\u83dc\u5355\u663e\u793a\u4e0d\u6b63\u5e38\u3002 $ wget http://209.126.105.33/DownloadBull/Portable_Adobe_Photoshop_CC_2018_v19.0.0.165_x64.zip $ 7z e Portable_Adobe_Photoshop_CC_2018_v19.0.0.165_x64.zip $ wine64 PhotoshopPortable.exe \u7f8e\u5316\u5b57\u4f53\u8bbe\u7f6e \u00b6 !!! warning: \"\u672c\u8282\u5185\u5bb9\u66f4\u65b0\" \u968f\u7740\u66f4\u65b0\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528infinality\u6765\u6e32\u67d3\u5b57\u4f53\u3002 \u8bb8\u591a\u53d1\u884c\u7248\u5982Ubuntu\u4f18\u5316\u8fc7\u5b57\u4f53\u6e32\u67d3\u6548\u679c\uff0c\u800c ArchLinux \u4ece\u5934\u5b89\u88c5\u7684\u8bdd\u9700\u8981\u81ea\u5df1\u6765\u914d\u7f6e\u3002\u5bf9\u4e8e\u666e\u901a\u4eba\u6765\u8bf4\u8fd9\u662f\u4e00\u4e2a\u590d\u6742\u800c\u75db\u82e6\u7684\u8fc7\u7a0b\uff0c\u90a3\u4e48\u6700\u7b80\u4fbf\u7684\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5\u5b89\u88c5 Infinality \u5957\u88c5\u83b7\u5f97\u73b0\u6210\u7684\u5b57\u4f53\u4f18\u5316\u6e32\u67d3\u8bbe\u7f6e\u3002 Infinality \u662f\u4e00\u4e2a Freetype \u7684\u4fee\u6539\u7248\uff0c\u5728 Linux \u4e0b\u63d0\u4f9b\u66f4\u597d\u7684\u5b57\u4f53\u6e32\u67d3\u6548\u679c\uff0c\u5e76\u62e5\u6709\u7b80\u4fbf\u7684\u5b9a\u5236\u7279\u6027\u3002\u5b83\u8bbe\u7f6e\u4e86\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b57\u4f53\u98ce\u683c6\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u5207\u6362\u3002 \u5b89\u88c5 fontconfig-infinality-ultimate ## \u5b89\u88c5 freetype2-infinality $ sudo pacman -R freetype2 $ gpg --keyserver pgp.mit.edu --recv-keys C1A60EACE707FDA5 $ git clone https://aur.archlinux.org/packages/freetype2-infinality/ $ cd freetype2-infinality && makepkg -si ## \u5b89\u88c5 fontconfig-infinality-ultimate ## \u5148\u5378\u8f7d fontconfig $ sudo pacman -R fontconfig $ git clone https://aur.archlinux.org/fontconfig-infinality-ultimate.git $ cd fontconfig-infinality-ultimate && makepkg -si \u5c4f\u5e55\u4fdd\u62a4\u548c\u9501\u5c4f \u00b6 \u5982\u679c\u7528 xscreensaver \u6784\u5efa bindsym $mod +F12 exec i3lock \u7f51\u7edc\u5de5\u5177 \u00b6 ArchLinux \u7684 net-tools \u5df2\u7ecf\u9ed8\u8ba4 deprecated\uff0c\u539f\u6765\u5e38\u7528 netstat \u547d\u4ee4\u6709 \u65b0\u4ee3\u66ff\u5de5\u5177 \u3002 vim && Python IDE \u00b6 # \u8bbe\u7f6e vim \u914d\u7f6e $ mv ~/.vim ~/.vim.old $ sudo pacman -S python-neovim $ sh -c \" $( curl -fsSL https://raw.githubusercontent.com/jarolrod/vim-python-ide/master/setup.sh ) \" ## \u5b89\u88c5 nerd \u5b57\u4f53 $ git clone https://aur.archlinux.org/nerd-fonts-complete.git $ cd nerd-fonts-complete && makepkg -si $ git clone https://github.com/chriskempson/base16-shell.git ~/.config/base16-shell $ echo 'BASE16_SHELL=$HOME/.config/base16-shell/' >> ~/.bashrc $ echo '[ -n \"$PS1\" ] && [ -s $BASE16_SHELL/profile_helper.sh ] && eval \"$($BASE16_SHELL/profile_helper.sh)\"' >> ~/.bashrc \u8bbe\u7f6e # add these line into .vimrc if filereadable(expand(\"~/.vimrc_background\")) let base16colorspace=256 source ~/.vimrc_background endif # \u5b89\u88c5 python git module $ sudo pacman -S python-gitpython \u56fe\u6807\u7f8e\u5316 \u00b6 # \u4f7f\u7528 numix \u5957\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u559c\u6b22\u7684theme $ sudo pacman -S numix-icon-theme-git numix-circle-icon-theme-git numix-gtk-theme \u52a8\u6001\u58c1\u7eb8 \u00b6 Linux \u4e0b\u53ef\u4ee5\u7528 xwinwraper \u4e4b\u7c7b\u7684\u5de5\u5177\u5c06\u89c6\u9891\u6216 Gif \u52a8\u6001\u56fe\u7247\u4f5c\u4e3a\u58c1\u7eb8\uff0c\u8fbe\u5230\u52a8\u6001\u684c\u9762\u7684\u6548\u679c\u3002\u5f53\u7136\u4ee3\u4ef7\u662f\u727a\u7272\u4e00\u4e9bCPU\u548c\u5185\u5b58\u3002 \u8bbe\u7f6ecompton \u8bbe\u7f6exwinwrap \u51c6\u5907\u89c6\u9891\u6587\u4ef6\uff1a\u5efa\u8bae\u4f7f\u7528\u5ef6\u65f6\u6444\u5f71\u6216 # \u4e0b\u8f7d youtube \u89c6\u9891 $ youtube-dl --proxy ` socks server ` -F ` URL ` $ youtube-dl --porxy ` socks server ` -f 137 ` URL ` $ touch run_wallpaper.sh run_wallpaper.sh \u811a\u672c\u5185\u5bb9 #!/bin/sh mpv $1 --wid=\"$2\" --loop $ xwinwrap -fs -argb -ni -un -s -b -st -sp -nf -ov -- run_wallpaper.sh video.mp4 WID $ cmatrix $ ffmpeg -f x11grab -s 1920x1080 -i $DISPLAY output.mp4 \u6253\u5370\u673a \u00b6 \u4f7f\u7528CUPS\u7ba1\u7406\u6253\u5370\u673a\u3002 $ lp my.doc","title":"01. Linux \u5b89\u88c5\u793a\u4f8b"},{"location":"tutorial/Linux/01_linux-installation/#linux","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u8282\u5c06\u4e4b\u524d\u4e00\u7bc7\u4e2a\u4eba\u8d2d\u4e70\u7684\u5c0f\u7c73 15 pro\u7b14\u8bb0\u672c\u4e0a\u5b89\u88c5 ArchLinux \u7684\u6559\u7a0b\u4f5c\u4e3a\u4ecb\u7ecdLinux\u5b89\u88c5\u7684\u8303\u4f8b\u3002\u7531\u4e8e\u8bb8\u591a\u7684 Linux \u53d1\u884c\u7248\u90fd\u6709\u56fe\u5f62\u5316\u7684\u5b89\u88c5\u754c\u9762\uff0c\u53ea\u8981\u7a0d\u5fae\u5177\u5907\u4e00\u4e9b\u8ba1\u7b97\u673a\u77e5\u8bc6\uff0c\u52a0\u4e0a\u641c\u7d22\u5f15\u64ce\u5e2e\u52a9\uff0c\u5b89\u88c5\u5b8c\u6210\u96be\u5ea6\u4e0d\u5927\u3002\u4f46\u662f\u5bf9\u4e8e\u8ba1\u7b97\u673a\u3001Linux\u548c\u751f\u7269\u4fe1\u606f\u547d\u4ee4\u7684\u5b66\u4e60\u6765\u8bf4\uff0cArchLinux \u8fd9\u79cd\u547d\u4ee4\u884c\u5b89\u88c5\u754c\u9762\u66f4\u6709\u5e2e\u52a9\u3002\u4ee5\u6b64\u5b89\u88c5\u4f5c\u4e3a\u5165\u95e8\u8bfb\u7269\uff0c\u5e0c\u671b\u5bf9\u8ba1\u7b97\u673a\u548c Linux \u5b66\u4e60\u6709\u6240\u5e2e\u52a9\u3002","title":"Linux \u5b89\u88c5"},{"location":"tutorial/Linux/01_linux-installation/#pro-156-archlinux","text":"\u64cd\u4f5c\u7cfb\u7edf: ArchLinux WM: i3wm DM: none","title":"\u5c0f\u7c73 pro 15.6 \u5b89\u88c5 ArchLinux"},{"location":"tutorial/Linux/01_linux-installation/#156-pro","text":"\u4ed4\u7ec6\u8bc4\u4f30\u4e86\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u6a2a\u5411\u6bd4\u8f83\u4e86dell xps\uff0c\u534e\u4e3amate\uff0c\u5c0f\u7c73pro\u7b49\u51e0\u6b3e\u7b14\u8bb0\u672c\u3002\u6700\u7ec8\u5728\u770b\u5230\u5c0f\u7c73\u65b0\u51fa\u7684\u6e38\u620f\u672c\u5e76\u4e0d\u9002\u5408\u6211\u4e4b\u540e\uff0c\u679c\u65ad\u6dd8\u5b9d\u4e86\u5c0f\u7c73 pro 15.6 \u4f4e\u914d\u7248\uff0c5000\u4ee5\u5185\u53ef\u4ee5\u62ff\u4e0b\u3002\u4e2a\u4eba\u7684\u9700\u6c42\u662f\u4e00\u6b3e\u548c\u513f\u5b50\u5171\u540c\u4f7f\u7528\u7684\u7b14\u8bb0\u672c\u3002\u81ea\u5df1\u4e3b\u8981\u505a\u6570\u636e\u5206\u6790\u548c\u5f00\u53d1\u7528\uff0c\u540c\u65f6\u6559\u513f\u5b50\u7f16\u7a0b\uff0c\u8fd8\u53ef\u4ee5\u73a9\u73a9\u7b80\u5355\u7684\u6e38\u620f\u3002\u52a0\u4e0a\u5c0f\u7c73pro\u6781\u7b80\u5316\u7684\u8bbe\u8ba1\uff0c\u975e\u5e38\u7b26\u5408\u4e2a\u4eba\u7684\u88c5\u903c\u98ce\u683c\uff0c\u56e0\u6b64\u679c\u65ad\u5165\u624b\u3002\u66fe\u7ecf\u5728\u65b0\u6b3e\u5c0f\u7c7313\u548c15.6 pro\u4e2d\u72b9\u8c6b\u8fc7\uff0c\u6700\u7ec8\u5728\u6563\u70ed+\u566a\u97f3 vs \u4fbf\u643a\u6027\u4e2d\u59a5\u534f\u4e86\u524d\u8005\u3002 \u5982\u679c\u8981\u4f5c\u4e3a\u4e3b\u8981\u7684\u751f\u7269\u4fe1\u606f\u5b66\u5904\u7406\u7535\u8111\uff0c\u5f3a\u70c8\u5efa\u8bae\u5c06\u5185\u5b58\u5347\u7ea7\u621016G\uff0c\u518d\u81ea\u884c\u6dfb\u52a0\u786c\u76d8\u3002","title":"\u9009\u62e9\u5c0f\u7c73 15.6 pro"},{"location":"tutorial/Linux/01_linux-installation/#_1","text":"\u786c\u4ef6\u914d\u7f6e\uff1a CPU i5 8250 \u5185\u5b58 8G \u786c\u76d8 256G SSD \u5c4f\u5e55 15.6 1920x1080 IPS 72% \u8272\u57df \u8f6f\u4ef6\u914d\u7f6e\uff1a \u64cd\u4f5c\u7cfb\u7edf ArchLinux \u7a97\u53e3\u7ba1\u7406 i3-gaps \u6587\u4ef6\u7ba1\u7406 ranger \u97f3\u4e50\u64ad\u653e mpd \u89c6\u9891\u64ad\u653e mpv \u6587\u672c\u7f16\u8f91 vim \u56fe\u7247\u67e5\u770b w3m \u6587\u6863\u5904\u7406 wps/libreoffice \u56fe\u5f62\u56fe\u50cf\u5904\u7406 wine+photoship/gimp \u5c4f\u5e55\u5f55\u5236\u89c6\u9891 ffmpeg \u6e38\u620f steam \u5410\u69fd\uff1a\u673a\u5668\u5230\u624b\u57fa\u672c\u6ee1\u610f\u3002\u5c4f\u5e55\u5de6\u4e0a\u89d2\u6709\u4e00\u70b9\u6f0f\u5149\uff0c\u8003\u8651\u5230\u6211\u5927\u90e8\u5206\u662f\u5728\u7ec8\u7aef\u4e0b\u5de5\u4f5c\uff0c\u57fa\u672c\u6ca1\u6709\u5f71\u54cd\u3002\u81f3\u4e8e\u505a\u5de5\uff0c\u603b\u4f53\u611f\u89c9\u662f\u6a21\u4effmac\uff0c\u4f46\u662f\u7531\u4e8e\u6210\u672c\u53d7\u9650\u53ea\u80fd\u505a\u5230\u5927\u6982\u3002\u6bd4\u5982\u673a\u5668\u8fb9\u7f18\u7684\u5272\u624b\u611f\u76f8\u5f53\u5f3a\u70c8\uff0c\u5947\u602a\u600e\u4e48\u5f88\u5c11\u770b\u5230\u8bc4\u6d4b\u91cc\u6709\u4eba\u63d0\u5230\u8fd9\u4e00\u70b9\uff1f\u7531\u4e8e\u6211\u662f\u76f4\u7ebf\u63a7\uff0c\u5bf9\u8fd9\u4e00\u70b9\u76ee\u524d\u8868\u793a\u53ef\u4ee5\u63a5\u53d7\u3002\u8fd8\u6709\u5c31\u662f\u5f88\u591a\u8bf4\u8bf4\u7684B/C\u9762\u7f1d\u9699\u7684\u95ee\u9898\uff0c\u5982\u679c\u662f\u5b8c\u7f8e\u4e3b\u4e49\u8005\u5bf9\u8fd9\u4e00\u70b9\u4f1a\u89c9\u5f97\u5f88\u96be\u53d7\u3002\u4f46\u662f\u65e5\u5e38\u4f7f\u7528\u4e2d\u786e\u5b9e\u6ca1\u6709\u4ec0\u4e48\u5f71\u54cd\u3002\u4f7f\u7528\u624d\u662f\u7b2c\u4e00\u4f4d\u7684\u3002 BIOS\u8fc7\u4e8e\u7b80\u964b\u4e86\u3002\u6781\u7b80\u7684\u5916\u5f62\u8bbe\u8ba1\u70b9\u8d5e\uff0c\u4f46\u662f\u5185\u91cc\u4e5f\u8fc7\u4e8e\u7b80\u5355\u4e86\uff0c\u96be\u9053\u5b9a\u4f4d\u5bf9\u8c61\u662f\u5973\u6027\u7b49\u666e\u901a\u7528\u6237\uff1f\u8d77\u59cb\u5c0f\u7c73pro\u914d\u7a0b\u5e8f\u5458\u8fd8\u662f\u633a\u5408\u9002\u7684\u3002 \u5c4f\u5e55\u7684\u4f18\u70b9\u662fIPS 72% \u8272\u57df\u7684\uff0c\u786e\u5b9e\u975e\u5e38\u4eae\u4e3d\u3002\u4e0d\u8fc7\u662f\u955c\u9762\u5c4f\uff0c\u8fd9\u4e00\u70b9\u4e0d\u592a\u7b26\u5408\u6211\u7684\u9700\u6c42\u3002\u53e6\u5916\u5206\u8fa8\u7387\u662f1920x1080\uff0c\u5c5e\u4e8e\u5e38\u89c4\u914d\u7f6e\u300215\u5bf8\u76844K\u5c4f\u5e55\u786e\u5b9e\u663e\u793a\u975e\u5e38\u7ec6\u817b\uff0c\u6709\u4e00\u79cd\u77e2\u91cf\u822c\u6cb9\u753b\u7684\u611f\u89c9\u3002\u4f46\u662f4k\u7684\u7f3a\u70b9\u662f\u652f\u6301\u8fd8\u4e0d\u662f\u5f88\u7406\u60f3\uff0c\u6211\u5e38\u7528\u7684\u4e00\u4e9b Java \u8f6f\u4ef6\u5fc5\u987b\u75281.8\u7684JRE\uff0c\u4e0d\u652f\u63014k\u663e\u793a\uff0c\u7528\u8d77\u6765\u4f1a\u5f88\u9ebb\u70e6\u3002\u9ad8\u6e05\u5c4f\uff081920x1080\uff09\u867d\u7136\u9897\u7c92\u611f\u8fd8\u662f\u6bd4\u8f83\u660e\u663e\uff0c\u4f46\u662f\u8f6f\u4ef6\u3001\u6295\u5f71\u7b49\u652f\u6301\u76ee\u524d\u8fd8\u8bf4\u8fd8\u662f\u6bd44K\u66f4\u4fbf\u5229\u4e00\u4e9b\u3002","title":"\u786c\u4ef6\u4e0e\u8f6f\u4ef6"},{"location":"tutorial/Linux/01_linux-installation/#archlinux","text":"\u5c0f\u7c73\u7684BIOS\u754c\u9762\u529f\u80fd\u771f\u662f\u7b80\u5355\uff0c\u770b\u4e86\u4e00\u4e0b\u62ff\u5230\u624b\u7684\u662f0502\u7248BIOS\u3002\u5728windows10\u91cc\u8dd1\u4e86ssd\u6d4b\u8bd5\u3002BIOS \u5fc5\u987b\u8bbe\u7f6e supervisor password \u624d\u80fd\u5c06\u4fee\u6539 secure boot \u4e3a disabled\u3002\u5f00\u673a\u6309F2\u8fdb\u5165BIOS\uff0c\u6309F12\u9009\u62e9\u5f15\u5bfc\u8bbe\u5907\u3002 \u5f00\u673a\u6309F12\uff0c\u9009\u62e9U\u76d8\u542f\u52a8\uff0c\u8fdb\u5165Archlinux\u754c\u9762\u3002\u63d2\u4e0a\u4e00\u4e2a\u5927\u5bb9\u91cfU\u76d8\uff0c\u7528\u6765\u5c06\u539f\u786c\u76d8\u5185\u5bb9\u8fdb\u884c\u5907\u4efd\uff0c\u4ee5\u5907\u5c06\u6765\u9700\u8981\u6062\u590d\u65f6\u4f7f\u7528\u3002\u67e5\u770b\u4e00\u4e0b\u5f53\u524d\u78c1\u76d8\u60c5\u51b5\uff1a root@archiso~ # lsblk -f NAME FSTYPE LABEL UUID MOUNTPOINT loop0 squashfs /run/archiso/sfs/airrootfs sda -sda1 vfat BANQ C873-E5BF sdb iso9660 ARCH_201803 2018 -03-01-15-13-16-00 -sdb1 iso9660 ARCH_201803 2018 -03-01-15-13-16-00 /run/archiso/bootmnt -sdb2 vfat ARCHISO_EFI 8688 -0060 nvme0n1 -nvme0n1p1 vfat SYSTEM E479-B82E -nvme0n1p2 -nvme0n1p3 ntfs Windows 3ACC7A8CCC7A4265 -nvme0n1p4 ntfs Recovery image C2DE7AF4DE7ADFD9 \u5f53\u524d\u7248\u672c\u7684linux\u5185\u6838\u5df2\u7ecf\u5305\u542b\u4e86\u9a71\u52a8\uff0c\u4e0d\u4f1a\u51fa\u73b0nvme ssd\u786c\u76d8\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u3002\u5c0f\u7c73pro 256G SSD\u786c\u76d8\u4e0a\u67094\u4e2a\u5206\u533a\uff0c\u5206\u522b\u65f6\u7cfb\u7edf\u5f15\u5bfcEFI\u5206\u533a\uff0c\u4fdd\u7559\u5206\u533a\uff0cwin10\u5206\u533a\u548c\u7cfb\u7edf\u6062\u590d\u5206\u533a\u3002\u6211\u60f3\u4fdd\u7559win10\u7684recovery\u533a\uff0c\u627e\u4e00\u4e2aU\u76d8\u6765\u5907\u4efd\u5206\u533a\u5230\u6587\u4ef6\u3002 root@archiso~ # mkdir -p /backup root@archiso~ # mount /dev/sda1 /backup root@archiso~ # dd if=/dev/nvme0n4 of=/backup/mmipro_recovery.bin bs=64k conv=notrunc,noerror,sync status=progress 15680 +0 records in 15680 +0 records out 10276604480 bytes ( 1 .0 GB, 908 MiB ) copied, 0 .697636 s, 1 .5 GB/s \u8fde\u63a5wifi\u7f51\u7edc\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528wifi-menu\uff0c\u4e5f\u53ef\u4ee5\u7528wpa_supplicant\u547d\u4ee4\u8fde\u63a5\u3002\u8fde\u63a5\u6210\u529f\u540e\u8fd0\u884cdhcpcd\uff0c\u5c31\u53ef\u4ee5\u8bbf\u95ee\u4e92\u8054\u7f51\u7edc\u4e86\u3002 # \u7528wifi-menu root@archiso~ # wifi-menu # \u7528wpa_supplicant root@archiso~ # wpa_supplicant -i wlp2s0 -c <(wpa_passphrase \"YourSSID\" \"YourKey\") -B # \u8fde\u63a5\u7f51\u7edc root@archiso~ # dhcpcd root@archiso~ # ping -c 3 www.archlinux.org \u8003\u8651\u4e86\u5f88\u4e45\u8981\u4e0d\u8981\u52a0\u5bc6\u5b89\u88c5\uff0c\u7531\u4e8e\u662f\u548c\u5b69\u5b50\u4e00\u8d77\u4f7f\u7528\u7684\uff0c\u6709\u52a0\u5bc6\u72d7\u7684\u8bdd\u53ef\u4ee5\u9650\u5236\u5c0f\u5b69\u3002\u4f46\u662f\u8003\u8651\u5230\u53ef\u80fd\u5b58\u5728\u7684\u4e00\u4e9b\u610f\u5916\u60c5\u51b5\uff0c\u5b89\u88c5\u5c31\u91c7\u7528\u666e\u901a\u6a21\u5f0f\u5427\u3002\u5bf9\u5c0f\u5b69\u7684\u4f7f\u7528\u9650\u5236\u5c31\u4ece\u5176\u4ed6\u65b9\u9762\u7740\u624b\u4e86\u3002 \u8fd0\u884c blkdiscard \u6e05\u9664\u786c\u76d8\uff0cSSD\u4e0a\u6240\u6709\u6570\u636e\u90fd\u4f1a\u88ab\u6e05\u695a\uff0c\u8bf7\u786e\u8ba4\u51c6\u5907\u5b8c\u6210\u518d\u6267\u884c\u3002\u5206\u533a\u5f88\u7b80\u5355\uff0c\u7528fdisk\u6216\u8005parted\u90fd\u53ef\u4ee5\uff0c\u559c\u6b22\u56fe\u5f62\u5316\u754c\u9762\u7684\u53ef\u4ee5\u7528cgdisk\u3002 # \u64e6\u9664SSD\u6570\u636e root@archiso~ # blkdiscard /dev/nvme0n1 # fdisk\u5206\u533a root@archiso~ # fdisk /dev/nvme0n1 # \u521b\u5efagpt\u5206\u533a\u8868 Command ( m for help ) : g # \u521b\u5efa\u5206\u533a Command ( m for help ) : n Partition number ( 1 -128, default 1 ) : 1 First sector ( 2048 -500118158, default 2048 ) : 2048 Last sector, +sector or +size { K,M,G,T,P } ( 2048 -500118158, default 500118158 ) : +512M # parted \u5206\u533a root@archiso~ # parted /dev/nvme0n1 \u6302\u8f7d / \u548c /boot \u5206\u533a\u5230/mnt # \u6dfb\u52a0\u6302\u8f7dboot\u7684\u8def\u5f84 root@archiso~ # mkdir /mnt/boot root@archiso~ # mount /dev/nvme0n1p2 /mnt root@archiso~ # mount /dev/nvme0n1p1 /mnt/boot # \u5b89\u88c5\u57fa\u7840\u7cfb\u7edf root@archiso~ # pacstrap /mnt base base-devel # \u751f\u6210fstab root@archiso~ # genfstab -U /mnt >> /mnt/etc/fstab # chroot\u5230\u65b0\u5b89\u88c5\u7684\u7cfb\u7edf\u4e2d\u8fdb\u884c\u64cd\u4f5c root@archiso~ # arch-chroot /mnt /bin/bash # \u5b89\u88c5\u5fc3\u7cfb\u7edf\u6240\u5fc5\u987b\u7684\u65e0\u7ebf\u7f51\u7edc\u76f8\u5173\u8f6f\u4ef6 [ root@archiso / ] # pacman -S vim wpa_supplicant networkmanager \u521b\u5efa\u7ba1\u7406\u5458\u5bc6\u7801\uff0c\u65b0\u5efa\u7528\u6237mark\uff0c\u5e76\u5efa\u7acb\u4e3b\u7528\u6237\u76ee\u5f55\u548c\u5bc6\u7801\u3002\u5c06\u7528\u6237mark\u8bbe\u7f6e\u4e3awheel\u7ec4\uff0c\u83b7\u5f97\u7ba1\u7406\u5458\u6743\u9650\u3002 [ root@archiso / ] # passwd root [ root@archiso / ] # useradd -G -m mark \u4ee5\u524d\u7248\u672c\u7684grub\u4e0d\u652f\u6301nvme\uff0c\u4e0d\u786e\u5b9a\u65b0\u7248\u672c\u6216\u8005grub-git\u662f\u5426\u53ef\u4ee5\u5b8c\u7f8e\u652f\u6301\uff0c\u8fd9\u91cc\u6211\u4eec\u5c31\u4e0d\u7528grub\u5f15\u5bfc\u4e86\uff0c\u76f4\u63a5\u7528systemd-boot\u6765\u5f15\u5bfc\u7cfb\u7edf\u3002 # \u5b89\u88c5efi [ root@archiso / ] # bootctl install [ root@archiso / ] # vim /boot/efi/entities/arch.conf [ root@archiso / ] # vim /boot/efi/load.conf \u5206\u533a\u65f6\u6211\u4eec\u6ca1\u6709\u5efa\u7acbswap\u5206\u533a\uff0c\u56e0\u4e3a\u5728SSD\u4e2d\uff0c\u66f4\u559c\u6b22\u7528\u6587\u4ef6\u65b9\u5f0f\u4f7f\u7528swap\uff0c\u66f4\u4e3a\u7075\u6d3b\u3002 # mkdir /swap # fallocate -l 2G /swap/swapfile # chmod 600 /swap/swapfile # mkswap /swap/swapfile # swapon /swap/swapfile # echo \"/swap/swapfile none swap defaults 0 0\" >> /etc/fstab","title":"\u5b89\u88c5ArchLinux"},{"location":"tutorial/Linux/01_linux-installation/#teminal-urxvt","text":"\u4ece\u526a\u8d34\u677f\u4e2d\u7c98\u8d34\u5185\u5bb9\u5230urxvt\u4e2d\uff0c\u53ef\u4ee5\u7528 shift+insert\uff0c\u6216\u8005\u9f20\u6807\u4e2d\u952e\u3002\u4eceurxvt\u4e2d\u590d\u5236\uff0c\u76f4\u63a5\u7528\u9f20\u6807\u9009\u4e2d\u5373\u53ef\u3002\u590d\u5236\u5230\u5176\u4ed6\u7a0b\u5e8f\u65f6\uff0c\u53ea\u8981\u4f7f\u7528\u9f20\u6807\u4e2d\u952e\u5373\u53ef\u3002 # pacman -S xorg xorg-xinit libgl # pacman -S rxvt-unicode urxvt-perls # pacman -S linux-headers # pacman -S sudo # EDITOR=vim visudo %wheel ALL =( ALL ) ALL \u6dfb\u52a0\u5f53\u524d\u7528\u6237\uff0c\u5e76\u8d4b\u4e88\u7ba1\u7406\u5458\u6743\u9650\u3002 # useradd mark -g wheel -m # passwd mark New password: Retype new password:","title":"\u5b89\u88c5 teminal \u5de5\u5177 urxvt"},{"location":"tutorial/Linux/01_linux-installation/#_2","text":"# \u5b89\u88c5\u6587\u6cc9\u9a7f\u3001noto\u7b49\u4e2d\u6587\u5b57\u4f53 $ sudo pacman -S ttf-inconsolata wqy-microhei wqy-microhei-lite wqy-zenhei wqy-bitmapfont ttf-font-awesome ttf-arphic-ukai ttf-arphic-uming noto-fonts $ sudo ln -s /etc/fonts/conf.avail/70-no-bitmaps.conf /etc/fonts/conf.d/ $ sudo unlink /etc/fonts/conf.d/10-scal-bitmap-fonts.conf","title":"\u5b57\u4f53\u8bbe\u7f6e"},{"location":"tutorial/Linux/01_linux-installation/#_3","text":"\u5b89\u88c5 ArchLinux \u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u7528\u8fc7 wifi-menu \u5de5\u5177\u8fde\u63a5\u4e86\u65e0\u7ebf\u7f51\u7edc\u3002\u8fdb\u5165\u5b89\u88c5\u5b8c\u6bd5\u7684\u7cfb\u7edf\uff0c\u4e5f\u53ef\u4ee5\u4ee5\u7ba1\u7406\u5458\u8fd0\u884c wifi-menu \u8fde\u63a5\uff0c\u518d\u8fd0\u884c dhcpcd\uff0c\u5373\u53ef\u4e0a\u7f51\u3002\u5982\u679c\u8981\u542f\u7528\u7f51\u7edc\u670d\u52a1\uff0c\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\u548c\u8fde\u63a5\uff0c\u9700\u8981\u5b89\u88c5 NetworkManager # \u5b89\u88c5 NetworkManager $ sudo pacman -S networkmanager $ sudo systemctl enable NetworkManager # \u547d\u4ee4\u884c\u4e0b\u5efa\u7acb wifi \u8fde\u63a5 $ nmcli dev wifi connect \"your-wifi-ssid\" password \"wifi-password\" # \u901a\u8fc7\u7ec8\u7aef\u56fe\u5f62\u754c\u9762\u8bbe\u7f6e $ nmtui","title":"\u8bbe\u7f6e\u65e0\u7ebf\u7f51\u7edc"},{"location":"tutorial/Linux/01_linux-installation/#_4","text":"ArchLinux \u7684\u5185\u6838\u6a21\u5757\u5df2\u7ecf\u5305\u542b ALSA\uff0c\u6ca1\u6709\u58f0\u97f3\u662f\u56e0\u4e3a\u9ed8\u8ba4\u8bbe\u7f6e\u6210\u9759\u97f3\u72b6\u6001\u3002\u63a7\u5236\u58f0\u97f3\uff0c\u8981\u5b89\u88c5\u76f8\u5e94\u7684\u5de5\u5177\u3002 # alsa \u5de5\u5177 $ sudo pacman -S alsa-utils alsa-oss # alsamixer \u914d\u7f6e\u58f0\u97f3\uff0c\u901a\u8fc7ncurse\u754c\u9762\u3002 # \u8f93\u51faMaster\u4e0b\u65b9\u5982\u679c\u663e\u793a\u662fMM\uff0c\u5219\u5904\u4e8emute\u9759\u97f3\u72b6\u6001\uff0c\u6309m\u952e\u63a5\u89e6 $ alsamixer # amixer \u547d\u4ee4\u884c\u58f0\u97f3\u8bbe\u7f6e\uff0c\u4e0b\u9762\u547d\u4ee4\u89e3\u9664\u9759\u97f3 $ amixer sset Master unmute # \u67e5\u770b\u6240\u6709 mixer $ amixer scontrols \u58f0\u97f3\u914d\u7f6e\u6587\u4ef6\uff0c\u7cfb\u7edf\u7ea7\u7684\u5728 /etc/asound.conf \uff0c\u7528\u6237\u7ea7\u7684\u5728 ~/.asound.rc","title":"\u8bbe\u7f6e\u97f3\u9891\u8f93\u5165\u8f93\u51fa"},{"location":"tutorial/Linux/01_linux-installation/#_5","text":"ICC\u662f1993\u5e74\u7531\u5305\u62ecAdobe\u3001Apple\u3001Kodak\u3001Microsoft\u5728\u5185\u7684\u6570\u5341\u5bb6\u516c\u53f8\u53d1\u8d77\u5e76\u6210\u7acb\u7684\uff0c\u5168\u79f0\u662f\u56fd\u9645\u8272\u5f69\u8054\u76df\uff08International Color Consortium\uff09\uff0c\u7b80\u79f0ICC\u3002\u8fd9\u4e2a\u7ec4\u7ec7\u7684\u4e3b\u8981\u76ee\u6807\uff0c\u5c31\u662f\u8981\u5728\u5404\u4e2a\u8bbe\u5907\u3001\u8f6f\u4ef6\u4e4b\u95f4\u5f62\u6210\u7edf\u4e00\u7684\u8272\u5f69\u6807\u51c6\uff0c\u5373ICC\u6807\u51c6\u3002\u6700\u7ec8\u7684\u76ee\u6807\u5c31\u662f\u8ba9\u8f93\u5165\u8bbe\u5907\uff08\u5982\u6570\u7801\u76f8\u673a\uff09\u3001\u663e\u793a\u8bbe\u5907\uff08\u5982\u663e\u793a\u5668\uff09\u3001\u8f93\u51fa\u8bbe\u5907\uff08\u5982\u6253\u5370\u673a\uff09\u80fd\u591f\u81ea\u59cb\u81f3\u7ec8\u5f97\u4fdd\u8bc1\u8272\u5f69\u88ab\u51c6\u786e\u91cd\u73b0\u3002 ICC\u501f\u52a9\u4e8e\u4e00\u4e2a\u72ec\u7acb\u7684\u8272\u5f69\u7a7a\u95f4\u5373\u8bbe\u5907\u8272\u5f69\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6\u8fde\u63a5\u7a7a\u95f4/\u53c2\u8003\u7a7a\u95f4\uff08Profile Connection Space\uff0c\u7f29\u5199PCS\uff09\u4f5c\u4e3a\u8272\u5f69\u7a7a\u95f4\u8f6c\u6362\u7684\u4e2d\u95f4\u8272\u5f69\u7a7a\u95f4\uff0c\u901a\u8fc7\u5f69\u8272\u8bbe\u5907\u8272\u5f69\u7a7a\u95f4\uff08RGB\u6216CMYK\uff09\u548cPCS\u7a7a\u95f4\u4e4b\u95f4\u7684\u8054\u7cfb\u4e3a\u8be5\u8bbe\u5907\u5efa\u7acb\u8bbe\u5907\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6\uff08Profile\uff09\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u5bf9\u8272\u5f69\u7684\u5f00\u653e\u6027\u7ba1\u7406\uff0c\u4f7f\u5f97\u8272\u5f69\u4f20\u9012\u4e0d\u4f9d\u8d56\u4e8e\u5f69\u8272\u8bbe\u5907\u3002PCS\u7a7a\u95f4\u662f\u901a\u8fc7XYZ\u7a7a\u95f4\u6216LAB\u7a7a\u95f4\u6765\u5b9a\u4e49\u7684\u3002ICC\u6807\u51c6\u603b\u5171\u89c4\u5b9a\u4e867\u79cd\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6Profile\uff0c\u5176\u4e2d\u5305\u62ec\uff1a3\u79cd\u57fa\u672c\u8bbe\u5907\u7684\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6Profile\uff0c\u5373\u8f93\u5165\u8bbe\u5907Profile\u6587\u4ef6\u3001\u663e\u793a\u8bbe\u5907Profile\u6587\u4ef6\u548c\u8f93\u51fa\u8bbe\u5907Profile\u6587\u4ef6\uff1b4\u4e2a\u9644\u52a0\u7684\u7279\u5f81\u63cf\u8ff0\u6587\u4ef6Profile\uff0c\u5373\u8bbe\u5907\u94fe\u63a5Profile\u3001\u8272\u5f69\u7a7a\u95f4\u8f6c\u6362Profile\u3001\u62bd\u8c61Profile\u548c\u88ab\u547d\u540d\u8272Profile \u5728 Mac \u4e0e Windows \u5e73\u53f0\u4e0a\uff0c\u540d\u79f0\u5206\u522b\u88ab\u81ea\u52a8\u52a0\u4e0a .icc \u4e0e .icm \u7684\u914d\u7f6e\u6587\u4ef6\u6269\u5c55\u540d\u3002.icm \u4e0e .icc \u6269\u5c55\u540d\u53ef\u4ee5\u4e92\u6362\u3002 ArchLinux\u5b89\u88c5\u5b8c\u540e\uff0c\u9ed8\u8ba4\u7684\u5c4f\u5e55\u8272\u6e29\u504f\u51b7\u3002\u53ef\u4ee5\u7528Win10\u7684icc\u6587\u4ef6\u77eb\u6b63\u3002\u5982\u679c\u6ca1\u6709\u5907\u4efd\u539f\u6709\u8272\u5f69\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u65b9\u6cd5\u6765\u52a0\u8f7d\u3002\u76f8\u5173\u5185\u5bb9 \u53c2\u89c1\u8fd9\u91cc \u3002 ## \u53ef\u4ee5\u7528 edid-decode \u6765\u67e5\u770b\u5c4f\u5e55\u53c2\u6570\uff0c\u5c0f\u7c73pro\u7684\u5c4f\u5e55\u662f\u4eac\u4e1c\u65b9BOE ## \u751f\u4ea7\u7684\u3002\u6211\u7684\u8fd9\u5757\u662f2017\u5e7418\u5468\u51fa\u54c1\u3002\u4e0d\u5173\u5fc3\u53c2\u6570\u7684\u8bdd\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e00\u6b65 $ git clone https://aur.archlinux.org/edid-decode-git.git $ cd edid-decode $ makepkg -si $ edid-decode < /sys/class/drm/card0-eDP-1/edid Extracted contents: header: 00 ff ff ff ff ff ff 00 serial number: 09 e5 47 07 00 00 00 00 12 1b version: 01 04 basic params: a5 22 13 78 02 chroma info: 1b bb a6 58 55 9d 26 0e 4f 55 established: 00 00 00 standard: 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 descriptor 1 : 9c 3b 80 36 71 38 3c 40 30 20 36 00 58 c2 10 00 00 1a descriptor 2 : fd 2d 80 0e 71 38 28 40 30 20 36 00 58 c2 10 00 00 1a descriptor 3 : 00 00 00 fe 00 42 4f 45 20 43 51 0a 20 20 20 20 20 20 descriptor 4 : 00 00 00 fe 00 4e 56 31 35 36 46 48 4d 2d 4e 36 31 0a extensions: 00 checksum: 30 EDID version: 1 .4 Manufacturer: BOE Model 747 Serial Number 0 Made in week 18 of 2017 Digital display 8 bits per primary color channel DisplayPort interface Maximum image size: 34 cm x 19 cm Gamma: 2 .20 Supported color formats: RGB 4 :4:4 First detailed timing includes the native pixel format and preferred refresh rate Display x,y Chromaticity: Red: 0 .6484, 0 .3447 Green: 0 .3339, 0 .6162 Blue: 0 .1503, 0 .0576 White: 0 .3105, 0 .3349 Established timings supported: Standard timings supported: Detailed mode: Clock 152 .600 MHz, 344 mm x 194 mm 1920 1968 2000 2230 hborder 0 1080 1083 1089 1140 vborder 0 +hsync -vsync VertFreq: 60 Hz, HorFreq: 68430 Hz Detailed mode: Clock 117 .730 MHz, 344 mm x 194 mm 1920 1968 2000 2190 hborder 0 1080 1083 1089 1120 vborder 0 +hsync -vsync VertFreq: 47 Hz, HorFreq: 53757 Hz ASCII string: BOE CQ ASCII string: NV156FHM-N61 Checksum: 0x30 ( valid ) EDID block does NOT conform to EDID 1 .4! Missing name descriptor Missing monitor ranges \u6ca1\u6709\u5907\u4efdicc\u6587\u4ef6\u7684\u8bdd\uff0c\u53ef\u4ee5\u5728 \u8fd9\u91cc \u4e0b\u8f7d\u3002\u901a\u8fc7.xinitrc\u7528\u6237\u7ea7\u65b9\u5f0f\u5728\u8fdb\u5165\u684c\u9762\u7cfb\u7edf\u5e76\u52a0\u8f7d\u3002 # \u5907\u4efdicm\u6587\u4ef6\uff0c\u5b89\u88c5xcalib $ wget https://www.notebookcheck.net/uploads/tx_nbc2/BOE_CQ_______NV156FHM_N61.icm $ sudo cp BOE*.icm /usr/local/share/color/icc/BOE_CQ_NV156FHM_N61.icm $ git clone https://aur.archlinux.org/xcalib.git $ cd xcalib $ makepkg -si $ echo \"/usr/bin/xcalib -d :0 /usr/local/share/color/icc/BOE_CQ_NV156FHM_N61.icm\" >> ~/.xinitrc","title":"\u5c4f\u5e55\u8272\u5f69\u77eb\u6b63"},{"location":"tutorial/Linux/01_linux-installation/#_6","text":"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u4f1a\u53d1\u73b0\u952e\u76d8\u529f\u80fd\u952e\u6ca1\u6709\u542f\u7528\u3002\u7528 xev | awk -F'[ )]+' '/^KeyPress/ { a[NR+2] } NR in a { printf \"%-3s %s\\n\", $5, $8 }' \u6d4b\u8bd5\u53d1\u73b0\u5b9e\u9645\u4e0a\u662fFn+F1 12\u9ed8\u8ba4\u8bbe\u7f6e\u6210\u4e86F1\uff5e12\u529f\u80fd\u3002\u8fd9\u5728\u4e00\u4e9b\u7b14\u8bb0\u672c\u4e2dBIOS\u53ef\u4ee5\u6539\u3002\u5c0f\u7c73\u7b14\u8bb0\u672c\u5982\u679c\u8981\u5728F1\uff5e12\u548cFn+F1 F12\u4e4b\u95f4\u5207\u6362\uff0c\u53ea\u8981\u6309\u4e0bFn+Esc\u5373\u53ef\u3002 ## \u67e5\u770b\u952e\u76d8\u6309\u952e\u5bf9\u5e94\u529f\u80fd $ xmodmap -pke | less ... F1-F12\u5bf9\u5e94\u6309\u952e\uff1a F1 121 F2 122 F3 123 F4 232 F5 233 F6 133 F7 F8 F9 F10 F11 107 F12 118 \u63a7\u5236\u5c4f\u5e55\u4eae\u5ea6\uff0cxbacklight\u4e0d\u8d77\u4f5c\u7528\uff0c\u4f7f\u7528light\u63a7\u5236 $ sudo pacman -S light ## eidt in .config/.i3/config bindsym XF86MonBrightnessUp exec light -A 10 bindsym XF86MonBrightnessDown exec light -U 10 ## \u5982\u679c\u60f3\u67e5\u770b\u5f53\u524d\u4eae\u5ea6 $ light -G \u63a7\u5236\u58f0\u97f3\uff0c\u8fd9\u91cc\u4f7f\u7528amixer\uff08pactl for pulseAudio\uff09 ## edit in .config/.i3/config bindsym XF86AudioRaiseVolume exec amixer set Master 10 %+ bindsym XF86AudioLowerVolume exec amixer set Master 10 %- bindsym XF86AudioMute exec amixer set Master toggle \u907f\u514d\u7535\u6e90\u6309\u94ae\u8bef\u89e6\uff0c\u8fdb\u884c\u4ee5\u4e0b\u8bbe\u7f6e\u3002 $ sudo echo \"HandlePowerKey=ignore\" >> /etc/systemd/logind.conf ## edit in .config/i3/config bindsym --release XF86PowerOff mode \" $power \" set $power Say Goodbye? [ L ] ogout | [ S ] hutdown | [ C ] ancel mode \" $power \" { bindsym l exec i3-msg exit bindsym s exec systemctl poweroff bindsym c mode \"default\" bindsym Return mode \"default\" bindsym Escape mode \"default\" }","title":"\u952e\u76d8\u6309\u952e\u8bbe\u7f6e"},{"location":"tutorial/Linux/01_linux-installation/#_7","text":"$ sudo pacman -S xf86-input-libinput $ sudo vim /etc/X11/xorg.conf.d/20-touchpad.conf Section \"InputClass\" Identifier \"libinput touchpad\" Driver \"libinput\" MatchIsTouchpad \"on\" MatchDevicePath \"/dev/input/event*\" Option \"Tapping\" \"on\" Option \"ClickMethod\" \"clickfinger\" Option \"NaturalScrolling\" \"true\" EndSection","title":"\u8bbe\u7f6e\u89e6\u6478\u677f"},{"location":"tutorial/Linux/01_linux-installation/#i3-gaps","text":"# \u5c06\u542f\u52a8\u811a\u672c\u6dfb\u52a0\u5230 .xinitrc $ echo \"exec i3\" >> ~/.xinitrc","title":"\u5b89\u88c5 i3-gaps"},{"location":"tutorial/Linux/01_linux-installation/#polybar","text":"# \u5b89\u88c5\u65e0\u7ebf wifi \u652f\u6301 $ sudo pacman -S wireless_tools # \u5b89\u88c5 mpd \u652f\u6301 $ sudo pacman -S libmpdclient mpd # $ git clone https:// $ makepkg -si","title":"\u5b89\u88c5polybar"},{"location":"tutorial/Linux/01_linux-installation/#_8","text":"# \u5b89\u88c5\u6d4f\u89c8\u5668 $ sudo pacman -S chromium firefox pepper-flash ttf-liberation # \u5b89\u88c5 git $ sudo pacman -S git-core # \u5b89\u88c5 python3 \u4ee5\u53ca python \u865a\u62df\u73af\u5883 $ sudo pacman -S python python-pipenv","title":"\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6"},{"location":"tutorial/Linux/01_linux-installation/#_9","text":"\u6211\u4eec\u7528 ranger \u6765\u505a\u4e3a\u6587\u4ef6\u7ba1\u7406\u5668\u3002 $ pacman -S ranger","title":"\u5b89\u88c5\u6587\u4ef6\u7ba1\u7406\u5668"},{"location":"tutorial/Linux/01_linux-installation/#_10","text":"# \u5b89\u88c5 fcitx $ sudo pacman -S fcitx $ vim ~/.xinitrc export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = @im = fcitx # \u5b89\u88c5 im \u548c\u62fc\u97f3\u8f93\u5165\u6cd5 $ sudo pacman -S fcitx-im $ sudo pacman -S fcitx-googlepinyin # \u4e2a\u522b\u7248\u672c\u7684 wps \u9700\u8981\u5728\u542f\u52a8\u811a\u672c\u4e2d\u52a0\u5165 export QT_IM_MODULE=fcitx \u624d\u80fd\u4f7f\u7528\u8f93\u5165\u6cd5\u3002","title":"\u4e2d\u6587\u8f93\u5165"},{"location":"tutorial/Linux/01_linux-installation/#_11","text":"\u4fee\u590d sslocal \u4e0e openssl 1.1 \u51b2\u7a81\uff0c\u4fee\u590d\u65b9\u5f0f\u53c2\u89c1 \u8fd9\u91cc $ cd /usr/lib/python3.6/site-packages/shadowsocks/crypto/ $ sudo cp openssl.py openssl.py.bak $ sudo sed 's/EVP_CIPHER_CTX_cleanup/EVP_CIPHER_CTX_reset/g' openssl.py > openssl.py \u4f7f\u7528shadowsocks\uff0c\u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u8fd0\u884c ## \u7528\u6237\u7ea7 shadowsocks $ sudo sslocal -c ~/.config/shadowsocks/server.json -d start --user mark ## \u8bbe\u7f6e\u5f00\u673a\u81ea\u52a8\u8fd0\u884c\u7cfb\u7edf\u7ea7shadowsocks\uff0c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u4f7f\u7528 $ sudo mkdir /etc/shadowsocks $ sudo ln -s ~/.config/shadowsocks/server.json /etc/shadowsocks/ $ sudo vim /etc/systemd/system/sslocal.service [ Unit ] Description = Daemon to start Shadowsocks Client Wants = network-online.target After = network.target [ Service ] Type = simple ExecStart = /usr/bin/sslocal -c /etc/shadowsocks/server.json --pid-file /var/run/sslocal.pid --log-file /var/log/sslocal.log [ Install ] WantedBy = multi-user.target ## systemd \u8bbe\u7f6e $ sudo systemctl enable sslocal.service $ sudo systemctl start sslocal.service $ sudo systemctl stop sslocal.service \u8bbe\u7f6e\u6d4f\u89c8\u5668\u63d2\u4ef6 ## SwitchyOmega for Chromium $ wget https://www.switchyomega.com/static/file/v2.5.6/SwitchyOmega_Chromium.crx $ 7z x SwitchyOmega_Chromium -r chromium://extensions Developer mode load extensions packs ## SwitchOmega for Firefox $ wget https://www.switchyomega.com/static/file/v2.5.6/SwitchyOmega_Firefox.fx.xpi about:addons Install Add-ons From File \u672c\u5730\u5f00\u542fbbr\uff0c\u4e0a\u4f20\u6570\u636e\uff08\u5982\u89c6\u9891\uff09\u9632\u963b\u585e\u3002 ## \u5f00\u542f bbr $ sudo echo \"net.core.default_qdisc=fq\" >> /etc/sysctl.d/233-bbr.conf $ sudo echo \"net.ipv4.tcp_congestion_control=bbr\" >> /etc/sysctl.d/233-bbr.conf $ lsmod | grep bbr tcp_bbr 20480 1","title":"\u79d1\u5b66\u4e0a\u7f51"},{"location":"tutorial/Linux/01_linux-installation/#_12","text":"\u5c0f\u7c73pro15.6\u53cc\u663e\u5361\u5206\u522b\u662fHD620\u548cMX150\u3002\u540e\u8005\u67092G\u663e\u5b58\u3002\u7535\u8111\u8fd8\u662f\u4ee5\u5de5\u4f5c\u4e3a\u4e3b\uff0c\u5076\u5c14\u548c\u513f\u5b50\u73a9\u4e00\u73a9\u6e38\u620f\u3002\u5c0f\u7c73pro 15.6\u7684BIOS\u91cc\u6ca1\u6709\u53ef\u4ee5\u9009\u62e9\u7684\u663e\u5361\uff0c\u56e0\u6b64\u65e0\u6cd5\u5355\u72ec\u7981\u7528\u67d0\u4e2a\u663e\u5361\u3002\u6211\u4eec\u91c7\u7528\u53cc\u663e\u5361\u7528optimus\u4ea4\u706b\u6765\u5728\u5e94\u7528\u548c\u80fd\u8017\u4e2d\u5bfb\u627e\u5e73\u8861\u3002 $ sudo pacman -S bumblebee # \u6dfb\u52a0\u5f53\u524d\u7528\u6237\u5230\u7ec4 bumblebee $ sudo gpasswd -a ` whoami ` bumblebee $ sudo systemctl enable bumblebeed.service # test bumblebee $ optirun glxgears -info ## \u5b89\u88c5 steam $ vim /etc/pacman.conf [ multilib ] Include = /etc/pacman.d/mirrorlist $ sudo pacman -Syu $ sudo pacman -S steam \u53f3\u952e\u70b9\u51fb\u6e38\u620f-> Properties\uff0c\u6dfb\u52a0\u53c2\u6570 primusrun","title":"\u53cc\u663e\u5361\u8bbe\u7f6e\u4e0e\u6e38\u620f"},{"location":"tutorial/Linux/01_linux-installation/#_13","text":"$ sudo pacman -S tlp","title":"\u7535\u6e90\u7ba1\u7406"},{"location":"tutorial/Linux/01_linux-installation/#_14","text":"# \u8def\u5f84\u53ef\u4ee5\u8bbe\u7f6e\u6210\u81ea\u5df1\u559c\u7231\u7684\u65b9\u5f0f $ sudo pacman -S xdg-user-dirs $ vim ~/.config/user-dirs.dirs XDG_DESKTOP_DIR = \" $HOME /desktop\" XDG_DOCUMENTS_DIR = \" $HOME /documents\" XDG_DOWNLOAD_DIR = \" $HOME /downloads\" XDG_MUSIC_DIR = \" $HOME /musics\" XDG_PICTURES_DIR = \" $HOME /pictures\" XDG_PUBLICSHARE_DIR = \" $HOME /public\" XDG_TEMPLATES_DIR = \" $HOME /templates\" XDG_VIDEOS_DIR = \" $HOME /videos\" # \u66f4\u65b0\u8def\u5f84\u76ee\u5f55 $ xdg-user-dirs-update","title":"\u8bbe\u7f6e\u7528\u6237\u76ee\u5f55\u8def\u5f84"},{"location":"tutorial/Linux/01_linux-installation/#wps","text":"# \u6dfb\u52a0 archlinux cn \u6e90 $ sudo echo \"[archlinuxcn]\" >> /etc/pacman.conf $ sudo echo \"Server = http://repo.archlinuxcn.org/ $arch \" >> /etc/pacman.conf $ sudo pacman -Syu $ sudo pacman -S archlinuxcn-keyring $ sudo pacman -S wps-office ttf-wps-fonts # $ git clone https://aur.archlinux.org/ttf-ms-fonts.git # $ cd ttf-ms-fonts && makepkg -si","title":"\u529e\u516c\u8f6f\u4ef6 wps"},{"location":"tutorial/Linux/01_linux-installation/#_15","text":"\u901a\u8fc7\u914d\u7f6e\uff0c\u5927\u7ea6\u5728\u4e2d\u65ad\u84dd\u7259\u8fde\u63a530\u79d2\u540e\u624d\u80fd\u81ea\u52a8\u94fe\u63a5\u4e0a\u3002 $ sudo pacman -S bluez bluez-utils $ sudo modprobe btusb $ sudo systemctl enable bluetooth.service # \u6dfb\u52a0\u5f53\u524d\u7528\u6237\u5230\u7ec4lp $ sudo gpasswd -a ` whoami ` lp # \u542f\u52a8 bluetoothd $ sudo systemctl start bluetooth.service # \u786e\u8ba4 hci0 \u662f\u5426\u88abrfkill\u5173\u95ed $ rfkill list # \u94fe\u63a5 blue \u8bbe\u5907 $ bluetoothctl Agent registered [ bluetooth ] # \u5f00\u673a\u84dd\u7259\u81ea\u52a8\u5f00\u542f\uff0c\u5e76\u4e14\u81ea\u52a8\u8fde\u63a5\u4e4b\u524d\u63e1\u624b\u6210\u529f\u7684\u84dd\u7259\u9f20\u6807\u3002 $ sudo vim /etc/bluetooth/main.conf Name = BlueZ Class = 0x0000010c DiscoverableTimeout = 30 Cache = always ReconnectUUIDs = RecommectAttempts = 7 ReconnectIntervals = 1 ,2,4,8,16,32,64 AutoEnable = true","title":"\u84dd\u7259"},{"location":"tutorial/Linux/01_linux-installation/#conda-and-bioconda","text":"\u91c7\u7528 conda \u7ba1\u7406\u751f\u7269\u8f6f\u4ef6 # \u4e0b\u8f7d\u5b89\u88c5 conda $ cd /tmp $ wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh $ sh Miniconda3-latest-Linux-x86 ... # \u8bbe\u7f6e\u8def\u5f84\uff0c\u4e2a\u4eba\u4e00\u822c\u8bbe\u7f6e\u4e3a $HOME/.conda $ conda config --add channels defaults $ conda config --add channels conda-forge $ conda config --add channels bioconda","title":"Conda and Bioconda"},{"location":"tutorial/Linux/01_linux-installation/#music","text":"\u547d\u4ee4\u884c\u4e0b\u7684\u97f3\u4e50\u64ad\u653e\u5668\u4f17\u591a\uff0c\u6bd4\u8f83\u7b26\u5408\u4e2a\u4eba\u559c\u6b22\u7684\u662fcmus/nm $ sudo pacman -S cmus","title":"Music \u64ad\u653e"},{"location":"tutorial/Linux/01_linux-installation/#_16","text":"\u7528 fprintd \u9a8c\u8bc1\u65f6\uff0c\u9700\u8981\u5c06\u53f3\u624b\u98df\u6307\u5212\u7b2c\u4e00\u8282\u6162\u6162\u6ed1\u8fc7sensor\uff082\u79d2\u5de6\u53f3\uff095\u6b21\u3002\u5b9e\u9645\u4f7f\u7528\u4e0b\u6765\uff0c\u5c0f\u7c73\u7684Linux\u6307\u7eb9\u8bc6\u522b\u6548\u679c\u4e0d\u5982Win10\uff0c\u53ef\u80fd\u9700\u8981\u65b0\u7248\u672c\u7684fprint\uff0c\u76ee\u524d\u4e0d\u5efa\u8bae\u5f00\u542f\u3002 ## Archlinux \u6e90\u91cc\u7684\u7248\u672c\u8fd8\u4e0d\u652f\u6301 Elan\u3002github\u4e0b\u8f7d\u6700\u65b0\u6e90\u4ee3\u7801 ## \u652f\u6301\u4e86\u5c0f\u7c73pro 04f3:0c1a \u7684 Elan Microeletronics \u6307\u7eb9\u8bc6\u522b\u5668\u3002 $ git clone https://github.com/iafilatov/libfprint $ cd libfprint $ ./autogen.sh $ ./autoconfigure $ make && sudo make install $ sudo ln -s /usr/local/lib/libfprint.so.0 /usr/lib ## \u4e0d\u5b89\u88c5 libfprint \u4f9d\u8d56 $ sudo pacman -Sdd fprintd ## \u786e\u8ba4fprintd.service\u6b63\u5e38\u8fd0\u884c\uff0c\u5982\u679cfailed\uff0c\u7528`systemctl status fprintd`\u67e5\u770b\u95ee\u9898 $ systemctl | grep fprinted.service ## \u4fee\u6539\u767b\u5f55\u9a8c\u8bc1\u673a\u5236\uff0c\u5982\u679c\u987a\u5e8f\u662ffprintd\u5728\u524d\uff0c\u5219\u767b\u5f55\u65f6\u5148\u7528finger\u9a8c\u8bc1 $ sudo vim /etc/pam.d/system-local-login auth sufficient pam_fprintd.so auth include system-login ## \u5efa\u7acb\u6307\u7eb9\u5e76\u9a8c\u8bc1 $ fprintd-enroll Using device /net/reactivated/Fprint/Device/0 Enrolling right-index-finger finger. Enroll result: enroll-stage-passed Enroll result: enroll-stage-passed Enroll result: enroll-stage-passed Enroll result: enroll-stage-passed Enroll result: enroll-completed ## \u9a8c\u8bc1\u8fc7\u7a0b\uff0c\u770b\u5230veryify-match\u5373\u8868\u793a\u9a8c\u8bc1\u901a\u8fc7 $ fprintd-verify Using device /net/reactivated/Fprint/Device/0 Listing enrolled fingers: - #0: right-index-finger Verify result: verify-match ( done ) ## \u91cd\u542f\uff0c\u7531\u4e8e\u6211\u6ca1\u6709\u7528 Display manager\uff0c\u7528xinit startx\u6765\u542f\u52a8i3\uff0c ## \u6240\u4ee5console\u754c\u9762\u8f93\u5165\u7528\u6237\u540d\u540e\u5c31\u4f1a\u63d0\u793a\u201c\u6ed1\u52a8\u624b\u6307\u9a8c\u8bc1\u6307\u7eb9\u767b\u5f55\u201d $ reboot ## i3lock\u6307\u7eb9\u89e3\u9501\u6709\u4e00\u4e2a\u95ee\u9898\u5728\u4e8e\u9700\u8981\u8f93\u95191\u6b21\u5bc6\u7801\u540e\u624d\u80fd\u6b63\u5e38\u6307\u7eb9\u89e3\u9501\u3002 ## \u53ef\u80fd\u9700\u8981 xss-lock \u7b49\u5176\u4ed6\u65b9\u6cd5\u89e3\u51b3 $ sudo pacman -S i3lock $ sudo vim /etc/pam.d/i3lock auth include login ## \u603b\u7ed3\uff1a ## \u5c0f\u7c73\u7684 Elan \u6307\u7eb9\u8bc6\u522b\u5668\u9762\u79ef\u592a\u5c0f\uff0c\u5bfc\u81f4libfprint\u9700\u8981\u6ed1\u52a8\u624d\u80fd\u8bc6\u522b, ## \u53e6\u5916\u611f\u89c9\u6307\u7eb9\u8bc6\u522b\u901f\u5ea6\u4e0d\u662f\u7279\u522b\u654f\u9510\uff0c\u626b\u5b8c\u6307\u7eb9\u9700\u89810.5s\u5de6\u53f3\u624d\u80fd\u89e3\u9501\u3002 ## \u603b\u4f53\u4e0a\u6765\u8bf4\uff0c\u53ef\u7528\u6027\u4e0d\u662f\u592a\u9ad8\u3002\u4e2a\u4eba\u611f\u89c9\u4e0d\u5982\u6444\u50cf\u5934\u4eba\u8138\u8bc6\u522b\u53ef\u7528\u6027\u66f4\u9ad8... i3lock \u53c2\u89c1 \u8fd9\u91cc","title":"\u6307\u7eb9\u8bc6\u522b"},{"location":"tutorial/Linux/01_linux-installation/#_17","text":"\u6444\u50cf\u5934\u9ed8\u8ba4\u914d\u7f6e\u597d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ## \u7528ffmpeg\u6d4b\u8bd5 $ ffmpeg -f v4l2 -video_size 640x480 -i /dev/video0 output.mkv $ mpv output.mkv","title":"\u6444\u50cf\u5934"},{"location":"tutorial/Linux/01_linux-installation/#wine","text":"$ sudo pacman -S wine wine-mono wine-tricks wine_gecko $ WINEPREFIX = $HOME /.wine wineboot -u $ WINEARCH = win64 WINEPREFIX = $HOME /.wine64 winetricks fontsmooth = rgb gdiplus vcrun2008 vcrun2010 vcrun2012 vcrun2013 vcrun2015 atmlib msxml3 msxml6 gdiplus corefonts","title":"Wine"},{"location":"tutorial/Linux/01_linux-installation/#photoshop","text":"\u5b89\u88c5\u7684\u7248\u672c\u662f\uff1aAdobe Photoshop CC 2018 v19.1.3.49649\uff0c\u57fa\u672c\u80fd\u6b63\u5e38\u4f7f\u7528\uff0c\u4e2a\u522b\u83dc\u5355\u663e\u793a\u4e0d\u6b63\u5e38\u3002 $ wget http://209.126.105.33/DownloadBull/Portable_Adobe_Photoshop_CC_2018_v19.0.0.165_x64.zip $ 7z e Portable_Adobe_Photoshop_CC_2018_v19.0.0.165_x64.zip $ wine64 PhotoshopPortable.exe","title":"Photoshop"},{"location":"tutorial/Linux/01_linux-installation/#_18","text":"!!! warning: \"\u672c\u8282\u5185\u5bb9\u66f4\u65b0\" \u968f\u7740\u66f4\u65b0\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528infinality\u6765\u6e32\u67d3\u5b57\u4f53\u3002 \u8bb8\u591a\u53d1\u884c\u7248\u5982Ubuntu\u4f18\u5316\u8fc7\u5b57\u4f53\u6e32\u67d3\u6548\u679c\uff0c\u800c ArchLinux \u4ece\u5934\u5b89\u88c5\u7684\u8bdd\u9700\u8981\u81ea\u5df1\u6765\u914d\u7f6e\u3002\u5bf9\u4e8e\u666e\u901a\u4eba\u6765\u8bf4\u8fd9\u662f\u4e00\u4e2a\u590d\u6742\u800c\u75db\u82e6\u7684\u8fc7\u7a0b\uff0c\u90a3\u4e48\u6700\u7b80\u4fbf\u7684\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5\u5b89\u88c5 Infinality \u5957\u88c5\u83b7\u5f97\u73b0\u6210\u7684\u5b57\u4f53\u4f18\u5316\u6e32\u67d3\u8bbe\u7f6e\u3002 Infinality \u662f\u4e00\u4e2a Freetype \u7684\u4fee\u6539\u7248\uff0c\u5728 Linux \u4e0b\u63d0\u4f9b\u66f4\u597d\u7684\u5b57\u4f53\u6e32\u67d3\u6548\u679c\uff0c\u5e76\u62e5\u6709\u7b80\u4fbf\u7684\u5b9a\u5236\u7279\u6027\u3002\u5b83\u8bbe\u7f6e\u4e86\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b57\u4f53\u98ce\u683c6\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u5207\u6362\u3002 \u5b89\u88c5 fontconfig-infinality-ultimate ## \u5b89\u88c5 freetype2-infinality $ sudo pacman -R freetype2 $ gpg --keyserver pgp.mit.edu --recv-keys C1A60EACE707FDA5 $ git clone https://aur.archlinux.org/packages/freetype2-infinality/ $ cd freetype2-infinality && makepkg -si ## \u5b89\u88c5 fontconfig-infinality-ultimate ## \u5148\u5378\u8f7d fontconfig $ sudo pacman -R fontconfig $ git clone https://aur.archlinux.org/fontconfig-infinality-ultimate.git $ cd fontconfig-infinality-ultimate && makepkg -si","title":"\u7f8e\u5316\u5b57\u4f53\u8bbe\u7f6e"},{"location":"tutorial/Linux/01_linux-installation/#_19","text":"\u5982\u679c\u7528 xscreensaver \u6784\u5efa bindsym $mod +F12 exec i3lock","title":"\u5c4f\u5e55\u4fdd\u62a4\u548c\u9501\u5c4f"},{"location":"tutorial/Linux/01_linux-installation/#_20","text":"ArchLinux \u7684 net-tools \u5df2\u7ecf\u9ed8\u8ba4 deprecated\uff0c\u539f\u6765\u5e38\u7528 netstat \u547d\u4ee4\u6709 \u65b0\u4ee3\u66ff\u5de5\u5177 \u3002","title":"\u7f51\u7edc\u5de5\u5177"},{"location":"tutorial/Linux/01_linux-installation/#vim-python-ide","text":"# \u8bbe\u7f6e vim \u914d\u7f6e $ mv ~/.vim ~/.vim.old $ sudo pacman -S python-neovim $ sh -c \" $( curl -fsSL https://raw.githubusercontent.com/jarolrod/vim-python-ide/master/setup.sh ) \" ## \u5b89\u88c5 nerd \u5b57\u4f53 $ git clone https://aur.archlinux.org/nerd-fonts-complete.git $ cd nerd-fonts-complete && makepkg -si $ git clone https://github.com/chriskempson/base16-shell.git ~/.config/base16-shell $ echo 'BASE16_SHELL=$HOME/.config/base16-shell/' >> ~/.bashrc $ echo '[ -n \"$PS1\" ] && [ -s $BASE16_SHELL/profile_helper.sh ] && eval \"$($BASE16_SHELL/profile_helper.sh)\"' >> ~/.bashrc \u8bbe\u7f6e # add these line into .vimrc if filereadable(expand(\"~/.vimrc_background\")) let base16colorspace=256 source ~/.vimrc_background endif # \u5b89\u88c5 python git module $ sudo pacman -S python-gitpython","title":"vim &amp;&amp; Python IDE"},{"location":"tutorial/Linux/01_linux-installation/#_21","text":"# \u4f7f\u7528 numix \u5957\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u81ea\u5df1\u559c\u6b22\u7684theme $ sudo pacman -S numix-icon-theme-git numix-circle-icon-theme-git numix-gtk-theme","title":"\u56fe\u6807\u7f8e\u5316"},{"location":"tutorial/Linux/01_linux-installation/#_22","text":"Linux \u4e0b\u53ef\u4ee5\u7528 xwinwraper \u4e4b\u7c7b\u7684\u5de5\u5177\u5c06\u89c6\u9891\u6216 Gif \u52a8\u6001\u56fe\u7247\u4f5c\u4e3a\u58c1\u7eb8\uff0c\u8fbe\u5230\u52a8\u6001\u684c\u9762\u7684\u6548\u679c\u3002\u5f53\u7136\u4ee3\u4ef7\u662f\u727a\u7272\u4e00\u4e9bCPU\u548c\u5185\u5b58\u3002 \u8bbe\u7f6ecompton \u8bbe\u7f6exwinwrap \u51c6\u5907\u89c6\u9891\u6587\u4ef6\uff1a\u5efa\u8bae\u4f7f\u7528\u5ef6\u65f6\u6444\u5f71\u6216 # \u4e0b\u8f7d youtube \u89c6\u9891 $ youtube-dl --proxy ` socks server ` -F ` URL ` $ youtube-dl --porxy ` socks server ` -f 137 ` URL ` $ touch run_wallpaper.sh run_wallpaper.sh \u811a\u672c\u5185\u5bb9 #!/bin/sh mpv $1 --wid=\"$2\" --loop $ xwinwrap -fs -argb -ni -un -s -b -st -sp -nf -ov -- run_wallpaper.sh video.mp4 WID $ cmatrix $ ffmpeg -f x11grab -s 1920x1080 -i $DISPLAY output.mp4","title":"\u52a8\u6001\u58c1\u7eb8"},{"location":"tutorial/Linux/01_linux-installation/#_23","text":"\u4f7f\u7528CUPS\u7ba1\u7406\u6253\u5370\u673a\u3002 $ lp my.doc","title":"\u6253\u5370\u673a"},{"location":"tutorial/Linux/02_basic-cml/","text":"Linux \u57fa\u672c\u547d\u4ee4 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u7b80\u4ecb \u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u884c\u4e0b\u4f7f\u7528\u751f\u7269\u4fe1\u606f\u5b66\u8f6f\u4ef6\u9664\u4e86\u9700\u4e13\u95e8\u7684\u5206\u6790\u8f6f\u4ef6\u5916\uff0c\u5f80\u5f80\u8fd8\u8981\u7ed3\u5408\u4f7f\u7528\u8bb8\u591a Linux \u547d\u4ee4\uff1b\u800c\u4e14\u8bb8\u591a Linux \u547d\u4ee4\u53ef\u4ee5\u901a\u8fc7\u7ba1\u9053\u7b26\u53f7\u7684\u65b9\u5f0f\u6784\u5efa\u6570\u636e\u5904\u7406\u6d41\u7a0b\u3002\u56e0\u6b64\u5bf9\u6700\u57fa\u672c\u7684 Linux \u6587\u4ef6\u67e5\u770b\u3001\u590d\u5236\u3001\u7c98\u8d34\u7b49\u57fa\u672c\u64cd\u4f5c\u5fc5\u987b\u5e94\u638c\u63e1\u3002 \u5bf9\u4e8e\u6ca1\u6709\u53ea\u63a5\u89e6\u8fc7 windows \u56fe\u5f62\u754c\u9762\u7684\u7528\u6237\uff0c\u9700\u8981\u77e5\u9053\u51e0\u4e2a\u57fa\u672c\u77e5\u8bc6\u70b9\uff1a \u77e5\u8bc6\u70b9 \u8def\u5f84: \u548c windows \u76d8\u7b26\u6982\u5ff5\u4e0d\u540c\uff0cLinux \u53ea\u6709\u7c7b\u4f3c\u6811\u7684\u6839\u72b6\u7ed3\u6784\u4e00\u822c\u7684\u76ee\u5f55\u7ba1\u7406\uff0c\u6240\u6709\u8def\u5f84\u90fd\u6302\u5728 / \u4e0b\u3002\u548c windows \u8def\u5f84\u5206\u5272\u7b26\u53f7 \\ \u4e0d\u540c\uff0cLinux \u662f\u4f7f\u7528 / \u3002\u8def\u5f84\u4e2d'.'\u8868\u793a\u5f53\u524d\u76ee\u5f55\uff0c'..'\u8868\u793a\u4e0a\u4e00\u7ea7\u76ee\u5f55\u3002\u8def\u5f84\u5206\u4e3a\u7edd\u5bf9\u8def\u5f84\u548c\u76f8\u5173\u8def\u5f84\u3002 \u7528\u6237: Linux \u7cfb\u7edf\u591a\u7528\u6237\u7ba1\u7406\u7684\u6743\u9650\u533a\u522b\uff0cwindows \u4e0b\u4e2a\u4eba\u7528\u6237\u4e00\u822c\u90fd\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u76f4\u63a5\u8fd0\u884c\uff0c\u800c Linux \u4e0b\u5e94\u4e25\u7981\u4f7f\u7528 root \u7528\u6237\u65e5\u5e38\u64cd\u4f5c\u3002\u6240\u4ee5\u4e00\u822c\u90fd\u7ed9\u4e00\u4e2a wheel \u7528\u6237\u7ec4\u7528\u6237\u4ee5 sudo \u6743\u9650\uff0c\u4ee5\u4fbf\u5fc5\u8981\u662f\u63d0\u4f9b sudo \u6765\u8fdb\u884c\u7ba1\u7406\u5458\u64cd\u4f5c\u3002 \u540e\u7f00: windows \u4e0b\u4e60\u60ef\u75283\u4f4d\u5b57\u7b26\u6765\u533a\u522b\u4e0d\u540c\u6587\u4ef6\u7c7b\u578b\u3002Linux \u6ca1\u6709\u8fd9\u4e2a\u5fc5\u8981\uff0c\u540e\u7f00\u53ef\u4ee5\u4efb\u4f55\u65b9\u5f0f\u8868\u793a\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u4ee3\u8868\u4efb\u4f55\u610f\u4e49\u3002\u6587\u4ef6\u4e00\u822c\u53ea\u6709\u6587\u672c\u6587\u4ef6\u548c\u4e8c\u8fdb\u5236\u6587\u4ef62\u79cd\u3002\u524d\u8005\u53ef\u4ee5\u7528\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00\u7f16\u8f91\u3002 \u53d1\u884c\u7248: Linux \u6709\u6570\u91cf\u4f17\u591a\u7684\u53d1\u884c\u7248\uff0c\u867d\u7136\u5185\u6838\u4f7f\u7528\u7684\u90fd\u662f Linux\uff0c\u4f46\u5728\u8f6f\u4ef6\u7ba1\u7406\u7b49\u65b9\u5f0f\u65b9\u9762\u5f80\u5f80\u4f7f\u7528\u7684\u662f\u4e0d\u540c\u65b9\u5f0f\uff0c\u6240\u4ee5\u4f1a\u6839\u636e\u53d1\u884c\u7248\u6709\u4e0d\u540c\u547d\u4ee4\u6765\u5b89\u88c5\u8f6f\u4ef6\u6216\u66f4\u65b0\u7cfb\u7edf\u3002\u4f46\u5bf9\u4e8e\u672c\u8282\u4ecb\u7ecd\u7684\u57fa\u672c\u547d\u4ee4\uff0c\u662f\u4e0e\u53d1\u884c\u7248\u65e0\u5173\u7684\uff0c\u4efb\u4f55\u684c\u9762 Linux \u7cfb\u7edf\u90fd\u5177\u6709\u7684\u547d\u4ee4\u3002 \u6587\u4ef6\u64cd\u4f5c \u00b6 ls : \u5217\u51fa\u76ee\u5f55 cd : \u6539\u53d8\u76ee\u5f55 pwd : \u663e\u793a\u5f53\u524d\u76ee\u5f55 mkdir : \u5efa\u7acb\u65b0\u76ee\u5f55 rmdir : \u5220\u9664\u76ee\u5f55 rm : \u5220\u9664\u6587\u4ef6 cp : \u590d\u5236\u6587\u4ef6 mv : \u79fb\u52a8\u6587\u4ef6\u6216\u76ee\u5f55 which : \u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7cfb\u7edf\u8def\u5f84 wc : \u7edf\u8ba1\u4e00\u4e2a\u6587\u4ef6\u7684\u884c\uff0c\u5b57\u7b26\u548c\u5b57\u8282\u6570 ```bash tab=\"ls\" \u663e\u793a '~/data' \u76ee\u5f55\u91cc\u7684\u6587\u4ef6 \u00b6 $ ls ~/data \u5217\u8868\u65b9\u5f0f\u663e\u793a\u5305\u62ec\u9690\u542b\u6587\u4ef6\u7684 '~/data' \u76ee\u5f55\u91cc\u7684\u6240\u6709\u6587\u4ef6 \u00b6 $ ls -la ~/data \u6587\u4ef6\u6309\u7167\u65f6\u95f4\u6392\u5e8f \u00b6 $ ls -t ~/data \u67e5\u770b\u6240\u6709\u540e\u7f00\u4e3a fastq \u7684\u6587\u4ef6 \u00b6 $ ls ~/data/*.fastq ```bash tab=\"cd\" # \u4ece\u5f53\u524d\u76ee\u5f55\u5207\u6362\u5230 '~/app' \u76ee\u5f55 $ cd ~/app # \u4ece\u4efb\u4f55\u4f4d\u7f6e\u5207\u6362\u56de\u7528\u6237\u4e3b\u76ee\u5f55 '/home/User' $ cd # \u56de\u9000\u4e0a\u4e00\u4e2a\u8bbf\u95ee\u76ee\u5f55 $ cd - # \u8fd4\u56de\u4e0a\u4e00\u7ea7\u76ee\u5f55 $ cd .. # \u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff0c\u8fdb\u5165\u53e6\u4e00\u4e2a\u76ee\u5f55\"new directory\"\uff0c\u8fd9\u91cc '\\' \u662f\u8f6c\u4e49\u7b26\uff0c\u5c06\u7a7a\u683c\u952e\u6b63\u786e\u8f6c\u4e49 $ cd ../../../new\\ directory ```bash tab=\"pwd\" \u5f53\u4e0d\u77e5\u9053\u5f53\u524d\u5904\u4e8e\u4ec0\u4e48\u8def\u5f84\u65f6\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a\u547d\u4ee4\u663e\u793a \u00b6 $ pwd \u9700\u8981\u4f7f\u7528\u5f53\u524d\u8def\u5f84\u5230\u547d\u4ee4\u4e2d\uff0c\u5982\u5efa\u7acblinks \u00b6 $ ln -s pwd /mylib.so /usr/lib/ ```bash tab=\"mkdir\" # \u5f53\u524d\u8def\u5f84\u4e0b\u65b0\u5efa\u4e00\u4e2a\u540d\u53eb 'new' \u7684\u76ee\u5f55 $ mkdir new ```bash tab=\"rmdir\" \u5220\u9664\u5f53\u524d\u8def\u5f84\u7684\u76ee\u5f55 'new' \u00b6 $ rmdir new ```bash tab=\"rm\" # \u5220\u9664\u5f53\u524d\u76ee\u5f55\u7684\u6240\u6709\u540e\u7f00\u662f '.sra' \u7684\u6587\u4ef6 $ rm *.sra # -R \u53c2\u6570\u5220\u9664\u76ee\u5f55 # \u5220\u9664\u76ee\u5f55 'new' \u4ee5\u53ca 'new' \u4e0b\u7684\u6240\u6709\u5b50\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55 $ rm -R new # \u4e0d\u5f39\u51fa\u5220\u9664\u786e\u8ba4\u63d0\u793a\uff0c\u5220\u9664\u6240\u6709 '.tmp' \u6587\u4ef6 $ rm -f *.tmp # \u5343\u4e07\u4e0d\u80fd\u505a\u7684\u4e8b\u60c5\uff01\u4e5f\u662flinux\u9891\u9053\u91cc\u7ecf\u5e38\u80fd\u770b\u5230\u7684\u7b11\u8bdd $ sudo rm -rf /* ```bash tab=\"cp\" \u590d\u5236 'test.txt' \u6587\u4ef6\u5230\u76ee\u5f55 '~/abc' \u4e2d \u00b6 $ cp test.txt ~/abc -R \u590d\u5236\u76ee\u5f55 \u00b6 \u590d\u5236 mydir \u5230\u7528\u6237\u76ee\u5f55\u4e0b \u00b6 $ cp -R mydir/ ~ ```bash tab=\"mv\" # \u79fb\u52a8 'test.txt' \u6587\u4ef6\u5230\u76ee\u5f55 '~/abc' \u4e2d\u5e76\u6539\u540d\u53eb 'test1.txt' $ mv test.txt ~/abc/test1.txt ```bash tab=\"which\" \u6253\u5370\u51fa\u7cfb\u7edf\u5e26\u7684 python \u7a0b\u5e8f\u7684\u8def\u5f84 \u00b6 $ which python ## \u7cfb\u7edf\u67e5\u770b - `find`: \u67e5\u627e\u6587\u4ef6 - `ps`: \u67e5\u770b\u7cfb\u7edf\u8fdb\u7a0b - `top`: \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u72b6\u6001\u548c\u8fdb\u7a0b ```bash tab=\"find\" # \u67e5\u627e\u4e00\u4e2a\u6587\u4ef6\uff0c\u6bd4\u5982 .bashrc, /etc\u8def\u5f84\u4e0b\u7684hosts\u6587\u4ef6 $ find .bashrc $ find /etc/hosts # \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u540e\u7f00\u4e3agz\u7684\u6587\u4ef6 $ find . -type f -name \"*.gz\" # \u67e5\u627e\u6240\u6709\u7684 html \u7f51\u9875\u6587\u4ef6 $ find . -type f -regex \".*html$\" # \u5c06\u6240\u6709 fasta \u6587\u4ef6\u4e2d\u5e8f\u5217\u540d\u5b57\u5305\u542bnode\u7684\u6539\u6210seq $ find . -type f -regex \".*fasta$\" | xargs sed 's/NODE/Seq/g' # \u67e5\u627e\u5b50\u76ee\u5f55\u6df1\u5ea6\u4e3a4\u5c42\u76ee\u5f55\u7684fasta\u6587\u4ef6 $ find . -type f -maxdepth 4 -name \"*.fasta\" # \u67e5\u627e/var/log\u8def\u5f84\u4e0b\u6743\u9650\u4e3a755\u7684\u76ee\u5f55 $ find /var/log -type d -perm 755 # \u6309\u7167\u7528\u6237\u67e5\u627e\u7528\u6237\uff0c\u5728tmp\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e\u7528\u6237 nginx \u7684\u6587\u4ef6 $ find /tmp -user nginx # \u7528\u6237\u4e3bhome\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e root \u6743\u9650\uff0c\u5c5e\u6027\u4e3a644\u7684\u6587\u4ef6 $ find . -user root -perm 644 ```bash tab=\"ps\" \u663e\u793a\u8be6\u7ec6\u7684\u8fdb\u7a0b\u4fe1\u606f \u00b6 $ ps -waux \u8fc7\u6ee4\u7528\u6237root\u7684\u8fdb\u7a0b \u00b6 $ ps -u root \u6839\u636e\u4e0d\u540c\u53c2\u6570\u4f7f\u7528\u6765\u6392\u5e8f\u8fdb\u7a0b\uff0c\u5e76\u53ea\u73b0\u5b9e\u6392\u540d\u524d10\u7684\u8fdb\u7a0b \u00b6 $ ps -aux --sort -pcpu | head -n 11 $ ps -aux --sort -pmem | head -n 11 $ ps -aux --sort -pcpu,+pmem | head -n 11 \u8fc7\u6ee4\u8fdb\u7a0b\u540d \u00b6 $ ps -f -C chrome \u6839\u636ePID\u8fc7\u6ee4 \u00b6 $ ps -L 1000 \u6811\u5f62\u73b0\u5b9e\u8fdb\u7a0b \u00b6 $ ps -axjf ```bash tab=\"top\" $ top \u8fdb\u7a0b\u5217\u8868 ps\u4f1a\u5728\u7ec8\u7aef\u6253\u5370\u7cfb\u7edf\u8fdb\u7a0b\uff0c\u5404\u5217\u7684\u542b\u4e49\u662f: USER: \u8fd0\u884c\u8be5\u8fdb\u7a0b\u7684\u7528\u6237 PID: \u8fd0\u884c\u7740\u7684\u547d\u4ee4(CMD)\u7684\u8fdb\u7a0b\u7f16\u53f7 %CPU: CPU\u5360\u7528 %MEM: \u5185\u5b58\u5360\u7528 VSC: RSS: TTY: \u547d\u4ee4\u6240\u8fd0\u884c\u7684\u4f4d\u7f6e\uff08\u7ec8\u7aef\uff09 STAT: TIME: \u8fd0\u884c\u7740\u7684\u8be5\u547d\u4ee4\u6240\u5360\u7528\u7684CPU\u5904\u7406\u65f6\u95f4 COMMAND: \u8be5\u8fdb\u7a0b\u6240\u8fd0\u884c\u7684\u547d\u4ee4 \u663e\u793a\u6587\u672c\u6587\u4ef6\u5185\u5bb9 \u00b6 \u64cd\u4f5c\u5927\u6587\u4ef6\u5982fastq\u6d4b\u5e8f\u539f\u59cb\u6570\u636e\uff0c\u5e38\u5e38\u4e0d\u9700\u8981\u5c06\u51e0\u767eM\u751a\u81f3\u4e0aG\u7684\u6570\u636e\u5168\u90e8\u5199\u5165\u5230\u5185\u5b58\u6253\u5f00\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u4e86\u89e3\u5934\u90e8\u6570\u636e\u5373\u53ef\u3002\u7528head\u5c31\u975e\u5e38\u8f7b\u4fbf\u3002head\u9ed8\u8ba4\u8f93\u51fa\u524d10\u884c\u5185\u5bb9\u3002 head tail cat less more wc : nl : grep : \u622a\u53d6\u8f93\u5165\u5b57\u7b26\u7684\u9009\u5b9a pattern \u5e76\u8f93\u51fa\u6240\u5728\u7684\u884c ```bash tab=\"head\" \u8f93\u51fa\u6587\u4ef6\u524d5\u884c\u5185\u5bb9 \u00b6 $ head -5 text.txt ```bash tab=\"tail\" # \u8f93\u51fa\u6587\u4ef6\u7684\u6700\u540e5\u884c\u5185\u5bb9 $ tail -5 text.txt ```bash tab=\"cat\" \u663e\u793a\u6587\u4ef6 'text.txt' \u5185\u5bb9 \u00b6 $ cat text.txt ```bash tab=\"less\" # \u663e\u793a\u6587\u4ef6 'text.txt' \u5185\u5bb9\uff0c\u652f\u6301\u5206\u9875 $ less text.txt ```bash tab=\"more\" $ more text.txt ```bash tab=\"wc\" # \u8f93\u51fa\u6587\u4ef6 'text.txt' \u7684\u884c\u6570\uff0c\u5b57\u7b26\u6570\u548c\u5b57\u8282\u6570\u3002 $ wc text.txt # \u8f93\u51fa\u884c\u6570 $ wc -l text.txt ```bash tab=\"nl\" \u8f93\u51fa\u884c\u53f7 \u00b6 $ cat text.txt | nl ```bash tab=\"grep\" # \u663e\u793a\u6587\u4ef6 'text.txt' \u4e2d\u542b\u6709\u5b57\u7b26 'abc' \u7684\u884c $ cat text.txt | grep 'abc' # \u8f93\u51fa\u6587\u4ef6\u4e2d\u884c\u4ee5>\u5f00\u5934\u7684\u884c $ grep '^>' myseq.fasta \u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6 \u00b6 \u5bf9\u5e8f\u5217\u6570\u636e\u5e38\u9700\u8981\u8fdb\u884c\u538b\u7f29\u5904\u7406\uff0c\u53ef\u4ee5\u4f7f\u7528 gzip/tar\uff0c \u7279\u6b8a\u683c\u5f0f\u538b\u7f29\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u8f6f\u4ef6\uff0c\u4e2a\u4eba\u5e38\u75287z\u6765\u8fdb\u884c\u3002 # gzip \u538b\u7f29\u6587\u4ef6 1 \u4e3a 1.gz $ gzip 1 # gunzip \u89e3\u538b\u7f29 $ gunzip 1 .gz # \u538b\u7f29\u6587\u4ef6 foo \u6216\u8005\u76ee\u5f55 foo \u6210\u4e3a\u4e00\u4e2a foo.tar.gz \u538b\u7f29\u5305 $ tar -zcf foo.tar.gz foo # \u89e3\u538b\u7f29\u6587\u4ef6 foo.tar.gz $ tar -zxf foo.tar.gz \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u4ea4\u4e92 \u00b6 Linux \u670d\u52a1\u5668\u4e0a\u8ba1\u7b97\u83b7\u5f97\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u5e38\u7528\u65b9\u5f0f\u65b9\u4fbf\u7684\u4e0b\u8f7d\u548c\u4e0a\u4f20\u3002 ssh \u767b\u5f55\u670d\u52a1\u5668 \u5b89\u88c5\u4e86 openssh \u540e\uff0c\u76f4\u63a5\u901a\u8fc7 ssh \u767b\u5f55\u5f00\u542f\u4e86 sshd \u670d\u52a1\u7684 Linux \u670d\u52a1\u5668\uff0c\u76f4\u63a5\u5728\u8fdc\u7aef\u8fdb\u884c\u64cd\u4f5c\u3002 # server_ip\u4e3a\u6240\u8981\u767b\u5f55\u670d\u52a1\u5668ip $ ssh user@server_ip \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u62f7\u8d1d\u6587\u4ef6 \u8fd9\u91cc\u4ee5\u5ba2\u6237\u7aef\u64cd\u4f5c\u4e3a\u4f8b\uff0c\u670d\u52a1\u5668ip\u5047\u8bbe\u4e3a10.44.35.122 # \u4ece\u670d\u52a1\u5668\u62f7\u8d1d\u6587\u4ef6 /data/1.fasta \u5230\u672c\u5730 $ scp mark@10.44.35.122:/data/1.fasta . # \u4ece\u672c\u5730\u4e0a\u4f20\u6587\u4ef6 2.fasta \u5230\u670d\u52a1\u5668/data $ scp 2 .fasta mark@10.44.35.122:/data/2.fasta rsync\u547d\u4ee4\u662f\u4e00\u4e2a\u8fdc\u7a0b\u6570\u636e\u540c\u6b65\u5de5\u5177\uff0c\u53ef\u5feb\u901f\u540c\u6b65\u591a\u53f0\u4e3b\u673a\u95f4\u7684\u6587\u4ef6\u3002rsync\u4f7f\u7528\u6240\u8c13\u7684\u201crsync\u7b97\u6cd5\u201d\u6765\u4f7f\u672c\u5730\u548c\u8fdc\u7a0b\u4e24\u4e2a\u4e3b\u673a\u4e4b\u95f4\u7684\u6587\u4ef6\u8fbe\u5230\u540c\u6b65\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u53ea\u4f20\u9001\u4e24\u4e2a\u6587\u4ef6\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u6574\u4efd\u4f20\u9001\uff0c\u56e0\u6b64\u901f\u5ea6\u76f8\u5f53\u5feb\u3002 # \u4f20\u9001 server_ip \u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\u5230\u672c\u5730 Linux \u7cfb\u7edf /data \u8def\u5f84\u4e2d $ rsync -avz user@server_ip:/data/* /data # \u4f20\u9001\u672c\u5730 test.py \u6587\u4ef6\u5230\u670d\u52a1\u5668 server_ip \u7528\u6237\u76ee\u5f55\u4e2d $ rsync -av ~/test.py user@server_ip::/home/user \u7b80\u5355\u7684\u4f20\u8f93\u5355\u4e2a\u6587\u4ef6\u7528scp\u8fd8\u7b97\u65b9\u4fbf\uff0c\u4f46\u5982\u679c\u9891\u7e41\u4ea4\u4e92\uff0c\u6216\u8005\u9700\u8981\u53ef\u89c6\u5316\u754c\u9762\u6765\u64cd\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u66f4\u65b9\u4fbf\u7684\u5de5\u5177\uff0c\u5bf9\u4e8ewin\u5e73\u53f0\u7528\u6237\uff0c\u7b80\u5355\u7684ssh\u767b\u5f55\u5de5\u5177\u5e38\u7528\u7684\u5982putty\uff0c\u5982\u679c\u8981\u4e0a\u4e0b\u4f20\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u642d\u5efaftp\u670d\u52a1\u6765\u5b9e\u73b0\u3002\u8fd9\u91cc\u63a8\u8350 sshfs\u3002 # \u6302\u8f7d\u670d\u52a1\u5668 /data \u5230\u672c\u5730linux\u673a\u5668\u7684 ~/server \u76ee\u5f55\u3002 $ sshfs mark@10.44.35.122:/data ~/server -o idmap = user -o allow_other Reference \u00b6 http://linoxide.com/how-tos/linux-ps-command-examples/ https://commandlinefu.cn/","title":"02. Linux \u57fa\u672c\u547d\u4ee4"},{"location":"tutorial/Linux/02_basic-cml/#linux","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u7b80\u4ecb \u5728 Linux \u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u884c\u4e0b\u4f7f\u7528\u751f\u7269\u4fe1\u606f\u5b66\u8f6f\u4ef6\u9664\u4e86\u9700\u4e13\u95e8\u7684\u5206\u6790\u8f6f\u4ef6\u5916\uff0c\u5f80\u5f80\u8fd8\u8981\u7ed3\u5408\u4f7f\u7528\u8bb8\u591a Linux \u547d\u4ee4\uff1b\u800c\u4e14\u8bb8\u591a Linux \u547d\u4ee4\u53ef\u4ee5\u901a\u8fc7\u7ba1\u9053\u7b26\u53f7\u7684\u65b9\u5f0f\u6784\u5efa\u6570\u636e\u5904\u7406\u6d41\u7a0b\u3002\u56e0\u6b64\u5bf9\u6700\u57fa\u672c\u7684 Linux \u6587\u4ef6\u67e5\u770b\u3001\u590d\u5236\u3001\u7c98\u8d34\u7b49\u57fa\u672c\u64cd\u4f5c\u5fc5\u987b\u5e94\u638c\u63e1\u3002 \u5bf9\u4e8e\u6ca1\u6709\u53ea\u63a5\u89e6\u8fc7 windows \u56fe\u5f62\u754c\u9762\u7684\u7528\u6237\uff0c\u9700\u8981\u77e5\u9053\u51e0\u4e2a\u57fa\u672c\u77e5\u8bc6\u70b9\uff1a \u77e5\u8bc6\u70b9 \u8def\u5f84: \u548c windows \u76d8\u7b26\u6982\u5ff5\u4e0d\u540c\uff0cLinux \u53ea\u6709\u7c7b\u4f3c\u6811\u7684\u6839\u72b6\u7ed3\u6784\u4e00\u822c\u7684\u76ee\u5f55\u7ba1\u7406\uff0c\u6240\u6709\u8def\u5f84\u90fd\u6302\u5728 / \u4e0b\u3002\u548c windows \u8def\u5f84\u5206\u5272\u7b26\u53f7 \\ \u4e0d\u540c\uff0cLinux \u662f\u4f7f\u7528 / \u3002\u8def\u5f84\u4e2d'.'\u8868\u793a\u5f53\u524d\u76ee\u5f55\uff0c'..'\u8868\u793a\u4e0a\u4e00\u7ea7\u76ee\u5f55\u3002\u8def\u5f84\u5206\u4e3a\u7edd\u5bf9\u8def\u5f84\u548c\u76f8\u5173\u8def\u5f84\u3002 \u7528\u6237: Linux \u7cfb\u7edf\u591a\u7528\u6237\u7ba1\u7406\u7684\u6743\u9650\u533a\u522b\uff0cwindows \u4e0b\u4e2a\u4eba\u7528\u6237\u4e00\u822c\u90fd\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u76f4\u63a5\u8fd0\u884c\uff0c\u800c Linux \u4e0b\u5e94\u4e25\u7981\u4f7f\u7528 root \u7528\u6237\u65e5\u5e38\u64cd\u4f5c\u3002\u6240\u4ee5\u4e00\u822c\u90fd\u7ed9\u4e00\u4e2a wheel \u7528\u6237\u7ec4\u7528\u6237\u4ee5 sudo \u6743\u9650\uff0c\u4ee5\u4fbf\u5fc5\u8981\u662f\u63d0\u4f9b sudo \u6765\u8fdb\u884c\u7ba1\u7406\u5458\u64cd\u4f5c\u3002 \u540e\u7f00: windows \u4e0b\u4e60\u60ef\u75283\u4f4d\u5b57\u7b26\u6765\u533a\u522b\u4e0d\u540c\u6587\u4ef6\u7c7b\u578b\u3002Linux \u6ca1\u6709\u8fd9\u4e2a\u5fc5\u8981\uff0c\u540e\u7f00\u53ef\u4ee5\u4efb\u4f55\u65b9\u5f0f\u8868\u793a\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u4ee3\u8868\u4efb\u4f55\u610f\u4e49\u3002\u6587\u4ef6\u4e00\u822c\u53ea\u6709\u6587\u672c\u6587\u4ef6\u548c\u4e8c\u8fdb\u5236\u6587\u4ef62\u79cd\u3002\u524d\u8005\u53ef\u4ee5\u7528\u6587\u672c\u7f16\u8f91\u5668\u6253\u5f00\u7f16\u8f91\u3002 \u53d1\u884c\u7248: Linux \u6709\u6570\u91cf\u4f17\u591a\u7684\u53d1\u884c\u7248\uff0c\u867d\u7136\u5185\u6838\u4f7f\u7528\u7684\u90fd\u662f Linux\uff0c\u4f46\u5728\u8f6f\u4ef6\u7ba1\u7406\u7b49\u65b9\u5f0f\u65b9\u9762\u5f80\u5f80\u4f7f\u7528\u7684\u662f\u4e0d\u540c\u65b9\u5f0f\uff0c\u6240\u4ee5\u4f1a\u6839\u636e\u53d1\u884c\u7248\u6709\u4e0d\u540c\u547d\u4ee4\u6765\u5b89\u88c5\u8f6f\u4ef6\u6216\u66f4\u65b0\u7cfb\u7edf\u3002\u4f46\u5bf9\u4e8e\u672c\u8282\u4ecb\u7ecd\u7684\u57fa\u672c\u547d\u4ee4\uff0c\u662f\u4e0e\u53d1\u884c\u7248\u65e0\u5173\u7684\uff0c\u4efb\u4f55\u684c\u9762 Linux \u7cfb\u7edf\u90fd\u5177\u6709\u7684\u547d\u4ee4\u3002","title":"Linux \u57fa\u672c\u547d\u4ee4"},{"location":"tutorial/Linux/02_basic-cml/#_1","text":"ls : \u5217\u51fa\u76ee\u5f55 cd : \u6539\u53d8\u76ee\u5f55 pwd : \u663e\u793a\u5f53\u524d\u76ee\u5f55 mkdir : \u5efa\u7acb\u65b0\u76ee\u5f55 rmdir : \u5220\u9664\u76ee\u5f55 rm : \u5220\u9664\u6587\u4ef6 cp : \u590d\u5236\u6587\u4ef6 mv : \u79fb\u52a8\u6587\u4ef6\u6216\u76ee\u5f55 which : \u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7cfb\u7edf\u8def\u5f84 wc : \u7edf\u8ba1\u4e00\u4e2a\u6587\u4ef6\u7684\u884c\uff0c\u5b57\u7b26\u548c\u5b57\u8282\u6570 ```bash tab=\"ls\"","title":"\u6587\u4ef6\u64cd\u4f5c"},{"location":"tutorial/Linux/02_basic-cml/#data","text":"$ ls ~/data","title":"\u663e\u793a '~/data' \u76ee\u5f55\u91cc\u7684\u6587\u4ef6"},{"location":"tutorial/Linux/02_basic-cml/#data_1","text":"$ ls -la ~/data","title":"\u5217\u8868\u65b9\u5f0f\u663e\u793a\u5305\u62ec\u9690\u542b\u6587\u4ef6\u7684 '~/data' \u76ee\u5f55\u91cc\u7684\u6240\u6709\u6587\u4ef6"},{"location":"tutorial/Linux/02_basic-cml/#_2","text":"$ ls -t ~/data","title":"\u6587\u4ef6\u6309\u7167\u65f6\u95f4\u6392\u5e8f"},{"location":"tutorial/Linux/02_basic-cml/#fastq","text":"$ ls ~/data/*.fastq ```bash tab=\"cd\" # \u4ece\u5f53\u524d\u76ee\u5f55\u5207\u6362\u5230 '~/app' \u76ee\u5f55 $ cd ~/app # \u4ece\u4efb\u4f55\u4f4d\u7f6e\u5207\u6362\u56de\u7528\u6237\u4e3b\u76ee\u5f55 '/home/User' $ cd # \u56de\u9000\u4e0a\u4e00\u4e2a\u8bbf\u95ee\u76ee\u5f55 $ cd - # \u8fd4\u56de\u4e0a\u4e00\u7ea7\u76ee\u5f55 $ cd .. # \u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff0c\u8fdb\u5165\u53e6\u4e00\u4e2a\u76ee\u5f55\"new directory\"\uff0c\u8fd9\u91cc '\\' \u662f\u8f6c\u4e49\u7b26\uff0c\u5c06\u7a7a\u683c\u952e\u6b63\u786e\u8f6c\u4e49 $ cd ../../../new\\ directory ```bash tab=\"pwd\"","title":"\u67e5\u770b\u6240\u6709\u540e\u7f00\u4e3a fastq \u7684\u6587\u4ef6"},{"location":"tutorial/Linux/02_basic-cml/#_3","text":"$ pwd","title":"\u5f53\u4e0d\u77e5\u9053\u5f53\u524d\u5904\u4e8e\u4ec0\u4e48\u8def\u5f84\u65f6\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a\u547d\u4ee4\u663e\u793a"},{"location":"tutorial/Linux/02_basic-cml/#links","text":"$ ln -s pwd /mylib.so /usr/lib/ ```bash tab=\"mkdir\" # \u5f53\u524d\u8def\u5f84\u4e0b\u65b0\u5efa\u4e00\u4e2a\u540d\u53eb 'new' \u7684\u76ee\u5f55 $ mkdir new ```bash tab=\"rmdir\"","title":"\u9700\u8981\u4f7f\u7528\u5f53\u524d\u8def\u5f84\u5230\u547d\u4ee4\u4e2d\uff0c\u5982\u5efa\u7acblinks"},{"location":"tutorial/Linux/02_basic-cml/#new","text":"$ rmdir new ```bash tab=\"rm\" # \u5220\u9664\u5f53\u524d\u76ee\u5f55\u7684\u6240\u6709\u540e\u7f00\u662f '.sra' \u7684\u6587\u4ef6 $ rm *.sra # -R \u53c2\u6570\u5220\u9664\u76ee\u5f55 # \u5220\u9664\u76ee\u5f55 'new' \u4ee5\u53ca 'new' \u4e0b\u7684\u6240\u6709\u5b50\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55 $ rm -R new # \u4e0d\u5f39\u51fa\u5220\u9664\u786e\u8ba4\u63d0\u793a\uff0c\u5220\u9664\u6240\u6709 '.tmp' \u6587\u4ef6 $ rm -f *.tmp # \u5343\u4e07\u4e0d\u80fd\u505a\u7684\u4e8b\u60c5\uff01\u4e5f\u662flinux\u9891\u9053\u91cc\u7ecf\u5e38\u80fd\u770b\u5230\u7684\u7b11\u8bdd $ sudo rm -rf /* ```bash tab=\"cp\"","title":"\u5220\u9664\u5f53\u524d\u8def\u5f84\u7684\u76ee\u5f55 'new'"},{"location":"tutorial/Linux/02_basic-cml/#testtxt-abc","text":"$ cp test.txt ~/abc","title":"\u590d\u5236 'test.txt' \u6587\u4ef6\u5230\u76ee\u5f55 '~/abc' \u4e2d"},{"location":"tutorial/Linux/02_basic-cml/#-r","text":"","title":"-R \u590d\u5236\u76ee\u5f55"},{"location":"tutorial/Linux/02_basic-cml/#mydir","text":"$ cp -R mydir/ ~ ```bash tab=\"mv\" # \u79fb\u52a8 'test.txt' \u6587\u4ef6\u5230\u76ee\u5f55 '~/abc' \u4e2d\u5e76\u6539\u540d\u53eb 'test1.txt' $ mv test.txt ~/abc/test1.txt ```bash tab=\"which\"","title":"\u590d\u5236 mydir \u5230\u7528\u6237\u76ee\u5f55\u4e0b"},{"location":"tutorial/Linux/02_basic-cml/#python","text":"$ which python ## \u7cfb\u7edf\u67e5\u770b - `find`: \u67e5\u627e\u6587\u4ef6 - `ps`: \u67e5\u770b\u7cfb\u7edf\u8fdb\u7a0b - `top`: \u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u72b6\u6001\u548c\u8fdb\u7a0b ```bash tab=\"find\" # \u67e5\u627e\u4e00\u4e2a\u6587\u4ef6\uff0c\u6bd4\u5982 .bashrc, /etc\u8def\u5f84\u4e0b\u7684hosts\u6587\u4ef6 $ find .bashrc $ find /etc/hosts # \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u540e\u7f00\u4e3agz\u7684\u6587\u4ef6 $ find . -type f -name \"*.gz\" # \u67e5\u627e\u6240\u6709\u7684 html \u7f51\u9875\u6587\u4ef6 $ find . -type f -regex \".*html$\" # \u5c06\u6240\u6709 fasta \u6587\u4ef6\u4e2d\u5e8f\u5217\u540d\u5b57\u5305\u542bnode\u7684\u6539\u6210seq $ find . -type f -regex \".*fasta$\" | xargs sed 's/NODE/Seq/g' # \u67e5\u627e\u5b50\u76ee\u5f55\u6df1\u5ea6\u4e3a4\u5c42\u76ee\u5f55\u7684fasta\u6587\u4ef6 $ find . -type f -maxdepth 4 -name \"*.fasta\" # \u67e5\u627e/var/log\u8def\u5f84\u4e0b\u6743\u9650\u4e3a755\u7684\u76ee\u5f55 $ find /var/log -type d -perm 755 # \u6309\u7167\u7528\u6237\u67e5\u627e\u7528\u6237\uff0c\u5728tmp\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e\u7528\u6237 nginx \u7684\u6587\u4ef6 $ find /tmp -user nginx # \u7528\u6237\u4e3bhome\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e root \u6743\u9650\uff0c\u5c5e\u6027\u4e3a644\u7684\u6587\u4ef6 $ find . -user root -perm 644 ```bash tab=\"ps\"","title":"\u6253\u5370\u51fa\u7cfb\u7edf\u5e26\u7684 python \u7a0b\u5e8f\u7684\u8def\u5f84"},{"location":"tutorial/Linux/02_basic-cml/#_4","text":"$ ps -waux","title":"\u663e\u793a\u8be6\u7ec6\u7684\u8fdb\u7a0b\u4fe1\u606f"},{"location":"tutorial/Linux/02_basic-cml/#root","text":"$ ps -u root","title":"\u8fc7\u6ee4\u7528\u6237root\u7684\u8fdb\u7a0b"},{"location":"tutorial/Linux/02_basic-cml/#10","text":"$ ps -aux --sort -pcpu | head -n 11 $ ps -aux --sort -pmem | head -n 11 $ ps -aux --sort -pcpu,+pmem | head -n 11","title":"\u6839\u636e\u4e0d\u540c\u53c2\u6570\u4f7f\u7528\u6765\u6392\u5e8f\u8fdb\u7a0b\uff0c\u5e76\u53ea\u73b0\u5b9e\u6392\u540d\u524d10\u7684\u8fdb\u7a0b"},{"location":"tutorial/Linux/02_basic-cml/#_5","text":"$ ps -f -C chrome","title":"\u8fc7\u6ee4\u8fdb\u7a0b\u540d"},{"location":"tutorial/Linux/02_basic-cml/#pid","text":"$ ps -L 1000","title":"\u6839\u636ePID\u8fc7\u6ee4"},{"location":"tutorial/Linux/02_basic-cml/#_6","text":"$ ps -axjf ```bash tab=\"top\" $ top \u8fdb\u7a0b\u5217\u8868 ps\u4f1a\u5728\u7ec8\u7aef\u6253\u5370\u7cfb\u7edf\u8fdb\u7a0b\uff0c\u5404\u5217\u7684\u542b\u4e49\u662f: USER: \u8fd0\u884c\u8be5\u8fdb\u7a0b\u7684\u7528\u6237 PID: \u8fd0\u884c\u7740\u7684\u547d\u4ee4(CMD)\u7684\u8fdb\u7a0b\u7f16\u53f7 %CPU: CPU\u5360\u7528 %MEM: \u5185\u5b58\u5360\u7528 VSC: RSS: TTY: \u547d\u4ee4\u6240\u8fd0\u884c\u7684\u4f4d\u7f6e\uff08\u7ec8\u7aef\uff09 STAT: TIME: \u8fd0\u884c\u7740\u7684\u8be5\u547d\u4ee4\u6240\u5360\u7528\u7684CPU\u5904\u7406\u65f6\u95f4 COMMAND: \u8be5\u8fdb\u7a0b\u6240\u8fd0\u884c\u7684\u547d\u4ee4","title":"\u6811\u5f62\u73b0\u5b9e\u8fdb\u7a0b"},{"location":"tutorial/Linux/02_basic-cml/#_7","text":"\u64cd\u4f5c\u5927\u6587\u4ef6\u5982fastq\u6d4b\u5e8f\u539f\u59cb\u6570\u636e\uff0c\u5e38\u5e38\u4e0d\u9700\u8981\u5c06\u51e0\u767eM\u751a\u81f3\u4e0aG\u7684\u6570\u636e\u5168\u90e8\u5199\u5165\u5230\u5185\u5b58\u6253\u5f00\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u4e86\u89e3\u5934\u90e8\u6570\u636e\u5373\u53ef\u3002\u7528head\u5c31\u975e\u5e38\u8f7b\u4fbf\u3002head\u9ed8\u8ba4\u8f93\u51fa\u524d10\u884c\u5185\u5bb9\u3002 head tail cat less more wc : nl : grep : \u622a\u53d6\u8f93\u5165\u5b57\u7b26\u7684\u9009\u5b9a pattern \u5e76\u8f93\u51fa\u6240\u5728\u7684\u884c ```bash tab=\"head\"","title":"\u663e\u793a\u6587\u672c\u6587\u4ef6\u5185\u5bb9"},{"location":"tutorial/Linux/02_basic-cml/#5","text":"$ head -5 text.txt ```bash tab=\"tail\" # \u8f93\u51fa\u6587\u4ef6\u7684\u6700\u540e5\u884c\u5185\u5bb9 $ tail -5 text.txt ```bash tab=\"cat\"","title":"\u8f93\u51fa\u6587\u4ef6\u524d5\u884c\u5185\u5bb9"},{"location":"tutorial/Linux/02_basic-cml/#texttxt","text":"$ cat text.txt ```bash tab=\"less\" # \u663e\u793a\u6587\u4ef6 'text.txt' \u5185\u5bb9\uff0c\u652f\u6301\u5206\u9875 $ less text.txt ```bash tab=\"more\" $ more text.txt ```bash tab=\"wc\" # \u8f93\u51fa\u6587\u4ef6 'text.txt' \u7684\u884c\u6570\uff0c\u5b57\u7b26\u6570\u548c\u5b57\u8282\u6570\u3002 $ wc text.txt # \u8f93\u51fa\u884c\u6570 $ wc -l text.txt ```bash tab=\"nl\"","title":"\u663e\u793a\u6587\u4ef6 'text.txt' \u5185\u5bb9"},{"location":"tutorial/Linux/02_basic-cml/#_8","text":"$ cat text.txt | nl ```bash tab=\"grep\" # \u663e\u793a\u6587\u4ef6 'text.txt' \u4e2d\u542b\u6709\u5b57\u7b26 'abc' \u7684\u884c $ cat text.txt | grep 'abc' # \u8f93\u51fa\u6587\u4ef6\u4e2d\u884c\u4ee5>\u5f00\u5934\u7684\u884c $ grep '^>' myseq.fasta","title":"\u8f93\u51fa\u884c\u53f7"},{"location":"tutorial/Linux/02_basic-cml/#_9","text":"\u5bf9\u5e8f\u5217\u6570\u636e\u5e38\u9700\u8981\u8fdb\u884c\u538b\u7f29\u5904\u7406\uff0c\u53ef\u4ee5\u4f7f\u7528 gzip/tar\uff0c \u7279\u6b8a\u683c\u5f0f\u538b\u7f29\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u8f6f\u4ef6\uff0c\u4e2a\u4eba\u5e38\u75287z\u6765\u8fdb\u884c\u3002 # gzip \u538b\u7f29\u6587\u4ef6 1 \u4e3a 1.gz $ gzip 1 # gunzip \u89e3\u538b\u7f29 $ gunzip 1 .gz # \u538b\u7f29\u6587\u4ef6 foo \u6216\u8005\u76ee\u5f55 foo \u6210\u4e3a\u4e00\u4e2a foo.tar.gz \u538b\u7f29\u5305 $ tar -zcf foo.tar.gz foo # \u89e3\u538b\u7f29\u6587\u4ef6 foo.tar.gz $ tar -zxf foo.tar.gz","title":"\u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6"},{"location":"tutorial/Linux/02_basic-cml/#_10","text":"Linux \u670d\u52a1\u5668\u4e0a\u8ba1\u7b97\u83b7\u5f97\u7684\u7ed3\u679c\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u5e38\u7528\u65b9\u5f0f\u65b9\u4fbf\u7684\u4e0b\u8f7d\u548c\u4e0a\u4f20\u3002 ssh \u767b\u5f55\u670d\u52a1\u5668 \u5b89\u88c5\u4e86 openssh \u540e\uff0c\u76f4\u63a5\u901a\u8fc7 ssh \u767b\u5f55\u5f00\u542f\u4e86 sshd \u670d\u52a1\u7684 Linux \u670d\u52a1\u5668\uff0c\u76f4\u63a5\u5728\u8fdc\u7aef\u8fdb\u884c\u64cd\u4f5c\u3002 # server_ip\u4e3a\u6240\u8981\u767b\u5f55\u670d\u52a1\u5668ip $ ssh user@server_ip \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u62f7\u8d1d\u6587\u4ef6 \u8fd9\u91cc\u4ee5\u5ba2\u6237\u7aef\u64cd\u4f5c\u4e3a\u4f8b\uff0c\u670d\u52a1\u5668ip\u5047\u8bbe\u4e3a10.44.35.122 # \u4ece\u670d\u52a1\u5668\u62f7\u8d1d\u6587\u4ef6 /data/1.fasta \u5230\u672c\u5730 $ scp mark@10.44.35.122:/data/1.fasta . # \u4ece\u672c\u5730\u4e0a\u4f20\u6587\u4ef6 2.fasta \u5230\u670d\u52a1\u5668/data $ scp 2 .fasta mark@10.44.35.122:/data/2.fasta rsync\u547d\u4ee4\u662f\u4e00\u4e2a\u8fdc\u7a0b\u6570\u636e\u540c\u6b65\u5de5\u5177\uff0c\u53ef\u5feb\u901f\u540c\u6b65\u591a\u53f0\u4e3b\u673a\u95f4\u7684\u6587\u4ef6\u3002rsync\u4f7f\u7528\u6240\u8c13\u7684\u201crsync\u7b97\u6cd5\u201d\u6765\u4f7f\u672c\u5730\u548c\u8fdc\u7a0b\u4e24\u4e2a\u4e3b\u673a\u4e4b\u95f4\u7684\u6587\u4ef6\u8fbe\u5230\u540c\u6b65\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u53ea\u4f20\u9001\u4e24\u4e2a\u6587\u4ef6\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u6574\u4efd\u4f20\u9001\uff0c\u56e0\u6b64\u901f\u5ea6\u76f8\u5f53\u5feb\u3002 # \u4f20\u9001 server_ip \u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\u5230\u672c\u5730 Linux \u7cfb\u7edf /data \u8def\u5f84\u4e2d $ rsync -avz user@server_ip:/data/* /data # \u4f20\u9001\u672c\u5730 test.py \u6587\u4ef6\u5230\u670d\u52a1\u5668 server_ip \u7528\u6237\u76ee\u5f55\u4e2d $ rsync -av ~/test.py user@server_ip::/home/user \u7b80\u5355\u7684\u4f20\u8f93\u5355\u4e2a\u6587\u4ef6\u7528scp\u8fd8\u7b97\u65b9\u4fbf\uff0c\u4f46\u5982\u679c\u9891\u7e41\u4ea4\u4e92\uff0c\u6216\u8005\u9700\u8981\u53ef\u89c6\u5316\u754c\u9762\u6765\u64cd\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u66f4\u65b9\u4fbf\u7684\u5de5\u5177\uff0c\u5bf9\u4e8ewin\u5e73\u53f0\u7528\u6237\uff0c\u7b80\u5355\u7684ssh\u767b\u5f55\u5de5\u5177\u5e38\u7528\u7684\u5982putty\uff0c\u5982\u679c\u8981\u4e0a\u4e0b\u4f20\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u642d\u5efaftp\u670d\u52a1\u6765\u5b9e\u73b0\u3002\u8fd9\u91cc\u63a8\u8350 sshfs\u3002 # \u6302\u8f7d\u670d\u52a1\u5668 /data \u5230\u672c\u5730linux\u673a\u5668\u7684 ~/server \u76ee\u5f55\u3002 $ sshfs mark@10.44.35.122:/data ~/server -o idmap = user -o allow_other","title":"\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u4ea4\u4e92"},{"location":"tutorial/Linux/02_basic-cml/#reference","text":"http://linoxide.com/how-tos/linux-ps-command-examples/ https://commandlinefu.cn/","title":"Reference"},{"location":"tutorial/Linux/03_linux-software/","text":"Linux \u8f6f\u4ef6\u7ba1\u7406 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5728\u4e2a\u4ebaLinux\u4e0a\u8fd0\u884c\u548c\u7ba1\u7406\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\u3002\u4f46\u5728\u670d\u52a1\u5668\u4e0a\u8981\u60f3\u505a\u597d\u591a\u7528\u6237\u7ba1\u7406\u5219\u8981\u590d\u6742\u8bb8\u591a\u3002\u5982\u679c\u8981\u8fd0\u884c\u4e00\u4e9b\u8d1f\u8f7d\u5747\u8861\u6216\u8005\u8fd0\u884c\u5982Galaxy\u5b9e\u4f8b\uff0c\u5219\u9700\u8981\u7ba1\u7406\u5458\u5177\u5907\u76f8\u5f53\u4e30\u5bcc\u7684\u7ecf\u9a8c\u548c\u6280\u672f\u3002\u8fd9\u4e9b\u6280\u672f\u5927\u90e8\u5206\u90fd\u662f\u4e0e\u8ba1\u7b97\u673a\u76f8\u5173\uff0c\u672c\u8282\u53ea\u7b80\u5355\u8ba8\u8bba\u4e00\u4e0b\u4e0e\u751f\u7269\u8f6f\u4ef6\u8fd0\u884c\u76f8\u5173\u7684Linux\u7cfb\u7edf\u7ba1\u7406\u3002 1. \u7cfb\u7edf\u7ea7\u5b89\u88c5 \u00b6 Linux \u4f7f\u7528\u6bd4 Windows \u975e\u5e38\u4fbf\u6377\u7684\u4e00\u4e2a\u5730\u65b9\uff0c\u5728\u4e8e\u5176\u8f6f\u4ef6\u7ba1\u7406\uff08\u867d\u7136 Windows \u76ee\u524d\u4e5f\u6709\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5982 360\u8f6f\u4ef6\u7ba1\u5bb6 \u53ef\u4ee5\u8fdb\u884c\u81ea\u52a8\u5b89\u88c5\u4e0e\u66f4\u65b0\uff09\u3002\u5927\u90e8\u5206\u4e3b\u6d41\u53d1\u884c\u7248\u90fd\u5185\u5e26\u4e86\u547d\u4ee4\u884c\u8f6f\u4ef6\u7ba1\u7406\u5de5\u5177\u3002\u6bd4\u5982ubuntu\u7684apt\u5de5\u5177\uff0carchlinux\u7684pacman\u5de5\u5177\u7b49\u3002Linux \u5b89\u88c5\u7cfb\u7edf\u81ea\u5e26\u7684\u9884\u7f16\u8bd1\u5305\u7684\u597d\u5904\u662f\u8f6f\u4ef6\u4ed3\u5e93\u81ea\u52a8\u89e3\u51b3\u4e86\u8f6f\u4ef6/\u5e93\u4f9d\u8d56\u7684\u95ee\u9898\u3002\u4f60\u5b89\u88c5\u8f6f\u4ef6A\uff0c\u4f1a\u81ea\u52a8\u5b89\u88c5\u6240\u9700\u8981\u7684\u5176\u4ed6\u5e93\u3002 # Ubuntu \u7c7b\u53d1\u884c\u7248\u8f6f\u4ef6\u7ba1\u7406 # \u8f6f\u4ef6\u66f4\u65b0 $ sudo apt update $ sudo apt upgrade # \u8f6f\u4ef6\u5b89\u88c5 $ sudo apt install pkg-name # \u8f6f\u4ef6\u5220\u9664 $ sudo apt remove pkg-name # \u8f6f\u4ef6\u641c\u7d22 $ sudo apt search pkg-name # Archlinux \u7c7b\u53d1\u884c\u7248\u8f6f\u4ef6\u7ba1\u7406 # \u8f6f\u4ef6\u66f4\u65b0 $ sudo pacman -Syu # \u8f6f\u4ef6\u5b89\u88c5 $ sudo pacman -S pkg-name # \u8f6f\u4ef6\u5220\u9664 $ sudo pacman -R pkg-name # \u8f6f\u4ef6\u641c\u7d22 $ sudo pacman -Ss pkg-name \u5b89\u88c5\u7cfb\u7edf\u7ea7\u6216\u8005\u7528\u6237\u7ea7\u8f6f\u4ef6 2. conda \u865a\u62df\u73af\u5883 \u00b6 \u7531\u4e8e\u5f88\u591a\u5f00\u53d1\u8005\u9700\u8981\u5728\u4e0d\u540c\u73af\u5883\u4e0b\u8c03\u7528\u4e0d\u540c\u7248\u672c\uff0c\u6216\u8005\u4f7f\u7528\u4e0d\u540c\u7248\u672c\u7684 java, python\u8fdb\u884c\u5f00\u53d1\u548c\u8fd0\u884c\u7a0b\u5e8f\u3002\u800c\u5404\u79cd\u7248\u672c\u7684\u4f9d\u8d56\u5e93\u7531\u4e8e\u5bf9\u7248\u672c\u7684\u652f\u6301\u5ea6\uff0c\u4f1a\u9020\u6210\u9519\u7efc\u590d\u6742\u7684\u7ed3\u679c\u3002\u56e0\u6b64\u6211\u4eec\u5e38\u5e38\u5c06\u4e00\u4e2a\u5e94\u7528\u653e\u5728\u4e0e\u7cfb\u7edf\u7ea7\u7a0b\u5e8f\u9694\u79bb\u7684\u865a\u62df\u73af\u5883\u4e2d\u3002\u76ee\u524d\u6700\u6d41\u884c\u7684\u5c31\u662f\u4f7f\u7528 conda \u5de5\u5177\u3002 conda \u5305\u542b anaconda \u548c miniconda 2\u4e2a\u7248\u672c\u3002\u524d\u8005\u81ea\u5e26\u4e86\u5f88\u591a\u6570\u636e\u5206\u6790\u76f8\u5173\u7684\u5e94\u7528\u7a0b\u5e8f\u548c\u5305\uff0c\u540e\u8005\u5219\u662f\u6700\u5c0f\u5316\u4e86\u7b2c\u4e09\u65b9\u7a0b\u5e8f\uff0c\u53ea\u63d0\u4f9b\u4e86\u4e00\u4e2amini\u7684conda\u652f\u6301\u3002 # \u4e0b\u8f7d\u5b89\u88c5 miniconda $ cd /tmp $ wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh # \u53ea\u80fd\u5728\u5f53\u524d\u7528\u6237\u5b89\u88c5 conda\uff0c\u4e0d\u80fd\u5b89\u88c5\u5230\u7cfb\u7edf\u7ea7\u6743\u9650\u4e0b $ sh Miniconda3-latest-Linux-x86 # \u8bbe\u7f6e\u8def\u5f84\uff0c\u4e2a\u4eba\u4e00\u822c\u8bbe\u7f6e\u4e3a $HOME/.conda $ conda config --add channels defaults $ conda config --add channels conda-forge $ conda config --add channels bioconda \u5efa\u7acb conda \u865a\u62df\u73af\u5883 # \u521b\u5efa\u865a\u62df\u73af\u5883 myenv $ conda create -n myenv $ conda activate myenv # \u5728 myenv \u73af\u5883\u4e2d\u5b89\u88c5\u8f6f\u4ef6 ( myenv ) $ conda install mysoftware 3. Git \u4ee3\u7801\u7ba1\u7406\u5de5\u5177 \u00b6 git \u662f Linux \u5185\u6838\u4e4b\u7236 Linus \u5f00\u53d1\u7684\u4ee3\u7801\u7ba1\u7406\u5de5\u5177\u3002\u76ee\u524d\u793e\u533a\u4e2d\u6bd4\u8f83\u6d3b\u8dc3\u7684 git \u5728\u7ebf\u793e\u7fa4\u670d\u52a1\u6709 github, gitlab, bitbucket(\u8fc7\u53bb\u662fhg,\u73b0\u5728\u4e5f\u8f6c\u4e3agit)\uff0c\u56fd\u5185\u7684\u4f8b\u5982coding.net,oschina\u3002github\u662f\u6700\u65e9\u6700\u6210\u529f\u7684 git \u5728\u7ebf\u7ba1\u7406\u793e\u533a\uff0c\u6781\u597d\u7684\u7c98\u5408\u4e86\u5e7f\u5927\u201c\u7801\u519c\u201d\uff0c\u4f17\u591a\u4e3b\u6d41\u7684\u5f00\u6e90\u8f6f\u4ef6\u90fd\u9a7b\u624e\u5728 github \u4e2d\u3002 \u8bb8\u591a\u751f\u7269\u5b66\u8f6f\u4ef6\u7684\u6e90\u4ee3\u7801\u4e5f\u9009\u62e9\u6258\u7ba1\u5728 github \u4e2d\uff08\u8001\u724c\u7684\u53ef\u80fd\u5728 sourceforge.net\uff09\uff0c\u5982\u679c\u6211\u4eec\u8981\u7814\u7a76\u4ee3\u7801\uff0c\u6216\u8005\u4f7f\u7528\u811a\u672c\u7a0b\u5e8f\uff0c\u6216\u8005\u901a\u8fc7\u6e90\u4ee3\u7801\u5b89\u88c5\u7f16\u8bd1\u5b89\u88c5\u8f6f\u4ef6\u7b49\uff0c\u5c31\u8981\u5b66\u4f1a\u6700\u57fa\u672c\u7684 git \u547d\u4ee4\u3002\u800c\u4e14 github \u4e0a\u8fd8\u6709\u8bb8\u591a\u57fa\u4e8e markdown, rst, jupyter, pdf \u7b49\u683c\u5f0f\u7684\u6559\u5b66\u8d44\u6599\uff0c\u662f\u5b66\u4e60\u7684\u6700\u597d\u573a\u6240\u4e4b\u4e00\u3002 # \u5b89\u88c5 git # ubuntu $ sudo apt install git-core # archlinux $ sudo pacman -S git # \u514b\u9686 bwa \u6e90\u7801\u4ed3\u5e93\u5230\u672c\u5730 $ git clone https://github.com/lh3/bwa.git $ cd bwa # \u7f16\u8bd1\u5b89\u88c5 bwa $ make $ sudo cp bwa /usr/local/sbin # \u4f7f\u7528 bwa $ bwa mem ... 4. docker\u65b9\u5f0f \u00b6 docker \u662f\u4e00\u79cd\u865a\u62df\u673a\uff0c\u4f46\u662f\u5176\u4e0e virtualbox, vm \u7b49\u7684\u533a\u522b\u662f\u5176\u542f\u52a8\u548c\u8c03\u7528\u90fd\u662f\u6beb\u79d2\u7ea7\u7684\uff0c\u51e0\u4e4e\u611f\u89c9\u4e0d\u5230\u5176\u7684\u52a0\u8f7d\u65f6\u95f4\uff0c\u4f46\u53c8\u4e0e\u7cfb\u7edf\u6709\u6c99\u76d2\u6a21\u5f0f\u9694\u79bb\uff0c\u4fdd\u8bc1\u4e86\u5b89\u5168\u3002docker \u6700\u5927\u7684\u597d\u5904\u662f\u76f4\u63a5\u8c03\u7528\u4ed6\u4eba\u5199\u7684 DOCKERFILE \u5c31\u53ef\u4ee5\u4e0b\u8f7d image\uff0c\u8fd0\u884c\u751f\u6210 container\uff0c DOCKERFILE \u89e3\u51b3\u7684\u5b89\u88c5\u7684\u8fc7\u7a0b\uff0c\u9664\u4e86\u4e0b\u8f7d\u5b89\u88c5\u901f\u5ea6\u53ef\u80fd\u7565\u6162\uff0c\u5176\u4ed6\u51e0\u4e4e\u4e0d\u9700\u8981\u66f4\u591a\u7684\u5b66\u4e60\u66f2\u7ebf\u3002\u5b89\u88c5\u5b8c\u6210\u8fd0\u884c container \u5373\u53ef\u4f7f\u7528\u3002 Ubuntu 18.04 Server\u5b89\u88c5docker # \u6dfb\u52a0 docker \u4ed3\u5e93 $ sudo apt update $ sudo apt install apt-transport-https ca-certificates curl software-properties-common $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable\" $ sudo apt update $ apt-cache policy docker-ce # \u5b89\u88c5 docker $ sudo apt install docker-ce # \u67e5\u770b docker \u542f\u52a8\u72b6\u6001 $ sudo systemctl status docker # \u5982\u679c\u6ca1\u6709\u542f\u52a8\u7cfb\u7edf\u662f\u8fd0\u884c docker # \u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165 docker \u7ec4\uff0c\u8fd0\u884c docker \u65f6\u53ef\u4ee5\u4e0d\u7528\u8f93\u5165 sudo \u547d\u4ee4 $ sudo usermod -aG docker ${ USER } # \u66f4\u65b0\u7ec4\u4fe1\u606f $ su - ${ USER } # \u786e\u8ba4\u5f53\u524d\u7528\u6237\u5df2\u7ecf\u52a0\u5165 docker \u7ec4 $ id -nG docker\u955c\u50cf\u4e0b\u8f7d # \u8fd0\u884c\u8f6f\u4ef6\u81ea\u5e26\u7684 hello-world \u955c\u50cf $ docker run hello-world # \u955c\u50cf\u641c\u7d22 $ docker search ubuntu # \u955c\u50cf\u4e0b\u8f7d $ docker pull ubuntu # \u67e5\u770b\u5f53\u524d\u5df2\u6709\u7684\u955c\u50cf $ docker images docker\u5bb9\u5668\u8fd0\u884c # \u4ee5\u4ea4\u4e92\u65b9\u5f0f\u8fd0\u884c\u5bb9\u5668 ubuntu $ docker run -it ubuntu # \u67e5\u770b\u5f53\u524d\u8fd0\u884c\u5bb9\u5668 $ docker ps # \u67e5\u770b\u6240\u6709\u5bb9\u5668 $ docker ps -a","title":"03. Linux \u8f6f\u4ef6\u7ba1\u7406"},{"location":"tutorial/Linux/03_linux-software/#linux","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5728\u4e2a\u4ebaLinux\u4e0a\u8fd0\u884c\u548c\u7ba1\u7406\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\u3002\u4f46\u5728\u670d\u52a1\u5668\u4e0a\u8981\u60f3\u505a\u597d\u591a\u7528\u6237\u7ba1\u7406\u5219\u8981\u590d\u6742\u8bb8\u591a\u3002\u5982\u679c\u8981\u8fd0\u884c\u4e00\u4e9b\u8d1f\u8f7d\u5747\u8861\u6216\u8005\u8fd0\u884c\u5982Galaxy\u5b9e\u4f8b\uff0c\u5219\u9700\u8981\u7ba1\u7406\u5458\u5177\u5907\u76f8\u5f53\u4e30\u5bcc\u7684\u7ecf\u9a8c\u548c\u6280\u672f\u3002\u8fd9\u4e9b\u6280\u672f\u5927\u90e8\u5206\u90fd\u662f\u4e0e\u8ba1\u7b97\u673a\u76f8\u5173\uff0c\u672c\u8282\u53ea\u7b80\u5355\u8ba8\u8bba\u4e00\u4e0b\u4e0e\u751f\u7269\u8f6f\u4ef6\u8fd0\u884c\u76f8\u5173\u7684Linux\u7cfb\u7edf\u7ba1\u7406\u3002","title":"Linux \u8f6f\u4ef6\u7ba1\u7406"},{"location":"tutorial/Linux/03_linux-software/#1","text":"Linux \u4f7f\u7528\u6bd4 Windows \u975e\u5e38\u4fbf\u6377\u7684\u4e00\u4e2a\u5730\u65b9\uff0c\u5728\u4e8e\u5176\u8f6f\u4ef6\u7ba1\u7406\uff08\u867d\u7136 Windows \u76ee\u524d\u4e5f\u6709\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5982 360\u8f6f\u4ef6\u7ba1\u5bb6 \u53ef\u4ee5\u8fdb\u884c\u81ea\u52a8\u5b89\u88c5\u4e0e\u66f4\u65b0\uff09\u3002\u5927\u90e8\u5206\u4e3b\u6d41\u53d1\u884c\u7248\u90fd\u5185\u5e26\u4e86\u547d\u4ee4\u884c\u8f6f\u4ef6\u7ba1\u7406\u5de5\u5177\u3002\u6bd4\u5982ubuntu\u7684apt\u5de5\u5177\uff0carchlinux\u7684pacman\u5de5\u5177\u7b49\u3002Linux \u5b89\u88c5\u7cfb\u7edf\u81ea\u5e26\u7684\u9884\u7f16\u8bd1\u5305\u7684\u597d\u5904\u662f\u8f6f\u4ef6\u4ed3\u5e93\u81ea\u52a8\u89e3\u51b3\u4e86\u8f6f\u4ef6/\u5e93\u4f9d\u8d56\u7684\u95ee\u9898\u3002\u4f60\u5b89\u88c5\u8f6f\u4ef6A\uff0c\u4f1a\u81ea\u52a8\u5b89\u88c5\u6240\u9700\u8981\u7684\u5176\u4ed6\u5e93\u3002 # Ubuntu \u7c7b\u53d1\u884c\u7248\u8f6f\u4ef6\u7ba1\u7406 # \u8f6f\u4ef6\u66f4\u65b0 $ sudo apt update $ sudo apt upgrade # \u8f6f\u4ef6\u5b89\u88c5 $ sudo apt install pkg-name # \u8f6f\u4ef6\u5220\u9664 $ sudo apt remove pkg-name # \u8f6f\u4ef6\u641c\u7d22 $ sudo apt search pkg-name # Archlinux \u7c7b\u53d1\u884c\u7248\u8f6f\u4ef6\u7ba1\u7406 # \u8f6f\u4ef6\u66f4\u65b0 $ sudo pacman -Syu # \u8f6f\u4ef6\u5b89\u88c5 $ sudo pacman -S pkg-name # \u8f6f\u4ef6\u5220\u9664 $ sudo pacman -R pkg-name # \u8f6f\u4ef6\u641c\u7d22 $ sudo pacman -Ss pkg-name \u5b89\u88c5\u7cfb\u7edf\u7ea7\u6216\u8005\u7528\u6237\u7ea7\u8f6f\u4ef6","title":"1. \u7cfb\u7edf\u7ea7\u5b89\u88c5"},{"location":"tutorial/Linux/03_linux-software/#2-conda","text":"\u7531\u4e8e\u5f88\u591a\u5f00\u53d1\u8005\u9700\u8981\u5728\u4e0d\u540c\u73af\u5883\u4e0b\u8c03\u7528\u4e0d\u540c\u7248\u672c\uff0c\u6216\u8005\u4f7f\u7528\u4e0d\u540c\u7248\u672c\u7684 java, python\u8fdb\u884c\u5f00\u53d1\u548c\u8fd0\u884c\u7a0b\u5e8f\u3002\u800c\u5404\u79cd\u7248\u672c\u7684\u4f9d\u8d56\u5e93\u7531\u4e8e\u5bf9\u7248\u672c\u7684\u652f\u6301\u5ea6\uff0c\u4f1a\u9020\u6210\u9519\u7efc\u590d\u6742\u7684\u7ed3\u679c\u3002\u56e0\u6b64\u6211\u4eec\u5e38\u5e38\u5c06\u4e00\u4e2a\u5e94\u7528\u653e\u5728\u4e0e\u7cfb\u7edf\u7ea7\u7a0b\u5e8f\u9694\u79bb\u7684\u865a\u62df\u73af\u5883\u4e2d\u3002\u76ee\u524d\u6700\u6d41\u884c\u7684\u5c31\u662f\u4f7f\u7528 conda \u5de5\u5177\u3002 conda \u5305\u542b anaconda \u548c miniconda 2\u4e2a\u7248\u672c\u3002\u524d\u8005\u81ea\u5e26\u4e86\u5f88\u591a\u6570\u636e\u5206\u6790\u76f8\u5173\u7684\u5e94\u7528\u7a0b\u5e8f\u548c\u5305\uff0c\u540e\u8005\u5219\u662f\u6700\u5c0f\u5316\u4e86\u7b2c\u4e09\u65b9\u7a0b\u5e8f\uff0c\u53ea\u63d0\u4f9b\u4e86\u4e00\u4e2amini\u7684conda\u652f\u6301\u3002 # \u4e0b\u8f7d\u5b89\u88c5 miniconda $ cd /tmp $ wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh # \u53ea\u80fd\u5728\u5f53\u524d\u7528\u6237\u5b89\u88c5 conda\uff0c\u4e0d\u80fd\u5b89\u88c5\u5230\u7cfb\u7edf\u7ea7\u6743\u9650\u4e0b $ sh Miniconda3-latest-Linux-x86 # \u8bbe\u7f6e\u8def\u5f84\uff0c\u4e2a\u4eba\u4e00\u822c\u8bbe\u7f6e\u4e3a $HOME/.conda $ conda config --add channels defaults $ conda config --add channels conda-forge $ conda config --add channels bioconda \u5efa\u7acb conda \u865a\u62df\u73af\u5883 # \u521b\u5efa\u865a\u62df\u73af\u5883 myenv $ conda create -n myenv $ conda activate myenv # \u5728 myenv \u73af\u5883\u4e2d\u5b89\u88c5\u8f6f\u4ef6 ( myenv ) $ conda install mysoftware","title":"2. conda \u865a\u62df\u73af\u5883"},{"location":"tutorial/Linux/03_linux-software/#3-git","text":"git \u662f Linux \u5185\u6838\u4e4b\u7236 Linus \u5f00\u53d1\u7684\u4ee3\u7801\u7ba1\u7406\u5de5\u5177\u3002\u76ee\u524d\u793e\u533a\u4e2d\u6bd4\u8f83\u6d3b\u8dc3\u7684 git \u5728\u7ebf\u793e\u7fa4\u670d\u52a1\u6709 github, gitlab, bitbucket(\u8fc7\u53bb\u662fhg,\u73b0\u5728\u4e5f\u8f6c\u4e3agit)\uff0c\u56fd\u5185\u7684\u4f8b\u5982coding.net,oschina\u3002github\u662f\u6700\u65e9\u6700\u6210\u529f\u7684 git \u5728\u7ebf\u7ba1\u7406\u793e\u533a\uff0c\u6781\u597d\u7684\u7c98\u5408\u4e86\u5e7f\u5927\u201c\u7801\u519c\u201d\uff0c\u4f17\u591a\u4e3b\u6d41\u7684\u5f00\u6e90\u8f6f\u4ef6\u90fd\u9a7b\u624e\u5728 github \u4e2d\u3002 \u8bb8\u591a\u751f\u7269\u5b66\u8f6f\u4ef6\u7684\u6e90\u4ee3\u7801\u4e5f\u9009\u62e9\u6258\u7ba1\u5728 github \u4e2d\uff08\u8001\u724c\u7684\u53ef\u80fd\u5728 sourceforge.net\uff09\uff0c\u5982\u679c\u6211\u4eec\u8981\u7814\u7a76\u4ee3\u7801\uff0c\u6216\u8005\u4f7f\u7528\u811a\u672c\u7a0b\u5e8f\uff0c\u6216\u8005\u901a\u8fc7\u6e90\u4ee3\u7801\u5b89\u88c5\u7f16\u8bd1\u5b89\u88c5\u8f6f\u4ef6\u7b49\uff0c\u5c31\u8981\u5b66\u4f1a\u6700\u57fa\u672c\u7684 git \u547d\u4ee4\u3002\u800c\u4e14 github \u4e0a\u8fd8\u6709\u8bb8\u591a\u57fa\u4e8e markdown, rst, jupyter, pdf \u7b49\u683c\u5f0f\u7684\u6559\u5b66\u8d44\u6599\uff0c\u662f\u5b66\u4e60\u7684\u6700\u597d\u573a\u6240\u4e4b\u4e00\u3002 # \u5b89\u88c5 git # ubuntu $ sudo apt install git-core # archlinux $ sudo pacman -S git # \u514b\u9686 bwa \u6e90\u7801\u4ed3\u5e93\u5230\u672c\u5730 $ git clone https://github.com/lh3/bwa.git $ cd bwa # \u7f16\u8bd1\u5b89\u88c5 bwa $ make $ sudo cp bwa /usr/local/sbin # \u4f7f\u7528 bwa $ bwa mem ...","title":"3. Git \u4ee3\u7801\u7ba1\u7406\u5de5\u5177"},{"location":"tutorial/Linux/03_linux-software/#4-docker","text":"docker \u662f\u4e00\u79cd\u865a\u62df\u673a\uff0c\u4f46\u662f\u5176\u4e0e virtualbox, vm \u7b49\u7684\u533a\u522b\u662f\u5176\u542f\u52a8\u548c\u8c03\u7528\u90fd\u662f\u6beb\u79d2\u7ea7\u7684\uff0c\u51e0\u4e4e\u611f\u89c9\u4e0d\u5230\u5176\u7684\u52a0\u8f7d\u65f6\u95f4\uff0c\u4f46\u53c8\u4e0e\u7cfb\u7edf\u6709\u6c99\u76d2\u6a21\u5f0f\u9694\u79bb\uff0c\u4fdd\u8bc1\u4e86\u5b89\u5168\u3002docker \u6700\u5927\u7684\u597d\u5904\u662f\u76f4\u63a5\u8c03\u7528\u4ed6\u4eba\u5199\u7684 DOCKERFILE \u5c31\u53ef\u4ee5\u4e0b\u8f7d image\uff0c\u8fd0\u884c\u751f\u6210 container\uff0c DOCKERFILE \u89e3\u51b3\u7684\u5b89\u88c5\u7684\u8fc7\u7a0b\uff0c\u9664\u4e86\u4e0b\u8f7d\u5b89\u88c5\u901f\u5ea6\u53ef\u80fd\u7565\u6162\uff0c\u5176\u4ed6\u51e0\u4e4e\u4e0d\u9700\u8981\u66f4\u591a\u7684\u5b66\u4e60\u66f2\u7ebf\u3002\u5b89\u88c5\u5b8c\u6210\u8fd0\u884c container \u5373\u53ef\u4f7f\u7528\u3002 Ubuntu 18.04 Server\u5b89\u88c5docker # \u6dfb\u52a0 docker \u4ed3\u5e93 $ sudo apt update $ sudo apt install apt-transport-https ca-certificates curl software-properties-common $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - $ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable\" $ sudo apt update $ apt-cache policy docker-ce # \u5b89\u88c5 docker $ sudo apt install docker-ce # \u67e5\u770b docker \u542f\u52a8\u72b6\u6001 $ sudo systemctl status docker # \u5982\u679c\u6ca1\u6709\u542f\u52a8\u7cfb\u7edf\u662f\u8fd0\u884c docker # \u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165 docker \u7ec4\uff0c\u8fd0\u884c docker \u65f6\u53ef\u4ee5\u4e0d\u7528\u8f93\u5165 sudo \u547d\u4ee4 $ sudo usermod -aG docker ${ USER } # \u66f4\u65b0\u7ec4\u4fe1\u606f $ su - ${ USER } # \u786e\u8ba4\u5f53\u524d\u7528\u6237\u5df2\u7ecf\u52a0\u5165 docker \u7ec4 $ id -nG docker\u955c\u50cf\u4e0b\u8f7d # \u8fd0\u884c\u8f6f\u4ef6\u81ea\u5e26\u7684 hello-world \u955c\u50cf $ docker run hello-world # \u955c\u50cf\u641c\u7d22 $ docker search ubuntu # \u955c\u50cf\u4e0b\u8f7d $ docker pull ubuntu # \u67e5\u770b\u5f53\u524d\u5df2\u6709\u7684\u955c\u50cf $ docker images docker\u5bb9\u5668\u8fd0\u884c # \u4ee5\u4ea4\u4e92\u65b9\u5f0f\u8fd0\u884c\u5bb9\u5668 ubuntu $ docker run -it ubuntu # \u67e5\u770b\u5f53\u524d\u8fd0\u884c\u5bb9\u5668 $ docker ps # \u67e5\u770b\u6240\u6709\u5bb9\u5668 $ docker ps -a","title":"4. docker\u65b9\u5f0f"},{"location":"tutorial/Linux/04_awk/","text":"\u7528 awk \u5904\u7406 NGS \u6570\u636e \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb awk \u5de5\u5177\u5e38\u7528\u6765\u5bf9\u6587\u672c\u6587\u4ef6\u7684\u5185\u5bb9\u6309\u884c\u8fdb\u884c\u5339\u914d\u641c\u7d22\uff0c\u5e76\u5bf9\u641c\u7d22\u6761\u4ef6\u5339\u914d\u7684\u5185\u5bb9\u8fdb\u884c\u64cd\u4f5c\u3002\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5e26\u6765\u5927\u91cf\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u521d\u7ea7\u5206\u6790\u751f\u6210\u7684\u5404\u79cd\u6309\u5217\u7684\u6570\u636e\u7ed3\u679c\uff0cawk \u5c31\u53ef\u4ee5\u5927\u663e\u8eab\u624b\u4e3a\u6d4b\u5e8f\u6570\u636e\u7684\u8f6c\u6362\u4e0e\u5206\u6790\u63d0\u4f9b\u65b9\u4fbf\u7684\u64cd\u4f5c\u3002 \u6211\u4eec\u9996\u5148\u6765\u770b\u4e00\u4e2a\u6700\u7b80\u5355\u7684 awk \u547d\u4ee4\u7a0b\u5e8f\uff1a # \u5e8f\u5217\u6587\u4ef6contigs.fasta\u6587\u4ef6\u5305\u542b2\u6761DNA\u5e8f\u5217\uff0c\u5206\u522b\u662fseq1\u548cseq2\u3002 $ cat contigs.fasta >seq1 ATGGGGTCCGATTACCG >seq2 CGGNTTACCGYGACAGT # \u63d0\u53d62\u6761\u5e8f\u5217\u7684id $ awk '/>/' contigs.fasta >seq1 >seq2 # \u63d0\u53d6ATG\u5f00\u59cb\u7684\u5e8f\u5217 $ awk '/^ATG/' contigs.fasta ATGGGGTCCGATTACCG Note awk \u7528\u6a21\u5f0f\u5339\u914d\u65f6\uff0c\u4e0e grep \u7c7b\u4f3c\u3002\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06 fasta \u6587\u4ef6\u4e2d\u5305\u542b '>' \u5b57\u7b26\u7684\u884c\u8f93\u51fa\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6240\u6709\u7684\u5e8f\u5217\u5934\u5185\u5bb9\u8f93\u51fa\u3002\u4f5c\u7528\u7c7b\u4f3c grep \">\" \u3002 \u5229\u7528 awk \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8c03\u6574\u6216\u8f93\u51fa\u5217\uff1a # \u4f8b\u5982\u8fd9\u6837\u6570\u636e\u6587\u4ef6input_data $ cat input_data gene1 100 -300 description gene2 1000 -1500 description ... # \u5f53\u7b2c\u4e00\u5217\u5305\u542bgene1\u5b57\u7b26\u65f6\uff0c\u6253\u5370\u7b2c\u4e8c\u5217\u4fe1\u606f\u57fa\u56e0\u5728\u57fa\u56e0\u7ec4\u4e0a\u7684\u4f4d\u7f6e $ awk '$1 ~/gene1/ {print $2}' input_data 100 -300 # \u7528 grep \u548c sed \u5b9e\u73b0\u7c7b\u4f3c\u6548\u679c $ cat input_data | grep gene1 | sed { $1 } # \u4e5f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8c03\u6574\u5217\u7684\u987a\u5e8f $ awk '{print $3\"\\t\"$1\"\\t\"$2}' input_data description gene1 100 -300 description gene2 1000 -1500 ... 1. awk \u547d\u4ee4\u6784\u6210 \u00b6 awk \u7a0b\u5e8f\u4e3b\u4f53\u4e3b\u8981\u5305\u62ec pattern\uff0caction\u548cinput file\uff1a pattern \u8868\u793a\u6240\u8981\u641c\u7d22\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 { action } \u5219\u8868\u793a\u641c\u7d22\u5339\u914d\u540e\u8981\u505a\u7684\u64cd\u4f5c\u3002 input file\uff1a\u6240\u8981\u641c\u7d22\u7684\u8f93\u5165\u5185\u5bb9\uff0c\u6bd4\u5982\u524d\u9762\u4f8b\u5b50\u7684 contigs.fasta \u77e5\u8bc6\u70b9 awk\u53ef\u4ee5\u5728shell\u91cc\u76f4\u63a5\u8fd0\u884c\uff1a $ awk 'pattern { action }' input_file \u4e5f\u53ef\u4ee5\u5199\u6210awk\u7a0b\u5e8f\u6765\u8fd0\u884c\u3002\u4e00\u4e2a awk \u7a0b\u5e8f\u5f80\u5f80\u5982\u4e0b\u6240\u793a\uff1a #!/usr/bin/awk -f pattern { action } awk \u53ef\u4ee5\u4e0d\u9700\u8981\u8f93\u5165\u6587\u4ef6\uff1b\u5bf9\u4e8epattern\u548caction\u6765\u8bf4\uff0c2\u8005\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u624d\u80fd\u8fd0\u884c\u3002\u5982\u679c\u6ca1\u6709pattern\uff0c\u5219\u9ed8\u8ba4\u5339\u914d\u4efb\u4f55\u8f93\u5165\uff0c\u6309\u884c\u8f93\u51fa\u5e76\u6267\u884caction\u3002\u5982\u679c\u6ca1\u6709action\uff0c\u5219\u5339\u914dpattern\u5e76\u6309\u884c\u8f93\u51fa\u4e0d\u505a\u989d\u5916\u64cd\u4f5c\u3002 # \u5c1d\u8bd5\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5728\u7ec8\u7aef\u6253\u5370`hello world`\u3002 $ awk 'BEGIN { print \"hello world\" }' # \u8fd9\u91ccBEGIN\u662fpattern\uff0c{ print \"hello world\" } \u662faction # \u6a21\u62dfcat\u8f93\u51fa\u7ec8\u7aef\u8f93\u5165\u7684\u5b57\u7b26\u3002 $ awk '{ print }' # \u8fd9\u91cc\u7701\u7565\u4e86pattern\uff0c\u53ea\u6709{print}\u505a\u4e3aaction \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u53ef\u4ee5\u4fdd\u5b58\u6210\u6587\u4ef6\uff08\u5982 hello_world.awk \uff09\u6765\u8fd0\u884c\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a #!/usr/bin/awk -f # \u6ce8\u610f\u4e0d\u540c\u53d1\u884c\u7248\u7684linux\uff0cawk\u8def\u5f84\u6709\u6240\u533a\u522b BEGIN { print \"hello world\" } \u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff1a $ chmod +x hello_world.awk $ ./hello_world.awk 2. awk \u57fa\u672c\u8bed\u6cd5 \u00b6 2.1 Pattern \u00b6 2.1.1 \u6b63\u5219\u8868\u8fbe\u5f0f \u00b6 pattern \u53ef\u4ee5\u91c7\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u5185\u5bb9\u3002\u7528 / regular expression / \u6765\u8868\u793a\u3002 \u51e0\u4e2a\u7279\u6b8a\u7684Patterns\uff1a BEGIN: awk\u5f00\u59cb\u8f93\u5165\u5185\u5bb9\u4e4b\u524d\uff0c\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u521d\u59cb\u53d8\u91cf\u7b49 END: awk\u7ed3\u675f\u8f93\u5165\u5185\u5bb9\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528\u6765\u8f93\u51fa\u7edf\u8ba1\u4fe1\u606f\u7b49 BEGINFILE: awk\u8f93\u5165\u5185\u5bb9\u4e3a\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u7edf\u4e00\u5b9a\u4e49\u591a\u4e2a\u6587\u4ef6\u7684BEGIN\u5757 ENDFILE: awk\u8f93\u5165\u5185\u5bb9\u4e3a\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u7edf\u4e00\u5b9a\u4e49\u591a\u4e2a\u6587\u4ef6\u7684END\u5757 2.1.2 \u8bed\u53e5\u8868\u8fbe \u00b6 # \u5f53\u7b2c\u4e00\u5217\u5185\u5bb9\u662fgene\u65f6\uff0c\u8f93\u51fa\u7b2c\u4e8c\u5217\u5185\u5bb9\u3002\u53ef\u7528\u4e8e\u6ce8\u91ca\u6587\u4ef6 $ awk '$1 == \"gene\" { print $2 }' genes.list 2.2 Action \u00b6 2.2.1 if...else \u00b6 awk\u7684action\u652f\u6301\u6761\u4ef6\u5224\u65ad\u8bed\u53e5 if else # if \u8bed\u53e5\u7684\u57fa\u672c\u7528\u6cd5 $ awk '{if(condition) print $1}' input # if else block $ awk '{if(condition)print $1;else print $2}' input 2.2.2 while \u00b6 awk\u7684action\u652f\u6301\u5faa\u73af\u8bed\u53e5\uff0c\u53ef\u4ee5\u7528while\u63a7\u5236\u3002while \u63a7\u5236\u8bed\u53e5\u8981\u6362\u884c\uff0c\u75284\u4e2a\u7a7a\u683c\u5212\u5206\u63a7\u5236\u5757\u3002 # \u5c06\u4f1a\u5c06\u5217\u5185\u5bb9\u5757\u53ea\u8f93\u51fa\u524d3\u5217\u5185\u5bb9\uff0c\u4e14\u6ca1\u4e00\u4e2a\u6570\u636e\u5360\u636e\u4e00\u884c $ awk '{i=1;while(i<=3){print $i;i++}}' input 2.3. \u5185\u5efa\u53d8\u91cf \u00b6 2.3.1 \u63a7\u5236 awk \u7684\u53d8\u91cf \u00b6 FIELDWIDTHS\uff1a\u8bbe\u7f6e\u5206\u5272\u957f\u5ea6\uff0c\u5982FS\u53c2\u6570\u8bbe\u7f6e\u7a7a\u683c\u4e3a\u5206\u5272\u7b26\uff0c\u53ef\u4ee5\u7528FIELDWIDTHS\u8bbe\u7f6e\u7a7a\u683c\u957f\u5ea6\u3002 FS\uff1a\u8bbe\u7f6e\u7684\u5206\u5272\u7b26\uff0c\u9ed8\u8ba4\u662f\u7a7a\u683c\" \" OFMT\uff1a\u9ed8\u8ba4\u683c\u5f0f\u5316\u6570\u5b57\uff0c\u9ed8\u8ba4\u662f%.6g\uff0c OFS\uff1a\u8bbe\u7f6eprint\u8f93\u51fa\u5404\u5b57\u6bb5\u7684\u7b26\u53f7\uff0c\u9ed8\u8ba4\u662f\u7a7a\u683c\" \" ORS\uff1a\u8bbe\u7f6eprint\u8f93\u51fa\u591a\u884c\u7684\u7b26\u53f7\uff0c\u6a21\u5f0f\u662f\\n RS\uff1a\u8bbe\u7f6e\u884c\u7684\u5206\u5272\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u6362\u884c\u7b26\\n 2.3.2 \u4f20\u9012\u4fe1\u606f\u7684\u53d8\u91cf \u00b6 ARGC\uff1aawk\u547d\u4ee4\u4f20\u9012\u7684\u53c2\u6570\u4e2a\u6570 ARGV\uff1a\u4ee5\u6570\u7ec4\u5f62\u5f0f\u4fdd\u7559awk\u4f20\u9012\u7684\u6240\u6709\u53c2\u6570 ENVIRON\uff1a\u7528\u6765\u5728awk\u4e2d\u8c03\u7528\u73af\u5883\u53d8\u91cf FILENAME\uff1a\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\u7684\u540d\u79f0 FNR\uff1a\u5f53\u524d\u6587\u4ef6awk\u8fd0\u884c\u7684\u884c\u53f7 NF\uff1a\u8868\u793a\u5f53\u524d\u884c\u4e2d\u6709\u591a\u5c11\u4e2a\u5b57\u6bb5 NR\uff1a\u8868\u793a\u5f53\u524d\u5904\u7406\u4e86\u591a\u5c11\u884c\uff0c\u5f53\u591a\u4e2a\u6587\u4ef6\u5904\u7406\u65f6\uff0c\u8be5\u503c\u662fFNR\u53e0\u52a0\u7684 RLENGTH\uff1a\u8868\u793a\u5339\u914d\u6a21\u5f0f\u547d\u4e2d\u7684\u5339\u914d\u957f\u5ea6 2.4. \u5185\u5efa\u51fd\u6570 \u00b6 2.4.1 \u6570\u5b66\u51fd\u6570 \u00b6 \u53ef\u4ee5\u76f4\u63a5\u8c03\u7528awk\u7684\u51fd\u6570\u8fdb\u884c\u8ba1\u7b97 atan2(y, x) cos(x) exp(x) int(x) log(x) rand() sin(x) sqrt(x) srand([ x ]) 2.4.2 \u5b57\u7b26\u4e32\u51fd\u6570 \u00b6 asort(source [ , dest [ , how ] ] ) # asorti(source [ , dest [ , how ] ] ) # gensub(regexp, replacement, how [ , target ] ) # gsub(regexp, replacement [ , target ] ) index(in, find) length( [ string ] ) match(string, regexp [ , array ] ) patsplit(string, array [ , fieldpat [ , seps ] ] ) # split(string, array [ , fieldsep [ , seps ] ] ) sprintf(format, expression1, ...) strtonum(str) # sub(regexp, replacement [ , target ] ) substr(string, start [ , length ] ) tolower(string) toupper(string) 2.4.3 \u8f93\u5165\u8f93\u51fa\u51fd\u6570 \u00b6 close(filename [ , how ] ) fflush( [ filename ] ) system(command) 2.4.4 \u65f6\u95f4\u51fd\u6570 \u00b6 mktime(datespec) strftime( [ format [ , timestamp [ , utc-flag ] ] ] ) systime() 2.4.5 Bit\u64cd\u4f5c\u51fd\u6570 \u00b6 and(v1, v2 [, ...]) compl(val) lshift(val, count) or(v1, v2 [, ...]) rshift(val, count) xor(v1, v2 [, ...]) 2.4.6 \u5176\u4ed6 \u00b6 isarray(x) bindtextdomain(directory [ , domain ] ) dcgettext(string [ , domain [ , category ] ] ) dcngettext(string1, string2, number [ , domain [ , category ] ] ) 3. \u793a\u4f8b \u00b6 \u793a\u4f8b\u90e8\u5206\u4ecb\u7ecd awk \u5728\u65e5\u5e38\u4e2d\uff0c\u7279\u522b\u662f\u5904\u7406 ngs \u6570\u636e\u65f6\u7684\u4e00\u4e9b\u4f8b\u5b50\u3002 3.1 \u5bf9\u5217\u7684\u64cd\u4f5c \u00b6 \u8c03\u6574\u5217\u987a\u5e8f \uff1a\u5728\u6709GUI\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u4e00\u822c\u91c7\u7528\u7c7b\u4f3c excel, calc \u4e4b\u7c7b\u7684\u8f6f\u4ef6\u5bfc\u5165\u6570\u636e\u6587\u4ef6\uff0c\u7136\u540e\u526a\u5207\u5404\u5217\u8c03\u6574\u987a\u5e8f\u3002\u5982\u679c\u7528 awk \u6765\u89e3\u51b3\u4e5f\u5f88\u65b9\u4fbf\uff0c\u4f60\u53ea\u9700\u8981\u8003\u8651\u597d\u8c03\u6574\u7684\u5404\u5217\u987a\u5e8f\u5373\u53ef\uff0caction \u91cc\u7684{ print ...}\u987a\u5e8f\u5c31\u662f\u91cd\u65b0\u8c03\u6574\u540e\u7684\u5404\u5217\u987a\u5e8f\uff1a $ awk '{ print $3, $5, $7, $2, $1, $4, $6 }' infile.txt > outfile.txt \u63d2\u5165\u5217 \uff1a\u6709\u65f6\u5019\u8981\u63d2\u5165\u4e00\u5217\u6570\u636e\uff0c\u7528awk\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\uff1a $ awk '{ print $1, $2 \"gene expression\", $3}' infile.txt > outfile.txt 3.2 \u5bf9\u884c\u7684\u64cd\u4f5c \u00b6 # \u6709\u65f6\u5019\u6570\u636e\u91cc\u542b\u6709\u91cd\u590d\u7684\u884c\uff0c\u800c\u5f53\u4f60\u53ea\u9700\u8981\u552f\u4e00\u6027\u6570\u636e\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528\u8fd9\u884c\u7a0b\u5e8f\uff0c\u53ea\u4fdd\u7559\u5177\u6709\u552f\u4e00\u6027\u7684\u6570\u636e\u884c\u3002 $ awk '!x[$0]++' infile.txt > outfile.txt # \u4e0d\u663e\u793a\u91cd\u590d\u7684\u884c $ awk '_[$0]++' infile.txt # \u5f53\u5b57\u6bb51\u91cd\u590d\u65f6\uff0c\u6253\u5370\u6574\u884c $ awk '_[$0]++{print $2}' infile.txt 3.3 \u683c\u5f0f\u5316\u8f93\u51fa \u00b6 # \u683c\u5f0f\u5316\u8f93\u51fa/etc/password\u5185\u5bb9\uff0c\u8f93\u51fa\u7b2c1\u884c\u523020\u884c\u5185\u5bb9 $ awk -F: 'BEGIN{printf \"%-8s %-3s\", \"User\", \"UID\"}NR==1,NR==20{printf \"%-8s %-3d\", $1, $3}' /etc/passwd 3.4 \u5408\u5e76\u6587\u4ef6 \u00b6 # \u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u5305\u542b\u5e8f\u5217ATCCGGA\u7684fasta\u6587\u4ef6\uff0c\u5e76\u8f93\u51fa\u6587\u4ef6\u540d\u548c\u884c\u53f7\u4ee5\u53ca\u5e8f\u5217 $ find . -type f -name \"*.fasta\" -exec awk '/ATCCCGGA/ {print FILENAME, NR, $0}' {} \\+ bioawk \u00b6 bioawk \u662f Heng Li \u5f00\u53d1\u7684 awk \u6269\u5c55\u5de5\u5177\uff0c\u589e\u52a0\u4e86\u5bf9\u538b\u7f29\u7684 BED, GFF, SAM, VCF, FASTA/Q \u7b49\u6587\u4ef6\u683c\u5f0f\u7684\u652f\u6301\uff0c\u5e76\u5185\u5efa\u4e00\u4e9b\u51fd\u6570\uff0c\u9002\u7528\u4e8eNGS\u6570\u636e\u7684\u5feb\u901f\u8f93\u5165\u8f93\u51fa\u3002\u56e0\u4e3a\u5176\u662f awk \u7684\u529f\u80fd\u6269\u5c55\uff0c\u6240\u4ee5\u65e2\u53ef\u4ee5\u72ec\u7acb\u4ee5 bioawk \u547d\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u5c06\u5176 link \u5230 awk/gawk \uff0c\u76f4\u63a5\u4ee3\u66ff awk\u3002 \u5185\u5efa\u51fd\u6570 bioawk \u5185\u5efa\u4e86\u4e00\u4e9b awk \u6ca1\u6709\u7684\u4e13\u7528\u4e8e\u751f\u7269\u5e8f\u5217\u7684\u51fd\u6570\uff1a gc($seq) \u83b7\u5f97\u5e8f\u5217\u7684GC\u542b\u91cf meanqual($seq) \u83b7\u5f97\u5e8f\u5217\u7684\u5e73\u5747Q\u503c reverse($seq) \u5c06\u5e8f\u52175'<->3'\u53cd\u5411 revcomp($seq) \u5c06\u5e8f\u5217\u53cd\u5411\u4e92\u8865 qualcount($qual, threshold) \u83b7\u5f97\u5927\u4e8e\u9608\u503c\u7684\u5e8f\u5217\u4e2d\u78b1\u57fa\u6570 trimq(qual, begin, end, param) Trims the quality string qual in the Sanger scale using Richard Mott's algorithm (used in Phred). The 0-based beginning and ending positions are written back to beg and end, respectively. The last argument param is the single parameter used in the algorithm, which is optional and defaults 0.05. and(x, y) bit AND operation (& in C) or(x, y) bit OR operation (| in C) xor(x, y) bit XOR operation (^ in C) \u5185\u5efa\u53d8\u91cf bed: 1:chrom 2:start 3:end 4:name 5:score 6:strand 7:thickstart 8:thickend 9:rgb 10:blockcount 11:blocksizes 12:blockstarts sam: 1:qname 2:flag 3:rname 4:pos 5:mapq 6:cigar 7:rnext 8:pnext 9:tlen 10:seq 11:qual vcf: 1:chrom 2:pos 3:id 4:ref 5:alt 6:qual 7:filter 8:info gff: 1:seqname 2:source 3:feature 4:start 5:end 6:score 7:filter 8:strand 9:group 10:attribute fastx: 1:name 2:seq 3:qual 1. \u5b89\u88c5 \u00b6 \u5728 Linux \u4e2d\u5b89\u88c5 bioawk # Ubuntu \u4e2d\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 $ sudo apt-get install bison $ git clone https://github.com/lh3/bioawk $ cd bioawk && make $ sudo cp bioawk /usr/local/sbin # Archlinux aur \u5b89\u88c5\u5305\u5b89\u88c5 $ git clone https://aur.archlinux.org/bioawk.git $ cd bioawk $ makepkg -si # conda \u5b89\u88c5 ( base ) $ conda install bioawk \u67e5\u770b\u8bf4\u660e\u6587\u6863 $ cd bioawk $ man ./awk.1 2. \u4f7f\u7528\u793a\u4f8b \u00b6 \u4f7f\u7528\u793a\u4f8b\u90e8\u5206\u4f7f\u7528 NCBI SRA \u6570\u636e\u5e93\u7684 illumina \u6d4b\u5e8f\u6570\u636e SRR1175124 \u4e3a\u4f8b fastq: SRR1175124 bed: vcf: \u5904\u7406 fastq \u00b6 \u8ba1\u7b97reads\u6570\u91cf \u6784\u5efa\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u7684 workflow \u65f6\uff0c\u5f53 fastq \u6570\u636e\u7b5b\u9009\u540e\uff0c\u5982\u679c\u8981\u67e5\u770b\u5269\u4e0b\u591a\u5c11 reads\uff0c\u53ef\u4ee5\u7528 bioawk \u8fdb\u884c\u5feb\u901f\u7edf\u8ba1\u3002 # \u53bb\u9664\u4f4e\u8d28\u91cfreads\u540e\uff0c\u5feb\u901f\u7edf\u8ba1fastq\u91cc\u7684reads\u6570\u91cf $ bioawk -c fastx 'END { print NR }' SRR1175124_1.fastq.gz 102354 $ echo ` zcat SRR1175124_1.fastq.gz | wc -l ` / 4 | bc 102354 # \u7edf\u8ba1\u4ee5GATTAC\u5f00\u5934\u7684reads\u7684\u6570\u91cf $ bioawk -c fastx '$seq ~ /^GATTAC/ {++n} END { print n }' SRR1175124_1.fastq.gz # \u7528 grep \u5b9e\u73b0 $ zcat SRR1175124_1.fastq.gz | grep '^GATTAC' | wc -l # \u67e5\u770bGC\u542b\u91cf\u5927\u4e8e60%\u7684reads\u7684\u8d28\u91cf\u60c5\u51b5 $ bioawk -c fastx '{if (gc($seq)>0.6) printf \"%s\\n%s\\n\\n\", $seq, $qual}' \\ > SRR1175124_1.fastq.gz # \u751f\u6210reads\u7684\u5e73\u5747Q\u503c $ bioawk -c fastx '{print $name, meanqual($seq)}' \\ > SRR1175124_1.fastq.gz > meanqual.txt # \u5c06\u524d5\u6761reads\u5e8f\u5217\u76845'->3'\u53d8\u4e3a3'->5' $ bioawk -c fastx '{if(NR<6) print reverse($seq)}' SRR1175124_1.fastq.gz # \u8f93\u51fa\u524d5\u6761reads\u5e8f\u5217\u7684\u53cd\u4e49\u4e92\u8865\u5e8f\u5217 $ bioawk -c fastx '{if(NR<6) print revcomp($seq)}' SRR1175124_1.fastq.gz # \u8f93\u51fa\u7b2c100\u6761reads\u7684\u4fe1\u606f $ bioawk -c fastx 'NR==100{print \">\"$name, gc($seq)}' SRR1175124_1.fastq.gz # \u7edf\u8ba1SRR1175124_1.fastq.gz\u4e2dreads\u78b1\u57faQ\u503c\u9ad8\u4e8e35\u7684\u4e2a\u4eba\u5c0f\u4e8e50\u7684reads\u6570 $ bioawk -c fastx '{if(qualcount($qual, 35)<50) print $name,$seq}' \\ > SRR1175124_1.fastq.gz | wc -l # \u53cc\u672b\u7aef\u6d4b\u5e8f\u7684\u78b1\u57faQ\u503c\u9ad8\u4e8e35\u7684\u4e2a\u6570\u5c0f\u4e8e50\u7684reads $ bioawk -c fastx '{if(qualcount($qual, 35)<50) print $name}' \\ > SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz | sort | uniq -c | \\ > awk '$1==2{print}' # \u8f93\u51fa\u53cc\u672b\u7aef\u6d4b\u5e8f\u7684\u78b1\u57faQ\u503c\u9ad8\u4e8e35\u7684\u4e2a\u6570\u5c0f\u4e8e50\u7684reads\u4e2d\u4ee55\u2019-ATG\u7684reads $ for i in $( bioawk -c fastx '{if(qualcount($qual, 35)<50) print $name}' \\ > SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz | sort | uniq -c | \\ > awk '$1==2{print $2}' ) ; do bioawk -c fastx -v i = \" $i \" \\ > '{if($name==i && $seq ~ /^ATG/) print $name\"\\n\"$seq\"\\n\"$qual\"\\n\"}' \\ > SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz ; done $ bioawk -c bed '{ print $end - $start }' .bed \u5904\u7406 bam \u00b6 \u5904\u7406 vcf \u00b6 \u5904\u7406 bed \u00b6 \u5904\u7406 gff \u00b6","title":"04. awk \u5217\u5904\u7406\u5de5\u5177"},{"location":"tutorial/Linux/04_awk/#awk-ngs","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb awk \u5de5\u5177\u5e38\u7528\u6765\u5bf9\u6587\u672c\u6587\u4ef6\u7684\u5185\u5bb9\u6309\u884c\u8fdb\u884c\u5339\u914d\u641c\u7d22\uff0c\u5e76\u5bf9\u641c\u7d22\u6761\u4ef6\u5339\u914d\u7684\u5185\u5bb9\u8fdb\u884c\u64cd\u4f5c\u3002\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5e26\u6765\u5927\u91cf\u7684\u6570\u636e\uff0c\u4ee5\u53ca\u521d\u7ea7\u5206\u6790\u751f\u6210\u7684\u5404\u79cd\u6309\u5217\u7684\u6570\u636e\u7ed3\u679c\uff0cawk \u5c31\u53ef\u4ee5\u5927\u663e\u8eab\u624b\u4e3a\u6d4b\u5e8f\u6570\u636e\u7684\u8f6c\u6362\u4e0e\u5206\u6790\u63d0\u4f9b\u65b9\u4fbf\u7684\u64cd\u4f5c\u3002 \u6211\u4eec\u9996\u5148\u6765\u770b\u4e00\u4e2a\u6700\u7b80\u5355\u7684 awk \u547d\u4ee4\u7a0b\u5e8f\uff1a # \u5e8f\u5217\u6587\u4ef6contigs.fasta\u6587\u4ef6\u5305\u542b2\u6761DNA\u5e8f\u5217\uff0c\u5206\u522b\u662fseq1\u548cseq2\u3002 $ cat contigs.fasta >seq1 ATGGGGTCCGATTACCG >seq2 CGGNTTACCGYGACAGT # \u63d0\u53d62\u6761\u5e8f\u5217\u7684id $ awk '/>/' contigs.fasta >seq1 >seq2 # \u63d0\u53d6ATG\u5f00\u59cb\u7684\u5e8f\u5217 $ awk '/^ATG/' contigs.fasta ATGGGGTCCGATTACCG Note awk \u7528\u6a21\u5f0f\u5339\u914d\u65f6\uff0c\u4e0e grep \u7c7b\u4f3c\u3002\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06 fasta \u6587\u4ef6\u4e2d\u5305\u542b '>' \u5b57\u7b26\u7684\u884c\u8f93\u51fa\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6240\u6709\u7684\u5e8f\u5217\u5934\u5185\u5bb9\u8f93\u51fa\u3002\u4f5c\u7528\u7c7b\u4f3c grep \">\" \u3002 \u5229\u7528 awk \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8c03\u6574\u6216\u8f93\u51fa\u5217\uff1a # \u4f8b\u5982\u8fd9\u6837\u6570\u636e\u6587\u4ef6input_data $ cat input_data gene1 100 -300 description gene2 1000 -1500 description ... # \u5f53\u7b2c\u4e00\u5217\u5305\u542bgene1\u5b57\u7b26\u65f6\uff0c\u6253\u5370\u7b2c\u4e8c\u5217\u4fe1\u606f\u57fa\u56e0\u5728\u57fa\u56e0\u7ec4\u4e0a\u7684\u4f4d\u7f6e $ awk '$1 ~/gene1/ {print $2}' input_data 100 -300 # \u7528 grep \u548c sed \u5b9e\u73b0\u7c7b\u4f3c\u6548\u679c $ cat input_data | grep gene1 | sed { $1 } # \u4e5f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8c03\u6574\u5217\u7684\u987a\u5e8f $ awk '{print $3\"\\t\"$1\"\\t\"$2}' input_data description gene1 100 -300 description gene2 1000 -1500 ...","title":"\u7528 awk \u5904\u7406 NGS \u6570\u636e"},{"location":"tutorial/Linux/04_awk/#1-awk","text":"awk \u7a0b\u5e8f\u4e3b\u4f53\u4e3b\u8981\u5305\u62ec pattern\uff0caction\u548cinput file\uff1a pattern \u8868\u793a\u6240\u8981\u641c\u7d22\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 { action } \u5219\u8868\u793a\u641c\u7d22\u5339\u914d\u540e\u8981\u505a\u7684\u64cd\u4f5c\u3002 input file\uff1a\u6240\u8981\u641c\u7d22\u7684\u8f93\u5165\u5185\u5bb9\uff0c\u6bd4\u5982\u524d\u9762\u4f8b\u5b50\u7684 contigs.fasta \u77e5\u8bc6\u70b9 awk\u53ef\u4ee5\u5728shell\u91cc\u76f4\u63a5\u8fd0\u884c\uff1a $ awk 'pattern { action }' input_file \u4e5f\u53ef\u4ee5\u5199\u6210awk\u7a0b\u5e8f\u6765\u8fd0\u884c\u3002\u4e00\u4e2a awk \u7a0b\u5e8f\u5f80\u5f80\u5982\u4e0b\u6240\u793a\uff1a #!/usr/bin/awk -f pattern { action } awk \u53ef\u4ee5\u4e0d\u9700\u8981\u8f93\u5165\u6587\u4ef6\uff1b\u5bf9\u4e8epattern\u548caction\u6765\u8bf4\uff0c2\u8005\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u624d\u80fd\u8fd0\u884c\u3002\u5982\u679c\u6ca1\u6709pattern\uff0c\u5219\u9ed8\u8ba4\u5339\u914d\u4efb\u4f55\u8f93\u5165\uff0c\u6309\u884c\u8f93\u51fa\u5e76\u6267\u884caction\u3002\u5982\u679c\u6ca1\u6709action\uff0c\u5219\u5339\u914dpattern\u5e76\u6309\u884c\u8f93\u51fa\u4e0d\u505a\u989d\u5916\u64cd\u4f5c\u3002 # \u5c1d\u8bd5\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5728\u7ec8\u7aef\u6253\u5370`hello world`\u3002 $ awk 'BEGIN { print \"hello world\" }' # \u8fd9\u91ccBEGIN\u662fpattern\uff0c{ print \"hello world\" } \u662faction # \u6a21\u62dfcat\u8f93\u51fa\u7ec8\u7aef\u8f93\u5165\u7684\u5b57\u7b26\u3002 $ awk '{ print }' # \u8fd9\u91cc\u7701\u7565\u4e86pattern\uff0c\u53ea\u6709{print}\u505a\u4e3aaction \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u53ef\u4ee5\u4fdd\u5b58\u6210\u6587\u4ef6\uff08\u5982 hello_world.awk \uff09\u6765\u8fd0\u884c\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a #!/usr/bin/awk -f # \u6ce8\u610f\u4e0d\u540c\u53d1\u884c\u7248\u7684linux\uff0cawk\u8def\u5f84\u6709\u6240\u533a\u522b BEGIN { print \"hello world\" } \u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff1a $ chmod +x hello_world.awk $ ./hello_world.awk","title":"1. awk \u547d\u4ee4\u6784\u6210"},{"location":"tutorial/Linux/04_awk/#2-awk","text":"","title":"2. awk \u57fa\u672c\u8bed\u6cd5"},{"location":"tutorial/Linux/04_awk/#21-pattern","text":"","title":"2.1 Pattern"},{"location":"tutorial/Linux/04_awk/#211","text":"pattern \u53ef\u4ee5\u91c7\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u5185\u5bb9\u3002\u7528 / regular expression / \u6765\u8868\u793a\u3002 \u51e0\u4e2a\u7279\u6b8a\u7684Patterns\uff1a BEGIN: awk\u5f00\u59cb\u8f93\u5165\u5185\u5bb9\u4e4b\u524d\uff0c\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u521d\u59cb\u53d8\u91cf\u7b49 END: awk\u7ed3\u675f\u8f93\u5165\u5185\u5bb9\u4e4b\u540e\uff0c\u53ef\u4ee5\u7528\u6765\u8f93\u51fa\u7edf\u8ba1\u4fe1\u606f\u7b49 BEGINFILE: awk\u8f93\u5165\u5185\u5bb9\u4e3a\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u7edf\u4e00\u5b9a\u4e49\u591a\u4e2a\u6587\u4ef6\u7684BEGIN\u5757 ENDFILE: awk\u8f93\u5165\u5185\u5bb9\u4e3a\u591a\u4e2a\u6587\u4ef6\u65f6\uff0c\u7edf\u4e00\u5b9a\u4e49\u591a\u4e2a\u6587\u4ef6\u7684END\u5757","title":"2.1.1 \u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"tutorial/Linux/04_awk/#212","text":"# \u5f53\u7b2c\u4e00\u5217\u5185\u5bb9\u662fgene\u65f6\uff0c\u8f93\u51fa\u7b2c\u4e8c\u5217\u5185\u5bb9\u3002\u53ef\u7528\u4e8e\u6ce8\u91ca\u6587\u4ef6 $ awk '$1 == \"gene\" { print $2 }' genes.list","title":"2.1.2 \u8bed\u53e5\u8868\u8fbe"},{"location":"tutorial/Linux/04_awk/#22-action","text":"","title":"2.2 Action"},{"location":"tutorial/Linux/04_awk/#221-ifelse","text":"awk\u7684action\u652f\u6301\u6761\u4ef6\u5224\u65ad\u8bed\u53e5 if else # if \u8bed\u53e5\u7684\u57fa\u672c\u7528\u6cd5 $ awk '{if(condition) print $1}' input # if else block $ awk '{if(condition)print $1;else print $2}' input","title":"2.2.1 if...else"},{"location":"tutorial/Linux/04_awk/#222-while","text":"awk\u7684action\u652f\u6301\u5faa\u73af\u8bed\u53e5\uff0c\u53ef\u4ee5\u7528while\u63a7\u5236\u3002while \u63a7\u5236\u8bed\u53e5\u8981\u6362\u884c\uff0c\u75284\u4e2a\u7a7a\u683c\u5212\u5206\u63a7\u5236\u5757\u3002 # \u5c06\u4f1a\u5c06\u5217\u5185\u5bb9\u5757\u53ea\u8f93\u51fa\u524d3\u5217\u5185\u5bb9\uff0c\u4e14\u6ca1\u4e00\u4e2a\u6570\u636e\u5360\u636e\u4e00\u884c $ awk '{i=1;while(i<=3){print $i;i++}}' input","title":"2.2.2 while"},{"location":"tutorial/Linux/04_awk/#23","text":"","title":"2.3. \u5185\u5efa\u53d8\u91cf"},{"location":"tutorial/Linux/04_awk/#231-awk","text":"FIELDWIDTHS\uff1a\u8bbe\u7f6e\u5206\u5272\u957f\u5ea6\uff0c\u5982FS\u53c2\u6570\u8bbe\u7f6e\u7a7a\u683c\u4e3a\u5206\u5272\u7b26\uff0c\u53ef\u4ee5\u7528FIELDWIDTHS\u8bbe\u7f6e\u7a7a\u683c\u957f\u5ea6\u3002 FS\uff1a\u8bbe\u7f6e\u7684\u5206\u5272\u7b26\uff0c\u9ed8\u8ba4\u662f\u7a7a\u683c\" \" OFMT\uff1a\u9ed8\u8ba4\u683c\u5f0f\u5316\u6570\u5b57\uff0c\u9ed8\u8ba4\u662f%.6g\uff0c OFS\uff1a\u8bbe\u7f6eprint\u8f93\u51fa\u5404\u5b57\u6bb5\u7684\u7b26\u53f7\uff0c\u9ed8\u8ba4\u662f\u7a7a\u683c\" \" ORS\uff1a\u8bbe\u7f6eprint\u8f93\u51fa\u591a\u884c\u7684\u7b26\u53f7\uff0c\u6a21\u5f0f\u662f\\n RS\uff1a\u8bbe\u7f6e\u884c\u7684\u5206\u5272\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u6362\u884c\u7b26\\n","title":"2.3.1 \u63a7\u5236 awk \u7684\u53d8\u91cf"},{"location":"tutorial/Linux/04_awk/#232","text":"ARGC\uff1aawk\u547d\u4ee4\u4f20\u9012\u7684\u53c2\u6570\u4e2a\u6570 ARGV\uff1a\u4ee5\u6570\u7ec4\u5f62\u5f0f\u4fdd\u7559awk\u4f20\u9012\u7684\u6240\u6709\u53c2\u6570 ENVIRON\uff1a\u7528\u6765\u5728awk\u4e2d\u8c03\u7528\u73af\u5883\u53d8\u91cf FILENAME\uff1a\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\u7684\u540d\u79f0 FNR\uff1a\u5f53\u524d\u6587\u4ef6awk\u8fd0\u884c\u7684\u884c\u53f7 NF\uff1a\u8868\u793a\u5f53\u524d\u884c\u4e2d\u6709\u591a\u5c11\u4e2a\u5b57\u6bb5 NR\uff1a\u8868\u793a\u5f53\u524d\u5904\u7406\u4e86\u591a\u5c11\u884c\uff0c\u5f53\u591a\u4e2a\u6587\u4ef6\u5904\u7406\u65f6\uff0c\u8be5\u503c\u662fFNR\u53e0\u52a0\u7684 RLENGTH\uff1a\u8868\u793a\u5339\u914d\u6a21\u5f0f\u547d\u4e2d\u7684\u5339\u914d\u957f\u5ea6","title":"2.3.2 \u4f20\u9012\u4fe1\u606f\u7684\u53d8\u91cf"},{"location":"tutorial/Linux/04_awk/#24","text":"","title":"2.4. \u5185\u5efa\u51fd\u6570"},{"location":"tutorial/Linux/04_awk/#241","text":"\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528awk\u7684\u51fd\u6570\u8fdb\u884c\u8ba1\u7b97 atan2(y, x) cos(x) exp(x) int(x) log(x) rand() sin(x) sqrt(x) srand([ x ])","title":"2.4.1 \u6570\u5b66\u51fd\u6570"},{"location":"tutorial/Linux/04_awk/#242","text":"asort(source [ , dest [ , how ] ] ) # asorti(source [ , dest [ , how ] ] ) # gensub(regexp, replacement, how [ , target ] ) # gsub(regexp, replacement [ , target ] ) index(in, find) length( [ string ] ) match(string, regexp [ , array ] ) patsplit(string, array [ , fieldpat [ , seps ] ] ) # split(string, array [ , fieldsep [ , seps ] ] ) sprintf(format, expression1, ...) strtonum(str) # sub(regexp, replacement [ , target ] ) substr(string, start [ , length ] ) tolower(string) toupper(string)","title":"2.4.2 \u5b57\u7b26\u4e32\u51fd\u6570"},{"location":"tutorial/Linux/04_awk/#243","text":"close(filename [ , how ] ) fflush( [ filename ] ) system(command)","title":"2.4.3 \u8f93\u5165\u8f93\u51fa\u51fd\u6570"},{"location":"tutorial/Linux/04_awk/#244","text":"mktime(datespec) strftime( [ format [ , timestamp [ , utc-flag ] ] ] ) systime()","title":"2.4.4 \u65f6\u95f4\u51fd\u6570"},{"location":"tutorial/Linux/04_awk/#245-bit","text":"and(v1, v2 [, ...]) compl(val) lshift(val, count) or(v1, v2 [, ...]) rshift(val, count) xor(v1, v2 [, ...])","title":"2.4.5 Bit\u64cd\u4f5c\u51fd\u6570"},{"location":"tutorial/Linux/04_awk/#246","text":"isarray(x) bindtextdomain(directory [ , domain ] ) dcgettext(string [ , domain [ , category ] ] ) dcngettext(string1, string2, number [ , domain [ , category ] ] )","title":"2.4.6 \u5176\u4ed6"},{"location":"tutorial/Linux/04_awk/#3","text":"\u793a\u4f8b\u90e8\u5206\u4ecb\u7ecd awk \u5728\u65e5\u5e38\u4e2d\uff0c\u7279\u522b\u662f\u5904\u7406 ngs \u6570\u636e\u65f6\u7684\u4e00\u4e9b\u4f8b\u5b50\u3002","title":"3. \u793a\u4f8b"},{"location":"tutorial/Linux/04_awk/#31","text":"\u8c03\u6574\u5217\u987a\u5e8f \uff1a\u5728\u6709GUI\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u4e00\u822c\u91c7\u7528\u7c7b\u4f3c excel, calc \u4e4b\u7c7b\u7684\u8f6f\u4ef6\u5bfc\u5165\u6570\u636e\u6587\u4ef6\uff0c\u7136\u540e\u526a\u5207\u5404\u5217\u8c03\u6574\u987a\u5e8f\u3002\u5982\u679c\u7528 awk \u6765\u89e3\u51b3\u4e5f\u5f88\u65b9\u4fbf\uff0c\u4f60\u53ea\u9700\u8981\u8003\u8651\u597d\u8c03\u6574\u7684\u5404\u5217\u987a\u5e8f\u5373\u53ef\uff0caction \u91cc\u7684{ print ...}\u987a\u5e8f\u5c31\u662f\u91cd\u65b0\u8c03\u6574\u540e\u7684\u5404\u5217\u987a\u5e8f\uff1a $ awk '{ print $3, $5, $7, $2, $1, $4, $6 }' infile.txt > outfile.txt \u63d2\u5165\u5217 \uff1a\u6709\u65f6\u5019\u8981\u63d2\u5165\u4e00\u5217\u6570\u636e\uff0c\u7528awk\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\uff1a $ awk '{ print $1, $2 \"gene expression\", $3}' infile.txt > outfile.txt","title":"3.1 \u5bf9\u5217\u7684\u64cd\u4f5c"},{"location":"tutorial/Linux/04_awk/#32","text":"# \u6709\u65f6\u5019\u6570\u636e\u91cc\u542b\u6709\u91cd\u590d\u7684\u884c\uff0c\u800c\u5f53\u4f60\u53ea\u9700\u8981\u552f\u4e00\u6027\u6570\u636e\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528\u8fd9\u884c\u7a0b\u5e8f\uff0c\u53ea\u4fdd\u7559\u5177\u6709\u552f\u4e00\u6027\u7684\u6570\u636e\u884c\u3002 $ awk '!x[$0]++' infile.txt > outfile.txt # \u4e0d\u663e\u793a\u91cd\u590d\u7684\u884c $ awk '_[$0]++' infile.txt # \u5f53\u5b57\u6bb51\u91cd\u590d\u65f6\uff0c\u6253\u5370\u6574\u884c $ awk '_[$0]++{print $2}' infile.txt","title":"3.2 \u5bf9\u884c\u7684\u64cd\u4f5c"},{"location":"tutorial/Linux/04_awk/#33","text":"# \u683c\u5f0f\u5316\u8f93\u51fa/etc/password\u5185\u5bb9\uff0c\u8f93\u51fa\u7b2c1\u884c\u523020\u884c\u5185\u5bb9 $ awk -F: 'BEGIN{printf \"%-8s %-3s\", \"User\", \"UID\"}NR==1,NR==20{printf \"%-8s %-3d\", $1, $3}' /etc/passwd","title":"3.3 \u683c\u5f0f\u5316\u8f93\u51fa"},{"location":"tutorial/Linux/04_awk/#34","text":"# \u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u5305\u542b\u5e8f\u5217ATCCGGA\u7684fasta\u6587\u4ef6\uff0c\u5e76\u8f93\u51fa\u6587\u4ef6\u540d\u548c\u884c\u53f7\u4ee5\u53ca\u5e8f\u5217 $ find . -type f -name \"*.fasta\" -exec awk '/ATCCCGGA/ {print FILENAME, NR, $0}' {} \\+","title":"3.4 \u5408\u5e76\u6587\u4ef6"},{"location":"tutorial/Linux/04_awk/#bioawk","text":"bioawk \u662f Heng Li \u5f00\u53d1\u7684 awk \u6269\u5c55\u5de5\u5177\uff0c\u589e\u52a0\u4e86\u5bf9\u538b\u7f29\u7684 BED, GFF, SAM, VCF, FASTA/Q \u7b49\u6587\u4ef6\u683c\u5f0f\u7684\u652f\u6301\uff0c\u5e76\u5185\u5efa\u4e00\u4e9b\u51fd\u6570\uff0c\u9002\u7528\u4e8eNGS\u6570\u636e\u7684\u5feb\u901f\u8f93\u5165\u8f93\u51fa\u3002\u56e0\u4e3a\u5176\u662f awk \u7684\u529f\u80fd\u6269\u5c55\uff0c\u6240\u4ee5\u65e2\u53ef\u4ee5\u72ec\u7acb\u4ee5 bioawk \u547d\u4ee4\uff0c\u4e5f\u53ef\u4ee5\u5c06\u5176 link \u5230 awk/gawk \uff0c\u76f4\u63a5\u4ee3\u66ff awk\u3002 \u5185\u5efa\u51fd\u6570 bioawk \u5185\u5efa\u4e86\u4e00\u4e9b awk \u6ca1\u6709\u7684\u4e13\u7528\u4e8e\u751f\u7269\u5e8f\u5217\u7684\u51fd\u6570\uff1a gc($seq) \u83b7\u5f97\u5e8f\u5217\u7684GC\u542b\u91cf meanqual($seq) \u83b7\u5f97\u5e8f\u5217\u7684\u5e73\u5747Q\u503c reverse($seq) \u5c06\u5e8f\u52175'<->3'\u53cd\u5411 revcomp($seq) \u5c06\u5e8f\u5217\u53cd\u5411\u4e92\u8865 qualcount($qual, threshold) \u83b7\u5f97\u5927\u4e8e\u9608\u503c\u7684\u5e8f\u5217\u4e2d\u78b1\u57fa\u6570 trimq(qual, begin, end, param) Trims the quality string qual in the Sanger scale using Richard Mott's algorithm (used in Phred). The 0-based beginning and ending positions are written back to beg and end, respectively. The last argument param is the single parameter used in the algorithm, which is optional and defaults 0.05. and(x, y) bit AND operation (& in C) or(x, y) bit OR operation (| in C) xor(x, y) bit XOR operation (^ in C) \u5185\u5efa\u53d8\u91cf bed: 1:chrom 2:start 3:end 4:name 5:score 6:strand 7:thickstart 8:thickend 9:rgb 10:blockcount 11:blocksizes 12:blockstarts sam: 1:qname 2:flag 3:rname 4:pos 5:mapq 6:cigar 7:rnext 8:pnext 9:tlen 10:seq 11:qual vcf: 1:chrom 2:pos 3:id 4:ref 5:alt 6:qual 7:filter 8:info gff: 1:seqname 2:source 3:feature 4:start 5:end 6:score 7:filter 8:strand 9:group 10:attribute fastx: 1:name 2:seq 3:qual","title":"bioawk"},{"location":"tutorial/Linux/04_awk/#1","text":"\u5728 Linux \u4e2d\u5b89\u88c5 bioawk # Ubuntu \u4e2d\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 $ sudo apt-get install bison $ git clone https://github.com/lh3/bioawk $ cd bioawk && make $ sudo cp bioawk /usr/local/sbin # Archlinux aur \u5b89\u88c5\u5305\u5b89\u88c5 $ git clone https://aur.archlinux.org/bioawk.git $ cd bioawk $ makepkg -si # conda \u5b89\u88c5 ( base ) $ conda install bioawk \u67e5\u770b\u8bf4\u660e\u6587\u6863 $ cd bioawk $ man ./awk.1","title":"1. \u5b89\u88c5"},{"location":"tutorial/Linux/04_awk/#2","text":"\u4f7f\u7528\u793a\u4f8b\u90e8\u5206\u4f7f\u7528 NCBI SRA \u6570\u636e\u5e93\u7684 illumina \u6d4b\u5e8f\u6570\u636e SRR1175124 \u4e3a\u4f8b fastq: SRR1175124 bed: vcf:","title":"2. \u4f7f\u7528\u793a\u4f8b"},{"location":"tutorial/Linux/04_awk/#fastq","text":"\u8ba1\u7b97reads\u6570\u91cf \u6784\u5efa\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u7684 workflow \u65f6\uff0c\u5f53 fastq \u6570\u636e\u7b5b\u9009\u540e\uff0c\u5982\u679c\u8981\u67e5\u770b\u5269\u4e0b\u591a\u5c11 reads\uff0c\u53ef\u4ee5\u7528 bioawk \u8fdb\u884c\u5feb\u901f\u7edf\u8ba1\u3002 # \u53bb\u9664\u4f4e\u8d28\u91cfreads\u540e\uff0c\u5feb\u901f\u7edf\u8ba1fastq\u91cc\u7684reads\u6570\u91cf $ bioawk -c fastx 'END { print NR }' SRR1175124_1.fastq.gz 102354 $ echo ` zcat SRR1175124_1.fastq.gz | wc -l ` / 4 | bc 102354 # \u7edf\u8ba1\u4ee5GATTAC\u5f00\u5934\u7684reads\u7684\u6570\u91cf $ bioawk -c fastx '$seq ~ /^GATTAC/ {++n} END { print n }' SRR1175124_1.fastq.gz # \u7528 grep \u5b9e\u73b0 $ zcat SRR1175124_1.fastq.gz | grep '^GATTAC' | wc -l # \u67e5\u770bGC\u542b\u91cf\u5927\u4e8e60%\u7684reads\u7684\u8d28\u91cf\u60c5\u51b5 $ bioawk -c fastx '{if (gc($seq)>0.6) printf \"%s\\n%s\\n\\n\", $seq, $qual}' \\ > SRR1175124_1.fastq.gz # \u751f\u6210reads\u7684\u5e73\u5747Q\u503c $ bioawk -c fastx '{print $name, meanqual($seq)}' \\ > SRR1175124_1.fastq.gz > meanqual.txt # \u5c06\u524d5\u6761reads\u5e8f\u5217\u76845'->3'\u53d8\u4e3a3'->5' $ bioawk -c fastx '{if(NR<6) print reverse($seq)}' SRR1175124_1.fastq.gz # \u8f93\u51fa\u524d5\u6761reads\u5e8f\u5217\u7684\u53cd\u4e49\u4e92\u8865\u5e8f\u5217 $ bioawk -c fastx '{if(NR<6) print revcomp($seq)}' SRR1175124_1.fastq.gz # \u8f93\u51fa\u7b2c100\u6761reads\u7684\u4fe1\u606f $ bioawk -c fastx 'NR==100{print \">\"$name, gc($seq)}' SRR1175124_1.fastq.gz # \u7edf\u8ba1SRR1175124_1.fastq.gz\u4e2dreads\u78b1\u57faQ\u503c\u9ad8\u4e8e35\u7684\u4e2a\u4eba\u5c0f\u4e8e50\u7684reads\u6570 $ bioawk -c fastx '{if(qualcount($qual, 35)<50) print $name,$seq}' \\ > SRR1175124_1.fastq.gz | wc -l # \u53cc\u672b\u7aef\u6d4b\u5e8f\u7684\u78b1\u57faQ\u503c\u9ad8\u4e8e35\u7684\u4e2a\u6570\u5c0f\u4e8e50\u7684reads $ bioawk -c fastx '{if(qualcount($qual, 35)<50) print $name}' \\ > SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz | sort | uniq -c | \\ > awk '$1==2{print}' # \u8f93\u51fa\u53cc\u672b\u7aef\u6d4b\u5e8f\u7684\u78b1\u57faQ\u503c\u9ad8\u4e8e35\u7684\u4e2a\u6570\u5c0f\u4e8e50\u7684reads\u4e2d\u4ee55\u2019-ATG\u7684reads $ for i in $( bioawk -c fastx '{if(qualcount($qual, 35)<50) print $name}' \\ > SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz | sort | uniq -c | \\ > awk '$1==2{print $2}' ) ; do bioawk -c fastx -v i = \" $i \" \\ > '{if($name==i && $seq ~ /^ATG/) print $name\"\\n\"$seq\"\\n\"$qual\"\\n\"}' \\ > SRR1175124_1.fastq.gz SRR1175124_2.fastq.gz ; done $ bioawk -c bed '{ print $end - $start }' .bed","title":"\u5904\u7406 fastq"},{"location":"tutorial/Linux/04_awk/#bam","text":"","title":"\u5904\u7406 bam"},{"location":"tutorial/Linux/04_awk/#vcf","text":"","title":"\u5904\u7406 vcf"},{"location":"tutorial/Linux/04_awk/#bed","text":"","title":"\u5904\u7406 bed"},{"location":"tutorial/Linux/04_awk/#gff","text":"","title":"\u5904\u7406 gff"},{"location":"tutorial/Linux/05_sed/","text":"sed \u7528\u6cd5 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb sed \u5168\u79f0 Stream Editor\uff0c\u5373\u6d41\u7f16\u8f91\u5668\u3002\u60f3\u5bf9\u4e8e awk \u5904\u7406\u6bcf\u4e00\u884c\u4e2d\u5404\u4e2a\u5b57\u6bb5\u7684\u5217\u7279\u70b9\uff0csed \u5e38\u7528\u4e8e\u4ee5\u884c\u4e3a\u5355\u4f4d\u7684\u7f16\u8f91\u64cd\u4f5c\uff0c\u6bd4\u5982\u5b57\u7b26\u66ff\u6362\u7b49\u3002 1. sed \u547d\u4ee4\u57fa\u672c\u903b\u8f91 \u00b6 sed [\u9009\u9879] ... {\u811a\u672c} [\u8f93\u5165] ... 1.1 \u8f93\u5165 \u00b6 sed \u7f16\u8f91\u5185\u5bb9\u53ef\u4ee5\u662f\u6807\u51c6\u8f93\u5165STDIN\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u4ef6\u3002sed \u8bfb\u53d6\u5185\u5bb9\u7684\u4e00\u884c\uff0c\u653e\u5165 \u6a21\u5f0f\u7a7a\u95f4 \uff0c\u5e76\u5728 \u6a21\u5f0f\u7a7a\u95f4 \u505a\u547d\u4ee4\u5bf9\u5e94\u7684\u64cd\u4f5c\uff0c\u518d\u5c06 \u6a21\u5f0f\u7a7a\u95f4 \u7684\u5185\u5bb9\u6253\u5370\u5230\u5c4f\u5e55\u4e0a 1.2 \u9009\u9879 \u00b6 -n \u9ed8\u8ba4sed\u5904\u7406\u4e00\u884c\u5c31\u4f1a\u5728STDOUT\u7ec8\u7aef\u4e2d\u6253\u5370\u4e00\u884c\u3002\u52a0\u4e0a -n \u53c2\u6570\u5c31\u4e0d\u4f1a\u5728\u8f93\u51fa\u7aef\u6253\u5370\u3002 -i \u5373sed\u7f16\u8f91\u5b8c\u540e\u76f4\u63a5\u50a8\u5b58\u4e3a\u6e90\u6587\u4ef6\uff0c\u4e0e\u91cd\u5b9a\u5411\u7b26\u53f7\u7c7b\u4f3c > \uff08\u4f46\u91cd\u5b9a\u5411\u7b26\u53f7\u4e0d\u80fd\u8986\u76d6\u539f\u6587\u4ef6\uff0c\u53ea\u4f1a\u6e05\u7a7a\uff09\u3002\u4e0d\u8fc7\u51fa\u4e8e\u6570\u636e\u5b89\u5168\u7684\u613f\u610f\uff0c\u5efa\u8bae\u8fd8\u662f\u7528>\u91cd\u5b9a\u5411\u5230\u65b0\u6587\u4ef6\u6216\u8005\u4fdd\u7559\u5907\u4efd\u6587\u4ef6\u6bd4\u8f83\u597d\u3002 # \u5220\u9664file\u7684\u7a7a\u683c\uff0c\u4fdd\u5b58\u6210file.new\u6587\u4ef6 $ sed -i 's/ //g' file > file.new $ ls file # \u539f\u59cb\u6587\u4ef6 file.new # \u65b0\u6587\u4ef6 # \u5220\u9664file\u7684\u7a7a\u683c\uff0c\u539f\u59cb\u6587\u4ef6\u4fdd\u5b58\u6210file.old $ sed -i.old 's/ //g' file $ ls file # \u65b0\u6587\u4ef6 file.old # \u539f\u59cb\u6587\u4ef6 1.3 \u811a\u672c \u00b6 p \u6253\u5370\u884c\u5185\u5bb9 l \u6253\u5370\u884c\u5185\u5bb9\uff0c\u5305\u62ec\u7279\u6b8a\u7b26\u53f7\uff0c\u6bd4\u5982\u6362\u884c\u7b26 # file \u6587\u4ef6\u5185\u5bb9 $ cat file Hello everyone my food is great food is ok Food fooooooooooood # \u6253\u5370\u6587\u4ef6\u7b2c2\u884c $ sed -n '2p' file my food is great # \u6253\u5370\u6587\u4ef6\u7b2c2\u884c\u5230\u7b2c3\u884c $ sed -n '2,3p' file my food is great food is ok # \u4e0d\u6253\u5370\u7b2c\u4e00\u884c $ sed -n '1!p' file my food is great food is ok Food fooooooooooood # \u4e0d\u6253\u5370\u7b2c2-3\u884c $ sed -n '2,3!p' file Hello everyone Food fooooooooooood # \u6253\u5370\u6587\u4ef6\u6700\u540e\u4e00\u884c, $\u7b26\u53f7\u8868\u793a\u6587\u4ef6\u6700\u540e\u4e00\u884c $ sed -n '$p' file fooooooooooood # \u6253\u5370\u5305\u542b\"food\"\u5b57\u7b26\u5f00\u59cb\u7684\u884c $ sed -n '/^food/p' file food is ok # \u4ece\u7b2c2\u884c\u5f00\u59cb\u6253\u5370\uff0c\u76f4\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u7684food\u6253\u5370\u7684\u90a3\u4e00\u884c\u4e3a\u6b62\uff08\u4e0d\u5305\u62ec\u7b2c5\u884c\uff09 # \u5982\u679c\u6ca1\u6709\u5339\u914d\u5219\u4e00\u76f4\u8f93\u51fa\u5230\u6587\u4ef6\u7ed3\u675f $ sed -n '2,/food/p' file my food is great food is ok # \u663e\u793a$\u6362\u884c\u7b26 $ sed -n '1,3l' file Hello everyone$ my food is great$ food is ok$ = \u6253\u5370\u5339\u914d\u7684\u884c\u53f7 # \u6253\u5370\u5305\u542bfo\u7684\u884c\u53f7 $ sed -n '/fo/=' file 2 3 5 a \u8ffd\u52a0\u884c\u6a21\u5f0f # \u5728\u542bfo\u5185\u5bb9\u7684\u884c\u540e\u63d2\u5165\u4e00\u4e2a\u65b0\u884c $ sed '/fo/a\\Insert a new line' file Hello everyone my food is great insert a new line food is ok insert a new line Food fooooooooooood insert a new line # \u5728\u884c\u5c3e\u63d2\u5165\u5185\u5bb9 $ sed '$a\\The end' file Hello everyone my food is great food is ok Food fooooooooooood The end i \u63d2\u5165\u884c\u6a21\u5f0f # \u5728\u542bfo\u5185\u5bb9\u7684\u884c\u524d\u63d2\u5165\u4e00\u4e2a\u65b0\u884c $ sed '/fo/i\\Insert a new line' file Hello everyone insert a new line my food is great insert a new line food is ok Food insert a new line fooooooooooood # \u5728\u7b2c\u4e00\u884c\u524d\u63d2\u5165\u65b0\u884c $ sed '1i\\Title:food' file Title:food Hello everyone my food is great food is ok Food fooooooooooood c \u4fee\u6539\u6a21\u5f0f # \u542bfo\u7684\u884c\u66ff\u6362\u6210\u65b0\u7684\u5185\u5bb9 $ sed '/fo/c\\changed line content' file Hello everyone changed line content changed line content Food changed line content d \u5220\u9664\u884c # \u5220\u9664\u7b2c\u4e00\u884c $ sed '1d' file my food is great food is ok Food fooooooooooood # \u5220\u9664\u7b2c2-4\u884c $ sed '2,4d' file Hello everyone fooooooooooood # \u5220\u9664\u5339\u914d food \u7684\u884c $ sed '/food/d' file Hello everyone Food fooooooooooood s \u66ff\u6362\u5185\u5bb9 s \u53ef\u4ee5\u7b97sed\u4e2d\u6700\u5e38\u7528\u7684\u5de5\u5177\u4e86\uff08\u60f3\u8c61\u4e00\u4e0b\uff0c\u6211\u4eec\u7528word\u5904\u7406\u6587\u672c\uff0c\u662f\u4e0d\u662f\u4e5f\u7ecf\u5e38\u67e5\u627e\u66ff\u6362\uff01\uff09 \u57fa\u672c\u4f8b\u5b50 # \u628apattern1\u66ff\u6362\u4e3apattern2 # \u9996\u5148\u641c\u7d22pattern1\uff0c\u7136\u540e\u5c06\u5176\u66ff\u6362\u4e3apattern2 $ sed s/pattern1/pattern2/flag flag: n \u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u66ff\u6362\u5f53\u524d\u6a21\u5f0f\u7a7a\u95f4 N \u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u8ffd\u52a0\u5728\u6a211\u5f0f\u7a7a\u95f4\u540e q \u5339\u914d\u540e\u63a8\u51fa r \u8bfb\u53d6\u6587\u672c\u6587\u4ef6\uff0c\u5e76\u8ffd\u52a0\u5728\u6a21\u5f0f\u7a7a\u95f4\u540e \u6267\u884c\u591a\u4e2a\u547d\u4ee4 \u65b9\u6cd51: -e \u53c2\u6570\u4e32\u8054 # \u6ce8\u610f''\u548c\"\"\u8f6c\u4e49\u65f6\u4e0d\u540c\uff0c\"\"\u4f1a\u628a$\u8fdb\u884c\u8f6c\u4e49\uff0c\u6240\u4ee5\u6253\u5370\u884c\u5c3e\u8981\u7528\u5355\u5f15\u53f7 $ sed -n -e 1 \"p\" -e \"2p\" -e '$l' file Hello everyone my food is great fooooooooooood$ \u65b9\u6cd52: {;} \u547d\u4ee4\u5728\u5927\u62ec\u53f7\u91cc\u4e32\u8054\u4f7f\u7528\uff0c\u7528\u5206\u53f7\u5206\u5272 # \u6ce8\u610f\u5355\u53cc\u5f15\u53f7\u533a\u522b $ sed -n \"{1p;2p;\\$l}\" file $ sed -n '{1p;2p;$l}' file {} \u7528\u6cd5\u66f4\u4e3a\u7b80\u4fbf\uff0c\u4e5f\u66f4\u4e3a\u5e38\u7528 \u4fdd\u6301\u7a7a\u95f4 \u4fdd\u6301\u7a7a\u95f4\u662f\u5bf9\u6a21\u5f0f\u7a7a\u95f4\u6267\u884c\u547d\u4ee4\u65f6\u7684\u6682\u5b58\u573a\u6240\uff0c\u7b80\u5355\u5c06\u5c31\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5904\u7406\u5f53\u524d\u884c\u5185\u5bb9\u65f6\u6682\u5b58\u4e4b\u540e\uff0c\u5728\u4e0b\u4e00\u884c\u65f6\u518d\u8c03\u7528\u56de\u6765\uff0c\u6216\u8005\u53cd\u4e4b\u7684\u64cd\u4f5c\u3002 h/H \u4fdd\u5b58\u547d\u4ee4\uff0c\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236/\u8ffd\u52a0\u5230\u4fdd\u6301\u7a7a\u95f4 g/G \u53d6\u56de\u547d\u4ee4\uff0c\u5c06\u4fdd\u5b58\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236/\u8ffd\u52a0\u5230\u6a21\u5f0f\u7a7a\u95f4 x \u4ea4\u6362\u547d\u4ee4\uff0c\u5c06\u4fdd\u6301\u7a7a\u95f4\u548c\u6a21\u5f0f\u7a7a\u95f4\u5185\u5bb9\u4e92\u6362 # \u5c06\u6587\u4ef6\u5012\u7eed\u6392\u5217 $ sed -e '{1!G;h;$!d}' file fooooooooooood Food food is ok my food is great Hello everyone # \u5947\u6570\u884c\u5076\u6570\u884c\u4e92\u6362 $ cat data 1 2 3 4 $ sed -n '{h;n;G;p}' 2 2 1 4 3 # \u8fd9\u6761\u547d\u4ee4\u7684\u539f\u7406\u662fsed\u5148\u8bfb\u53d6\u7b2c\u4e00\u884c\u5230\u6a21\u5f0f\u7a7a\u95f4\uff0c\u56e0\u4e3a-n\u53c2\u6570\u6240\u4ee5\u4e0d\u4f1a\u6253\u5370\u663e\u793a;\u7136\u540eh\u547d\u4ee4\u5c06\u7b2c\u4e00\u884c\u590d\u5236\u5230\u4fdd\u6301\u7a7a\u95f4\uff0c{}\u6267\u884c\u591a\u4e2a\u547d\u4ee4\uff0c\u8fdb\u5165\u4e0b\u4e00\u4e2a\u547d\u4ee4n,\u8868\u793a\u5230\u7b2c\u4e8c\u884c\u3002\u7136\u540e\u662f\u547d\u4ee4G\uff0c\u8868\u793a\u5c06\u4fdd\u6301\u7a7a\u95f4\u7684\u7b2c\u4e00\u884c\u5185\u5bb9\u8ffd\u52a0\u5230\u7b2c\u4e8c\u884c\u540e\u3002\u7136\u540e\u547d\u4ee4p\u6253\u5370;\u63a5\u4e0b\u6765\u8bfb\u53d6\u7b2c\u4e09\u884c # \u7528 sed \u5c06 fastq \u7684reads\u6570\u636e\u8f6c\u6362\u4e3afasta\u6570\u636e $ zcat 1 .fastq.gz | sed -n '{s/@/>/g;p;n;p;n;n}' > 1 .fasta 2. \u811a\u672c\u793a\u4f8b \u00b6 \u7ed9\u5e8f\u5217\u547d\u540d # \u5728\u5e8f\u5217test.fas\u7b2c\u4e00\u884c\u52a0\u5165\u5e8f\u5217\u540d\u79f0 $ echo \"ATCCGAGTTAG\" > test.fas $ sed -i '1i\\>seq' test.fas $ cat test.fa >seq ATCCGAGTTAG","title":"05. sed \u884c\u5904\u7406\u5de5\u5177"},{"location":"tutorial/Linux/05_sed/#sed","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb sed \u5168\u79f0 Stream Editor\uff0c\u5373\u6d41\u7f16\u8f91\u5668\u3002\u60f3\u5bf9\u4e8e awk \u5904\u7406\u6bcf\u4e00\u884c\u4e2d\u5404\u4e2a\u5b57\u6bb5\u7684\u5217\u7279\u70b9\uff0csed \u5e38\u7528\u4e8e\u4ee5\u884c\u4e3a\u5355\u4f4d\u7684\u7f16\u8f91\u64cd\u4f5c\uff0c\u6bd4\u5982\u5b57\u7b26\u66ff\u6362\u7b49\u3002","title":"sed \u7528\u6cd5"},{"location":"tutorial/Linux/05_sed/#1-sed","text":"sed [\u9009\u9879] ... {\u811a\u672c} [\u8f93\u5165] ...","title":"1. sed \u547d\u4ee4\u57fa\u672c\u903b\u8f91"},{"location":"tutorial/Linux/05_sed/#11","text":"sed \u7f16\u8f91\u5185\u5bb9\u53ef\u4ee5\u662f\u6807\u51c6\u8f93\u5165STDIN\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6587\u4ef6\u3002sed \u8bfb\u53d6\u5185\u5bb9\u7684\u4e00\u884c\uff0c\u653e\u5165 \u6a21\u5f0f\u7a7a\u95f4 \uff0c\u5e76\u5728 \u6a21\u5f0f\u7a7a\u95f4 \u505a\u547d\u4ee4\u5bf9\u5e94\u7684\u64cd\u4f5c\uff0c\u518d\u5c06 \u6a21\u5f0f\u7a7a\u95f4 \u7684\u5185\u5bb9\u6253\u5370\u5230\u5c4f\u5e55\u4e0a","title":"1.1 \u8f93\u5165"},{"location":"tutorial/Linux/05_sed/#12","text":"-n \u9ed8\u8ba4sed\u5904\u7406\u4e00\u884c\u5c31\u4f1a\u5728STDOUT\u7ec8\u7aef\u4e2d\u6253\u5370\u4e00\u884c\u3002\u52a0\u4e0a -n \u53c2\u6570\u5c31\u4e0d\u4f1a\u5728\u8f93\u51fa\u7aef\u6253\u5370\u3002 -i \u5373sed\u7f16\u8f91\u5b8c\u540e\u76f4\u63a5\u50a8\u5b58\u4e3a\u6e90\u6587\u4ef6\uff0c\u4e0e\u91cd\u5b9a\u5411\u7b26\u53f7\u7c7b\u4f3c > \uff08\u4f46\u91cd\u5b9a\u5411\u7b26\u53f7\u4e0d\u80fd\u8986\u76d6\u539f\u6587\u4ef6\uff0c\u53ea\u4f1a\u6e05\u7a7a\uff09\u3002\u4e0d\u8fc7\u51fa\u4e8e\u6570\u636e\u5b89\u5168\u7684\u613f\u610f\uff0c\u5efa\u8bae\u8fd8\u662f\u7528>\u91cd\u5b9a\u5411\u5230\u65b0\u6587\u4ef6\u6216\u8005\u4fdd\u7559\u5907\u4efd\u6587\u4ef6\u6bd4\u8f83\u597d\u3002 # \u5220\u9664file\u7684\u7a7a\u683c\uff0c\u4fdd\u5b58\u6210file.new\u6587\u4ef6 $ sed -i 's/ //g' file > file.new $ ls file # \u539f\u59cb\u6587\u4ef6 file.new # \u65b0\u6587\u4ef6 # \u5220\u9664file\u7684\u7a7a\u683c\uff0c\u539f\u59cb\u6587\u4ef6\u4fdd\u5b58\u6210file.old $ sed -i.old 's/ //g' file $ ls file # \u65b0\u6587\u4ef6 file.old # \u539f\u59cb\u6587\u4ef6","title":"1.2 \u9009\u9879"},{"location":"tutorial/Linux/05_sed/#13","text":"p \u6253\u5370\u884c\u5185\u5bb9 l \u6253\u5370\u884c\u5185\u5bb9\uff0c\u5305\u62ec\u7279\u6b8a\u7b26\u53f7\uff0c\u6bd4\u5982\u6362\u884c\u7b26 # file \u6587\u4ef6\u5185\u5bb9 $ cat file Hello everyone my food is great food is ok Food fooooooooooood # \u6253\u5370\u6587\u4ef6\u7b2c2\u884c $ sed -n '2p' file my food is great # \u6253\u5370\u6587\u4ef6\u7b2c2\u884c\u5230\u7b2c3\u884c $ sed -n '2,3p' file my food is great food is ok # \u4e0d\u6253\u5370\u7b2c\u4e00\u884c $ sed -n '1!p' file my food is great food is ok Food fooooooooooood # \u4e0d\u6253\u5370\u7b2c2-3\u884c $ sed -n '2,3!p' file Hello everyone Food fooooooooooood # \u6253\u5370\u6587\u4ef6\u6700\u540e\u4e00\u884c, $\u7b26\u53f7\u8868\u793a\u6587\u4ef6\u6700\u540e\u4e00\u884c $ sed -n '$p' file fooooooooooood # \u6253\u5370\u5305\u542b\"food\"\u5b57\u7b26\u5f00\u59cb\u7684\u884c $ sed -n '/^food/p' file food is ok # \u4ece\u7b2c2\u884c\u5f00\u59cb\u6253\u5370\uff0c\u76f4\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u7684food\u6253\u5370\u7684\u90a3\u4e00\u884c\u4e3a\u6b62\uff08\u4e0d\u5305\u62ec\u7b2c5\u884c\uff09 # \u5982\u679c\u6ca1\u6709\u5339\u914d\u5219\u4e00\u76f4\u8f93\u51fa\u5230\u6587\u4ef6\u7ed3\u675f $ sed -n '2,/food/p' file my food is great food is ok # \u663e\u793a$\u6362\u884c\u7b26 $ sed -n '1,3l' file Hello everyone$ my food is great$ food is ok$ = \u6253\u5370\u5339\u914d\u7684\u884c\u53f7 # \u6253\u5370\u5305\u542bfo\u7684\u884c\u53f7 $ sed -n '/fo/=' file 2 3 5 a \u8ffd\u52a0\u884c\u6a21\u5f0f # \u5728\u542bfo\u5185\u5bb9\u7684\u884c\u540e\u63d2\u5165\u4e00\u4e2a\u65b0\u884c $ sed '/fo/a\\Insert a new line' file Hello everyone my food is great insert a new line food is ok insert a new line Food fooooooooooood insert a new line # \u5728\u884c\u5c3e\u63d2\u5165\u5185\u5bb9 $ sed '$a\\The end' file Hello everyone my food is great food is ok Food fooooooooooood The end i \u63d2\u5165\u884c\u6a21\u5f0f # \u5728\u542bfo\u5185\u5bb9\u7684\u884c\u524d\u63d2\u5165\u4e00\u4e2a\u65b0\u884c $ sed '/fo/i\\Insert a new line' file Hello everyone insert a new line my food is great insert a new line food is ok Food insert a new line fooooooooooood # \u5728\u7b2c\u4e00\u884c\u524d\u63d2\u5165\u65b0\u884c $ sed '1i\\Title:food' file Title:food Hello everyone my food is great food is ok Food fooooooooooood c \u4fee\u6539\u6a21\u5f0f # \u542bfo\u7684\u884c\u66ff\u6362\u6210\u65b0\u7684\u5185\u5bb9 $ sed '/fo/c\\changed line content' file Hello everyone changed line content changed line content Food changed line content d \u5220\u9664\u884c # \u5220\u9664\u7b2c\u4e00\u884c $ sed '1d' file my food is great food is ok Food fooooooooooood # \u5220\u9664\u7b2c2-4\u884c $ sed '2,4d' file Hello everyone fooooooooooood # \u5220\u9664\u5339\u914d food \u7684\u884c $ sed '/food/d' file Hello everyone Food fooooooooooood s \u66ff\u6362\u5185\u5bb9 s \u53ef\u4ee5\u7b97sed\u4e2d\u6700\u5e38\u7528\u7684\u5de5\u5177\u4e86\uff08\u60f3\u8c61\u4e00\u4e0b\uff0c\u6211\u4eec\u7528word\u5904\u7406\u6587\u672c\uff0c\u662f\u4e0d\u662f\u4e5f\u7ecf\u5e38\u67e5\u627e\u66ff\u6362\uff01\uff09 \u57fa\u672c\u4f8b\u5b50 # \u628apattern1\u66ff\u6362\u4e3apattern2 # \u9996\u5148\u641c\u7d22pattern1\uff0c\u7136\u540e\u5c06\u5176\u66ff\u6362\u4e3apattern2 $ sed s/pattern1/pattern2/flag flag: n \u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u66ff\u6362\u5f53\u524d\u6a21\u5f0f\u7a7a\u95f4 N \u8bfb\u53d6\u4e0b\u4e00\u884c\uff0c\u8ffd\u52a0\u5728\u6a211\u5f0f\u7a7a\u95f4\u540e q \u5339\u914d\u540e\u63a8\u51fa r \u8bfb\u53d6\u6587\u672c\u6587\u4ef6\uff0c\u5e76\u8ffd\u52a0\u5728\u6a21\u5f0f\u7a7a\u95f4\u540e \u6267\u884c\u591a\u4e2a\u547d\u4ee4 \u65b9\u6cd51: -e \u53c2\u6570\u4e32\u8054 # \u6ce8\u610f''\u548c\"\"\u8f6c\u4e49\u65f6\u4e0d\u540c\uff0c\"\"\u4f1a\u628a$\u8fdb\u884c\u8f6c\u4e49\uff0c\u6240\u4ee5\u6253\u5370\u884c\u5c3e\u8981\u7528\u5355\u5f15\u53f7 $ sed -n -e 1 \"p\" -e \"2p\" -e '$l' file Hello everyone my food is great fooooooooooood$ \u65b9\u6cd52: {;} \u547d\u4ee4\u5728\u5927\u62ec\u53f7\u91cc\u4e32\u8054\u4f7f\u7528\uff0c\u7528\u5206\u53f7\u5206\u5272 # \u6ce8\u610f\u5355\u53cc\u5f15\u53f7\u533a\u522b $ sed -n \"{1p;2p;\\$l}\" file $ sed -n '{1p;2p;$l}' file {} \u7528\u6cd5\u66f4\u4e3a\u7b80\u4fbf\uff0c\u4e5f\u66f4\u4e3a\u5e38\u7528 \u4fdd\u6301\u7a7a\u95f4 \u4fdd\u6301\u7a7a\u95f4\u662f\u5bf9\u6a21\u5f0f\u7a7a\u95f4\u6267\u884c\u547d\u4ee4\u65f6\u7684\u6682\u5b58\u573a\u6240\uff0c\u7b80\u5355\u5c06\u5c31\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5904\u7406\u5f53\u524d\u884c\u5185\u5bb9\u65f6\u6682\u5b58\u4e4b\u540e\uff0c\u5728\u4e0b\u4e00\u884c\u65f6\u518d\u8c03\u7528\u56de\u6765\uff0c\u6216\u8005\u53cd\u4e4b\u7684\u64cd\u4f5c\u3002 h/H \u4fdd\u5b58\u547d\u4ee4\uff0c\u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236/\u8ffd\u52a0\u5230\u4fdd\u6301\u7a7a\u95f4 g/G \u53d6\u56de\u547d\u4ee4\uff0c\u5c06\u4fdd\u5b58\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236/\u8ffd\u52a0\u5230\u6a21\u5f0f\u7a7a\u95f4 x \u4ea4\u6362\u547d\u4ee4\uff0c\u5c06\u4fdd\u6301\u7a7a\u95f4\u548c\u6a21\u5f0f\u7a7a\u95f4\u5185\u5bb9\u4e92\u6362 # \u5c06\u6587\u4ef6\u5012\u7eed\u6392\u5217 $ sed -e '{1!G;h;$!d}' file fooooooooooood Food food is ok my food is great Hello everyone # \u5947\u6570\u884c\u5076\u6570\u884c\u4e92\u6362 $ cat data 1 2 3 4 $ sed -n '{h;n;G;p}' 2 2 1 4 3 # \u8fd9\u6761\u547d\u4ee4\u7684\u539f\u7406\u662fsed\u5148\u8bfb\u53d6\u7b2c\u4e00\u884c\u5230\u6a21\u5f0f\u7a7a\u95f4\uff0c\u56e0\u4e3a-n\u53c2\u6570\u6240\u4ee5\u4e0d\u4f1a\u6253\u5370\u663e\u793a;\u7136\u540eh\u547d\u4ee4\u5c06\u7b2c\u4e00\u884c\u590d\u5236\u5230\u4fdd\u6301\u7a7a\u95f4\uff0c{}\u6267\u884c\u591a\u4e2a\u547d\u4ee4\uff0c\u8fdb\u5165\u4e0b\u4e00\u4e2a\u547d\u4ee4n,\u8868\u793a\u5230\u7b2c\u4e8c\u884c\u3002\u7136\u540e\u662f\u547d\u4ee4G\uff0c\u8868\u793a\u5c06\u4fdd\u6301\u7a7a\u95f4\u7684\u7b2c\u4e00\u884c\u5185\u5bb9\u8ffd\u52a0\u5230\u7b2c\u4e8c\u884c\u540e\u3002\u7136\u540e\u547d\u4ee4p\u6253\u5370;\u63a5\u4e0b\u6765\u8bfb\u53d6\u7b2c\u4e09\u884c # \u7528 sed \u5c06 fastq \u7684reads\u6570\u636e\u8f6c\u6362\u4e3afasta\u6570\u636e $ zcat 1 .fastq.gz | sed -n '{s/@/>/g;p;n;p;n;n}' > 1 .fasta","title":"1.3 \u811a\u672c"},{"location":"tutorial/Linux/05_sed/#2","text":"\u7ed9\u5e8f\u5217\u547d\u540d # \u5728\u5e8f\u5217test.fas\u7b2c\u4e00\u884c\u52a0\u5165\u5e8f\u5217\u540d\u79f0 $ echo \"ATCCGAGTTAG\" > test.fas $ sed -i '1i\\>seq' test.fas $ cat test.fa >seq ATCCGAGTTAG","title":"2. \u811a\u672c\u793a\u4f8b"},{"location":"tutorial/Linux/06_tools/","text":"Linux \u5e38\u7528\u6570\u636e\u5904\u7406\u5de5\u5177 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd \u672c\u8282\u4e3b\u8981\u4ecb\u7ecd Linux \u7cfb\u7edf\u4e0b\u5e38\u7528\u7684\u7ba1\u9053\u5de5\u5177\u3002 - sort : \u6392\u5e8f - uniq : \u5408\u5e76\u91cd\u590d\u9879 - cut : \u6309\u5b57\u6bb5\u526a\u5207 - split : \u5b57\u7b26\u4e32\u526a\u5207 - tr : \u5b57\u7b26\u4e32\u66ff\u6362 - join : \u5b57\u7b26\u4e32\u8fde\u63a5 - paste : \u5c06\u6587\u4ef6\u6309\u5217\u590d\u5236 - diff : \u6bd4\u8f832\u4e2a\u6587\u4ef6\u5dee\u5f02 - parallel : \u5e76\u884c\u5904\u7406\u7a0b\u5e8f - curl : \u4e0b\u8f7d\u6570\u636e - cvskit : \u547d\u4ee4\u884ccvs\u5de5\u5177 sort \u00b6 $ uniq \u00b6 cut \u00b6 split \u00b6 tr \u00b6 join \u00b6 paste \u00b6 diff \u00b6 parallel \u00b6 curl \u00b6 cvskit \u00b6","title":"06. \u5176\u4ed6\u547d\u4ee4\u884c\u5de5\u5177"},{"location":"tutorial/Linux/06_tools/#linux","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u4ecb\u7ecd \u672c\u8282\u4e3b\u8981\u4ecb\u7ecd Linux \u7cfb\u7edf\u4e0b\u5e38\u7528\u7684\u7ba1\u9053\u5de5\u5177\u3002 - sort : \u6392\u5e8f - uniq : \u5408\u5e76\u91cd\u590d\u9879 - cut : \u6309\u5b57\u6bb5\u526a\u5207 - split : \u5b57\u7b26\u4e32\u526a\u5207 - tr : \u5b57\u7b26\u4e32\u66ff\u6362 - join : \u5b57\u7b26\u4e32\u8fde\u63a5 - paste : \u5c06\u6587\u4ef6\u6309\u5217\u590d\u5236 - diff : \u6bd4\u8f832\u4e2a\u6587\u4ef6\u5dee\u5f02 - parallel : \u5e76\u884c\u5904\u7406\u7a0b\u5e8f - curl : \u4e0b\u8f7d\u6570\u636e - cvskit : \u547d\u4ee4\u884ccvs\u5de5\u5177","title":"Linux \u5e38\u7528\u6570\u636e\u5904\u7406\u5de5\u5177"},{"location":"tutorial/Linux/06_tools/#sort","text":"$","title":"sort"},{"location":"tutorial/Linux/06_tools/#uniq","text":"","title":"uniq"},{"location":"tutorial/Linux/06_tools/#cut","text":"","title":"cut"},{"location":"tutorial/Linux/06_tools/#split","text":"","title":"split"},{"location":"tutorial/Linux/06_tools/#tr","text":"","title":"tr"},{"location":"tutorial/Linux/06_tools/#join","text":"","title":"join"},{"location":"tutorial/Linux/06_tools/#paste","text":"","title":"paste"},{"location":"tutorial/Linux/06_tools/#diff","text":"","title":"diff"},{"location":"tutorial/Linux/06_tools/#parallel","text":"","title":"parallel"},{"location":"tutorial/Linux/06_tools/#curl","text":"","title":"curl"},{"location":"tutorial/Linux/06_tools/#cvskit","text":"","title":"cvskit"},{"location":"tutorial/Linux/07_vim/","text":"Vim \u4f7f\u7528 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} vim \u5de5\u5177\u7684\u57fa\u672c\u4f7f\u7528 3\u79cd\u6a21\u5f0f\uff1a normal \u6a21\u5f0f insert \u6a21\u5f0f visual \u6a21\u5f0f \u6309\u952e \u529f\u80fd i \u8fdb\u5165insert\u6a21\u5f0f\uff0c\u5904\u4e8e\u53ef\u4ee5\u7f16\u8f91\u72b6\u6001 ESC \u8fdb\u5165normal\u6a21\u5f0f a \u8fdb\u5165insert\u6a21\u5f0f\uff0c\u4f46\u4e0ei\u4e0d\u540c\uff0c\u662f\u4ece\u5149\u6807\u7684\u4e0b\u4e00\u4f4d\u8fdb\u884c\u7f16\u8f91\uff0c\u76f8\u5f53\u4e0eadd v \u8fdb\u5165visual\u6a21\u5f0f CTRL+f, CTRL+d \u5411\u4e0b\u7ffb\u9875 CTRL+n, CTRL+u \u5411\u4e0a\u7ffb\u9875 \u4fee\u6539 \u00b6 \u6700\u57fa\u672c\u7684 i \u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\u540e\u53ef\u4ee5\u50cf\u5e38\u89c4\u6587\u672c\u7f16\u8f91\u5668\u8fdb\u884c\u4fee\u6539\u3002\u5176\u4ed6\u5e38\u89c1\u7684\u4fee\u6539\u64cd\u4f5c\uff1a x \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5b57\u7b26 X \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u524d\u4e00\u4e2a\u5b57\u7b26 s \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u8fdb\u5165insert\u6a21\u5f0f r \u6309\u4e0b\u540e\uff0c\u518d\u6309\u4e0b\u4e0b\u4e00\u4e2a\u5b57\u7b26\u65f6\u4f1a\u5c06\u8be5\u5b57\u7b26\u53d6\u4ee3\u5f53\u524d\u5149\u6807\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u76f8\u5f53\u4e0e\u66ff\u6362replace d \u5220\u9664\u547d\u4ee4 D \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u540e\u4e00\u4e2a\u5b57\u7b26\u76f4\u5230\u8be5\u884c\u7ed3\u5c3e\uff0c\u65b0\u7684 y \u662f\u590d\u5236\u884c\u4e3a\uff0c\u5e38\u89c1\u7528\u6cd5\u662f: yy \u590d\u5236\u5f53\u524d\u884c y5y \u662f\u4ece\u5f53\u524d\u5149\u6807\u884c\u5f00\u59cb\u590d\u52365\u884c\uff0c\u6570\u5b57\u662f\u51e0\u5c31\u590d\u5236\u51e0\u884c yw \u662f\u4ece\u5f53\u524d\u5149\u6807\u5f00\u59cb\u590d\u5236\u5230\u8be5\u5355\u8bcd\u7ed3\u675f\uff0c\u5982\u679c\u662f\u4e2d\u6587\u5219\u590d\u5236\u5230\u7a7a\u683c\u6216\u6807\u70b9\u5904 yiw \u8868\u793a\u590d\u5236\u5149\u6807\u6240\u5728\u7684\u5355\u8bcd\uff0c\u5982\u679c\u662f\u4e2d\u6587\u5219\u590d\u5236\u5230\u7a7a\u683c\u6216\u6807\u70b9\u5904\u3002 yt, d \u662f\u5220\u9664\u884c\u4e3a\uff0c\u5e38\u89c1\u7684\u7528\u6cd5\u662f\uff1a dd \u5220\u9664\u5f53\u524d\u884c\uff0c\u5b9e\u9645\u6548\u679c\u4e0e\u526a\u5207\u4e00\u81f4\uff0c\u53ef\u4ee5\u7528 pp \u5c06\u5220\u9664\u884c\u7c98\u8d34 d5d \u662f\u4ece\u5f53\u524d\u5149\u6807\u884c\u5f00\u59cb\u5220\u96645\u884c\uff0c\u6570\u5b57\u662f\u51e0\u5c31\u5220\u9664\u51e0\u884c dw \u5220\u9664 daw \u5220\u9664\u5f53\u524d\u5149\u6807\u6240\u5728\u5355\u8bcd,\u4f1a\u4e00\u76f4\u5220\u9664\u5230\u7a7a\u683c diw \u5220\u9664\u5f53\u524d\u5149\u6807\u6240\u5728\u5355\u8bcd,\u4e0d\u4f1a\u4e00\u76f4\u5220\u9664\u5230\u7a7a\u683c dt, \u5f80\u540e\u5220\u9664\uff0c\u4e00\u76f4\u641c\u7d22\u5230\u9017\u53f7\u505c\u6b62\u3002\u53ef\u4ee5\u7528\u5176\u4ed6\u5b57\u6bcd\u6216\u8005\u7b26\u53f7\u4ee3\u66ff\uff0c\u8868\u793a\u4e00\u76f4\u5220\u9664\u5230\u641c\u7d22\u5230\u7684\u6240\u5728\u7b26\u53f7\u524d de \u5220\u9664\u5230\u8be5\u5355\u8bcd\u7ed3\u5c3e\uff0c D elete to the E nd :g/pattern/d :Sex \u5782\u76f4\u5206\u5c4f\u6253\u5f00\u65b0\u7a97\u53e3\u663e\u793a\u6587\u4ef6 :Tex \u4ee5tab\u65b9\u5f0f\u6253\u5f00\u65b0\u7a97\u53e3\u663e\u793a\u6587\u4ef6 gt \u5411\u524d\u5207\u6362tab gT \u5411\u540e\u5207\u6362tab ~/.vimrc .vimrc \u662f vim \u7684\u914d\u7f6e\u6587\u4ef6\u3002","title":"07. vim"},{"location":"tutorial/Linux/07_vim/#vim","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} vim \u5de5\u5177\u7684\u57fa\u672c\u4f7f\u7528 3\u79cd\u6a21\u5f0f\uff1a normal \u6a21\u5f0f insert \u6a21\u5f0f visual \u6a21\u5f0f \u6309\u952e \u529f\u80fd i \u8fdb\u5165insert\u6a21\u5f0f\uff0c\u5904\u4e8e\u53ef\u4ee5\u7f16\u8f91\u72b6\u6001 ESC \u8fdb\u5165normal\u6a21\u5f0f a \u8fdb\u5165insert\u6a21\u5f0f\uff0c\u4f46\u4e0ei\u4e0d\u540c\uff0c\u662f\u4ece\u5149\u6807\u7684\u4e0b\u4e00\u4f4d\u8fdb\u884c\u7f16\u8f91\uff0c\u76f8\u5f53\u4e0eadd v \u8fdb\u5165visual\u6a21\u5f0f CTRL+f, CTRL+d \u5411\u4e0b\u7ffb\u9875 CTRL+n, CTRL+u \u5411\u4e0a\u7ffb\u9875","title":"Vim \u4f7f\u7528"},{"location":"tutorial/Linux/07_vim/#_1","text":"\u6700\u57fa\u672c\u7684 i \u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\u540e\u53ef\u4ee5\u50cf\u5e38\u89c4\u6587\u672c\u7f16\u8f91\u5668\u8fdb\u884c\u4fee\u6539\u3002\u5176\u4ed6\u5e38\u89c1\u7684\u4fee\u6539\u64cd\u4f5c\uff1a x \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5b57\u7b26 X \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u524d\u4e00\u4e2a\u5b57\u7b26 s \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u8fdb\u5165insert\u6a21\u5f0f r \u6309\u4e0b\u540e\uff0c\u518d\u6309\u4e0b\u4e0b\u4e00\u4e2a\u5b57\u7b26\u65f6\u4f1a\u5c06\u8be5\u5b57\u7b26\u53d6\u4ee3\u5f53\u524d\u5149\u6807\u4f4d\u7f6e\u7684\u5b57\u7b26\uff0c\u76f8\u5f53\u4e0e\u66ff\u6362replace d \u5220\u9664\u547d\u4ee4 D \u5220\u9664\u5f53\u524d\u5149\u6807\u4e0b\u540e\u4e00\u4e2a\u5b57\u7b26\u76f4\u5230\u8be5\u884c\u7ed3\u5c3e\uff0c\u65b0\u7684 y \u662f\u590d\u5236\u884c\u4e3a\uff0c\u5e38\u89c1\u7528\u6cd5\u662f: yy \u590d\u5236\u5f53\u524d\u884c y5y \u662f\u4ece\u5f53\u524d\u5149\u6807\u884c\u5f00\u59cb\u590d\u52365\u884c\uff0c\u6570\u5b57\u662f\u51e0\u5c31\u590d\u5236\u51e0\u884c yw \u662f\u4ece\u5f53\u524d\u5149\u6807\u5f00\u59cb\u590d\u5236\u5230\u8be5\u5355\u8bcd\u7ed3\u675f\uff0c\u5982\u679c\u662f\u4e2d\u6587\u5219\u590d\u5236\u5230\u7a7a\u683c\u6216\u6807\u70b9\u5904 yiw \u8868\u793a\u590d\u5236\u5149\u6807\u6240\u5728\u7684\u5355\u8bcd\uff0c\u5982\u679c\u662f\u4e2d\u6587\u5219\u590d\u5236\u5230\u7a7a\u683c\u6216\u6807\u70b9\u5904\u3002 yt, d \u662f\u5220\u9664\u884c\u4e3a\uff0c\u5e38\u89c1\u7684\u7528\u6cd5\u662f\uff1a dd \u5220\u9664\u5f53\u524d\u884c\uff0c\u5b9e\u9645\u6548\u679c\u4e0e\u526a\u5207\u4e00\u81f4\uff0c\u53ef\u4ee5\u7528 pp \u5c06\u5220\u9664\u884c\u7c98\u8d34 d5d \u662f\u4ece\u5f53\u524d\u5149\u6807\u884c\u5f00\u59cb\u5220\u96645\u884c\uff0c\u6570\u5b57\u662f\u51e0\u5c31\u5220\u9664\u51e0\u884c dw \u5220\u9664 daw \u5220\u9664\u5f53\u524d\u5149\u6807\u6240\u5728\u5355\u8bcd,\u4f1a\u4e00\u76f4\u5220\u9664\u5230\u7a7a\u683c diw \u5220\u9664\u5f53\u524d\u5149\u6807\u6240\u5728\u5355\u8bcd,\u4e0d\u4f1a\u4e00\u76f4\u5220\u9664\u5230\u7a7a\u683c dt, \u5f80\u540e\u5220\u9664\uff0c\u4e00\u76f4\u641c\u7d22\u5230\u9017\u53f7\u505c\u6b62\u3002\u53ef\u4ee5\u7528\u5176\u4ed6\u5b57\u6bcd\u6216\u8005\u7b26\u53f7\u4ee3\u66ff\uff0c\u8868\u793a\u4e00\u76f4\u5220\u9664\u5230\u641c\u7d22\u5230\u7684\u6240\u5728\u7b26\u53f7\u524d de \u5220\u9664\u5230\u8be5\u5355\u8bcd\u7ed3\u5c3e\uff0c D elete to the E nd :g/pattern/d :Sex \u5782\u76f4\u5206\u5c4f\u6253\u5f00\u65b0\u7a97\u53e3\u663e\u793a\u6587\u4ef6 :Tex \u4ee5tab\u65b9\u5f0f\u6253\u5f00\u65b0\u7a97\u53e3\u663e\u793a\u6587\u4ef6 gt \u5411\u524d\u5207\u6362tab gT \u5411\u540e\u5207\u6362tab ~/.vimrc .vimrc \u662f vim \u7684\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u4fee\u6539"},{"location":"tutorial/Linux/12_git/","text":"Git \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u6559\u7a0b\u7b80\u4ecbgit\u547d\u4ee4\u7684\u4f7f\u7528\uff0c\u4ee5\u53ca\u7ec8\u7aef\u4e0b\u7528\u6237\u754c\u9762lazygit\u7684\u7b80\u4ecb\u3002 \u5b89\u88c5 \u00b6 \u5728 Archlinux \u4e2d\u5b89\u88c5 git $ sudo pacman -S git \u914d\u7f6e \u00b6 # \u8bbe\u7f6e\u989c\u8272 $ git config --global color.ui true # \u8bbe\u7f6e\u547d\u4ee4\u7f29\u5199 $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global alias.br branch # \u8bbe\u7f6e Editor \u4f7f\u7528 sublime $ git config --global core.editor \"subl -w\" # \u8bbe\u7f6e Editor \u4f7f\u7528 vim $ git config --global core.editor \"vim\" # \u5217\u4e3e\u6240\u6709\u914d\u7f6e $ git config -l \u4f7f\u7528 \u00b6 \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5 # \u514b\u9686\u4ee3\u7801\u4ed3\u5e93 $ git clone https://github.com/linux/linux.git # \u4fee\u6539\u4ee3\u7801\u540e\u63d0\u4ea4\u6240\u6709\u4fee\u6539\u5230 master \u4ed3\u5e93\u4e2d\uff0c\u65b0\u7248\u672c github \u9ed8\u8ba4\u4ed3\u5e93\u540d\u4e3a main $ git add -A $ git commit -m 'fix code' $ git push origin master \u6bd4\u8f83\u7248\u672c\u5dee\u5f02 \u00b6 # \u5de5\u4f5c\u533a\u4e0e\u7f13\u5b58\u533a\u7684\u5dee\u5f02 $ git diff # \u7f13\u5b58\u533a\u4e0e\u6700\u65b0 commit \u4e4b\u95f4\u7684\u5dee\u5f02 $ git diff -\u2013cached $ git diff HEAD # \u5de5\u4f5c\u533a\u4e0e\u6700\u65b0 commit \u4e4b\u95f4\u7684\u5dee\u5f02 $ git diff @ # \u540c\u4e0a \u6bd4\u8f83\u5f53\u524d\u7248\u672c\u548c\u4e4b\u524d\u7248\u672c\uff0c\u4ee5\u4e0b\u4e09\u8005\u7686\u53ef \u00b6 $ git diff @~..@ $ git diff HEAD^ HEAD $ git show @ $ diff -c file1 file2 # \u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\uff0c\u4e0a\u4e0b\u6587\u6a21\u5f0f $ diff -u file1 file2 # \u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\uff0c\u7edf\u4e00\u6a21\u5f0f \u64a4\u9500\u4fee\u6539 \u00b6 # \u64a4\u9500\u5de5\u4f5c\u533a\u7f16\u8f91 $ git config --global alias.co checkout # git checkout \u6bd4\u8f83\u5e38\u7528\uff0c\u8bbe\u4e2a\u522b\u540d $ git co . $ git co -- filename # \u64a4\u9500\u7f13\u5b58\u533a $ git reset HEAD filename # add \u4e4b\u540e\uff0c\u6062\u590d\u540e\u56de\u5230\u7f16\u8f91\u72b6\u6001\u3002 $ git reset @ filename # \u540c\u4e0a # \u5220\u9664\u5f53\u524d\u5386\u53f2 $ git log --pretty = oneline # \u67e5\u770b\u6700\u8fd1\u7684\u65e5\u5fd7 $ git reset --hard @~ # \u76f4\u63a5\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c $ git reset --hard HEAD^ # \u540c\u4e0a # \u6bd4\u8f83\u5b89\u5168\u7684\u505a\u6cd5 $ git revert < $id > # \u6062\u590d\u67d0\u6b21\u63d0\u4ea4\u7684\u72b6\u6001\uff0c\u6062\u590d\u52a8\u4f5c\u672c\u8eab\u4e5f\u521b\u5efa\u4e86\u4e00\u6b21\u63d0\u4ea4\u5bf9\u8c61\uff0c\u9700\u91cd\u5199 commit $ git revert HEAD # \u6062\u590d\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684\u72b6\u6001 # \u611f\u89c9\u81ea\u5df1\u8fd9\u6b21\u5199\u9519\u4e86 $ get reset @~ # \u56de\u5230\u5de5\u4f5c\u533a\u7684\u7f16\u8f91\u72b6\u6001\uff0c\u8ddf\u4e0a\u65b9\u7684 hard \u8fd8\u662f\u6709\u533a\u522b\u7684\u3002 # \u6539\u53d8git log\u5230\u6807\u51c6\u8f93\u51fa git config ager.log false Lazygit \u00b6 \u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u6709\u5404\u79cdgit\u7684gui\u5e94\u7528\u7a0b\u5e8f\uff0c\u4e2a\u4eba\u901a\u5e38\u4f7f\u7528lazygit\u547d\u4ee4\u6765\u5b9e\u73b0git\u529f\u80fd\u3002 # aur \u65b9\u5f0f\u5b89\u88c5 $ git clone https://aur.archlinux.org/lazygit $ cd lazygit $ makepkg -si # lg\u4f5c\u4e3a\u8fd0\u884c\u547d\u4ee4 $ echo \"alias lg='lazygit'\" >> $HOME /.bashrc $ source $HOME /.bashrc \u4f7f\u7528 lazygit # \u8fdb\u5165\u4ee3\u7801\u4ed3\u5e93\u6839\u76ee\u5f55 $ cd path-to-repos # \u8fdb\u5165lazygit\u754c\u9762 $ lg lazygit\u7528\u6237\u754c\u9762\u5206\u4e3a\u5de6\u4fa75\u4e2a\u529f\u80fd\u7a97\u53e3\u548c\u53f3\u4fa7\u4e00\u4e2a\u5185\u5bb9\u7a97\u53e3\u3002\u5f53\u5728\u529f\u80fd\u7a97\u53e3\u5207\u6362\u65f6\uff0c\u53f3\u4fa7\u5185\u5bb9\u7a97\u53e3\u4e5f\u4f1a\u663e\u793a\u5f53\u524d\u529f\u80fd\u7a97\u53e3\u6240\u5305\u542b\u7684\u5185\u5bb9\u3002\u6309\u6570\u5b571-5\u5207\u6362\u5404\u4e2a\u529f\u80fd\u7a97\u53e3\u3002 \u529f\u80fd\u7a97\u53e3 Status Files Local Branches Commits Stash **\u5feb\u6377\u547d\u4ee4 p : git pull P : git push","title":"Git"},{"location":"tutorial/Linux/12_git/#git","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u672c\u6559\u7a0b\u7b80\u4ecbgit\u547d\u4ee4\u7684\u4f7f\u7528\uff0c\u4ee5\u53ca\u7ec8\u7aef\u4e0b\u7528\u6237\u754c\u9762lazygit\u7684\u7b80\u4ecb\u3002","title":"Git"},{"location":"tutorial/Linux/12_git/#_1","text":"\u5728 Archlinux \u4e2d\u5b89\u88c5 git $ sudo pacman -S git","title":"\u5b89\u88c5"},{"location":"tutorial/Linux/12_git/#_2","text":"# \u8bbe\u7f6e\u989c\u8272 $ git config --global color.ui true # \u8bbe\u7f6e\u547d\u4ee4\u7f29\u5199 $ git config --global alias.co checkout $ git config --global alias.ci commit $ git config --global alias.st status $ git config --global alias.br branch # \u8bbe\u7f6e Editor \u4f7f\u7528 sublime $ git config --global core.editor \"subl -w\" # \u8bbe\u7f6e Editor \u4f7f\u7528 vim $ git config --global core.editor \"vim\" # \u5217\u4e3e\u6240\u6709\u914d\u7f6e $ git config -l","title":"\u914d\u7f6e"},{"location":"tutorial/Linux/12_git/#_3","text":"\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5 # \u514b\u9686\u4ee3\u7801\u4ed3\u5e93 $ git clone https://github.com/linux/linux.git # \u4fee\u6539\u4ee3\u7801\u540e\u63d0\u4ea4\u6240\u6709\u4fee\u6539\u5230 master \u4ed3\u5e93\u4e2d\uff0c\u65b0\u7248\u672c github \u9ed8\u8ba4\u4ed3\u5e93\u540d\u4e3a main $ git add -A $ git commit -m 'fix code' $ git push origin master","title":"\u4f7f\u7528"},{"location":"tutorial/Linux/12_git/#_4","text":"# \u5de5\u4f5c\u533a\u4e0e\u7f13\u5b58\u533a\u7684\u5dee\u5f02 $ git diff # \u7f13\u5b58\u533a\u4e0e\u6700\u65b0 commit \u4e4b\u95f4\u7684\u5dee\u5f02 $ git diff -\u2013cached $ git diff HEAD # \u5de5\u4f5c\u533a\u4e0e\u6700\u65b0 commit \u4e4b\u95f4\u7684\u5dee\u5f02 $ git diff @ # \u540c\u4e0a","title":"\u6bd4\u8f83\u7248\u672c\u5dee\u5f02"},{"location":"tutorial/Linux/12_git/#_5","text":"$ git diff @~..@ $ git diff HEAD^ HEAD $ git show @ $ diff -c file1 file2 # \u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\uff0c\u4e0a\u4e0b\u6587\u6a21\u5f0f $ diff -u file1 file2 # \u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\uff0c\u7edf\u4e00\u6a21\u5f0f","title":"\u6bd4\u8f83\u5f53\u524d\u7248\u672c\u548c\u4e4b\u524d\u7248\u672c\uff0c\u4ee5\u4e0b\u4e09\u8005\u7686\u53ef"},{"location":"tutorial/Linux/12_git/#_6","text":"# \u64a4\u9500\u5de5\u4f5c\u533a\u7f16\u8f91 $ git config --global alias.co checkout # git checkout \u6bd4\u8f83\u5e38\u7528\uff0c\u8bbe\u4e2a\u522b\u540d $ git co . $ git co -- filename # \u64a4\u9500\u7f13\u5b58\u533a $ git reset HEAD filename # add \u4e4b\u540e\uff0c\u6062\u590d\u540e\u56de\u5230\u7f16\u8f91\u72b6\u6001\u3002 $ git reset @ filename # \u540c\u4e0a # \u5220\u9664\u5f53\u524d\u5386\u53f2 $ git log --pretty = oneline # \u67e5\u770b\u6700\u8fd1\u7684\u65e5\u5fd7 $ git reset --hard @~ # \u76f4\u63a5\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c $ git reset --hard HEAD^ # \u540c\u4e0a # \u6bd4\u8f83\u5b89\u5168\u7684\u505a\u6cd5 $ git revert < $id > # \u6062\u590d\u67d0\u6b21\u63d0\u4ea4\u7684\u72b6\u6001\uff0c\u6062\u590d\u52a8\u4f5c\u672c\u8eab\u4e5f\u521b\u5efa\u4e86\u4e00\u6b21\u63d0\u4ea4\u5bf9\u8c61\uff0c\u9700\u91cd\u5199 commit $ git revert HEAD # \u6062\u590d\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684\u72b6\u6001 # \u611f\u89c9\u81ea\u5df1\u8fd9\u6b21\u5199\u9519\u4e86 $ get reset @~ # \u56de\u5230\u5de5\u4f5c\u533a\u7684\u7f16\u8f91\u72b6\u6001\uff0c\u8ddf\u4e0a\u65b9\u7684 hard \u8fd8\u662f\u6709\u533a\u522b\u7684\u3002 # \u6539\u53d8git log\u5230\u6807\u51c6\u8f93\u51fa git config ager.log false","title":"\u64a4\u9500\u4fee\u6539"},{"location":"tutorial/Linux/12_git/#lazygit","text":"\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u6709\u5404\u79cdgit\u7684gui\u5e94\u7528\u7a0b\u5e8f\uff0c\u4e2a\u4eba\u901a\u5e38\u4f7f\u7528lazygit\u547d\u4ee4\u6765\u5b9e\u73b0git\u529f\u80fd\u3002 # aur \u65b9\u5f0f\u5b89\u88c5 $ git clone https://aur.archlinux.org/lazygit $ cd lazygit $ makepkg -si # lg\u4f5c\u4e3a\u8fd0\u884c\u547d\u4ee4 $ echo \"alias lg='lazygit'\" >> $HOME /.bashrc $ source $HOME /.bashrc \u4f7f\u7528 lazygit # \u8fdb\u5165\u4ee3\u7801\u4ed3\u5e93\u6839\u76ee\u5f55 $ cd path-to-repos # \u8fdb\u5165lazygit\u754c\u9762 $ lg lazygit\u7528\u6237\u754c\u9762\u5206\u4e3a\u5de6\u4fa75\u4e2a\u529f\u80fd\u7a97\u53e3\u548c\u53f3\u4fa7\u4e00\u4e2a\u5185\u5bb9\u7a97\u53e3\u3002\u5f53\u5728\u529f\u80fd\u7a97\u53e3\u5207\u6362\u65f6\uff0c\u53f3\u4fa7\u5185\u5bb9\u7a97\u53e3\u4e5f\u4f1a\u663e\u793a\u5f53\u524d\u529f\u80fd\u7a97\u53e3\u6240\u5305\u542b\u7684\u5185\u5bb9\u3002\u6309\u6570\u5b571-5\u5207\u6362\u5404\u4e2a\u529f\u80fd\u7a97\u53e3\u3002 \u529f\u80fd\u7a97\u53e3 Status Files Local Branches Commits Stash **\u5feb\u6377\u547d\u4ee4 p : git pull P : git push","title":"Lazygit"},{"location":"tutorial/Programming/01_shell/","text":"Shell \u811a\u672c\u7f16\u7a0b \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e\uff1a{{ git_revision_date }} \u5b57\u7b26\u4e32\u53d8\u91cf\u5904\u7406 \u00b6 \u5b57\u7b26\u4e32\u53d8\u91cf\u5185\u7f6e\u7b26\u64cd\u4f5c\u6bd4\u7528\u5916\u90e8\u547d\u4ee4\u5982 expr, awk, sed \u7b49\u8981\u5feb\uff0c\u6240\u4ee5\u80fd\u5185\u7f6e\u7b26\u53f7\u64cd\u4f5c\u7684\u9700\u6c42\uff0c\u5c3d\u53ef\u80fd\u7528\u5b83\u6765\u5b8c\u6210\u3002 # \u5b57\u7b26\u4e32\u8d4b\u503c $ a = \"R1.fastq.gz\" $ echo $a R1.fastq.gz # \u7ed9\u53d8\u91cf\u8d4b\u4e88\u9ed8\u8ba4\u503c $ echo ${ b =100 } 100 $ b = 20 $ echo ${ b =100 } 20 # \u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6 $ echo ${ \\# a } # \u4e0d\u9700\u8981\"\\\"\u7b26\u53f7\uff0c\u7531\u4e8e\u6559\u7a0b\u4ee3\u7801\u89e3\u6790\u95ee\u9898\uff0c\u52a0\u4e0a\\\u4fdd\u8bc1\u6587\u6863\u4ee3\u7801\u89e3\u6790\u6b63\u786e 11 # \u5b57\u7b26\u4e32\u63d0\u53d6 $ echo ${ a : 3 } # \u4ece\u7b2c\u4e09\u4e2a\u5b57\u7b26\u4e32\u540e\u63d0\u53d6 fastq.gz $ echo ${ a : 0 : 2 } # \u4ece\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u63d0\u53d62\u4e2a\u957f\u5ea6\u5b57\u7b26 R1 $ echo ${ a #R1. } # \u4ece\u5b57\u7b26\u4e32\u5f00\u5934\u5220\u9664R1. fastq.gz $ echo ${ a %.fastq.gz } # \u4ece\u5b57\u7b26\u4e32\u7ed3\u5c3e\u5220\u9664\u5339\u914d.fastq.gz\u7684\u5b57\u7b26\u4e32 # \u5b57\u7b26\u4e32\u66ff\u6362 $ echo ${ a /R1/1_1 } # \u5b57\u7b26\u4e32R1\u66ff\u6362\u62101_1, \u4ece\u5934\u5f00\u59cb\u66ff\u6362\u7b2c\u4e00\u4e2a 1_1.fastq.gz $ echo ${ a //R1/1_1 } # \u5b57\u7b26\u4e32R1\u66ff\u6362\u62101_1, \u66ff\u6362\u6240\u6709 1_1.fastq.gz # *\u661f\u53f7\u505a\u4e3a\u901a\u914d\u7b26\uff0c\u53ef\u8868\u793a\u53d8\u91cf\u540d $ a1 = 100 $ a2 = 10 $ echo ${ !a* } # \u663e\u793a\u4ee5a\u5f00\u5934\u58f0\u660e\u7684\u53d8\u91cf a1 a2 # \u9012\u5f52\u5faa\u73af\u53d8\u91cf $ for i in ` echo ${ !a* } ` ; do echo $i ; done a1 a2 # \u5b57\u7b26\u4e32\u6bd4\u8f83 $ s = ATCCGAC $ if [ $s == 'ATCCGAC' ] ; then echo \"yes!\" ; fi yes! $ s1 = TTCCGAC $ if [ $t == 'ATCCGAC' ] ; then echo \"yes!\" ; else echo \"no!\" ; fi no! \u5faa\u73af \u00b6 for \u5faa\u73af \u00b6 \u5faa\u73af\u662f\u5e38\u7528\u7684\u529f\u80fd\uff0c\u5f80\u5f80\u88ab\u7528\u6765\u6279\u91cf\u5904\u7406\u6570\u636e\u3002\u5faa\u73af\u5728\u7ec8\u7aef\u4e0b\u76f4\u63a5\u8fd0\u884c oneline shell \u811a\u672c\u6216\u8005\u5199 shell \u7a0b\u5e8f\u5e38\u4f1a\u7528\u5230\u3002\u6700\u5e38\u7528\u7684\u5faa\u73af loop \u65b9\u5f0f\u662f\u7528 for \u6765\u6267\u884c\u3002 # \u793a\u4f8b $ for i in *.fastq.gz ; do bwa aln ref.fasta $i > $i .sai ; done \u6d4b\u5e8f\u65f6\u5e38\u7528\u6d41\u6c34\u53f7\u505a\u4e3a\u6837\u54c1\u540d\u79f0\uff0c\u6bd4\u5982 miseq \u6d4b\u5e8f\u7ed3\u679c\u6570\u636e\u5e38\u5e38\u5982\u4e0b\uff1a 1_S1_R1_L001.fastq.gz 1_S1_R2_L001.fastq.gz 2_S2_R1_L001.fastq.gz 2_S2_R2_L001.fastq.gz 3_S3_R1_L001.fastq.gz 3_S3_R2_L001.fastq.gz ... 12_S12_R1_L001.fastq.gz 12_S12_R2_L001.fastq.gz # \u7528 for \u5faa\u73af\u904d\u5386\u7684\u5199\u6cd51-12 $ for i in 1 2 3 4 5 6 7 8 9 10 11 12 ; do COMMAND ; done $ for i in { 1 ..12 } ; do COMMAND ; done # \u4ece1-12,\u95f4\u96943\u8f93\u51fa\uff0c\u7ed3\u679ci\u4e3a1,4,7,10 $ for i in { 1 ..12..3 } ; do COMMAND ; done # \u5bf9\u4e8e\u540c\u4e00\u79cd\u6587\u4ef6\u683c\u5f0f\uff0c\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u6765\u8fc7\u6ee4 $ for i in 1 .fq 2 .fq 3 .fq 4 .fq ; do COMMAND ; done $ for i in *.fq ; do COMMAND ; done # \u5faa\u73af\u5e38\u89c4\u7528\u6cd5 $ for i in $( COMMAND ) ; do COMMAND ; done # shell \u8fd8\u53ef\u4ee5\u5199\u6210\u7c7b\u4f3cC\u8bed\u8a00\u7684\u5faa\u73af\u65b9\u5f0f $ for (( i = 1 ; i< = 10 ; i++ )) ; do COMMAND ; done while \u5faa\u73af \u00b6 # while \u8bed\u6cd5 while command do statement done \u5177\u4f53\u4f8b\u5b50\uff1a #!/bin/bash x = 1 while [ $x -le 5 ] do echo \"Welcome $x times\" x = $(( $x + 1 )) done until \u5faa\u73af \u00b6 until command do statement done \u5177\u4f53\u4f8b\u5b50\uff1a declare -i i = 10 declare -i sum = 0 until (( i>10 )) do let sum += i let ++i done echo $sum \u65e0\u804a\u7684\u811a\u672c\u7ec3\u4e60 \u00b6 \u751f\u6210\u4e00\u6bb5\u7279\u5b9a\u957f\u5ea6\u7684\u968f\u673aDNA\u5e8f\u5217 # \u751f\u62101000bp\u7684DNA\u5e8f\u5217\u6587\u4ef6 $ for i in { 1 ..1000 } ; do c =( A T C G ) ; echo ${ c [ ` expr $RANDOM % 4 ` ] } >> 1 .fa ; done \u5220\u9664\u6362\u884c\u7b26\\n # \u53bb\u9664\u6587\u4ef6\u7684\u6362\u884c\u7b26\u53f7\u662f\u5e38\u7528\u7684\u547d\u4ee4\uff0c\u6bd4\u5982\u628a\u4e00\u4e2a60\u5b57\u7b26\u957f\u5ea6\u7684\u591a\u884c\u5e8f\u5217\u53d8\u4e3a\u4e00\u884c\u5e8f\u5217\u3002 # sed \u6d41\u5904\u7406\u7684\u7279\u6b8a\u673a\u5236\uff0c\u5c06\u4e00\u884c\u50a8\u5b58\u5728\u6a21\u5f0f\u7a7a\u95f4\u65f6\u4f1a\u53bb\u9664\\n\uff0c\u8fd4\u56de\u65f6\u518d\u52a0\u4e0a\\n # \u56e0\u6b64\u76f4\u63a5\u7528 s/\\n//g \u5339\u914d\u662f\u65e0\u6cd5\u53bb\u9664\u7684 # \u8fd9\u4e2a\u547d\u4ee4\u5176\u5b9e\u662f\u4e00\u4e2a\u591a sed \u547d\u4ee4\uff0c\u7701\u7565\u4e86{} # :a \u5b9a\u4e49\u4e00\u4e2alabel\uff0c\u7528\u6765\u5904\u7406\u8df3\u8f6c $ sed -i ':a;N;$!ba;s/\\n//g' 1 .fa \u7ed9fasta\u5e8f\u5217\u53d6\u540d # \u5229\u7528 sed \u6dfb\u52a0\u5230\u7b2c\u4e00\u884c\uff0c\u6bd4\u5982\u7ed9\u5e8f\u5217\u547d\u540d $ sed -i '1i\\>seq' 1 .fa","title":"01. Shell \u811a\u672c"},{"location":"tutorial/Programming/01_shell/#shell","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e\uff1a{{ git_revision_date }}","title":"Shell \u811a\u672c\u7f16\u7a0b"},{"location":"tutorial/Programming/01_shell/#_1","text":"\u5b57\u7b26\u4e32\u53d8\u91cf\u5185\u7f6e\u7b26\u64cd\u4f5c\u6bd4\u7528\u5916\u90e8\u547d\u4ee4\u5982 expr, awk, sed \u7b49\u8981\u5feb\uff0c\u6240\u4ee5\u80fd\u5185\u7f6e\u7b26\u53f7\u64cd\u4f5c\u7684\u9700\u6c42\uff0c\u5c3d\u53ef\u80fd\u7528\u5b83\u6765\u5b8c\u6210\u3002 # \u5b57\u7b26\u4e32\u8d4b\u503c $ a = \"R1.fastq.gz\" $ echo $a R1.fastq.gz # \u7ed9\u53d8\u91cf\u8d4b\u4e88\u9ed8\u8ba4\u503c $ echo ${ b =100 } 100 $ b = 20 $ echo ${ b =100 } 20 # \u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6 $ echo ${ \\# a } # \u4e0d\u9700\u8981\"\\\"\u7b26\u53f7\uff0c\u7531\u4e8e\u6559\u7a0b\u4ee3\u7801\u89e3\u6790\u95ee\u9898\uff0c\u52a0\u4e0a\\\u4fdd\u8bc1\u6587\u6863\u4ee3\u7801\u89e3\u6790\u6b63\u786e 11 # \u5b57\u7b26\u4e32\u63d0\u53d6 $ echo ${ a : 3 } # \u4ece\u7b2c\u4e09\u4e2a\u5b57\u7b26\u4e32\u540e\u63d0\u53d6 fastq.gz $ echo ${ a : 0 : 2 } # \u4ece\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u63d0\u53d62\u4e2a\u957f\u5ea6\u5b57\u7b26 R1 $ echo ${ a #R1. } # \u4ece\u5b57\u7b26\u4e32\u5f00\u5934\u5220\u9664R1. fastq.gz $ echo ${ a %.fastq.gz } # \u4ece\u5b57\u7b26\u4e32\u7ed3\u5c3e\u5220\u9664\u5339\u914d.fastq.gz\u7684\u5b57\u7b26\u4e32 # \u5b57\u7b26\u4e32\u66ff\u6362 $ echo ${ a /R1/1_1 } # \u5b57\u7b26\u4e32R1\u66ff\u6362\u62101_1, \u4ece\u5934\u5f00\u59cb\u66ff\u6362\u7b2c\u4e00\u4e2a 1_1.fastq.gz $ echo ${ a //R1/1_1 } # \u5b57\u7b26\u4e32R1\u66ff\u6362\u62101_1, \u66ff\u6362\u6240\u6709 1_1.fastq.gz # *\u661f\u53f7\u505a\u4e3a\u901a\u914d\u7b26\uff0c\u53ef\u8868\u793a\u53d8\u91cf\u540d $ a1 = 100 $ a2 = 10 $ echo ${ !a* } # \u663e\u793a\u4ee5a\u5f00\u5934\u58f0\u660e\u7684\u53d8\u91cf a1 a2 # \u9012\u5f52\u5faa\u73af\u53d8\u91cf $ for i in ` echo ${ !a* } ` ; do echo $i ; done a1 a2 # \u5b57\u7b26\u4e32\u6bd4\u8f83 $ s = ATCCGAC $ if [ $s == 'ATCCGAC' ] ; then echo \"yes!\" ; fi yes! $ s1 = TTCCGAC $ if [ $t == 'ATCCGAC' ] ; then echo \"yes!\" ; else echo \"no!\" ; fi no!","title":"\u5b57\u7b26\u4e32\u53d8\u91cf\u5904\u7406"},{"location":"tutorial/Programming/01_shell/#_2","text":"","title":"\u5faa\u73af"},{"location":"tutorial/Programming/01_shell/#for","text":"\u5faa\u73af\u662f\u5e38\u7528\u7684\u529f\u80fd\uff0c\u5f80\u5f80\u88ab\u7528\u6765\u6279\u91cf\u5904\u7406\u6570\u636e\u3002\u5faa\u73af\u5728\u7ec8\u7aef\u4e0b\u76f4\u63a5\u8fd0\u884c oneline shell \u811a\u672c\u6216\u8005\u5199 shell \u7a0b\u5e8f\u5e38\u4f1a\u7528\u5230\u3002\u6700\u5e38\u7528\u7684\u5faa\u73af loop \u65b9\u5f0f\u662f\u7528 for \u6765\u6267\u884c\u3002 # \u793a\u4f8b $ for i in *.fastq.gz ; do bwa aln ref.fasta $i > $i .sai ; done \u6d4b\u5e8f\u65f6\u5e38\u7528\u6d41\u6c34\u53f7\u505a\u4e3a\u6837\u54c1\u540d\u79f0\uff0c\u6bd4\u5982 miseq \u6d4b\u5e8f\u7ed3\u679c\u6570\u636e\u5e38\u5e38\u5982\u4e0b\uff1a 1_S1_R1_L001.fastq.gz 1_S1_R2_L001.fastq.gz 2_S2_R1_L001.fastq.gz 2_S2_R2_L001.fastq.gz 3_S3_R1_L001.fastq.gz 3_S3_R2_L001.fastq.gz ... 12_S12_R1_L001.fastq.gz 12_S12_R2_L001.fastq.gz # \u7528 for \u5faa\u73af\u904d\u5386\u7684\u5199\u6cd51-12 $ for i in 1 2 3 4 5 6 7 8 9 10 11 12 ; do COMMAND ; done $ for i in { 1 ..12 } ; do COMMAND ; done # \u4ece1-12,\u95f4\u96943\u8f93\u51fa\uff0c\u7ed3\u679ci\u4e3a1,4,7,10 $ for i in { 1 ..12..3 } ; do COMMAND ; done # \u5bf9\u4e8e\u540c\u4e00\u79cd\u6587\u4ef6\u683c\u5f0f\uff0c\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u6765\u8fc7\u6ee4 $ for i in 1 .fq 2 .fq 3 .fq 4 .fq ; do COMMAND ; done $ for i in *.fq ; do COMMAND ; done # \u5faa\u73af\u5e38\u89c4\u7528\u6cd5 $ for i in $( COMMAND ) ; do COMMAND ; done # shell \u8fd8\u53ef\u4ee5\u5199\u6210\u7c7b\u4f3cC\u8bed\u8a00\u7684\u5faa\u73af\u65b9\u5f0f $ for (( i = 1 ; i< = 10 ; i++ )) ; do COMMAND ; done","title":"for \u5faa\u73af"},{"location":"tutorial/Programming/01_shell/#while","text":"# while \u8bed\u6cd5 while command do statement done \u5177\u4f53\u4f8b\u5b50\uff1a #!/bin/bash x = 1 while [ $x -le 5 ] do echo \"Welcome $x times\" x = $(( $x + 1 )) done","title":"while \u5faa\u73af"},{"location":"tutorial/Programming/01_shell/#until","text":"until command do statement done \u5177\u4f53\u4f8b\u5b50\uff1a declare -i i = 10 declare -i sum = 0 until (( i>10 )) do let sum += i let ++i done echo $sum","title":"until \u5faa\u73af"},{"location":"tutorial/Programming/01_shell/#_3","text":"\u751f\u6210\u4e00\u6bb5\u7279\u5b9a\u957f\u5ea6\u7684\u968f\u673aDNA\u5e8f\u5217 # \u751f\u62101000bp\u7684DNA\u5e8f\u5217\u6587\u4ef6 $ for i in { 1 ..1000 } ; do c =( A T C G ) ; echo ${ c [ ` expr $RANDOM % 4 ` ] } >> 1 .fa ; done \u5220\u9664\u6362\u884c\u7b26\\n # \u53bb\u9664\u6587\u4ef6\u7684\u6362\u884c\u7b26\u53f7\u662f\u5e38\u7528\u7684\u547d\u4ee4\uff0c\u6bd4\u5982\u628a\u4e00\u4e2a60\u5b57\u7b26\u957f\u5ea6\u7684\u591a\u884c\u5e8f\u5217\u53d8\u4e3a\u4e00\u884c\u5e8f\u5217\u3002 # sed \u6d41\u5904\u7406\u7684\u7279\u6b8a\u673a\u5236\uff0c\u5c06\u4e00\u884c\u50a8\u5b58\u5728\u6a21\u5f0f\u7a7a\u95f4\u65f6\u4f1a\u53bb\u9664\\n\uff0c\u8fd4\u56de\u65f6\u518d\u52a0\u4e0a\\n # \u56e0\u6b64\u76f4\u63a5\u7528 s/\\n//g \u5339\u914d\u662f\u65e0\u6cd5\u53bb\u9664\u7684 # \u8fd9\u4e2a\u547d\u4ee4\u5176\u5b9e\u662f\u4e00\u4e2a\u591a sed \u547d\u4ee4\uff0c\u7701\u7565\u4e86{} # :a \u5b9a\u4e49\u4e00\u4e2alabel\uff0c\u7528\u6765\u5904\u7406\u8df3\u8f6c $ sed -i ':a;N;$!ba;s/\\n//g' 1 .fa \u7ed9fasta\u5e8f\u5217\u53d6\u540d # \u5229\u7528 sed \u6dfb\u52a0\u5230\u7b2c\u4e00\u884c\uff0c\u6bd4\u5982\u7ed9\u5e8f\u5217\u547d\u540d $ sed -i '1i\\>seq' 1 .fa","title":"\u65e0\u804a\u7684\u811a\u672c\u7ec3\u4e60"},{"location":"tutorial/Programming/02_perl/","text":"Perl \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Perl \u662f\u8001\u724c\u7684\u811a\u672c\u8bed\u8a00\uff0c\u4e5f\u662f\u6700\u65e9\u7684\u5e7f\u6cdb\u5e94\u7528\u5728\u751f\u7269\u4fe1\u606f\u5b66\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u7684\u8bed\u8a00\u3002\u867d\u7136\u8fd1\u5e74\u6765\u50cfpython\uff0cR\u7b49\u5176\u4ed6\u8bed\u8a00\u8d8a\u6765\u8d8a\u591a\u7684\u5e94\u7528\u5230\u751f\u7269\u8f6f\u4ef6\u4e2d\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u8bb8\u591a\u8001\u724c\u7684\u751f\u4fe1\u4e13\u5bb6\u5728\u4f7f\u7528perl\u8bed\u8a00\uff0c\u521d\u6b65\u4e86\u89e3\u57fa\u672c\u7684perl\u8bed\u6cd5\u53ef\u4ee5\u5e2e\u52a9\u7406\u89e3\u4ee3\u7801\uff0c\u6216\u8005\u81ea\u5df1\u5f00\u53d1\u7b80\u5355\u7684\u6d41\u7a0b\u811a\u672c\u3002 \u57fa\u672c\u8bed\u6cd5 \u00b6 1. \u6570\u636e\u7c7b\u578b \u00b6 # \u53d8\u91cf\u8d4b\u503c $x = 100 ; $var = \"my data is over\" ; # \u6570\u7ec4\u8d4b\u503c @myarr = ( 1 , 2 , 3 , 4 , 5 ); print @myarr [ 0 ]; # 1 print @myarr [ 4 ]; # 5 # \u54c8\u5e0c\uff0c\u76f8\u5f53\u4e0epython\u7684\u5b57\u5178 %dict = ( 't1' => 100 , 't2' => 300 ); print %dict { 't1' }; # 100 \u5b57\u7b26\u8f6c\u4e49 \u8f6c\u4e49\u5b57\u7b26 \u542b\u4e49 \\ \u53cd\u659c\u7ebf \\' \u5355\u5f15\u53f7 \\\" \u53cc\u5f15\u53f7 \\a \u7cfb\u7edf\u54cd\u94c3 \\b \u9000\u683c \\f \u6362\u9875\u7b26 \\n \u6362\u884c \\r \u56de\u8f66 \\t \u6c34\u5e73\u5236\u8868\u7b26 \\v \u5782\u76f4\u5236\u8868\u7b26 \\0nn \u521b\u5efa\u516b\u8fdb\u5236\u683c\u5f0f\u7684\u6570\u5b57 \\xnn \u521b\u5efa\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u7684\u6570\u5b57 \\cX \u63a7\u5236\u5b57\u7b26\uff0cx\u53ef\u4ee5\u662f\u4efb\u4f55\u5b57\u7b26 \\u \u5f3a\u5236\u4e0b\u4e00\u4e2a\u5b57\u7b26\u4e3a\u5927\u5199 \\l \u5f3a\u5236\u4e0b\u4e00\u4e2a\u5b57\u7b26\u4e3a\u5c0f\u5199 \\U \u5f3a\u5236\u5c06\u6240\u6709\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199 \\L \u5f3a\u5236\u5c06\u6240\u6709\u7684\u5b57\u7b26\u8f6c\u6362\u4e3a\u5c0f\u5199 \\Q \u5c06\u5230\\E\u4e3a\u6b62\u7684\u975e\u5355\u8bcd\uff08non-word\uff09\u5b57\u7b26\u52a0\u4e0a\u53cd\u659c\u7ebf \\E \u7ed3\u675f\\L\u3001\\U\u3001\\Q 2. \u6761\u4ef6\u5224\u65ad \u00b6 # if \u7ed3\u6784 if ( $i < 100 ){ printf \"the result is $i\" ; } # if else \u7ed3\u6784 if ( $i < 100 ){ printf \"the result is $i\" ; } else { printf \"wrong number\" ; } # if elsif else \u7ed3\u6784 if ( $i == 100 ){ printf \"a\" ; } elsif ( $i == 200 ){ printf \"b\" ; } else { printf \"c\" ; } # switch use Switch ; $var = 10 switch ( $var ){ case 1 { print \"yes\" } case 5 { print \"no\" } case 10 { print \"what?\" } else { print \"wrong\" } } # \u4e09\u5143\u8868\u8fbe\u5f0f $t = 2000 $current = ( $t == 2000 )? \"Y\" : \"N\" ; #Y 3. \u5faa\u73af\u7ed3\u6784 \u00b6 # for \u5faa\u73af for ( $i = 0 ; $i < 10 ; $i = $i + 1 ){ print \"loop $i\\n\" ; } # while \u5faa\u73af $i = 0 while ( $i < 10 ){ printf \"i is: $i\\n\" ; $i = $i + 1 ; } # do...while \u5faa\u73af $a = 10 ; do { printf \"a \u7684\u503c\u4e3a: $a\\n\" ; $a = $a + 1 ; } while ( $a < 15 ); # foreach \u5faa\u73af @list = ( 1 , 2 , 3 , 4 , 5 ) foreach $i ( @list ){ print \"i is: $i\\n\" ; } 4. \u51fd\u6570\u4f7f\u7528 \u00b6 # \u5b9a\u4e49\u51fd\u6570 sub MyFunc { # \u8c03\u7528\u53c2\u6570 $n = @_ [ 0 ] + @_ [ 1 ]; print \"hello $n\\n\" ; } # \u8c03\u7528\u51fd\u6570 MyFunc ( 1 , 2 ); 5. \u8bfb\u5199 \u00b6 # \u6253\u5f00file.txt open ( DATA , \"<file.txt\" ) or die \"file.txt \u6587\u4ef6\u65e0\u6cd5\u6253\u5f00 !\" ; # \u8bfb\u53d6\u6587\u4ef6\u53e5\u67c4DATA while ( <DATA> ){ print \"$_\" ; } # \u5173\u95ed\u6587\u4ef6 close ( DATA ) || die \"\u65e0\u6cd5\u5173\u95ed\u6587\u4ef6\" ; # \u8bfb\u5199\u6807\u51c6\u8f93\u5165\u8f93\u51fa $data = <STDIN> print \"$data\" ; 6. \u6b63\u5219\u8868\u8fbe\u5f0f \u00b6 if ( $data =~ m/^something/ ){ ... } # \u5339\u914d\u7ec8\u7aef\u8f93\u5165\uff0c\u5339\u914d\u6210\u529f\u5219\u8f93\u51fa foreach ( <STDIN> ){ chomp ; if ( /perl/ ){ print \"$_ was matched 'gao'\\n\" ; } } \u5728\u7ebf\u6559\u7a0b \u00b6 Perl Tutorial Learn Perl Perl \u4e2d\u6587\u6559\u7a0b Awesome Perl Popular Perl Module Learn Perl in One Video Mastering Perl Scripting","title":"02. Perl \u7f16\u7a0b"},{"location":"tutorial/Programming/02_perl/#perl","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb Perl \u662f\u8001\u724c\u7684\u811a\u672c\u8bed\u8a00\uff0c\u4e5f\u662f\u6700\u65e9\u7684\u5e7f\u6cdb\u5e94\u7528\u5728\u751f\u7269\u4fe1\u606f\u5b66\u8f6f\u4ef6\u5f00\u53d1\u4e2d\u7684\u8bed\u8a00\u3002\u867d\u7136\u8fd1\u5e74\u6765\u50cfpython\uff0cR\u7b49\u5176\u4ed6\u8bed\u8a00\u8d8a\u6765\u8d8a\u591a\u7684\u5e94\u7528\u5230\u751f\u7269\u8f6f\u4ef6\u4e2d\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u8bb8\u591a\u8001\u724c\u7684\u751f\u4fe1\u4e13\u5bb6\u5728\u4f7f\u7528perl\u8bed\u8a00\uff0c\u521d\u6b65\u4e86\u89e3\u57fa\u672c\u7684perl\u8bed\u6cd5\u53ef\u4ee5\u5e2e\u52a9\u7406\u89e3\u4ee3\u7801\uff0c\u6216\u8005\u81ea\u5df1\u5f00\u53d1\u7b80\u5355\u7684\u6d41\u7a0b\u811a\u672c\u3002","title":"Perl"},{"location":"tutorial/Programming/02_perl/#_1","text":"","title":"\u57fa\u672c\u8bed\u6cd5"},{"location":"tutorial/Programming/02_perl/#1","text":"# \u53d8\u91cf\u8d4b\u503c $x = 100 ; $var = \"my data is over\" ; # \u6570\u7ec4\u8d4b\u503c @myarr = ( 1 , 2 , 3 , 4 , 5 ); print @myarr [ 0 ]; # 1 print @myarr [ 4 ]; # 5 # \u54c8\u5e0c\uff0c\u76f8\u5f53\u4e0epython\u7684\u5b57\u5178 %dict = ( 't1' => 100 , 't2' => 300 ); print %dict { 't1' }; # 100 \u5b57\u7b26\u8f6c\u4e49 \u8f6c\u4e49\u5b57\u7b26 \u542b\u4e49 \\ \u53cd\u659c\u7ebf \\' \u5355\u5f15\u53f7 \\\" \u53cc\u5f15\u53f7 \\a \u7cfb\u7edf\u54cd\u94c3 \\b \u9000\u683c \\f \u6362\u9875\u7b26 \\n \u6362\u884c \\r \u56de\u8f66 \\t \u6c34\u5e73\u5236\u8868\u7b26 \\v \u5782\u76f4\u5236\u8868\u7b26 \\0nn \u521b\u5efa\u516b\u8fdb\u5236\u683c\u5f0f\u7684\u6570\u5b57 \\xnn \u521b\u5efa\u5341\u516d\u8fdb\u5236\u683c\u5f0f\u7684\u6570\u5b57 \\cX \u63a7\u5236\u5b57\u7b26\uff0cx\u53ef\u4ee5\u662f\u4efb\u4f55\u5b57\u7b26 \\u \u5f3a\u5236\u4e0b\u4e00\u4e2a\u5b57\u7b26\u4e3a\u5927\u5199 \\l \u5f3a\u5236\u4e0b\u4e00\u4e2a\u5b57\u7b26\u4e3a\u5c0f\u5199 \\U \u5f3a\u5236\u5c06\u6240\u6709\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199 \\L \u5f3a\u5236\u5c06\u6240\u6709\u7684\u5b57\u7b26\u8f6c\u6362\u4e3a\u5c0f\u5199 \\Q \u5c06\u5230\\E\u4e3a\u6b62\u7684\u975e\u5355\u8bcd\uff08non-word\uff09\u5b57\u7b26\u52a0\u4e0a\u53cd\u659c\u7ebf \\E \u7ed3\u675f\\L\u3001\\U\u3001\\Q","title":"1. \u6570\u636e\u7c7b\u578b"},{"location":"tutorial/Programming/02_perl/#2","text":"# if \u7ed3\u6784 if ( $i < 100 ){ printf \"the result is $i\" ; } # if else \u7ed3\u6784 if ( $i < 100 ){ printf \"the result is $i\" ; } else { printf \"wrong number\" ; } # if elsif else \u7ed3\u6784 if ( $i == 100 ){ printf \"a\" ; } elsif ( $i == 200 ){ printf \"b\" ; } else { printf \"c\" ; } # switch use Switch ; $var = 10 switch ( $var ){ case 1 { print \"yes\" } case 5 { print \"no\" } case 10 { print \"what?\" } else { print \"wrong\" } } # \u4e09\u5143\u8868\u8fbe\u5f0f $t = 2000 $current = ( $t == 2000 )? \"Y\" : \"N\" ; #Y","title":"2. \u6761\u4ef6\u5224\u65ad"},{"location":"tutorial/Programming/02_perl/#3","text":"# for \u5faa\u73af for ( $i = 0 ; $i < 10 ; $i = $i + 1 ){ print \"loop $i\\n\" ; } # while \u5faa\u73af $i = 0 while ( $i < 10 ){ printf \"i is: $i\\n\" ; $i = $i + 1 ; } # do...while \u5faa\u73af $a = 10 ; do { printf \"a \u7684\u503c\u4e3a: $a\\n\" ; $a = $a + 1 ; } while ( $a < 15 ); # foreach \u5faa\u73af @list = ( 1 , 2 , 3 , 4 , 5 ) foreach $i ( @list ){ print \"i is: $i\\n\" ; }","title":"3. \u5faa\u73af\u7ed3\u6784"},{"location":"tutorial/Programming/02_perl/#4","text":"# \u5b9a\u4e49\u51fd\u6570 sub MyFunc { # \u8c03\u7528\u53c2\u6570 $n = @_ [ 0 ] + @_ [ 1 ]; print \"hello $n\\n\" ; } # \u8c03\u7528\u51fd\u6570 MyFunc ( 1 , 2 );","title":"4. \u51fd\u6570\u4f7f\u7528"},{"location":"tutorial/Programming/02_perl/#5","text":"# \u6253\u5f00file.txt open ( DATA , \"<file.txt\" ) or die \"file.txt \u6587\u4ef6\u65e0\u6cd5\u6253\u5f00 !\" ; # \u8bfb\u53d6\u6587\u4ef6\u53e5\u67c4DATA while ( <DATA> ){ print \"$_\" ; } # \u5173\u95ed\u6587\u4ef6 close ( DATA ) || die \"\u65e0\u6cd5\u5173\u95ed\u6587\u4ef6\" ; # \u8bfb\u5199\u6807\u51c6\u8f93\u5165\u8f93\u51fa $data = <STDIN> print \"$data\" ;","title":"5. \u8bfb\u5199"},{"location":"tutorial/Programming/02_perl/#6","text":"if ( $data =~ m/^something/ ){ ... } # \u5339\u914d\u7ec8\u7aef\u8f93\u5165\uff0c\u5339\u914d\u6210\u529f\u5219\u8f93\u51fa foreach ( <STDIN> ){ chomp ; if ( /perl/ ){ print \"$_ was matched 'gao'\\n\" ; } }","title":"6. \u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"tutorial/Programming/02_perl/#_2","text":"Perl Tutorial Learn Perl Perl \u4e2d\u6587\u6559\u7a0b Awesome Perl Popular Perl Module Learn Perl in One Video Mastering Perl Scripting","title":"\u5728\u7ebf\u6559\u7a0b"},{"location":"tutorial/Programming/03_python/","text":"Python \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u968f\u7740\u5927\u6570\u636e\u65f6\u4ee3\u7684\u5230\u6765\uff0cPython \u4f5c\u4e3a\u4e00\u95e8\u7b80\u5355\u5feb\u901f\u7684\u811a\u672c\u8bed\u8a00\uff0c\u6210\u4e3a\u4e86\u51e0\u4e4e\u662f\u76ee\u524d\u6700\u70ed\u95e8\u7684\u7f16\u7a0b\u8bed\u8a00\u3002Python \u8bed\u6cd5\u89c1\u5230\uff0c\u4e66\u5199\u5feb\u901f\uff0c\u88ab\u8d8a\u6765\u8d8a\u591a\u7684\u65b0\u8fdb\u5165\u751f\u7269\u4fe1\u606f\u5b66\u9886\u57df\u7684\u5b66\u8005\u4f5c\u4e3a\u9996\u9009\u8bed\u8a00\u8fdb\u884c\u7a0b\u5e8f\u5f00\u53d1\u3002\u5176\u4e30\u5bcc\u7684\u7b2c\u4e09\u65b9\u5e93\u548c\u6d3b\u8dc3\u7684\u793e\u533a\u4e5f\u662f\u63a8\u52a8 Python \u6301\u7eed\u53d1\u5c55\u7684\u52a8\u56e0\u4e4b\u4e00\u3002\u4f60\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u641c\u7d22\u5230\u5927\u91cf\u7684\u904d\u5e03\u4e8e\u5404\u4e2a\u9886\u57df\u7684 Python \u5b66\u4e60\u6750\u6599\u3002\u5982\u679c\u8981\u5904\u7406\u751f\u7269\u6570\u636e\uff0c\u6216\u8005\u770b\u61c2\u522b\u4eba\u7a0b\u5e8f\u4ee3\u7801\uff0c\u638c\u63e1\u4e00\u70b9\u57fa\u672c\u7684\u8bed\u6cd5\u77e5\u8bc6\u662f\u975e\u5e38\u5fc5\u8981\u7684\u3002\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd Python \u7684\u57fa\u672c\u8bed\u6cd5\u548c\u4e0e\u751f\u7269\u4fe1\u606f\u6570\u636e\u5904\u7406\u76f8\u5173\u7684\u8f6f\u4ef6\u548c\u5e93\u3002 \u57fa\u672c\u8bed\u6cd5 \u00b6 1. \u53d8\u91cf\u8d4b\u503c \u00b6 a = 1 b = \"hello\" 2. \u6570\u636e\u7c7b\u578b \u00b6 # \u5b57\u7b26\u4e32 s = \"abc\" s = \"\u4e2d\u6587\" # \u6570\u5b57 x = 1 y = 0.01 # \u5217\u8868 a = [ 1 , 2 , 3 ] # \u5143\u7ec4 b = ( 1 , 2 , 3 ) # \u5b57\u5178 c = { 'var1' : 100 , 'var2' : 200 } 3. \u5bfc\u5165\u6a21\u5757 \u00b6 import Bio from Bio import SeqIO 4. \u5faa\u73af\u63a7\u5236 \u00b6 for i in range ( 0 , 100 ): ... while True : ... 5. \u6761\u4ef6\u5224\u65ad \u00b6 if a == 100 and b is True or c : print ( \"wrong\" ) if a < 100 : print ( \"abc\" ) elif : print ( \"def\" ) else : print ( \"ghi\" ) 6. \u51fd\u6570\u5b9a\u4e49\u4e0e\u8c03\u7528 \u00b6 def my_func ( * args , ** kwargs ): for k , v in kwargs : return k , v # \u8fd0\u884c\u51fd\u6570 print ( \"hello world\" ) from math import sqrt sqrt ( 2 ) \u5e38\u7528\u6a21\u5757 \u00b6 \u5bf9\u4e0e\u751f\u7269\u4fe1\u606f\u6216\u57fa\u56e0\u7ec4\u6570\u636e\u5e38\u7528\u7684\u5b66\u4e60\u548c\u5206\u6790\u6a21\u5757\uff1a Jupyter Notebook numpy scipy biopython matplotlib Python\u5b66\u4e60\u8d44\u6599 \u00b6 Python Cookbook \u4e2d\u6587\u7248 \u53c2\u8003\u8d44\u6599 \u00b6","title":"03. Python \u7f16\u7a0b"},{"location":"tutorial/Programming/03_python/#python","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u968f\u7740\u5927\u6570\u636e\u65f6\u4ee3\u7684\u5230\u6765\uff0cPython \u4f5c\u4e3a\u4e00\u95e8\u7b80\u5355\u5feb\u901f\u7684\u811a\u672c\u8bed\u8a00\uff0c\u6210\u4e3a\u4e86\u51e0\u4e4e\u662f\u76ee\u524d\u6700\u70ed\u95e8\u7684\u7f16\u7a0b\u8bed\u8a00\u3002Python \u8bed\u6cd5\u89c1\u5230\uff0c\u4e66\u5199\u5feb\u901f\uff0c\u88ab\u8d8a\u6765\u8d8a\u591a\u7684\u65b0\u8fdb\u5165\u751f\u7269\u4fe1\u606f\u5b66\u9886\u57df\u7684\u5b66\u8005\u4f5c\u4e3a\u9996\u9009\u8bed\u8a00\u8fdb\u884c\u7a0b\u5e8f\u5f00\u53d1\u3002\u5176\u4e30\u5bcc\u7684\u7b2c\u4e09\u65b9\u5e93\u548c\u6d3b\u8dc3\u7684\u793e\u533a\u4e5f\u662f\u63a8\u52a8 Python \u6301\u7eed\u53d1\u5c55\u7684\u52a8\u56e0\u4e4b\u4e00\u3002\u4f60\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u641c\u7d22\u5230\u5927\u91cf\u7684\u904d\u5e03\u4e8e\u5404\u4e2a\u9886\u57df\u7684 Python \u5b66\u4e60\u6750\u6599\u3002\u5982\u679c\u8981\u5904\u7406\u751f\u7269\u6570\u636e\uff0c\u6216\u8005\u770b\u61c2\u522b\u4eba\u7a0b\u5e8f\u4ee3\u7801\uff0c\u638c\u63e1\u4e00\u70b9\u57fa\u672c\u7684\u8bed\u6cd5\u77e5\u8bc6\u662f\u975e\u5e38\u5fc5\u8981\u7684\u3002\u672c\u8282\u4e3b\u8981\u4ecb\u7ecd Python \u7684\u57fa\u672c\u8bed\u6cd5\u548c\u4e0e\u751f\u7269\u4fe1\u606f\u6570\u636e\u5904\u7406\u76f8\u5173\u7684\u8f6f\u4ef6\u548c\u5e93\u3002","title":"Python"},{"location":"tutorial/Programming/03_python/#_1","text":"","title":"\u57fa\u672c\u8bed\u6cd5"},{"location":"tutorial/Programming/03_python/#1","text":"a = 1 b = \"hello\"","title":"1. \u53d8\u91cf\u8d4b\u503c"},{"location":"tutorial/Programming/03_python/#2","text":"# \u5b57\u7b26\u4e32 s = \"abc\" s = \"\u4e2d\u6587\" # \u6570\u5b57 x = 1 y = 0.01 # \u5217\u8868 a = [ 1 , 2 , 3 ] # \u5143\u7ec4 b = ( 1 , 2 , 3 ) # \u5b57\u5178 c = { 'var1' : 100 , 'var2' : 200 }","title":"2. \u6570\u636e\u7c7b\u578b"},{"location":"tutorial/Programming/03_python/#3","text":"import Bio from Bio import SeqIO","title":"3. \u5bfc\u5165\u6a21\u5757"},{"location":"tutorial/Programming/03_python/#4","text":"for i in range ( 0 , 100 ): ... while True : ...","title":"4. \u5faa\u73af\u63a7\u5236"},{"location":"tutorial/Programming/03_python/#5","text":"if a == 100 and b is True or c : print ( \"wrong\" ) if a < 100 : print ( \"abc\" ) elif : print ( \"def\" ) else : print ( \"ghi\" )","title":"5. \u6761\u4ef6\u5224\u65ad"},{"location":"tutorial/Programming/03_python/#6","text":"def my_func ( * args , ** kwargs ): for k , v in kwargs : return k , v # \u8fd0\u884c\u51fd\u6570 print ( \"hello world\" ) from math import sqrt sqrt ( 2 )","title":"6. \u51fd\u6570\u5b9a\u4e49\u4e0e\u8c03\u7528"},{"location":"tutorial/Programming/03_python/#_2","text":"\u5bf9\u4e0e\u751f\u7269\u4fe1\u606f\u6216\u57fa\u56e0\u7ec4\u6570\u636e\u5e38\u7528\u7684\u5b66\u4e60\u548c\u5206\u6790\u6a21\u5757\uff1a Jupyter Notebook numpy scipy biopython matplotlib","title":"\u5e38\u7528\u6a21\u5757"},{"location":"tutorial/Programming/03_python/#python_1","text":"Python Cookbook \u4e2d\u6587\u7248","title":"Python\u5b66\u4e60\u8d44\u6599"},{"location":"tutorial/Programming/03_python/#_3","text":"","title":"\u53c2\u8003\u8d44\u6599"},{"location":"tutorial/Programming/04_biopython/","text":"Biopython \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u7b80\u4ecb Biopython \u76f8\u5173\u8d44\u6599 \u5b66\u4e60\u6750\u6599 \u00b6 Biopython\u5b98\u65b9\u6587\u6863 Biopython\u5b98\u65b9\u6587\u6863\u4e2d\u6587 \u4f7f\u7528 \u00b6 from Bio import SeqIO \u7528 Biopython \u5904\u7406\u6570\u636e \u00b6 from Bio import Seq \u4f7f\u7528 Entrez \u00b6 Biopython \u5185\u5efa\u4e86\u5bf9 NCBI Entrez API \u64cd\u4f5c\u7684\u6a21\u5757\uff0c\u53ef\u4ee5\u7f16\u5199\u811a\u672c\u8fdb\u884c\u6570\u636e\u5e93\u68c0\u7d22\u7b49\u64cd\u4f5c\u3002 # example from dbSNP import time from Bio import Entrez # email address Entrez . email = \"your@email.com\" # API key from NCBI (https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities/). # 10 queries per second a valid API key, otherwise 3 queries per seconds are allowed for 'None' Entrez . api_key = None # entrez query (term) can be build and test online using web query builder (https://www.ncbi.nlm.nih.gov/snp/advanced) # esearch handle # db: dbsnp # term: gene LPL # usehistory: cache result on server for download in batches # retmax: return max RSID number eShandle = Entrez . esearch ( db = \"snp\" , term = 'LPL[All Fields] AND (pathogenic[Clinical_Significance] AND missense[Function_Class])' , usehistory = \"y\" , retmax = 20 ) # get esearch result eSresult = Entrez . read ( eShandle ) # review results for k in eSresult : print ( k , \":\" , eSresult [ k ]) #Output: Web environment (&WebEnv) and query key (&query_key) parameters specifying the location on the Entrez history server of the list of UIDs matching the Entrez query #https://www.ncbi.nlm.nih.gov/books/NBK25500/#chapter1.Storing_Search_Results # get result RSIDs list 'Idlist' # total rs count rslist = ( eSresult [ 'IdList' ]) # retmax = 20 so print only 20 RSIDs # additional results can be retrieved by batches # download in batches example http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc139 or see below. for rs in rslist : print ( rs ) # get the WebEnv session cookie, and the QueryKey: webenv = eSresult [ \"WebEnv\" ] query_key = eSresult [ \"QueryKey\" ] total_count = int ( eSresult [ \"Count\" ]) query_key = eSresult [ \"QueryKey\" ] retmax = 5 # sample codes adopted from http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc139. fetch_count = 0 for start in range ( 0 , total_count , retmax ): end = min ( total_count , start + retmax ) print ( \"Going to download record %i to %i \" % ( start + 1 , end )) attempt = 0 #fetch_count += 1 while ( attempt < 3 ): # & (fetch_count < 2): attempt += 1 try : fetch_handle = Entrez . efetch ( db = \"snp\" , rettype = \"uilist\" , #available types [uilist | docsum (use retmode=xml)) #retmode=\"xml\", retstart = start , retmax = retmax , webenv = webenv , query_key = query_key ) except HTTPError as err : if 500 <= err . code <= 599 : print ( \"Received error from server %s \" % err ) print ( \"Attempt %i of 3\" % attempt ) time . sleep ( 15 ) else : raise if ( fetch_handle ): data = fetch_handle . read () print ( data ) fetch_handle . close () \u591a\u5e8f\u5217\u6bd4\u5bf9\u6587\u4ef6\u683c\u5f0f\u8f6c\u6362 \u00b6 \u53c2\u8003\uff1a fasta\u683c\u5f0f\u8f6c\u6362\u4e3aphylip seqs = [] with open ( 'aln.fasta' , 'r' ) as f : for line in f : line = line . strip ( ' \\n ' ) if line . startswith ( '&gt;' ): seqs . append ( ' %-14s ' % line [ 1 : 14 ]) # The length of sequence name in test.fasta is 12 else : seqs [ - 1 ] += line with open ( 'aln.phy' , 'w' ) as f : f . write ( ' %s %s \\n %s \\n ' % ( len ( seqs ), len ( seqs [ 0 ]) - 14 , ' \\n ' . join ( seqs ))) # \u7528\u6b63\u5219\u8868\u8fbe\u5f0f import re with open ( 'aln.fasta' , 'r' ) as f : seqs = [( m . group ( 1 ), '' . join ( m . group ( 2 ) . split ())) for m in re . finditer ( r '(?m)^>([^ \\n]+)[^\\n]*([^>]*)' , f . read ())] with open ( 'aln.phy' , 'w' ) as f : f . write ( ' %d %d \\n ' % ( len ( seqs ), len ( seqs [ 0 ][ 1 ]))) for i in seqs : f . write ( ' %-14s %s \\n ' % i ) \u4f7f\u7528 biopython \u89e3\u51b3 # Biopython from Bio import SeqIO from Bio import Seq","title":"04. Biopython \u7f16\u7a0b"},{"location":"tutorial/Programming/04_biopython/#biopython","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb \u7b80\u4ecb Biopython \u76f8\u5173\u8d44\u6599","title":"Biopython"},{"location":"tutorial/Programming/04_biopython/#_1","text":"Biopython\u5b98\u65b9\u6587\u6863 Biopython\u5b98\u65b9\u6587\u6863\u4e2d\u6587","title":"\u5b66\u4e60\u6750\u6599"},{"location":"tutorial/Programming/04_biopython/#_2","text":"from Bio import SeqIO","title":"\u4f7f\u7528"},{"location":"tutorial/Programming/04_biopython/#biopython_1","text":"from Bio import Seq","title":"\u7528 Biopython \u5904\u7406\u6570\u636e"},{"location":"tutorial/Programming/04_biopython/#entrez","text":"Biopython \u5185\u5efa\u4e86\u5bf9 NCBI Entrez API \u64cd\u4f5c\u7684\u6a21\u5757\uff0c\u53ef\u4ee5\u7f16\u5199\u811a\u672c\u8fdb\u884c\u6570\u636e\u5e93\u68c0\u7d22\u7b49\u64cd\u4f5c\u3002 # example from dbSNP import time from Bio import Entrez # email address Entrez . email = \"your@email.com\" # API key from NCBI (https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities/). # 10 queries per second a valid API key, otherwise 3 queries per seconds are allowed for 'None' Entrez . api_key = None # entrez query (term) can be build and test online using web query builder (https://www.ncbi.nlm.nih.gov/snp/advanced) # esearch handle # db: dbsnp # term: gene LPL # usehistory: cache result on server for download in batches # retmax: return max RSID number eShandle = Entrez . esearch ( db = \"snp\" , term = 'LPL[All Fields] AND (pathogenic[Clinical_Significance] AND missense[Function_Class])' , usehistory = \"y\" , retmax = 20 ) # get esearch result eSresult = Entrez . read ( eShandle ) # review results for k in eSresult : print ( k , \":\" , eSresult [ k ]) #Output: Web environment (&WebEnv) and query key (&query_key) parameters specifying the location on the Entrez history server of the list of UIDs matching the Entrez query #https://www.ncbi.nlm.nih.gov/books/NBK25500/#chapter1.Storing_Search_Results # get result RSIDs list 'Idlist' # total rs count rslist = ( eSresult [ 'IdList' ]) # retmax = 20 so print only 20 RSIDs # additional results can be retrieved by batches # download in batches example http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc139 or see below. for rs in rslist : print ( rs ) # get the WebEnv session cookie, and the QueryKey: webenv = eSresult [ \"WebEnv\" ] query_key = eSresult [ \"QueryKey\" ] total_count = int ( eSresult [ \"Count\" ]) query_key = eSresult [ \"QueryKey\" ] retmax = 5 # sample codes adopted from http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc139. fetch_count = 0 for start in range ( 0 , total_count , retmax ): end = min ( total_count , start + retmax ) print ( \"Going to download record %i to %i \" % ( start + 1 , end )) attempt = 0 #fetch_count += 1 while ( attempt < 3 ): # & (fetch_count < 2): attempt += 1 try : fetch_handle = Entrez . efetch ( db = \"snp\" , rettype = \"uilist\" , #available types [uilist | docsum (use retmode=xml)) #retmode=\"xml\", retstart = start , retmax = retmax , webenv = webenv , query_key = query_key ) except HTTPError as err : if 500 <= err . code <= 599 : print ( \"Received error from server %s \" % err ) print ( \"Attempt %i of 3\" % attempt ) time . sleep ( 15 ) else : raise if ( fetch_handle ): data = fetch_handle . read () print ( data ) fetch_handle . close ()","title":"\u4f7f\u7528 Entrez"},{"location":"tutorial/Programming/04_biopython/#_3","text":"\u53c2\u8003\uff1a fasta\u683c\u5f0f\u8f6c\u6362\u4e3aphylip seqs = [] with open ( 'aln.fasta' , 'r' ) as f : for line in f : line = line . strip ( ' \\n ' ) if line . startswith ( '&gt;' ): seqs . append ( ' %-14s ' % line [ 1 : 14 ]) # The length of sequence name in test.fasta is 12 else : seqs [ - 1 ] += line with open ( 'aln.phy' , 'w' ) as f : f . write ( ' %s %s \\n %s \\n ' % ( len ( seqs ), len ( seqs [ 0 ]) - 14 , ' \\n ' . join ( seqs ))) # \u7528\u6b63\u5219\u8868\u8fbe\u5f0f import re with open ( 'aln.fasta' , 'r' ) as f : seqs = [( m . group ( 1 ), '' . join ( m . group ( 2 ) . split ())) for m in re . finditer ( r '(?m)^>([^ \\n]+)[^\\n]*([^>]*)' , f . read ())] with open ( 'aln.phy' , 'w' ) as f : f . write ( ' %d %d \\n ' % ( len ( seqs ), len ( seqs [ 0 ][ 1 ]))) for i in seqs : f . write ( ' %-14s %s \\n ' % i ) \u4f7f\u7528 biopython \u89e3\u51b3 # Biopython from Bio import SeqIO from Bio import Seq","title":"\u591a\u5e8f\u5217\u6bd4\u5bf9\u6587\u4ef6\u683c\u5f0f\u8f6c\u6362"},{"location":"tutorial/Programming/05_r/","text":"R \u8bed\u8a00 \u00b6 {{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb R \u8bed\u8a00\u7684\u57fa\u672c\u4ecb\u7ecd \u57fa\u672c\u8bed\u6cd5 \u00b6 \u6570\u636e\u5206\u6790\u5e38\u7528\u8f6f\u4ef6\u5305 \u00b6 tidyverse: \u6570\u636e\u5904\u7406\u5de5\u5177\u96c6 ggplot2: \u6570\u636e\u53ef\u89c6\u5316 ggtree: \u57fa\u4e8eggplot2\u7684\u8fdb\u5316\u6811\u7ed8\u5236\u5de5\u5177 gggenes: \u7ed8\u5236\u57fa\u56e0\u5206\u5e03\u56fe pheatmap: \u7ed8\u5236\u70ed\u5ea6\u56fe genoPlotR: \u7ed8\u5236\u57fa\u56e0\u5173\u7cfb\u56fe shiny: \u6570\u636e\u53ef\u89c6\u5316\u4ea4\u4e92 Rstudio \u00b6 \u5b89\u88c5Rstudio \u00b6 $ sudo pacman -S rstudio R \u6559\u7a0b \u00b6 R \u5728\u7ebf\u7535\u5b50\u4e66\uff1a - Advanced R - Advanced R solutions - R for Data Science - R Packages R \u76f8\u5173\u8d44\u6e90\uff1a - Awesome R - [] R \u5de5\u5177\uff1a - R Studio Reference \u00b6","title":"05. R \u7f16\u7a0b"},{"location":"tutorial/Programming/05_r/#r","text":"{{ git_page_authors }} \u66f4\u65b0\u4e8e: {{ git_revision_date }} \u5185\u5bb9\u7b80\u4ecb R \u8bed\u8a00\u7684\u57fa\u672c\u4ecb\u7ecd","title":"R \u8bed\u8a00"},{"location":"tutorial/Programming/05_r/#_1","text":"","title":"\u57fa\u672c\u8bed\u6cd5"},{"location":"tutorial/Programming/05_r/#_2","text":"tidyverse: \u6570\u636e\u5904\u7406\u5de5\u5177\u96c6 ggplot2: \u6570\u636e\u53ef\u89c6\u5316 ggtree: \u57fa\u4e8eggplot2\u7684\u8fdb\u5316\u6811\u7ed8\u5236\u5de5\u5177 gggenes: \u7ed8\u5236\u57fa\u56e0\u5206\u5e03\u56fe pheatmap: \u7ed8\u5236\u70ed\u5ea6\u56fe genoPlotR: \u7ed8\u5236\u57fa\u56e0\u5173\u7cfb\u56fe shiny: \u6570\u636e\u53ef\u89c6\u5316\u4ea4\u4e92","title":"\u6570\u636e\u5206\u6790\u5e38\u7528\u8f6f\u4ef6\u5305"},{"location":"tutorial/Programming/05_r/#rstudio","text":"","title":"Rstudio"},{"location":"tutorial/Programming/05_r/#rstudio_1","text":"$ sudo pacman -S rstudio","title":"\u5b89\u88c5Rstudio"},{"location":"tutorial/Programming/05_r/#r_1","text":"R \u5728\u7ebf\u7535\u5b50\u4e66\uff1a - Advanced R - Advanced R solutions - R for Data Science - R Packages R \u76f8\u5173\u8d44\u6e90\uff1a - Awesome R - [] R \u5de5\u5177\uff1a - R Studio","title":"R \u6559\u7a0b"},{"location":"tutorial/Programming/05_r/#reference","text":"","title":"Reference"}]}